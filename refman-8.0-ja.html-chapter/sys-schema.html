<html lang="ja"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>第 28 章 MySQL sys スキーマ</title><link rel="stylesheet" type="text/css" href="mvl.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><link rel="home" href="index.html" title="MySQL 8.0 リファレンスマニュアル"><link rel="up" href="index.html" title="MySQL 8.0 リファレンスマニュアル"><link rel="prev" href="performance-schema.html" title="第 27 章 MySQL パフォーマンススキーマ"><link rel="next" href="connectors-apis.html" title="第 29 章 Connector および API"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">第 28 章 MySQL sys スキーマ</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="performance-schema.html">前</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="connectors-apis.html">次へ</a></td></tr></table><hr></div><div class="status-header"><p class="alert">このページは機械翻訳したものです。</p></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="sys-schema"></a>第 28 章 MySQL sys スキーマ</h1></div></div></div><div class="toc"><p><b>目次</b></p><dl class="toc"><dt><span class="section"><a href="sys-schema.html#sys-schema-prerequisites">28.1 sys スキーマを使用するための前提条件</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-schema-usage">28.2 sys スキーマの使用</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-schema-progress-reporting">28.3 sys スキーマ進捗レポート</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-schema-reference">28.4 sys スキーマオブジェクトリファレンス</a></span></dt><dd><dl><dt><span class="section"><a href="sys-schema.html#sys-schema-object-index">28.4.1 sys スキーマオブジェクトインデックス</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-schema-tables">28.4.2 sys スキーマのテーブルおよびトリガー</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-schema-views">28.4.3 sys スキーマビュー</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-schema-procedures">28.4.4 sys スキーマストアドプロシージャ</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-schema-functions">28.4.5 sys スキーマストアドファンクション</a></span></dt></dl></dd></dl></div><p>
    MySQL 8.0 には、パフォーマンススキーマによって収集されたデータを DBA および開発者が解釈するのに役立つ一連のオブジェクトである <code class="literal">sys</code> スキーマが含まれています。<code class="literal">sys</code> スキーマオブジェクトは、一般的なチューニングおよび診断ユースケースに使用できます。 このスキーマのオブジェクトは次のとおりです: 
  </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
        パフォーマンススキーマデータをわかりやすい形式に要約するビュー。
      </p></li><li class="listitem"><p>
        パフォーマンススキーマの構成や診断レポートの生成などの操作を実行するストアドプロシージャー。
      </p></li><li class="listitem"><p>
        パフォーマンススキーマ構成をクエリーして、フォーマットサービスを提供するストアドファンクション。
      </p></li></ul></div><p>
    新規インストールでは、<code class="option">--initialize</code> または <code class="option">--initialize-insecure</code> オプションを指定して <span class="command"><strong>mysqld</strong></span> を使用する場合、<code class="literal">sys</code> スキーマはデータディレクトリの初期化時にデフォルトでインストールされます。 これが不要な場合は、初期化後に <code class="literal">sys</code> スキーマを手動で削除できます。 
  </p><p>
    MySQL のアップグレード手順では、<code class="literal">sys</code> スキーマは存在するが <code class="literal">version</code> ビューがない場合、このビューが存在しないことはユーザーが作成した <code class="literal">sys</code> スキーマを示していることを前提として、エラーが生成されます。 この場合にアップグレードするには、まず既存の <code class="literal">sys</code> スキーマを削除するか、名前を変更します。 
  </p><a class="indexterm" name="idm45563184867008"></a><p>
    <code class="literal">sys</code> スキーマオブジェクトには、<code class="literal">'mysql.sys'@'localhost'</code>の <code class="literal">DEFINER</code> があります。 専用の <code class="literal">mysql.sys</code> アカウントを使用すると、DBA が <code class="literal">root</code> アカウントの名前を変更または削除した場合に発生する問題を回避できます。 
  </p><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sys-schema-prerequisites"></a>28.1 sys スキーマを使用するための前提条件</h2></div></div></div><p>
      <code class="literal">sys</code> スキーマを使用する前に、このセクションで説明する前提条件を満たしている必要があります。
    </p><p>
      <code class="literal">sys</code> スキーマはパフォーマンススキーマにアクセスする代替手段を提供するため、<code class="literal">sys</code> スキーマが機能するにはパフォーマンススキーマを有効にする必要があります。 <a class="xref" href="performance-schema.html#performance-schema-startup-configuration" title="27.3 パフォーマンススキーマ起動構成">セクション27.3「パフォーマンススキーマ起動構成」</a>を参照してください。 
    </p><p>
      <code class="literal">sys</code> スキーマへの完全なアクセス権を持つユーザーには、次の権限が必要です:
    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          すべての <code class="literal">sys</code> テーブルおよびビューに対する <code class="literal">SELECT</code>
        </p></li><li class="listitem"><p>
          すべての <code class="literal">sys</code> ストアドプロシージャおよびファンクションに対する <code class="literal">EXECUTE</code>
        </p></li><li class="listitem"><p>
          <code class="literal">sys_config</code> テーブルの <code class="literal">INSERT</code> および <code class="literal">UPDATE</code>(変更が行われる場合)
        </p></li><li class="listitem"><p>
          特定の <code class="literal">sys</code> スキーマストアドプロシージャおよびファンクションに対する追加の権限。説明に記載されています (<code class="literal">ps_setup_save()</code> プロシージャなど)
        </p></li></ul></div><p>
      <code class="literal">sys</code> スキーマオブジェクトの基礎となるオブジェクトに対する権限も必要です:
    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          <code class="literal">sys</code> スキーマオブジェクトによってアクセスされる「パフォーマンススキーマ」テーブルに対する <code class="literal">SELECT</code>、および <code class="literal">sys</code> スキーマオブジェクトを使用して更新されるテーブルに対する <code class="literal">UPDATE</code>
        </p></li><li class="listitem"><p>
          <code class="literal">INFORMATION_SCHEMA</code> <code class="literal">INNODB_BUFFER_PAGE</code> テーブル用の <code class="literal">PROCESS</code>
        </p></li></ul></div><p>
      <code class="literal">sys</code> スキーマ機能を最大限に活用するには、特定のパフォーマンススキーマインストゥルメントおよびコンシューマを有効にし、(インストゥルメント用に) 時間を設定する必要があります:
    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          すべての <code class="literal">wait</code> インストゥルメント
        </p></li><li class="listitem"><p>
          すべての <code class="literal">stage</code> インストゥルメント
        </p></li><li class="listitem"><p>
          すべての <code class="literal">statement</code> インストゥルメント
        </p></li><li class="listitem"><p>
          すべてのイベントの <code class="literal"><em class="replaceable"><code>xxx</code></em>_current</code> および <code class="literal"><em class="replaceable"><code>xxx</code></em>_history_long</code> コンシューマ
        </p></li></ul></div><p>
      <code class="literal">sys</code> スキーマ自体を使用して、追加のインストゥルメントおよびコンシューマをすべて有効にできます:
    </p><pre class="programlisting">CALL sys.ps_setup_enable_instrument('wait');
CALL sys.ps_setup_enable_instrument('stage');
CALL sys.ps_setup_enable_instrument('statement');
CALL sys.ps_setup_enable_consumer('current');
CALL sys.ps_setup_enable_consumer('history_long');
</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
        <code class="literal">sys</code> スキーマの多くの用途では、データ収集にはデフォルトのパフォーマンススキーマで十分です。 前述のすべてのインストゥルメントおよびコンシューマを有効にするとパフォーマンスに影響するため、必要な追加の構成のみを有効にすることをお薦めします。 また、追加の構成を有効にすると、次のようにデフォルトの構成を簡単に復元できることに注意してください: 
      </p><pre class="programlisting">CALL sys.ps_setup_reset_to_default(TRUE);
</pre></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sys-schema-usage"></a>28.2 sys スキーマの使用</h2></div></div></div><p>
      <code class="literal">sys</code> スキーマをデフォルトスキーマにすると、そのオブジェクトへの参照をスキーマ名で修飾する必要がなくなります:
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>USE sys;</code></strong>
Database changed
mysql&gt; <strong class="userinput"><code>SELECT * FROM version;</code></strong>
+-------------+---------------+
| sys_version | mysql_version |
+-------------+---------------+
| 2.0.0       | 8.0.13-debug  |
+-------------+---------------+
</pre><p>
      (<code class="literal">version</code> ビューには、<code class="literal">sys</code> スキーマおよび MySQL サーバーのバージョンが表示されます。)
    </p><p>
      別のスキーマがデフォルトである (または単に明示的である) ときに <code class="literal">sys</code> スキーマオブジェクトにアクセスするには、オブジェクト参照をスキーマ名で修飾します:
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT * FROM sys.version;</code></strong>
+-------------+---------------+
| sys_version | mysql_version |
+-------------+---------------+
| 2.0.0       | 8.0.13-debug  |
+-------------+---------------+
</pre><p>
      <code class="literal">sys</code> スキーマには、様々な方法で「パフォーマンススキーマ」テーブルを要約する多数のビューが含まれています。 これらのビューのほとんどはペアになっているため、ペアのメンバーは他のメンバーと同じ名前に <code class="literal">x$</code> 接頭辞を付けたものになります。 たとえば、<code class="literal">host_summary_by_file_io</code> ビューでは、ホスト別にグループ化されたファイル I/O が要約され、ピコ秒からより読みやすい値 (単位付き) に変換された待機時間が表示されます 
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT * FROM sys.host_summary_by_file_io;</code></strong>
+------------+-------+------------+
| host       | ios   | io_latency |
+------------+-------+------------+
| localhost  | 67570 | 5.38 s     |
| background |  3468 | 4.18 s     |
+------------+-------+------------+
</pre><p>
      <code class="literal">x$host_summary_by_file_io</code> ビューには、同じデータが要約されますが、書式設定されていないピコ秒待機時間が表示されます:
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT * FROM sys.x$host_summary_by_file_io;</code></strong>
+------------+-------+---------------+
| host       | ios   | io_latency    |
+------------+-------+---------------+
| localhost  | 67574 | 5380678125144 |
| background |  3474 | 4758696829416 |
+------------+-------+---------------+
</pre><p>
      <code class="literal">x$</code> 接頭辞のないビューは、人間が読みやすくわかりやすい出力を提供することを目的としています。 同じ値を RAW 形式で表示する <code class="literal">x$</code> 接頭辞を持つビューは、データに対して独自の処理を実行する他のツールでの使用を目的としています。 <code class="literal">x$</code> 以外と <code class="literal">x$</code> 以外のビューの違いの詳細は、<a class="xref" href="sys-schema.html#sys-schema-views" title="28.4.3 sys スキーマビュー">セクション28.4.3「sys スキーマビュー」</a> を参照してください。 
    </p><p>
      <code class="literal">sys</code> スキーマオブジェクト定義を調べるには、適切な <code class="literal">SHOW</code> ステートメントまたは <code class="literal">INFORMATION_SCHEMA</code> クエリーを使用します。 たとえば、<code class="literal">session</code> ビューおよび <code class="literal">format_bytes()</code> 関数の定義を調べるには、次のステートメントを使用します: 
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW CREATE VIEW sys.session;</code></strong>
mysql&gt; <strong class="userinput"><code>SHOW CREATE FUNCTION sys.format_bytes;</code></strong>
</pre><p>
      ただし、これらのステートメントは、比較的フォーマットされていない形式で定義を表示します。 読みやすい形式でオブジェクト定義を表示するには、MySQL ソース配布の <code class="filename">scripts/sys_schema</code> にある個々の <code class="filename">.sql</code> ファイルにアクセスします。 MySQL 8.0.18 より前は、ソースは <a class="ulink" href="https://github.com/mysql/mysql-sys" target="_top">https://github.com/mysql/mysql-sys</a> の <code class="literal">sys</code> スキーマ開発 web サイトから入手可能な個別の配布で管理されます。 
    </p><p>
      デフォルトでは、<span class="command"><strong>mysqldump</strong></span> も <span class="command"><strong>mysqlpump</strong></span> も <code class="literal">sys</code> スキーマをダンプしません。 ダンプファイルを生成するには、次のいずれかのコマンドを使用して、コマンドラインで <code class="literal">sys</code> スキーマに明示的に名前を付けます: 
    </p><pre class="programlisting">mysqldump --databases --routines sys &gt; sys_dump.sql
mysqlpump sys &gt; sys_dump.sql
</pre><p>
      ダンプファイルからスキーマを再インストールするには、次のコマンドを使用します:
    </p><pre class="programlisting">mysql &lt; sys_dump.sql
</pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sys-schema-progress-reporting"></a>28.3 sys スキーマ進捗レポート</h2></div></div></div><p>
      次の <code class="literal">sys</code> スキーマビューは、長時間実行トランザクションの進捗レポートを提供します:
    </p><pre class="programlisting">processlist
session
x$processlist
x$session
</pre><p>
      必要なインストゥルメントおよびコンシューマが有効になっている場合、これらのビューの <code class="literal">progress</code> カラムには、進捗レポートをサポートするステージで完了した作業の割合が表示されます。
    </p><p>
      ステージ進捗レポートでは、<code class="literal">events_stages_current</code> コンシューマおよび進捗情報が必要なインストゥルメントを有効にする必要があります。 現在、次のステージの手段は進捗レポートをサポートしています: 
    </p><pre class="programlisting">stage/sql/Copying to tmp table
stage/innodb/alter table (end)
stage/innodb/alter table (flush)
stage/innodb/alter table (insert)
stage/innodb/alter table (log apply index)
stage/innodb/alter table (log apply table)
stage/innodb/alter table (merge sort)
stage/innodb/alter table (read PK and internal sort)
stage/innodb/buffer pool load
</pre><p>
      見積および完了した作業レポートをサポートしていないステージの場合、または必要なインストゥルメントまたはコンシューマが有効になっていない場合、<code class="literal">progress</code> カラムは <code class="literal">NULL</code> です。
    </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sys-schema-reference"></a>28.4 sys スキーマオブジェクトリファレンス</h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="section"><a href="sys-schema.html#sys-schema-object-index">28.4.1 sys スキーマオブジェクトインデックス</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-schema-tables">28.4.2 sys スキーマのテーブルおよびトリガー</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-schema-views">28.4.3 sys スキーマビュー</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-schema-procedures">28.4.4 sys スキーマストアドプロシージャ</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-schema-functions">28.4.5 sys スキーマストアドファンクション</a></span></dt></dl></div><p>
      <code class="literal">sys</code> スキーマには、テーブルとトリガー、ビューおよびストアドプロシージャとストアドファンクションが含まれます。 次の各セクションでは、これらの各オブジェクトについて詳しく説明します。 
    </p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="sys-schema-object-index"></a>28.4.1 sys スキーマオブジェクトインデックス</h3></div></div></div><p>
        次のテーブルに、<code class="literal">sys</code> スキーマオブジェクトをリストし、それぞれについて簡単に説明します。
      </p><div class="table"><a name="sys-schema-tables-table"></a><p class="title"><b>表 28.1 sys スキーマのテーブルおよびトリガー</b></p><div class="table-contents"><table summary="Tables and triggers used in the sys schema implementation"><col style="width: 60%"><col style="width: 40%"><thead><tr>
            <th>テーブルまたはトリガー名</th>
            <th>説明</th>
          </tr></thead><tbody><tr>
            <td><code class="literal">sys_config</code></td>
            <td><code class="literal">sys</code> スキーマ構成オプション</td>
          </tr><tr>
            <td><code class="literal">sys_config_insert_set_user</code></td>
            <td><code class="literal">sys_config</code> 挿入トリガー</td>
          </tr><tr>
            <td><code class="literal">sys_config_update_set_user</code></td>
            <td><code class="literal">sys_config</code> 更新トリガー</td>
          </tr></tbody></table></div></div><br class="table-break"><div class="table"><a name="sys-schema-views-table"></a><p class="title"><b>表 28.2 sys スキーマビュー</b></p><div class="table-contents"><table summary="Views used in the sys schema implementation"><col style="width: 60%"><col style="width: 40%"><thead><tr>
            <th>ビュー名</th>
            <th>説明</th>
          </tr></thead><tbody><tr>
            <td><code class="literal">host_summary</code>, <code class="literal">x$host_summary</code></td>
            <td>ホスト別にグループ化されたステートメントアクティビティ、ファイル I/O,および接続</td>
          </tr><tr>
            <td><code class="literal">host_summary_by_file_io</code>, <code class="literal">x$host_summary_by_file_io</code></td>
            <td>ホスト別にグループ化されたファイル I/O,</td>
          </tr><tr>
            <td><code class="literal">host_summary_by_file_io_type</code>, <code class="literal">x$host_summary_by_file_io_type</code></td>
            <td>ホストおよびイベントタイプ別にグループ化されたファイル I/O,</td>
          </tr><tr>
            <td><code class="literal">host_summary_by_stages</code>, <code class="literal">x$host_summary_by_stages</code></td>
            <td>ホスト別にグループ化されたステートメントステージ</td>
          </tr><tr>
            <td><code class="literal">host_summary_by_statement_latency</code>, <code class="literal">x$host_summary_by_statement_latency</code></td>
            <td>ホスト別にグループ化されたステートメント統計</td>
          </tr><tr>
            <td><code class="literal">host_summary_by_statement_type</code>, <code class="literal">x$host_summary_by_statement_type</code></td>
            <td>実行されたステートメント (ホストおよびステートメント別にグループ化)</td>
          </tr><tr>
            <td><code class="literal">innodb_buffer_stats_by_schema</code>, <code class="literal">x$innodb_buffer_stats_by_schema</code></td>
            <td>スキーマ別にグループ化された <code class="literal">InnoDB</code> バッファ情報</td>
          </tr><tr>
            <td><code class="literal">innodb_buffer_stats_by_table</code>, <code class="literal">x$innodb_buffer_stats_by_table</code></td>
            <td>スキーマおよびテーブル別にグループ化された <code class="literal">InnoDB</code> バッファ情報</td>
          </tr><tr>
            <td><code class="literal">innodb_lock_waits</code>, <code class="literal">x$innodb_lock_waits</code></td>
            <td><code class="literal">InnoDB</code> ロック情報</td>
          </tr><tr>
            <td><code class="literal">io_by_thread_by_latency</code>, <code class="literal">x$io_by_thread_by_latency</code></td>
            <td>スレッド別にグループ化された I/O コンシューマ</td>
          </tr><tr>
            <td><code class="literal">io_global_by_file_by_bytes</code>, <code class="literal">x$io_global_by_file_by_bytes</code></td>
            <td>ファイルおよびバイトでグループ化されたグローバル I/O コンシューマ</td>
          </tr><tr>
            <td><code class="literal">io_global_by_file_by_latency</code>, <code class="literal">x$io_global_by_file_by_latency</code></td>
            <td>ファイルおよび待機時間別にグループ化されたグローバル I/O コンシューマ</td>
          </tr><tr>
            <td><code class="literal">io_global_by_wait_by_bytes</code>, <code class="literal">x$io_global_by_wait_by_bytes</code></td>
            <td>バイト単位でグループ化されたグローバル I/O コンシューマ</td>
          </tr><tr>
            <td><code class="literal">io_global_by_wait_by_latency</code>, <code class="literal">x$io_global_by_wait_by_latency</code></td>
            <td>待機時間別にグループ化されたグローバル I/O コンシューマ</td>
          </tr><tr>
            <td><code class="literal">latest_file_io</code>, <code class="literal">x$latest_file_io</code></td>
            <td>ファイルおよびスレッド別にグループ化された最新の I/O,</td>
          </tr><tr>
            <td><code class="literal">memory_by_host_by_current_bytes</code>, <code class="literal">x$memory_by_host_by_current_bytes</code></td>
            <td>ホスト別にグループ化されたメモリー使用量</td>
          </tr><tr>
            <td><code class="literal">memory_by_thread_by_current_bytes</code>, <code class="literal">x$memory_by_thread_by_current_bytes</code></td>
            <td>スレッド別にグループ化されたメモリー使用量</td>
          </tr><tr>
            <td><code class="literal">memory_by_user_by_current_bytes</code>, <code class="literal">x$memory_by_user_by_current_bytes</code></td>
            <td>ユーザー別にグループ化されたメモリー使用量</td>
          </tr><tr>
            <td><code class="literal">memory_global_by_current_bytes</code>, <code class="literal">x$memory_global_by_current_bytes</code></td>
            <td>割当てタイプ別にグループ化されたメモリー使用</td>
          </tr><tr>
            <td><code class="literal">memory_global_total</code>, <code class="literal">x$memory_global_total</code></td>
            <td>合計メモリー使用量</td>
          </tr><tr>
            <td><code class="literal">metrics</code></td>
            <td>サーバーメトリック</td>
          </tr><tr>
            <td><code class="literal">processlist</code>, <code class="literal">x$processlist</code></td>
            <td>プロセスリスト情報</td>
          </tr><tr>
            <td><code class="literal">ps_check_lost_instrumentation</code></td>
            <td>インストゥルメントが失われた変数</td>
          </tr><tr>
            <td><code class="literal">schema_auto_increment_columns</code></td>
            <td><code class="literal">AUTO_INCREMENT</code> のカラム情報</td>
          </tr><tr>
            <td><code class="literal">schema_index_statistics</code>, <code class="literal">x$schema_index_statistics</code></td>
            <td>インデックス統計</td>
          </tr><tr>
            <td><code class="literal">schema_object_overview</code></td>
            <td>各スキーマ内のオブジェクトのタイプ</td>
          </tr><tr>
            <td><code class="literal">schema_redundant_indexes</code></td>
            <td>重複または重複したインデックス</td>
          </tr><tr>
            <td><code class="literal">schema_table_lock_waits</code>, <code class="literal">x$schema_table_lock_waits</code></td>
            <td>メタデータロックを待機しているセッション</td>
          </tr><tr>
            <td><code class="literal">schema_table_statistics</code>, <code class="literal">x$schema_table_statistics</code></td>
            <td>テーブル統計</td>
          </tr><tr>
            <td><code class="literal">schema_table_statistics_with_buffer</code>, <code class="literal">x$schema_table_statistics_with_buffer</code></td>
            <td>テーブル統計 (<code class="literal">InnoDB</code> バッファプール統計を含む)</td>
          </tr><tr>
            <td><code class="literal">schema_tables_with_full_table_scans</code>, <code class="literal">x$schema_tables_with_full_table_scans</code></td>
            <td>全スキャンでアクセスされているテーブル</td>
          </tr><tr>
            <td><code class="literal">schema_unused_indexes</code></td>
            <td>アクティブに使用されていないインデックス</td>
          </tr><tr>
            <td><code class="literal">session</code>, <code class="literal">x$session</code></td>
            <td>ユーザーセッションのプロセスリスト情報</td>
          </tr><tr>
            <td><code class="literal">session_ssl_status</code></td>
            <td>接続 SSL 情報</td>
          </tr><tr>
            <td><code class="literal">statement_analysis</code>, <code class="literal">x$statement_analysis</code></td>
            <td>ステートメント集計統計</td>
          </tr><tr>
            <td><code class="literal">statements_with_errors_or_warnings</code>, <code class="literal">x$statements_with_errors_or_warnings</code></td>
            <td>エラーまたは警告が生成されたステートメント</td>
          </tr><tr>
            <td><code class="literal">statements_with_full_table_scans</code>, <code class="literal">x$statements_with_full_table_scans</code></td>
            <td>全テーブルスキャンを実行したステートメント</td>
          </tr><tr>
            <td><code class="literal">statements_with_runtimes_in_95th_percentile</code>, <code class="literal">x$statements_with_runtimes_in_95th_percentile</code></td>
            <td>平均ランタイムが最も高いステートメント</td>
          </tr><tr>
            <td><code class="literal">statements_with_sorting</code>, <code class="literal">x$statements_with_sorting</code></td>
            <td>ソートを実行したステートメント</td>
          </tr><tr>
            <td><code class="literal">statements_with_temp_tables</code>, <code class="literal">x$statements_with_temp_tables</code></td>
            <td>一時テーブルを使用したステートメント</td>
          </tr><tr>
            <td><code class="literal">user_summary</code>, <code class="literal">x$user_summary</code></td>
            <td>ユーザーステートメントおよび接続アクティビティ</td>
          </tr><tr>
            <td><code class="literal">user_summary_by_file_io</code>, <code class="literal">x$user_summary_by_file_io</code></td>
            <td>ユーザー別にグループ化したファイル I/O,</td>
          </tr><tr>
            <td><code class="literal">user_summary_by_file_io_type</code>, <code class="literal">x$user_summary_by_file_io_type</code></td>
            <td>ユーザーおよびイベント別にグループ化されたファイル I/O,</td>
          </tr><tr>
            <td><code class="literal">user_summary_by_stages</code>, <code class="literal">x$user_summary_by_stages</code></td>
            <td>ユーザー別にグループ化されたステージイベント</td>
          </tr><tr>
            <td><code class="literal">user_summary_by_statement_latency</code>, <code class="literal">x$user_summary_by_statement_latency</code></td>
            <td>ユーザー別にグループ化されたステートメント統計</td>
          </tr><tr>
            <td><code class="literal">user_summary_by_statement_type</code>, <code class="literal">x$user_summary_by_statement_type</code></td>
            <td>実行されたステートメント (ユーザーおよびステートメント別にグループ化)</td>
          </tr><tr>
            <td><code class="literal">version</code></td>
            <td>現在の <code class="literal">sys</code> スキーマおよび MySQL サーバーのバージョン</td>
          </tr><tr>
            <td><code class="literal">wait_classes_global_by_avg_latency</code>, <code class="literal">x$wait_classes_global_by_avg_latency</code></td>
            <td>待機クラスの平均待機時間 (イベントクラス別にグループ化)</td>
          </tr><tr>
            <td><code class="literal">wait_classes_global_by_latency</code>, <code class="literal">x$wait_classes_global_by_latency</code></td>
            <td>待機クラスの合計待機時間 (イベントクラス別にグループ化)</td>
          </tr><tr>
            <td><code class="literal">waits_by_host_by_latency</code>, <code class="literal">x$waits_by_host_by_latency</code></td>
            <td>ホストおよびイベント別にグループ化された待機イベント</td>
          </tr><tr>
            <td><code class="literal">waits_by_user_by_latency</code>, <code class="literal">x$waits_by_user_by_latency</code></td>
            <td>ユーザーおよびイベント別にグループ化された待機イベント</td>
          </tr><tr>
            <td><code class="literal">waits_global_by_latency</code>, <code class="literal">x$waits_global_by_latency</code></td>
            <td>イベント別にグループ化された待機イベント</td>
          </tr><tr>
            <td><code class="literal">x$ps_digest_95th_percentile_by_avg_us</code></td>
            <td>95th-percentile ビューのヘルパービュー</td>
          </tr><tr>
            <td><code class="literal">x$ps_digest_avg_latency_distribution</code></td>
            <td>95th-percentile ビューのヘルパービュー</td>
          </tr><tr>
            <td><code class="literal">x$ps_schema_table_statistics_io</code></td>
            <td>テーブル統計ビューのヘルパービュー</td>
          </tr><tr>
            <td><code class="literal">x$schema_flattened_keys</code></td>
            <td><code class="literal">schema_redundant_indexes</code> のヘルパービュー</td>
          </tr></tbody></table></div></div><br class="table-break"><div class="table"><a name="sys-schema-procedures-table"></a><p class="title"><b>表 28.3 sys スキーマストアドプロシージャ</b></p><div class="table-contents"><table summary="Stored procedures used in the sys schema implementation"><col style="width: 60%"><col style="width: 40%"><thead><tr>
            <th>プロシージャ名</th>
            <th>説明</th>
          </tr></thead><tbody><tr>
            <td><code class="literal">create_synonym_db()</code></td>
            <td>スキーマのシノニムの作成</td>
          </tr><tr>
            <td><code class="literal">diagnostics()</code></td>
            <td>システム診断情報の収集</td>
          </tr><tr>
            <td><code class="literal">execute_prepared_stmt()</code></td>
            <td>プリペアドステートメントの実行</td>
          </tr><tr>
            <td><code class="literal">ps_setup_disable_background_threads()</code></td>
            <td>バックグラウンドスレッドのインストゥルメンテーションの無効化</td>
          </tr><tr>
            <td><code class="literal">ps_setup_disable_consumer()</code></td>
            <td>コンシューマの無効化</td>
          </tr><tr>
            <td><code class="literal">ps_setup_disable_instrument()</code></td>
            <td>インストゥルメントの無効化</td>
          </tr><tr>
            <td><code class="literal">ps_setup_disable_thread()</code></td>
            <td>スレッドのインストゥルメンテーションの無効化</td>
          </tr><tr>
            <td><code class="literal">ps_setup_enable_background_threads()</code></td>
            <td>バックグラウンドスレッドのインストゥルメンテーションの有効化</td>
          </tr><tr>
            <td><code class="literal">ps_setup_enable_consumer()</code></td>
            <td>コンシューマの有効化</td>
          </tr><tr>
            <td><code class="literal">ps_setup_enable_instrument()</code></td>
            <td>インストゥルメントの有効化</td>
          </tr><tr>
            <td><code class="literal">ps_setup_enable_thread()</code></td>
            <td>スレッドのインストゥルメンテーションの有効化</td>
          </tr><tr>
            <td><code class="literal">ps_setup_reload_saved()</code></td>
            <td>保存されたパフォーマンススキーマ構成のリロード</td>
          </tr><tr>
            <td><code class="literal">ps_setup_reset_to_default()</code></td>
            <td>保存されたパフォーマンススキーマ構成のリセット</td>
          </tr><tr>
            <td><code class="literal">ps_setup_save()</code></td>
            <td>パフォーマンススキーマ構成の保存</td>
          </tr><tr>
            <td><code class="literal">ps_setup_show_disabled()</code></td>
            <td>無効になっているパフォーマンススキーマ構成の表示</td>
          </tr><tr>
            <td><code class="literal">ps_setup_show_disabled_consumers()</code></td>
            <td>無効になっているパフォーマンススキーマコンシューマを表示</td>
          </tr><tr>
            <td><code class="literal">ps_setup_show_disabled_instruments()</code></td>
            <td>無効になっているパフォーマンススキーマインストゥルメントを表示</td>
          </tr><tr>
            <td><code class="literal">ps_setup_show_enabled()</code></td>
            <td>有効なパフォーマンススキーマ構成を表示</td>
          </tr><tr>
            <td><code class="literal">ps_setup_show_enabled_consumers()</code></td>
            <td>有効なパフォーマンススキーマコンシューマを表示</td>
          </tr><tr>
            <td><code class="literal">ps_setup_show_enabled_instruments()</code></td>
            <td>有効なパフォーマンススキーマインストゥルメントを表示</td>
          </tr><tr>
            <td><code class="literal">ps_statement_avg_latency_histogram()</code></td>
            <td>ステートメント待機時間ヒストグラムの表示</td>
          </tr><tr>
            <td><code class="literal">ps_trace_statement_digest()</code></td>
            <td>ダイジェストのトレースパフォーマンススキーマインストゥルメンテーション</td>
          </tr><tr>
            <td><code class="literal">ps_trace_thread()</code></td>
            <td>スレッドのパフォーマンススキーマデータのダンプ</td>
          </tr><tr>
            <td><code class="literal">ps_truncate_all_tables()</code></td>
            <td>パフォーマンススキーマサマリーテーブルの切捨て</td>
          </tr><tr>
            <td><code class="literal">statement_performance_analyzer()</code></td>
            <td>サーバーで実行されているステートメントのレポート</td>
          </tr><tr>
            <td><code class="literal">table_exists()</code></td>
            <td>テーブルが存在するかどうか</td>
          </tr></tbody></table></div></div><br class="table-break"><div class="table"><a name="sys-schema-functions-table"></a><p class="title"><b>表 28.4 sys スキーマストアドファンクション</b></p><div class="table-contents"><table summary="Stored functions used in the sys schema implementation"><col style="width: 60%"><col style="width: 40%"><thead><tr>
            <th>関数名</th>
            <th>説明</th>
          </tr></thead><tbody><tr>
            <td><code class="literal">extract_schema_from_file_name()</code></td>
            <td>ファイルパス名からスキーマ名を抽出</td>
          </tr><tr>
            <td><code class="literal">extract_table_from_file_name()</code></td>
            <td>ファイルパス名からテーブル名を抽出</td>
          </tr><tr>
            <td><code class="literal">format_bytes()</code></td>
            <td>バイト数を単位付きの値に変換</td>
          </tr><tr>
            <td><code class="literal">format_path()</code></td>
            <td>パス名の data および temp-file ディレクトリをシンボリック値に置き換えます</td>
          </tr><tr>
            <td><code class="literal">format_statement()</code></td>
            <td>長いステートメントを固定長に切り捨てる</td>
          </tr><tr>
            <td><code class="literal">format_time()</code></td>
            <td>ピコ秒値を単位付きの値に変換</td>
          </tr><tr>
            <td><code class="literal">list_add()</code></td>
            <td>リストにアイテムを追加</td>
          </tr><tr>
            <td><code class="literal">list_drop()</code></td>
            <td>リストからアイテムを削除</td>
          </tr><tr>
            <td><code class="literal">ps_is_account_enabled()</code></td>
            <td>アカウントインツルメンテーションが有効かどうかを確認</td>
          </tr><tr>
            <td><code class="literal">ps_is_consumer_enabled()</code></td>
            <td>コンシューマが有効かどうかを確認</td>
          </tr><tr>
            <td><code class="literal">ps_is_instrument_default_enabled()</code></td>
            <td>インストゥルメントが有効かどうかを確認</td>
          </tr><tr>
            <td><code class="literal">ps_is_instrument_default_timed()</code></td>
            <td>インストゥルメントが時間指定かどうかを確認</td>
          </tr><tr>
            <td><code class="literal">ps_is_thread_instrumented()</code></td>
            <td>スレッドがインストゥルメントされているかどうかを確認</td>
          </tr><tr>
            <td><code class="literal">ps_thread_account()</code></td>
            <td>スレッド ID のアカウントを返します</td>
          </tr><tr>
            <td><code class="literal">ps_thread_id()</code></td>
            <td>接続 ID のスレッド ID を返します</td>
          </tr><tr>
            <td><code class="literal">ps_thread_stack()</code></td>
            <td>スレッド ID のイベント情報を返します</td>
          </tr><tr>
            <td><code class="literal">ps_thread_trx_info()</code></td>
            <td>スレッド ID のトランザクション情報を返します</td>
          </tr><tr>
            <td><code class="literal">quote_identifier()</code></td>
            <td>引用識別子として文字列を返します</td>
          </tr><tr>
            <td><code class="literal">sys_get_config()</code></td>
            <td><code class="literal">sys</code> スキーマ構成オプションを返します</td>
          </tr><tr>
            <td><code class="literal">version_major()</code></td>
            <td>MySQL サーバーのメジャーバージョン番号</td>
          </tr><tr>
            <td><code class="literal">version_minor()</code></td>
            <td>MySQL サーバーのマイナーバージョン番号</td>
          </tr><tr>
            <td><code class="literal">version_patch()</code></td>
            <td>MySQL サーバーパッチのリリースバージョン番号</td>
          </tr></tbody></table></div></div><br class="table-break"></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="sys-schema-tables"></a>28.4.2 sys スキーマのテーブルおよびトリガー</h3></div></div></div><div class="toc"><dl class="toc"><dt><span class="section"><a href="sys-schema.html#sys-sys-config">28.4.2.1 sys_config テーブル</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-sys-config-insert-set-user">28.4.2.2 sys_config_insert_set_user トリガー</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-sys-config-update-set-user">28.4.2.3 sys_config_update_set_user トリガー</a></span></dt></dl></div><p>
        次の各セクションでは、<code class="literal">sys</code> のスキーマテーブルおよびトリガーについて説明します。
      </p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-sys-config"></a>28.4.2.1 sys_config テーブル</h4></div></div></div><a class="indexterm" name="idm45563184365456"></a><a class="indexterm" name="idm45563184363296"></a><p>
          このテーブルには、オプションごとに 1 行ずつ、<code class="literal">sys</code> スキーマ構成オプションが含まれています。 このテーブルを更新して行われた構成変更は、クライアントセッションおよびサーバーの再起動後も保持されます。 
        </p><p>
          <code class="literal">sys_config</code> テーブルには、次のカラムがあります:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">variable</code>
            </p><p>
              構成オプション名。
            </p></li><li class="listitem"><p>
              <code class="literal">value</code>
            </p><p>
              構成オプションの値。
            </p></li><li class="listitem"><p>
              <code class="literal">set_time</code>
            </p><p>
              行に対する最新の変更のタイムスタンプ。
            </p></li><li class="listitem"><p>
              <code class="literal">set_by</code>
            </p><p>
              行を最後に変更したアカウント。 <code class="literal">sys</code> スキーマのインストール後に行が変更されていない場合、値は <code class="literal">NULL</code> です。 
            </p></li></ul></div><p>
          <code class="literal">sys_config</code> テーブルからの直接読取りの数を最小限に抑える効率的な方法として、このテーブルの値を使用する <code class="literal">sys</code> スキーマ関数は、対応する名前を持つユーザー定義変数 (同じ名前と<code class="literal">@sys.</code> 接頭辞を持つユーザー定義変数) をチェックします。 (たとえば、<code class="literal">diagnostics.include_raw</code> オプションに対応する変数は<code class="literal">@sys.diagnostics.include_raw</code> です。) ユーザー定義変数が現在のセッションに存在し、<code class="literal">NULL</code> 以外の場合、関数は <code class="literal">sys_config</code> テーブルの値よりも優先してその値を使用します。 それ以外の場合、関数はテーブルの値を読み取って使用します。 後者の場合、コール側関数は従来どおり、対応するユーザー定義変数をテーブルの値に設定するため、同じセッション内の構成オプションへのさらなる参照で変数が使用され、テーブルを再度読み取る必要はありません。 
        </p><p>
          たとえば、<code class="literal">statement_truncate_len</code> オプションは、<code class="literal">format_statement()</code> 関数によって戻されるステートメントの最大長を制御します。 デフォルトは 64 です。 現在のセッションの値を一時的に 32 に変更するには、対応する<code class="literal">@sys.statement_truncate_len</code> ユーザー定義変数を設定します: 
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET @stmt = 'SELECT variable, value, set_time, set_by FROM sys_config';</code></strong>
mysql&gt; <strong class="userinput"><code>SELECT sys.format_statement(@stmt);</code></strong>
+----------------------------------------------------------+
| sys.format_statement(@stmt)                              |
+----------------------------------------------------------+
| SELECT variable, value, set_time, set_by FROM sys_config |
+----------------------------------------------------------+
mysql&gt; <strong class="userinput"><code>SET @sys.statement_truncate_len = 32;</code></strong>
mysql&gt; <strong class="userinput"><code>SELECT sys.format_statement(@stmt);</code></strong>
+-----------------------------------+
| sys.format_statement(@stmt)       |
+-----------------------------------+
| SELECT variabl ... ROM sys_config |
+-----------------------------------+
</pre><p>
          セッション内でのその後の <code class="literal">format_statement()</code> の起動では、テーブル (64) に格納されている値ではなく、ユーザー定義の変数値 (32) が引き続き使用されます。
        </p><p>
          ユーザー定義変数の使用を停止し、テーブルの値の使用に戻すには、セッション内で変数を <code class="literal">NULL</code> に設定します:
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET @sys.statement_truncate_len = NULL;</code></strong>
mysql&gt; <strong class="userinput"><code>SELECT sys.format_statement(@stmt);</code></strong>
+----------------------------------------------------------+
| sys.format_statement(@stmt)                              |
+----------------------------------------------------------+
| SELECT variable, value, set_time, set_by FROM sys_config |
+----------------------------------------------------------+
</pre><p>
          または、現在のセッションを終了して (ユーザー定義変数が存在しなくなります)、新しいセッションを開始します。
        </p><p>
          <code class="literal">sys_config</code> テーブルのオプションとユーザー定義変数の間に記述されている従来の関係を利用して、セッションの終了時に終了する一時的な構成変更を行うことができます。 ただし、ユーザー定義変数を設定してから、同じセッション内で対応するテーブルの値を変更した場合、<code class="literal">NULL</code> 以外の値を持つユーザー定義変数が存在するかぎり、変更されたテーブルの値はそのセッションでは使用されません。 (変更されたテーブルの値は、ユーザー定義変数が割り当てられていない他のセッションで使用されます。) 
        </p><p>
          次のリストでは、<code class="literal">sys_config</code> テーブルのオプションおよび対応するユーザー定義変数について説明します:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">diagnostics.allow_i_s_tables</code>, <code class="literal">@sys.diagnostics.allow_i_s_tables</code>
            </p><p>
              このオプションが <code class="literal">ON</code> の場合、<code class="literal">diagnostics()</code> プロシージャは <code class="literal">INFORMATION_SCHEMA.TABLES</code> テーブルに対してテーブルスキャンを実行できます。 多くのテーブルがある場合、これはコストがかかる可能性があります。 デフォルトは <code class="literal">OFF</code> です。 
            </p></li><li class="listitem"><p>
              <code class="literal">diagnostics.include_raw</code>, <code class="literal">@sys.diagnostics.include_raw</code>
            </p><p>
              このオプションが <code class="literal">ON</code> の場合、<code class="literal">diagnostics()</code> プロシージャには <code class="literal">metrics</code> ビューのクエリーからの RAW 出力が含まれます。 デフォルトは <code class="literal">OFF</code> です。 
            </p></li><li class="listitem"><p>
              <code class="literal">ps_thread_trx_info.max_length</code>, <code class="literal">@sys.ps_thread_trx_info.max_length</code>
            </p><p>
              <code class="literal">ps_thread_trx_info()</code> 関数によって生成される JSON 出力の最大長。 デフォルトは 65535 です。 
            </p></li><li class="listitem"><p>
              <code class="literal">statement_performance_analyzer.limit</code>, <code class="literal">@sys.statement_performance_analyzer.limit</code>
            </p><p>
              組込み制限のないビューに対して返す行の最大数。 (たとえば、<code class="literal">statements_with_runtimes_in_95th_percentile</code> ビューには 95 パーセンタイルの平均実行時間を持つステートメントのみが返されるという意味で組込みの制限があります。) デフォルトは 100 です。 
            </p></li><li class="listitem"><p>
              <code class="literal">statement_performance_analyzer.view</code>, <code class="literal">@sys.statement_performance_analyzer.view</code>
            </p><p>
              <code class="literal">statement_performance_analyzer()</code> プロシージャ (<code class="literal">diagnostics()</code> プロシージャによって起動される) で使用されるカスタムクエリーまたはビュー。 オプション値に空白が含まれている場合は、クエリーとして解釈されます。 それ以外の場合は、パフォーマンススキーマ <code class="literal">events_statements_summary_by_digest</code> テーブルをクエリーする既存のビューの名前である必要があります。 <code class="literal">statement_performance_analyzer.limit</code> 構成オプションが 0 より大きい場合、クエリーまたはビュー定義に <code class="literal">LIMIT</code> 句を含めることはできません。 デフォルトは <code class="literal">NULL</code> です (カスタムビューが定義されていません)。 
            </p></li><li class="listitem"><p>
              <code class="literal">statement_truncate_len</code>, <code class="literal">@sys.statement_truncate_len</code>
            </p><p>
              <code class="literal">format_statement()</code> 関数によって戻されるステートメントの最大長。 長いステートメントはこの長さに切り捨てられます。 デフォルトは 64 です。 
            </p></li></ul></div><p>
          その他のオプションは、<code class="literal">sys_config</code> テーブルに追加できます。 たとえば、<code class="literal">diagnostics()</code> および <code class="literal">execute_prepared_stmt()</code> プロシージャでは、<code class="literal">debug</code> オプションが存在する場合にそれを使用しますが、デバッグ出力は通常、対応する<code class="literal">@sys.debug</code> ユーザー定義変数を設定することによって一時的にのみ有効になるため、このオプションはデフォルトで <code class="literal">sys_config</code> テーブルの一部ではありません。 個々のセッションで変数を設定せずにデバッグ出力を有効にするには、テーブルにオプションを追加します: 
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>INSERT INTO sys.sys_config (variable, value) VALUES('debug', 'ON');</code></strong>
</pre><p>
          テーブルのデバッグ設定を変更するには、次の 2 つの操作を行います。 まず、テーブル自体の値を変更します: 
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>UPDATE sys.sys_config</code></strong>
       <strong class="userinput"><code>SET value = 'OFF'</code></strong>
       <strong class="userinput"><code>WHERE variable = 'debug';</code></strong>
</pre><p>
          次に、現在のセッション内でプロシージャを起動する際に、テーブルの変更された値が使用されるようにするには、対応するユーザー定義変数を <code class="literal">NULL</code> に設定します:
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET @sys.debug = NULL;</code></strong>
</pre></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-sys-config-insert-set-user"></a>28.4.2.2 sys_config_insert_set_user トリガー</h4></div></div></div><p>
          <code class="literal">INSERT</code> ステートメントによって <code class="literal">sys_config</code> テーブルに追加された行の場合、<code class="literal">sys_config_insert_set_user</code> トリガーは <code class="literal">set_by</code> カラムを現行ユーザーに設定します。
        </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-sys-config-update-set-user"></a>28.4.2.3 sys_config_update_set_user トリガー</h4></div></div></div><p>
          <code class="literal">sys_config</code> テーブルの <code class="literal">sys_config_update_set_user</code> トリガーは、<code class="literal">sys_config_insert_set_user</code> トリガーと似ていますが、<code class="literal">UPDATE</code> ステートメントの場合です。
        </p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="sys-schema-views"></a>28.4.3 sys スキーマビュー</h3></div></div></div><div class="toc"><dl class="toc"><dt><span class="section"><a href="sys-schema.html#sys-host-summary">28.4.3.1 host_summary および x$host_summary のビュー</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-host-summary-by-file-io">28.4.3.2 host_summary_by_file_io および x$host_summary_by_file_io のビュー</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-host-summary-by-file-io-type">28.4.3.3 host_summary_by_file_io_type および x$host_summary_by_file_io_type ビュー</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-host-summary-by-stages">28.4.3.4 host_summary_by_stages および x$host_summary_by_stages のビュー</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-host-summary-by-statement-latency">28.4.3.5 host_summary_by_statement_latency および x$host_summary_by_statement_latency ビュー</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-host-summary-by-statement-type">28.4.3.6 host_summary_by_statement_type および x$host_summary_by_statement_type のビュー</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-innodb-buffer-stats-by-schema">28.4.3.7 innodb_buffer_stats_by_schema および x$innodb_buffer_stats_by_schema のビュー</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-innodb-buffer-stats-by-table">28.4.3.8 innodb_buffer_stats_by_table および x$innodb_buffer_stats_by_table のビュー</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-innodb-lock-waits">28.4.3.9 innodb_lock_waits および x$innodb_lock_waits のビュー</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-io-by-thread-by-latency">28.4.3.10 io_by_thread_by_latency および x$io_by_thread_by_latency のビュー</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-io-global-by-file-by-bytes">28.4.3.11 io_global_by_file_by_bytes および x$io_global_by_file_by_bytes のビュー</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-io-global-by-file-by-latency">28.4.3.12 io_global_by_file_by_latency および x$io_global_by_file_by_latency のビュー</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-io-global-by-wait-by-bytes">28.4.3.13 io_global_by_wait_by_bytes および x$io_global_by_wait_by_bytes のビュー</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-io-global-by-wait-by-latency">28.4.3.14 io_global_by_wait_by_latency および x$io_global_by_wait_by_latency ビュー</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-latest-file-io">28.4.3.15 latest_file_io および x$latest_file_io のビュー</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-memory-by-host-by-current-bytes">28.4.3.16 memory_by_host_by_current_bytes および x$memory_by_host_by_current_bytes ビュー</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-memory-by-thread-by-current-bytes">28.4.3.17 memory_by_thread_by_current_bytes および x$memory_by_thread_by_current_bytes のビュー</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-memory-by-user-by-current-bytes">28.4.3.18 memory_by_user_by_current_bytes および x$memory_by_user_by_current_bytes のビュー</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-memory-global-by-current-bytes">28.4.3.19 memory_global_by_current_bytes および x$memory_global_by_current_bytes のビュー</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-memory-global-total">28.4.3.20 memory_global_total および x$memory_global_total のビュー</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-metrics">28.4.3.21 メトリックビュー</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-processlist">28.4.3.22 processlist ビューと x$processlist ビュー</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-ps-check-lost-instrumentation">28.4.3.23 ps_check_lost_instrumentation ビュー</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-schema-auto-increment-columns">28.4.3.24 schema_auto_increment_columns ビュー</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-schema-index-statistics">28.4.3.25 schema_index_statistics および x$schema_index_statistics のビュー</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-schema-object-overview">28.4.3.26 schema_object_overview ビュー</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-schema-redundant-indexes">28.4.3.27 schema_redundant_indexes および x$schema_flattened_keys のビュー</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-schema-table-lock-waits">28.4.3.28 schema_table_lock_waits および x$schema_table_lock_waits のビュー</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-schema-table-statistics">28.4.3.29 schema_table_statistics および x$schema_table_statistics のビュー</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-schema-table-statistics-with-buffer">28.4.3.30 schema_table_statistics_with_buffer および x$schema_table_statistics_with_buffer のビュー</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-schema-tables-with-full-table-scans">28.4.3.31 schema_tables_with_full_table_scans および x$schema_tables_with_full_table_scans のビュー</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-schema-unused-indexes">28.4.3.32 schema_unused_indexes ビュー</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-session">28.4.3.33 セッションおよび x$session ビュー</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-session-ssl-status">28.4.3.34 session_ssl_status ビュー</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-statement-analysis">28.4.3.35 statement_analysis および x$statement_analysis のビュー</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-statements-with-errors-or-warnings">28.4.3.36 statements_with_errors_or_warnings および x$statements_with_errors_or_warnings ビュー</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-statements-with-full-table-scans">28.4.3.37 statements_with_full_table_scans および x$statements_with_full_table_scans のビュー</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-statements-with-runtimes-in-95th-percentile">28.4.3.38 statements_with_runtimes_in_95th_percentile および x$statements_with_runtimes_in_95th_percentile のビュー</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-statements-with-sorting">28.4.3.39 statements_with_sorting および x$statements_with_sorting のビュー</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-statements-with-temp-tables">28.4.3.40 statements_with_temp_tables および x$statements_with_temp_tables のビュー</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-user-summary">28.4.3.41 user_summary および x$user_summary のビュー</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-user-summary-by-file-io">28.4.3.42 user_summary_by_file_io および x$user_summary_by_file_io のビュー</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-user-summary-by-file-io-type">28.4.3.43 user_summary_by_file_io_type および x$user_summary_by_file_io_type のビュー</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-user-summary-by-stages">28.4.3.44 user_summary_by_stages および x$user_summary_by_stages のビュー</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-user-summary-by-statement-latency">28.4.3.45 user_summary_by_statement_latency および x$user_summary_by_statement_latency のビュー</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-user-summary-by-statement-type">28.4.3.46 user_summary_by_statement_type および x$user_summary_by_statement_type のビュー</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-version">28.4.3.47 バージョンビュー</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-wait-classes-global-by-avg-latency">28.4.3.48 wait_classes_global_by_avg_latency および x$wait_classes_global_by_avg_latency のビュー</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-wait-classes-global-by-latency">28.4.3.49 wait_classes_global_by_latency および x$wait_classes_global_by_latency ビュー</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-waits-by-host-by-latency">28.4.3.50 waits_by_host_by_latency および x$waits_by_host_by_latency のビュー</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-waits-by-user-by-latency">28.4.3.51 waits_by_user_by_latency および x$waits_by_user_by_latency のビュー</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-waits-global-by-latency">28.4.3.52 waits_global_by_latency および x$waits_global_by_latency のビュー</a></span></dt></dl></div><p>
        次の各セクションでは、<code class="literal">sys</code> スキーマビューについて説明します。
      </p><a class="indexterm" name="idm45563184256160"></a><a class="indexterm" name="idm45563184253984"></a><p>
        <code class="literal">sys</code> スキーマには、様々な方法で「パフォーマンススキーマ」テーブルを要約する多数のビューが含まれています。 これらのビューのほとんどはペアになっているため、ペアのメンバーは他のメンバーと同じ名前に <code class="literal">x$</code> 接頭辞を付けたものになります。 たとえば、<code class="literal">host_summary_by_file_io</code> ビューでは、ホスト別にグループ化されたファイル I/O が要約され、ピコ秒からより読みやすい値 (単位付き) に変換された待機時間が表示されます 
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT * FROM sys.host_summary_by_file_io;</code></strong>
+------------+-------+------------+
| host       | ios   | io_latency |
+------------+-------+------------+
| localhost  | 67570 | 5.38 s     |
| background |  3468 | 4.18 s     |
+------------+-------+------------+
</pre><p>
        <code class="literal">x$host_summary_by_file_io</code> ビューには、同じデータが要約されますが、書式設定されていないピコ秒待機時間が表示されます:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT * FROM sys.x$host_summary_by_file_io;</code></strong>
+------------+-------+---------------+
| host       | ios   | io_latency    |
+------------+-------+---------------+
| localhost  | 67574 | 5380678125144 |
| background |  3474 | 4758696829416 |
+------------+-------+---------------+
</pre><p>
        <code class="literal">x$</code> 接頭辞のないビューは、わかりやすく読みやすい出力を提供することを目的としています。 同じ値を RAW 形式で表示する <code class="literal">x$</code> 接頭辞を持つビューは、データに対して独自の処理を実行する他のツールでの使用を目的としています。 
      </p><p>
        <code class="literal">x$</code> 接頭辞のないビューは、次の点で対応する <code class="literal">x$</code> ビューと異なります:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            バイト数は、<code class="literal">format_bytes()</code> を使用してサイズ単位でフォーマットされます。
          </p></li><li class="listitem"><p>
            時間値は、<code class="literal">format_time()</code> を使用して時間単位で書式設定されます。
          </p></li><li class="listitem"><p>
            SQL ステートメントは、<code class="literal">format_statement()</code> を使用して最大表示幅に切り捨てられます。
          </p></li><li class="listitem"><p>
            パス名は、<code class="literal">format_path()</code> を使用して短縮されます。
          </p></li></ul></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-host-summary"></a>28.4.3.1 host_summary および x$host_summary のビュー</h4></div></div></div><a class="indexterm" name="idm45563184229136"></a><a class="indexterm" name="idm45563184226976"></a><a class="indexterm" name="idm45563184224896"></a><a class="indexterm" name="idm45563184222800"></a><p>
          これらのビューには、ホストごとにグループ化されたステートメントアクティビティ、ファイル I/O,および接続が要約されます。
        </p><p>
          <code class="literal">host_summary</code> ビューと <code class="literal">x$host_summary</code> ビューには、次のカラムがあります:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">ホスト</code>
            </p><p>
              クライアントの接続元のホスト。 基礎となる「パフォーマンススキーマ」テーブルの <code class="literal">HOST</code> カラムが <code class="literal">NULL</code> である行はバックグラウンドスレッド用とみなされ、<code class="literal">background</code> のホスト名でレポートされます。 
            </p></li><li class="listitem"><p>
              <code class="literal">statements</code>
            </p><p>
              ホストのステートメントの合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">statement_latency</code>
            </p><p>
              ホストの時間指定ステートメントの合計待機時間。
            </p></li><li class="listitem"><p>
              <code class="literal">statement_avg_latency</code>
            </p><p>
              ホストの時間指定ステートメント当たりの平均待機時間。
            </p></li><li class="listitem"><p>
              <code class="literal">table_scans</code>
            </p><p>
              ホストのテーブルスキャンの合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">file_ios</code>
            </p><p>
              ホストのファイル I/O イベントの合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">file_io_latency</code>
            </p><p>
              ホストの時間指定ファイル I/O イベントの合計待機時間。
            </p></li><li class="listitem"><p>
              <code class="literal">current_connections</code>
            </p><p>
              ホストの現在の接続数。
            </p></li><li class="listitem"><p>
              <code class="literal">total_connections</code>
            </p><p>
              ホストの合計の接続数。
            </p></li><li class="listitem"><p>
              <code class="literal">unique_users</code>
            </p><p>
              ホストの個別ユーザーの数。
            </p></li><li class="listitem"><p>
              <code class="literal">current_memory</code>
            </p><p>
              ホストに割り当てられている現在のメモリー量。
            </p></li><li class="listitem"><p>
              <code class="literal">total_memory_allocated</code>
            </p><p>
              ホストに割り当てられたメモリーの合計量。
            </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-host-summary-by-file-io"></a>28.4.3.2 host_summary_by_file_io および x$host_summary_by_file_io のビュー</h4></div></div></div><a class="indexterm" name="idm45563184189008"></a><a class="indexterm" name="idm45563184186832"></a><a class="indexterm" name="idm45563184184720"></a><a class="indexterm" name="idm45563184182608"></a><p>
          これらのビューは、ホストごとにグループ化されたファイル I/O,を要約します。 デフォルトでは、行は合計ファイル I/O レイテンシの降順でソートされます。 
        </p><p>
          <code class="literal">host_summary_by_file_io</code> ビューと <code class="literal">x$host_summary_by_file_io</code> ビューには、次のカラムがあります:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">ホスト</code>
            </p><p>
              クライアントの接続元のホスト。 基礎となる「パフォーマンススキーマ」テーブルの <code class="literal">HOST</code> カラムが <code class="literal">NULL</code> である行はバックグラウンドスレッド用とみなされ、<code class="literal">background</code> のホスト名でレポートされます。 
            </p></li><li class="listitem"><p>
              <code class="literal">ios</code>
            </p><p>
              ホストのファイル I/O イベントの合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">io_latency</code>
            </p><p>
              ホストの時間指定ファイル I/O イベントの合計待機時間。
            </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-host-summary-by-file-io-type"></a>28.4.3.3 host_summary_by_file_io_type および x$host_summary_by_file_io_type ビュー</h4></div></div></div><a class="indexterm" name="idm45563184166784"></a><a class="indexterm" name="idm45563184164592"></a><a class="indexterm" name="idm45563184162464"></a><a class="indexterm" name="idm45563184160320"></a><p>
          これらのビューには、ホストおよびイベントタイプ別にグループ化されたファイル I/O,が要約されます。 デフォルトでは、行はホストでソートされ、合計 I/O レイテンシが降順になります。 
        </p><p>
          <code class="literal">host_summary_by_file_io_type</code> ビューと <code class="literal">x$host_summary_by_file_io_type</code> ビューには、次のカラムがあります:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">ホスト</code>
            </p><p>
              クライアントの接続元のホスト。 基礎となる「パフォーマンススキーマ」テーブルの <code class="literal">HOST</code> カラムが <code class="literal">NULL</code> である行はバックグラウンドスレッド用とみなされ、<code class="literal">background</code> のホスト名でレポートされます。 
            </p></li><li class="listitem"><p>
              <code class="literal">event_name</code>
            </p><p>
              ファイル I/O イベント名。
            </p></li><li class="listitem"><p>
              <code class="literal">total</code>
            </p><p>
              ホストで発生したファイル I/O イベントの合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">total_latency</code>
            </p><p>
              ホストのファイル I/O イベントの発生時間の合計待機時間。
            </p></li><li class="listitem"><p>
              <code class="literal">max_latency</code>
            </p><p>
              ホストのファイル I/O イベントの時間指定発生の最大単一待機時間。
            </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-host-summary-by-stages"></a>28.4.3.4 host_summary_by_stages および x$host_summary_by_stages のビュー</h4></div></div></div><a class="indexterm" name="idm45563184140352"></a><a class="indexterm" name="idm45563184138176"></a><a class="indexterm" name="idm45563184136064"></a><a class="indexterm" name="idm45563184133952"></a><p>
          これらのビューは、ホストごとにグループ化されたステートメントステージを要約します。 デフォルトでは、行はホストおよび合計レイテンシの降順でソートされます。 
        </p><p>
          <code class="literal">host_summary_by_stages</code> ビューと <code class="literal">x$host_summary_by_stages</code> ビューには、次のカラムがあります:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">ホスト</code>
            </p><p>
              クライアントの接続元のホスト。 基礎となる「パフォーマンススキーマ」テーブルの <code class="literal">HOST</code> カラムが <code class="literal">NULL</code> である行はバックグラウンドスレッド用とみなされ、<code class="literal">background</code> のホスト名でレポートされます。 
            </p></li><li class="listitem"><p>
              <code class="literal">event_name</code>
            </p><p>
              ステージイベント名。
            </p></li><li class="listitem"><p>
              <code class="literal">total</code>
            </p><p>
              ホストのステージイベントの発生の合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">total_latency</code>
            </p><p>
              ホストのステージイベントの時間指定発生の合計待機時間。
            </p></li><li class="listitem"><p>
              <code class="literal">avg_latency</code>
            </p><p>
              ホストのステージイベントの発生時間ごとの平均待機時間。
            </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-host-summary-by-statement-latency"></a>28.4.3.5 host_summary_by_statement_latency および x$host_summary_by_statement_latency ビュー</h4></div></div></div><a class="indexterm" name="idm45563184114096"></a><a class="indexterm" name="idm45563184111840"></a><a class="indexterm" name="idm45563184109696"></a><a class="indexterm" name="idm45563184107536"></a><p>
          これらのビューには、ホストごとにグループ化されたステートメント全体の統計が要約されます。 デフォルトでは、行は合計レイテンシの降順でソートされます。 
        </p><p>
          <code class="literal">host_summary_by_statement_latency</code> ビューと <code class="literal">x$host_summary_by_statement_latency</code> ビューには、次のカラムがあります:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">ホスト</code>
            </p><p>
              クライアントの接続元のホスト。 基礎となる「パフォーマンススキーマ」テーブルの <code class="literal">HOST</code> カラムが <code class="literal">NULL</code> である行はバックグラウンドスレッド用とみなされ、<code class="literal">background</code> のホスト名でレポートされます。 
            </p></li><li class="listitem"><p>
              <code class="literal">total</code>
            </p><p>
              ホストのステートメントの合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">total_latency</code>
            </p><p>
              ホストの時間指定ステートメントの合計待機時間。
            </p></li><li class="listitem"><p>
              <code class="literal">max_latency</code>
            </p><p>
              ホストの時間指定ステートメントの最大単一待機時間。
            </p></li><li class="listitem"><p>
              <code class="literal">lock_latency</code>
            </p><p>
              ホストの時間指定ステートメントによるロックを待機する合計時間。
            </p></li><li class="listitem"><p>
              <code class="literal">rows_sent</code>
            </p><p>
              ホストのステートメントによって返された行の合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">rows_examined</code>
            </p><p>
              ホストのステートメントによってストレージエンジンから読み取られた行の合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">rows_affected</code>
            </p><p>
              ホストのステートメントの影響を受ける行の合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">full_scans</code>
            </p><p>
              ホストのステートメントによる全テーブルスキャンの合計数。
            </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-host-summary-by-statement-type"></a>28.4.3.6 host_summary_by_statement_type および x$host_summary_by_statement_type のビュー</h4></div></div></div><a class="indexterm" name="idm45563184079264"></a><a class="indexterm" name="idm45563184077008"></a><a class="indexterm" name="idm45563184074864"></a><a class="indexterm" name="idm45563184072720"></a><p>
          これらのビューには、実行されたステートメントに関する情報が、ホストおよびステートメントタイプ別にグループ化されて要約されます。 デフォルトでは、行はホストおよび合計レイテンシの降順でソートされます。 
        </p><p>
          <code class="literal">host_summary_by_statement_type</code> ビューと <code class="literal">x$host_summary_by_statement_type</code> ビューには、次のカラムがあります:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">ホスト</code>
            </p><p>
              クライアントの接続元のホスト。 基礎となる「パフォーマンススキーマ」テーブルの <code class="literal">HOST</code> カラムが <code class="literal">NULL</code> である行はバックグラウンドスレッド用とみなされ、<code class="literal">background</code> のホスト名でレポートされます。 
            </p></li><li class="listitem"><p>
              <code class="literal">statement</code>
            </p><p>
              ステートメントイベント名の最終コンポーネント。
            </p></li><li class="listitem"><p>
              <code class="literal">total</code>
            </p><p>
              ホストに対するステートメントイベントの発生の合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">total_latency</code>
            </p><p>
              ホストに対するステートメントイベントの発生時間の合計待機時間。
            </p></li><li class="listitem"><p>
              <code class="literal">max_latency</code>
            </p><p>
              ホストのステートメントイベントの時間指定発生の最大単一待機時間。
            </p></li><li class="listitem"><p>
              <code class="literal">lock_latency</code>
            </p><p>
              ホストのステートメントイベントの発生時間によるロックの合計待機時間。
            </p></li><li class="listitem"><p>
              <code class="literal">rows_sent</code>
            </p><p>
              ホストのステートメントイベントの発生によって返された行の合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">rows_examined</code>
            </p><p>
              ホストのステートメントイベントの発生によってストレージエンジンから読み取られた行の合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">rows_affected</code>
            </p><p>
              ホストのステートメントイベントの発生によって影響を受ける行の合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">full_scans</code>
            </p><p>
              ホストのステートメントイベントの発生による全テーブルスキャンの合計数。
            </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-innodb-buffer-stats-by-schema"></a>28.4.3.7 innodb_buffer_stats_by_schema および x$innodb_buffer_stats_by_schema のビュー</h4></div></div></div><a class="indexterm" name="idm45563184041872"></a><a class="indexterm" name="idm45563184039680"></a><a class="indexterm" name="idm45563184037552"></a><a class="indexterm" name="idm45563184035408"></a><p>
          これらのビューには、スキーマ別にグループ化された <code class="literal">INFORMATION_SCHEMA</code> <code class="literal">INNODB_BUFFER_PAGE</code> テーブルの情報がまとめられています。 デフォルトでは、行は降順のバッファサイズでソートされます。 
        </p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">警告</div><p>
            <code class="literal">INNODB_BUFFER_PAGE</code> テーブルにアクセスするビューをクエリーすると、パフォーマンスに影響する可能性があります。 パフォーマンスへの影響を認識し、許容できると判断した場合を除き、本番システムでこれらのビューをクエリーしないでください。 本番システムのパフォーマンスへの影響を回避するには、調査する問題を再現し、テストインスタンスのバッファプール統計をクエリーします。 
          </p></div><p>
          <code class="literal">innodb_buffer_stats_by_schema</code> ビューと <code class="literal">x$innodb_buffer_stats_by_schema</code> ビューには、次のカラムがあります:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">object_schema</code>
            </p><p>
              オブジェクトのスキーマ名。テーブルが <code class="literal">InnoDB</code> ストレージエンジンに属している場合は <code class="literal">InnoDB System</code>。
            </p></li><li class="listitem"><p>
              <code class="literal">allocated</code>
            </p><p>
              スキーマに割り当てられた合計バイト数。
            </p></li><li class="listitem"><p>
              <code class="literal">data</code>
            </p><p>
              スキーマに割り当てられたデータバイトの合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">pages</code>
            </p><p>
              スキーマに割り当てられたページの合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">pages_hashed</code>
            </p><p>
              スキーマに割り当てられたハッシュページの合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">pages_old</code>
            </p><p>
              スキーマに割り当てられた古いページの合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">rows_cached</code>
            </p><p>
              スキーマのキャッシュされた行の合計数。
            </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-innodb-buffer-stats-by-table"></a>28.4.3.8 innodb_buffer_stats_by_table および x$innodb_buffer_stats_by_table のビュー</h4></div></div></div><a class="indexterm" name="idm45563184008480"></a><a class="indexterm" name="idm45563184006288"></a><a class="indexterm" name="idm45563184004160"></a><a class="indexterm" name="idm45563184002016"></a><p>
          これらのビューには、スキーマおよびテーブル別にグループ化された <code class="literal">INFORMATION_SCHEMA</code> <code class="literal">INNODB_BUFFER_PAGE</code> テーブルの情報がまとめられています。 デフォルトでは、行は降順のバッファサイズでソートされます。 
        </p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">警告</div><p>
            <code class="literal">INNODB_BUFFER_PAGE</code> テーブルにアクセスするビューをクエリーすると、パフォーマンスに影響する可能性があります。 パフォーマンスへの影響を認識し、許容できると判断した場合を除き、本番システムでこれらのビューをクエリーしないでください。 本番システムのパフォーマンスへの影響を回避するには、調査する問題を再現し、テストインスタンスのバッファプール統計をクエリーします。 
          </p></div><p>
          <code class="literal">innodb_buffer_stats_by_table</code> ビューと <code class="literal">x$innodb_buffer_stats_by_table</code> ビューには、次のカラムがあります:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">object_schema</code>
            </p><p>
              オブジェクトのスキーマ名。テーブルが <code class="literal">InnoDB</code> ストレージエンジンに属している場合は <code class="literal">InnoDB System</code>。
            </p></li><li class="listitem"><p>
              <code class="literal">object_name</code>
            </p><p>
              テーブル名
            </p></li><li class="listitem"><p>
              <code class="literal">allocated</code>
            </p><p>
              テーブルに割り当てられた合計バイト数。
            </p></li><li class="listitem"><p>
              <code class="literal">data</code>
            </p><p>
              テーブルに割り当てられたデータバイト数。
            </p></li><li class="listitem"><p>
              <code class="literal">pages</code>
            </p><p>
              テーブルに割り当てられたページの合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">pages_hashed</code>
            </p><p>
              テーブルに割り当てられたハッシュページの数。
            </p></li><li class="listitem"><p>
              <code class="literal">pages_old</code>
            </p><p>
              テーブルに割り当てられた古いページの数。
            </p></li><li class="listitem"><p>
              <code class="literal">rows_cached</code>
            </p><p>
              テーブルのキャッシュされた行数。
            </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-innodb-lock-waits"></a>28.4.3.9 innodb_lock_waits および x$innodb_lock_waits のビュー</h4></div></div></div><a class="indexterm" name="idm45563183973312"></a><a class="indexterm" name="idm45563183971136"></a><a class="indexterm" name="idm45563183969040"></a><a class="indexterm" name="idm45563183966928"></a><p>
          これらのビューには、トランザクションが待機している <code class="literal">InnoDB</code> ロックの概要が示されます。 デフォルトでは、行はロック期間の降順でソートされます。 
        </p><p>
          <code class="literal">innodb_lock_waits</code> ビューと <code class="literal">x$innodb_lock_waits</code> ビューには、次のカラムがあります:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">wait_started</code>
            </p><p>
              ロック待機が開始された時刻。
            </p></li><li class="listitem"><p>
              <code class="literal">wait_age</code>
            </p><p>
              ロックが待機された期間 (<code class="literal">TIME</code> 値)。
            </p></li><li class="listitem"><p>
              <code class="literal">wait_age_secs</code>
            </p><p>
              ロックが待機された時間 (秒)。
            </p></li><li class="listitem"><p>
              <code class="literal">locked_table_schema</code>
            </p><p>
              ロックされたテーブルを含むスキーマ。
            </p></li><li class="listitem"><p>
              <code class="literal">locked_table_name</code>
            </p><p>
              ロックされたテーブルの名前。
            </p></li><li class="listitem"><p>
              <code class="literal">locked_table_partition</code>
            </p><p>
              ロックされたパーティションの名前 (存在する場合)。それ以外の場合は <code class="literal">NULL</code>。
            </p></li><li class="listitem"><p>
              <code class="literal">locked_table_subpartition</code>
            </p><p>
              ロックされたサブパーティションの名前 (存在する場合)。それ以外の場合は <code class="literal">NULL</code>。
            </p></li><li class="listitem"><p>
              <code class="literal">locked_index</code>
            </p><p>
              ロックされたインデックスの名前。
            </p></li><li class="listitem"><p>
              <code class="literal">locked_type</code>
            </p><p>
              待機中のロックのタイプ。
            </p></li><li class="listitem"><p>
              <code class="literal">waiting_trx_id</code>
            </p><p>
              待機中のトランザクションの ID。
            </p></li><li class="listitem"><p>
              <code class="literal">waiting_trx_started</code>
            </p><p>
              待機中のトランザクションが開始された時刻。
            </p></li><li class="listitem"><p>
              <code class="literal">waiting_trx_age</code>
            </p><p>
              待機中のトランザクションが待機していた時間 (<code class="literal">TIME</code> 値)。
            </p></li><li class="listitem"><p>
              <code class="literal">waiting_trx_rows_locked</code>
            </p><p>
              待機中のトランザクションによってロックされた行数。
            </p></li><li class="listitem"><p>
              <code class="literal">waiting_trx_rows_modified</code>
            </p><p>
              待機中のトランザクションによって変更された行数。
            </p></li><li class="listitem"><p>
              <code class="literal">waiting_pid</code>
            </p><p>
              待機中のトランザクションのプロセスリスト ID。
            </p></li><li class="listitem"><p>
              <code class="literal">waiting_query</code>
            </p><p>
              ロックを待機しているステートメント。
            </p></li><li class="listitem"><p>
              <code class="literal">waiting_lock_id</code>
            </p><p>
              待機中のロックの ID。
            </p></li><li class="listitem"><p>
              <code class="literal">waiting_lock_mode</code>
            </p><p>
              待機ロックのモード。
            </p></li><li class="listitem"><p>
              <code class="literal">blocking_trx_id</code>
            </p><p>
              待機ロックをブロックしているトランザクションの ID。
            </p></li><li class="listitem"><p>
              <code class="literal">blocking_pid</code>
            </p><p>
              ブロッキングトランザクションのプロセスリスト ID。
            </p></li><li class="listitem"><p>
              <code class="literal">blocking_query</code>
            </p><p>
              ブロックしているトランザクションが実行しているステートメント。 ブロッキングクエリーを発行したセッションがアイドル状態になった場合、このフィールドは NULL を報告します。 詳細は、<a class="xref" href="innodb-storage-engine.html#innodb-information-schema-examples-null-blocking-query" title="発行セッションがアイドル状態になった後のブロッキングクエリーの識別">発行セッションがアイドル状態になった後のブロッキングクエリーの識別</a>を参照してください。 
            </p></li><li class="listitem"><p>
              <code class="literal">blocking_lock_id</code>
            </p><p>
              待機中のロックをブロックしているロックの ID。
            </p></li><li class="listitem"><p>
              <code class="literal">blocking_lock_mode</code>
            </p><p>
              待機中のロックをブロックしているロックのモード。
            </p></li><li class="listitem"><p>
              <code class="literal">blocking_trx_started</code>
            </p><p>
              ブロッキングトランザクションが開始された時刻。
            </p></li><li class="listitem"><p>
              <code class="literal">blocking_trx_age</code>
            </p><p>
              ブロックしているトランザクションが実行されている期間 (<code class="literal">TIME</code> 値)。
            </p></li><li class="listitem"><p>
              <code class="literal">blocking_trx_rows_locked</code>
            </p><p>
              ブロックしているトランザクションによってロックされた行数。
            </p></li><li class="listitem"><p>
              <code class="literal">blocking_trx_rows_modified</code>
            </p><p>
              ブロックしているトランザクションによって変更された行数。
            </p></li><li class="listitem"><p>
              <code class="literal">sql_kill_blocking_query</code>
            </p><p>
              ブロッキングステートメントを強制終了するために実行する <code class="literal">KILL</code> ステートメント。
            </p></li><li class="listitem"><p>
              <code class="literal">sql_kill_blocking_connection</code>
            </p><p>
              ブロッキングステートメントを実行しているセッションを強制終了するために実行する <code class="literal">KILL</code> ステートメント。
            </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-io-by-thread-by-latency"></a>28.4.3.10 io_by_thread_by_latency および x$io_by_thread_by_latency のビュー</h4></div></div></div><a class="indexterm" name="idm45563183892224"></a><a class="indexterm" name="idm45563183890048"></a><a class="indexterm" name="idm45563183887936"></a><a class="indexterm" name="idm45563183885824"></a><p>
          これらのビューは、I/O コンシューマを要約して、I/O を待機している時間をスレッド別にグループ化して表示します。 デフォルトでは、行は合計 I/O レイテンシの降順でソートされます。 
        </p><p>
          <code class="literal">io_by_thread_by_latency</code> ビューと <code class="literal">x$io_by_thread_by_latency</code> ビューには、次のカラムがあります:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">user</code>
            </p><p>
              フォアグラウンドスレッドの場合、スレッドに関連付けられたアカウント。 バックグラウンドスレッドの場合は、スレッド名。 
            </p></li><li class="listitem"><p>
              <code class="literal">total</code>
            </p><p>
              スレッドの I/O イベントの合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">total_latency</code>
            </p><p>
              スレッドの時間指定 I/O イベントの合計待機時間。
            </p></li><li class="listitem"><p>
              <code class="literal">min_latency</code>
            </p><p>
              スレッドの時間指定 I/O イベントの最小単一待機時間。
            </p></li><li class="listitem"><p>
              <code class="literal">avg_latency</code>
            </p><p>
              スレッドの時間指定 I/O イベント当たりの平均待機時間。
            </p></li><li class="listitem"><p>
              <code class="literal">max_latency</code>
            </p><p>
              スレッドの時間指定 I/O イベントの最大単一待機時間。
            </p></li><li class="listitem"><p>
              <code class="literal">thread_id</code>
            </p><p>
              スレッド ID。
            </p></li><li class="listitem"><p>
              <code class="literal">processlist_id</code>
            </p><p>
              フォアグラウンドスレッドの場合、スレッドのプロセスリスト ID。 バックグラウンドスレッドの場合、<code class="literal">NULL</code>。 
            </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-io-global-by-file-by-bytes"></a>28.4.3.11 io_global_by_file_by_bytes および x$io_global_by_file_by_bytes のビュー</h4></div></div></div><a class="indexterm" name="idm45563183861296"></a><a class="indexterm" name="idm45563183859104"></a><a class="indexterm" name="idm45563183856976"></a><a class="indexterm" name="idm45563183854848"></a><p>
          これらのビューは、グローバル I/O コンシューマを要約して、ファイルごとにグループ化された I/O の量を表示します。 デフォルトでは、行は合計 I/O (読取りおよび書込みバイト数) の降順でソートされます。 
        </p><p>
          <code class="literal">io_global_by_file_by_bytes</code> ビューと <code class="literal">x$io_global_by_file_by_bytes</code> ビューには、次のカラムがあります:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">file</code>
            </p><p>
              ファイルパス名。
            </p></li><li class="listitem"><p>
              <code class="literal">count_read</code>
            </p><p>
              ファイルの読取りイベントの合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">total_read</code>
            </p><p>
              ファイルから読み取られた合計バイト数。
            </p></li><li class="listitem"><p>
              <code class="literal">avg_read</code>
            </p><p>
              ファイルからの読取り当たりの平均バイト数。
            </p></li><li class="listitem"><p>
              <code class="literal">count_write</code>
            </p><p>
              ファイルの書込みイベントの合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">total_written</code>
            </p><p>
              ファイルに書き込まれた合計バイト数。
            </p></li><li class="listitem"><p>
              <code class="literal">avg_write</code>
            </p><p>
              ファイルへの書込み当たりの平均バイト数。
            </p></li><li class="listitem"><p>
              <code class="literal">total</code>
            </p><p>
              ファイルに対して読取りおよび書込みが行われた合計バイト数。
            </p></li><li class="listitem"><p>
              <code class="literal">write_pct</code>
            </p><p>
              書き込まれた I/O の合計バイト数の割合。
            </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-io-global-by-file-by-latency"></a>28.4.3.12 io_global_by_file_by_latency および x$io_global_by_file_by_latency のビュー</h4></div></div></div><a class="indexterm" name="idm45563183829264"></a><a class="indexterm" name="idm45563183827072"></a><a class="indexterm" name="idm45563183824944"></a><a class="indexterm" name="idm45563183822800"></a><p>
          これらのビューは、グローバル I/O コンシューマを要約して、I/O を待機している時間をファイル別にグループ化して表示します。 デフォルトでは、行は合計レイテンシの降順でソートされます。 
        </p><p>
          <code class="literal">io_global_by_file_by_latency</code> ビューと <code class="literal">x$io_global_by_file_by_latency</code> ビューには、次のカラムがあります:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">file</code>
            </p><p>
              ファイルパス名。
            </p></li><li class="listitem"><p>
              <code class="literal">total</code>
            </p><p>
              ファイルの I/O イベントの合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">total_latency</code>
            </p><p>
              ファイルの時間指定 I/O イベントの合計待機時間。
            </p></li><li class="listitem"><p>
              <code class="literal">count_read</code>
            </p><p>
              ファイルの読取り I/O イベントの合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">read_latency</code>
            </p><p>
              ファイルの時間指定読取り I/O イベントの合計待機時間。
            </p></li><li class="listitem"><p>
              <code class="literal">count_write</code>
            </p><p>
              ファイルの書込み I/O イベントの合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">write_latency</code>
            </p><p>
              ファイルの時間指定書込み I/O イベントの合計待機時間。
            </p></li><li class="listitem"><p>
              <code class="literal">count_misc</code>
            </p><p>
              ファイルの他の I/O イベントの合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">misc_latency</code>
            </p><p>
              ファイルの他の時間指定 I/O イベントの合計待機時間。
            </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-io-global-by-wait-by-bytes"></a>28.4.3.13 io_global_by_wait_by_bytes および x$io_global_by_wait_by_bytes のビュー</h4></div></div></div><a class="indexterm" name="idm45563183797184"></a><a class="indexterm" name="idm45563183794992"></a><a class="indexterm" name="idm45563183792864"></a><a class="indexterm" name="idm45563183790736"></a><p>
          これらのビューには、グローバル I/O コンシューマの概要が示され、I/O を待機している時間がイベント別にグループ化されて表示されます。 デフォルトでは、行は合計 I/O (読取りおよび書込みバイト数) の降順でソートされます。 
        </p><p>
          <code class="literal">io_global_by_wait_by_bytes</code> ビューと <code class="literal">x$io_global_by_wait_by_bytes</code> ビューには、次のカラムがあります:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">event_name</code>
            </p><p>
              <code class="literal">wait/io/file/</code>接頭辞が削除された I/O イベント名。
            </p></li><li class="listitem"><p>
              <code class="literal">total</code>
            </p><p>
              I/O イベントの発生の合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">total_latency</code>
            </p><p>
              I/O イベントの発生時間の合計待機時間。
            </p></li><li class="listitem"><p>
              <code class="literal">min_latency</code>
            </p><p>
              I/O イベントの発生時間の最小単一待機時間。
            </p></li><li class="listitem"><p>
              <code class="literal">avg_latency</code>
            </p><p>
              I/O イベントの発生時間ごとの平均待機時間。
            </p></li><li class="listitem"><p>
              <code class="literal">max_latency</code>
            </p><p>
              I/O イベントの時間指定発生の最大単一待機時間。
            </p></li><li class="listitem"><p>
              <code class="literal">count_read</code>
            </p><p>
              I/O イベントの読取りリクエストの数。
            </p></li><li class="listitem"><p>
              <code class="literal">total_read</code>
            </p><p>
              I/O イベントに対して読み取られたバイト数。
            </p></li><li class="listitem"><p>
              <code class="literal">avg_read</code>
            </p><p>
              I/O イベントの読取り当たりの平均バイト数。
            </p></li><li class="listitem"><p>
              <code class="literal">count_write</code>
            </p><p>
              I/O イベントの書込みリクエストの数。
            </p></li><li class="listitem"><p>
              <code class="literal">total_written</code>
            </p><p>
              I/O イベントに対して書き込まれたバイト数。
            </p></li><li class="listitem"><p>
              <code class="literal">avg_written</code>
            </p><p>
              I/O イベントの書込み当たりの平均バイト数。
            </p></li><li class="listitem"><p>
              <code class="literal">total_requested</code>
            </p><p>
              I/O イベントに対して読取りおよび書込みが行われた合計バイト数。
            </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-io-global-by-wait-by-latency"></a>28.4.3.14 io_global_by_wait_by_latency および x$io_global_by_wait_by_latency ビュー</h4></div></div></div><a class="indexterm" name="idm45563183756368"></a><a class="indexterm" name="idm45563183754176"></a><a class="indexterm" name="idm45563183752048"></a><a class="indexterm" name="idm45563183749904"></a><p>
          これらのビューには、グローバル I/O コンシューマの概要が示され、I/O を待機している時間がイベント別にグループ化されて表示されます。 デフォルトでは、行は合計レイテンシの降順でソートされます。 
        </p><p>
          <code class="literal">io_global_by_wait_by_latency</code> ビューと <code class="literal">x$io_global_by_wait_by_latency</code> ビューには、次のカラムがあります:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">event_name</code>
            </p><p>
              <code class="literal">wait/io/file/</code>接頭辞が削除された I/O イベント名。
            </p></li><li class="listitem"><p>
              <code class="literal">total</code>
            </p><p>
              I/O イベントの発生の合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">total_latency</code>
            </p><p>
              I/O イベントの発生時間の合計待機時間。
            </p></li><li class="listitem"><p>
              <code class="literal">avg_latency</code>
            </p><p>
              I/O イベントの発生時間ごとの平均待機時間。
            </p></li><li class="listitem"><p>
              <code class="literal">max_latency</code>
            </p><p>
              I/O イベントの時間指定発生の最大単一待機時間。
            </p></li><li class="listitem"><p>
              <code class="literal">read_latency</code>
            </p><p>
              I/O イベントの時間指定読取り発生の合計待機時間。
            </p></li><li class="listitem"><p>
              <code class="literal">write_latency</code>
            </p><p>
              I/O イベントの時間指定書込み発生の合計待機時間。
            </p></li><li class="listitem"><p>
              <code class="literal">misc_latency</code>
            </p><p>
              I/O イベントの他の時間発生の合計待機時間。
            </p></li><li class="listitem"><p>
              <code class="literal">count_read</code>
            </p><p>
              I/O イベントの読取りリクエストの数。
            </p></li><li class="listitem"><p>
              <code class="literal">total_read</code>
            </p><p>
              I/O イベントに対して読み取られたバイト数。
            </p></li><li class="listitem"><p>
              <code class="literal">avg_read</code>
            </p><p>
              I/O イベントの読取り当たりの平均バイト数。
            </p></li><li class="listitem"><p>
              <code class="literal">count_write</code>
            </p><p>
              I/O イベントの書込みリクエストの数。
            </p></li><li class="listitem"><p>
              <code class="literal">total_written</code>
            </p><p>
              I/O イベントに対して書き込まれたバイト数。
            </p></li><li class="listitem"><p>
              <code class="literal">avg_written</code>
            </p><p>
              I/O イベントの書込み当たりの平均バイト数。
            </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-latest-file-io"></a>28.4.3.15 latest_file_io および x$latest_file_io のビュー</h4></div></div></div><a class="indexterm" name="idm45563183713648"></a><a class="indexterm" name="idm45563183711472"></a><a class="indexterm" name="idm45563183709376"></a><a class="indexterm" name="idm45563183707280"></a><p>
          これらのビューには、ファイルおよびスレッド別にグループ化されたファイル I/O アクティビティが要約されます。 デフォルトでは、行は最新の I/O から順にソートされます。 
        </p><p>
          <code class="literal">latest_file_io</code> ビューと <code class="literal">x$latest_file_io</code> ビューには、次のカラムがあります:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">スレッド</code>
            </p><p>
              フォアグラウンドスレッドの場合、スレッドに関連付けられたアカウント (TCP/IP 接続の場合はポート番号)。 バックグラウンドスレッドの場合は、スレッド名とスレッド ID 
            </p></li><li class="listitem"><p>
              <code class="literal">file</code>
            </p><p>
              ファイルパス名。
            </p></li><li class="listitem"><p>
              <code class="literal">latency</code>
            </p><p>
              ファイル I/O イベントの待機時間。
            </p></li><li class="listitem"><p>
              <code class="literal">operation</code>
            </p><p>
              操作のタイプ。
            </p></li><li class="listitem"><p>
              <code class="literal">requested</code>
            </p><p>
              ファイル I/O イベントに対してリクエストされたデータバイト数。
            </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-memory-by-host-by-current-bytes"></a>28.4.3.16 memory_by_host_by_current_bytes および x$memory_by_host_by_current_bytes ビュー</h4></div></div></div><a class="indexterm" name="idm45563183689744"></a><a class="indexterm" name="idm45563183687488"></a><a class="indexterm" name="idm45563183685344"></a><a class="indexterm" name="idm45563183683200"></a><p>
          これらのビューには、ホストごとにグループ化されたメモリー使用量の概要が示されます。 デフォルトでは、行は使用されているメモリー量の降順でソートされます。 
        </p><p>
          <code class="literal">memory_by_host_by_current_bytes</code> ビューと <code class="literal">x$memory_by_host_by_current_bytes</code> ビューには、次のカラムがあります:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">ホスト</code>
            </p><p>
              クライアントの接続元のホスト。 基礎となる「パフォーマンススキーマ」テーブルの <code class="literal">HOST</code> カラムが <code class="literal">NULL</code> である行はバックグラウンドスレッド用とみなされ、<code class="literal">background</code> のホスト名でレポートされます。 
            </p></li><li class="listitem"><p>
              <code class="literal">current_count_used</code>
            </p><p>
              ホストに対してまだ解放されていない割当て済メモリーブロックの現在の数。
            </p></li><li class="listitem"><p>
              <code class="literal">current_allocated</code>
            </p><p>
              ホストに対してまだ解放されていない割当て済バイトの現在の数。
            </p></li><li class="listitem"><p>
              <code class="literal">current_avg_alloc</code>
            </p><p>
              ホストのメモリーブロック当たりの現在の割当てバイト数。
            </p></li><li class="listitem"><p>
              <code class="literal">current_max_alloc</code>
            </p><p>
              ホストの現在の最大メモリー割当て (バイト単位)。
            </p></li><li class="listitem"><p>
              <code class="literal">total_allocated</code>
            </p><p>
              ホストの合計メモリー割当て (バイト)。
            </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-memory-by-thread-by-current-bytes"></a>28.4.3.17 memory_by_thread_by_current_bytes および x$memory_by_thread_by_current_bytes のビュー</h4></div></div></div><a class="indexterm" name="idm45563183661120"></a><a class="indexterm" name="idm45563183658864"></a><a class="indexterm" name="idm45563183656720"></a><a class="indexterm" name="idm45563183654560"></a><p>
          これらのビューには、スレッドごとにグループ化されたメモリー使用量の概要が示されます。 デフォルトでは、行は使用されているメモリー量の降順でソートされます。 
        </p><p>
          <code class="literal">memory_by_thread_by_current_bytes</code> ビューと <code class="literal">x$memory_by_thread_by_current_bytes</code> ビューには、次のカラムがあります:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">thread_id</code>
            </p><p>
              スレッド ID。
            </p></li><li class="listitem"><p>
              <code class="literal">user</code>
            </p><p>
              スレッドユーザーまたはスレッド名。
            </p></li><li class="listitem"><p>
              <code class="literal">current_count_used</code>
            </p><p>
              スレッドに対してまだ解放されていない割当て済メモリーブロックの現在の数。
            </p></li><li class="listitem"><p>
              <code class="literal">current_allocated</code>
            </p><p>
              スレッドに対してまだ解放されていない、現在割り当てられているバイト数。
            </p></li><li class="listitem"><p>
              <code class="literal">current_avg_alloc</code>
            </p><p>
              スレッドのメモリーブロック当たりの現在の割当てバイト数。
            </p></li><li class="listitem"><p>
              <code class="literal">current_max_alloc</code>
            </p><p>
              スレッドの現在の最大メモリー割当て (バイト単位)。
            </p></li><li class="listitem"><p>
              <code class="literal">total_allocated</code>
            </p><p>
              スレッドの合計メモリー割当て (バイト)。
            </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-memory-by-user-by-current-bytes"></a>28.4.3.18 memory_by_user_by_current_bytes および x$memory_by_user_by_current_bytes のビュー</h4></div></div></div><a class="indexterm" name="idm45563183632912"></a><a class="indexterm" name="idm45563183630656"></a><a class="indexterm" name="idm45563183628512"></a><a class="indexterm" name="idm45563183626368"></a><p>
          これらのビューには、ユーザー別にグループ化されたメモリー使用量の概要が示されます。 デフォルトでは、行は使用されているメモリー量の降順でソートされます。 
        </p><p>
          <code class="literal">memory_by_user_by_current_bytes</code> ビューと <code class="literal">x$memory_by_user_by_current_bytes</code> ビューには、次のカラムがあります:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">user</code>
            </p><p>
              クライアントユーザー名。 基礎となる「パフォーマンススキーマ」テーブルの <code class="literal">USER</code> カラムが <code class="literal">NULL</code> である行はバックグラウンドスレッド用とみなされ、<code class="literal">background</code> のホスト名でレポートされます。 
            </p></li><li class="listitem"><p>
              <code class="literal">current_count_used</code>
            </p><p>
              ユーザーに対してまだ解放されていない割当て済メモリーブロックの現在の数。
            </p></li><li class="listitem"><p>
              <code class="literal">current_allocated</code>
            </p><p>
              ユーザーに対してまだ解放されていない割当て済バイトの現在の数。
            </p></li><li class="listitem"><p>
              <code class="literal">current_avg_alloc</code>
            </p><p>
              ユーザーに割り当てられているメモリーブロック当たりの現在のバイト数。
            </p></li><li class="listitem"><p>
              <code class="literal">current_max_alloc</code>
            </p><p>
              ユーザーの現在の最大メモリー割当て (バイト)。
            </p></li><li class="listitem"><p>
              <code class="literal">total_allocated</code>
            </p><p>
              ユーザーの合計メモリー割当て (バイト)。
            </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-memory-global-by-current-bytes"></a>28.4.3.19 memory_global_by_current_bytes および x$memory_global_by_current_bytes のビュー</h4></div></div></div><a class="indexterm" name="idm45563183604208"></a><a class="indexterm" name="idm45563183601952"></a><a class="indexterm" name="idm45563183599808"></a><a class="indexterm" name="idm45563183597664"></a><p>
          これらのビューには、割当てタイプ (つまり、イベント別) 別にグループ化されたメモリー使用量が要約されます。 デフォルトでは、行は使用されているメモリー量の降順でソートされます。 
        </p><p>
          <code class="literal">memory_global_by_current_bytes</code> ビューと <code class="literal">x$memory_global_by_current_bytes</code> ビューには、次のカラムがあります:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">event_name</code>
            </p><p>
              メモリーイベント名。
            </p></li><li class="listitem"><p>
              <code class="literal">current_count</code>
            </p><p>
              イベントの発生の合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">current_alloc</code>
            </p><p>
              イベントに対してまだ解放されていない、現在割り当てられているバイト数。
            </p></li><li class="listitem"><p>
              <code class="literal">current_avg_alloc</code>
            </p><p>
              イベントのメモリーブロック当たりの現在の割当てバイト数。
            </p></li><li class="listitem"><p>
              <code class="literal">high_count</code>
            </p><p>
              イベントに割り当てられたメモリーブロック数の最高水位標。
            </p></li><li class="listitem"><p>
              <code class="literal">high_alloc</code>
            </p><p>
              イベントに割り当てられるバイト数の最高水位標。
            </p></li><li class="listitem"><p>
              <code class="literal">high_avg_alloc</code>
            </p><p>
              イベントに割り当てられたメモリーブロック当たりの平均バイト数の最高水位標。
            </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-memory-global-total"></a>28.4.3.20 memory_global_total および x$memory_global_total のビュー</h4></div></div></div><a class="indexterm" name="idm45563183576112"></a><a class="indexterm" name="idm45563183573920"></a><a class="indexterm" name="idm45563183571808"></a><a class="indexterm" name="idm45563183569696"></a><p>
          これらのビューには、サーバー内の合計メモリー使用量のサマリーが表示されます。
        </p><p>
          <code class="literal">memory_global_total</code> ビューと <code class="literal">x$memory_global_total</code> ビューには、次のカラムがあります:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">total_allocated</code>
            </p><p>
              サーバー内で割り当てられたメモリーの合計バイト数。
            </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-metrics"></a>28.4.3.21 メトリックビュー</h4></div></div></div><a class="indexterm" name="idm45563183560832"></a><a class="indexterm" name="idm45563183558672"></a><p>
          このビューには、MySQL サーバーメトリックの概要が示され、変数名、値、タイプおよびそれらが有効かどうかが示されます。 デフォルトでは、行は変数の型と名前でソートされます。 
        </p><p>
          <code class="literal">metrics</code> ビューには、次の情報が含まれます:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              パフォーマンススキーマ <code class="literal">global_status</code> テーブルのグローバルステータス変数
            </p></li><li class="listitem"><p>
              <code class="literal">INFORMATION_SCHEMA</code> <code class="literal">INNODB_METRICS</code> テーブルからの <code class="literal">InnoDB</code> メトリック
            </p></li><li class="listitem"><p>
              パフォーマンススキーマメモリーインストゥルメンテーションに基づく、現在および合計のメモリー割り当て
            </p></li><li class="listitem"><p>
              現在の時刻 (人間が読める形式と Unix タイムスタンプ形式)
            </p></li></ul></div><p>
          <code class="literal">global_status</code> テーブルと <code class="literal">INNODB_METRICS</code> テーブルの間には、<code class="literal">metrics</code> ビューによって排除される情報の重複がいくつかあります。
        </p><p>
          <code class="literal">metrics</code> ビューには、次のカラムがあります:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">Variable_name</code>
            </p><p>
              メトリック名。 メトリックタイプによって、名前の取得元のソースが決まります: 
            </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                  グローバルステータス変数用: <code class="literal">global_status</code> テーブルの <code class="literal">VARIABLE_NAME</code> カラム
                </p></li><li class="listitem"><p>
                  <code class="literal">InnoDB</code> メトリックの場合: <code class="literal">INNODB_METRICS</code> テーブルの <code class="literal">NAME</code> カラム
                </p></li><li class="listitem"><p>
                  その他のメトリック用: ビュー提供の説明文字列
                </p></li></ul></div></li><li class="listitem"><p>
              <code class="literal">Variable_value</code>
            </p><p>
              メトリック値。 メトリックタイプによって、値の取得元のソースが決まります: 
            </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                  グローバルステータス変数用: <code class="literal">global_status</code> テーブルの <code class="literal">VARIABLE_VALUE</code> カラム
                </p></li><li class="listitem"><p>
                  <code class="literal">InnoDB</code> メトリックの場合: <code class="literal">INNODB_METRICS</code> テーブルの <code class="literal">COUNT</code> カラム
                </p></li><li class="listitem"><p>
                  メモリーメトリック用: パフォーマンススキーマ <code class="literal">memory_summary_global_by_event_name</code> テーブルの関連するカラム
                </p></li><li class="listitem"><p>
                  現在の時刻: <code class="literal">NOW(3)</code> または <code class="literal">UNIX_TIMESTAMP(NOW(3))</code> の値
                </p></li></ul></div></li><li class="listitem"><p>
              <code class="literal">Type</code>
            </p><p>
              メトリックタイプ:
            </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                  グローバルステータス変数用: <code class="literal">Global Status</code>
                </p></li><li class="listitem"><p>
                  <code class="literal">InnoDB</code> メトリックの場合: <code class="literal">InnoDB Metrics - %</code>(<code class="literal">%</code> は <code class="literal">INNODB_METRICS</code> テーブルの <code class="literal">SUBSYSTEM</code> カラムの値に置き換えられます)
                </p></li><li class="listitem"><p>
                  メモリーメトリック用: <code class="literal">Performance Schema</code>
                </p></li><li class="listitem"><p>
                  現在の時刻: <code class="literal">System Time</code>
                </p></li></ul></div></li><li class="listitem"><p>
              <code class="literal">Enabled</code>
            </p><p>
              メトリックが有効かどうか:
            </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                  グローバルステータス変数用: <code class="literal">YES</code>
                </p></li><li class="listitem"><p>
                  <code class="literal">InnoDB</code> メトリックの場合: <code class="literal">INNODB_METRICS</code> テーブルの <code class="literal">STATUS</code> カラムが <code class="literal">enabled</code> の場合は <code class="literal">YES</code>、それ以外の場合は <code class="literal">NO</code>
                </p></li><li class="listitem"><p>
                  メモリーメトリック用: <code class="literal">NO</code>、<code class="literal">YES</code> または <code class="literal">PARTIAL</code> (現在、<code class="literal">PARTIAL</code> はメモリーメトリックに対してのみ発生し、すべての <code class="literal">memory/%</code> インストゥルメントが有効ではないことを示します。パフォーマンススキーマメモリーインストルメントは常に有効です)
                </p></li><li class="listitem"><p>
                  現在の時刻: <code class="literal">YES</code>
                </p></li></ul></div></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-processlist"></a>28.4.3.22 processlist ビューと x$processlist ビュー</h4></div></div></div><a class="indexterm" name="idm45563183489184"></a><a class="indexterm" name="idm45563183487024"></a><a class="indexterm" name="idm45563183484944"></a><a class="indexterm" name="idm45563183482864"></a><p>
          MySQL プロセスリストには、サーバー内で実行されているスレッドのセットによって現在実行されている操作が示されます。 <code class="literal">processlist</code> および <code class="literal">x$processlist</code> ビューには、プロセス情報が要約されています。 これらは、<code class="literal">SHOW PROCESSLIST</code> ステートメントおよび <code class="literal">INFORMATION_SCHEMA</code> <code class="literal">PROCESSLIST</code> テーブルよりも完全な情報を提供し、非ブロック化も行います。 デフォルトでは、行はプロセス時間の降順および待機時間の降順でソートされます。 プロセス情報ソースの比較については、<a class="xref" href="optimization.html#processlist-sources" title="プロセス情報のソース">プロセス情報のソース</a> を参照してください。 
        </p><p>
          ここでのカラムの説明は簡単です。 詳細は、<a class="xref" href="performance-schema.html#performance-schema-threads-table" title="27.12.19.10 スレッドテーブル">セクション27.12.19.10「スレッドテーブル」</a> のパフォーマンススキーマ <code class="literal">threads</code> テーブルの説明を参照してください。 
        </p><p>
          <code class="literal">processlist</code> ビューと <code class="literal">x$processlist</code> ビューには、次のカラムがあります:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">thd_id</code>
            </p><p>
              スレッド ID。
            </p></li><li class="listitem"><p>
              <code class="literal">conn_id</code>
            </p><p>
              接続 ID。
            </p></li><li class="listitem"><p>
              <code class="literal">user</code>
            </p><p>
              スレッドユーザーまたはスレッド名。
            </p></li><li class="listitem"><p>
              <code class="literal">db</code>
            </p><p>
              スレッドのデフォルトのデータベース、何もない場合は <code class="literal">NULL</code>。
            </p></li><li class="listitem"><p>
              <code class="literal">command</code>
            </p><p>
              フォアグラウンドスレッドの場合、スレッドがクライアントのかわりに実行しているコマンドのタイプ、またはセッションがアイドル状態の場合は <code class="literal">Sleep</code>。
            </p></li><li class="listitem"><p>
              <code class="literal">state</code>
            </p><p>
              スレッドが行なっていることを示すアクション、イベント、または状態。
            </p></li><li class="listitem"><p>
              <code class="literal">time</code>
            </p><p>
              スレッドが現在の状態になってからの秒数。
            </p></li><li class="listitem"><p>
              <code class="literal">current_statement</code>
            </p><p>
              スレッドが実行しているステートメント、またはそれがどのステートメントも実行していない場合は <code class="literal">NULL</code>。
            </p></li><li class="listitem"><p>
              <code class="literal">statement_latency</code>
            </p><p>
              ステートメントが実行されている期間。
            </p></li><li class="listitem"><p>
              <code class="literal">progress</code>
            </p><p>
              進捗レポートをサポートするステージで完了した作業の割合。 <a class="xref" href="sys-schema.html#sys-schema-progress-reporting" title="28.3 sys スキーマ進捗レポート">セクション28.3「sys スキーマ進捗レポート」</a>を参照してください。 
            </p></li><li class="listitem"><p>
              <code class="literal">lock_latency</code>
            </p><p>
              現在のステートメントによるロックの待機に費やされた時間。
            </p></li><li class="listitem"><p>
              <code class="literal">rows_examined</code>
            </p><p>
              現在のステートメントによってストレージエンジンから読み取られた行数。
            </p></li><li class="listitem"><p>
              <code class="literal">rows_sent</code>
            </p><p>
              現行のステートメントによって戻された行数。
            </p></li><li class="listitem"><p>
              <code class="literal">rows_affected</code>
            </p><p>
              現在のステートメントの影響を受ける行数。
            </p></li><li class="listitem"><p>
              <code class="literal">tmp_tables</code>
            </p><p>
              現在のステートメントによって作成された内部インメモリー一時テーブルの数。
            </p></li><li class="listitem"><p>
              <code class="literal">tmp_disk_tables</code>
            </p><p>
              現在のステートメントによって作成されたディスク上の内部一時テーブルの数。
            </p></li><li class="listitem"><p>
              <code class="literal">full_scan</code>
            </p><p>
              現在のステートメントによって実行された全テーブルスキャンの数。
            </p></li><li class="listitem"><p>
              <code class="literal">last_statement</code>
            </p><p>
              スレッドによって実行された最後のステートメント (現在実行中のステートメントまたは待機がない場合)。
            </p></li><li class="listitem"><p>
              <code class="literal">last_statement_latency</code>
            </p><p>
              最後のステートメントが実行された時間。
            </p></li><li class="listitem"><p>
              <code class="literal">current_memory</code>
            </p><p>
              スレッドによって割り当てられたバイト数。
            </p></li><li class="listitem"><p>
              <code class="literal">last_wait</code>
            </p><p>
              スレッドの最新の待機イベントの名前。
            </p></li><li class="listitem"><p>
              <code class="literal">last_wait_latency</code>
            </p><p>
              スレッドの最新の待機イベントの待機時間。
            </p></li><li class="listitem"><p>
              <code class="literal">source</code>
            </p><p>
              イベントを生成したインストゥルメントされたコードを含むソースファイルおよび行番号。
            </p></li><li class="listitem"><p>
              <code class="literal">trx_latency</code>
            </p><p>
              スレッドの現在のトランザクションの待機時間。
            </p></li><li class="listitem"><p>
              <code class="literal">trx_state</code>
            </p><p>
              スレッドの現在のトランザクションの状態。
            </p></li><li class="listitem"><p>
              <code class="literal">trx_autocommit</code>
            </p><p>
              現在のトランザクションの開始時に自動コミットモードが有効になっていたかどうか。
            </p></li><li class="listitem"><p>
              <code class="literal">pid</code>
            </p><p>
              クライアントプロセス ID。
            </p></li><li class="listitem"><p>
              <code class="literal">program_name</code>
            </p><p>
              クライアントプログラム名。
            </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-ps-check-lost-instrumentation"></a>28.4.3.23 ps_check_lost_instrumentation ビュー</h4></div></div></div><a class="indexterm" name="idm45563183406000"></a><a class="indexterm" name="idm45563183403808"></a><p>
          このビューは、失われたパフォーマンススキーマインストゥルメントに関する情報を返し、パフォーマンススキーマがすべての実行時データをモニターできないかどうかを示します。
        </p><p>
          <code class="literal">ps_check_lost_instrumentation</code> ビューには、次のカラムがあります:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">variable_name</code>
            </p><p>
              失われたインストゥルメントのタイプを示すパフォーマンススキーマのステータス変数名。
            </p></li><li class="listitem"><p>
              <code class="literal">variable_value</code>
            </p><p>
              失われたインストゥルメントの数。
            </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-schema-auto-increment-columns"></a>28.4.3.24 schema_auto_increment_columns ビュー</h4></div></div></div><a class="indexterm" name="idm45563183393488"></a><a class="indexterm" name="idm45563183391296"></a><p>
          このビューは、<code class="literal">AUTO_INCREMENT</code> カラムを持つテーブルを示し、現在のカラム値と最大カラム値、使用率 (使用可能な値に対する使用率) など、これらのカラムに関する情報を提供します。 デフォルトでは、行は使用率と最大カラム値の降順でソートされます。 
        </p><p>
          これらのスキーマのテーブルはビュー出力から除外されます: <code class="literal">mysql</code>, <code class="literal">sys</code>, <code class="literal">INFORMATION_SCHEMA</code>, <code class="literal">performance_schema</code>。
        </p><p>
          <code class="literal">schema_auto_increment_columns</code> ビューには、次のカラムがあります:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">table_schema</code>
            </p><p>
              テーブルを含むスキーマ。
            </p></li><li class="listitem"><p>
              <code class="literal">table_name</code>
            </p><p>
              <code class="literal">AUTO_INCREMENT</code> カラムを含むテーブル。
            </p></li><li class="listitem"><p>
              <code class="literal">column_name</code>
            </p><p>
              <code class="literal">AUTO_INCREMENT</code> カラムの名前。
            </p></li><li class="listitem"><p>
              <code class="literal">data_type</code>
            </p><p>
              カラムのデータ型。
            </p></li><li class="listitem"><p>
              <code class="literal">column_type</code>
            </p><p>
              カラムのカラムタイプ。これは、データ型に他の情報を加えたものです。 たとえば、<code class="literal">bigint(20) unsigned</code> カラムタイプのカラムの場合、データ型は単なる <code class="literal">bigint</code> です。 
            </p></li><li class="listitem"><p>
              <code class="literal">is_signed</code>
            </p><p>
              カラムタイプが符号付きかどうか。
            </p></li><li class="listitem"><p>
              <code class="literal">is_unsigned</code>
            </p><p>
              カラムの型が符号なしかどうか。
            </p></li><li class="listitem"><p>
              <code class="literal">max_value</code>
            </p><p>
              カラムに許可される最大値。
            </p></li><li class="listitem"><p>
              <code class="literal">auto_increment</code>
            </p><p>
              カラムの現在の <code class="literal">AUTO_INCREMENT</code> 値。
            </p></li><li class="listitem"><p>
              <code class="literal">auto_increment_ratio</code>
            </p><p>
              カラムに許可された値に使用されるの比率。 これは、値の順序が<span class="quote">「<span class="quote">「使用済」</span>」</span>である量を示します。 
            </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-schema-index-statistics"></a>28.4.3.25 schema_index_statistics および x$schema_index_statistics のビュー</h4></div></div></div><a class="indexterm" name="idm45563183356752"></a><a class="indexterm" name="idm45563183354576"></a><a class="indexterm" name="idm45563183352464"></a><a class="indexterm" name="idm45563183350352"></a><p>
          これらのビューは、インデックス統計を提供します。 デフォルトでは、行は合計インデックスレイテンシの降順でソートされます。 
        </p><p>
          <code class="literal">schema_index_statistics</code> ビューと <code class="literal">x$schema_index_statistics</code> ビューには、次のカラムがあります:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">table_schema</code>
            </p><p>
              テーブルを含むスキーマ。
            </p></li><li class="listitem"><p>
              <code class="literal">table_name</code>
            </p><p>
              インデックスを含むテーブル。
            </p></li><li class="listitem"><p>
              <code class="literal">index_name</code>
            </p><p>
              インデックスの名前。
            </p></li><li class="listitem"><p>
              <code class="literal">rows_selected</code>
            </p><p>
              インデックスを使用して読み取られた行の合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">select_latency</code>
            </p><p>
              インデックスを使用した時間読取りの合計待機時間。
            </p></li><li class="listitem"><p>
              <code class="literal">rows_inserted</code>
            </p><p>
              インデックスに挿入された行の合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">insert_latency</code>
            </p><p>
              インデックスへの時間挿入の合計待機時間。
            </p></li><li class="listitem"><p>
              <code class="literal">rows_updated</code>
            </p><p>
              インデックスで更新された行の合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">update_latency</code>
            </p><p>
              インデックス内の時間指定更新の合計待機時間。
            </p></li><li class="listitem"><p>
              <code class="literal">rows_deleted</code>
            </p><p>
              インデックスから削除された行の合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">delete_latency</code>
            </p><p>
              インデックスからの時間付き削除の合計待機時間。
            </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-schema-object-overview"></a>28.4.3.26 schema_object_overview ビュー</h4></div></div></div><a class="indexterm" name="idm45563183321072"></a><a class="indexterm" name="idm45563183318896"></a><p>
          このビューには、各スキーマ内のオブジェクトのタイプがまとめられています。 デフォルトでは、行はスキーマおよびオブジェクトタイプでソートされます。 
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
            多数のオブジェクトを持つ MySQL インスタンスでは、このビューの実行に時間がかかる場合があります。
          </p></div><p>
          <code class="literal">schema_object_overview</code> ビューには、次のカラムがあります:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">db</code>
            </p><p>
              スキーマ名。
            </p></li><li class="listitem"><p>
              <code class="literal">object_type</code>
            </p><p>
              オブジェクトタイプ: <code class="literal">BASE TABLE</code>、<code class="literal">INDEX (<em class="replaceable"><code>index_type</code></em>)</code>、<code class="literal">EVENT</code>, <code class="literal">FUNCTION</code>, <code class="literal">PROCEDURE</code>, <code class="literal">TRIGGER</code>, <code class="literal">VIEW</code>。
            </p></li><li class="listitem"><p>
              <code class="literal">count</code>
            </p><p>
              指定されたタイプのスキーマ内のオブジェクトの数。
            </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-schema-redundant-indexes"></a>28.4.3.27 schema_redundant_indexes および x$schema_flattened_keys のビュー</h4></div></div></div><a class="indexterm" name="idm45563183300416"></a><a class="indexterm" name="idm45563183298240"></a><a class="indexterm" name="idm45563183296128"></a><a class="indexterm" name="idm45563183294016"></a><p>
          <code class="literal">schema_redundant_indexes</code> ビューには、他のインデックスを複製するインデックス、またはそれらによって冗長化されたインデックスが表示されます。 <code class="literal">x$schema_flattened_keys</code> ビューは、<code class="literal">schema_redundant_indexes</code> のヘルパービューです。 
        </p><p>
          次のカラムの説明では、冗長インデックスを冗長化するインデックスが主要なインデックスです。
        </p><p>
          <code class="literal">schema_redundant_indexes</code> ビューには、次のカラムがあります:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">table_schema</code>
            </p><p>
              テーブルを含むスキーマ。
            </p></li><li class="listitem"><p>
              <code class="literal">table_name</code>
            </p><p>
              インデックスを含むテーブル。
            </p></li><li class="listitem"><p>
              <code class="literal">redundant_index_name</code>
            </p><p>
              冗長インデックスの名前。
            </p></li><li class="listitem"><p>
              <code class="literal">redundant_index_columns</code>
            </p><p>
              冗長インデックスのカラムの名前。
            </p></li><li class="listitem"><p>
              <code class="literal">redundant_index_non_unique</code>
            </p><p>
              冗長インデックス内の一意でないカラムの数。
            </p></li><li class="listitem"><p>
              <code class="literal">dominant_index_name</code>
            </p><p>
              主要なインデックスの名前。
            </p></li><li class="listitem"><p>
              <code class="literal">dominant_index_columns</code>
            </p><p>
              主要インデックスのカラムの名前。
            </p></li><li class="listitem"><p>
              <code class="literal">dominant_index_non_unique</code>
            </p><p>
              主要インデックス内の一意でないカラムの数。
            </p></li><li class="listitem"><p>
              <code class="literal">subpart_exists</code>
            </p><p>
              インデックスがカラムの一部のみをインデックス付けするかどうか。
            </p></li><li class="listitem"><p>
              <code class="literal">sql_drop_index</code>
            </p><p>
              冗長インデックスを削除するために実行するステートメント。
            </p></li></ul></div><p>
          <code class="literal">x$schema_flattened_keys</code> ビューには、次のカラムがあります:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">table_schema</code>
            </p><p>
              テーブルを含むスキーマ。
            </p></li><li class="listitem"><p>
              <code class="literal">table_name</code>
            </p><p>
              インデックスを含むテーブル。
            </p></li><li class="listitem"><p>
              <code class="literal">index_name</code>
            </p><p>
              インデックス名。
            </p></li><li class="listitem"><p>
              <code class="literal">non_unique</code>
            </p><p>
              インデックス内の一意でないカラムの数。
            </p></li><li class="listitem"><p>
              <code class="literal">subpart_exists</code>
            </p><p>
              インデックスがカラムの一部のみをインデックス付けするかどうか。
            </p></li><li class="listitem"><p>
              <code class="literal">index_columns</code>
            </p><p>
              インデックス内のカラムの名前。
            </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-schema-table-lock-waits"></a>28.4.3.28 schema_table_lock_waits および x$schema_table_lock_waits のビュー</h4></div></div></div><a class="indexterm" name="idm45563183249600"></a><a class="indexterm" name="idm45563183247424"></a><a class="indexterm" name="idm45563183245312"></a><a class="indexterm" name="idm45563183243200"></a><p>
          これらのビューには、メタデータロックで待機中にブロックされているセッションとブロックされているセッションが表示されます。
        </p><p>
          ここでのカラムの説明は簡単です。 詳細は、<a class="xref" href="performance-schema.html#performance-schema-metadata-locks-table" title="27.12.13.3 metadata_locks テーブル">セクション27.12.13.3「metadata_locks テーブル」</a> のパフォーマンススキーマ <code class="literal">metadata_locks</code> テーブルの説明を参照してください。 
        </p><p>
          <code class="literal">schema_table_lock_waits</code> ビューと <code class="literal">x$schema_table_lock_waits</code> ビューには、次のカラムがあります:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">object_schema</code>
            </p><p>
              ロックするオブジェクトを含むスキーマ。
            </p></li><li class="listitem"><p>
              <code class="literal">object_name</code>
            </p><p>
              インストゥルメントされたオブジェクトの名前。
            </p></li><li class="listitem"><p>
              <code class="literal">waiting_thread_id</code>
            </p><p>
              ロックを待機中のスレッドのスレッド ID。
            </p></li><li class="listitem"><p>
              <code class="literal">waiting_pid</code>
            </p><p>
              ロックを待機しているスレッドのプロセスリスト ID。
            </p></li><li class="listitem"><p>
              <code class="literal">waiting_account</code>
            </p><p>
              ロックを待機しているセッションに関連付けられているアカウント。
            </p></li><li class="listitem"><p>
              <code class="literal">waiting_lock_type</code>
            </p><p>
              待機中のロックのタイプ。
            </p></li><li class="listitem"><p>
              <code class="literal">waiting_lock_duration</code>
            </p><p>
              待機中のロックが待機している時間。
            </p></li><li class="listitem"><p>
              <code class="literal">waiting_query</code>
            </p><p>
              ロックを待機しているステートメント。
            </p></li><li class="listitem"><p>
              <code class="literal">waiting_query_secs</code>
            </p><p>
              ステートメントが待機している時間 (秒)。
            </p></li><li class="listitem"><p>
              <code class="literal">waiting_query_rows_affected</code>
            </p><p>
              ステートメントに影響を受けた行数。
            </p></li><li class="listitem"><p>
              <code class="literal">waiting_query_rows_examined</code>
            </p><p>
              ステートメントによってストレージエンジンから読み取られた行数。
            </p></li><li class="listitem"><p>
              <code class="literal">blocking_thread_id</code>
            </p><p>
              待機中のロックをブロックしているスレッドのスレッド ID。
            </p></li><li class="listitem"><p>
              <code class="literal">blocking_pid</code>
            </p><p>
              待機中のロックをブロックしているスレッドのプロセスリスト ID。
            </p></li><li class="listitem"><p>
              <code class="literal">blocking_account</code>
            </p><p>
              待機ロックをブロックしているスレッドに関連付けられたアカウント。
            </p></li><li class="listitem"><p>
              <code class="literal">blocking_lock_type</code>
            </p><p>
              待機中のロックをブロックしているロックのタイプ。
            </p></li><li class="listitem"><p>
              <code class="literal">blocking_lock_duration</code>
            </p><p>
              ブロッキングロックが保持されている期間。
            </p></li><li class="listitem"><p>
              <code class="literal">sql_kill_blocking_query</code>
            </p><p>
              ブロッキングステートメントを強制終了するために実行する <code class="literal">KILL</code> ステートメント。
            </p></li><li class="listitem"><p>
              <code class="literal">sql_kill_blocking_connection</code>
            </p><p>
              ブロッキングステートメントを実行しているセッションを強制終了するために実行する <code class="literal">KILL</code> ステートメント。
            </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-schema-table-statistics"></a>28.4.3.29 schema_table_statistics および x$schema_table_statistics のビュー</h4></div></div></div><a class="indexterm" name="idm45563183194624"></a><a class="indexterm" name="idm45563183192448"></a><a class="indexterm" name="idm45563183190336"></a><a class="indexterm" name="idm45563183188224"></a><p>
          これらのビューには、テーブルの統計がまとめられています。 デフォルトでは、行は合計待機時間の降順 (競合が最も多いテーブルが最初) でソートされます。 
        </p><p>
          これらのビューはヘルパービュー <code class="literal">x$ps_schema_table_statistics_io</code> を使用します。
        </p><p>
          <code class="literal">schema_table_statistics</code> ビューと <code class="literal">x$schema_table_statistics</code> ビューには、次のカラムがあります:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">table_schema</code>
            </p><p>
              テーブルを含むスキーマ。
            </p></li><li class="listitem"><p>
              <code class="literal">table_name</code>
            </p><p>
              テーブル名
            </p></li><li class="listitem"><p>
              <code class="literal">total_latency</code>
            </p><p>
              テーブルの時間指定 I/O イベントの合計待機時間。
            </p></li><li class="listitem"><p>
              <code class="literal">rows_fetched</code>
            </p><p>
              テーブルから読み取られた行の合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">fetch_latency</code>
            </p><p>
              テーブルの時間指定読取り I/O イベントの合計待機時間。
            </p></li><li class="listitem"><p>
              <code class="literal">rows_inserted</code>
            </p><p>
              テーブルに挿入された行の合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">insert_latency</code>
            </p><p>
              テーブルの時間指定挿入 I/O イベントの合計待機時間。
            </p></li><li class="listitem"><p>
              <code class="literal">rows_updated</code>
            </p><p>
              テーブルで更新された行の合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">update_latency</code>
            </p><p>
              テーブルの時間指定更新 I/O イベントの合計待機時間。
            </p></li><li class="listitem"><p>
              <code class="literal">rows_deleted</code>
            </p><p>
              テーブルから削除された行の合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">delete_latency</code>
            </p><p>
              テーブルの時間指定削除 I/O イベントの合計待機時間。
            </p></li><li class="listitem"><p>
              <code class="literal">io_read_requests</code>
            </p><p>
              テーブルに対する読取りリクエストの合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">io_read</code>
            </p><p>
              テーブルから読み取られた合計バイト数。
            </p></li><li class="listitem"><p>
              <code class="literal">io_read_latency</code>
            </p><p>
              テーブルからの読取りの合計待機時間。
            </p></li><li class="listitem"><p>
              <code class="literal">io_write_requests</code>
            </p><p>
              テーブルに対する書込みリクエストの合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">io_write</code>
            </p><p>
              テーブルに書き込まれた合計バイト数。
            </p></li><li class="listitem"><p>
              <code class="literal">io_write_latency</code>
            </p><p>
              テーブルへの書込みの合計待機時間。
            </p></li><li class="listitem"><p>
              <code class="literal">io_misc_requests</code>
            </p><p>
              テーブルに対するその他の I/O リクエストの合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">io_misc_latency</code>
            </p><p>
              テーブルに対するその他の I/O リクエストの合計待機時間。
            </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-schema-table-statistics-with-buffer"></a>28.4.3.30 schema_table_statistics_with_buffer および x$schema_table_statistics_with_buffer のビュー</h4></div></div></div><a class="indexterm" name="idm45563183141136"></a><a class="indexterm" name="idm45563183138864"></a><a class="indexterm" name="idm45563183136704"></a><a class="indexterm" name="idm45563183134544"></a><p>
          これらのビューは、<code class="literal">InnoDB</code> バッファプール統計を含むテーブル統計を要約します。 デフォルトでは、行は合計待機時間の降順 (競合が最も多いテーブルが最初) でソートされます。 
        </p><p>
          これらのビューはヘルパービュー <code class="literal">x$ps_schema_table_statistics_io</code> を使用します。
        </p><p>
          <code class="literal">schema_table_statistics_with_buffer</code> ビューと <code class="literal">x$schema_table_statistics_with_buffer</code> ビューには、次のカラムがあります:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">table_schema</code>
            </p><p>
              テーブルを含むスキーマ。
            </p></li><li class="listitem"><p>
              <code class="literal">table_name</code>
            </p><p>
              テーブル名
            </p></li><li class="listitem"><p>
              <code class="literal">rows_fetched</code>
            </p><p>
              テーブルから読み取られた行の合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">fetch_latency</code>
            </p><p>
              テーブルの時間指定読取り I/O イベントの合計待機時間。
            </p></li><li class="listitem"><p>
              <code class="literal">rows_inserted</code>
            </p><p>
              テーブルに挿入された行の合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">insert_latency</code>
            </p><p>
              テーブルの時間指定挿入 I/O イベントの合計待機時間。
            </p></li><li class="listitem"><p>
              <code class="literal">rows_updated</code>
            </p><p>
              テーブルで更新された行の合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">update_latency</code>
            </p><p>
              テーブルの時間指定更新 I/O イベントの合計待機時間。
            </p></li><li class="listitem"><p>
              <code class="literal">rows_deleted</code>
            </p><p>
              テーブルから削除された行の合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">delete_latency</code>
            </p><p>
              テーブルの時間指定削除 I/O イベントの合計待機時間。
            </p></li><li class="listitem"><p>
              <code class="literal">io_read_requests</code>
            </p><p>
              テーブルに対する読取りリクエストの合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">io_read</code>
            </p><p>
              テーブルから読み取られた合計バイト数。
            </p></li><li class="listitem"><p>
              <code class="literal">io_read_latency</code>
            </p><p>
              テーブルからの読取りの合計待機時間。
            </p></li><li class="listitem"><p>
              <code class="literal">io_write_requests</code>
            </p><p>
              テーブルに対する書込みリクエストの合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">io_write</code>
            </p><p>
              テーブルに書き込まれた合計バイト数。
            </p></li><li class="listitem"><p>
              <code class="literal">io_write_latency</code>
            </p><p>
              テーブルへの書込みの合計待機時間。
            </p></li><li class="listitem"><p>
              <code class="literal">io_misc_requests</code>
            </p><p>
              テーブルに対するその他の I/O リクエストの合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">io_misc_latency</code>
            </p><p>
              テーブルに対するその他の I/O リクエストの合計待機時間。
            </p></li><li class="listitem"><p>
              <code class="literal">innodb_buffer_allocated</code>
            </p><p>
              テーブルに割り当てられた <code class="literal">InnoDB</code> バッファバイトの合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">innodb_buffer_data</code>
            </p><p>
              テーブルに割り当てられた <code class="literal">InnoDB</code> データバイトの合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">innodb_buffer_free</code>
            </p><p>
              テーブル (<code class="literal">innodb_buffer_allocated</code> − <code class="literal">innodb_buffer_data</code>) に割り当てられた <code class="literal">InnoDB</code> 非データバイトの合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">innodb_buffer_pages</code>
            </p><p>
              テーブルに割り当てられた <code class="literal">InnoDB</code> ページの合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">innodb_buffer_pages_hashed</code>
            </p><p>
              テーブルに割り当てられた <code class="literal">InnoDB</code> ハッシュページの合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">innodb_buffer_pages_old</code>
            </p><p>
              テーブルに割り当てられた <code class="literal">InnoDB</code> の古いページの合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">innodb_buffer_rows_cached</code>
            </p><p>
              テーブルに対してキャッシュされた <code class="literal">InnoDB</code> 行の合計数。
            </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-schema-tables-with-full-table-scans"></a>28.4.3.31 schema_tables_with_full_table_scans および x$schema_tables_with_full_table_scans のビュー</h4></div></div></div><a class="indexterm" name="idm45563183068016"></a><a class="indexterm" name="idm45563183065744"></a><a class="indexterm" name="idm45563183063584"></a><a class="indexterm" name="idm45563183061424"></a><p>
          これらのビューには、全テーブルスキャンでアクセスされているテーブルが表示されます。 デフォルトでは、行はスキャンされた降順の行でソートされます。 
        </p><p>
          <code class="literal">schema_tables_with_full_table_scans</code> ビューと <code class="literal">x$schema_tables_with_full_table_scans</code> ビューには、次のカラムがあります:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">object_schema</code>
            </p><p>
              スキーマ名。
            </p></li><li class="listitem"><p>
              <code class="literal">object_name</code>
            </p><p>
              テーブル名
            </p></li><li class="listitem"><p>
              <code class="literal">rows_full_scanned</code>
            </p><p>
              テーブルの全体スキャンでスキャンされた行の合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">latency</code>
            </p><p>
              テーブルの全スキャンの合計待機時間。
            </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-schema-unused-indexes"></a>28.4.3.32 schema_unused_indexes ビュー</h4></div></div></div><a class="indexterm" name="idm45563183046416"></a><a class="indexterm" name="idm45563183044240"></a><p>
          これらのビューには、使用されていないことを示すイベントがないインデックスが表示されます。 デフォルトでは、行はスキーマおよびテーブルでソートされます。 
        </p><p>
          このビューは、サーバーが稼働しており、ワークロードが代表的であるほど長く処理されている場合に最も役立ちます。 そうしないと、このビューにインデックスが存在しても意味がない場合があります。 
        </p><p>
          <code class="literal">schema_unused_indexes</code> ビューには、次のカラムがあります:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">object_schema</code>
            </p><p>
              スキーマ名。
            </p></li><li class="listitem"><p>
              <code class="literal">object_name</code>
            </p><p>
              テーブル名
            </p></li><li class="listitem"><p>
              <code class="literal">index_name</code>
            </p><p>
              未使用のインデックス名。
            </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-session"></a>28.4.3.33 セッションおよび x$session ビュー</h4></div></div></div><a class="indexterm" name="idm45563183031360"></a><a class="indexterm" name="idm45563183029200"></a><a class="indexterm" name="idm45563183027120"></a><a class="indexterm" name="idm45563183025056"></a><p>
          これらのビューは、<code class="literal">processlist</code> および <code class="literal">x$processlist</code> に似ていますが、ユーザーセッションのみを表示するようにバックグラウンドプロセスをフィルタで除外します。 カラムの説明は、<a class="xref" href="sys-schema.html#sys-processlist" title="28.4.3.22 processlist ビューと x$processlist ビュー">セクション28.4.3.22「processlist ビューと x$processlist ビュー」</a> を参照してください。 
        </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-session-ssl-status"></a>28.4.3.34 session_ssl_status ビュー</h4></div></div></div><a class="indexterm" name="idm45563183018336"></a><a class="indexterm" name="idm45563183016144"></a><p>
          このビューには、接続ごとに SSL バージョン、暗号および再利用された SSL セッションの数が表示されます。
        </p><p>
          <code class="literal">session_ssl_status</code> ビューには、次のカラムがあります:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">thread_id</code>
            </p><p>
              接続のスレッド ID。
            </p></li><li class="listitem"><p>
              <code class="literal">ssl_version</code>
            </p><p>
              接続に使用される SSL のバージョン。
            </p></li><li class="listitem"><p>
              <code class="literal">ssl_cipher</code>
            </p><p>
              接続に使用される SSL 暗号。
            </p></li><li class="listitem"><p>
              <code class="literal">ssl_sessions_reused</code>
            </p><p>
              接続に再利用された SSL セッションの数。
            </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-statement-analysis"></a>28.4.3.35 statement_analysis および x$statement_analysis のビュー</h4></div></div></div><a class="indexterm" name="idm45563183002160"></a><a class="indexterm" name="idm45563182999968"></a><a class="indexterm" name="idm45563182997856"></a><a class="indexterm" name="idm45563182995744"></a><p>
          これらのビューには、集計された統計とともに正規化されたステートメントがリストされます。 コンテンツは、MySQL Enterprise Monitor クエリー分析ビューに似ています。 デフォルトでは、行は合計レイテンシの降順でソートされます。 
        </p><p>
          <code class="literal">statement_analysis</code> ビューと <code class="literal">x$statement_analysis</code> ビューには、次のカラムがあります:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">クエリー</code>
            </p><p>
              正規化されたステートメントの文字列。
            </p></li><li class="listitem"><p>
              <code class="literal">db</code>
            </p><p>
              ステートメントのデフォルトデータベース。存在しない場合は <code class="literal">NULL</code>。
            </p></li><li class="listitem"><p>
              <code class="literal">full_scan</code>
            </p><p>
              ステートメントの発生によって実行された全テーブルスキャンの合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">exec_count</code>
            </p><p>
              ステートメントが実行された合計回数。
            </p></li><li class="listitem"><p>
              <code class="literal">err_count</code>
            </p><p>
              ステートメントの発生によって生成されたエラーの合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">warn_count</code>
            </p><p>
              ステートメントの発生によって生成された警告の合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">total_latency</code>
            </p><p>
              ステートメントの時間指定発生の合計待機時間。
            </p></li><li class="listitem"><p>
              <code class="literal">max_latency</code>
            </p><p>
              ステートメントの時間指定発生の最大単一待機時間。
            </p></li><li class="listitem"><p>
              <code class="literal">avg_latency</code>
            </p><p>
              ステートメントの発生時間ごとの平均待機時間。
            </p></li><li class="listitem"><p>
              <code class="literal">lock_latency</code>
            </p><p>
              ステートメントの発生時間でロックを待機する合計時間。
            </p></li><li class="listitem"><p>
              <code class="literal">rows_sent</code>
            </p><p>
              ステートメントの発生によって返された行の合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">rows_sent_avg</code>
            </p><p>
              ステートメントの出現ごとに返される平均行数。
            </p></li><li class="listitem"><p>
              <code class="literal">rows_examined</code>
            </p><p>
              ステートメントの発生によってストレージエンジンから読み取られた行の合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">rows_examined_avg</code>
            </p><p>
              ステートメントの発生ごとにストレージエンジンから読み取られた行の平均数。
            </p></li><li class="listitem"><p>
              <code class="literal">rows_affected</code>
            </p><p>
              ステートメントの発生によって影響を受ける行の合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">rows_affected_avg</code>
            </p><p>
              ステートメントの発生ごとに影響を受ける行の平均数。
            </p></li><li class="listitem"><p>
              <code class="literal">tmp_tables</code>
            </p><p>
              ステートメントの発生によって作成された内部インメモリー一時テーブルの合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">tmp_disk_tables</code>
            </p><p>
              ステートメントの発生によって作成されたディスク上の内部一時テーブルの合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">rows_sorted</code>
            </p><p>
              ステートメントの出現順にソートされた行の合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">sort_merge_passes</code>
            </p><p>
              ステートメントの出現によるソートマージパスの合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">digest</code>
            </p><p>
              ステートメントダイジェスト。
            </p></li><li class="listitem"><p>
              <code class="literal">first_seen</code>
            </p><p>
              ステートメントが最初に表示された時刻。
            </p></li><li class="listitem"><p>
              <code class="literal">last_seen</code>
            </p><p>
              ステートメントが最後に表示された時刻。
            </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-statements-with-errors-or-warnings"></a>28.4.3.36 statements_with_errors_or_warnings および x$statements_with_errors_or_warnings ビュー</h4></div></div></div><a class="indexterm" name="idm45563182940160"></a><a class="indexterm" name="idm45563182937888"></a><a class="indexterm" name="idm45563182935728"></a><a class="indexterm" name="idm45563182933568"></a><p>
          これらのビューには、エラーまたは警告が生成された正規化されたステートメントが表示されます。 デフォルトでは、行は降順のエラー数および警告数でソートされます。 
        </p><p>
          <code class="literal">statements_with_errors_or_warnings</code> ビューと <code class="literal">x$statements_with_errors_or_warnings</code> ビューには、次のカラムがあります:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">クエリー</code>
            </p><p>
              正規化されたステートメントの文字列。
            </p></li><li class="listitem"><p>
              <code class="literal">db</code>
            </p><p>
              ステートメントのデフォルトデータベース。存在しない場合は <code class="literal">NULL</code>。
            </p></li><li class="listitem"><p>
              <code class="literal">exec_count</code>
            </p><p>
              ステートメントが実行された合計回数。
            </p></li><li class="listitem"><p>
              <code class="literal">エラー</code>を参照してください。
            </p><p>
              ステートメントの発生によって生成されたエラーの合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">error_pct</code>
            </p><p>
              エラーが発生したステートメントの発生率。
            </p></li><li class="listitem"><p>
              <code class="literal">warnings</code>
            </p><p>
              ステートメントの発生によって生成された警告の合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">warning_pct</code>
            </p><p>
              警告を生成したステートメントの発生率。
            </p></li><li class="listitem"><p>
              <code class="literal">first_seen</code>
            </p><p>
              ステートメントが最初に表示された時刻。
            </p></li><li class="listitem"><p>
              <code class="literal">last_seen</code>
            </p><p>
              ステートメントが最後に表示された時刻。
            </p></li><li class="listitem"><p>
              <code class="literal">digest</code>
            </p><p>
              ステートメントダイジェスト。
            </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-statements-with-full-table-scans"></a>28.4.3.37 statements_with_full_table_scans および x$statements_with_full_table_scans のビュー</h4></div></div></div><a class="indexterm" name="idm45563182905248"></a><a class="indexterm" name="idm45563182902992"></a><a class="indexterm" name="idm45563182900848"></a><a class="indexterm" name="idm45563182898688"></a><p>
          これらのビューには、全テーブルスキャンを実行した正規化されたステートメントが表示されます。 デフォルトでは、行は全体スキャンが実行された時間の降順および合計待機時間の降順でソートされます。 
        </p><p>
          <code class="literal">statements_with_full_table_scans</code> ビューと <code class="literal">x$statements_with_full_table_scans</code> ビューには、次のカラムがあります:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">クエリー</code>
            </p><p>
              正規化されたステートメントの文字列。
            </p></li><li class="listitem"><p>
              <code class="literal">db</code>
            </p><p>
              ステートメントのデフォルトデータベース。存在しない場合は <code class="literal">NULL</code>。
            </p></li><li class="listitem"><p>
              <code class="literal">exec_count</code>
            </p><p>
              ステートメントが実行された合計回数。
            </p></li><li class="listitem"><p>
              <code class="literal">total_latency</code>
            </p><p>
              ステートメントの時間指定ステートメントイベントの合計待機時間。
            </p></li><li class="listitem"><p>
              <code class="literal">no_index_used_count</code>
            </p><p>
              テーブルのスキャンにインデックスが使用されなかった合計回数。
            </p></li><li class="listitem"><p>
              <code class="literal">no_good_index_used_count</code>
            </p><p>
              テーブルのスキャンに適切なインデックスが使用されなかった合計回数。
            </p></li><li class="listitem"><p>
              <code class="literal">no_index_used_pct</code>
            </p><p>
              テーブルのスキャンにインデックスが使用されなかった時間の割合。
            </p></li><li class="listitem"><p>
              <code class="literal">rows_sent</code>
            </p><p>
              テーブルから返された行の合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">rows_examined</code>
            </p><p>
              テーブルのストレージエンジンから読み取られた行の合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">rows_sent_avg</code>
            </p><p>
              テーブルから返された行の平均数。
            </p></li><li class="listitem"><p>
              <code class="literal">rows_examined_avg</code>
            </p><p>
              テーブルのストレージエンジンから読み取られた行の平均数。
            </p></li><li class="listitem"><p>
              <code class="literal">first_seen</code>
            </p><p>
              ステートメントが最初に表示された時刻。
            </p></li><li class="listitem"><p>
              <code class="literal">last_seen</code>
            </p><p>
              ステートメントが最後に表示された時刻。
            </p></li><li class="listitem"><p>
              <code class="literal">digest</code>
            </p><p>
              ステートメントダイジェスト。
            </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-statements-with-runtimes-in-95th-percentile"></a>28.4.3.38 statements_with_runtimes_in_95th_percentile および x$statements_with_runtimes_in_95th_percentile のビュー</h4></div></div></div><a class="indexterm" name="idm45563182861824"></a><a class="indexterm" name="idm45563182859600"></a><a class="indexterm" name="idm45563182857424"></a><a class="indexterm" name="idm45563182855216"></a><p>
          これらのビューには、95 パーセンタイルのランタイムを含むステートメントがリストされます。 デフォルトでは、行は平均レイテンシの降順でソートされます。 
        </p><p>
          どちらのビューも、<code class="literal">x$ps_digest_avg_latency_distribution</code> と <code class="literal">x$ps_digest_95th_percentile_by_avg_us</code> の 2 つのヘルパービューを使用します。
        </p><p>
          <code class="literal">statements_with_runtimes_in_95th_percentile</code> ビューと <code class="literal">x$statements_with_runtimes_in_95th_percentile</code> ビューには、次のカラムがあります:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">クエリー</code>
            </p><p>
              正規化されたステートメントの文字列。
            </p></li><li class="listitem"><p>
              <code class="literal">db</code>
            </p><p>
              ステートメントのデフォルトデータベース。存在しない場合は <code class="literal">NULL</code>。
            </p></li><li class="listitem"><p>
              <code class="literal">full_scan</code>
            </p><p>
              ステートメントの発生によって実行された全テーブルスキャンの合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">exec_count</code>
            </p><p>
              ステートメントが実行された合計回数。
            </p></li><li class="listitem"><p>
              <code class="literal">err_count</code>
            </p><p>
              ステートメントの発生によって生成されたエラーの合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">warn_count</code>
            </p><p>
              ステートメントの発生によって生成された警告の合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">total_latency</code>
            </p><p>
              ステートメントの時間指定発生の合計待機時間。
            </p></li><li class="listitem"><p>
              <code class="literal">max_latency</code>
            </p><p>
              ステートメントの時間指定発生の最大単一待機時間。
            </p></li><li class="listitem"><p>
              <code class="literal">avg_latency</code>
            </p><p>
              ステートメントの発生時間ごとの平均待機時間。
            </p></li><li class="listitem"><p>
              <code class="literal">rows_sent</code>
            </p><p>
              ステートメントの発生によって返された行の合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">rows_sent_avg</code>
            </p><p>
              ステートメントの出現ごとに返される平均行数。
            </p></li><li class="listitem"><p>
              <code class="literal">rows_examined</code>
            </p><p>
              ステートメントの発生によってストレージエンジンから読み取られた行の合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">rows_examined_avg</code>
            </p><p>
              ステートメントの発生ごとにストレージエンジンから読み取られた行の平均数。
            </p></li><li class="listitem"><p>
              <code class="literal">first_seen</code>
            </p><p>
              ステートメントが最初に表示された時刻。
            </p></li><li class="listitem"><p>
              <code class="literal">last_seen</code>
            </p><p>
              ステートメントが最後に表示された時刻。
            </p></li><li class="listitem"><p>
              <code class="literal">digest</code>
            </p><p>
              ステートメントダイジェスト。
            </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-statements-with-sorting"></a>28.4.3.39 statements_with_sorting および x$statements_with_sorting のビュー</h4></div></div></div><a class="indexterm" name="idm45563182812256"></a><a class="indexterm" name="idm45563182810080"></a><a class="indexterm" name="idm45563182807968"></a><a class="indexterm" name="idm45563182805856"></a><p>
          これらのビューには、ソートを実行した正規化されたステートメントがリストされます。 デフォルトでは、行は合計レイテンシの降順でソートされます。 
        </p><p>
          <code class="literal">statements_with_sorting</code> ビューと <code class="literal">x$statements_with_sorting</code> ビューには、次のカラムがあります:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">クエリー</code>
            </p><p>
              正規化されたステートメントの文字列。
            </p></li><li class="listitem"><p>
              <code class="literal">db</code>
            </p><p>
              ステートメントのデフォルトデータベース。存在しない場合は <code class="literal">NULL</code>。
            </p></li><li class="listitem"><p>
              <code class="literal">exec_count</code>
            </p><p>
              ステートメントが実行された合計回数。
            </p></li><li class="listitem"><p>
              <code class="literal">total_latency</code>
            </p><p>
              ステートメントの時間指定発生の合計待機時間。
            </p></li><li class="listitem"><p>
              <code class="literal">sort_merge_passes</code>
            </p><p>
              ステートメントの出現によるソートマージパスの合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">avg_sort_merges</code>
            </p><p>
              ステートメントの出現ごとのソートマージパスの平均数。
            </p></li><li class="listitem"><p>
              <code class="literal">sorts_using_scans</code>
            </p><p>
              ステートメントの発生によるテーブルスキャンを使用したソートの合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">sort_using_range</code>
            </p><p>
              ステートメントの出現による範囲アクセスを使用したソートの合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">rows_sorted</code>
            </p><p>
              ステートメントの出現順にソートされた行の合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">avg_rows_sorted</code>
            </p><p>
              ステートメントの発生ごとにソートされた行の平均数。
            </p></li><li class="listitem"><p>
              <code class="literal">first_seen</code>
            </p><p>
              ステートメントが最初に表示された時刻。
            </p></li><li class="listitem"><p>
              <code class="literal">last_seen</code>
            </p><p>
              ステートメントが最後に表示された時刻。
            </p></li><li class="listitem"><p>
              <code class="literal">digest</code>
            </p><p>
              ステートメントダイジェスト。
            </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-statements-with-temp-tables"></a>28.4.3.40 statements_with_temp_tables および x$statements_with_temp_tables のビュー</h4></div></div></div><a class="indexterm" name="idm45563182771296"></a><a class="indexterm" name="idm45563182769104"></a><a class="indexterm" name="idm45563182766976"></a><a class="indexterm" name="idm45563182764848"></a><p>
          これらのビューには、一時テーブルを使用した正規化されたステートメントがリストされます。 デフォルトでは、使用されるディスク上の一時テーブルの数が降順で、使用されるインメモリー一時テーブルの数が降順でソートされます。 
        </p><p>
          <code class="literal">statements_with_temp_tables</code> ビューと <code class="literal">x$statements_with_temp_tables</code> ビューには、次のカラムがあります:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">クエリー</code>
            </p><p>
              正規化されたステートメントの文字列。
            </p></li><li class="listitem"><p>
              <code class="literal">db</code>
            </p><p>
              ステートメントのデフォルトデータベース。存在しない場合は <code class="literal">NULL</code>。
            </p></li><li class="listitem"><p>
              <code class="literal">exec_count</code>
            </p><p>
              ステートメントが実行された合計回数。
            </p></li><li class="listitem"><p>
              <code class="literal">total_latency</code>
            </p><p>
              ステートメントの時間指定発生の合計待機時間。
            </p></li><li class="listitem"><p>
              <code class="literal">memory_tmp_tables</code>
            </p><p>
              ステートメントの発生によって作成された内部インメモリー一時テーブルの合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">disk_tmp_tables</code>
            </p><p>
              ステートメントの発生によって作成されたディスク上の内部一時テーブルの合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">avg_tmp_tables_per_query</code>
            </p><p>
              ステートメントの発生ごとに作成された内部一時テーブルの平均数。
            </p></li><li class="listitem"><p>
              <code class="literal">tmp_tables_to_disk_pct</code>
            </p><p>
              ディスク上のテーブルに変換された内部インメモリー一時テーブルの割合。
            </p></li><li class="listitem"><p>
              <code class="literal">first_seen</code>
            </p><p>
              ステートメントが最初に表示された時刻。
            </p></li><li class="listitem"><p>
              <code class="literal">last_seen</code>
            </p><p>
              ステートメントが最後に表示された時刻。
            </p></li><li class="listitem"><p>
              <code class="literal">digest</code>
            </p><p>
              ステートメントダイジェスト。
            </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-user-summary"></a>28.4.3.41 user_summary および x$user_summary のビュー</h4></div></div></div><a class="indexterm" name="idm45563182734240"></a><a class="indexterm" name="idm45563182732080"></a><a class="indexterm" name="idm45563182730000"></a><a class="indexterm" name="idm45563182727904"></a><p>
          これらのビューには、ステートメントアクティビティ、ファイル I/O,および接続がユーザー別にグループ化されて要約されます。 デフォルトでは、行は合計レイテンシの降順でソートされます。 
        </p><p>
          <code class="literal">user_summary</code> ビューと <code class="literal">x$user_summary</code> ビューには、次のカラムがあります:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">user</code>
            </p><p>
              クライアントユーザー名。 基礎となる「パフォーマンススキーマ」テーブルの <code class="literal">USER</code> カラムが <code class="literal">NULL</code> である行はバックグラウンドスレッド用とみなされ、<code class="literal">background</code> のホスト名でレポートされます。 
            </p></li><li class="listitem"><p>
              <code class="literal">statements</code>
            </p><p>
              ユーザーのステートメントの合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">statement_latency</code>
            </p><p>
              ユーザーの時間指定ステートメントの合計待機時間。
            </p></li><li class="listitem"><p>
              <code class="literal">statement_avg_latency</code>
            </p><p>
              ユーザーの時間指定ステートメント当たりの平均待機時間。
            </p></li><li class="listitem"><p>
              <code class="literal">table_scans</code>
            </p><p>
              ユーザーのテーブルスキャンの合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">file_ios</code>
            </p><p>
              ユーザーのファイル I/O イベントの合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">file_io_latency</code>
            </p><p>
              ユーザーの時間指定ファイル I/O イベントの合計待機時間。
            </p></li><li class="listitem"><p>
              <code class="literal">current_connections</code>
            </p><p>
              ユーザーの現在の接続数。
            </p></li><li class="listitem"><p>
              <code class="literal">total_connections</code>
            </p><p>
              ユーザーの合計の接続数。
            </p></li><li class="listitem"><p>
              <code class="literal">unique_hosts</code>
            </p><p>
              ユーザーの接続元である個別のホストの数。
            </p></li><li class="listitem"><p>
              <code class="literal">current_memory</code>
            </p><p>
              ユーザーに割り当てられているメモリーの現在の量。
            </p></li><li class="listitem"><p>
              <code class="literal">total_memory_allocated</code>
            </p><p>
              ユーザーに割り当てられたメモリーの合計量。
            </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-user-summary-by-file-io"></a>28.4.3.42 user_summary_by_file_io および x$user_summary_by_file_io のビュー</h4></div></div></div><a class="indexterm" name="idm45563182693776"></a><a class="indexterm" name="idm45563182691600"></a><a class="indexterm" name="idm45563182689488"></a><a class="indexterm" name="idm45563182687376"></a><p>
          これらのビューには、ユーザー別にグループ化されたファイル I/O,が要約されます。 デフォルトでは、行は合計ファイル I/O レイテンシの降順でソートされます。 
        </p><p>
          <code class="literal">user_summary_by_file_io</code> ビューと <code class="literal">x$user_summary_by_file_io</code> ビューには、次のカラムがあります:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">user</code>
            </p><p>
              クライアントユーザー名。 基礎となる「パフォーマンススキーマ」テーブルの <code class="literal">USER</code> カラムが <code class="literal">NULL</code> である行はバックグラウンドスレッド用とみなされ、<code class="literal">background</code> のホスト名でレポートされます。 
            </p></li><li class="listitem"><p>
              <code class="literal">ios</code>
            </p><p>
              ユーザーのファイル I/O イベントの合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">io_latency</code>
            </p><p>
              ユーザーの時間指定ファイル I/O イベントの合計待機時間。
            </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-user-summary-by-file-io-type"></a>28.4.3.43 user_summary_by_file_io_type および x$user_summary_by_file_io_type のビュー</h4></div></div></div><a class="indexterm" name="idm45563182671648"></a><a class="indexterm" name="idm45563182669456"></a><a class="indexterm" name="idm45563182667328"></a><a class="indexterm" name="idm45563182665184"></a><p>
          これらのビューには、ユーザーおよびイベントタイプ別にグループ化されたファイル I/O,が要約されます。 デフォルトでは、行はユーザーおよび合計レイテンシの降順でソートされます。 
        </p><p>
          <code class="literal">user_summary_by_file_io_type</code> ビューと <code class="literal">x$user_summary_by_file_io_type</code> ビューには、次のカラムがあります:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">user</code>
            </p><p>
              クライアントユーザー名。 基礎となる「パフォーマンススキーマ」テーブルの <code class="literal">USER</code> カラムが <code class="literal">NULL</code> である行はバックグラウンドスレッド用とみなされ、<code class="literal">background</code> のホスト名でレポートされます。 
            </p></li><li class="listitem"><p>
              <code class="literal">event_name</code>
            </p><p>
              ファイル I/O イベント名。
            </p></li><li class="listitem"><p>
              <code class="literal">total</code>
            </p><p>
              ユーザーのファイル I/O イベントの発生の合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">latency</code>
            </p><p>
              ユーザーのファイル I/O イベントの発生時間の合計待機時間。
            </p></li><li class="listitem"><p>
              <code class="literal">max_latency</code>
            </p><p>
              ユーザーのファイル I/O イベントの時間指定発生の最大単一待機時間。
            </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-user-summary-by-stages"></a>28.4.3.44 user_summary_by_stages および x$user_summary_by_stages のビュー</h4></div></div></div><a class="indexterm" name="idm45563182645232"></a><a class="indexterm" name="idm45563182643056"></a><a class="indexterm" name="idm45563182640944"></a><a class="indexterm" name="idm45563182638832"></a><p>
          これらのビューには、ユーザー別にグループ化されたステージが要約されます。 デフォルトでは、行はユーザーでソートされ、ステージ待機時間の合計が降順になります。 
        </p><p>
          <code class="literal">user_summary_by_stages</code> ビューと <code class="literal">x$user_summary_by_stages</code> ビューには、次のカラムがあります:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">user</code>
            </p><p>
              クライアントユーザー名。 基礎となる「パフォーマンススキーマ」テーブルの <code class="literal">USER</code> カラムが <code class="literal">NULL</code> である行はバックグラウンドスレッド用とみなされ、<code class="literal">background</code> のホスト名でレポートされます。 
            </p></li><li class="listitem"><p>
              <code class="literal">event_name</code>
            </p><p>
              ステージイベント名。
            </p></li><li class="listitem"><p>
              <code class="literal">total</code>
            </p><p>
              ユーザーのステージイベントの発生の合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">total_latency</code>
            </p><p>
              ユーザーのステージイベントの時間指定発生の合計待機時間。
            </p></li><li class="listitem"><p>
              <code class="literal">avg_latency</code>
            </p><p>
              ユーザーのステージイベントの発生時間ごとの平均待機時間。
            </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-user-summary-by-statement-latency"></a>28.4.3.45 user_summary_by_statement_latency および x$user_summary_by_statement_latency のビュー</h4></div></div></div><a class="indexterm" name="idm45563182618896"></a><a class="indexterm" name="idm45563182616640"></a><a class="indexterm" name="idm45563182614496"></a><a class="indexterm" name="idm45563182612336"></a><p>
          これらのビューには、ユーザー別にグループ化されたステートメント全体の統計が要約されます。 デフォルトでは、行は合計レイテンシの降順でソートされます。 
        </p><p>
          <code class="literal">user_summary_by_statement_latency</code> ビューと <code class="literal">x$user_summary_by_statement_latency</code> ビューには、次のカラムがあります:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">user</code>
            </p><p>
              クライアントユーザー名。 基礎となる「パフォーマンススキーマ」テーブルの <code class="literal">USER</code> カラムが <code class="literal">NULL</code> である行はバックグラウンドスレッド用とみなされ、<code class="literal">background</code> のホスト名でレポートされます。 
            </p></li><li class="listitem"><p>
              <code class="literal">total</code>
            </p><p>
              ユーザーのステートメントの合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">total_latency</code>
            </p><p>
              ユーザーの時間指定ステートメントの合計待機時間。
            </p></li><li class="listitem"><p>
              <code class="literal">max_latency</code>
            </p><p>
              ユーザーの時間指定ステートメントの最大単一待機時間。
            </p></li><li class="listitem"><p>
              <code class="literal">lock_latency</code>
            </p><p>
              ユーザーの時間指定ステートメントによるロック待機の合計時間。
            </p></li><li class="listitem"><p>
              <code class="literal">rows_sent</code>
            </p><p>
              ユーザーに対してステートメントによって返された行の合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">rows_examined</code>
            </p><p>
              ユーザーのステートメントによってストレージエンジンから読み取られた行の合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">rows_affected</code>
            </p><p>
              ユーザーのステートメントの影響を受ける行の合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">full_scans</code>
            </p><p>
              ユーザーのステートメントによる全テーブルスキャンの合計数。
            </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-user-summary-by-statement-type"></a>28.4.3.46 user_summary_by_statement_type および x$user_summary_by_statement_type のビュー</h4></div></div></div><a class="indexterm" name="idm45563182584048"></a><a class="indexterm" name="idm45563182581792"></a><a class="indexterm" name="idm45563182579648"></a><a class="indexterm" name="idm45563182577504"></a><p>
          これらのビューには、ユーザーおよびステートメントタイプ別にグループ化された、実行されたステートメントに関する情報が要約されます。 デフォルトでは、行はユーザーおよび合計レイテンシの降順でソートされます。 
        </p><p>
          <code class="literal">user_summary_by_statement_type</code> ビューと <code class="literal">x$user_summary_by_statement_type</code> ビューには、次のカラムがあります:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">user</code>
            </p><p>
              クライアントユーザー名。 基礎となる「パフォーマンススキーマ」テーブルの <code class="literal">USER</code> カラムが <code class="literal">NULL</code> である行はバックグラウンドスレッド用とみなされ、<code class="literal">background</code> のホスト名でレポートされます。 
            </p></li><li class="listitem"><p>
              <code class="literal">statement</code>
            </p><p>
              ステートメントイベント名の最終コンポーネント。
            </p></li><li class="listitem"><p>
              <code class="literal">total</code>
            </p><p>
              ユーザーのステートメントイベントの発生の合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">total_latency</code>
            </p><p>
              ユーザーのステートメントイベントの発生時間の合計待機時間。
            </p></li><li class="listitem"><p>
              <code class="literal">max_latency</code>
            </p><p>
              ユーザーのステートメントイベントの時間指定発生の最大単一待機時間。
            </p></li><li class="listitem"><p>
              <code class="literal">lock_latency</code>
            </p><p>
              ユーザーのステートメントイベントの発生時間によるロック待機の合計時間。
            </p></li><li class="listitem"><p>
              <code class="literal">rows_sent</code>
            </p><p>
              ユーザーのステートメントイベントの発生によって返された行の合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">rows_examined</code>
            </p><p>
              ユーザーのステートメントイベントの発生によってストレージエンジンから読み取られた行の合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">rows_affected</code>
            </p><p>
              ユーザーのステートメントイベントの発生の影響を受ける行の合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">full_scans</code>
            </p><p>
              ユーザーのステートメントイベントの発生による全テーブルスキャンの合計数。
            </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-version"></a>28.4.3.47 バージョンビュー</h4></div></div></div><a class="indexterm" name="idm45563182546912"></a><a class="indexterm" name="idm45563182544752"></a><p>
          このビューには、現在の <code class="literal">sys</code> スキーマおよび MySQL サーバーのバージョンが表示されます。
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
            MySQL 8.0.18 では、このビューは非推奨です。将来のバージョンの MySQL で削除される予定です。 影響を受けるアプリケーションは、かわりに代替を使用するように調整する必要があります。 たとえば、<code class="literal">VERSION()</code> 関数を使用して、MySQL サーバーのバージョンを取得します。 
          </p></div><p>
          <code class="literal">version</code> ビューには、次のカラムがあります:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">sys_version</code>
            </p><p>
              <code class="literal">sys</code> スキーマのバージョン。
            </p></li><li class="listitem"><p>
              <code class="literal">mysql_version</code>
            </p><p>
              MySQL サーバーのバージョン。
            </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-wait-classes-global-by-avg-latency"></a>28.4.3.48 wait_classes_global_by_avg_latency および x$wait_classes_global_by_avg_latency のビュー</h4></div></div></div><a class="indexterm" name="idm45563182530480"></a><a class="indexterm" name="idm45563182528208"></a><a class="indexterm" name="idm45563182526048"></a><a class="indexterm" name="idm45563182523888"></a><p>
          これらのビューには、待機クラスの平均待機時間がイベントクラス別にグループ化されて要約されます。 デフォルトでは、行は平均レイテンシの降順でソートされます。 アイドルイベントは無視されます。 
        </p><p>
          イベントクラスは、最初の 3 つのコンポーネントの後にあるすべてのものをイベント名から削除することによって決定されます。 たとえば、<code class="literal">wait/io/file/sql/slow_log</code> のクラスは <code class="literal">wait/io/file</code> です。 
        </p><p>
          <code class="literal">wait_classes_global_by_avg_latency</code> ビューと <code class="literal">x$wait_classes_global_by_avg_latency</code> ビューには、次のカラムがあります:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">event_class</code>
            </p><p>
              イベントクラス。
            </p></li><li class="listitem"><p>
              <code class="literal">total</code>
            </p><p>
              クラス内で発生したイベントの合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">total_latency</code>
            </p><p>
              クラス内のイベントの発生時間の合計待機時間。
            </p></li><li class="listitem"><p>
              <code class="literal">min_latency</code>
            </p><p>
              クラス内のイベントの発生時間の最小単一待機時間。
            </p></li><li class="listitem"><p>
              <code class="literal">avg_latency</code>
            </p><p>
              クラス内のイベントの発生時間ごとの平均待機時間。
            </p></li><li class="listitem"><p>
              <code class="literal">max_latency</code>
            </p><p>
              クラス内で発生したイベントの最大単一待機時間。
            </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-wait-classes-global-by-latency"></a>28.4.3.49 wait_classes_global_by_latency および x$wait_classes_global_by_latency ビュー</h4></div></div></div><a class="indexterm" name="idm45563182502112"></a><a class="indexterm" name="idm45563182499856"></a><a class="indexterm" name="idm45563182497712"></a><a class="indexterm" name="idm45563182495568"></a><p>
          これらのビューには、待機クラスの合計待機時間がイベントクラス別にグループ化されて要約されます。 デフォルトでは、行は合計レイテンシの降順でソートされます。 アイドルイベントは無視されます。 
        </p><p>
          イベントクラスは、最初の 3 つのコンポーネントの後にあるすべてのものをイベント名から削除することによって決定されます。 たとえば、<code class="literal">wait/io/file/sql/slow_log</code> のクラスは <code class="literal">wait/io/file</code> です。 
        </p><p>
          <code class="literal">wait_classes_global_by_latency</code> ビューと <code class="literal">x$wait_classes_global_by_latency</code> ビューには、次のカラムがあります:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">event_class</code>
            </p><p>
              イベントクラス。
            </p></li><li class="listitem"><p>
              <code class="literal">total</code>
            </p><p>
              クラス内で発生したイベントの合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">total_latency</code>
            </p><p>
              クラス内のイベントの発生時間の合計待機時間。
            </p></li><li class="listitem"><p>
              <code class="literal">min_latency</code>
            </p><p>
              クラス内のイベントの発生時間の最小単一待機時間。
            </p></li><li class="listitem"><p>
              <code class="literal">avg_latency</code>
            </p><p>
              クラス内のイベントの発生時間ごとの平均待機時間。
            </p></li><li class="listitem"><p>
              <code class="literal">max_latency</code>
            </p><p>
              クラス内で発生したイベントの最大単一待機時間。
            </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-waits-by-host-by-latency"></a>28.4.3.50 waits_by_host_by_latency および x$waits_by_host_by_latency のビュー</h4></div></div></div><a class="indexterm" name="idm45563182473760"></a><a class="indexterm" name="idm45563182471584"></a><a class="indexterm" name="idm45563182469472"></a><a class="indexterm" name="idm45563182467344"></a><p>
          これらのビューには、ホストおよびイベント別にグループ化された待機イベントが要約されます。 デフォルトでは、行はホストおよび合計レイテンシの降順でソートされます。 アイドルイベントは無視されます。 
        </p><p>
          <code class="literal">waits_by_host_by_latency</code> ビューと <code class="literal">x$waits_by_host_by_latency</code> ビューには、次のカラムがあります:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">ホスト</code>
            </p><p>
              接続元のホスト。
            </p></li><li class="listitem"><p>
              <code class="literal">event</code>
            </p><p>
              イベント名。
            </p></li><li class="listitem"><p>
              <code class="literal">total</code>
            </p><p>
              ホストで発生したイベントの合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">total_latency</code>
            </p><p>
              ホストのイベントの発生時間の合計待機時間。
            </p></li><li class="listitem"><p>
              <code class="literal">avg_latency</code>
            </p><p>
              ホストのイベントの発生時間ごとの平均待機時間。
            </p></li><li class="listitem"><p>
              <code class="literal">max_latency</code>
            </p><p>
              ホストのイベントの時間指定発生の最大単一待機時間。
            </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-waits-by-user-by-latency"></a>28.4.3.51 waits_by_user_by_latency および x$waits_by_user_by_latency のビュー</h4></div></div></div><a class="indexterm" name="idm45563182447952"></a><a class="indexterm" name="idm45563182445776"></a><a class="indexterm" name="idm45563182443664"></a><a class="indexterm" name="idm45563182441536"></a><p>
          これらのビューには、ユーザーおよびイベント別にグループ化された待機イベントが要約されます。 デフォルトでは、行はユーザーおよび合計レイテンシの降順でソートされます。 アイドルイベントは無視されます。 
        </p><p>
          <code class="literal">waits_by_user_by_latency</code> ビューと <code class="literal">x$waits_by_user_by_latency</code> ビューには、次のカラムがあります:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">user</code>
            </p><p>
              接続に関連付けられているユーザー。
            </p></li><li class="listitem"><p>
              <code class="literal">event</code>
            </p><p>
              イベント名。
            </p></li><li class="listitem"><p>
              <code class="literal">total</code>
            </p><p>
              ユーザーのイベントの発生の合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">total_latency</code>
            </p><p>
              ユーザーのイベントの発生時間の合計待機時間。
            </p></li><li class="listitem"><p>
              <code class="literal">avg_latency</code>
            </p><p>
              ユーザーのイベントの発生時間ごとの平均待機時間。
            </p></li><li class="listitem"><p>
              <code class="literal">max_latency</code>
            </p><p>
              ユーザーのイベントの時間指定発生の最大単一待機時間。
            </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-waits-global-by-latency"></a>28.4.3.52 waits_global_by_latency および x$waits_global_by_latency のビュー</h4></div></div></div><a class="indexterm" name="idm45563182422080"></a><a class="indexterm" name="idm45563182419904"></a><a class="indexterm" name="idm45563182417792"></a><a class="indexterm" name="idm45563182415680"></a><p>
          これらのビューには、イベント別にグループ化された待機イベントが要約されます。 デフォルトでは、行は合計レイテンシの降順でソートされます。 アイドルイベントは無視されます。 
        </p><p>
          <code class="literal">waits_global_by_latency</code> ビューと <code class="literal">x$waits_global_by_latency</code> ビューには、次のカラムがあります:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">events</code>
            </p><p>
              イベント名。
            </p></li><li class="listitem"><p>
              <code class="literal">total</code>
            </p><p>
              イベントの発生の合計数。
            </p></li><li class="listitem"><p>
              <code class="literal">total_latency</code>
            </p><p>
              イベントの発生時間の合計待機時間。
            </p></li><li class="listitem"><p>
              <code class="literal">avg_latency</code>
            </p><p>
              イベントの発生時間ごとの平均待機時間。
            </p></li><li class="listitem"><p>
              <code class="literal">max_latency</code>
            </p><p>
              イベントの時間指定発生の最大単一待機時間。
            </p></li></ul></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="sys-schema-procedures"></a>28.4.4 sys スキーマストアドプロシージャ</h3></div></div></div><div class="toc"><dl class="toc"><dt><span class="section"><a href="sys-schema.html#sys-create-synonym-db">28.4.4.1 create_synonym_db() プロシージャ</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-diagnostics">28.4.4.2 diagnostics() プロシージャ</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-execute-prepared-stmt">28.4.4.3 execute_prepared_stmt() プロシージャ</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-ps-setup-disable-background-threads">28.4.4.4 ps_setup_disable_background_threads() プロシージャ</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-ps-setup-disable-consumer">28.4.4.5 ps_setup_disable_consumer() プロシージャ</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-ps-setup-disable-instrument">28.4.4.6 ps_setup_disable_instrument() プロシージャ</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-ps-setup-disable-thread">28.4.4.7 ps_setup_disable_thread() プロシージャ</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-ps-setup-enable-background-threads">28.4.4.8 ps_setup_enable_background_threads() プロシージャ</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-ps-setup-enable-consumer">28.4.4.9 ps_setup_enable_consumer() プロシージャ</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-ps-setup-enable-instrument">28.4.4.10 ps_setup_enable_instrument() プロシージャ</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-ps-setup-enable-thread">28.4.4.11 ps_setup_enable_thread() プロシージャ</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-ps-setup-reload-saved">28.4.4.12 ps_setup_reload_saved() プロシージャ</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-ps-setup-reset-to-default">28.4.4.13 ps_setup_reset_to_default() プロシージャ</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-ps-setup-save">28.4.4.14 ps_setup_save() プロシージャ</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-ps-setup-show-disabled">28.4.4.15 ps_setup_show_disabled() プロシージャ</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-ps-setup-show-disabled-consumers">28.4.4.16 ps_setup_show_disabled_consumers() プロシージャ</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-ps-setup-show-disabled-instruments">28.4.4.17 ps_setup_show_disabled_instruments() プロシージャ</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-ps-setup-show-enabled">28.4.4.18 ps_setup_show_enabled() プロシージャ</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-ps-setup-show-enabled-consumers">28.4.4.19 ps_setup_show_enabled_consumers() プロシージャ</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-ps-setup-show-enabled-instruments">28.4.4.20 ps_setup_show_enabled_instruments() プロシージャ</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-ps-statement-avg-latency-histogram">28.4.4.21 ps_statement_avg_latency_histogram() プロシージャ</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-ps-trace-statement-digest">28.4.4.22 ps_trace_statement_digest() プロシージャ</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-ps-trace-thread">28.4.4.23 ps_trace_thread() プロシージャ</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-ps-truncate-all-tables">28.4.4.24 ps_truncate_all_tables() プロシージャ</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-statement-performance-analyzer">28.4.4.25 statement_performance_analyzer() プロシージャ</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-table-exists">28.4.4.26 table_exists() プロシージャ</a></span></dt></dl></div><p>
        次の各セクションでは、<code class="literal">sys</code> スキーマストアドプロシージャについて説明します。
      </p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-create-synonym-db"></a>28.4.4.1 create_synonym_db() プロシージャ</h4></div></div></div><a class="indexterm" name="idm45563182395680"></a><a class="indexterm" name="idm45563182393472"></a><p>
          このプロシージャは、スキーマ名を指定すると、元のスキーマ内のすべてのテーブルおよびビューを参照するビューを含むシノニムスキーマを作成します。 たとえば、これを使用して、長い名前 (<code class="literal">INFORMATION_SCHEMA</code> ではなく <code class="literal">info</code> など) のスキーマを参照するための短い名前を作成できます。 
        </p><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-create-synonym-db-parameters"></a>パラメータ</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                <code class="literal">in_db_name VARCHAR(64)</code>: シノニムを作成するスキーマの名前。
              </p></li><li class="listitem"><p>
                <code class="literal">in_synonym VARCHAR(64)</code>: シノニムスキーマに使用する名前。 このスキーマは存在していない必要があります。 
              </p></li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-create-synonym-db-example"></a>例</h5></div></div></div><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW DATABASES;</code></strong>
+--------------------+
| Database           |
+--------------------+
| information_schema |
| mysql              |
| performance_schema |
| sys                |
| world              |
+--------------------+
mysql&gt; <strong class="userinput"><code>CALL sys.create_synonym_db('INFORMATION_SCHEMA', 'info');</code></strong>
+---------------------------------------+
| summary                               |
+---------------------------------------+
| Created 63 views in the info database |
+---------------------------------------+
mysql&gt; <strong class="userinput"><code>SHOW DATABASES;</code></strong>
+--------------------+
| Database           |
+--------------------+
| information_schema |
| info               |
| mysql              |
| performance_schema |
| sys                |
| world              |
+--------------------+
mysql&gt; <strong class="userinput"><code>SHOW FULL TABLES FROM info;</code></strong>
+---------------------------------------+------------+
| Tables_in_info                        | Table_type |
+---------------------------------------+------------+
| character_sets                        | VIEW       |
| collation_character_set_applicability | VIEW       |
| collations                            | VIEW       |
| column_privileges                     | VIEW       |
| columns                               | VIEW       |
...
</pre></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-diagnostics"></a>28.4.4.2 diagnostics() プロシージャ</h4></div></div></div><a class="indexterm" name="idm45563182375680"></a><a class="indexterm" name="idm45563182373488"></a><p>
          診断目的で現在のサーバーステータスのレポートを作成します。
        </p><p>
          このプロシージャは、<code class="literal">sql_log_bin</code> システム変数のセッション値を操作して、実行中にバイナリロギングを無効にします。 これは制限付き操作であるため、このプロシージャには制限付きセッション変数を設定するのに十分な権限が必要です。 <a class="xref" href="server-administration.html#system-variable-privileges" title="5.1.9.1 システム変数権限">セクション5.1.9.1「システム変数権限」</a>を参照してください。 
        </p><p>
          <code class="literal">diagnostics()</code> 用に収集されるデータには、次の情報が含まれます:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">metrics</code> ビューからの情報 (<a class="xref" href="sys-schema.html#sys-metrics" title="28.4.3.21 メトリックビュー">セクション28.4.3.21「メトリックビュー」</a> を参照)
            </p></li><li class="listitem"><p>
              95 パーセンタイルでクエリーを検出するビューなど、その他の関連する <code class="literal">sys</code> スキーマビューからの情報
            </p></li><li class="listitem"><p>
              MySQL サーバーが NDB Cluster の一部である場合、<code class="literal">ndbinfo</code> スキーマからの情報
            </p></li><li class="listitem"><p>
              レプリケーションステータス (ソースとレプリカの両方)
            </p></li></ul></div><p>
          sys スキーマビューの一部は、初期値 (オプション)、全体値およびデルタ値として計算されます:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              初期ビューは、<code class="literal">diagnostics()</code> プロシージャの開始時のビューの内容です。 この出力は、デルタ表示に使用される開始値と同じです。 初期ビューは、<code class="literal">diagnostics.include_raw</code> 構成オプションが <code class="literal">ON</code> の場合に含まれます。 
            </p></li><li class="listitem"><p>
              全体的なビューは、<code class="literal">diagnostics()</code> プロシージャの最後にあるビューの内容です。 この出力は、デルタ表示に使用される終了値と同じです。 ビュー全体が常に含まれます。 
            </p></li><li class="listitem"><p>
              デルタビューは、プロシージャの実行の開始と終了の違いです。 最小値と最大値は、それぞれ終了ビューの最小値と最大値です。 監視対象期間の最小値および最大値を反映しているとはかぎりません。 <code class="literal">metrics</code> ビューを除き、デルタは最初の出力と最後の出力の間でのみ計算されます。 
            </p></li></ul></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-diagnostics-parameters"></a>パラメータ</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                <code class="literal">in_max_runtime INT UNSIGNED</code>: データ収集の最大時間 (秒)。 <code class="literal">NULL</code> を使用して、デフォルトの 60 秒のデータを収集します。 それ以外の場合は、0 より大きい値を使用します。 
              </p></li><li class="listitem"><p>
                <code class="literal">in_interval INT UNSIGNED</code>: データ収集間のスリープ時間 (秒)。 <code class="literal">NULL</code> を使用して、デフォルトの 30 秒間スリープします。 それ以外の場合は、0 より大きい値を使用します。 
              </p></li><li class="listitem"><p>
                <code class="literal">in_auto_config ENUM('current', 'medium', 'full')</code>: 使用するパフォーマンススキーマ構成。 許可される値は次のとおりです: 
              </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                    <code class="literal">current</code>: 現在のインストゥルメントおよびコンシューマ設定を使用します。
                  </p></li><li class="listitem"><p>
                    <code class="literal">medium</code>: 一部のインストゥルメントおよびコンシューマを有効にします。
                  </p></li><li class="listitem"><p>
                    <code class="literal">full</code>: すべてのインストゥルメントおよびコンシューマを有効にします。
                  </p></li></ul></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
                  インストゥルメントおよびコンシューマが有効になるほど、MySQL サーバーのパフォーマンスへの影響が大きくなります。 <code class="literal">medium</code> 設定、特にパフォーマンスに大きな影響を与える <code class="literal">full</code> 設定には注意してください。 
                </p></div><p>
                <code class="literal">medium</code> または <code class="literal">full</code> 設定を使用するには、<code class="literal">SUPER</code> 権限が必要です。
              </p><p>
                <code class="literal">current</code> 以外の設定を選択すると、現在の設定がプロシージャの最後にリストアされます。
              </p></li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-diagnostics-configuration-options"></a>構成オプション</h5></div></div></div><p>
            <code class="literal">diagnostics()</code> 操作は、次の構成オプションまたは対応するユーザー定義変数を使用して変更できます (<a class="xref" href="sys-schema.html#sys-sys-config" title="28.4.2.1 sys_config テーブル">セクション28.4.2.1「sys_config テーブル」</a> を参照):
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                <code class="literal">debug</code>, <code class="literal">@sys.debug</code>
              </p><p>
                このオプションが <code class="literal">ON</code> の場合は、デバッグ出力を生成します。 デフォルトは <code class="literal">OFF</code> です。 
              </p></li><li class="listitem"><p>
                <code class="literal">diagnostics.allow_i_s_tables</code>, <code class="literal">@sys.diagnostics.allow_i_s_tables</code>
              </p><p>
                このオプションが <code class="literal">ON</code> の場合、<code class="literal">diagnostics()</code> プロシージャは <code class="literal">INFORMATION_SCHEMA.TABLES</code> テーブルに対してテーブルスキャンを実行できます。 多くのテーブルがある場合、これはコストがかかる可能性があります。 デフォルトは <code class="literal">OFF</code> です。 
              </p></li><li class="listitem"><p>
                <code class="literal">diagnostics.include_raw</code>, <code class="literal">@sys.diagnostics.include_raw</code>
              </p><p>
                このオプションが <code class="literal">ON</code> の場合、<code class="literal">diagnostics()</code> プロシージャの出力には、<code class="literal">metrics</code> ビューのクエリーからの RAW 出力が含まれます。 デフォルトは <code class="literal">OFF</code> です。 
              </p></li><li class="listitem"><p>
                <code class="literal">statement_truncate_len</code>, <code class="literal">@sys.statement_truncate_len</code>
              </p><p>
                <code class="literal">format_statement()</code> 関数によって戻されるステートメントの最大長。 長いステートメントはこの長さに切り捨てられます。 デフォルトは 64 です。 
              </p></li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-diagnostics-example"></a>例</h5></div></div></div><p>
            30 秒ごとに反復を開始し、現在のパフォーマンススキーマ設定を使用して最大 120 秒間実行する診断レポートを作成します:
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>CALL sys.diagnostics(120, 30, 'current');</code></strong>
</pre><p>
            <code class="literal">diagnostics()</code> プロシージャの実行時にファイル内の出力を取得するには、<span class="command"><strong>mysql</strong></span> クライアントの <code class="literal">tee <code class="filename">filename</code></code> および <code class="literal">notee</code> コマンドを使用します (<a class="xref" href="programs.html#mysql-commands" title="4.5.1.2 mysql クライアントコマンド">セクション4.5.1.2「mysql クライアントコマンド」</a> を参照):
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>tee diag.out;</code></strong>
mysql&gt; <strong class="userinput"><code>CALL sys.diagnostics(120, 30, 'current');</code></strong>
mysql&gt; <strong class="userinput"><code>notee;</code></strong>
</pre></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-execute-prepared-stmt"></a>28.4.4.3 execute_prepared_stmt() プロシージャ</h4></div></div></div><a class="indexterm" name="idm45563182286800"></a><a class="indexterm" name="idm45563182284544"></a><p>
          SQL ステートメントを文字列として指定すると、準備されたステートメントとして実行されます。 プリペアドステートメントは実行後に割当て解除されるため、再利用されません。 したがって、このプロシージャは主に動的ステートメントを一度に実行する場合に役立ちます。 
        </p><p>
          このプロシージャは、準備されたステートメントの名前として <code class="literal">sys_execute_prepared_stmt</code> を使用します。 プロシージャのコール時にそのステートメントの名前が存在する場合は、以前の内容が破棄されます。 
        </p><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-execute-prepared-stmt-parameters"></a>パラメータ</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                <code class="literal">in_query LONGTEXT CHARACTER SET utf8</code>: 実行するステートメントの文字列。
              </p></li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-execute-prepared-stmt-configuration-options"></a>構成オプション</h5></div></div></div><p>
            <code class="literal">execute_prepared_stmt()</code> 操作は、次の構成オプションまたは対応するユーザー定義変数を使用して変更できます (<a class="xref" href="sys-schema.html#sys-sys-config" title="28.4.2.1 sys_config テーブル">セクション28.4.2.1「sys_config テーブル」</a> を参照):
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                <code class="literal">debug</code>, <code class="literal">@sys.debug</code>
              </p><p>
                このオプションが <code class="literal">ON</code> の場合は、デバッグ出力を生成します。 デフォルトは <code class="literal">OFF</code> です。 
              </p></li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-execute-prepared-stmt-example"></a>例</h5></div></div></div><pre class="programlisting">mysql&gt; <strong class="userinput"><code>CALL sys.execute_prepared_stmt('SELECT COUNT(*) FROM mysql.user');</code></strong>
+----------+
| COUNT(*) |
+----------+
|       15 |
+----------+
</pre></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-ps-setup-disable-background-threads"></a>28.4.4.4 ps_setup_disable_background_threads() プロシージャ</h4></div></div></div><a class="indexterm" name="idm45563182264080"></a><a class="indexterm" name="idm45563182261776"></a><p>
          すべてのバックグラウンドスレッドのパフォーマンススキーマインストゥルメンテーションを無効にします。 無効化されたバックグラウンドスレッドの数を示す結果セットを生成します。 すでに無効になっているスレッドはカウントされません。 
        </p><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-ps-setup-disable-background-threads-parameters"></a>パラメータ</h5></div></div></div><p>
            なし
          </p></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-ps-setup-disable-background-threads-example"></a>例</h5></div></div></div><pre class="programlisting">mysql&gt; <strong class="userinput"><code>CALL sys.ps_setup_disable_background_threads();</code></strong>
+--------------------------------+
| summary                        |
+--------------------------------+
| Disabled 24 background threads |
+--------------------------------+
</pre></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-ps-setup-disable-consumer"></a>28.4.4.5 ps_setup_disable_consumer() プロシージャ</h4></div></div></div><a class="indexterm" name="idm45563182252352"></a><a class="indexterm" name="idm45563182250080"></a><p>
          引数を含む名前を持つパフォーマンススキーマコンシューマを無効にします。 無効化されたコンシューマの数を示す結果セットを生成します。 すでに無効になっているコンシューマはカウントされません。 
        </p><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-ps-setup-disable-consumer-parameters"></a>パラメータ</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                <code class="literal">consumer VARCHAR(128)</code>: コンシューマ名の照合に使用される値。<code class="literal">LIKE</code> パターン一致のオペランドとして <code class="literal">%consumer%</code> を使用して識別されます。
              </p><p>
                <code class="literal">''</code>の値は、すべてのコンシューマに一致します。
              </p></li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-ps-setup-disable-consumer-example"></a>例</h5></div></div></div><p>
            すべてのステートメントコンシューマを無効にします:
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>CALL sys.ps_setup_disable_consumer('statement');</code></strong>
+----------------------+
| summary              |
+----------------------+
| Disabled 4 consumers |
+----------------------+
</pre></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-ps-setup-disable-instrument"></a>28.4.4.6 ps_setup_disable_instrument() プロシージャ</h4></div></div></div><a class="indexterm" name="idm45563182235712"></a><a class="indexterm" name="idm45563182233440"></a><p>
          引数を含む名前を持つパフォーマンススキーマインストゥルメントを無効にします。 無効化されたインストゥルメントの数を示す結果セットを生成します。 すでに無効になっているインストゥルメントはカウントされません。 
        </p><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-ps-setup-disable-instrument-parameters"></a>パラメータ</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                <code class="literal">in_pattern VARCHAR(128)</code>: インストゥルメント名の照合に使用される値。<code class="literal">LIKE</code> パターン一致のオペランドとして <code class="literal">%in_pattern%</code> を使用して識別されます。
              </p><p>
                <code class="literal">''</code>の値は、すべてのインストゥルメントに一致します。
              </p></li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-ps-setup-disable-instrument-example"></a>例</h5></div></div></div><p>
            特定のインストゥルメントを無効にします。
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>CALL sys.ps_setup_disable_instrument('wait/lock/metadata/sql/mdl');</code></strong>
+-----------------------+
| summary               |
+-----------------------+
| Disabled 1 instrument |
+-----------------------+
</pre><p>
            すべての mutex インストゥルメントを無効にします:
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>CALL sys.ps_setup_disable_instrument('mutex');</code></strong>
+--------------------------+
| summary                  |
+--------------------------+
| Disabled 177 instruments |
+--------------------------+
</pre></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-ps-setup-disable-thread"></a>28.4.4.7 ps_setup_disable_thread() プロシージャ</h4></div></div></div><a class="indexterm" name="idm45563182216688"></a><a class="indexterm" name="idm45563182214416"></a><p>
          接続 ID を指定すると、スレッドのパフォーマンススキーマインストゥルメンテーションが無効になります。 無効化されたスレッドの数を示す結果セットを生成します。 すでに無効になっているスレッドはカウントされません。 
        </p><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-ps-setup-disable-thread-parameters"></a>パラメータ</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                <code class="literal">in_connection_id BIGINT</code>: 接続 ID。 これは、パフォーマンススキーマ <code class="literal">threads</code> テーブルの <code class="literal">PROCESSLIST_ID</code> カラムまたは <code class="literal">SHOW PROCESSLIST</code> 出力の <code class="literal">Id</code> カラムで指定されたタイプの値です。 
              </p></li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-ps-setup-disable-thread-example"></a>例</h5></div></div></div><p>
            接続 ID で特定の接続を無効にします:
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>CALL sys.ps_setup_disable_thread(225);</code></strong>
+-------------------+
| summary           |
+-------------------+
| Disabled 1 thread |
+-------------------+
</pre><p>
            現在の接続を無効にします:
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>CALL sys.ps_setup_disable_thread(CONNECTION_ID());</code></strong>
+-------------------+
| summary           |
+-------------------+
| Disabled 1 thread |
+-------------------+
</pre></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-ps-setup-enable-background-threads"></a>28.4.4.8 ps_setup_enable_background_threads() プロシージャ</h4></div></div></div><a class="indexterm" name="idm45563182197312"></a><a class="indexterm" name="idm45563182195024"></a><p>
          すべてのバックグラウンドスレッドのパフォーマンススキーマインストゥルメンテーションを有効にします。 有効化されたバックグラウンドスレッドの数を示す結果セットを生成します。 すでに有効になっているスレッドはカウントされません。 
        </p><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-ps-setup-enable-background-threads-parameters"></a>パラメータ</h5></div></div></div><p>
            なし
          </p></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-ps-setup-enable-background-threads-example"></a>例</h5></div></div></div><pre class="programlisting">mysql&gt; <strong class="userinput"><code>CALL sys.ps_setup_enable_background_threads();</code></strong>
+-------------------------------+
| summary                       |
+-------------------------------+
| Enabled 24 background threads |
+-------------------------------+
</pre></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-ps-setup-enable-consumer"></a>28.4.4.9 ps_setup_enable_consumer() プロシージャ</h4></div></div></div><a class="indexterm" name="idm45563182185616"></a><a class="indexterm" name="idm45563182183344"></a><p>
          引数を含む名前を持つパフォーマンススキーマコンシューマを有効にします。 有効化されたコンシューマの数を示す結果セットを生成します。 すでに有効になっているコンシューマはカウントされません。 
        </p><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-ps-setup-enable-consumer-parameters"></a>パラメータ</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                <code class="literal">consumer VARCHAR(128)</code>: コンシューマ名の照合に使用される値。<code class="literal">LIKE</code> パターン一致のオペランドとして <code class="literal">%consumer%</code> を使用して識別されます。
              </p><p>
                <code class="literal">''</code>の値は、すべてのコンシューマに一致します。
              </p></li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-ps-setup-enable-consumer-example"></a>例</h5></div></div></div><p>
            すべてのステートメントコンシューマを有効にします:
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>CALL sys.ps_setup_enable_consumer('statement');</code></strong>
+---------------------+
| summary             |
+---------------------+
| Enabled 4 consumers |
+---------------------+
</pre></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-ps-setup-enable-instrument"></a>28.4.4.10 ps_setup_enable_instrument() プロシージャ</h4></div></div></div><a class="indexterm" name="idm45563182169008"></a><a class="indexterm" name="idm45563182166736"></a><p>
          引数を含む名前を持つパフォーマンススキーマインストゥルメントを有効にします。 有効化されたインストゥルメントの数を示す結果セットを生成します。 すでに有効になっているインストゥルメントはカウントされません。 
        </p><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-ps-setup-enable-instrument-parameters"></a>パラメータ</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                <code class="literal">in_pattern VARCHAR(128)</code>: インストゥルメント名の照合に使用される値。<code class="literal">LIKE</code> パターン一致のオペランドとして <code class="literal">%in_pattern%</code> を使用して識別されます。
              </p><p>
                <code class="literal">''</code>の値は、すべてのインストゥルメントに一致します。
              </p></li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-ps-setup-enable-instrument-example"></a>例</h5></div></div></div><p>
            特定のインストゥルメントを有効にします:
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>CALL sys.ps_setup_enable_instrument('wait/lock/metadata/sql/mdl');</code></strong>
+----------------------+
| summary              |
+----------------------+
| Enabled 1 instrument |
+----------------------+
</pre><p>
            すべての mutex インストゥルメントを有効にします:
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>CALL sys.ps_setup_enable_instrument('mutex');</code></strong>
+-------------------------+
| summary                 |
+-------------------------+
| Enabled 177 instruments |
+-------------------------+
</pre></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-ps-setup-enable-thread"></a>28.4.4.11 ps_setup_enable_thread() プロシージャ</h4></div></div></div><a class="indexterm" name="idm45563182150016"></a><a class="indexterm" name="idm45563182147760"></a><p>
          接続 ID を指定すると、スレッドのパフォーマンススキーマインストゥルメンテーションが有効になります。 有効化されたスレッドの数を示す結果セットを生成します。 すでに有効になっているスレッドはカウントされません。 
        </p><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-ps-setup-enable-thread-parameters"></a>パラメータ</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                <code class="literal">in_connection_id BIGINT</code>: 接続 ID。 これは、パフォーマンススキーマ <code class="literal">threads</code> テーブルの <code class="literal">PROCESSLIST_ID</code> カラムまたは <code class="literal">SHOW PROCESSLIST</code> 出力の <code class="literal">Id</code> カラムで指定されたタイプの値です。 
              </p></li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-ps-setup-enable-thread-example"></a>例</h5></div></div></div><p>
            接続 ID で特定の接続を有効にします:
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>CALL sys.ps_setup_enable_thread(225);</code></strong>
+------------------+
| summary          |
+------------------+
| Enabled 1 thread |
+------------------+
</pre><p>
            現在の接続を有効にします:
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>CALL sys.ps_setup_enable_thread(CONNECTION_ID());</code></strong>
+------------------+
| summary          |
+------------------+
| Enabled 1 thread |
+------------------+
</pre></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-ps-setup-reload-saved"></a>28.4.4.12 ps_setup_reload_saved() プロシージャ</h4></div></div></div><a class="indexterm" name="idm45563182130768"></a><a class="indexterm" name="idm45563182128512"></a><p>
          <code class="literal">ps_setup_save()</code> を使用して、同じセッション内で以前に保存したパフォーマンススキーマ構成をリロードします。 詳細は、<code class="literal">ps_setup_save()</code> の説明を参照してください。 
        </p><p>
          このプロシージャは、<code class="literal">sql_log_bin</code> システム変数のセッション値を操作して、実行中にバイナリロギングを無効にします。 これは制限付き操作であるため、このプロシージャには制限付きセッション変数を設定するのに十分な権限が必要です。 <a class="xref" href="server-administration.html#system-variable-privileges" title="5.1.9.1 システム変数権限">セクション5.1.9.1「システム変数権限」</a>を参照してください。 
        </p><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-ps-setup-reload-saved-parameters"></a>パラメータ</h5></div></div></div><p>
            なし
          </p></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-ps-setup-reset-to-default"></a>28.4.4.13 ps_setup_reset_to_default() プロシージャ</h4></div></div></div><a class="indexterm" name="idm45563182117968"></a><a class="indexterm" name="idm45563182115696"></a><p>
          パフォーマンススキーマ構成をデフォルト設定にリセットします。
        </p><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-ps-setup-reset-to-default-parameters"></a>パラメータ</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                <code class="literal">in_verbose BOOLEAN</code>: プロシージャの実行中に各設定ステージに関する情報を表示するかどうか。 これには、実行された SQL ステートメントが含まれます。 
              </p></li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-ps-setup-reset-to-default-example"></a>例</h5></div></div></div><pre class="programlisting">mysql&gt; <strong class="userinput"><code>CALL sys.ps_setup_reset_to_default(TRUE)\G</code></strong>
*************************** 1. row ***************************
status: Resetting: setup_actors
DELETE
FROM performance_schema.setup_actors
WHERE NOT (HOST = '%' AND USER = '%' AND ROLE = '%')

*************************** 1. row ***************************
status: Resetting: setup_actors
INSERT IGNORE INTO performance_schema.setup_actors
VALUES ('%', '%', '%')

...
</pre></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-ps-setup-save"></a>28.4.4.14 ps_setup_save() プロシージャ</h4></div></div></div><a class="indexterm" name="idm45563182104896"></a><a class="indexterm" name="idm45563182102704"></a><p>
          現在のパフォーマンススキーマ構成を保存します。 これにより、デバッグまたはその他の目的で構成を一時的に変更し、<code class="literal">ps_setup_reload_saved()</code> プロシージャを起動して以前の状態にリストアできます。 
        </p><p>
          構成を保存するための他の同時コールを防止するために、<code class="literal">ps_setup_save()</code> では、<code class="literal">GET_LOCK()</code> 関数をコールして <code class="literal">sys.ps_setup_save</code> という名前のアドバイザロックを取得します。<code class="literal">ps_setup_save()</code> はタイムアウトパラメータを使用して、ロックがすでに存在する場合に待機する秒数を示します (他のセッションに未処理の構成が保存されていることを示します)。 ロックを取得せずにタイムアウトが期限切れになると、<code class="literal">ps_setup_save()</code> は失敗します。 
        </p><p>
          構成は <code class="literal">TEMPORARY</code> テーブルに保存されるため、後で <span class="emphasis"><em>same</em></span> セッション内で <code class="literal">ps_setup_save()</code> として <code class="literal">ps_setup_reload_saved()</code> をコールすることを目的としています。<code class="literal">ps_setup_save()</code> によって一時テーブルが削除され、ロックが解除されます。 <code class="literal">ps_setup_save()</code> を起動せずにセッションを終了すると、テーブルおよびロックが自動的に消えます。 
        </p><p>
          このプロシージャは、<code class="literal">sql_log_bin</code> システム変数のセッション値を操作して、実行中にバイナリロギングを無効にします。 これは制限付き操作であるため、このプロシージャには制限付きセッション変数を設定するのに十分な権限が必要です。 <a class="xref" href="server-administration.html#system-variable-privileges" title="5.1.9.1 システム変数権限">セクション5.1.9.1「システム変数権限」</a>を参照してください。 
        </p><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-ps-setup-save-parameters"></a>パラメータ</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                <code class="literal">in_timeout INT</code>: <code class="literal">sys.ps_setup_save</code> ロックの取得を待機する秒数。 負の timeout 値は、無限のタイムアウトを表します。 
              </p></li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-ps-setup-save-example"></a>例</h5></div></div></div><pre class="programlisting">mysql&gt; <strong class="userinput"><code>CALL sys.ps_setup_save(10);</code></strong>

... <em class="replaceable"><code>make Performance Schema configuration changes</code></em> ...

mysql&gt; <strong class="userinput"><code>CALL sys.ps_setup_reload_saved();</code></strong>
</pre></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-ps-setup-show-disabled"></a>28.4.4.15 ps_setup_show_disabled() プロシージャ</h4></div></div></div><a class="indexterm" name="idm45563182074576"></a><a class="indexterm" name="idm45563182072320"></a><p>
          現在無効になっているすべてのパフォーマンススキーマ構成を表示します。
        </p><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-ps-setup-show-disabled-parameters"></a>パラメータ</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                <code class="literal">in_show_instruments BOOLEAN</code>: 無効なインストゥルメントを表示するかどうか。 これは長いリストである場合があります。 
              </p></li><li class="listitem"><p>
                <code class="literal">in_show_threads BOOLEAN</code>: 無効なスレッドを表示するかどうか。
              </p></li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-ps-setup-show-disabled-example"></a>例</h5></div></div></div><pre class="programlisting">mysql&gt; CALL sys.ps_setup_show_disabled(TRUE, TRUE);
+----------------------------+
| performance_schema_enabled |
+----------------------------+
|                          1 |
+----------------------------+

+---------------+
| enabled_users |
+---------------+
| '%'@'%'       |
+---------------+

+-------------+----------------------+---------+-------+
| object_type | objects              | enabled | timed |
+-------------+----------------------+---------+-------+
| EVENT       | mysql.%              | NO      | NO    |
| EVENT       | performance_schema.% | NO      | NO    |
| EVENT       | information_schema.% | NO      | NO    |
| FUNCTION    | mysql.%              | NO      | NO    |
| FUNCTION    | performance_schema.% | NO      | NO    |
| FUNCTION    | information_schema.% | NO      | NO    |
| PROCEDURE   | mysql.%              | NO      | NO    |
| PROCEDURE   | performance_schema.% | NO      | NO    |
| PROCEDURE   | information_schema.% | NO      | NO    |
| TABLE       | mysql.%              | NO      | NO    |
| TABLE       | performance_schema.% | NO      | NO    |
| TABLE       | information_schema.% | NO      | NO    |
| TRIGGER     | mysql.%              | NO      | NO    |
| TRIGGER     | performance_schema.% | NO      | NO    |
| TRIGGER     | information_schema.% | NO      | NO    |
+-------------+----------------------+---------+-------+

...
</pre></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-ps-setup-show-disabled-consumers"></a>28.4.4.16 ps_setup_show_disabled_consumers() プロシージャ</h4></div></div></div><a class="indexterm" name="idm45563182058272"></a><a class="indexterm" name="idm45563182055984"></a><p>
          現在無効になっているすべてのパフォーマンススキーマコンシューマを表示します。
        </p><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-ps-setup-show-disabled-consumers-parameters"></a>パラメータ</h5></div></div></div><p>
            なし
          </p></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-ps-setup-show-disabled-consumers-example"></a>例</h5></div></div></div><pre class="programlisting">mysql&gt; <strong class="userinput"><code>CALL sys.ps_setup_show_disabled_consumers();</code></strong>
+----------------------------------+
| disabled_consumers               |
+----------------------------------+
| events_stages_current            |
| events_stages_history            |
| events_stages_history_long       |
| events_statements_history        |
| events_statements_history_long   |
| events_transactions_history      |
| events_transactions_history_long |
| events_waits_current             |
| events_waits_history             |
| events_waits_history_long        |
+----------------------------------+
</pre></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-ps-setup-show-disabled-instruments"></a>28.4.4.17 ps_setup_show_disabled_instruments() プロシージャ</h4></div></div></div><a class="indexterm" name="idm45563182046048"></a><a class="indexterm" name="idm45563182043760"></a><p>
          現在無効になっているすべてのパフォーマンススキーマインストゥルメントを表示します。 これは長いリストである場合があります。 
        </p><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-ps-setup-show-disabled-instruments-parameters"></a>パラメータ</h5></div></div></div><p>
            なし
          </p></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-ps-setup-show-disabled-instruments-example"></a>例</h5></div></div></div><pre class="programlisting">mysql&gt; <strong class="userinput"><code>CALL sys.ps_setup_show_disabled_instruments()\G</code></strong>
*************************** 1. row ***************************
disabled_instruments: wait/synch/mutex/sql/TC_LOG_MMAP::LOCK_tc
               timed: NO
*************************** 2. row ***************************
disabled_instruments: wait/synch/mutex/sql/THD::LOCK_query_plan
               timed: NO
*************************** 3. row ***************************
disabled_instruments: wait/synch/mutex/sql/MYSQL_BIN_LOG::LOCK_commit
               timed: NO
...
</pre></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-ps-setup-show-enabled"></a>28.4.4.18 ps_setup_show_enabled() プロシージャ</h4></div></div></div><a class="indexterm" name="idm45563182034304"></a><a class="indexterm" name="idm45563182032048"></a><p>
          現在有効になっているすべてのパフォーマンススキーマ構成を表示します。
        </p><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-ps-setup-show-enabled-parameters"></a>パラメータ</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                <code class="literal">in_show_instruments BOOLEAN</code>: 有効なインストゥルメントを表示するかどうか。 これは長いリストである場合があります。 
              </p></li><li class="listitem"><p>
                <code class="literal">in_show_threads BOOLEAN</code>: 有効なスレッドを表示するかどうか。
              </p></li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-ps-setup-show-enabled-example"></a>例</h5></div></div></div><pre class="programlisting">mysql&gt; <strong class="userinput"><code>CALL sys.ps_setup_show_enabled(FALSE, FALSE);</code></strong>
+----------------------------+
| performance_schema_enabled |
+----------------------------+
|                          1 |
+----------------------------+
1 row in set (0.01 sec)

+---------------+
| enabled_users |
+---------------+
| '%'@'%'       |
+---------------+
1 row in set (0.01 sec)

+-------------+---------+---------+-------+
| object_type | objects | enabled | timed |
+-------------+---------+---------+-------+
| EVENT       | %.%     | YES     | YES   |
| FUNCTION    | %.%     | YES     | YES   |
| PROCEDURE   | %.%     | YES     | YES   |
| TABLE       | %.%     | YES     | YES   |
| TRIGGER     | %.%     | YES     | YES   |
+-------------+---------+---------+-------+
5 rows in set (0.02 sec)

+-----------------------------+
| enabled_consumers           |
+-----------------------------+
| events_statements_current   |
| events_statements_history   |
| events_transactions_current |
| events_transactions_history |
| global_instrumentation      |
| statements_digest           |
| thread_instrumentation      |
+-----------------------------+
</pre></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-ps-setup-show-enabled-consumers"></a>28.4.4.19 ps_setup_show_enabled_consumers() プロシージャ</h4></div></div></div><a class="indexterm" name="idm45563182017824"></a><a class="indexterm" name="idm45563182015536"></a><p>
          現在有効になっているすべてのパフォーマンススキーマコンシューマを表示します。
        </p><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-ps-setup-show-enabled-consumers-parameters"></a>パラメータ</h5></div></div></div><p>
            なし
          </p></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-ps-setup-show-enabled-consumers-example"></a>例</h5></div></div></div><pre class="programlisting">mysql&gt; <strong class="userinput"><code>CALL sys.ps_setup_show_enabled_consumers();</code></strong>
+-----------------------------+
| enabled_consumers           |
+-----------------------------+
| events_statements_current   |
| events_statements_history   |
| events_transactions_current |
| events_transactions_history |
| global_instrumentation      |
| statements_digest           |
| thread_instrumentation      |
+-----------------------------+
</pre></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-ps-setup-show-enabled-instruments"></a>28.4.4.20 ps_setup_show_enabled_instruments() プロシージャ</h4></div></div></div><a class="indexterm" name="idm45563182006416"></a><a class="indexterm" name="idm45563182004128"></a><p>
          現在有効になっているパフォーマンススキーマインストゥルメントをすべて表示します。 これは長いリストである場合があります。 
        </p><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-ps-setup-show-enabled-instruments-parameters"></a>パラメータ</h5></div></div></div><p>
            なし
          </p></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-ps-setup-show-enabled-instruments-example"></a>例</h5></div></div></div><pre class="programlisting">mysql&gt; <strong class="userinput"><code>CALL sys.ps_setup_show_enabled_instruments()\G</code></strong>
*************************** 1. row ***************************
enabled_instruments: wait/io/file/sql/map
              timed: YES
*************************** 2. row ***************************
enabled_instruments: wait/io/file/sql/binlog
              timed: YES
*************************** 3. row ***************************
enabled_instruments: wait/io/file/sql/binlog_cache
              timed: YES
...
</pre></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-ps-statement-avg-latency-histogram"></a>28.4.4.21 ps_statement_avg_latency_histogram() プロシージャ</h4></div></div></div><a class="indexterm" name="idm45563181994352"></a><a class="indexterm" name="idm45563181992064"></a><p>
          パフォーマンススキーマ <code class="literal">events_statements_summary_by_digest</code> テーブル内で追跡されたすべての正規化ステートメントの平均待機時間値のテキストヒストグラムグラフを表示します。
        </p><p>
          このプロシージャを使用すると、この MySQL インスタンス内で実行されているステートメントのレイテンシ分散の概要を表示できます。
        </p><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-ps-statement-avg-latency-histogram-parameters"></a>パラメータ</h5></div></div></div><p>
            なし
          </p></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-ps-statement-avg-latency-histogram-example"></a>例</h5></div></div></div><p>
            ステートメント単位でのヒストグラム出力。 たとえば、ヒストグラム凡例の <code class="literal">* = 2 units</code> は、各 <code class="literal">*</code> 文字が 2 つのステートメントを表すことを意味します。 
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>CALL sys.ps_statement_avg_latency_histogram()\G</code></strong>
*************************** 1. row ***************************
Performance Schema Statement Digest Average Latency Histogram:

  . = 1 unit
  * = 2 units
  # = 3 units

(0 - 66ms)     88  | #############################
(66 - 133ms)   14  | ..............
(133 - 199ms)  4   | ....
(199 - 265ms)  5   | **
(265 - 332ms)  1   | .
(332 - 398ms)  0   |
(398 - 464ms)  1   | .
(464 - 531ms)  0   |
(531 - 597ms)  0   |
(597 - 663ms)  0   |
(663 - 730ms)  0   |
(730 - 796ms)  0   |
(796 - 863ms)  0   |
(863 - 929ms)  0   |
(929 - 995ms)  0   |
(995 - 1062ms) 0   |

  Total Statements: 114; Buckets: 16; Bucket Size: 66 ms;
</pre></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-ps-trace-statement-digest"></a>28.4.4.22 ps_trace_statement_digest() プロシージャ</h4></div></div></div><a class="indexterm" name="idm45563181979056"></a><a class="indexterm" name="idm45563181976784"></a><p>
          特定のステートメントダイジェストのすべてのパフォーマンススキーマインストゥルメンテーションをトレースします。
        </p><p>
          パフォーマンススキーマ <code class="literal">events_statements_summary_by_digest</code> テーブル内で目的のステートメントが見つかった場合は、その <code class="literal">DIGEST</code> カラムの MD5 値をこのプロシージャに指定し、ポーリング期間と間隔を指定します。 結果は、そのダイジェストについてパフォーマンススキーマ内で追跡されたすべての統計のレポートです。 
        </p><p>
          また、この手順では、間隔中にダイジェストの最長実行例に対して <code class="literal">EXPLAIN</code> の実行も試行されます。 パフォーマンススキーマが長い <code class="literal">SQL_TEXT</code> 値を切り捨てるため、この試行は失敗する可能性があります。 その結果、解析エラーのため、<code class="literal">EXPLAIN</code> は失敗します。 
        </p><p>
          このプロシージャは、<code class="literal">sql_log_bin</code> システム変数のセッション値を操作して、実行中にバイナリロギングを無効にします。 これは制限付き操作であるため、このプロシージャには制限付きセッション変数を設定するのに十分な権限が必要です。 <a class="xref" href="server-administration.html#system-variable-privileges" title="5.1.9.1 システム変数権限">セクション5.1.9.1「システム変数権限」</a>を参照してください。 
        </p><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-ps-trace-statement-digest-parameters"></a>パラメータ</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                <code class="literal">in_digest VARCHAR(32)</code>: 分析するステートメントダイジェスト識別子。
              </p></li><li class="listitem"><p>
                <code class="literal">in_runtime INT</code>: 分析を実行する時間 (秒)。
              </p></li><li class="listitem"><p>
                <code class="literal">in_interval DECIMAL(2,2)</code>: スナップショットを取得しようとする秒単位の分析間隔 (小数も可)。
              </p></li><li class="listitem"><p>
                <code class="literal">in_start_fresh BOOLEAN</code>: 起動前にパフォーマンススキーマ <code class="literal">events_statements_history_long</code> および <code class="literal">events_stages_history_long</code> テーブルを切り捨てるかどうか。
              </p></li><li class="listitem"><p>
                <code class="literal">in_auto_enable BOOLEAN</code>: 必要なコンシューマを自動的に有効にするかどうか。
              </p></li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-ps-trace-statement-digest-example"></a>例</h5></div></div></div><pre class="programlisting">mysql&gt; <strong class="userinput"><code>CALL sys.ps_trace_statement_digest('891ec6860f98ba46d89dd20b0c03652c', 10, 0.1, TRUE, TRUE);</code></strong>
+--------------------+
| SUMMARY STATISTICS |
+--------------------+
| SUMMARY STATISTICS |
+--------------------+
1 row in set (9.11 sec)

+------------+-----------+-----------+-----------+---------------+------------+------------+
| executions | exec_time | lock_time | rows_sent | rows_examined | tmp_tables | full_scans |
+------------+-----------+-----------+-----------+---------------+------------+------------+
|         21 | 4.11 ms   | 2.00 ms   |         0 |            21 |          0 |          0 |
+------------+-----------+-----------+-----------+---------------+------------+------------+
1 row in set (9.11 sec)

+------------------------------------------+-------+-----------+
| event_name                               | count | latency   |
+------------------------------------------+-------+-----------+
| stage/sql/statistics                     |    16 | 546.92 us |
| stage/sql/freeing items                  |    18 | 520.11 us |
| stage/sql/init                           |    51 | 466.80 us |
...
| stage/sql/cleaning up                    |    18 | 11.92 us  |
| stage/sql/executing                      |    16 | 6.95 us   |
+------------------------------------------+-------+-----------+
17 rows in set (9.12 sec)

+---------------------------+
| LONGEST RUNNING STATEMENT |
+---------------------------+
| LONGEST RUNNING STATEMENT |
+---------------------------+
1 row in set (9.16 sec)

+-----------+-----------+-----------+-----------+---------------+------------+-----------+
| thread_id | exec_time | lock_time | rows_sent | rows_examined | tmp_tables | full_scan |
+-----------+-----------+-----------+-----------+---------------+------------+-----------+
|    166646 | 618.43 us | 1.00 ms   |         0 |             1 |          0 |         0 |
+-----------+-----------+-----------+-----------+---------------+------------+-----------+
1 row in set (9.16 sec)

# Truncated for clarity...
+-----------------------------------------------------------------+
| sql_text                                                        |
+-----------------------------------------------------------------+
| select hibeventhe0_.id as id1382_, hibeventhe0_.createdTime ... |
+-----------------------------------------------------------------+
1 row in set (9.17 sec)

+------------------------------------------+-----------+
| event_name                               | latency   |
+------------------------------------------+-----------+
| stage/sql/init                           | 8.61 us   |
| stage/sql/init                           | 331.07 ns |
...
| stage/sql/freeing items                  | 30.46 us  |
| stage/sql/cleaning up                    | 662.13 ns |
+------------------------------------------+-----------+
18 rows in set (9.23 sec)

+----+-------------+--------------+-------+---------------+-----------+---------+-------------+------+-------+
| id | select_type | table        | type  | possible_keys | key       | key_len | ref         | rows | Extra |
+----+-------------+--------------+-------+---------------+-----------+---------+-------------+------+-------+
|  1 | SIMPLE      | hibeventhe0_ | const | fixedTime     | fixedTime | 775     | const,const |    1 | NULL  |
+----+-------------+--------------+-------+---------------+-----------+---------+-------------+------+-------+
1 row in set (9.27 sec)

Query OK, 0 rows affected (9.28 sec)
</pre></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-ps-trace-thread"></a>28.4.4.23 ps_trace_thread() プロシージャ</h4></div></div></div><a class="indexterm" name="idm45563181941744"></a><a class="indexterm" name="idm45563181939536"></a><p>
          インストゥルメントされたスレッドのすべてのパフォーマンススキーマデータを <code class="filename">.dot</code> 形式のグラフファイルにダンプします (DOT グラフ記述言語の場合)。 プロシージャから返される各結果セットは、完全なグラフに使用する必要があります。 
        </p><p>
          このプロシージャは、<code class="literal">sql_log_bin</code> システム変数のセッション値を操作して、実行中にバイナリロギングを無効にします。 これは制限付き操作であるため、このプロシージャには制限付きセッション変数を設定するのに十分な権限が必要です。 <a class="xref" href="server-administration.html#system-variable-privileges" title="5.1.9.1 システム変数権限">セクション5.1.9.1「システム変数権限」</a>を参照してください。 
        </p><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-ps-trace-thread-parameters"></a>パラメータ</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                <code class="literal">in_thread_id INT</code>: トレースするスレッド。
              </p></li><li class="listitem"><p>
                <code class="literal">in_outfile VARCHAR(255)</code>: <code class="filename">.dot</code> 出力ファイルに使用する名前。
              </p></li><li class="listitem"><p>
                <code class="literal">in_max_runtime DECIMAL(20,2)</code>: データを収集する最大秒数 (小数も可)。 <code class="literal">NULL</code> を使用して、デフォルトの 60 秒のデータを収集します。 
              </p></li><li class="listitem"><p>
                <code class="literal">in_interval DECIMAL(20,2)</code>: データ収集間でスリープする秒数 (小数も可)。 <code class="literal">NULL</code> を使用して、デフォルトの 1 秒間スリープします。 
              </p></li><li class="listitem"><p>
                <code class="literal">in_start_fresh BOOLEAN</code>: トレースの前にすべてのパフォーマンススキーマデータをリセットするかどうか。
              </p></li><li class="listitem"><p>
                <code class="literal">in_auto_setup BOOLEAN</code>: 他のすべてのスレッドを無効にし、すべてのインストゥルメントおよびコンシューマを有効にするかどうか。 これにより、実行終了時の設定もリセットされます。 
              </p></li><li class="listitem"><p>
                <code class="literal">in_debug BOOLEAN</code> : グラフに <code class="literal">file:lineno</code> 情報を含めるかどうか。
              </p></li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-ps-trace-thread-example"></a>例</h5></div></div></div><pre class="programlisting">mysql&gt; <strong class="userinput"><code>CALL sys.ps_trace_thread(25, CONCAT('/tmp/stack-', REPLACE(NOW(), ' ', '-'), '.dot'), NULL, NULL, TRUE, TRUE, TRUE);</code></strong>
+-------------------+
| summary           |
+-------------------+
| Disabled 1 thread |
+-------------------+
1 row in set (0.00 sec)

+---------------------------------------------+
| Info                                        |
+---------------------------------------------+
| Data collection starting for THREAD_ID = 25 |
+---------------------------------------------+
1 row in set (0.03 sec)

+-----------------------------------------------------------+
| Info                                                      |
+-----------------------------------------------------------+
| Stack trace written to /tmp/stack-2014-02-16-21:18:41.dot |
+-----------------------------------------------------------+
1 row in set (60.07 sec)

+-------------------------------------------------------------------+
| Convert to PDF                                                    |
+-------------------------------------------------------------------+
| dot -Tpdf -o /tmp/stack_25.pdf /tmp/stack-2014-02-16-21:18:41.dot |
+-------------------------------------------------------------------+
1 row in set (60.07 sec)

+-------------------------------------------------------------------+
| Convert to PNG                                                    |
+-------------------------------------------------------------------+
| dot -Tpng -o /tmp/stack_25.png /tmp/stack-2014-02-16-21:18:41.dot |
+-------------------------------------------------------------------+
1 row in set (60.07 sec)

+------------------+
| summary          |
+------------------+
| Enabled 1 thread |
+------------------+
1 row in set (60.32 sec)
</pre></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-ps-truncate-all-tables"></a>28.4.4.24 ps_truncate_all_tables() プロシージャ</h4></div></div></div><a class="indexterm" name="idm45563181908832"></a><a class="indexterm" name="idm45563181906576"></a><p>
          すべてのパフォーマンススキーマサマリーテーブルを切り捨てて、すべての集約インストゥルメンテーションをスナップショットとしてリセットします。 切り捨てられたテーブルの数を示す結果セットを生成します。 
        </p><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-ps-truncate-all-tables-parameters"></a>パラメータ</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                <code class="literal">in_verbose BOOLEAN</code>: 実行前に各 <code class="literal">TRUNCATE TABLE</code> ステートメントを表示するかどうか。
              </p></li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-ps-truncate-all-tables-example"></a>例</h5></div></div></div><pre class="programlisting">mysql&gt; <strong class="userinput"><code>CALL sys.ps_truncate_all_tables(FALSE);</code></strong>
+---------------------+
| summary             |
+---------------------+
| Truncated 49 tables |
+---------------------+
</pre></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-statement-performance-analyzer"></a>28.4.4.25 statement_performance_analyzer() プロシージャ</h4></div></div></div><a class="indexterm" name="idm45563181894928"></a><a class="indexterm" name="idm45563181892656"></a><p>
          サーバーで実行されているステートメントのレポートを作成します。 ビューは、全体またはデルタ (あるいはその両方) のアクティビティに基づいて計算されます。 
        </p><p>
          このプロシージャは、<code class="literal">sql_log_bin</code> システム変数のセッション値を操作して、実行中にバイナリロギングを無効にします。 これは制限付き操作であるため、このプロシージャには制限付きセッション変数を設定するのに十分な権限が必要です。 <a class="xref" href="server-administration.html#system-variable-privileges" title="5.1.9.1 システム変数権限">セクション5.1.9.1「システム変数権限」</a>を参照してください。 
        </p><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-statement-performance-analyzer-parameters"></a>パラメータ</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                <code class="literal">in_action ENUM('snapshot', 'overall', 'delta', 'create_tmp', 'create_table', 'save', 'cleanup')</code>: 実行するアクション。 次の値を使用できます: 
              </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                    <code class="literal">snapshot</code>: スナップショットを格納します。 デフォルトでは、パフォーマンススキーマ <code class="literal">events_statements_summary_by_digest</code> テーブルの現在の内容のスナップショットが作成されます。 <code class="literal">in_table</code> を設定すると、これを上書きして、指定したテーブルのコンテンツをコピーできます。 スナップショットは、<code class="literal">sys</code> スキーマの <code class="literal">tmp_digests</code> 一時テーブルに格納されます。 
                  </p></li><li class="listitem"><p>
                    <code class="literal">overall</code>: <code class="literal">in_table</code> で指定されたテーブルの内容に基づいて分析を生成します。 全体的な分析では、<code class="literal">in_table</code> を <code class="literal">NOW()</code> にして新しいスナップショットを使用できます。 これにより、既存のスナップショットが上書きされます。 既存のスナップショットを使用するには、<code class="literal">NULL</code> for <code class="literal">in_table</code> を使用します。 <code class="literal">in_table</code> が <code class="literal">NULL</code> で、スナップショットが存在しない場合は、新しいスナップショットが作成されます。 <code class="literal">in_views</code> パラメータおよび <code class="literal">statement_performance_analyzer.limit</code> 構成オプションは、このプロシージャの操作に影響します。 
                  </p></li><li class="listitem"><p>
                    <code class="literal">delta</code>: デルタ分析を生成します。 デルタは、<code class="literal">in_table</code> で指定された参照テーブルとスナップショット (存在する必要があります) の間で計算されます。 このアクションでは、<code class="literal">sys</code> スキーマの <code class="literal">tmp_digests_delta</code> 一時テーブルが使用されます。 <code class="literal">in_views</code> パラメータおよび <code class="literal">statement_performance_analyzer.limit</code> 構成オプションは、このプロシージャの操作に影響します。 
                  </p></li><li class="listitem"><p>
                    <code class="literal">create_table</code>: 後で使用するためのスナップショットの格納に適した通常のテーブルを作成します (デルタの計算など)。
                  </p></li><li class="listitem"><p>
                    <code class="literal">create_tmp</code>: 後で使用するためのスナップショットの格納に適した一時テーブルを作成します (デルタの計算など)。
                  </p></li><li class="listitem"><p>
                    <code class="literal">save</code>: <code class="literal">in_table</code> で指定されたテーブルにスナップショットを保存します。 テーブルが存在し、正しい構造である必要があります。 スナップショットが存在しない場合は、新しいスナップショットが作成されます。 
                  </p></li><li class="listitem"><p>
                    <code class="literal">cleanup</code>: スナップショットおよびデルタに使用されている一時テーブルを削除します。
                  </p></li></ul></div></li><li class="listitem"><p>
                <code class="literal">in_table VARCHAR(129)</code>: <code class="literal">in_action</code> パラメータで指定される一部のアクションに使用されるテーブルパラメータ。 バックティック (<code class="literal">`</code>) 識別子引用符文字を使用せずに、<em class="replaceable"><code>db_name.tbl_name</code></em> または <em class="replaceable"><code>tbl_name</code></em> の形式を使用します。 ピリオド (<code class="literal">.</code>) は、データベース名およびテーブル名ではサポートされていません。 
              </p><p>
                各 <code class="literal">in_action</code> 値の <code class="literal">in_table</code> 値の意味の詳細は、個々の <code class="literal">in_action</code> 値の説明を参照してください。
              </p></li><li class="listitem"><p>
                <code class="literal">in_views SET ('with_runtimes_in_95th_percentile', 'analysis', 'with_errors_or_warnings', 'with_full_table_scans', 'with_sorting', 'with_temp_tables', 'custom')</code>: 含めるビュー。 このパラメータは <code class="literal">SET</code> 値であるため、複数のビュー名をカンマで区切って含めることができます。 デフォルトでは、<code class="literal">custom</code> を除くすべてのビューが含まれます。 次の値を使用できます: 
              </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                    <code class="literal">with_runtimes_in_95th_percentile</code>: <code class="literal">statements_with_runtimes_in_95th_percentile</code> ビューを使用します。
                  </p></li><li class="listitem"><p>
                    <code class="literal">analysis</code>: <code class="literal">statement_analysis</code> ビューを使用します。
                  </p></li><li class="listitem"><p>
                    <code class="literal">with_errors_or_warnings</code>: <code class="literal">statements_with_errors_or_warnings</code> ビューを使用します。
                  </p></li><li class="listitem"><p>
                    <code class="literal">with_full_table_scans</code>: <code class="literal">statements_with_full_table_scans</code> ビューを使用します。
                  </p></li><li class="listitem"><p>
                    <code class="literal">with_sorting</code>: <code class="literal">statements_with_sorting</code> ビューを使用します。
                  </p></li><li class="listitem"><p>
                    <code class="literal">with_temp_tables</code>: <code class="literal">statements_with_temp_tables</code> ビューを使用します。
                  </p></li><li class="listitem"><p>
                    <code class="literal">custom</code>: カスタムビューを使用します。 クエリーまたは既存のビューに名前を付けるには、<code class="literal">statement_performance_analyzer.view</code> 構成オプションを使用してこのビューを指定する必要があります。 
                  </p></li></ul></div></li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-statement-performance-analyzer-configuration-options"></a>構成オプション</h5></div></div></div><p>
            <code class="literal">statement_performance_analyzer()</code> 操作は、次の構成オプションまたは対応するユーザー定義変数を使用して変更できます (<a class="xref" href="sys-schema.html#sys-sys-config" title="28.4.2.1 sys_config テーブル">セクション28.4.2.1「sys_config テーブル」</a> を参照):
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                <code class="literal">debug</code>, <code class="literal">@sys.debug</code>
              </p><p>
                このオプションが <code class="literal">ON</code> の場合は、デバッグ出力を生成します。 デフォルトは <code class="literal">OFF</code> です。 
              </p></li><li class="listitem"><p>
                <code class="literal">statement_performance_analyzer.limit</code>, <code class="literal">@sys.statement_performance_analyzer.limit</code>
              </p><p>
                組込み制限のないビューに対して返す行の最大数。 デフォルトは 100 です。 
              </p></li><li class="listitem"><p>
                <code class="literal">statement_performance_analyzer.view</code>, <code class="literal">@sys.statement_performance_analyzer.view</code>
              </p><p>
                使用するカスタムクエリーまたはビュー。 オプション値に空白が含まれている場合は、クエリーとして解釈されます。 それ以外の場合は、パフォーマンススキーマ <code class="literal">events_statements_summary_by_digest</code> テーブルをクエリーする既存のビューの名前である必要があります。 <code class="literal">statement_performance_analyzer.limit</code> 構成オプションが 0 より大きい場合、クエリーまたはビュー定義に <code class="literal">LIMIT</code> 句を含めることはできません。 ビューを指定する場合は、<code class="literal">in_table</code> パラメータと同じ形式を使用します。 デフォルトは <code class="literal">NULL</code> です (カスタムビューが定義されていません)。 
              </p></li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-statement-performance-analyzer-example"></a>例</h5></div></div></div><p>
            <code class="literal">events_statements_summary_by_digest</code> の最後の切捨て以降の 95 パーセンタイルのクエリーと 1 分間のデルタ期間を使用してレポートを作成するには:
          </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
                初期スナップショットを格納する一時テーブルを作成します。
              </p></li><li class="listitem"><p>
                初期スナップショットを作成します。
              </p></li><li class="listitem"><p>
                初期スナップショットを一時テーブルに保存します。
              </p></li><li class="listitem"><p>
                1 分間待ちます。
              </p></li><li class="listitem"><p>
                新しいスナップショットを作成します。
              </p></li><li class="listitem"><p>
                新しいスナップショットに基づいて分析を実行します。
              </p></li><li class="listitem"><p>
                初期スナップショットと新規スナップショットの差分に基づいて分析を実行します。
              </p></li></ol></div><pre class="programlisting">mysql&gt; <strong class="userinput"><code>CALL sys.statement_performance_analyzer('create_tmp', 'mydb.tmp_digests_ini', NULL);</code></strong>
Query OK, 0 rows affected (0.08 sec)

mysql&gt; <strong class="userinput"><code>CALL sys.statement_performance_analyzer('snapshot', NULL, NULL);</code></strong>
Query OK, 0 rows affected (0.02 sec)

mysql&gt; <strong class="userinput"><code>CALL sys.statement_performance_analyzer('save', 'mydb.tmp_digests_ini', NULL);</code></strong>
Query OK, 0 rows affected (0.00 sec)

mysql&gt; <strong class="userinput"><code>DO SLEEP(60);</code></strong>
Query OK, 0 rows affected (1 min 0.00 sec)

mysql&gt; <strong class="userinput"><code>CALL sys.statement_performance_analyzer('snapshot', NULL, NULL);</code></strong>
Query OK, 0 rows affected (0.02 sec)

mysql&gt; <strong class="userinput"><code>CALL sys.statement_performance_analyzer('overall', NULL, 'with_runtimes_in_95th_percentile');</code></strong>
+-----------------------------------------+
| Next Output                             |
+-----------------------------------------+
| Queries with Runtime in 95th Percentile |
+-----------------------------------------+
1 row in set (0.05 sec)

...

mysql&gt; <strong class="userinput"><code>CALL sys.statement_performance_analyzer('delta', 'mydb.tmp_digests_ini', 'with_runtimes_in_95th_percentile');</code></strong>
+-----------------------------------------+
| Next Output                             |
+-----------------------------------------+
| Queries with Runtime in 95th Percentile |
+-----------------------------------------+
1 row in set (0.03 sec)

...
</pre><p>
            95 パーセンタイルクエリーおよび全テーブルスキャンを使用した上位 10 クエリーの全体的なレポートを作成します:
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>CALL sys.statement_performance_analyzer('snapshot', NULL, NULL);</code></strong>
Query OK, 0 rows affected (0.01 sec)

mysql&gt; <strong class="userinput"><code>SET @sys.statement_performance_analyzer.limit = 10;</code></strong>
Query OK, 0 rows affected (0.00 sec)

mysql&gt; <strong class="userinput"><code>CALL sys.statement_performance_analyzer('overall', NULL, 'with_runtimes_in_95th_percentile,with_full_table_scans');</code></strong>
+-----------------------------------------+
| Next Output                             |
+-----------------------------------------+
| Queries with Runtime in 95th Percentile |
+-----------------------------------------+
1 row in set (0.01 sec)

...

+-------------------------------------+
| Next Output                         |
+-------------------------------------+
| Top 10 Queries with Full Table Scan |
+-------------------------------------+
1 row in set (0.09 sec)

...
</pre><p>
            合計実行時間でソートされた上位 10 のクエリーを示すカスタムビューを使用し、Linux の <span class="command"><strong>watch</strong></span> コマンドを使用してビューを毎分リフレッシュします:
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>CREATE OR REPLACE VIEW mydb.my_statements AS</code></strong>
       <strong class="userinput"><code>SELECT sys.format_statement(DIGEST_TEXT) AS query,</code></strong>
              <strong class="userinput"><code>SCHEMA_NAME AS db,</code></strong>
              <strong class="userinput"><code>COUNT_STAR AS exec_count,</code></strong>
              <strong class="userinput"><code>sys.format_time(SUM_TIMER_WAIT) AS total_latency,</code></strong>
              <strong class="userinput"><code>sys.format_time(AVG_TIMER_WAIT) AS avg_latency,</code></strong>
              <strong class="userinput"><code>ROUND(IFNULL(SUM_ROWS_SENT / NULLIF(COUNT_STAR, 0), 0)) AS rows_sent_avg,</code></strong>
              <strong class="userinput"><code>ROUND(IFNULL(SUM_ROWS_EXAMINED / NULLIF(COUNT_STAR, 0), 0)) AS rows_examined_avg,</code></strong>
              <strong class="userinput"><code>ROUND(IFNULL(SUM_ROWS_AFFECTED / NULLIF(COUNT_STAR, 0), 0)) AS rows_affected_avg,</code></strong>
              <strong class="userinput"><code>DIGEST AS digest</code></strong>
         <strong class="userinput"><code>FROM performance_schema.events_statements_summary_by_digest</code></strong>
       <strong class="userinput"><code>ORDER BY SUM_TIMER_WAIT DESC;</code></strong>
Query OK, 0 rows affected (0.10 sec)

mysql&gt; <strong class="userinput"><code>CALL sys.statement_performance_analyzer('create_table', 'mydb.digests_prev', NULL);</code></strong>
Query OK, 0 rows affected (0.10 sec)

shell&gt; <strong class="userinput"><code>watch -n 60 "mysql sys --table -e \"</code></strong>
&gt; <strong class="userinput"><code>SET @sys.statement_performance_analyzer.view = 'mydb.my_statements';</code></strong>
&gt; <strong class="userinput"><code>SET @sys.statement_performance_analyzer.limit = 10;</code></strong>
&gt; <strong class="userinput"><code>CALL statement_performance_analyzer('snapshot', NULL, NULL);</code></strong>
&gt; <strong class="userinput"><code>CALL statement_performance_analyzer('delta', 'mydb.digests_prev', 'custom');</code></strong>
&gt; <strong class="userinput"><code>CALL statement_performance_analyzer('save', 'mydb.digests_prev', NULL);</code></strong>
&gt; <strong class="userinput"><code>\""</code></strong>

Every 60.0s: mysql sys --table -e "        ...  Mon Dec 22 10:58:51 2014

+----------------------------------+
| Next Output                      |
+----------------------------------+
| Top 10 Queries Using Custom View |
+----------------------------------+
+-------------------+-------+------------+---------------+-------------+---------------+-------------------+-------------------+----------------------------------+
| query             | db    | exec_count | total_latency | avg_latency | rows_sent_avg | rows_examined_avg | rows_affected_avg | digest                           |
+-------------------+-------+------------+---------------+-------------+---------------+-------------------+-------------------+----------------------------------+
...
</pre></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-table-exists"></a>28.4.4.26 table_exists() プロシージャ</h4></div></div></div><a class="indexterm" name="idm45563181763744"></a><a class="indexterm" name="idm45563181761552"></a><p>
          特定のテーブルが通常のテーブル、<code class="literal">TEMPORARY</code> テーブルまたはビューとして存在するかどうかをテストします。 このプロシージャは、<code class="literal">OUT</code> パラメータでテーブルタイプを戻します。 指定された名前の一時テーブルと永続テーブルの両方が存在する場合は、<code class="literal">TEMPORARY</code> が返されます。 
        </p><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-table-exists-parameters"></a>パラメータ</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                <code class="literal">in_db VARCHAR(64)</code>: テーブルの存在をチェックするデータベースの名前。
              </p></li><li class="listitem"><p>
                <code class="literal">in_table VARCHAR(64)</code>: 存在をチェックするテーブルの名前。
              </p></li><li class="listitem"><p>
                <code class="literal">out_exists ENUM('', 'BASE TABLE', 'VIEW', 'TEMPORARY')</code>: 戻り値。 これは <code class="literal">OUT</code> パラメータであるため、テーブル型を格納できる変数である必要があります。 プロシージャが戻ると、変数にはテーブルが存在するかどうかを示す次のいずれかの値が設定されます: 
              </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                    <code class="literal">''</code>: テーブル名が実テーブル、<code class="literal">TEMPORARY</code> テーブルまたはビューとして存在しません。
                  </p></li><li class="listitem"><p>
                    <code class="literal">BASE TABLE</code>: テーブル名は実 (永続) テーブルとして存在します。
                  </p></li><li class="listitem"><p>
                    <code class="literal">VIEW</code>: テーブル名はビューとして存在します。
                  </p></li><li class="listitem"><p>
                    <code class="literal">TEMPORARY</code>: テーブル名は <code class="literal">TEMPORARY</code> テーブルとして存在します。
                  </p></li></ul></div></li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-table-exists-example"></a>例</h5></div></div></div><pre class="programlisting">mysql&gt; <strong class="userinput"><code>CREATE DATABASE db1;</code></strong>
Query OK, 1 row affected (0.01 sec)

mysql&gt; <strong class="userinput"><code>USE db1;</code></strong>
Database changed
mysql&gt; <strong class="userinput"><code>CREATE TABLE t1 (id INT PRIMARY KEY);</code></strong>
Query OK, 0 rows affected (0.03 sec)

mysql&gt; <strong class="userinput"><code>CREATE TABLE t2 (id INT PRIMARY KEY);</code></strong>
Query OK, 0 rows affected (0.20 sec)

mysql&gt; <strong class="userinput"><code>CREATE view v_t1 AS SELECT * FROM t1;</code></strong>
Query OK, 0 rows affected (0.02 sec)

mysql&gt; <strong class="userinput"><code>CREATE TEMPORARY TABLE t1 (id INT PRIMARY KEY);</code></strong>
Query OK, 0 rows affected (0.00 sec)

mysql&gt; <strong class="userinput"><code>CALL sys.table_exists('db1', 't1', @exists); SELECT @exists;</code></strong>
Query OK, 0 rows affected (0.01 sec)

+-----------+
| @exists   |
+-----------+
| TEMPORARY |
+-----------+
1 row in set (0.00 sec)

mysql&gt; <strong class="userinput"><code>CALL sys.table_exists('db1', 't2', @exists); SELECT @exists;</code></strong>
Query OK, 0 rows affected (0.02 sec)

+------------+
| @exists    |
+------------+
| BASE TABLE |
+------------+
1 row in set (0.00 sec)

mysql&gt; <strong class="userinput"><code>CALL sys.table_exists('db1', 'v_t1', @exists); SELECT @exists;</code></strong>
Query OK, 0 rows affected (0.02 sec)

+---------+
| @exists |
+---------+
| VIEW    |
+---------+
1 row in set (0.00 sec)

mysql&gt; <strong class="userinput"><code>CALL sys.table_exists('db1', 't3', @exists); SELECT @exists;</code></strong>
Query OK, 0 rows affected (0.00 sec)

+---------+
| @exists |
+---------+
|         |
+---------+
1 row in set (0.00 sec)
</pre></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="sys-schema-functions"></a>28.4.5 sys スキーマストアドファンクション</h3></div></div></div><div class="toc"><dl class="toc"><dt><span class="section"><a href="sys-schema.html#sys-extract-schema-from-file-name">28.4.5.1 extract_schema_from_file_name() 関数</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-extract-table-from-file-name">28.4.5.2 extract_table_from_file_name() 関数</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-format-bytes">28.4.5.3 format_bytes() 関数</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-format-path">28.4.5.4 format_path() 関数</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-format-statement">28.4.5.5 format_statement() 関数</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-format-time">28.4.5.6 format_time() 関数</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-list-add">28.4.5.7 list_add() 関数</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-list-drop">28.4.5.8 list_drop() 関数</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-ps-is-account-enabled">28.4.5.9 ps_is_account_enabled() 関数</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-ps-is-consumer-enabled">28.4.5.10 ps_is_consumer_enabled() 関数</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-ps-is-instrument-default-enabled">28.4.5.11 ps_is_instrument_default_enabled() 関数</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-ps-is-instrument-default-timed">28.4.5.12 ps_is_instrument_default_timed() 関数</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-ps-is-thread-instrumented">28.4.5.13 ps_is_thread_instrumented() 関数</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-ps-thread-account">28.4.5.14 ps_thread_account() 関数</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-ps-thread-id">28.4.5.15 ps_thread_id() 関数</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-ps-thread-stack">28.4.5.16 ps_thread_stack() 関数</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-ps-thread-trx-info">28.4.5.17 ps_thread_trx_info() 関数</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-quote-identifier">28.4.5.18 quote_identifier() 関数</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-sys-get-config">28.4.5.19 sys_get_config() 関数</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-version-major">28.4.5.20 version_major() 関数</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-version-minor">28.4.5.21 version_minor() 関数</a></span></dt><dt><span class="section"><a href="sys-schema.html#sys-version-patch">28.4.5.22 version_patch() 関数</a></span></dt></dl></div><p>
        次の各セクションでは、<code class="literal">sys</code> スキーマストアドファンクションについて説明します。
      </p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-extract-schema-from-file-name"></a>28.4.5.1 extract_schema_from_file_name() 関数</h4></div></div></div><a class="indexterm" name="idm45563181725072"></a><a class="indexterm" name="idm45563181722816"></a><p>
          ファイルパス名を指定すると、スキーマ名を表すパスコンポーネントを返します。 この関数は、ファイル名がスキーマディレクトリ内にあることを前提としています。 このため、独自の <code class="literal">DATA_DIRECTORY</code> テーブルオプションを使用して定義されたパーティションまたはテーブルでは機能しません。 
        </p><p>
          この関数は、ファイルパス名を含むパフォーマンススキーマからファイル I/O 情報を抽出する場合に役立ちます。 完全パス名よりも理解しやすく、オブジェクトスキーマ名に対する結合で使用できるスキーマ名を表示する便利な方法を提供します。 
        </p><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-extract-schema-from-file-name-parameters"></a>パラメータ</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                <code class="literal">path VARCHAR(512)</code>: スキーマ名の抽出元のデータファイルへのフルパス。
              </p></li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-extract-schema-from-file-name-return-value"></a>戻り値</h5></div></div></div><p>
            <code class="literal">VARCHAR(64)</code> 値。
          </p></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-extract-schema-from-file-name-example"></a>例</h5></div></div></div><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT sys.extract_schema_from_file_name('/usr/local/mysql/data/world/City.ibd');</code></strong>
+---------------------------------------------------------------------------+
| sys.extract_schema_from_file_name('/usr/local/mysql/data/world/City.ibd') |
+---------------------------------------------------------------------------+
| world                                                                     |
+---------------------------------------------------------------------------+
</pre></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-extract-table-from-file-name"></a>28.4.5.2 extract_table_from_file_name() 関数</h4></div></div></div><a class="indexterm" name="idm45563181707408"></a><a class="indexterm" name="idm45563181705152"></a><p>
          ファイルパス名を指定すると、テーブル名を表すパスコンポーネントを返します。
        </p><p>
          この関数は、ファイルパス名を含むパフォーマンススキーマからファイル I/O 情報を抽出する場合に役立ちます。 完全パス名よりも理解しやすく、オブジェクトテーブル名に対する結合で使用できるテーブル名を表示する便利な方法を提供します。 
        </p><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-extract-table-from-file-name-parameters"></a>パラメータ</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                <code class="literal">path VARCHAR(512)</code>: テーブル名の抽出元のデータファイルへのフルパス。
              </p></li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-extract-table-from-file-name-return-value"></a>戻り値</h5></div></div></div><p>
            <code class="literal">VARCHAR(64)</code> 値。
          </p></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-extract-table-from-file-name-example"></a>例</h5></div></div></div><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT sys.extract_table_from_file_name('/usr/local/mysql/data/world/City.ibd');</code></strong>
+--------------------------------------------------------------------------+
| sys.extract_table_from_file_name('/usr/local/mysql/data/world/City.ibd') |
+--------------------------------------------------------------------------+
| City                                                                     |
+--------------------------------------------------------------------------+
</pre></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-format-bytes"></a>28.4.5.3 format_bytes() 関数</h4></div></div></div><a class="indexterm" name="idm45563181689616"></a><a class="indexterm" name="idm45563181687440"></a><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
            MySQL 8.0.16 では、<code class="literal">format_bytes()</code> は非推奨です。将来のバージョンの MySQL で削除される予定です。 かわりに、組込みの <code class="literal">FORMAT_BYTES()</code> 関数を使用するようにアプリケーションを移行する必要があります。 <a class="xref" href="functions.html#performance-schema-functions" title="12.22 パフォーマンススキーマ関数">セクション12.22「パフォーマンススキーマ関数」</a>を参照してください 
          </p></div><p>
          バイト数を指定すると、人間が読める形式に変換され、値と単位インジケータで構成される文字列が返されます。 値のサイズに応じて、単位部分は <code class="literal">bytes</code>、<code class="literal">KiB</code> (キビバイト)、<code class="literal">MiB</code> (メビバイト)、<code class="literal">GiB</code> (ギビバイト)、<code class="literal">TiB</code> (テビバイト) または <code class="literal">PiB</code> (ペビバイト) になります。 
        </p><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-format-bytes-parameters"></a>パラメータ</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                <code class="literal">bytes TEXT</code>: フォーマットするバイト数。
              </p></li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-format-bytes-return-value"></a>戻り値</h5></div></div></div><p>
            <code class="literal">TEXT</code> 値。
          </p></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-format-bytes-example"></a>例</h5></div></div></div><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT sys.format_bytes(512), sys.format_bytes(18446644073709551615);</code></strong>
+-----------------------+----------------------------------------+
| sys.format_bytes(512) | sys.format_bytes(18446644073709551615) |
+-----------------------+----------------------------------------+
| 512 bytes             | 16383.91 PiB                           |
+-----------------------+----------------------------------------+
</pre></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-format-path"></a>28.4.5.4 format_path() 関数</h4></div></div></div><a class="indexterm" name="idm45563181665952"></a><a class="indexterm" name="idm45563181663776"></a><p>
          パス名を指定すると、次のシステム変数の値と一致するサブパスを次の順序で置換した後に、変更されたパス名を返します:
        </p><pre class="programlisting">datadir
tmpdir
slave_load_tmpdir
innodb_data_home_dir
innodb_log_group_home_dir
innodb_undo_directory
basedir
</pre><p>
          システム変数 <em class="replaceable"><code>sysvar</code></em> の値と一致する値は、文字列<code class="literal">@@GLOBAL.<em class="replaceable"><code>sysvar</code></em> </code>に置き換えられます。
        </p><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-format-path-parameters"></a>パラメータ</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                <code class="literal">path VARCHAR(512)</code>: 書式設定するパス名。
              </p></li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-format-path-return-value"></a>戻り値</h5></div></div></div><p>
            <code class="literal">VARCHAR(512) CHARACTER SET utf8</code> 値。
          </p></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-format-path-example"></a>例</h5></div></div></div><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT sys.format_path('/usr/local/mysql/data/world/City.ibd');</code></strong>
+---------------------------------------------------------+
| sys.format_path('/usr/local/mysql/data/world/City.ibd') |
+---------------------------------------------------------+
| /usr/local/mysql/data/world/City.ibd                    |
+---------------------------------------------------------+
</pre></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-format-statement"></a>28.4.5.5 format_statement() 関数</h4></div></div></div><a class="indexterm" name="idm45563181647648"></a><a class="indexterm" name="idm45563181645472"></a><p>
          文字列 (通常は SQL ステートメントを表します) を指定すると、<code class="literal">statement_truncate_len</code> 構成オプションで指定された長さまで短くなり、結果が返されます。 文字列が <code class="literal">statement_truncate_len</code> より短い場合、切捨ては行われません。 それ以外の場合、文字列の中央部分は省略記号 (<code class="literal">...</code>) に置き換えられます。 
        </p><p>
          この関数は、「パフォーマンススキーマ」テーブルから取得した長いステートメントを既知の固定最大長に書式設定する場合に便利です。
        </p><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-format-statement-parameters"></a>パラメータ</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                <code class="literal">statement LONGTEXT</code>: 書式設定するステートメント。
              </p></li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-format-statement-configuration-options"></a>構成オプション</h5></div></div></div><p>
            <code class="literal">format_statement()</code> 操作は、次の構成オプションまたは対応するユーザー定義変数を使用して変更できます (<a class="xref" href="sys-schema.html#sys-sys-config" title="28.4.2.1 sys_config テーブル">セクション28.4.2.1「sys_config テーブル」</a> を参照):
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                <code class="literal">statement_truncate_len</code>, <code class="literal">@sys.statement_truncate_len</code>
              </p><p>
                <code class="literal">format_statement()</code> 関数によって戻されるステートメントの最大長。 長いステートメントはこの長さに切り捨てられます。 デフォルトは 64 です。 
              </p></li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-format-statement-return-value"></a>戻り値</h5></div></div></div><p>
            <code class="literal">LONGTEXT</code> 値。
          </p></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-format-statement-example"></a>例</h5></div></div></div><p>
            デフォルトでは、<code class="literal">format_statement()</code> は 64 文字以下のステートメントを切り捨てます。 <code class="literal">@sys.statement_truncate_len</code> を設定すると、現在のセッションの切捨て長が変更されます: 
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET @stmt = 'SELECT variable, value, set_time, set_by FROM sys_config';</code></strong>
mysql&gt; <strong class="userinput"><code>SELECT sys.format_statement(@stmt);</code></strong>
+----------------------------------------------------------+
| sys.format_statement(@stmt)                              |
+----------------------------------------------------------+
| SELECT variable, value, set_time, set_by FROM sys_config |
+----------------------------------------------------------+
mysql&gt; <strong class="userinput"><code>SET @sys.statement_truncate_len = 32;</code></strong>
mysql&gt; <strong class="userinput"><code>SELECT sys.format_statement(@stmt);</code></strong>
+-----------------------------------+
| sys.format_statement(@stmt)       |
+-----------------------------------+
| SELECT variabl ... ROM sys_config |
+-----------------------------------+
</pre></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-format-time"></a>28.4.5.6 format_time() 関数</h4></div></div></div><a class="indexterm" name="idm45563181616304"></a><a class="indexterm" name="idm45563181614128"></a><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
            MySQL 8.0.16 では、<code class="literal">format_time()</code> は非推奨です。将来のバージョンの MySQL で削除される予定です。 かわりに、組込みの <code class="literal">FORMAT_PICO_TIME()</code> 関数を使用するようにアプリケーションを移行する必要があります。 <a class="xref" href="functions.html#performance-schema-functions" title="12.22 パフォーマンススキーマ関数">セクション12.22「パフォーマンススキーマ関数」</a>を参照してください 
          </p></div><p>
          ピコ秒単位のパフォーマンススキーマレイテンシまたは待機時間を指定すると、それを人間が読める形式に変換し、値と単位インジケータで構成される文字列を返します。 値のサイズに応じて、単位部分は <code class="literal">ps</code> (ピコ秒)、<code class="literal">ns</code> (ナノ秒)、<code class="literal">us</code> (マイクロ秒)、<code class="literal">ms</code> (ms)、<code class="literal">s</code> (秒)、<code class="literal">m</code> (分)、<code class="literal">h</code> (時間)、<code class="literal">d</code> (日) または <code class="literal">w</code> (週) です。 
        </p><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-format-time-parameters"></a>パラメータ</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                <code class="literal">picoseconds TEXT</code>: 書式設定するピコ秒値。
              </p></li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-format-time-return-value"></a>戻り値</h5></div></div></div><p>
            <code class="literal">TEXT</code> 値。
          </p></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-format-time-example"></a>例</h5></div></div></div><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT sys.format_time(3501), sys.format_time(188732396662000);</code></strong>
+-----------------------+----------------------------------+
| sys.format_time(3501) | sys.format_time(188732396662000) |
+-----------------------+----------------------------------+
| 3.50 ns               | 3.15 m                           |
+-----------------------+----------------------------------+
</pre></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-list-add"></a>28.4.5.7 list_add() 関数</h4></div></div></div><a class="indexterm" name="idm45563181590896"></a><a class="indexterm" name="idm45563181588752"></a><p>
          カンマ区切りの値リストに値を追加し、結果を返します。
        </p><p>
          この関数および <code class="literal">list_drop()</code> は、カンマ区切りの値リストを取る <code class="literal">sql_mode</code> や <code class="literal">optimizer_switch</code> などのシステム変数の値を操作する場合に役立ちます。
        </p><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-list-add-parameters"></a>パラメータ</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                <code class="literal">in_list TEXT</code>: 変更するリスト。
              </p></li><li class="listitem"><p>
                <code class="literal">in_add_value TEXT</code>: リストに追加する値。
              </p></li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-list-add-return-value"></a>戻り値</h5></div></div></div><p>
            <code class="literal">TEXT</code> 値。
          </p></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-list-add-example"></a>例</h5></div></div></div><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT @@sql_mode;</code></strong>
+----------------------------------------+
| @@sql_mode                             |
+----------------------------------------+
| ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES |
+----------------------------------------+
mysql&gt; <strong class="userinput"><code>SET @@sql_mode = sys.list_add(@@sql_mode, 'NO_ENGINE_SUBSTITUTION');</code></strong>
mysql&gt; <strong class="userinput"><code>SELECT @@sql_mode;</code></strong>
+---------------------------------------------------------------+
| @@sql_mode                                                    |
+---------------------------------------------------------------+
| ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION |
+---------------------------------------------------------------+
mysql&gt; <strong class="userinput"><code>SET @@sql_mode = sys.list_drop(@@sql_mode, 'ONLY_FULL_GROUP_BY');</code></strong>
mysql&gt; <strong class="userinput"><code>SELECT @@sql_mode;</code></strong>
+--------------------------------------------+
| @@sql_mode                                 |
+--------------------------------------------+
| STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION |
+--------------------------------------------+
</pre></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-list-drop"></a>28.4.5.8 list_drop() 関数</h4></div></div></div><a class="indexterm" name="idm45563181566992"></a><a class="indexterm" name="idm45563181564832"></a><p>
          カンマ区切りの値リストから値を削除し、結果を返します。 詳細は、<code class="literal">list_add()</code> の説明を参照してください 
        </p><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-list-drop-parameters"></a>パラメータ</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                <code class="literal">in_list TEXT</code>: 変更するリスト。
              </p></li><li class="listitem"><p>
                <code class="literal">in_drop_value TEXT</code>: リストから削除する値。
              </p></li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-list-drop-return-value"></a>戻り値</h5></div></div></div><p>
            <code class="literal">TEXT</code> 値。
          </p></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-ps-is-account-enabled"></a>28.4.5.9 ps_is_account_enabled() 関数</h4></div></div></div><a class="indexterm" name="idm45563181552624"></a><a class="indexterm" name="idm45563181550448"></a><p>
          指定されたアカウントのパフォーマンススキーマインストゥルメンテーションが有効かどうかを示す <code class="literal">YES</code> または <code class="literal">NO</code> を返します。
        </p><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-ps-is-account-enabled-parameters"></a>パラメータ</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                <code class="literal">in_host VARCHAR(60)</code>: チェックするアカウントのホスト名。
              </p></li><li class="listitem"><p>
                <code class="literal">in_user VARCHAR(32)</code>: チェックするアカウントのユーザー名。
              </p></li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-ps-is-account-enabled-return-value"></a>戻り値</h5></div></div></div><p>
            <code class="literal">ENUM('YES','NO')</code> 値。
          </p></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-ps-is-account-enabled-example"></a>例</h5></div></div></div><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT sys.ps_is_account_enabled('localhost', 'root');</code></strong>
+------------------------------------------------+
| sys.ps_is_account_enabled('localhost', 'root') |
+------------------------------------------------+
| YES                                            |
+------------------------------------------------+
</pre></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-ps-is-consumer-enabled"></a>28.4.5.10 ps_is_consumer_enabled() 関数</h4></div></div></div><a class="indexterm" name="idm45563181534528"></a><a class="indexterm" name="idm45563181532352"></a><p>
          指定されたパフォーマンススキーマコンシューマが有効かどうかを示す <code class="literal">YES</code> または <code class="literal">NO</code> を返します。引数が <code class="literal">NULL</code> の場合は <code class="literal">NULL</code> を返します。 引数が有効なコンシューマ名でない場合は、エラーが発生します。 (MySQL 8.0.18 より前では、引数が有効なコンシューマ名でない場合、この関数は <code class="literal">NULL</code> を戻します。) 
        </p><p>
          この関数はコンシューマ階層を考慮しているため、依存するすべてのコンシューマも有効になっていないかぎり、コンシューマは有効とみなされません。 コンシューマ階層の詳細は、<a class="xref" href="performance-schema.html#performance-schema-consumer-filtering" title="27.4.7 コンシューマによる事前フィルタリング">セクション27.4.7「コンシューマによる事前フィルタリング」</a> を参照してください。 
        </p><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-ps-is-consumer-enabled-parameters"></a>パラメータ</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                <code class="literal">in_consumer VARCHAR(64)</code>: チェックするコンシューマの名前。
              </p></li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-ps-is-consumer-enabled-return-value"></a>戻り値</h5></div></div></div><p>
            <code class="literal">ENUM('YES','NO')</code> 値。
          </p></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-ps-is-consumer-enabled-example"></a>例</h5></div></div></div><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT sys.ps_is_consumer_enabled('thread_instrumentation');</code></strong>
+------------------------------------------------------+
| sys.ps_is_consumer_enabled('thread_instrumentation') |
+------------------------------------------------------+
| YES                                                  |
+------------------------------------------------------+
</pre></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-ps-is-instrument-default-enabled"></a>28.4.5.11 ps_is_instrument_default_enabled() 関数</h4></div></div></div><a class="indexterm" name="idm45563181513680"></a><a class="indexterm" name="idm45563181511424"></a><p>
          指定されたパフォーマンススキーマインストゥルメントがデフォルトで有効になっているかどうかを示す <code class="literal">YES</code> または <code class="literal">NO</code> を返します。
        </p><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-ps-is-instrument-default-enabled-parameters"></a>パラメータ</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                <code class="literal">in_instrument VARCHAR(128)</code>: チェックするインストゥルメントの名前。
              </p></li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-ps-is-instrument-default-enabled-return-value"></a>戻り値</h5></div></div></div><p>
            <code class="literal">ENUM('YES','NO')</code> 値。
          </p></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-ps-is-instrument-default-enabled-example"></a>例</h5></div></div></div><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT sys.ps_is_instrument_default_enabled('memory/innodb/row_log_buf');</code></strong>
+-------------------------------------------------------------------+
| sys.ps_is_instrument_default_enabled('memory/innodb/row_log_buf') |
+-------------------------------------------------------------------+
| NO                                                                |
+-------------------------------------------------------------------+
mysql&gt; <strong class="userinput"><code>SELECT sys.ps_is_instrument_default_enabled('statement/sql/alter_user');</code></strong>
+------------------------------------------------------------------+
| sys.ps_is_instrument_default_enabled('statement/sql/alter_user') |
+------------------------------------------------------------------+
| YES                                                              |
+------------------------------------------------------------------+
</pre></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-ps-is-instrument-default-timed"></a>28.4.5.12 ps_is_instrument_default_timed() 関数</h4></div></div></div><a class="indexterm" name="idm45563181495440"></a><a class="indexterm" name="idm45563181493184"></a><p>
          指定されたパフォーマンススキーマインストゥルメントがデフォルトで時間指定されているかどうかを示す <code class="literal">YES</code> または <code class="literal">NO</code> を返します。
        </p><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-ps-is-instrument-default-timed-parameters"></a>パラメータ</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                <code class="literal">in_instrument VARCHAR(128)</code>: チェックするインストゥルメントの名前。
              </p></li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-ps-is-instrument-default-timed-return-value"></a>戻り値</h5></div></div></div><p>
            <code class="literal">ENUM('YES','NO')</code> 値。
          </p></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-ps-is-instrument-default-timed-example"></a>例</h5></div></div></div><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT sys.ps_is_instrument_default_timed('memory/innodb/row_log_buf');</code></strong>
+-----------------------------------------------------------------+
| sys.ps_is_instrument_default_timed('memory/innodb/row_log_buf') |
+-----------------------------------------------------------------+
| NO                                                              |
+-----------------------------------------------------------------+
mysql&gt; <strong class="userinput"><code>SELECT sys.ps_is_instrument_default_timed('statement/sql/alter_user');</code></strong>
+----------------------------------------------------------------+
| sys.ps_is_instrument_default_timed('statement/sql/alter_user') |
+----------------------------------------------------------------+
| YES                                                            |
+----------------------------------------------------------------+
</pre></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-ps-is-thread-instrumented"></a>28.4.5.13 ps_is_thread_instrumented() 関数</h4></div></div></div><a class="indexterm" name="idm45563181477152"></a><a class="indexterm" name="idm45563181474912"></a><p>
          指定された接続 ID のパフォーマンススキーマインストゥルメンテーションが有効かどうかを示す <code class="literal">YES</code> または <code class="literal">NO</code> を返します。ID が不明な場合は <code class="literal">UNKNOWN</code>、ID が <code class="literal">NULL</code> の場合は <code class="literal">NULL</code> を返します。
        </p><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-ps-is-thread-instrumented-parameters"></a>パラメータ</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                <code class="literal">in_connection_id BIGINT UNSIGNED</code>: 接続 ID。 これは、パフォーマンススキーマ <code class="literal">threads</code> テーブルの <code class="literal">PROCESSLIST_ID</code> カラムまたは <code class="literal">SHOW PROCESSLIST</code> 出力の <code class="literal">Id</code> カラムで指定されたタイプの値です。 
              </p></li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-ps-is-thread-instrumented-return-value"></a>戻り値</h5></div></div></div><p>
            <code class="literal">ENUM('YES','NO','UNKNOWN')</code> 値。
          </p></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-ps-is-thread-instrumented-example"></a>例</h5></div></div></div><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT sys.ps_is_thread_instrumented(43);</code></strong>
+-----------------------------------+
| sys.ps_is_thread_instrumented(43) |
+-----------------------------------+
| UNKNOWN                           |
+-----------------------------------+
mysql&gt; <strong class="userinput"><code>SELECT sys.ps_is_thread_instrumented(CONNECTION_ID());</code></strong>
+------------------------------------------------+
| sys.ps_is_thread_instrumented(CONNECTION_ID()) |
+------------------------------------------------+
| YES                                            |
+------------------------------------------------+
</pre></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-ps-thread-account"></a>28.4.5.14 ps_thread_account() 関数</h4></div></div></div><a class="indexterm" name="idm45563181453568"></a><a class="indexterm" name="idm45563181451392"></a><p>
          パフォーマンススキーマスレッド ID を指定すると、スレッドに関連付けられた <code class="literal"><em class="replaceable"><code>user_name</code></em>@<em class="replaceable"><code>host_name</code></em></code> アカウントを返します。
        </p><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-ps-thread-account-parameters"></a>パラメータ</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                <code class="literal">in_thread_id BIGINT UNSIGNED</code>: アカウントを返すスレッド ID。 この値は、一部のパフォーマンススキーマ <code class="literal">threads</code> テーブル行の <code class="literal">THREAD_ID</code> カラムと一致する必要があります。 
              </p></li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-ps-thread-account-return-value"></a>戻り値</h5></div></div></div><p>
            <code class="literal">TEXT</code> 値。
          </p></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-ps-thread-account-example"></a>例</h5></div></div></div><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT sys.ps_thread_account(sys.ps_thread_id(CONNECTION_ID()));</code></strong>
+----------------------------------------------------------+
| sys.ps_thread_account(sys.ps_thread_id(CONNECTION_ID())) |
+----------------------------------------------------------+
| root@localhost                                           |
+----------------------------------------------------------+
</pre></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-ps-thread-id"></a>28.4.5.15 ps_thread_id() 関数</h4></div></div></div><a class="indexterm" name="idm45563181435344"></a><a class="indexterm" name="idm45563181433168"></a><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
            MySQL 8.0.16 では、<code class="literal">ps_thread_id()</code> は非推奨です。将来のバージョンの MySQL で削除される予定です。 かわりに、組込みの <code class="literal">PS_THREAD_ID()</code> および <code class="literal">PS_CURRENT_THREAD_ID()</code> 関数を使用するようにアプリケーションを移行する必要があります。 <a class="xref" href="functions.html#performance-schema-functions" title="12.22 パフォーマンススキーマ関数">セクション12.22「パフォーマンススキーマ関数」</a>を参照してください 
          </p></div><p>
          指定された接続 ID に割り当てられたパフォーマンススキーマスレッド ID、または接続 ID が <code class="literal">NULL</code> の場合は現在の接続のスレッド ID を返します。
        </p><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-ps-thread-id-parameters"></a>パラメータ</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                <code class="literal">in_connection_id BIGINT UNSIGNED</code>: スレッド ID を返す接続の ID。 これは、パフォーマンススキーマ <code class="literal">threads</code> テーブルの <code class="literal">PROCESSLIST_ID</code> カラムまたは <code class="literal">SHOW PROCESSLIST</code> 出力の <code class="literal">Id</code> カラムで指定されたタイプの値です。 
              </p></li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-ps-thread-id-return-value"></a>戻り値</h5></div></div></div><p>
            <code class="literal">BIGINT UNSIGNED</code> 値。
          </p></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-ps-thread-id-example"></a>例</h5></div></div></div><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT sys.ps_thread_id(260);</code></strong>
+-----------------------+
| sys.ps_thread_id(260) |
+-----------------------+
|                   285 |
+-----------------------+
</pre></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-ps-thread-stack"></a>28.4.5.16 ps_thread_stack() 関数</h4></div></div></div><a class="indexterm" name="idm45563181411184"></a><a class="indexterm" name="idm45563181409008"></a><p>
          指定されたスレッド ID のパフォーマンススキーマ内のすべてのステートメント、ステージおよびイベントの JSON 形式のスタックを返します。
        </p><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-ps-thread-stack-parameters"></a>パラメータ</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                <code class="literal">in_thread_id BIGINT</code>: トレースするスレッドの ID。 この値は、一部のパフォーマンススキーマ <code class="literal">threads</code> テーブル行の <code class="literal">THREAD_ID</code> カラムと一致する必要があります。 
              </p></li><li class="listitem"><p>
                <code class="literal">in_verbose BOOLEAN</code> : イベントに <code class="literal">file:lineno</code> 情報を含めるかどうか。
              </p></li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-ps-thread-stack-return-value"></a>戻り値</h5></div></div></div><p>
            <code class="literal">LONGTEXT CHARACTER SET latin1</code> 値。
          </p></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-ps-thread-stack-example"></a>例</h5></div></div></div><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT sys.ps_thread_stack(37, FALSE) AS thread_stack\G</code></strong>
*************************** 1. row ***************************
thread_stack: {"rankdir": "LR","nodesep": "0.10",
"stack_created": "2014-02-19 13:39:03", "mysql_version": "8.0.2-dmr-debug-log",
"mysql_user": "root@localhost","events": [{"nesting_event_id": "0",
"event_id": "10", "timer_wait": 256.35, "event_info": "sql/select",
"wait_info": "select @@version_comment limit 1\nerrors: 0\nwarnings: 0\nlock time:
...
</pre></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-ps-thread-trx-info"></a>28.4.5.17 ps_thread_trx_info() 関数</h4></div></div></div><a class="indexterm" name="idm45563181391584"></a><a class="indexterm" name="idm45563181389408"></a><p>
          指定されたスレッドに関する情報を含む JSON オブジェクトを返します。 この情報には、現在のトランザクションと、パフォーマンススキーマ <code class="literal">events_transactions_current</code> および <code class="literal">events_statements_history</code> テーブルから導出された、すでに実行されているステートメントが含まれます。 (JSON オブジェクトの完全なデータを取得するには、これらのテーブルのコンシューマを有効にする必要があります。) 
        </p><p>
          出力が切捨て長 (デフォルトで 65535) を超えると、次のような JSON エラーオブジェクトが返されます:
        </p><pre class="programlisting">{ "error": "Trx info truncated: Row 6 was cut by GROUP_CONCAT()" }
</pre><p>
          関数の実行中に発生したその他の警告および例外についても、同様のエラーオブジェクトが返されます。
        </p><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-ps-thread-trx-info-parameters"></a>パラメータ</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                <code class="literal">in_thread_id BIGINT UNSIGNED</code>: トランザクション情報を返すスレッド ID。 この値は、一部のパフォーマンススキーマ <code class="literal">threads</code> テーブル行の <code class="literal">THREAD_ID</code> カラムと一致する必要があります。 
              </p></li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-ps-thread-trx-info-configuration-options"></a>構成オプション</h5></div></div></div><p>
            <code class="literal">ps_thread_trx_info()</code> 操作は、次の構成オプションまたは対応するユーザー定義変数を使用して変更できます (<a class="xref" href="sys-schema.html#sys-sys-config" title="28.4.2.1 sys_config テーブル">セクション28.4.2.1「sys_config テーブル」</a> を参照):
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                <code class="literal">ps_thread_trx_info.max_length</code>, <code class="literal">@sys.ps_thread_trx_info.max_length</code>
              </p><p>
                出力の最大長。 デフォルトは 65535 です。 
              </p></li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-ps-thread-trx-info-return-value"></a>戻り値</h5></div></div></div><p>
            <code class="literal">LONGTEXT</code> 値。
          </p></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-ps-thread-trx-info-example"></a>例</h5></div></div></div><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT sys.ps_thread_trx_info(48)\G</code></strong>
*************************** 1. row ***************************
sys.ps_thread_trx_info(48): [
  {
    "time": "790.70 us",
    "state": "COMMITTED",
    "mode": "READ WRITE",
    "autocommitted": "NO",
    "gtid": "AUTOMATIC",
    "isolation": "REPEATABLE READ",
    "statements_executed": [
      {
        "sql_text": "INSERT INTO info VALUES (1, \'foo\')",
        "time": "471.02 us",
        "schema": "trx",
        "rows_examined": 0,
        "rows_affected": 1,
        "rows_sent": 0,
        "tmp_tables": 0,
        "tmp_disk_tables": 0,
        "sort_rows": 0,
        "sort_merge_passes": 0
      },
      {
        "sql_text": "COMMIT",
        "time": "254.42 us",
        "schema": "trx",
        "rows_examined": 0,
        "rows_affected": 0,
        "rows_sent": 0,
        "tmp_tables": 0,
        "tmp_disk_tables": 0,
        "sort_rows": 0,
        "sort_merge_passes": 0
      }
    ]
  },
  {
    "time": "426.20 us",
    "state": "COMMITTED",
    "mode": "READ WRITE",
    "autocommitted": "NO",
    "gtid": "AUTOMATIC",
    "isolation": "REPEATABLE READ",
    "statements_executed": [
      {
        "sql_text": "INSERT INTO info VALUES (2, \'bar\')",
        "time": "107.33 us",
        "schema": "trx",
        "rows_examined": 0,
        "rows_affected": 1,
        "rows_sent": 0,
        "tmp_tables": 0,
        "tmp_disk_tables": 0,
        "sort_rows": 0,
        "sort_merge_passes": 0
      },
      {
        "sql_text": "COMMIT",
        "time": "213.23 us",
        "schema": "trx",
        "rows_examined": 0,
        "rows_affected": 0,
        "rows_sent": 0,
        "tmp_tables": 0,
        "tmp_disk_tables": 0,
        "sort_rows": 0,
        "sort_merge_passes": 0
      }
    ]
  }
]
</pre></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-quote-identifier"></a>28.4.5.18 quote_identifier() 関数</h4></div></div></div><a class="indexterm" name="idm45563181359680"></a><a class="indexterm" name="idm45563181357504"></a><p>
          文字列引数を指定すると、この関数は SQL ステートメントに含めるのに適した引用符付き識別子を生成します。 これは、識別子として使用される値が予約語であるか、バックティック (<code class="literal">`</code>) 文字を含む場合に便利です。 
        </p><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-quote-identifier-parameters"></a>パラメータ</h5></div></div></div><p>
            <code class="literal">in_identifier TEXT</code>: 引用する識別子。
          </p></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-quote-identifier-return-value"></a>戻り値</h5></div></div></div><p>
            <code class="literal">TEXT</code> 値。
          </p></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-quote-identifier-example"></a>例</h5></div></div></div><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT sys.quote_identifier('plain');</code></strong>
+-------------------------------+
| sys.quote_identifier('plain') |
+-------------------------------+
| `plain`                       |
+-------------------------------+
mysql&gt; <strong class="userinput"><code>SELECT sys.quote_identifier('trick`ier');</code></strong>
+-----------------------------------+
| sys.quote_identifier('trick`ier') |
+-----------------------------------+
| `trick``ier`                      |
+-----------------------------------+
mysql&gt; <strong class="userinput"><code>SELECT sys.quote_identifier('integer');</code></strong>
+---------------------------------+
| sys.quote_identifier('integer') |
+---------------------------------+
| `integer`                       |
+---------------------------------+
</pre></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-sys-get-config"></a>28.4.5.19 sys_get_config() 関数</h4></div></div></div><a class="indexterm" name="idm45563181342368"></a><a class="indexterm" name="idm45563181340192"></a><p>
          構成オプション名を指定すると、<code class="literal">sys_config</code> テーブルからオプション値を返します。オプションがテーブルに存在しない場合は、指定されたデフォルト値 (<code class="literal">NULL</code> の可能性があります) を返します。
        </p><p>
          <code class="literal">sys_get_config()</code> がデフォルト値を返し、その値が <code class="literal">NULL</code> である場合、呼出し側は指定された構成オプションの <code class="literal">NULL</code> を処理できると予想されます。
        </p><p>
          慣例上、<code class="literal">sys_get_config()</code> をコールするルーチンはまず、対応するユーザー定義変数が存在し、<code class="literal">NULL</code> 以外であるかどうかをチェックします。 その場合、ルーチンは <code class="literal">sys_config</code> テーブルを読み取らずに変数値を使用します。 変数が存在しないか、<code class="literal">NULL</code> である場合、ルーチンはテーブルからオプション値を読み取り、ユーザー定義変数をその値に設定します。 構成オプションとそれに対応するユーザー定義変数の関係の詳細は、<a class="xref" href="sys-schema.html#sys-sys-config" title="28.4.2.1 sys_config テーブル">セクション28.4.2.1「sys_config テーブル」</a> を参照してください。 
        </p><p>
          構成オプションがすでに設定されているかどうかを確認し、設定されていない場合は <code class="literal">sys_get_config()</code> の戻り値を使用する場合は、<code class="literal">IFNULL(...)</code> を使用できます (後の例を参照)。 ただし、最初の反復でのみ代入が必要な繰返しコールの場合、<code class="literal">IFNULL(...)</code> の使用は <code class="literal">IF (...) THEN ... END IF;</code>ブロックを使用するより大幅に遅くなることが予想されるため、ループ内で (たとえば、結果セットの各行に対して)、これを実行しないでください (後述の例を参照)。 
        </p><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-sys-get-config-parameters"></a>パラメータ</h5></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                <code class="literal">in_variable_name VARCHAR(128)</code>: 値を返す構成オプションの名前。
              </p></li><li class="listitem"><p>
                <code class="literal">in_default_value VARCHAR(128)</code>: 構成オプションが <code class="literal">sys_config</code> テーブルに見つからない場合に返すデフォルト値。
              </p></li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-sys-get-config-return-value"></a>戻り値</h5></div></div></div><p>
            <code class="literal">VARCHAR(128)</code> 値。
          </p></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-sys-get-config-example"></a>例</h5></div></div></div><p>
            オプションがテーブルに存在しない場合、<code class="literal">sys_config</code> テーブルから構成値を取得し、デフォルトとして 128 に戻します:
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT sys.sys_get_config('statement_truncate_len', 128) AS Value;</code></strong>
+-------+
| Value |
+-------+
| 64    |
+-------+
</pre><p>
            ワンライナーの例: オプションがすでに設定されているかどうかを確認します。設定されていない場合は、(<code class="literal">sys_config</code> テーブルの値を使用して)<code class="literal">IFNULL(...)</code> 結果を割り当てます:
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET @sys.statement_truncate_len =</code></strong>
       <strong class="userinput"><code>IFNULL(@sys.statement_truncate_len,</code></strong>
              <strong class="userinput"><code>sys.sys_get_config('statement_truncate_len', 64));</code></strong>
</pre><p>
            <code class="literal">IF (...) THEN ... END IF;</code>ブロックの例: オプションがすでに設定されているかどうかを確認します。設定されていない場合は、<code class="literal">sys_config</code> テーブルから値を割り当てます:
          </p><pre class="programlisting">IF (@sys.statement_truncate_len IS NULL) THEN
  SET @sys.statement_truncate_len = sys.sys_get_config('statement_truncate_len', 64);
END IF;
</pre></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-version-major"></a>28.4.5.20 version_major() 関数</h4></div></div></div><a class="indexterm" name="idm45563181300032"></a><a class="indexterm" name="idm45563181297856"></a><p>
          この関数は、MySQL サーバーのメジャーバージョンを戻します。
        </p><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-version-major-parameters"></a>パラメータ</h5></div></div></div><p>
            なし
          </p></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-version-major-return-value"></a>戻り値</h5></div></div></div><p>
            <code class="literal">TINYINT UNSIGNED</code> 値。
          </p></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-version-major-example"></a>例</h5></div></div></div><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT VERSION(), sys.version_major();</code></strong>
+--------------+---------------------+
| VERSION()    | sys.version_major() |
+--------------+---------------------+
| 8.0.13-debug |                   8 |
+--------------+---------------------+
</pre></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-version-minor"></a>28.4.5.21 version_minor() 関数</h4></div></div></div><a class="indexterm" name="idm45563181286624"></a><a class="indexterm" name="idm45563181284448"></a><p>
          この関数は、MySQL サーバーのマイナーバージョンを戻します。
        </p><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-version-minor-parameters"></a>パラメータ</h5></div></div></div><p>
            なし
          </p></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-version-minor-return-value"></a>戻り値</h5></div></div></div><p>
            <code class="literal">TINYINT UNSIGNED</code> 値。
          </p></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-version-minor-example"></a>例</h5></div></div></div><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT VERSION(), sys.version_minor();</code></strong>
+--------------+---------------------+
| VERSION()    | sys.version_minor() |
+--------------+---------------------+
| 8.0.13-debug |                   0 |
+--------------+---------------------+
</pre></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="sys-version-patch"></a>28.4.5.22 version_patch() 関数</h4></div></div></div><a class="indexterm" name="idm45563181273392"></a><a class="indexterm" name="idm45563181271216"></a><p>
          この関数は、MySQL サーバーのパッチリリースバージョンを戻します。
        </p><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-version-patch-parameters"></a>パラメータ</h5></div></div></div><p>
            なし
          </p></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-version-patch-return-value"></a>戻り値</h5></div></div></div><p>
            <code class="literal">TINYINT UNSIGNED</code> 値。
          </p></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="sys-version-patch-example"></a>例</h5></div></div></div><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT VERSION(), sys.version_patch();</code></strong>
+--------------+---------------------+
| VERSION()    | sys.version_patch() |
+--------------+---------------------+
| 8.0.13-debug |                  13 |
+--------------+---------------------+
</pre></div></div></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="performance-schema.html">前</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="connectors-apis.html">次へ</a></td></tr><tr><td width="40%" align="left" valign="top">第 27 章 MySQL パフォーマンススキーマ </td><td width="20%" align="center"><a accesskey="h" href="index.html">ホーム</a></td><td width="40%" align="right" valign="top"> 第 29 章 Connector および API</td></tr></table></div><div class="copyright-footer"></div></body></html>
