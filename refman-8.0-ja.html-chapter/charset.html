<html lang="ja"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>第 10 章 文字セット、照合順序、Unicode</title><link rel="stylesheet" type="text/css" href="mvl.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><link rel="home" href="index.html" title="MySQL 8.0 リファレンスマニュアル"><link rel="up" href="index.html" title="MySQL 8.0 リファレンスマニュアル"><link rel="prev" href="language-structure.html" title="第 9 章 言語構造"><link rel="next" href="data-types.html" title="第 11 章 データ型"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">第 10 章 文字セット、照合順序、Unicode</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="language-structure.html">前</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="data-types.html">次へ</a></td></tr></table><hr></div><div class="status-header"><p class="alert">このページは機械翻訳したものです。</p></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="charset"></a>第 10 章 文字セット、照合順序、Unicode</h1></div></div></div><div class="toc"><p><b>目次</b></p><dl class="toc"><dt><span class="section"><a href="charset.html#charset-general">10.1 一般の文字セットおよび照合順序</a></span></dt><dt><span class="section"><a href="charset.html#charset-mysql">10.2 MySQL での文字セットと照合順序</a></span></dt><dd><dl><dt><span class="section"><a href="charset.html#charset-repertoire">10.2.1 文字セットレパートリー</a></span></dt><dt><span class="section"><a href="charset.html#charset-metadata">10.2.2 メタデータ用の UTF-8</a></span></dt></dl></dd><dt><span class="section"><a href="charset.html#charset-syntax">10.3 文字セットと照合順序の指定</a></span></dt><dd><dl><dt><span class="section"><a href="charset.html#charset-collation-names">10.3.1 照合の命名規則</a></span></dt><dt><span class="section"><a href="charset.html#charset-server">10.3.2 サーバー文字セットおよび照合順序</a></span></dt><dt><span class="section"><a href="charset.html#charset-database">10.3.3 データベース文字セットおよび照合順序</a></span></dt><dt><span class="section"><a href="charset.html#charset-table">10.3.4 テーブル文字セットおよび照合順序</a></span></dt><dt><span class="section"><a href="charset.html#charset-column">10.3.5 カラム文字セットおよび照合順序</a></span></dt><dt><span class="section"><a href="charset.html#charset-literal">10.3.6 文字列リテラルの文字セットおよび照合順序</a></span></dt><dt><span class="section"><a href="charset.html#charset-national">10.3.7 各国語文字セット</a></span></dt><dt><span class="section"><a href="charset.html#charset-introducer">10.3.8 文字セットイントロデューサ</a></span></dt><dt><span class="section"><a href="charset.html#charset-examples">10.3.9 文字セットと照合順序の割り当ての例</a></span></dt><dt><span class="section"><a href="charset.html#charset-compatibility">10.3.10 ほかの DBMS との互換性</a></span></dt></dl></dd><dt><span class="section"><a href="charset.html#charset-connection">10.4 接続文字セットおよび照合順序</a></span></dt><dt><span class="section"><a href="charset.html#charset-applications">10.5 アプリケーションの文字セットおよび照合順序の構成</a></span></dt><dt><span class="section"><a href="charset.html#charset-errors">10.6 エラーメッセージ文字セット</a></span></dt><dt><span class="section"><a href="charset.html#charset-conversion">10.7 カラム文字セットの変換</a></span></dt><dt><span class="section"><a href="charset.html#charset-collations">10.8 照合順序の問題</a></span></dt><dd><dl><dt><span class="section"><a href="charset.html#charset-collate">10.8.1 SQL ステートメントでの COLLATE の使用</a></span></dt><dt><span class="section"><a href="charset.html#charset-collate-precedence">10.8.2 COLLATE 句の優先順位</a></span></dt><dt><span class="section"><a href="charset.html#charset-collation-compatibility">10.8.3 文字セットと照合順序の互換性</a></span></dt><dt><span class="section"><a href="charset.html#charset-collation-coercibility">10.8.4 式での照合の強制性</a></span></dt><dt><span class="section"><a href="charset.html#charset-binary-collations">10.8.5 バイナリ照合順序と_bin 照合順序</a></span></dt><dt><span class="section"><a href="charset.html#charset-collation-effect">10.8.6 照合順序の効果の例</a></span></dt><dt><span class="section"><a href="charset.html#charset-collation-information-schema">10.8.7 INFORMATION_SCHEMA 検索での照合の使用</a></span></dt></dl></dd><dt><span class="section"><a href="charset.html#charset-unicode">10.9 Unicode のサポート</a></span></dt><dd><dl><dt><span class="section"><a href="charset.html#charset-unicode-utf8mb4">10.9.1 utf8mb4 文字セット (4 バイトの UTF-8 Unicode エンコーディング)</a></span></dt><dt><span class="section"><a href="charset.html#charset-unicode-utf8mb3">10.9.2 utf8mb3 文字セット (3 バイトの UTF-8 Unicode エンコーディング)</a></span></dt><dt><span class="section"><a href="charset.html#charset-unicode-utf8">10.9.3 utf8 文字セット (utf8mb3 のエイリアス)</a></span></dt><dt><span class="section"><a href="charset.html#charset-unicode-ucs2">10.9.4 ucs2 文字セット (UCS-2 Unicode エンコーディング)</a></span></dt><dt><span class="section"><a href="charset.html#charset-unicode-utf16">10.9.5 utf16 文字セット (UTF-16 Unicode エンコーディング)</a></span></dt><dt><span class="section"><a href="charset.html#charset-unicode-utf16le">10.9.6 utf16le 文字セット (UTF-16LE Unicode エンコーディング)</a></span></dt><dt><span class="section"><a href="charset.html#charset-unicode-utf32">10.9.7 utf32 文字セット (UTF-32 Unicode エンコーディング)</a></span></dt><dt><span class="section"><a href="charset.html#charset-unicode-conversion">10.9.8 3 バイト Unicode 文字セットと 4 バイト Unicode 文字セット間の変換</a></span></dt></dl></dd><dt><span class="section"><a href="charset.html#charset-charsets">10.10 サポートされる文字セットおよび照合順序</a></span></dt><dd><dl><dt><span class="section"><a href="charset.html#charset-unicode-sets">10.10.1 Unicode 文字セット</a></span></dt><dt><span class="section"><a href="charset.html#charset-we-sets">10.10.2 西ヨーロッパの文字セット</a></span></dt><dt><span class="section"><a href="charset.html#charset-ce-sets">10.10.3 中央ヨーロッパの文字セット</a></span></dt><dt><span class="section"><a href="charset.html#charset-se-me-sets">10.10.4 南ヨーロッパおよび中東の文字セット</a></span></dt><dt><span class="section"><a href="charset.html#charset-baltic-sets">10.10.5 バルト語の文字セット</a></span></dt><dt><span class="section"><a href="charset.html#charset-cyrillic-sets">10.10.6 キリル文字の文字セット</a></span></dt><dt><span class="section"><a href="charset.html#charset-asian-sets">10.10.7 アジアの文字セット</a></span></dt><dt><span class="section"><a href="charset.html#charset-binary-set">10.10.8 バイナリ文字セット</a></span></dt></dl></dd><dt><span class="section"><a href="charset.html#charset-restrictions">10.11 文字セットの制約</a></span></dt><dt><span class="section"><a href="charset.html#error-message-language">10.12 エラーメッセージ言語の設定</a></span></dt><dt><span class="section"><a href="charset.html#adding-character-set">10.13 文字セットの追加</a></span></dt><dd><dl><dt><span class="section"><a href="charset.html#character-arrays">10.13.1 文字定義配列</a></span></dt><dt><span class="section"><a href="charset.html#string-collating">10.13.2 複雑な文字セットの文字列照合のサポート</a></span></dt><dt><span class="section"><a href="charset.html#multibyte-characters">10.13.3 複雑な文字セットのマルチバイト文字のサポート</a></span></dt></dl></dd><dt><span class="section"><a href="charset.html#adding-collation">10.14 文字セットへの照合順序の追加</a></span></dt><dd><dl><dt><span class="section"><a href="charset.html#charset-collation-implementations">10.14.1 照合順序の実装タイプ</a></span></dt><dt><span class="section"><a href="charset.html#adding-collation-choosing-id">10.14.2 照合順序 ID の選択</a></span></dt><dt><span class="section"><a href="charset.html#adding-collation-simple-8bit">10.14.3 8 ビットの文字セットへの単純な照合順序の追加</a></span></dt><dt><span class="section"><a href="charset.html#adding-collation-unicode-uca">10.14.4 Unicode 文字セットへの UCA 照合順序の追加</a></span></dt></dl></dd><dt><span class="section"><a href="charset.html#charset-configuration">10.15 文字セットの構成</a></span></dt><dt><span class="section"><a href="charset.html#locale-support">10.16 MySQL Server のロケールサポート</a></span></dt></dl></div><a class="indexterm" name="idm46723733990784"></a><a class="indexterm" name="idm46723733989360"></a><a class="indexterm" name="idm46723733988016"></a><a class="indexterm" name="idm46723733987040"></a><a class="indexterm" name="idm46723733985952"></a><p>
    MySQL では、さまざまな文字セットを使用してデータを格納し、さまざまな照合順序に従って比較を実行できます。 デフォルトの MySQL サーバー文字セットおよび照合順序は <code class="literal">utf8mb4</code> および <code class="literal">utf8mb4_0900_ai_ci</code> ですが、サーバー、データベース、テーブル、カラムおよび文字列リテラルレベルで文字セットを指定できます。 
  </p><p>
    この章では次のトピックについて説明します。
  </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
        文字セットと照合順序とは。
      </p></li><li class="listitem"><p>
        文字セットの割り当てに対する複数レベルのデフォルトシステム。
      </p></li><li class="listitem"><p>
        文字セットと照合順序を指定するための構文。
      </p></li><li class="listitem"><p>
        影響を受ける関数と演算。
      </p></li><li class="listitem"><p>
        Unicode のサポート。
      </p></li><li class="listitem"><p>
        使用可能な文字セットと照合順序 (ノート付き)。
      </p></li><li class="listitem"><p>
        エラーメッセージの言語の選択。
      </p></li><li class="listitem"><p>
        曜日と月の名前に使用するロケールの選択。
      </p></li></ul></div><p>
    文字セットの問題は、データストレージだけではなく、クライアントプログラムと MySQL Server との通信にも影響を与えます。 デフォルトと異なる文字セットを使用してクライアントプログラムとサーバー間の通信を行う場合、どの文字セットを使用するのかを示す必要があります。 たとえば、<code class="literal">utf8</code> Unicode 文字セットを使用するには、サーバー接続後に次のステートメントを発行してください。 
  </p><pre class="programlisting">SET NAMES 'utf8';
</pre><p>
    アプリケーションで使用する文字セットの構成と、クライアント/サーバー間の通信に関する文字セット関連の問題の詳細は、<a class="xref" href="charset.html#charset-applications" title="10.5 アプリケーションの文字セットおよび照合順序の構成">セクション10.5「アプリケーションの文字セットおよび照合順序の構成」</a>および<a class="xref" href="charset.html#charset-connection" title="10.4 接続文字セットおよび照合順序">セクション10.4「接続文字セットおよび照合順序」</a>を参照してください。
  </p><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="charset-general"></a>10.1 一般の文字セットおよび照合順序</h2></div></div></div><p>
      <span class="firstterm">文字セット</span>とは、記号とエンコーディングのセットです。 <span class="firstterm">照合順序</span>とは、文字セット内の文字を比較するためのルールを集めたものです。 架空の文字セットを例にして、文字セットと照合順序の違いを見てみましょう。 
    </p><p>
      4 文字のアルファベットがあるとします: <code class="literal">A</code>, <code class="literal">B</code>, <code class="literal">a</code>, <code class="literal">b</code>。 各文字に数字を付けます: <code class="literal">A</code> = 0, <code class="literal">B</code> = 1, <code class="literal">a</code> = 2, <code class="literal">b</code> = 3。 文字 <code class="literal">A</code> は記号、数字 0 は <code class="literal">A</code> 用の <span class="emphasis"><em>encoding</em></span> で、4 文字すべてとそのエンコーディングの組合せは<span class="emphasis"><em>文字セット</em></span>です。 
    </p><p>
      <code class="literal">A</code> と <code class="literal">B</code> の 2 つの文字列値を比較するとします。 これを行う最も簡単な方法は、エンコーディングを確認することです: 0 (<code class="literal">A</code> の場合)、1 (<code class="literal">B</code> の場合)。 0 は 1 より小さいため、<code class="literal">A</code> は <code class="literal">B</code> より小さいと言います。 今ここで行なったのは、文字セットに対する照合順序の適用です。 照合順序はルールの集まりであり、この場合、ルールは<span class="quote">「<span class="quote">エンコーディングの比較</span>」</span>の 1 つだけになります。 これは可能な照合順序のうちでもっとも単純なものであり、<span class="firstterm">バイナリ</span>照合順序と呼ばれています。 
    </p><p>
      しかし、小文字と大文字が同等であることを表すにはどうなるのでしょうか。 この場合、少なくとも 2 つのルールがあります: (1) 小文字の <code class="literal">a</code> および <code class="literal">b</code> を <code class="literal">A</code> および <code class="literal">B</code> と同等の文字として扱い、(2) エンコーディングを比較します。 これは<span class="firstterm">大文字と小文字を区別しない</span>照合順序と呼ばれます。 バイナリ照合順序よりも少し複雑になります。 
    </p><p>
      実際には、ほとんどの文字セットに多数の文字があります: <code class="literal">A</code> および <code class="literal">B</code> だけでなく、アルファベット全体でもあり、数千文字を含む複数のアルファベットまたは東部手書きシステムに加えて、特殊記号や句読点も多数含まれる場合があります。 また、ほとんどの照合には、大文字と小文字を区別するかどうかだけでなく、アクセントを区別するかどうか (<span class="quote">「<span class="quote">「アクセント」</span>」</span>はドイツ語<code class="literal">Ö</code>のように文字に添付されたマーク)、複数文字マッピング (ドイツ語照合のいずれかで<code class="literal">Ö</code> = <code class="literal">OE</code> となるルールなど) に関する多くのルールがあります。 
    </p><p>
      MySQL では以下が可能です。
    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          さまざまな文字セットを使用して文字列を格納します。
        </p></li><li class="listitem"><p>
          さまざまな照合順序を使用して文字列を比較します。
        </p></li><li class="listitem"><p>
          文字セットまたは照合順序が異なる文字列を、同じサーバー、同じデータベース、または同じテーブル内にも混在させます。
        </p></li><li class="listitem"><p>
          どのレベルでも文字セットと照合順序を指定できるようにします。
        </p></li></ul></div><p>
      これらの機能を効果的に使用するには、使用可能な文字セットと照合順序、デフォルトの変更方法、および文字列演算子と関数の動作への影響を把握する必要があります。
    </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="charset-mysql"></a>10.2 MySQL での文字セットと照合順序</h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="section"><a href="charset.html#charset-repertoire">10.2.1 文字セットレパートリー</a></span></dt><dt><span class="section"><a href="charset.html#charset-metadata">10.2.2 メタデータ用の UTF-8</a></span></dt></dl></div><p>
      MySQL Server では、複数の Unicode 文字セットを含む複数の文字セットがサポートされます。 使用可能な文字セットを表示するには、<code class="literal">INFORMATION_SCHEMA</code> <code class="literal">CHARACTER_SETS</code> テーブルまたは <code class="literal">SHOW CHARACTER SET</code> ステートメントを使用します。 リストの一部は次のとおりです。 完全な情報については、<a class="xref" href="charset.html#charset-charsets" title="10.10 サポートされる文字セットおよび照合順序">セクション10.10「サポートされる文字セットおよび照合順序」</a>を参照してください。 
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW CHARACTER SET;</code></strong>
+----------+---------------------------------+---------------------+--------+
| Charset  | Description                     | Default collation   | Maxlen |
+----------+---------------------------------+---------------------+--------+
| big5     | Big5 Traditional Chinese        | big5_chinese_ci     |      2 |
| binary   | Binary pseudo charset           | binary              |      1 |
...
| latin1   | cp1252 West European            | latin1_swedish_ci   |      1 |
...
| ucs2     | UCS-2 Unicode                   | ucs2_general_ci     |      2 |
...
| utf8     | UTF-8 Unicode                   | utf8_general_ci     |      3 |
| utf8mb4  | UTF-8 Unicode                   | utf8mb4_0900_ai_ci  |      4 |
...
</pre><p>
      デフォルトでは、<code class="literal">SHOW CHARACTER SET</code> ステートメントは使用可能なすべての文字セットを表示します。 一致させる文字セット名を指定するオプションの <code class="literal">LIKE</code> 句または <code class="literal">WHERE</code> 句を取ります。 次の例は、Unicode 文字セット (Unicode 変換形式に基づく文字セット) の一部を示しています: 
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW CHARACTER SET LIKE 'utf%';</code></strong>
+---------+------------------+--------------------+--------+
| Charset | Description      | Default collation  | Maxlen |
+---------+------------------+--------------------+--------+
| utf16   | UTF-16 Unicode   | utf16_general_ci   |      4 |
| utf16le | UTF-16LE Unicode | utf16le_general_ci |      4 |
| utf32   | UTF-32 Unicode   | utf32_general_ci   |      4 |
| utf8    | UTF-8 Unicode    | utf8_general_ci    |      3 |
| utf8mb4 | UTF-8 Unicode    | utf8mb4_0900_ai_ci |      4 |
+---------+------------------+--------------------+--------+
</pre><p>
      特定の文字セットには常に少なくとも 1 つの照合順序があり、ほとんどの文字セットには複数の照合順序があります。 文字セットの表示照合順序をリストするには、<code class="literal">INFORMATION_SCHEMA</code> <code class="literal">COLLATIONS</code> テーブルまたは <code class="literal">SHOW COLLATION</code> ステートメントを使用します。 
    </p><p>
      デフォルトでは、<code class="literal">SHOW COLLATION</code> ステートメントは使用可能なすべての照合を表示します。 表示する照合名を指定するオプションの <code class="literal">LIKE</code> 句または <code class="literal">WHERE</code> 句を取ります。 たとえば、デフォルトの文字セット <code class="literal">utf8mb4</code> の照合順序を表示するには、次のステートメントを使用します: 
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW COLLATION WHERE Charset = 'utf8mb4';</code></strong>
+----------------------------+---------+-----+---------+----------+---------+---------------+
| Collation                  | Charset | Id  | Default | Compiled | Sortlen | Pad_attribute |
+----------------------------+---------+-----+---------+----------+---------+---------------+
| utf8mb4_0900_ai_ci         | utf8mb4 | 255 | Yes     | Yes      |       0 | NO PAD        |
| utf8mb4_0900_as_ci         | utf8mb4 | 305 |         | Yes      |       0 | NO PAD        |
| utf8mb4_0900_as_cs         | utf8mb4 | 278 |         | Yes      |       0 | NO PAD        |
| utf8mb4_0900_bin           | utf8mb4 | 309 |         | Yes      |       1 | NO PAD        |
| utf8mb4_bin                | utf8mb4 |  46 |         | Yes      |       1 | PAD SPACE     |
| utf8mb4_croatian_ci        | utf8mb4 | 245 |         | Yes      |       8 | PAD SPACE     |
| utf8mb4_cs_0900_ai_ci      | utf8mb4 | 266 |         | Yes      |       0 | NO PAD        |
| utf8mb4_cs_0900_as_cs      | utf8mb4 | 289 |         | Yes      |       0 | NO PAD        |
| utf8mb4_czech_ci           | utf8mb4 | 234 |         | Yes      |       8 | PAD SPACE     |
| utf8mb4_danish_ci          | utf8mb4 | 235 |         | Yes      |       8 | PAD SPACE     |
| utf8mb4_da_0900_ai_ci      | utf8mb4 | 267 |         | Yes      |       0 | NO PAD        |
| utf8mb4_da_0900_as_cs      | utf8mb4 | 290 |         | Yes      |       0 | NO PAD        |
| utf8mb4_de_pb_0900_ai_ci   | utf8mb4 | 256 |         | Yes      |       0 | NO PAD        |
| utf8mb4_de_pb_0900_as_cs   | utf8mb4 | 279 |         | Yes      |       0 | NO PAD        |
| utf8mb4_eo_0900_ai_ci      | utf8mb4 | 273 |         | Yes      |       0 | NO PAD        |
| utf8mb4_eo_0900_as_cs      | utf8mb4 | 296 |         | Yes      |       0 | NO PAD        |
| utf8mb4_esperanto_ci       | utf8mb4 | 241 |         | Yes      |       8 | PAD SPACE     |
| utf8mb4_estonian_ci        | utf8mb4 | 230 |         | Yes      |       8 | PAD SPACE     |
| utf8mb4_es_0900_ai_ci      | utf8mb4 | 263 |         | Yes      |       0 | NO PAD        |
| utf8mb4_es_0900_as_cs      | utf8mb4 | 286 |         | Yes      |       0 | NO PAD        |
| utf8mb4_es_trad_0900_ai_ci | utf8mb4 | 270 |         | Yes      |       0 | NO PAD        |
| utf8mb4_es_trad_0900_as_cs | utf8mb4 | 293 |         | Yes      |       0 | NO PAD        |
| utf8mb4_et_0900_ai_ci      | utf8mb4 | 262 |         | Yes      |       0 | NO PAD        |
| utf8mb4_et_0900_as_cs      | utf8mb4 | 285 |         | Yes      |       0 | NO PAD        |
| utf8mb4_general_ci         | utf8mb4 |  45 |         | Yes      |       1 | PAD SPACE     |
| utf8mb4_german2_ci         | utf8mb4 | 244 |         | Yes      |       8 | PAD SPACE     |
| utf8mb4_hr_0900_ai_ci      | utf8mb4 | 275 |         | Yes      |       0 | NO PAD        |
| utf8mb4_hr_0900_as_cs      | utf8mb4 | 298 |         | Yes      |       0 | NO PAD        |
| utf8mb4_hungarian_ci       | utf8mb4 | 242 |         | Yes      |       8 | PAD SPACE     |
| utf8mb4_hu_0900_ai_ci      | utf8mb4 | 274 |         | Yes      |       0 | NO PAD        |
| utf8mb4_hu_0900_as_cs      | utf8mb4 | 297 |         | Yes      |       0 | NO PAD        |
| utf8mb4_icelandic_ci       | utf8mb4 | 225 |         | Yes      |       8 | PAD SPACE     |
| utf8mb4_is_0900_ai_ci      | utf8mb4 | 257 |         | Yes      |       0 | NO PAD        |
| utf8mb4_is_0900_as_cs      | utf8mb4 | 280 |         | Yes      |       0 | NO PAD        |
| utf8mb4_ja_0900_as_cs      | utf8mb4 | 303 |         | Yes      |       0 | NO PAD        |
| utf8mb4_ja_0900_as_cs_ks   | utf8mb4 | 304 |         | Yes      |      24 | NO PAD        |
| utf8mb4_latvian_ci         | utf8mb4 | 226 |         | Yes      |       8 | PAD SPACE     |
| utf8mb4_la_0900_ai_ci      | utf8mb4 | 271 |         | Yes      |       0 | NO PAD        |
| utf8mb4_la_0900_as_cs      | utf8mb4 | 294 |         | Yes      |       0 | NO PAD        |
| utf8mb4_lithuanian_ci      | utf8mb4 | 236 |         | Yes      |       8 | PAD SPACE     |
| utf8mb4_lt_0900_ai_ci      | utf8mb4 | 268 |         | Yes      |       0 | NO PAD        |
| utf8mb4_lt_0900_as_cs      | utf8mb4 | 291 |         | Yes      |       0 | NO PAD        |
| utf8mb4_lv_0900_ai_ci      | utf8mb4 | 258 |         | Yes      |       0 | NO PAD        |
| utf8mb4_lv_0900_as_cs      | utf8mb4 | 281 |         | Yes      |       0 | NO PAD        |
| utf8mb4_persian_ci         | utf8mb4 | 240 |         | Yes      |       8 | PAD SPACE     |
| utf8mb4_pl_0900_ai_ci      | utf8mb4 | 261 |         | Yes      |       0 | NO PAD        |
| utf8mb4_pl_0900_as_cs      | utf8mb4 | 284 |         | Yes      |       0 | NO PAD        |
| utf8mb4_polish_ci          | utf8mb4 | 229 |         | Yes      |       8 | PAD SPACE     |
| utf8mb4_romanian_ci        | utf8mb4 | 227 |         | Yes      |       8 | PAD SPACE     |
| utf8mb4_roman_ci           | utf8mb4 | 239 |         | Yes      |       8 | PAD SPACE     |
| utf8mb4_ro_0900_ai_ci      | utf8mb4 | 259 |         | Yes      |       0 | NO PAD        |
| utf8mb4_ro_0900_as_cs      | utf8mb4 | 282 |         | Yes      |       0 | NO PAD        |
| utf8mb4_ru_0900_ai_ci      | utf8mb4 | 306 |         | Yes      |       0 | NO PAD        |
| utf8mb4_ru_0900_as_cs      | utf8mb4 | 307 |         | Yes      |       0 | NO PAD        |
| utf8mb4_sinhala_ci         | utf8mb4 | 243 |         | Yes      |       8 | PAD SPACE     |
| utf8mb4_sk_0900_ai_ci      | utf8mb4 | 269 |         | Yes      |       0 | NO PAD        |
| utf8mb4_sk_0900_as_cs      | utf8mb4 | 292 |         | Yes      |       0 | NO PAD        |
| utf8mb4_slovak_ci          | utf8mb4 | 237 |         | Yes      |       8 | PAD SPACE     |
| utf8mb4_slovenian_ci       | utf8mb4 | 228 |         | Yes      |       8 | PAD SPACE     |
| utf8mb4_sl_0900_ai_ci      | utf8mb4 | 260 |         | Yes      |       0 | NO PAD        |
| utf8mb4_sl_0900_as_cs      | utf8mb4 | 283 |         | Yes      |       0 | NO PAD        |
| utf8mb4_spanish2_ci        | utf8mb4 | 238 |         | Yes      |       8 | PAD SPACE     |
| utf8mb4_spanish_ci         | utf8mb4 | 231 |         | Yes      |       8 | PAD SPACE     |
| utf8mb4_sv_0900_ai_ci      | utf8mb4 | 264 |         | Yes      |       0 | NO PAD        |
| utf8mb4_sv_0900_as_cs      | utf8mb4 | 287 |         | Yes      |       0 | NO PAD        |
| utf8mb4_swedish_ci         | utf8mb4 | 232 |         | Yes      |       8 | PAD SPACE     |
| utf8mb4_tr_0900_ai_ci      | utf8mb4 | 265 |         | Yes      |       0 | NO PAD        |
| utf8mb4_tr_0900_as_cs      | utf8mb4 | 288 |         | Yes      |       0 | NO PAD        |
| utf8mb4_turkish_ci         | utf8mb4 | 233 |         | Yes      |       8 | PAD SPACE     |
| utf8mb4_unicode_520_ci     | utf8mb4 | 246 |         | Yes      |       8 | PAD SPACE     |
| utf8mb4_unicode_ci         | utf8mb4 | 224 |         | Yes      |       8 | PAD SPACE     |
| utf8mb4_vietnamese_ci      | utf8mb4 | 247 |         | Yes      |       8 | PAD SPACE     |
| utf8mb4_vi_0900_ai_ci      | utf8mb4 | 277 |         | Yes      |       0 | NO PAD        |
| utf8mb4_vi_0900_as_cs      | utf8mb4 | 300 |         | Yes      |       0 | NO PAD        |
| utf8mb4_zh_0900_as_cs      | utf8mb4 | 308 |         | Yes      |       0 | NO PAD        |
+----------------------------+---------+-----+---------+----------+---------+---------------+
</pre><p>
      これらの照合の詳細は、<a class="xref" href="charset.html#charset-unicode-sets" title="10.10.1 Unicode 文字セット">セクション10.10.1「Unicode 文字セット」</a> を参照してください。
    </p><p>
      照合順序には次のような一般的な特徴があります。
    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          2 つの異なる文字セットで、同じ照合順序を共有できません。
        </p></li><li class="listitem"><p>
          各文字セットには<span class="emphasis"><em>デフォルト照合</em></span>があります。 たとえば、<code class="literal">utf8mb4</code> および <code class="literal">latin1</code> のデフォルトの照合は、それぞれ <code class="literal">utf8mb4_0900_ai_ci</code> および <code class="literal">latin1_swedish_ci</code> です。 <code class="literal">INFORMATION_SCHEMA</code> <code class="literal">CHARACTER_SETS</code> テーブルおよび <code class="literal">SHOW CHARACTER SET</code> ステートメントは、各文字セットのデフォルトの照合順序を示します。 <code class="literal">INFORMATION_SCHEMA</code> <code class="literal">COLLATIONS</code> テーブルおよび <code class="literal">SHOW COLLATION</code> ステートメントには、各照合順序が文字セットのデフォルトであるかどうかを示すカラムがあります (デフォルトである場合は <code class="literal">Yes</code>、そうでない場合は空)。 
        </p></li><li class="listitem"><p>
          照合順序名は、関連付けられている文字セットの名前で始まり、通常は、他の照合順序特性を示す 1 つ以上の接尾辞が続きます。 ネーミング規則の詳細は、<a class="xref" href="charset.html#charset-collation-names" title="10.3.1 照合の命名規則">セクション10.3.1「照合の命名規則」</a> を参照してください。 
        </p></li></ul></div><p>
      文字セットに複数の照合順序がある場合、特定のアプリケーションに最適な照合順序が明確でない可能性があります。 不適切な照合を選択しないようにするには、代表的なデータ値を使用していくつかの比較を実行し、特定の照合によって期待どおりに値がソートされるようにします。 
    </p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="charset-repertoire"></a>10.2.1 文字セットレパートリー</h3></div></div></div><a class="indexterm" name="idm46723733881744"></a><a class="indexterm" name="idm46723733879632"></a><a class="indexterm" name="idm46723733877600"></a><a class="indexterm" name="idm46723733875568"></a><p>
        文字セットの<span class="firstterm">レパートリー</span>とは、そのセット内の文字の集合です。
      </p><p>
        文字列式にはレパートリー属性があり、その値は次の 2 つです。
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">ASCII</code>: 式には ASCII 文字、つまり <code class="literal">U+0000</code> から <code class="literal">U+007F</code> までの Unicode 範囲の文字のみを含めることができます。
          </p></li><li class="listitem"><p>
            <code class="literal">UNICODE</code>: <code class="literal">U+0000</code> から <code class="literal">U+10FFFF</code> の Unicode 範囲内の文字を式に含めることができます。 これには、Basic Multilingual Plane (BMP) 範囲 (<code class="literal">U+0000</code> から <code class="literal">U+FFFF</code>) の文字と BMP 範囲外の補助文字 (<code class="literal">U+10000</code> から <code class="literal">U+10FFFF</code>) が含まれます。 
          </p></li></ul></div><p>
        <code class="literal">ASCII</code> 範囲は <code class="literal">UNICODE</code> 範囲のサブセットであるため、<code class="literal">ASCII</code> レパートリーを含む文字列は、情報を失うことなく、<code class="literal">UNICODE</code> レパートリーを含む文字列の文字セットに安全に変換できます。 また、<code class="literal">ascii</code> 文字セットのスーパーセットである任意の文字セットに安全に変換できます。 (すべての MySQL 文字セットは、<code class="literal">swe7</code> を除いて <code class="literal">ascii</code> のスーパーセットであり、スウェーデン語アクセント付き文字に一部の句読点文字が再利用されます。) 
      </p><p>
        レパートリーを使用すると、照合強制性のルールがあいまいさを解決するには不十分な場合に MySQL が<span class="quote">「<span class="quote">「照合順序の組合せが不正です」</span>」</span>エラーを返す多くの場合に、式で文字セット変換が可能になります。 (強制性の詳細は、<a class="xref" href="charset.html#charset-collation-coercibility" title="10.8.4 式での照合の強制性">セクション10.8.4「式での照合の強制性」</a> を参照してください。) 
      </p><p>
        次の説明では、式とそのレパートリーの例を挙げ、レパートリーの使用によって、文字列式の評価がどのように変わるかを示します。
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            文字列定数のレパートリーは文字列の内容に依存し、文字列文字セットのレパートリーとは異なる場合があります。 これらのステートメントを考慮してください。 
          </p><pre class="programlisting">SET NAMES utf8mb4; SELECT 'abc';
SELECT _utf8mb4'def';
</pre><p>
            前述の各場合、文字セットは <code class="literal">utf8mb4</code> ですが、文字列には実際に ASCII 範囲外の文字が含まれていないため、そのレパートリーは <code class="literal">UNICODE</code> ではなく <code class="literal">ASCII</code> です。
          </p></li><li class="listitem"><p>
            <code class="literal">ascii</code> 文字セットを持つカラムには、その文字セットのために <code class="literal">ASCII</code> レパートリーがあります。 次のテーブルでは、<code class="literal">c1</code> には <code class="literal">ASCII</code> レパートリーがあります。 
          </p><pre class="programlisting">CREATE TABLE t1 (c1 CHAR(1) CHARACTER SET ascii);
</pre><p>
            次の例では、レパートリーがないときにエラーが発生する場合に、レパートリーによってどのように結果が求められるようになるかを示しています。
          </p><pre class="programlisting">CREATE TABLE t1 (
  c1 CHAR(1) CHARACTER SET latin1,
  c2 CHAR(1) CHARACTER SET ascii
);
INSERT INTO t1 VALUES ('a','b');
SELECT CONCAT(c1,c2) FROM t1;
</pre><p>
            レパートリーがない場合、次のエラーが発生します。
          </p><pre class="programlisting">ERROR 1267 (HY000): Illegal mix of collations (latin1_swedish_ci,IMPLICIT)
and (ascii_general_ci,IMPLICIT) for operation 'concat'
</pre><p>
            レパートリーを使用すると、サブセットからスーパーセットへ (<code class="literal">ascii</code> から <code class="literal">latin1</code> へ) の変換を行うことができ、結果が返されます。
          </p><pre class="programlisting">+---------------+
| CONCAT(c1,c2) |
+---------------+
| ab            |
+---------------+
</pre></li><li class="listitem"><p>
            1 つの文字列引数を持つ関数は、その引数のレパートリーを継承します。 引数に <code class="literal">ASCII</code> レパートリーがあるため、<code class="literal">UPPER(_utf8mb4'abc')</code> の結果には <code class="literal">ASCII</code> レパートリーがあります。 (<code class="literal">_utf8mb4</code> イントロデューサにもかかわらず、文字列<code class="literal">'abc'</code>に ASCII 範囲外の文字が含まれていません。) 
          </p></li><li class="listitem"><p>
            文字列を返すが、文字列引数を持たず、結果文字セットとして <code class="literal">character_set_connection</code> を使用する関数の場合、結果のレパートリーは、<code class="literal">character_set_connection</code> が <code class="literal">ascii</code> である場合は <code class="literal">ASCII</code> に、それ以外の場合は <code class="literal">UNICODE</code> になります。
          </p><pre class="programlisting">FORMAT(<em class="replaceable"><code>numeric_column</code></em>, 4);
</pre><p>
            レパートリーを使用するかどうかによって、MySQL が次の例をどのように評価するかが変わります。
          </p><pre class="programlisting">SET NAMES ascii;
CREATE TABLE t1 (a INT, b VARCHAR(10) CHARACTER SET latin1);
INSERT INTO t1 VALUES (1,'b');
SELECT CONCAT(FORMAT(a, 4), b) FROM t1;
</pre><p>
            レパートリーがない場合、次のエラーが発生します。
          </p><pre class="programlisting">ERROR 1267 (HY000): Illegal mix of collations (ascii_general_ci,COERCIBLE)
and (latin1_swedish_ci,IMPLICIT) for operation 'concat'
</pre><p>
            レパートリーを使用すると、次のように結果が返されます。
          </p><pre class="programlisting">+-------------------------+
| CONCAT(FORMAT(a, 4), b) |
+-------------------------+
| 1.0000b                 |
+-------------------------+
</pre></li><li class="listitem"><p>
            複数の文字列引数を持つ関数は、<code class="literal">UNICODE</code> が <code class="literal">ASCII</code> よりも広い場合に、結果レパートリーに<span class="quote">「<span class="quote">「ワイドスト」</span>」</span>引数 repertoire を使用します。 次の <code class="literal">CONCAT()</code> 呼び出しを考えてみます。 
          </p><pre class="programlisting">CONCAT(_ucs2 X'0041', _ucs2 X'0042')
CONCAT(_ucs2 X'0041', _ucs2 X'00C2')
</pre><p>
            最初のコールでは、両方の引数が ASCII 範囲内にあるため、レパートリーは <code class="literal">ASCII</code> です。 2 番目のコールでは、2 番目の引数が ASCII 範囲外であるため、レパートリーは <code class="literal">UNICODE</code> です。 
          </p></li><li class="listitem"><p>
            関数の戻り値のレパートリーは、結果の文字セットおよび照合順序に影響する引数のみのレパートリーに基づいて決定されます。
          </p><pre class="programlisting">IF(column1 &lt; column2, 'smaller', 'greater')
</pre><p>
            結果のレパートリーは、2 つの文字列引数 (2 番目の引数と 3 番目の引数) がどちらも <code class="literal">ASCII</code> レパートリーなので、<code class="literal">ASCII</code> です。 最初の引数は、式で文字列値を使用する場合でも、結果のレパートリーにとっては重要ではありません。 
          </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="charset-metadata"></a>10.2.2 メタデータ用の UTF-8</h3></div></div></div><a class="indexterm" name="idm46723733805296"></a><a class="indexterm" name="idm46723733803152"></a><a class="indexterm" name="idm46723733801088"></a><p>
        <span class="firstterm">メタデータ</span>は<span class="quote">「<span class="quote">データに関するデータ</span>」</span>です。 データベースについて<span class="emphasis"><em>記述している</em></span>すべてのものがメタデータであり、データベースの<span class="emphasis"><em>内容</em></span>ではありません。 したがって、カラム名、データベース名、ユーザー名、バージョン名、および <code class="literal">SHOW</code> の文字列結果のほとんどがメタデータです。 <code class="literal">INFORMATION_SCHEMA</code> 内のテーブルは定義上、データベースオブジェクトに関する情報を含んでいるので、これは、このテーブルの内容にも当てはまります。 
      </p><p>
        メタデータの表現は次の要件を満たしている必要があります。
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            すべてのメタデータで文字セットが一致している必要があります。 それ以外の場合、<code class="literal">INFORMATION_SCHEMA</code> 内のテーブルに対する <code class="literal">SHOW</code> ステートメントも <code class="literal">SELECT</code> ステートメントも正しく機能しません。これらの演算結果の同一カラム内の各行で文字セットが異なるからです。 
          </p></li><li class="listitem"><p>
            メタデータはすべての言語のすべての文字が含まれている必要があります。 そうでない場合、ユーザーはそれぞれの言語を使用してカラムとテーブルに名前を付けることはできません。 
          </p></li></ul></div><p>
        両方の要件を満たすために、MySQL では、Unicode 文字セット、つまり UTF-8 でメタデータを格納します。 アクセント符号付きの文字またはラテン語以外の文字を使用しなければ、混乱が生じることはありません。 ただし、使用した場合は、メタデータの文字セットが UTF-8 であることを認識する必要があります。 
      </p><p>
        このメタデータ要件は、<code class="literal">USER()</code>、<code class="literal">CURRENT_USER()</code>、<code class="literal">SESSION_USER()</code>、<code class="literal">SYSTEM_USER()</code>、<code class="literal">DATABASE()</code>、および <code class="literal">VERSION()</code> の関数の戻り値で、UTF-8 文字セットがデフォルトで使用されることを意味します。
      </p><p>
        サーバーは、<code class="literal">character_set_system</code> システム変数をメタデータ文字セットの名前に設定します。
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW VARIABLES LIKE 'character_set_system';</code></strong>
+----------------------+-------+
| Variable_name        | Value |
+----------------------+-------+
| character_set_system | utf8  |
+----------------------+-------+
</pre><p>
        Unicode を使用してメタデータを格納しても、サーバーが、カラムのヘッダーや <code class="literal">DESCRIBE</code> 関数の結果を、デフォルトで <code class="literal">character_set_system</code> 文字セットで返すことには<span class="emphasis"><em>なりません</em></span>。 <code class="literal">SELECT column1 FROM t</code> を使用すると、<code class="literal">column1</code> 自体の名前が、<code class="literal">utf8mb4</code> のデフォルト値を持つ <code class="literal">character_set_results</code> システム変数の値によって決定された文字セットでサーバーからクライアントに返されます。 別の文字セットでメタデータの結果をサーバーに返させる場合は、<code class="literal">SET NAMES</code> ステートメントを使用してサーバーに文字セット変換を強制的に実行させてください。 <code class="literal">SET NAMES</code> は <code class="literal">character_set_results</code> および関連するほかのシステム変数を設定します。 (<a class="xref" href="charset.html#charset-connection" title="10.4 接続文字セットおよび照合順序">セクション10.4「接続文字セットおよび照合順序」</a>を参照してください。) また、サーバーから結果を受け取ったあとで、クライアントプログラムが変換を実行できます。 クライアントが変換を実行するとより効率的ですが、このオプションは、すべてのクライアントが常に使用できるとはかぎりません。 
      </p><p>
        <code class="literal">character_set_results</code> が <code class="literal">NULL</code> に設定されている場合、変換は実行されず、サーバーはオリジナルの文字セット (<code class="literal">character_set_system</code> によって指定されたセット) を使用してメタデータを返します。
      </p><p>
        サーバーからクライアントに返されるエラーメッセージは、メタデータと同様に自動的にクライアントの文字セットに変換されます。
      </p><p>
        たとえば、<code class="literal">USER()</code> 関数を比較または割り当てのために単一のステートメント内で使用している場合、問題はありません。 MySQL が自動的に変換を実行します。 
      </p><pre class="programlisting">SELECT * FROM t1 WHERE USER() = latin1_column;
</pre><p>
        これが機能するのは、<code class="literal">latin1_column</code> の内容が UTF-8 に自動的に変換されてから比較が行われるからです。
      </p><pre class="programlisting">INSERT INTO t1 (latin1_column) SELECT USER();
</pre><p>
        これが機能するのは、<code class="literal">USER()</code> の内容が <code class="literal">latin1</code> に自動的に変換されてから割り当てが行われるからです。
      </p><p>
        自動変換は SQL 標準には含まれていませんが、標準では、すべての文字セットが Unicode の<span class="quote">「<span class="quote">「サブセット」</span>」</span>であることが示されています。 <span class="quote">「<span class="quote">スーパーセットに適用されるものはサブセットにも適用される</span>」</span>というよく知られた原則があるので、Unicode の照合順序は Unicode 以外の文字列との比較にも適用できると考えられます。 文字列の強制力の詳細は、<a class="xref" href="charset.html#charset-collation-coercibility" title="10.8.4 式での照合の強制性">セクション10.8.4「式での照合の強制性」</a>を参照してください。 
      </p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="charset-syntax"></a>10.3 文字セットと照合順序の指定</h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="section"><a href="charset.html#charset-collation-names">10.3.1 照合の命名規則</a></span></dt><dt><span class="section"><a href="charset.html#charset-server">10.3.2 サーバー文字セットおよび照合順序</a></span></dt><dt><span class="section"><a href="charset.html#charset-database">10.3.3 データベース文字セットおよび照合順序</a></span></dt><dt><span class="section"><a href="charset.html#charset-table">10.3.4 テーブル文字セットおよび照合順序</a></span></dt><dt><span class="section"><a href="charset.html#charset-column">10.3.5 カラム文字セットおよび照合順序</a></span></dt><dt><span class="section"><a href="charset.html#charset-literal">10.3.6 文字列リテラルの文字セットおよび照合順序</a></span></dt><dt><span class="section"><a href="charset.html#charset-national">10.3.7 各国語文字セット</a></span></dt><dt><span class="section"><a href="charset.html#charset-introducer">10.3.8 文字セットイントロデューサ</a></span></dt><dt><span class="section"><a href="charset.html#charset-examples">10.3.9 文字セットと照合順序の割り当ての例</a></span></dt><dt><span class="section"><a href="charset.html#charset-compatibility">10.3.10 ほかの DBMS との互換性</a></span></dt></dl></div><p>
      サーバー、データベース、テーブル、カラムの 4 つのレベルで、文字セットと照合順序のデフォルト設定が用意されています。 以降のセクションの説明は複雑に思われますが、実際、複数レベルのデフォルト設定によって自然で明白な結果が得られることがわかっています。 
    </p><p>
      <code class="literal">CHARACTER SET</code> は文字セットを指定する句で使用します。 <code class="literal">CHARSET</code> は、<code class="literal">CHARACTER SET</code> のシノニムとして使用できます。 
    </p><p>
      文字セットの問題は、データストレージだけではなく、クライアントプログラムと MySQL Server との通信にも影響を与えます。 デフォルトと異なる文字セットを使用してクライアントプログラムとサーバー間の通信を行う場合、どの文字セットを使用するのかを示す必要があります。 たとえば、<code class="literal">utf8mb4</code> Unicode 文字セットを使用するには、サーバーへの接続後に次のステートメントを発行します: 
    </p><pre class="programlisting">SET NAMES 'utf8mb4';
</pre><p>
      クライアント/サーバー間の通信に関する文字セット関連の問題の詳細は、<a class="xref" href="charset.html#charset-connection" title="10.4 接続文字セットおよび照合順序">セクション10.4「接続文字セットおよび照合順序」</a>を参照してください。
    </p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="charset-collation-names"></a>10.3.1 照合の命名規則</h3></div></div></div><a class="indexterm" name="idm46723733740352"></a><p>
        MySQL 照合順序名は、次の規則に従います:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            照合順序名は、関連付けられている文字セットの名前で始まり、通常は、他の照合順序特性を示す 1 つ以上の接尾辞が続きます。 たとえば、<code class="literal">utf8mb4_general_ci</code> と <code class="literal">latin1_swedish_ci</code> は、それぞれ <code class="literal">utf8mb4</code> と <code class="literal">latin1</code> の文字セットの照合順序です。 <code class="literal">binary</code> 文字セットには、接尾辞のない単一の照合順序 (<code class="literal">binary</code> とも呼ばれる) があります。 
          </p></li><li class="listitem"><p>
            言語固有の照合には、ロケールコードまたは言語名が含まれます。 たとえば、トルコ語とハンガリー語のルールをそれぞれ使用して、<code class="literal">utf8mb4</code> 文字セットの <code class="literal">utf8mb4_tr_0900_ai_ci</code> および <code class="literal">utf8mb4_hu_0900_ai_ci</code> ソート文字をソートします。<code class="literal">utf8mb4_turkish_ci</code> と <code class="literal">utf8mb4_hungarian_ci</code> は似ていますが、Unicode 照合アルゴリズムの新しいバージョンに基づいています。 
          </p></li><li class="listitem"><p>
            照合接尾辞は、照合で大/小文字が区別されるか、アクセントが区別されるか、またはカナが区別されるか (またはその一部の組合せ)、あるいはバイナリかを示します。 次のテーブルに、これらの特性を示すために使用される接尾辞を示します。 
          </p><a class="indexterm" name="idm46723733725600"></a><a class="indexterm" name="idm46723733724080"></a><a class="indexterm" name="idm46723733722032"></a><a class="indexterm" name="idm46723733720656"></a><a class="indexterm" name="idm46723733718608"></a><a class="indexterm" name="idm46723733717232"></a><a class="indexterm" name="idm46723733715184"></a><a class="indexterm" name="idm46723733713808"></a><a class="indexterm" name="idm46723733711760"></a><a class="indexterm" name="idm46723733710384"></a><a class="indexterm" name="idm46723733708336"></a><a class="indexterm" name="idm46723733706944"></a><div class="table"><a name="charset-collation-sensitivity-suffixes"></a><p class="title"><b>表 10.1 照合サフィクスの意味</b></p><div class="table-contents"><table summary="Collation suffixes that indicate lettercase sensitivity, accent sensitivity, kana sensitivity, binary."><col style="width=20%"><col style="width=80%"><thead><tr>
                <th>サフィックス</th>
                <th>意味</th>
              </tr></thead><tbody><tr>
                <td><code class="literal">_ai</code></td>
                <td>アクセントを区別しない</td>
              </tr><tr>
                <td><code class="literal">_as</code></td>
                <td>アクセントを区別する</td>
              </tr><tr>
                <td><code class="literal">_ci</code></td>
                <td>大文字小文字を区別しない</td>
              </tr><tr>
                <td><code class="literal">_cs</code></td>
                <td>Case-sensitive</td>
              </tr><tr>
                <td><code class="literal">_ks</code></td>
                <td>カナを区別する</td>
              </tr><tr>
                <td><code class="literal">_bin</code></td>
                <td>バイナリ</td>
              </tr></tbody></table></div></div><br class="table-break"><p>
            アクセントの区別を指定しない非バイナリ照合順序名の場合、大文字と小文字の区別によって決定されます。 照合名に<code class="literal">_ai</code> または<code class="literal">_as</code> が含まれていない場合、名前に含まれる<code class="literal">_ci</code> は<code class="literal">_ai</code> を意味し、名前に含まれる<code class="literal">_cs</code> は<code class="literal">_as</code> を意味します。 たとえば、<code class="literal">latin1_general_ci</code> では、大/小文字が明示的に区別されず、暗黙的にアクセントが区別されません。<code class="literal">latin1_general_cs</code> では、明示的に大/小文字が区別され、暗黙的にアクセントが区別されます。<code class="literal">utf8mb4_0900_ai_ci</code> では、大/小文字が明示的に区別されず、アクセントも区別されません。 
          </p><p>
            日本語照合の場合、<code class="literal">_ks</code> 接尾辞は照合順序がカタカナに依存することを示します。つまり、カタカナ文字とひらがな文字を区別します。 <code class="literal">_ks</code> 接尾辞のない日本語照合は、カナに依存せず、カタカナ文字とひらがな文字をソート用に同等に扱います。 
          </p><p>
            <code class="literal">binary</code> 文字セットの <code class="literal">binary</code> 照合順序の場合、比較は数値バイト値に基づきます。 非バイナリ文字セットの<code class="literal">_bin</code> 照合の場合、比較は、マルチバイト文字のバイト値とは異なる数値文字コード値に基づきます。 <code class="literal">binary</code> 文字セットの <code class="literal">binary</code> 照合順序と非バイナリ文字セットの<code class="literal">_bin</code> 照合順序の違いについては、<a class="xref" href="charset.html#charset-binary-collations" title="10.8.5 バイナリ照合順序と_bin 照合順序">セクション10.8.5「バイナリ照合順序と_bin 照合順序」</a> を参照してください。 
          </p></li><li class="listitem"><p>
            Unicode 文字セットの照合順序名には、照合順序の基になる Unicode 照合アルゴリズム (UCA) のバージョンを示すバージョン番号を含めることができます。 名前にバージョン番号が含まれていない UCA ベースの照合では、version-4.0.0 UCA の重みキーが使用されます。 例: 
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <code class="literal">utf8mb4_0900_ai_ci</code> は UCA 9.0.0 の重みキー (<a class="ulink" href="http://www.unicode.org/Public/UCA/9.0.0/allkeys.txt" target="_top">http://www.unicode.org/Public/UCA/9.0.0/allkeys.txt</a>) に基づいています。
              </p></li><li class="listitem"><p>
                <code class="literal">utf8mb4_unicode_520_ci</code> は UCA 5.2.0 の重みキー (<a class="ulink" href="http://www.unicode.org/Public/UCA/5.2.0/allkeys.txt" target="_top">http://www.unicode.org/Public/UCA/5.2.0/allkeys.txt</a>) に基づいています。
              </p></li><li class="listitem"><p>
                <code class="literal">utf8mb4_unicode_ci</code> (バージョン名なし) は UCA 4.0.0 重みキー (<a class="ulink" href="http://www.unicode.org/Public/UCA/4.0.0/allkeys-4.0.0.txt" target="_top">http://www.unicode.org/Public/UCA/4.0.0/allkeys-4.0.0.txt</a>) に基づいています。
              </p></li></ul></div></li><li class="listitem"><p>
            Unicode 文字セットの場合、<code class="literal"><em class="replaceable"><code>xxx</code></em>_general_mysql500_ci</code> 照合順序では、元の <code class="literal"><em class="replaceable"><code>xxx</code></em>_general_ci</code> 照合順序の 5.1.24 以前の順序が保持され、MySQL 5.1.24 より前に作成されたテーブルのアップグレードが許可されます (Bug #27877)。
          </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="charset-server"></a>10.3.2 サーバー文字セットおよび照合順序</h3></div></div></div><p>
        MySQL Server にはサーバー文字セットとサーバー照合順序があります。 デフォルトでは、これらは <code class="literal">utf8mb4</code> および <code class="literal">utf8mb4_0900_ai_ci</code> ですが、サーバーの起動時にコマンドラインまたはオプションファイルで明示的に設定し、実行時に変更できます。 
      </p><p>
        サーバー文字セットおよび照合順序は最初、<span class="command"><strong>mysqld</strong></span> の起動時に使用するオプションに依存します。 文字セットに <code class="option">--character-set-server</code> を使用できます。 これに加え、照合順序に <code class="option">--collation-server</code> を追加できます。 文字セットを指定しない場合は、<code class="option">--character-set-server=utf8mb4</code> と同じです。 文字セット (<code class="literal">utf8mb4</code> など) のみを指定し、照合順序を指定しない場合は、<code class="literal">utf8mb4_0900_ai_ci</code> が <code class="literal">utf8mb4</code> のデフォルト照合順序であるため、<code class="option">--character-set-server=utf8mb4</code> <code class="option">--collation-server=utf8mb4_0900_ai_ci</code> と同じです。 したがって、次の 3 つのコマンドを実行した結果はいずれも同じになります。 
      </p><pre class="programlisting">mysqld
mysqld --character-set-server=utf8mb4
mysqld --character-set-server=utf8mb4 \
  --collation-server=utf8mb4_0900_ai_ci
</pre><p>
        設定を変更する手段の 1 つは再コンパイルです。 ソースから構築するときに、デフォルトのサーバー文字セットおよび照合順序を変更するには、<span class="command"><strong>CMake</strong></span> の <code class="option">DEFAULT_CHARSET</code> および <code class="option">DEFAULT_COLLATION</code> オプションを使用します。 例: 
      </p><pre class="programlisting">cmake . -DDEFAULT_CHARSET=latin1
</pre><p>
        または:
      </p><pre class="programlisting">cmake . -DDEFAULT_CHARSET=latin1 \
  -DDEFAULT_COLLATION=latin1_german1_ci
</pre><p>
        <span class="command"><strong>mysqld</strong></span> と <span class="command"><strong>CMake</strong></span> の両方は、文字セットと照合順序の組み合わせが有効であることを検証します。 組み合わせが有効でない場合、各プログラムによってエラーメッセージが表示され、強制終了されます。 
      </p><p>
        サーバー文字セットおよび照合順序は、データベース文字セットおよび照合順序が <code class="literal">CREATE DATABASE</code> ステートメントで指定されていない場合にデフォルト値として使用されます。 これらにほかの用途はありません。 
      </p><p>
        現在のサーバー文字セットおよび照合順序は、<code class="literal">character_set_server</code> および <code class="literal">collation_server</code> システム変数の値で判別できます。 これらの変数は実行時に変更できます。 
      </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="charset-database"></a>10.3.3 データベース文字セットおよび照合順序</h3></div></div></div><p>
        各データベースにはデータベース文字セットとデータベース照合順序があります。 <code class="literal">CREATE DATABASE</code> および <code class="literal">ALTER DATABASE</code> ステートメントには、データベース文字セットおよび照合順序を指定するためのオプション句があります。 
      </p><pre class="programlisting">CREATE DATABASE <em class="replaceable"><code>db_name</code></em>
    [[DEFAULT] CHARACTER SET <em class="replaceable"><code>charset_name</code></em>]
    [[DEFAULT] COLLATE <em class="replaceable"><code>collation_name</code></em>]

ALTER DATABASE <em class="replaceable"><code>db_name</code></em>
    [[DEFAULT] CHARACTER SET <em class="replaceable"><code>charset_name</code></em>]
    [[DEFAULT] COLLATE <em class="replaceable"><code>collation_name</code></em>]
</pre><p>
        <code class="literal">SCHEMA</code> というキーワードは <code class="literal">DATABASE</code> の代わりに使用できます。
      </p><p>
        <code class="literal">CHARACTER SET</code> および <code class="literal">COLLATE</code> 句を使用すると、文字セットと照合順序が異なる複数のデータベースを同一の MySQL Server に作成できます。
      </p><p>
        データベースオプションはデータディクショナリに格納され、<code class="literal">INFORMATION_SCHEMA.SCHEMATA</code> テーブルをチェックして調べることができます。
      </p><p>
        例:
      </p><pre class="programlisting">CREATE DATABASE <em class="replaceable"><code>db_name</code></em> CHARACTER SET latin1 COLLATE latin1_swedish_ci;
</pre><p>
        MySQL では、データベース文字セットとデータベース照合順序が次のように選択されます。
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">CHARACTER SET <em class="replaceable"><code>charset_name</code></em></code> と <code class="literal">COLLATE <em class="replaceable"><code>collation_name</code></em></code> の両方が指定されている場合、文字セット <em class="replaceable"><code>charset_name</code></em> と照合順序 <em class="replaceable"><code>collation_name</code></em> が使用されます。
          </p></li><li class="listitem"><p>
            <code class="literal">CHARACTER SET <em class="replaceable"><code>charset_name</code></em></code> が <code class="literal">COLLATE</code> なしで指定されている場合、文字セット <em class="replaceable"><code>charset_name</code></em> とそのデフォルトの照合順序が使用されます。 各文字セットのデフォルトの照合順序を確認するには、<code class="literal">SHOW CHARACTER SET</code> ステートメントを使用するか、<code class="literal">INFORMATION_SCHEMA</code> <code class="literal">CHARACTER_SETS</code> テーブルをクエリーします。 
          </p></li><li class="listitem"><p>
            <code class="literal">COLLATE <em class="replaceable"><code>collation_name</code></em></code> が <code class="literal">CHARACTER SET</code> なしで指定されている場合は、<em class="replaceable"><code>collation_name</code></em> および照合 <em class="replaceable"><code>collation_name</code></em> に関連付けられた文字セットが使用されます。
          </p></li><li class="listitem"><p>
            それ以外の場合 (<code class="literal">CHARACTER SET</code> も <code class="literal">COLLATE</code> も指定されていない場合)、サーバー文字セットとサーバー照合順序が使用されます。
          </p></li></ul></div><p>
        デフォルトのデータベースに対する文字セットと照合順序は、<code class="literal">character_set_database</code> および <code class="literal">collation_database</code> システム変数の値から判別できます。 デフォルトのデータベースが変わるたびに、サーバーはこれらの変数を設定します。 デフォルトのデータベースがない場合、変数は、<code class="literal">character_set_server</code> および <code class="literal">collation_server</code> という対応するサーバーレベルのシステム変数と同値になります。 
      </p><p>
        特定のデータベースのデフォルト文字セットおよび照合順序を確認するには、次のステートメントを使用します。
      </p><pre class="programlisting">USE <em class="replaceable"><code>db_name</code></em>;
SELECT @@character_set_database, @@collation_database;
</pre><p>
        また、デフォルトのデータベースを変更しないで値を表示するには、次のステートメントを使用します。
      </p><pre class="programlisting">SELECT DEFAULT_CHARACTER_SET_NAME, DEFAULT_COLLATION_NAME
FROM INFORMATION_SCHEMA.SCHEMATA WHERE SCHEMA_NAME = '<em class="replaceable"><code>db_name</code></em>';
</pre><p>
        データベース文字セットおよび照合順序は、サーバー操作の次の側面に影響します。
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">CREATE TABLE</code> ステートメントでは、テーブル文字セットおよび照合順序が指定されていない場合、データベース文字セットおよび照合順序がテーブル定義のデフォルト値として使用されます。 これをオーバーライドするには、<code class="literal">CHARACTER SET</code> および <code class="literal">COLLATE</code> テーブルオプションを明示的に指定します。 
          </p></li><li class="listitem"><p>
            <code class="literal">CHARACTER SET</code> 句を含まない <code class="literal">LOAD DATA</code> ステートメントでは、サーバーは、<code class="literal">character_set_database</code> システム変数によって示された文字セットを使用して、ファイル内の情報を解釈します。 これをオーバーライドするには、<code class="literal">CHARACTER SET</code> 句を明示的に指定します。 
          </p></li><li class="listitem"><p>
            ストアドルーチン (プロシージャおよびファンクション) の場合、宣言に <code class="literal">CHARACTER SET</code> または <code class="literal">COLLATE</code> 属性が含まれていない文字データパラメータの文字セットおよび照合順序として、ルーチン作成時に有効なデータベース文字セットおよび照合順序が使用されます。 これをオーバーライドするには、<code class="literal">CHARACTER SET</code> および <code class="literal">COLLATE</code> を明示的に指定します。 
          </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="charset-table"></a>10.3.4 テーブル文字セットおよび照合順序</h3></div></div></div><p>
        各テーブルにはテーブル文字セットとテーブル照合順序があります。 <code class="literal">CREATE TABLE</code> および <code class="literal">ALTER TABLE</code> ステートメントには、テーブル文字セットおよび照合順序を指定するためのオプション句があります。 
      </p><pre class="programlisting">CREATE TABLE <em class="replaceable"><code>tbl_name</code></em> (<em class="replaceable"><code>column_list</code></em>)
    [[DEFAULT] CHARACTER SET <em class="replaceable"><code>charset_name</code></em>]
    [COLLATE <em class="replaceable"><code>collation_name</code></em>]]

ALTER TABLE <em class="replaceable"><code>tbl_name</code></em>
    [[DEFAULT] CHARACTER SET <em class="replaceable"><code>charset_name</code></em>]
    [COLLATE <em class="replaceable"><code>collation_name</code></em>]
</pre><p>
        例:
      </p><pre class="programlisting">CREATE TABLE t1 ( ... )
CHARACTER SET latin1 COLLATE latin1_danish_ci;
</pre><p>
        MySQL では、テーブル文字セットとテーブル照合順序が次のように選択されます。
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">CHARACTER SET <em class="replaceable"><code>charset_name</code></em></code> と <code class="literal">COLLATE <em class="replaceable"><code>collation_name</code></em></code> の両方が指定されている場合、文字セット <em class="replaceable"><code>charset_name</code></em> と照合順序 <em class="replaceable"><code>collation_name</code></em> が使用されます。
          </p></li><li class="listitem"><p>
            <code class="literal">CHARACTER SET <em class="replaceable"><code>charset_name</code></em></code> が <code class="literal">COLLATE</code> なしで指定されている場合、文字セット <em class="replaceable"><code>charset_name</code></em> とそのデフォルトの照合順序が使用されます。 各文字セットのデフォルトの照合順序を確認するには、<code class="literal">SHOW CHARACTER SET</code> ステートメントを使用するか、<code class="literal">INFORMATION_SCHEMA</code> <code class="literal">CHARACTER_SETS</code> テーブルをクエリーします。 
          </p></li><li class="listitem"><p>
            <code class="literal">COLLATE <em class="replaceable"><code>collation_name</code></em></code> が <code class="literal">CHARACTER SET</code> なしで指定されている場合は、<em class="replaceable"><code>collation_name</code></em> および照合 <em class="replaceable"><code>collation_name</code></em> に関連付けられた文字セットが使用されます。
          </p></li><li class="listitem"><p>
            それ以外の場合 (<code class="literal">CHARACTER SET</code> も <code class="literal">COLLATE</code> も指定されていない場合)、データベース文字セットと照合順序が使用されます。
          </p></li></ul></div><p>
        個々のカラム定義でカラム文字セットおよび照合順序が指定されていない場合は、テーブル文字セットおよび照合順序がカラム定義のデフォルト値として使用されます。 テーブル文字セットおよび照合順序は MySQL の拡張機能です。このような機能は標準 SQL には存在しません。 
      </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="charset-column"></a>10.3.5 カラム文字セットおよび照合順序</h3></div></div></div><p>
        すべての<span class="quote">「<span class="quote">「文字型」</span>」</span>カラム (<code class="literal">CHAR</code>、<code class="literal">VARCHAR</code>、<code class="literal">TEXT</code> 型またはシノニム型のカラム) には、カラム文字セットおよびカラム照合順序があります。 <code class="literal">CREATE TABLE</code> および <code class="literal">ALTER TABLE</code> のカラム定義構文には、カラム文字セットおよび照合順序を指定するためのオプション句があります。 
      </p><pre class="programlisting"><em class="replaceable"><code>col_name</code></em> {CHAR | VARCHAR | TEXT} (<em class="replaceable"><code>col_length</code></em>)
    [CHARACTER SET <em class="replaceable"><code>charset_name</code></em>]
    [COLLATE <em class="replaceable"><code>collation_name</code></em>]
</pre><p>
        これらの句は、<code class="literal">ENUM</code> および <code class="literal">SET</code> カラムにも使用できます。
      </p><pre class="programlisting"><em class="replaceable"><code>col_name</code></em> {ENUM | SET} (<em class="replaceable"><code>val_list</code></em>)
    [CHARACTER SET <em class="replaceable"><code>charset_name</code></em>]
    [COLLATE <em class="replaceable"><code>collation_name</code></em>]
</pre><p>
        例:
      </p><pre class="programlisting">CREATE TABLE t1
(
    col1 VARCHAR(5)
      CHARACTER SET latin1
      COLLATE latin1_german1_ci
);

ALTER TABLE t1 MODIFY
    col1 VARCHAR(5)
      CHARACTER SET latin1
      COLLATE latin1_swedish_ci;
</pre><p>
        MySQL では、カラム文字セットとカラム照合順序が次のように選択されます。
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">CHARACTER SET <em class="replaceable"><code>charset_name</code></em></code> と <code class="literal">COLLATE <em class="replaceable"><code>collation_name</code></em></code> の両方が指定されている場合、文字セット <em class="replaceable"><code>charset_name</code></em> と照合順序 <em class="replaceable"><code>collation_name</code></em> が使用されます。
          </p><pre class="programlisting">CREATE TABLE t1
(
    col1 CHAR(10) CHARACTER SET utf8 COLLATE utf8_unicode_ci
) CHARACTER SET latin1 COLLATE latin1_bin;
</pre><p>
            カラムに対して文字セットと照合順序が指定されているので、それらが使用されます。 このカラムには、文字セット <code class="literal">utf8</code> と照合順序 <code class="literal">utf8_unicode_ci</code> があります。 
          </p></li><li class="listitem"><p>
            <code class="literal">CHARACTER SET <em class="replaceable"><code>charset_name</code></em></code> が <code class="literal">COLLATE</code> なしで指定されている場合、文字セット <em class="replaceable"><code>charset_name</code></em> とそのデフォルトの照合順序が使用されます。
          </p><pre class="programlisting">CREATE TABLE t1
(
    col1 CHAR(10) CHARACTER SET utf8
) CHARACTER SET latin1 COLLATE latin1_bin;
</pre><p>
            カラムに対して文字セットは指定されていますが、照合順序は指定されていません。 このカラムには、文字セット <code class="literal">utf8</code> と、<code class="literal">utf8</code> のデフォルトの照合順序である <code class="literal">utf8_general_ci</code> があります。 各文字セットのデフォルトの照合順序を確認するには、<code class="literal">SHOW CHARACTER SET</code> ステートメントを使用するか、<code class="literal">INFORMATION_SCHEMA</code> <code class="literal">CHARACTER_SETS</code> テーブルをクエリーします。 
          </p></li><li class="listitem"><p>
            <code class="literal">COLLATE <em class="replaceable"><code>collation_name</code></em></code> が <code class="literal">CHARACTER SET</code> なしで指定されている場合は、<em class="replaceable"><code>collation_name</code></em> および照合 <em class="replaceable"><code>collation_name</code></em> に関連付けられた文字セットが使用されます。
          </p><pre class="programlisting">CREATE TABLE t1
(
    col1 CHAR(10) COLLATE utf8_polish_ci
) CHARACTER SET latin1 COLLATE latin1_bin;
</pre><p>
            カラムに対して照合順序は指定されていますが、文字セットは指定されていません。 このカラムには照合順序 <code class="literal">utf8_polish_ci</code> があり、この照合順序に関連付けられた文字セットである <code class="literal">utf8</code> があります。 
          </p></li><li class="listitem"><p>
            それ以外の場合 (<code class="literal">CHARACTER SET</code> も <code class="literal">COLLATE</code> も指定されていない場合)、テーブルの文字セットと照合順序が使用されます。
          </p><pre class="programlisting">CREATE TABLE t1
(
    col1 CHAR(10)
) CHARACTER SET latin1 COLLATE latin1_bin;
</pre><p>
            カラムに文字セットも照合順序も指定されていないため、テーブルのデフォルトが使用されます。 このカラムには、文字セット <code class="literal">latin1</code> と照合順序 <code class="literal">latin1_bin</code> があります。 
          </p></li></ul></div><p>
        <code class="literal">CHARACTER SET</code> および <code class="literal">COLLATE</code> 句は標準 SQL です。
      </p><p>
        <code class="literal">ALTER TABLE</code> を使用して、ある文字セットから別の文字セットにカラムを変換する場合、MySQL はデータ値をマップしようとしますが、文字セットに互換性がない場合、データの損失が生じる可能性があります。
      </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="charset-literal"></a>10.3.6 文字列リテラルの文字セットおよび照合順序</h3></div></div></div><p>
        各文字列リテラルには文字セットと照合順序があります。
      </p><p>
        単純なステートメント <code class="literal">SELECT '<em class="replaceable"><code>string</code></em>'</code>の場合、文字列には、<code class="literal">character_set_connection</code> および <code class="literal">collation_connection</code> システム変数によって定義された接続のデフォルトの文字セットと照合順序が含まれます。
      </p><p>
        文字列リテラルには、特定の文字セットおよび照合順序を使用する文字列として指定するために、オプションの文字セットイントロデューサおよび <code class="literal">COLLATE</code> 句を含めることができます:
      </p><a class="indexterm" name="idm46723733487008"></a><a class="indexterm" name="idm46723733484816"></a><pre class="programlisting">[_<em class="replaceable"><code>charset_name</code></em>]'<em class="replaceable"><code>string</code></em>' [COLLATE <em class="replaceable"><code>collation_name</code></em>]
</pre><p>
        <code class="literal">_<em class="replaceable"><code>charset_name</code></em></code> 式は正式には<span class="emphasis"><em>イントロデューサ</em></span>と呼ばれます。 パーサーに<span class="quote">「<span class="quote">「後続の文字列が文字セット <em class="replaceable"><code>charset_name</code></em> を使用する」</span>」</span>ことを通知します。 イントロデューサは、<code class="literal">CONVERT()</code> のように文字列をイントロデューサ文字セットに変更しません。 パディングは発生する可能性がありますが、文字列値は変更されません。 イントロデューサは単なる信号です。 <a class="xref" href="charset.html#charset-introducer" title="10.3.8 文字セットイントロデューサ">セクション10.3.8「文字セットイントロデューサ」</a>を参照してください。 
      </p><p>
        例:
      </p><pre class="programlisting">SELECT 'abc';
SELECT _latin1'abc';
SELECT _binary'abc';
SELECT _utf8mb4'abc' COLLATE utf8mb4_danish_ci;
</pre><p>
        文字セットイントロデューサと <code class="literal">COLLATE</code> 句は、標準 SQL 仕様に基づいて実装されています。
      </p><p>
        MySQL は、次の方法で文字列リテラルの文字セットおよび照合順序を決定します:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <em class="replaceable"><code>_charset_name</code></em> と <code class="literal">COLLATE <em class="replaceable"><code>collation_name</code></em></code> の両方が指定されている場合、文字セット <em class="replaceable"><code>charset_name</code></em> と照合順序 <em class="replaceable"><code>collation_name</code></em> が使用されます。<em class="replaceable"><code>collation_name</code></em> は、<em class="replaceable"><code>charset_name</code></em> に対して許可された照合である必要があります。
          </p></li><li class="listitem"><p>
            <em class="replaceable"><code>_charset_name</code></em> が指定されているが、<code class="literal">COLLATE</code> が指定されていない場合は、文字セット <em class="replaceable"><code>charset_name</code></em> とそのデフォルトの照合順序が使用されます。 各文字セットのデフォルトの照合順序を確認するには、<code class="literal">SHOW CHARACTER SET</code> ステートメントを使用するか、<code class="literal">INFORMATION_SCHEMA</code> <code class="literal">CHARACTER_SETS</code> テーブルをクエリーします。 
          </p></li><li class="listitem"><p>
            <em class="replaceable"><code>_charset_name</code></em> は指定されていないが、<code class="literal">COLLATE <em class="replaceable"><code>collation_name</code></em></code> が指定されている場合は、<code class="literal">character_set_connection</code> システム変数および照合 <em class="replaceable"><code>collation_name</code></em> によって指定された接続のデフォルト文字セットが使用されます。<em class="replaceable"><code>collation_name</code></em> は、接続のデフォルト文字セットに対して許可された照合順序である必要があります。
          </p></li><li class="listitem"><p>
            それ以外の場合 (<em class="replaceable"><code>_charset_name</code></em> も <code class="literal">COLLATE <em class="replaceable"><code>collation_name</code></em></code> も指定されていない場合)、<code class="literal">character_set_connection</code> および <code class="literal">collation_connection</code> システム変数によって指定された接続のデフォルトの文字セットと照合順序が使用されます。
          </p></li></ul></div><p>
        例:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">latin1</code> 文字セットと <code class="literal">latin1_german1_ci</code> 照合順序を持つ非バイナリ文字列:
          </p><pre class="programlisting">SELECT _latin1'Müller' COLLATE latin1_german1_ci;
</pre></li><li class="listitem"><p>
            <code class="literal">utf8mb4</code> 文字セットとそのデフォルトの照合順序 (つまり、<code class="literal">utf8mb4_general_ci</code>) を持つ非バイナリ文字列:
          </p><pre class="programlisting">SELECT _utf8mb4'Müller';
</pre></li><li class="listitem"><p>
            <code class="literal">binary</code> 文字セットとそのデフォルト照合順序 (<code class="literal">binary</code>) を持つバイナリ文字列:
          </p><pre class="programlisting">SELECT _binary'Müller';
</pre></li><li class="listitem"><p>
            接続のデフォルト文字セットおよび <code class="literal">utf8mb4_general_ci</code> 照合順序を持つ非バイナリ文字列 (接続文字セットが <code class="literal">utf8mb4</code> でない場合は失敗します):
          </p><pre class="programlisting">SELECT 'Müller' COLLATE utf8mb4_general_ci;
</pre></li><li class="listitem"><p>
            文字列に接続デフォルト文字セットおよび照合順序が指定されている場合
          </p><pre class="programlisting">SELECT 'Müller';
</pre></li></ul></div><p>
        イントロデューサは、次の文字列の文字セットを示しますが、パーサーが文字列内でエスケープ処理を実行する方法は変更しません。 エスケープは常に、<code class="literal">character_set_connection</code> で指定された文字セットに従ってパーサーが解釈します。 
      </p><p>
        次の例は、イントロデューサが存在する場合でも、<code class="literal">character_set_connection</code> を使用して、エスケープ処理が行われることを示します。 例では、<code class="literal">SET NAMES</code> (<a class="xref" href="charset.html#charset-connection" title="10.4 接続文字セットおよび照合順序">セクション10.4「接続文字セットおよび照合順序」</a>で説明しているように、<code class="literal">character_set_connection</code> を変更します) を使用し、正確な文字列の内容を確認できるように <code class="literal">HEX()</code> 関数を使用して結果の文字列を表示します。 
      </p><p>
        例 1:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET NAMES latin1;</code></strong>
mysql&gt; <strong class="userinput"><code>SELECT HEX('à\n'), HEX(_sjis'à\n');</code></strong>
+------------+-----------------+
| HEX('à\n')  | HEX(_sjis'à\n')  |
+------------+-----------------+
| E00A       | E00A            |
+------------+-----------------+
</pre><p>
        ここでは、<code class="literal">à</code> (16 進数値 <code class="literal">E0</code>) の後に、改行のエスケープシーケンスである<code class="literal">\n</code> が続きます。 エスケープシーケンスは、<code class="literal">latin1</code> の <code class="literal">character_set_connection</code> 値を使用して解釈され、リテラル改行 (16 進数値 <code class="literal">0A</code>) が生成されます。 これは 2 番目の文字列にも行われます。 つまり、<code class="literal">_sjis</code> イントロデューサはパーサーエスケープ処理には影響しません。 
      </p><p>
        例 2:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET NAMES sjis;</code></strong>
mysql&gt; <strong class="userinput"><code>SELECT HEX('à\n'), HEX(_latin1'à\n');</code></strong>
+------------+-------------------+
| HEX('à\n')  | HEX(_latin1'à\n')  |
+------------+-------------------+
| E05C6E     | E05C6E            |
+------------+-------------------+
</pre><p>
        ここで、<code class="literal">character_set_connection</code> は <code class="literal">sjis</code> で、<code class="literal">à</code>の順序の後に<code class="literal">\</code> (16 進数値 <code class="literal">05</code> および <code class="literal">5C</code>) が続く文字セットは有効なマルチバイト文字です。 したがって、文字列の最初の 2 バイトは、単一の <code class="literal">sjis</code> 文字として解釈され、<code class="literal">\</code>はエスケープ文字として解釈されません。 次の <code class="literal">n</code> (16 進数値 <code class="literal">6E</code>) は、エスケープシーケンスであるため、解釈されません。 これは、2 つ目の文字列にも当てはまります。<code class="literal">_latin1</code> イントロデューサはエスケープ処理に影響しません。 
      </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="charset-national"></a>10.3.7 各国語文字セット</h3></div></div></div><p>
        標準 SQL では、<code class="literal">NCHAR</code> または <code class="literal">NATIONAL CHAR</code> は、<code class="literal">CHAR</code> カラムで事前定義された文字セットを使用するように指定する方法として定義されています。 MySQL では、この事前定義済文字セットとして <code class="literal">utf8</code> を使用します。 たとえば、次のデータ型宣言は同等です。 
      </p><pre class="programlisting">CHAR(10) CHARACTER SET utf8
NATIONAL CHARACTER(10)
NCHAR(10)
</pre><p>
        次も同様です。
      </p><pre class="programlisting">VARCHAR(10) CHARACTER SET utf8
NATIONAL VARCHAR(10)
NVARCHAR(10)
NCHAR VARCHAR(10)
NATIONAL CHARACTER VARYING(10)
NATIONAL CHAR VARYING(10)
</pre><p>
        <code class="literal">N'<em class="replaceable"><code>literal</code></em>'</code> (または <code class="literal">n'<em class="replaceable"><code>literal</code></em>'</code>) を使用すると、各国文字セットの文字列を作成できます。 次のステートメントは同等です。 
      </p><pre class="programlisting">SELECT N'some text';
SELECT n'some text';
SELECT _utf8'some text';
</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="charset-introducer"></a>10.3.8 文字セットイントロデューサ</h3></div></div></div><a class="indexterm" name="idm46723733393376"></a><a class="indexterm" name="idm46723733391232"></a><p>
        文字列リテラル、16 進リテラルまたはビット値リテラルには、特定の文字セットおよび照合順序を使用する文字列として指定するために、オプションの文字セットイントロデューサおよび <code class="literal">COLLATE</code> 句を指定できます:
      </p><pre class="programlisting">[_<em class="replaceable"><code>charset_name</code></em>] <em class="replaceable"><code>literal</code></em> [COLLATE <em class="replaceable"><code>collation_name</code></em>]
</pre><p>
        <code class="literal">_<em class="replaceable"><code>charset_name</code></em></code> 式は正式には<span class="emphasis"><em>イントロデューサ</em></span>と呼ばれます。 パーサーに<span class="quote">「<span class="quote">「後続の文字列が文字セット <em class="replaceable"><code>charset_name</code></em> を使用する」</span>」</span>ことを通知します。 イントロデューサは、<code class="literal">CONVERT()</code> のように文字列をイントロデューサ文字セットに変更しません。 パディングは発生する可能性がありますが、文字列値は変更されません。 イントロデューサは単なる信号です。 
      </p><p>
        文字列リテラルの場合、イントロデューサと文字列の間の空白は許可されますが、オプションです。
      </p><p>
        文字セットリテラルの場合、イントロデューサは次の文字列の文字セットを示しますが、パーサーが文字列内でエスケープ処理を実行する方法は変更しません。 エスケープは常に、<code class="literal">character_set_connection</code> で指定された文字セットに従ってパーサーが解釈します。 その他の説明と例については、<a class="xref" href="charset.html#charset-literal" title="10.3.6 文字列リテラルの文字セットおよび照合順序">セクション10.3.6「文字列リテラルの文字セットおよび照合順序」</a> を参照してください。 
      </p><p>
        例:
      </p><pre class="programlisting">SELECT 'abc';
SELECT _latin1'abc';
SELECT _binary'abc';
SELECT _utf8mb4'abc' COLLATE utf8mb4_danish_ci;

SELECT _latin1 X'4D7953514C';
SELECT _utf8mb4 0x4D7953514C COLLATE utf8mb4_danish_ci;

SELECT _latin1 b'1000001';
SELECT _utf8mb4 0b1000001 COLLATE utf8mb4_danish_ci;
</pre><p>
        文字セットイントロデューサと <code class="literal">COLLATE</code> 句は、標準 SQL 仕様に基づいて実装されています。
      </p><p>
        文字列リテラルは、<code class="literal">_binary</code> イントロデューサを使用してバイナリ文字列として指定できます。 16 進数リテラルおよびビット値リテラルはデフォルトでバイナリ文字列であるため、<code class="literal">_binary</code> は許可されますが、通常は不要です。<code class="literal">_binary</code> は、16 進数リテラルまたはビットリテラルをバイナリ文字列として保持し、それ以外の場合はリテラルを数値として処理する場合に役立ちます。 たとえば、ビット操作では、MySQL 8.0 以上で数値またはバイナリ文字列引数が許可されますが、デフォルトでは 16 進数リテラルおよびビットリテラルは数値として扱われます。 このようなリテラルのバイナリ文字列コンテキストを明示的に指定するには、少なくとも次のいずれかの引数に<code class="literal">_binary</code> イントロデューサを使用します: 
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET @v1 = X'000D' | X'0BC0';</code></strong>
mysql&gt; <strong class="userinput"><code>SET @v2 = _binary X'000D' | X'0BC0';</code></strong>
mysql&gt; <strong class="userinput"><code>SELECT HEX(@v1), HEX(@v2);</code></strong>
+----------+----------+
| HEX(@v1) | HEX(@v2) |
+----------+----------+
| BCD      | 0BCD     |
+----------+----------+
</pre><p>
        両方のビット操作で表示される結果は似ていますが、<code class="literal">_binary</code> のない結果は <code class="literal">BIGINT</code> 値ですが、<code class="literal">_binary</code> の結果はバイナリ文字列です。 結果タイプが異なるため、表示される値は異なります: 数値の結果には、上位 0 桁は表示されません。 
      </p><p>
        MySQL は、文字列リテラル、16 進リテラルまたはビット値リテラルの文字セットおよび照合順序を次の方法で決定します:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <em class="replaceable"><code>_charset_name</code></em> と <code class="literal">COLLATE <em class="replaceable"><code>collation_name</code></em></code> の両方が指定されている場合、文字セット <em class="replaceable"><code>charset_name</code></em> と照合順序 <em class="replaceable"><code>collation_name</code></em> が使用されます。<em class="replaceable"><code>collation_name</code></em> は、<em class="replaceable"><code>charset_name</code></em> に対して許可された照合である必要があります。
          </p></li><li class="listitem"><p>
            <em class="replaceable"><code>_charset_name</code></em> が指定されているが、<code class="literal">COLLATE</code> が指定されていない場合は、文字セット <em class="replaceable"><code>charset_name</code></em> とそのデフォルトの照合順序が使用されます。 各文字セットのデフォルトの照合順序を確認するには、<code class="literal">SHOW CHARACTER SET</code> ステートメントを使用するか、<code class="literal">INFORMATION_SCHEMA</code> <code class="literal">CHARACTER_SETS</code> テーブルをクエリーします。 
          </p></li><li class="listitem"><p>
            <em class="replaceable"><code>_charset_name</code></em> が指定されていないが、<code class="literal">COLLATE <em class="replaceable"><code>collation_name</code></em></code> が指定されている場合:
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                文字列リテラルの場合、<code class="literal">character_set_connection</code> システム変数および照合 <em class="replaceable"><code>collation_name</code></em> によって指定された接続のデフォルト文字セットが使用されます。<em class="replaceable"><code>collation_name</code></em> は、接続のデフォルト文字セットに対して許可された照合順序である必要があります。
              </p></li><li class="listitem"><p>
                16 進数リテラルまたはビット値リテラルの場合、これらのタイプのリテラルはデフォルトでバイナリ文字列であるため、許可される照合は <code class="literal">binary</code> のみです。
              </p></li></ul></div></li><li class="listitem"><p>
            それ以外の場合 (<em class="replaceable"><code>_charset_name</code></em> も <code class="literal">COLLATE <em class="replaceable"><code>collation_name</code></em></code> も指定されていません):
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                文字列リテラルの場合は、接続のデフォルトの文字セットと、<code class="literal">character_set_connection</code> および <code class="literal">collation_connection</code> システム変数によって指定された照合順序が使用されます。
              </p></li><li class="listitem"><p>
                16 進リテラルまたはビット値リテラルの場合、文字セットおよび照合順序は <code class="literal">binary</code> です。
              </p></li></ul></div></li></ul></div><p>
        例:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">latin1</code> 文字セットと <code class="literal">latin1_german1_ci</code> 照合順序を持つ非バイナリ文字列:
          </p><pre class="programlisting">SELECT _latin1'Müller' COLLATE latin1_german1_ci;
SELECT _latin1 X'0A0D' COLLATE latin1_german1_ci;
SELECT _latin1 b'0110' COLLATE latin1_german1_ci;
</pre></li><li class="listitem"><p>
            <code class="literal">utf8mb4</code> 文字セットとそのデフォルト照合順序 (つまり、<code class="literal">utf8mb4_0900_ai_ci</code>) を持つ非バイナリ文字列:
          </p><pre class="programlisting">SELECT _utf8mb4'Müller';
SELECT _utf8mb4 X'0A0D';
SELECT _utf8mb4 b'0110';
</pre></li><li class="listitem"><p>
            <code class="literal">binary</code> 文字セットとそのデフォルト照合順序 (<code class="literal">binary</code>) を持つバイナリ文字列:
          </p><pre class="programlisting">SELECT _binary'Müller';
SELECT X'0A0D';
SELECT b'0110';
</pre><p>
            16 進リテラルおよびビット値リテラルはデフォルトでバイナリ文字列であるため、導入者は必要ありません。
          </p></li><li class="listitem"><p>
            接続のデフォルト文字セットおよび <code class="literal">utf8mb4_general_ci</code> 照合順序を持つ非バイナリ文字列 (接続文字セットが <code class="literal">utf8mb4</code> でない場合は失敗します):
          </p><pre class="programlisting">SELECT 'Müller' COLLATE utf8mb4_general_ci;
</pre><p>
            この構成 (<code class="literal">COLLATE</code> のみ) は 16 進数リテラルまたはビットリテラルでは機能しません。接続文字セットに関係なく、<code class="literal">binary</code> は <code class="literal">utf8mb4_general_ci</code> 照合と互換性がないためです。 イントロデューサがない場合に許可される <code class="literal">COLLATE</code> 句は、<code class="literal">COLLATE binary</code> のみです。 
          </p></li><li class="listitem"><p>
            文字列に接続デフォルト文字セットおよび照合順序が指定されている場合
          </p><pre class="programlisting">SELECT 'Müller';
</pre></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="charset-examples"></a>10.3.9 文字セットと照合順序の割り当ての例</h3></div></div></div><p>
        MySQL でどのようにしてデフォルトの文字セットおよび照合順序の値が決定されるかを、次の例で示します。
      </p><p>
        <span class="bold"><strong>例 1: テーブルおよびカラムの定義</strong></span>
      </p><pre class="programlisting">CREATE TABLE t1
(
    c1 CHAR(10) CHARACTER SET latin1 COLLATE latin1_german1_ci
) DEFAULT CHARACTER SET latin2 COLLATE latin2_bin;
</pre><p>
        ここでは <code class="literal">latin1</code> 文字セットと <code class="literal">latin1_german1_ci</code> 照合順序がカラムに指定されています。 この定義は明確であり、簡単明瞭です。 なお、<code class="literal">latin1</code> カラムを <code class="literal">latin2</code> テーブルに格納することに問題はありません。 
      </p><p>
        <span class="bold"><strong>例 2: テーブルおよびカラムの定義</strong></span>
      </p><pre class="programlisting">CREATE TABLE t1
(
    c1 CHAR(10) CHARACTER SET latin1
) DEFAULT CHARACTER SET latin1 COLLATE latin1_danish_ci;
</pre><p>
        ここでは、<code class="literal">latin1</code> 文字セットとデフォルト照合順序がカラムに指定されています。 当然のようですが、デフォルトの照合順序はテーブルレベルからは取得されません。 <code class="literal">latin1</code> のデフォルト照合順序は常に <code class="literal">latin1_swedish_ci</code> なので、カラム <code class="literal">c1</code> には <code class="literal">latin1_danish_ci</code> ではなく <code class="literal">latin1_swedish_ci</code> の照合順序が設定されます。 
      </p><p>
        <span class="bold"><strong>例 3: テーブルおよびカラムの定義</strong></span>
      </p><pre class="programlisting">CREATE TABLE t1
(
    c1 CHAR(10)
) DEFAULT CHARACTER SET latin1 COLLATE latin1_danish_ci;
</pre><p>
        ここでは、デフォルト文字セットとデフォルト照合順序がカラムに指定されています。 この状況では、MySQL はテーブルレベルをチェックして、カラムの文字セットおよび照合順序を特定します。 したがって、カラム <code class="literal">c1</code> の文字セットは <code class="literal">latin1</code>、照合順序は <code class="literal">latin1_danish_ci</code> となります。 
      </p><p>
        <span class="bold"><strong>例 4: データベース、テーブル、およびカラムの定義</strong></span>
      </p><pre class="programlisting">CREATE DATABASE d1
    DEFAULT CHARACTER SET latin2 COLLATE latin2_czech_ci;
USE d1;
CREATE TABLE t1
(
    c1 CHAR(10)
);
</pre><p>
        文字セットと照合順序を指定せずにカラムを作成します。 テーブルレベルの文字セットと照合順序も指定しません。 この状況では、MySQL は、データベースレベルをチェックして、テーブル設定を特定します。その後、この設定がカラム設定になります。 したがって、カラム <code class="literal">c1</code> の文字セットは <code class="literal">latin2</code>、照合順序は <code class="literal">latin2_czech_ci</code> となります。 
      </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="charset-compatibility"></a>10.3.10 ほかの DBMS との互換性</h3></div></div></div><p>
        MaxDB との互換性について、次の 2 つのステートメントは同じです。
      </p><pre class="programlisting">CREATE TABLE t1 (f1 CHAR(<em class="replaceable"><code>N</code></em>) UNICODE);
CREATE TABLE t1 (f1 CHAR(<em class="replaceable"><code>N</code></em>) CHARACTER SET ucs2);
</pre></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="charset-connection"></a>10.4 接続文字セットおよび照合順序</h2></div></div></div><a class="indexterm" name="idm46723733284384"></a><a class="indexterm" name="idm46723733282448"></a><p>
      <span class="quote">「<span class="quote">connection</span>」</span> は、クライアントプログラムがサーバーに接続したときに、サーバーと対話するセッションを開始するために行われるものです。 クライアントは、クエリーなどの SQL ステートメントをセッション接続を介して送信します。 サーバーは接続を介して、結果セットやエラーメッセージなどの応答をクライアントに送信します。 
    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="xref" href="charset.html#charset-connection-system-variables" title="接続文字セットおよび照合順序システム変数">接続文字セットおよび照合順序システム変数</a></p></li><li class="listitem"><p><a class="xref" href="charset.html#charset-connection-impermissible-client-charset" title="許可されていないクライアント文字セット">許可されていないクライアント文字セット</a></p></li><li class="listitem"><p><a class="xref" href="charset.html#charset-connection-client-configuration" title="クライアントプログラム接続文字セット構成">クライアントプログラム接続文字セット構成</a></p></li><li class="listitem"><p><a class="xref" href="charset.html#charset-connection-sql-statements" title="接続文字セット構成用の SQL ステートメント">接続文字セット構成用の SQL ステートメント</a></p></li><li class="listitem"><p><a class="xref" href="charset.html#charset-connection-error-handling" title="接続文字セットのエラー処理">接続文字セットのエラー処理</a></p></li></ul></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="charset-connection-system-variables"></a>接続文字セットおよび照合順序システム変数</h3></div></div></div><p>
        複数の文字セットおよび照合順序のシステム変数は、サーバーとのクライアントの通信に関係しています。 これらのいくつかは、これまでのセクションですでに説明されています。 
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">character_set_server</code> および <code class="literal">collation_server</code> システム変数は、サーバーの文字セットと照合順序を示します。 <a class="xref" href="charset.html#charset-server" title="10.3.2 サーバー文字セットおよび照合順序">セクション10.3.2「サーバー文字セットおよび照合順序」</a>を参照してください。 
          </p></li><li class="listitem"><p>
            <code class="literal">character_set_database</code> および <code class="literal">collation_database</code> システム変数は、デフォルトデータベースの文字セットおよび照合順序を示します。 <a class="xref" href="charset.html#charset-database" title="10.3.3 データベース文字セットおよび照合順序">セクション10.3.3「データベース文字セットおよび照合順序」</a>を参照してください。 
          </p></li></ul></div><p>
        その他の文字セットおよび照合順序システム変数は、クライアントとサーバー間の接続のトラフィックの処理に関わっています。 すべてのクライアントには、セッション固有の接続関連の文字セットおよび照合順序システム変数があります。 これらのセッションシステム変数値は接続時に初期化されますが、セッション内で変更できます。 
      </p><p>
        クライアント接続の文字セットおよび照合順序処理に関するいくつかの質問には、システム変数の観点から回答できます:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            クライアントから離れるときのステートメントの文字セットは何ですか。
          </p><p>
            サーバーは、<code class="literal">character_set_client</code> システム変数値を、クライアントが送信するステートメントの文字セットにします。
          </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
              一部の文字セットは、クライアントの文字セットとして使用できません。 <a class="xref" href="charset.html#charset-connection-impermissible-client-charset" title="許可されていないクライアント文字セット">許可されていないクライアント文字セット</a>を参照してください。 
            </p></div></li><li class="listitem"><p>
            サーバーがステートメントを受信したあと、どの文字セットに変換するべきですか。
          </p><p>
            これを確認するために、サーバーは <code class="literal">character_set_connection</code> および <code class="literal">collation_connection</code> システム変数を使用します:
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                サーバーは、クライアントによって送信されたステートメントを <code class="literal">character_set_client</code> から <code class="literal">character_set_connection</code> に変換します。 例外: <code class="literal">_utf8mb4</code> や<code class="literal">_latin2</code> などのイントロデューサを持つ文字列リテラルの場合、イントロデューサは文字セットを決定します。 <a class="xref" href="charset.html#charset-introducer" title="10.3.8 文字セットイントロデューサ">セクション10.3.8「文字セットイントロデューサ」</a>を参照してください。 
              </p></li><li class="listitem"><p>
                <code class="literal">collation_connection</code> は、リテラル文字列の比較に重要です。 カラム値と文字列を比較する場合、<code class="literal">collation_connection</code> は関係ありません。これは、カラムには照合優先度の高い独自の照合があるためです (<a class="xref" href="charset.html#charset-collation-coercibility" title="10.8.4 式での照合の強制性">セクション10.8.4「式での照合の強制性」</a> を参照)。 
              </p></li></ul></div></li><li class="listitem"><p>
            クエリー結果をクライアントに返送する前に、サーバーはどの文字セットに変換する必要がありますか。
          </p><p>
            <code class="literal">character_set_results</code> システム変数値は、サーバーがクライアントにクエリー結果を返信するときに使用する文字セットを示します。 これには、カラム値、結果メタデータ (カラム名など)、エラーメッセージなどの結果データが含まれます。 
          </p><p>
            結果セットまたはエラーメッセージの変換を実行しないようにサーバーに指示するには、<code class="literal">character_set_results</code> を <code class="literal">NULL</code> または <code class="literal">binary</code> に設定します:
          </p><pre class="programlisting">SET character_set_results = NULL;
SET character_set_results = binary;
</pre><p>
            文字セットおよびエラーメッセージの詳細は、<a class="xref" href="charset.html#charset-errors" title="10.6 エラーメッセージ文字セット">セクション10.6「エラーメッセージ文字セット」</a>を参照してください。
          </p></li></ul></div><p>
        現在のセッションに適用される文字セットおよび照合順序システム変数の値を確認するには、次のステートメントを使用します:
      </p><pre class="programlisting">SELECT * FROM performance_schema.session_variables
WHERE VARIABLE_NAME IN (
'character_set_client', 'character_set_connection',
'character_set_results', 'collation_connection'
) ORDER BY VARIABLE_NAME;
</pre><p>
        次の単純なステートメントでも接続変数が表示されますが、関連する他の変数も含まれます。 これらは、<span class="emphasis"><em>all</em></span> 文字セットおよび照合順序システム変数の表示に役立ちます: 
      </p><pre class="programlisting">SHOW SESSION VARIABLES LIKE 'character\_set\_%';
SHOW SESSION VARIABLES LIKE 'collation\_%';
</pre><p>
        クライアントは、これらの変数の設定を微調整することも、デフォルトに従うこともできます (この場合は、このセクションの残りをスキップできます)。 デフォルトを使用しない場合、<span class="emphasis"><em>サーバーへの接続ごとに</em></span>文字設定を変更する必要があります。 
      </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="charset-connection-impermissible-client-charset"></a>許可されていないクライアント文字セット</h3></div></div></div><a class="indexterm" name="idm46723733228160"></a><a class="indexterm" name="idm46723733225984"></a><a class="indexterm" name="idm46723733223856"></a><a class="indexterm" name="idm46723733221728"></a><p>
        <code class="literal">character_set_client</code> システム変数は、特定の文字セットに設定できません:
      </p><pre class="programlisting">ucs2
utf16
utf16le
utf32
</pre><p>
        これらの文字セットのいずれかをクライアント文字セットとして使用しようとすると、エラーが発生します:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET character_set_client = 'ucs2';</code></strong>
ERROR 1231 (42000): Variable 'character_set_client'
can't be set to the value of 'ucs2'
</pre><p>
        これらの文字セットのいずれかが次のコンテキストで使用されている場合、同じエラーが発生し、その結果、<code class="literal">character_set_client</code> に名前付き文字セットを設定しようとします:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <span class="command"><strong>mysql</strong></span> や <span class="command"><strong>mysqladmin</strong></span> などの MySQL クライアントプログラムで使用される <code class="option">--default-character-set=<em class="replaceable"><code>charset_name</code></em></code> コマンドオプション。
          </p></li><li class="listitem"><p>
            <code class="literal">SET NAMES '<em class="replaceable"><code>charset_name</code></em>'</code>ステートメント。
          </p></li><li class="listitem"><p>
            <code class="literal">SET CHARACTER SET '<em class="replaceable"><code>charset_name</code></em>'</code>ステートメント。
          </p></li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="charset-connection-client-configuration"></a>クライアントプログラム接続文字セット構成</h3></div></div></div><p>
        クライアントがサーバーに接続すると、サーバーとの通信に使用する文字セットが示されます。 (実際には、クライアントはその文字セットのデフォルトの照合順序を示し、サーバーはこの照合順序から文字セットを決定できます。) サーバーは、この情報を使用して <code class="literal">character_set_client</code>, <code class="literal">character_set_results</code>, <code class="literal">character_set_connection</code> システム変数を文字セットに設定し、<code class="literal">collation_connection</code> を文字セットのデフォルトの照合順序に設定します。 実際には、サーバーは <code class="literal">SET NAMES</code> 操作と同等の処理を実行します。 
      </p><p>
        サーバーが要求された文字セットまたは照合順序をサポートしていない場合は、サーバー文字セットおよび照合順序を使用して接続を構成します。 このフォールバック動作の詳細は、<a class="xref" href="charset.html#charset-connection-error-handling" title="接続文字セットのエラー処理">接続文字セットのエラー処理</a> を参照してください。 
      </p><p>
        <span class="command"><strong>mysql</strong></span>, <span class="command"><strong>mysqladmin</strong></span>, <span class="command"><strong>mysqlcheck</strong></span>, <span class="command"><strong>mysqlimport</strong></span> および <span class="command"><strong>mysqlshow</strong></span> クライアントプログラムは、使用するデフォルトの文字セットを次のように決定します:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            その他の情報がない場合、各クライアントはコンパイルされたデフォルト文字セット (通常は <code class="literal">utf8mb4</code>) を使用します。
          </p></li><li class="listitem"><p>
            各クライアントは、Unix システムの <code class="literal">LANG</code> または <code class="literal">LC_ALL</code> ロケール環境変数の値や Windows システムのコードページ設定など、オペレーティングシステムの設定に基づいて、使用する文字セットを自動検出できます。 ロケールが OS から利用できるシステムの場合、クライアントはコンパイル時のデフォルトを使用するのではなく、このロケールを使用してデフォルトの文字セットを設定します。 たとえば、<code class="literal">LANG</code> を <code class="literal">ru_RU.KOI8-R</code> に設定すると、<code class="literal">koi8r</code> 文字セットが使用されます。 したがってユーザーは、MySQL クライアントが使用できるように、自身の環境内でロケールを構成できます。 
          </p><p>
            OS 文字セットは、正確に一致するものがない場合は、もっとも近い MySQL 文字セットにマップされます。 一致した文字セットをサポートしていない場合、クライアントはコンパイルイ時のデフォルトを使用します。 たとえば、<code class="literal">utf8</code> および <code class="literal">utf-8</code> は <code class="literal">utf8mb4</code> にマップされ、<code class="literal">ucs2</code> は接続文字セットとしてサポートされていないため、コンパイル済のデフォルトにマップされます。 
          </p><p>
            C アプリケーションは、サーバーに接続する前に次のように <code class="literal">mysql_options()</code> を呼び出すことによって、OS 設定に基づいて文字セットの自動検出を使用できます。
          </p><pre class="programlisting">mysql_options(mysql,
              MYSQL_SET_CHARSET_NAME,
              MYSQL_AUTODETECT_CHARSET_NAME);
</pre></li><li class="listitem"><p>
            各クライアントは <code class="option">--default-character-set</code> オプションをサポートしているため、ユーザーは文字セットを明示的に指定して、それ以外の場合にクライアントが決定するデフォルトをオーバーライドできます。
          </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
              一部の文字セットは、クライアントの文字セットとして使用できません。 <code class="option">--default-character-set</code> でこれらを使用しようとすると、エラーが発生します。 <a class="xref" href="charset.html#charset-connection-impermissible-client-charset" title="許可されていないクライアント文字セット">許可されていないクライアント文字セット</a>を参照してください。 
            </p></div></li></ul></div><p>
        <span class="command"><strong>mysql</strong></span> クライアントでは、デフォルトとは異なる文字セットを使用するために、サーバーに接続するたびに <code class="literal">SET NAMES</code> ステートメントを明示的に実行できます (<a class="xref" href="charset.html#charset-connection-client-configuration" title="クライアントプログラム接続文字セット構成">クライアントプログラム接続文字セット構成</a> を参照)。 同じ結果をより簡単に得るには、オプションファイルに文字セットを指定します。 たとえば、次のオプションファイル設定では、<span class="command"><strong>mysql</strong></span> を起動するたびに、接続関連の 3 つの文字セットシステム変数が <code class="literal">koi8r</code> に設定されます: 
      </p><pre class="programlisting">[mysql]
default-character-set=koi8r
</pre><p>
        自動再接続を有効にして <span class="command"><strong>mysql</strong></span> クライアントを使用している場合は (推奨しません)、<code class="literal">SET NAMES</code> ではなく <code class="literal">charset</code> コマンドを使用することをお勧めします。 例: 
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>charset koi8r</code></strong>
Charset changed
</pre><p>
        <code class="literal">charset</code> コマンドは、<code class="literal">SET NAMES</code> ステートメントを発行し、接続の切断後に再接続するときに <span class="command"><strong>mysql</strong></span> が使用するデフォルトの文字セットも変更します。
      </p><p>
        クライアントプログラムを構成する場合は、クライアントプログラムが実行される環境も考慮する必要があります。 <a class="xref" href="charset.html#charset-applications" title="10.5 アプリケーションの文字セットおよび照合順序の構成">セクション10.5「アプリケーションの文字セットおよび照合順序の構成」</a>を参照してください。 
      </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="charset-connection-sql-statements"></a>接続文字セット構成用の SQL ステートメント</h3></div></div></div><p>
        接続が確立されると、クライアントは現在のセッションの文字セットおよび照合順序システム変数を変更できます。 これらの変数は <code class="literal">SET</code> ステートメントを使用して個別に変更できますが、接続関連の文字セットシステム変数にグループとして影響する便利なステートメントは 2 つあります: 
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">SET NAMES '<em class="replaceable"><code>charset_name</code></em>' [COLLATE '<em class="replaceable"><code>collation_name</code></em>']</code>
          </p><p>
            <code class="literal">SET NAMES</code> は、クライアントが SQL ステートメントをサーバーに送信するために使用する文字セットを示します。 したがって、<code class="literal">SET NAMES 'cp1251'</code> は、<span class="quote">「<span class="quote">このクライアントから今後受信するメッセージが文字セット <code class="literal">cp1251</code> で送信される</span>」</span>ことを、サーバーに知らせます。 また、クライアントに結果を返信するときにサーバーが使用する文字セットも指定します。 (たとえば、結果セットを生成する <code class="literal">SELECT</code> ステートメントを使用する場合、どの文字セットをカラム値に使用するかを示します。) 
          </p><p>
            <code class="literal">SET NAMES '<em class="replaceable"><code>charset_name</code></em>'</code> ステートメントは次の 3 つのステートメントと同等です。
          </p><pre class="programlisting">SET character_set_client = <em class="replaceable"><code>charset_name</code></em>;
SET character_set_results = <em class="replaceable"><code>charset_name</code></em>;
SET character_set_connection = <em class="replaceable"><code>charset_name</code></em>;
</pre><p>
            <code class="literal">character_set_connection</code> を <em class="replaceable"><code>charset_name</code></em> に設定すると、<code class="literal">collation_connection</code> も暗黙的に <em class="replaceable"><code>charset_name</code></em> のデフォルト照合順序に設定されます。 この照合順序を明示的に設定する必要はありません。 <code class="literal">collation_connection</code> に使用する特定の照合を指定するには、<code class="literal">COLLATE</code> 句を追加します: 
          </p><pre class="programlisting">SET NAMES '<em class="replaceable"><code>charset_name</code></em>' COLLATE '<em class="replaceable"><code>collation_name</code></em>'
</pre></li><li class="listitem"><p>
            <code class="literal">SET CHARACTER SET '<em class="replaceable"><code>charset_name</code></em></code>'
          </p><p>
            <code class="literal">SET CHARACTER SET</code> は <code class="literal">SET NAMES</code> と似ていますが、<code class="literal">character_set_connection</code> および <code class="literal">collation_connection</code> を <code class="literal">character_set_database</code> および <code class="literal">collation_database</code> に設定します (前述のように、デフォルトデータベースの文字セットおよび照合順序を示します)。
          </p><p>
            <code class="literal">SET CHARACTER SET <em class="replaceable"><code>charset_name</code></em></code> ステートメントは次の 3 つのステートメントと同等です。
          </p><pre class="programlisting">SET character_set_client = <em class="replaceable"><code>charset_name</code></em>;
SET character_set_results = <em class="replaceable"><code>charset_name</code></em>;
SET collation_connection = @@collation_database;
</pre><p>
            <code class="literal">collation_connection</code> を設定すると、<code class="literal">character_set_connection</code> も、関連付けられた文字セットに暗黙的に設定されます (<code class="literal">SET character_set_connection = @@character_set_database</code> の実行と同等です)。 <code class="literal">character_set_connection</code> を明示的に設定する必要はありません。 
          </p></li></ul></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
          一部の文字セットは、クライアントの文字セットとして使用できません。 <code class="literal">SET NAMES</code> または <code class="literal">SET CHARACTER SET</code> でこれらを使用しようとすると、エラーが発生します。 <a class="xref" href="charset.html#charset-connection-impermissible-client-charset" title="許可されていないクライアント文字セット">許可されていないクライアント文字セット</a>を参照してください。 
        </p></div><p>
        例: <code class="literal">column1</code> が <code class="literal">CHAR(5) CHARACTER SET latin2</code> として定義されているとします。 <code class="literal">SET NAMES</code> または <code class="literal">SET CHARACTER SET</code> を指定しない場合、<code class="literal">SELECT column1 FROM t</code> に対して、サーバーは、接続時にクライアントが指定した文字セットを使用して、<code class="literal">column1</code> のすべての値を送り返します。 一方、<code class="literal">SELECT</code> ステートメントを発行する前に <code class="literal">SET NAMES 'latin1'</code>または <code class="literal">SET CHARACTER SET 'latin1'</code>と言うと、サーバーは結果を返送する直前に <code class="literal">latin2</code> 値を <code class="literal">latin1</code> に変換します。 両方の文字セットにない文字の変換は失われる可能性があります。 
      </p></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="charset-connection-error-handling"></a>接続文字セットのエラー処理</h3></div></div></div><p>
        不適切な接続文字セットまたは照合順序を使用しようとすると、エラーが発生するか、サーバーが特定の接続のデフォルトの文字セットおよび照合順序にフォールバックする可能性があります。 このセクションでは、接続文字セットの構成時に発生する可能性のある問題について説明します。 これらの問題は、接続を確立するとき、または確立された接続内の文字セットを変更するときに発生することがあります。 
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="xref" href="charset.html#charset-connection-error-handling-connect-time" title="接続時のエラー処理">接続時のエラー処理</a></p></li><li class="listitem"><p><a class="xref" href="charset.html#charset-connection-error-handling-runtime" title="ランタイムエラー処理">ランタイムエラー処理</a></p></li></ul></div><h4><a name="charset-connection-error-handling-connect-time"></a>接続時のエラー処理</h4><p>
        一部の文字セットは、クライアント文字セットとして使用できません。<a class="xref" href="charset.html#charset-connection-impermissible-client-charset" title="許可されていないクライアント文字セット">許可されていないクライアント文字セット</a> を参照してください。 有効だがクライアント文字セットとして許可されていない文字セットを指定すると、サーバーはエラーを返します: 
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>mysql --default-character-set=ucs2</code></strong>
ERROR 1231 (42000): Variable 'character_set_client' can't be set to
the value of 'ucs2'
</pre><p>
        クライアントが認識しない文字セットを指定すると、エラーが発生します:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>mysql --default-character-set=bogus</code></strong>
mysql: Character set 'bogus' is not a compiled character set and is
not specified in the '/usr/local/mysql/share/charsets/Index.xml' file
ERROR 2019 (HY000): Can't initialize character set bogus
(path: /usr/local/mysql/share/charsets/)
</pre><p>
        クライアントが認識するがサーバーが認識しない文字セットを指定した場合、サーバーはデフォルトの文字セットおよび照合順序にフォールバックします。 サーバーが <code class="literal">latin1</code> および <code class="literal">latin1_swedish_ci</code> をデフォルトとして使用するように構成されており、<code class="literal">gb18030</code> が有効な文字セットとして認識されないとします。 <code class="option">--default-character-set=gb18030</code> を指定するクライアントはサーバーに接続できますが、結果の文字セットはクライアントが希望する文字セットではありません: 
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW SESSION VARIABLES LIKE 'character\_set\_%';</code></strong>
+--------------------------+--------+
| Variable_name            | Value  |
+--------------------------+--------+
| character_set_client     | latin1 |
| character_set_connection | latin1 |
...
| character_set_results    | latin1 |
...
+--------------------------+--------+
mysql&gt; <strong class="userinput"><code>SHOW SESSION VARIABLES LIKE 'collation_connection';</code></strong>
+----------------------+-------------------+
| Variable_name        | Value             |
+----------------------+-------------------+
| collation_connection | latin1_swedish_ci |
+----------------------+-------------------+
</pre><p>
        接続システム変数が、<code class="literal">latin1</code> および <code class="literal">latin1_swedish_ci</code> の文字セットおよび照合順序を反映するように設定されていることがわかります。 これは、サーバーがクライアント文字セットリクエストを満たすことができず、デフォルトに戻すために発生します。 
      </p><p>
        この場合、サーバーがサポートしていないため、クライアントは必要な文字セットを使用できません。 クライアントは、別の文字セットを使用するか、目的の文字セットをサポートする別のサーバーに接続する必要があります。 
      </p><p>
        同じ問題がより微妙なコンテキストで発生: クライアントがサーバーが認識する文字セットを使用するようにサーバーに指示したが、クライアント側のその文字セットのデフォルトの照合順序がサーバー側で認識されない場合。 これは、たとえば、MySQL 8.0 クライアントが <code class="literal">utf8mb4</code> をクライアント文字セットとして使用して MySQL 5.7 サーバーに接続する場合に発生します。 <code class="option">--default-character-set=utf8mb4</code> を指定するクライアントは、サーバーに接続できます。 ただし、前の例と同様に、サーバーはクライアントが要求した文字セットと照合順序ではなく、デフォルトの文字セットと照合順序にフォールバックします: 
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW SESSION VARIABLES LIKE 'character\_set\_%';</code></strong>
+--------------------------+--------+
| Variable_name            | Value  |
+--------------------------+--------+
| character_set_client     | latin1 |
| character_set_connection | latin1 |
...
| character_set_results    | latin1 |
...
+--------------------------+--------+
mysql&gt; <strong class="userinput"><code>SHOW SESSION VARIABLES LIKE 'collation_connection';</code></strong>
+----------------------+-------------------+
| Variable_name        | Value             |
+----------------------+-------------------+
| collation_connection | latin1_swedish_ci |
+----------------------+-------------------+
</pre><p>
        これが発生するのはなぜですか。 その後、<code class="literal">utf8mb4</code> は 8.0 クライアントと 5.7 サーバーに認識されるため、両方で認識されます。 この動作を理解するには、クライアントが使用する文字セットをサーバーに通知するときに、その文字セットのデフォルト照合順序をサーバーに実際に通知することを理解する必要があります。 したがって、前述の動作はファクタの組合せによって発生します: 
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">utf8mb4</code> のデフォルトの照合は、MySQL 5.7 と 8.0 (5.7 の場合は <code class="literal">utf8mb4_general_ci</code>、8.0 の場合は <code class="literal">utf8mb4_0900_ai_ci</code>) で異なります。
          </p></li><li class="listitem"><p>
            8.0 クライアントが <code class="literal">utf8mb4</code> の文字セットをリクエストすると、サーバーに送信されるものがデフォルトの 8.0 <code class="literal">utf8mb4</code> 照合 (<code class="literal">utf8mb4_0900_ai_ci</code>) になります。
          </p></li><li class="listitem"><p>
            <code class="literal">utf8mb4_0900_ai_ci</code> は MySQL 8.0 の時点でのみ実装されるため、5.7 サーバーでは認識されません。
          </p></li><li class="listitem"><p>
            5.7 サーバーは <code class="literal">utf8mb4_0900_ai_ci</code> を認識しないため、クライアント文字セットリクエストを満たすことはできず、デフォルトの文字セットおよび照合 (<code class="literal">latin1</code> および <code class="literal">latin1_swedish_ci</code>) にフォールバックします。
          </p></li></ul></div><p>
        この場合でも、クライアントは接続後に <code class="literal">SET NAMES 'utf8mb4'</code>ステートメントを発行することで <code class="literal">utf8mb4</code> を使用できます。 結果の照合は、5.7 のデフォルトの <code class="literal">utf8mb4</code> 照合 (<code class="literal">utf8mb4_general_ci</code>) です。 クライアントがさらに <code class="literal">utf8mb4_0900_ai_ci</code> の照合を必要とする場合、サーバーはその照合を認識しないため、これを実現できません。 クライアントは、別の <code class="literal">utf8mb4</code> 照合を使用するか、MySQL 8.0 以上からサーバーに接続する必要があります。 
      </p><h4><a name="charset-connection-error-handling-runtime"></a>ランタイムエラー処理</h4><p>
        確立された接続内で、クライアントは <code class="literal">SET NAMES</code> または <code class="literal">SET CHARACTER SET</code> との接続文字セットおよび照合順序の変更をリクエストできます。
      </p><p>
        一部の文字セットは、クライアント文字セットとして使用できません。<a class="xref" href="charset.html#charset-connection-impermissible-client-charset" title="許可されていないクライアント文字セット">許可されていないクライアント文字セット</a> を参照してください。 有効だがクライアント文字セットとして許可されていない文字セットを指定すると、サーバーはエラーを返します: 
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET NAMES 'ucs2';</code></strong>
ERROR 1231 (42000): Variable 'character_set_client' can't be set to
the value of 'ucs2'
</pre><p>
        サーバーが文字セット (または照合順序) を認識しない場合、エラーが発生します:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET NAMES 'bogus';</code></strong>
ERROR 1115 (42000): Unknown character set: 'bogus'

mysql&gt; <strong class="userinput"><code>SET NAMES 'utf8mb4' COLLATE 'bogus';</code></strong>
ERROR 1273 (HY000): Unknown collation: 'bogus'
</pre><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">ヒント</div><p>
          要求された文字セットがサーバーによって適用されたかどうかを確認するクライアントは、接続して結果が予想される文字セットであることを確認したあとに、次のステートメントを実行できます:
        </p><pre class="programlisting">SELECT @@character_set_client;
</pre></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="charset-applications"></a>10.5 アプリケーションの文字セットおよび照合順序の構成</h2></div></div></div><a class="indexterm" name="idm46723733038064"></a><p>
      デフォルトの MySQL 文字セットおよび照合順序 (<code class="literal">utf8mb4</code>、<code class="literal">utf8mb4_0900_ai_ci</code>) を使用してデータを格納するアプリケーションの場合、特別な構成は必要ありません。 別の文字セットまたは照合順序を使用したデータストレージが必要なアプリケーションの場合は、次の複数の方法で、文字セット情報を構成できます。 
    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          データベースごとに文字設定を指定します。 たとえば、あるデータベースを使用するアプリケーションではデフォルトの <code class="literal">utf8mb4</code> を使用し、別のデータベースを使用するアプリケーションでは <code class="literal">sjis</code> を使用できます。 
        </p></li><li class="listitem"><p>
          サーバーの起動時に文字設定を指定します。 これにより、サーバーは、ほかの調整を行わないすべてのアプリケーションに、所定の設定を使用します。 
        </p></li><li class="listitem"><p>
          ソースから MySQL を構築する場合は、構成時に文字設定を指定します。 これにより、サーバーの起動時に指定しなくても、サーバーは指定された設定をすべてのアプリケーションのデフォルトとして使用します。 
        </p></li></ul></div><p>
      異なるアプリケーションで別々の文字設定が必要な場合は、データベースごとの手法で十分対応できます。 ほとんどまたはすべてのアプリケーションで同じ文字セットを使用する場合は、サーバーの起動時または構成時に文字設定を指定する方法がもっとも便利です。 
    </p><p>
      データベースごとの手法またはサーバー起動の手法では、設定によって、データストレージの文字セットが制御されます。 アプリケーションはまた、次の手順で説明するように、クライアントとサーバー間の通信に使用する文字セットをサーバーに知らせる必要もあります。 
    </p><p>
      ここに示す例では、<code class="literal">utf8mb4</code> および <code class="literal">utf8mb4_0900_ai_ci</code> のデフォルトの代替として、特定のコンテキストで <code class="literal">latin1</code> 文字セットおよび <code class="literal">latin1_swedish_ci</code> 照合順序を使用することを前提としています。
    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><b>データベースごとに文字設定を指定します. </b>
            テーブルが特定のデフォルトの文字セットおよび照合順序をデータ記憶域に使用するようにデータベースを作成するには、次のような <code class="literal">CREATE DATABASE</code> ステートメントを使用します:
          </p><pre class="programlisting">CREATE DATABASE mydb
  CHARACTER SET latin1
  COLLATE latin1_swedish_ci;
</pre><p>
          データベースで作成されたテーブルでは、文字カラムに <code class="literal">latin1</code> および <code class="literal">latin1_swedish_ci</code> がデフォルトで使用されます。
        </p><p>
          データベースを使用するアプリケーションは、接続するたびに、サーバーへの接続を構成する必要もあります。 これを行うには、接続後に <code class="literal">SET NAMES 'latin1'</code>ステートメントを実行します。 このステートメントは、接続方法 (<span class="command"><strong>mysql</strong></span> クライアント、PHP スクリプトなど) に関係なく使用できます。 
        </p><p>
          場合によっては、必要な文字セットを別の方法で使用するように接続を構成できます。 たとえば、<span class="command"><strong>mysql</strong></span> を使用して接続するには、<code class="option">--default-character-set=latin1</code> コマンドラインオプションを指定して、<code class="literal">SET NAMES 'latin1'</code>と同じ効果を得ることができます。 
        </p><p>
          クライアント接続の構成の詳細は、<a class="xref" href="charset.html#charset-connection" title="10.4 接続文字セットおよび照合順序">セクション10.4「接続文字セットおよび照合順序」</a>を参照してください。
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
            <code class="literal">ALTER DATABASE</code> を使用してデータベースのデフォルトの文字セットまたは照合順序を変更する場合は、それらのデフォルトを使用するデータベース内の既存のストアドルーチンを削除して再作成し、新しいデフォルト値を使用する必要があります。 (ストアドルーチンでは、文字セットまたは照合順序が明示的に指定されていない場合、文字データ型を伴う変数は、データベースのデフォルトを使用します。 <a class="xref" href="sql-statements.html#create-procedure" title="13.1.17 CREATE PROCEDURE ステートメントおよび CREATE FUNCTION ステートメント">セクション13.1.17「CREATE PROCEDURE ステートメントおよび CREATE FUNCTION ステートメント」</a>を参照してください。) 
          </p></div></li><li class="listitem"><p><b>サーバーの起動時に文字設定を指定します. </b>
            サーバーの起動時に文字セットおよび照合順序を選択するには、<code class="option">--character-set-server</code> および <code class="option">--collation-server</code> オプションを使用します。 たとえば、オプションファイルでオプションを指定するには、次の行を含めます。 
          </p><pre class="programlisting">[mysqld]
character-set-server=latin1
collation-server=latin1_swedish_ci
</pre><p>
          これらの設定は、サーバー全体に適用され、任意のアプリケーションによって作成されたデータベースのデフォルトおよびこれらのデータベース内に作成されたテーブルのデフォルトとして適用されます。
        </p><p>
          前述のように、アプリケーションは引き続き、接続したあとで <code class="literal">SET NAMES</code> または同等のステートメントを使用して、その接続を構成する必要があります。 接続するクライアントごとに <code class="literal">SET NAMES</code> が自動的に実行されるように、<code class="option">--init_connect="SET NAMES 'latin1'"</code>オプションを使用してサーバーを起動することが一時的な場合があります。 ただし、<code class="literal">CONNECTION_ADMIN</code> 権限 (または非推奨の <code class="literal">SUPER</code> 権限) を持つユーザーに対して <code class="literal">init_connect</code> 値が実行されないため、これにより一貫性のない結果が生じる可能性があります。 
        </p></li><li class="listitem"><p><b>MySQL の構成時に文字設定を指定します. </b>
            ソースから MySQL を構成および構築する場合に文字セットおよび照合順序を選択するには、<code class="option">DEFAULT_CHARSET</code> および <code class="option">DEFAULT_COLLATION</code> <span class="command"><strong>CMake</strong></span> オプションを使用します:
          </p><pre class="programlisting">cmake . -DDEFAULT_CHARSET=latin1 \
  -DDEFAULT_COLLATION=latin1_swedish_ci
</pre><p>
          結果のサーバーでは、データベースおよびテーブルのデフォルトおよびクライアント接続として <code class="literal">latin1</code> および <code class="literal">latin1_swedish_ci</code> が使用されます。 <code class="option">--character-set-server</code> と <code class="option">--collation-server</code> を使用して、サーバー起動時にこれらのデフォルトを指定する必要はありません。 また、アプリケーションがサーバーに接続したあとで <code class="literal">SET NAMES</code> または同等のステートメントを使用して、その接続を構成する必要もありません。 
        </p></li></ul></div><p>
      アプリケーション用に MySQL 文字セットを構成する方法とは無関係に、これらのアプリケーションが実行する環境も考慮する必要があります。 たとえば、エディタで作成したファイルから取得した UTF-8 テキストを使用してステートメントを送信する場合は、ファイルエンコーディングが正しく、オペレーティングシステムで正しく処理されるように、環境のロケールを UTF-8 に設定してファイルを編集する必要があります。 端末ウィンドウ内から <span class="command"><strong>mysql</strong></span> クライアントを使用する場合、UTF-8 を使用するようにこのウィンドウを構成する必要があります。そのようにしないと、文字が正しく表示されない可能性があります。 Web 環境で実行するスクリプトの場合、このスクリプトは、MySQL Server とやり取りできるように文字のエンコーディングを正しく処理する必要があり、ページ内容の表示方法をブラウザが認識できるようにエンコーディングを正しく指定したページを生成する必要があります。 たとえば、次の <code class="literal">&lt;meta&gt;</code> タグを <code class="literal">&lt;head&gt;</code> 要素内に含められます。 
    </p><pre class="programlisting">&lt;meta http-equiv="Content-Type" content="text/html; charset=utf-8" /&gt;
</pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="charset-errors"></a>10.6 エラーメッセージ文字セット</h2></div></div></div><p>
      このセクションでは、MySQL サーバーが文字セットを使用してエラーメッセージを作成する方法について説明します。 エラーメッセージの (文字セットではなく) 言語の詳細は、<a class="xref" href="charset.html#error-message-language" title="10.12 エラーメッセージ言語の設定">セクション10.12「エラーメッセージ言語の設定」</a>を参照してください。 エラーロギングの構成に関する一般情報は、<a class="xref" href="server-administration.html#error-log" title="5.4.2 エラーログ">セクション5.4.2「エラーログ」</a> を参照してください。 
    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="xref" href="charset.html#charset-errors-construction" title="エラーメッセージ構成の文字セット">エラーメッセージ構成の文字セット</a></p></li><li class="listitem"><p><a class="xref" href="charset.html#charset-errors-disposition" title="エラーメッセージ処理の文字セット">エラーメッセージ処理の文字セット</a></p></li></ul></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="charset-errors-construction"></a>エラーメッセージ構成の文字セット</h3></div></div></div><p>
        サーバーは次のようにエラーメッセージを構築します。
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            メッセージテンプレートでは、UTF-8 (<code class="literal">utf8mb3</code>) が使用されます。
          </p></li><li class="listitem"><p>
            メッセージテンプレートのパラメータが、特定のエラーの発生に適用される値に置き換えられます。
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                テーブル名やカラム名などの識別子は、UTF-8 を内部で使用するので、そのままコピーされます。
              </p></li><li class="listitem"><p>
                文字 (非バイナリ) 文字列値は、その文字セットから UTF-8 に変換されます。
              </p></li><li class="listitem"><p>
                バイナリ文字列値は、<code class="literal">0x20</code> から <code class="literal">0x7E</code> までの範囲のバイトの場合と同様にコピーされ、その範囲外のバイトの場合は<code class="literal">\x</code> 16 進数エンコーディングが使用されます。 たとえば、<code class="literal">0x41CF9F</code> を <code class="literal">VARBINARY</code> の一意のカラムに挿入しようとしたときに重複キーエラーが発生した場合、生成されるエラーメッセージでは、16 進数でエンコードされた UTF-8 が使用されます: 
              </p><pre class="programlisting">Duplicate entry 'A\xC3\x9F' for key 1
</pre></li></ul></div></li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><h3 class="title"><a name="charset-errors-disposition"></a>エラーメッセージ処理の文字セット</h3></div></div></div><p>
        構成後のエラーメッセージは、サーバーによってエラーログに書き込まれるか、クライアントに送信されます:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            サーバーは、エラーメッセージをエラーログに書き込むと、別の文字セットに変換せずに、構築されたとおりに UTF-8 に書き込みます。
          </p></li><li class="listitem"><p>
            サーバーがエラーメッセージをクライアントプログラムに送信すると、サーバーはそれを UTF-8 から <code class="literal">character_set_results</code> システム変数で指定された文字セットに変換します。 <code class="literal">character_set_results</code> に <code class="literal">NULL</code> または <code class="literal">binary</code> の値がある場合、変換は行われません。 変数値が <code class="literal">utf8mb3</code> または <code class="literal">utf8mb4</code> の場合、これらの文字セットには、メッセージ構成で使用されるすべての UTF-8 文字を含むレパートリーがあるため、変換は行われません。 
          </p><p>
            <code class="literal">character_set_results</code> で文字を表現できない場合、変換中に一部のエンコーディングが発生する可能性があります。 エンコーディングは、Unicode コードポイント値を使用します。 
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                Basic Multilingual Plane (BMP) 範囲 (<code class="literal">0x0000</code> から <code class="literal">0xFFFF</code>) 内の文字は、<code class="literal">\<em class="replaceable"><code>nnnn</code></em></code> 表記を使用して書き込まれます。
              </p></li><li class="listitem"><p>
                BMP 範囲外の文字 (<code class="literal">0x10000</code> から <code class="literal">0x10FFFF</code>) は、<code class="literal">\+<em class="replaceable"><code>nnnnnn</code></em></code> 表記を使用して書き込まれます。
              </p></li></ul></div><p>
            クライアントは、<code class="literal">character_set_results</code> を設定して、エラーメッセージを受信するときの文字セットを制御できます。 この変数は直接設定することも、<code class="literal">SET NAMES</code> などの手段で間接的に設定することもできます。 <code class="literal">character_set_results</code> の詳細は、<a class="xref" href="charset.html#charset-connection" title="10.4 接続文字セットおよび照合順序">セクション10.4「接続文字セットおよび照合順序」</a>を参照してください。 
          </p></li></ul></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="charset-conversion"></a>10.7 カラム文字セットの変換</h2></div></div></div><p>
      特定の文字セットを使用するようにバイナリ文字列または非バイナリ文字列カラムを変換するには、<code class="literal">ALTER TABLE</code> を使用します。 正しく変換が行われるには、次の条件のいずれかを適用する必要があります。 
    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          カラムにバイナリデータ型 (<code class="literal">BINARY</code>、<code class="literal">VARBINARY</code>、<code class="literal">BLOB</code>) がある場合、含まれるすべての値は、単一の文字セット (カラムの変換後の文字セット) を使用してエンコードされる必要があります。 バイナリカラムを使用して複数の文字セットで情報を格納する場合、MySQL はどの値がどの文字セットを使用するかを認識できず、データを正確に変換できません。 
        </p></li><li class="listitem"><p>
          カラムに非バイナリデータ型 (<code class="literal">CHAR</code>、<code class="literal">VARCHAR</code>、<code class="literal">TEXT</code>) がある場合、その内容は、カラムの文字セットでエンコードする必要があり、ほかの文字セットは使用できません。 内容が別の文字セットでエンコードされている場合、最初にバイナリデータ型を使用するようにカラムを変換してから、使用する文字セットで非バイナリカラムに変換できます。 
        </p></li></ul></div><p>
      <code class="literal">VARBINARY(50)</code> として定義された <code class="literal">col1</code> という名前のテーブル <code class="literal">t</code> にバイナリカラムがあるとします。 カラム内の情報が、単一の文字セットを使用してエンコードされているとすると、このカラムを、その文字セットを含む非バイナリカラムに変換できます。 たとえば、<code class="literal">col1</code> に <code class="literal">greek</code> 文字セットの文字を表すバイナリデータが含まれる場合、次のように変換できます。 
    </p><pre class="programlisting">ALTER TABLE t MODIFY col1 VARCHAR(50) CHARACTER SET greek;
</pre><p>
      元のカラムに <code class="literal">BINARY(50)</code> のタイプがある場合は、それを <code class="literal">CHAR(50)</code> に変換できますが、結果の値の末尾に <code class="literal">0x00</code> バイトが埋め込まれるため、望ましくない場合があります。 これらのバイトを削除するには、<code class="literal">TRIM()</code> 関数を使用します。 
    </p><pre class="programlisting">UPDATE t SET col1 = TRIM(TRAILING 0x00 FROM col1);
</pre><p>
      テーブル <code class="literal">t</code> に <code class="literal">CHAR(50) CHARACTER SET latin1</code> として定義された <code class="literal">col1</code> という名前の非バイナリ列があるが、<code class="literal">utf8</code> を使用するようにこれを変換し、多くの言語の値を格納できるようにするとします。 次のステートメントでこれを実行できます。 
    </p><pre class="programlisting">ALTER TABLE t MODIFY col1 CHAR(50) CHARACTER SET utf8;
</pre><p>
      両方の文字セットにない文字がカラムに含まれている場合、変換の損失が大きくなることがあります。
    </p><p>
      MySQL 4.1 より前の古いテーブルがある場合、実際にはサーバーのデフォルトの文字セットと異なる文字セットでエンコードされた値が、非バイナリカラムに含まれるという特殊な状況が起こります。 たとえば、アプリケーションでは、MySQL のデフォルトの文字セットが異なる場合でも、カラムに <code class="literal">sjis</code> 値が格納されていることがあります。 適切な文字セットを使用するために、カラムを変換することは可能ですが、追加ステップが必要になります。 たとえば、サーバーのデフォルト文字セットが <code class="literal">latin1</code> で、<code class="literal">col1</code> は <code class="literal">CHAR(50)</code> と定義されているにもかかわらず、内容は <code class="literal">sjis</code> 値であるとします。 最初のステップでは、バイナリデータ型にカラムを変換することで、文字変換を実行しないで既存の文字セット情報を取り除きます。 
    </p><pre class="programlisting">ALTER TABLE t MODIFY col1 BLOB;
</pre><p>
      次のステップでは、適切な文字セットを使用して、非バイナリデータ型にカラムを変換します。
    </p><pre class="programlisting">ALTER TABLE t MODIFY col1 CHAR(50) CHARACTER SET sjis;
</pre><p>
      この手順では、MySQL 4.1 以上へのアップグレード後に、<code class="literal">INSERT</code> や <code class="literal">UPDATE</code> などのステートメントを使用してテーブルがまだ変更されていないことが必要です。 その場合、MySQL は <code class="literal">latin1</code> を使用してカラムに新しい値を格納し、カラムには <code class="literal">sjis</code> と <code class="literal">latin1</code> の値が混在しているため、適切に変換できません。 
    </p><p>
      最初にカラムを作成するときに属性を指定した場合、<code class="literal">ALTER TABLE</code> を使用してテーブルを変更しているときにも属性を指定する必要があります。 たとえば、<code class="literal">NOT NULL</code> と明示的な <code class="literal">DEFAULT</code> 値を指定した場合、<code class="literal">ALTER TABLE</code> ステートメントでも指定する必要があります。 それ以外の場合、結果のカラム定義にはこれらの属性は含まれません。 
    </p><p>
      テーブル内のすべての文字カラムを変換するには、<code class="literal">ALTER TABLE ... CONVERT TO CHARACTER SET <em class="replaceable"><code>charset</code></em></code> ステートメントが役立つことがあります。 <a class="xref" href="sql-statements.html#alter-table" title="13.1.9 ALTER TABLE ステートメント">セクション13.1.9「ALTER TABLE ステートメント」</a>を参照してください。 
    </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="charset-collations"></a>10.8 照合順序の問題</h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="section"><a href="charset.html#charset-collate">10.8.1 SQL ステートメントでの COLLATE の使用</a></span></dt><dt><span class="section"><a href="charset.html#charset-collate-precedence">10.8.2 COLLATE 句の優先順位</a></span></dt><dt><span class="section"><a href="charset.html#charset-collation-compatibility">10.8.3 文字セットと照合順序の互換性</a></span></dt><dt><span class="section"><a href="charset.html#charset-collation-coercibility">10.8.4 式での照合の強制性</a></span></dt><dt><span class="section"><a href="charset.html#charset-binary-collations">10.8.5 バイナリ照合順序と_bin 照合順序</a></span></dt><dt><span class="section"><a href="charset.html#charset-collation-effect">10.8.6 照合順序の効果の例</a></span></dt><dt><span class="section"><a href="charset.html#charset-collation-information-schema">10.8.7 INFORMATION_SCHEMA 検索での照合の使用</a></span></dt></dl></div><p>
      以降のセクションでは、文字セットの照合順序のさまざまな側面について説明します。
    </p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="charset-collate"></a>10.8.1 SQL ステートメントでの COLLATE の使用</h3></div></div></div><p>
        <code class="literal">COLLATE</code> 句では、比較に対するデフォルト照合順序が何であれ、オーバーライドできます。 SQL ステートメントのさまざまな個所で <code class="literal">COLLATE</code> を使用できます。 次にいくつかの例を示します。 
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">ORDER BY</code> を指定した場合
          </p><pre class="programlisting">SELECT k
FROM t1
ORDER BY k COLLATE latin1_german2_ci;
</pre></li><li class="listitem"><p>
            <code class="literal">AS</code> を指定した場合
          </p><pre class="programlisting">SELECT k COLLATE latin1_german2_ci AS k1
FROM t1
ORDER BY k1;
</pre></li><li class="listitem"><p>
            <code class="literal">GROUP BY</code> を指定した場合
          </p><pre class="programlisting">SELECT k
FROM t1
GROUP BY k COLLATE latin1_german2_ci;
</pre></li><li class="listitem"><p>
            集計関数を指定した場合
          </p><pre class="programlisting">SELECT MAX(k COLLATE latin1_german2_ci)
FROM t1;
</pre></li><li class="listitem"><p>
            <code class="literal">DISTINCT</code> を指定した場合
          </p><pre class="programlisting">SELECT DISTINCT k COLLATE latin1_german2_ci
FROM t1;
</pre></li><li class="listitem"><p>
            <code class="literal">WHERE</code> を指定した場合
          </p><pre class="programlisting">     SELECT *
     FROM t1
     WHERE _latin1 'Müller' COLLATE latin1_german2_ci = k;
</pre><pre class="programlisting">     SELECT *
     FROM t1
     WHERE k LIKE _latin1 'Müller' COLLATE latin1_german2_ci;
</pre></li><li class="listitem"><p>
            <code class="literal">HAVING</code> を指定した場合
          </p><pre class="programlisting">SELECT k
FROM t1
GROUP BY k
HAVING k = _latin1 'Müller' COLLATE latin1_german2_ci;
</pre></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="charset-collate-precedence"></a>10.8.2 COLLATE 句の優先順位</h3></div></div></div><p>
        <code class="literal">COLLATE</code> 句は優先順位が高いため (<code class="literal">||</code> より上位)、次の 2 つの式は同等です。
      </p><pre class="programlisting">x || y COLLATE z
x || (y COLLATE z)
</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="charset-collation-compatibility"></a>10.8.3 文字セットと照合順序の互換性</h3></div></div></div><p>
        各文字セットには 1 つ以上の照合順序があり、各照合順序は 1 つの文字セットにのみ関連付けられています。 したがって、次のステートメントではエラーメッセージが表示されます。<code class="literal">latin2_bin</code> 照合順序は <code class="literal">latin1</code> 文字セットに対して有効ではないからです。 
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT _latin1 'x' COLLATE latin2_bin;</code></strong>
ERROR 1253 (42000): COLLATION 'latin2_bin' is not valid
for CHARACTER SET 'latin1'
</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="charset-collation-coercibility"></a>10.8.4 式での照合の強制性</h3></div></div></div><a class="indexterm" name="idm46723732849072"></a><a class="indexterm" name="idm46723732846928"></a><p>
        大多数のステートメントでは、MySQL がどの照合順序を使用して比較演算を行うかは明確になっています。 たとえば、次の場合、照合がカラム <code class="literal">x</code> の照合であることを明確にする必要があります: 
      </p><pre class="programlisting">SELECT x FROM T ORDER BY x;
SELECT x FROM T WHERE x = x;
SELECT DISTINCT x FROM T;
</pre><p>
        ただし、複数のオペランドがあると、あいまいさが生じることがあります。 たとえば、次のステートメントは、カラム <code class="literal">x</code> と文字列リテラル<code class="literal">'Y'</code>の比較を実行します: 
      </p><pre class="programlisting">SELECT x FROM T WHERE x = 'Y';
</pre><p>
        <code class="literal">x</code> と<code class="literal">'Y'</code>の照合順序が同じ場合、比較に使用する照合順序のあいまいさはありません。 ただし、照合順序が異なる場合、比較で <code class="literal">x</code> の照合順序または<code class="literal">'Y'</code>の照合順序を使用する必要がありますか。 <code class="literal">x</code> と <code class="literal">'Y'</code> の両方に照合順序がありますが、どちらの照合順序が優先されるでしょうか。 
      </p><p>
        照合の混在は、比較以外のコンテキストでも発生する可能性があります。 たとえば、<code class="literal">CONCAT(x,'Y')</code> などの複数引数の連結操作では、引数を組み合せて単一の文字列が生成されます。 結果にはどのような照合が必要ですか。 
      </p><p>
        これらのような質問を解決するために、MySQL では、一方のアイテムの照合を他方のアイテムの照合に強制できるかどうかをチェックします。 MySQL は次のように強制性値を割り当てます。 
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            明示的な <code class="literal">COLLATE</code> 句の強制性は 0 です (強制可能ではありません)。
          </p></li><li class="listitem"><p>
            照合順序の異なる 2 つの文字列を連結すると強制性は 1 になります。
          </p></li><li class="listitem"><p>
            カラムまたはストアドルーチンのパラメータまたはローカル変数の照合順序の強制性は 2 です。
          </p></li><li class="listitem"><p>
            <span class="quote">「<span class="quote">システム定数</span>」</span> (<code class="literal">USER()</code> または <code class="literal">VERSION()</code> などの関数で返される文字列) の強制性は 3 です。
          </p></li><li class="listitem"><p>
            リテラルの照合順序の強制性は 4 です。
          </p></li><li class="listitem"><p>
            数値または時間値の照合の強制性は 5 です。
          </p></li><li class="listitem"><p>
            <code class="literal">NULL</code> または <code class="literal">NULL</code> から派生した式の強制性 6 です。
          </p></li></ul></div><p>
        MySQL は、次のルールとともに強制性値を使用して、あいまいさを解決します。
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            強制性値がもっとも低い照合順序を使用します。
          </p></li><li class="listitem"><p>
            両方の側で強制性が同じ場合は、次のようになります。
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                両方の側が Unicode であるか、両方の側が Unicode ではない場合は、エラーになります。
              </p></li><li class="listitem"><p>
                どちらかの側に Unicode 文字セットがあり、もう一方の側に Unicode 以外の文字セットがある場合、Unicode 文字セットの側が優先され、Unicode 以外の側に自動文字セット変換が適用されます。 たとえば、次のステートメントはエラーを返しません。 
              </p><pre class="programlisting">SELECT CONCAT(utf8mb4_column, latin1_column) FROM t1;
</pre><p>
                <code class="literal">utf8mb4</code> の文字セットと <code class="literal">utf8mb4_column</code> と同じ照合順序を持つ結果を返します。 <code class="literal">latin1_column</code> の値は、連結する前に自動的に <code class="literal">utf8mb4</code> に変換されます。 
              </p></li><li class="listitem"><p>
                同じ文字セットのオペランドだが、<code class="literal">_bin</code> 照合順序と <code class="literal">_ci</code> または <code class="literal">_cs</code> 照合順序が混在したオペランドを使用した演算の場合、<code class="literal">_bin</code> 照合順序が使用されます。 これは、非バイナリ文字列とバイナリ文字列を混在させる操作によってオペランドがバイナリ文字列として評価され、データ型ではなく照合順序に適用される方法と似ています。 
              </p></li></ul></div></li></ul></div><p>
        自動変換は SQL 標準には含まれていませんが、標準では、すべての文字セットが Unicode の<span class="quote">「<span class="quote">「サブセット」</span>」</span>であることが示されています。 <span class="quote">「<span class="quote">スーパーセットに適用されるものはサブセットにも適用される</span>」</span>というよく知られた原則があるので、Unicode の照合順序は Unicode 以外の文字列との比較にも適用できると考えられます。 より一般的に、MySQL では文字セットレパートリーの概念が使用されます。この概念は、文字セット間のサブセット関係を判断し、それ以外の場合はエラーが発生する操作でオペランドの変換を可能にするために使用されることがあります。 <a class="xref" href="charset.html#charset-repertoire" title="10.2.1 文字セットレパートリー">セクション10.2.1「文字セットレパートリー」</a>を参照してください。 
      </p><p>
        次のテーブルに、前述のルールの適用例を示します。
      </p><div class="informaltable"><table summary="Comparisons and the collation used for each comparison."><col style="width=50%"><col style="width=50%"><thead><tr>
            <th>比較</th>
            <th>使用される照合順序</th>
          </tr></thead><tbody><tr>
            <td><code class="literal">column1 = 'A'</code></td>
            <td><code class="literal">column1</code> の照合順序を使用します</td>
          </tr><tr>
            <td><code class="literal">column1 = 'A' COLLATE x</code></td>
            <td><code class="literal">'A' COLLATE x</code> の照合順序を使用します</td>
          </tr><tr>
            <td><code class="literal">column1 COLLATE x = 'A' COLLATE y</code></td>
            <td>エラー</td>
          </tr></tbody></table></div><p>
        文字列式の強制性を判断するには、<code class="literal">COERCIBILITY()</code> 関数を使用します (<a class="xref" href="functions.html#information-functions" title="12.16 情報関数">セクション12.16「情報関数」</a> を参照):
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT COERCIBILITY(_utf8'A' COLLATE utf8_bin);</code></strong>
        -&gt; 0
mysql&gt; <strong class="userinput"><code>SELECT COERCIBILITY(VERSION());</code></strong>
        -&gt; 3
mysql&gt; <strong class="userinput"><code>SELECT COERCIBILITY('A');</code></strong>
        -&gt; 4
mysql&gt; <strong class="userinput"><code>SELECT COERCIBILITY(1000);</code></strong>
        -&gt; 5
mysql&gt; <strong class="userinput"><code>SELECT COERCIBILITY(NULL);</code></strong>
        -&gt; 6
</pre><p>
        式 <code class="literal">CONCAT(1, 'abc')</code> での引数 <code class="literal">1</code> に対して行われる変換など、数値または時間値の文字列への暗黙の変換の場合、その結果は、<code class="literal">character_set_connection</code> および <code class="literal">collation_connection</code> システム変数で指定された文字セットおよび照合順序を持つ文字 (非バイナリ) 列になります。 <a class="xref" href="functions.html#type-conversion" title="12.3 式評価での型変換">セクション12.3「式評価での型変換」</a>を参照してください。 
      </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="charset-binary-collations"></a>10.8.5 バイナリ照合順序と_bin 照合順序</h3></div></div></div><a class="indexterm" name="idm46723732773264"></a><a class="indexterm" name="idm46723732771872"></a><a class="indexterm" name="idm46723732769952"></a><a class="indexterm" name="idm46723732768448"></a><p>
        このセクションでは、バイナリ文字列の <code class="literal">binary</code> 照合順序を非バイナリ文字列の<code class="literal">_bin</code> 照合順序と比較する方法について説明します。
      </p><p>
        バイナリ文字列 (<code class="literal">BINARY</code>、<code class="literal">VARBINARY</code> および <code class="literal">BLOB</code> データ型を使用して格納される) には、<code class="literal">binary</code> という名前の文字セットと照合順序があります。 バイナリ文字列はバイトのシーケンスであり、それらのバイトの数値によって比較およびソート順序が決まります。 <a class="xref" href="charset.html#charset-binary-set" title="10.10.8 バイナリ文字セット">セクション10.10.8「バイナリ文字セット」</a>を参照してください。 
      </p><p>
        (<code class="literal">CHAR</code>、<code class="literal">VARCHAR</code> および <code class="literal">TEXT</code> データ型を使用して格納された) 非バイナリ文字列には、<code class="literal">binary</code> 以外の文字セットおよび照合順序があります。 特定の非バイナリ文字セットには複数の照合順序を含めることができ、それぞれがセット内の文字の特定の比較順序およびソート順序を定義します。 ほとんどの文字セットでは、これらのいずれかがバイナリ照合順序で、照合順序名に<code class="literal">_bin</code> 接尾辞が付いています。 たとえば、<code class="literal">utf8</code> および <code class="literal">latin1</code> のバイナリ照合は、<code class="literal">utf8_bin</code> および <code class="literal">latin1_bin</code> という名前です。<code class="literal">utf8mb4</code> は、<code class="literal">utf8mb4_bin</code> と <code class="literal">utf8mb4_0900_bin</code> の 2 つのバイナリ照合順序を持つ例外です。<a class="xref" href="charset.html#charset-unicode-sets" title="10.10.1 Unicode 文字セット">セクション10.10.1「Unicode 文字セット」</a> を参照してください。 
      </p><p>
        <code class="literal">binary</code> 照合は、次の各セクションで説明するように、いくつかの点で<code class="literal">_bin</code> 照合と異なります:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="xref" href="charset.html#charset-binary-collations-comparison-units" title="比較およびソートの単位">比較およびソートの単位</a></p></li><li class="listitem"><p><a class="xref" href="charset.html#charset-binary-collations-charset-conversion" title="文字セット変換">文字セット変換</a></p></li><li class="listitem"><p><a class="xref" href="charset.html#charset-binary-collations-lettercase-conversion" title="大文字小文字変換">大文字小文字変換</a></p></li><li class="listitem"><p><a class="xref" href="charset.html#charset-binary-collations-trailing-space-comparisons" title="比較での後続領域の処理">比較での後続領域の処理</a></p></li><li class="listitem"><p><a class="xref" href="charset.html#charset-binary-collations-trailing-space-inserts-retrievals" title="挿入および取得のための後続領域処理">挿入および取得のための後続領域処理</a></p></li></ul></div><div class="simplesect"><div class="titlepage"><div><div><h4 class="title"><a name="charset-binary-collations-comparison-units"></a>比較およびソートの単位</h4></div></div></div><p>
          バイナリ文字列は、バイトのシーケンスです。 <code class="literal">binary</code> 照合の場合、比較およびソートは数値バイト値に基づきます。 非バイナリ文字列は文字のシーケンスであり、これはマルチバイトであることもあります。 非バイナリ文字列の照合順序は、比較およびソートのための文字値の順序を定義します。 <code class="literal">_bin</code> 照合順序では、この順序付けは数値文字コード値に基づきます。これは、文字コード値がマルチバイトであることを除き、バイナリ文字列の順序付けに似ています。 
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h4 class="title"><a name="charset-binary-collations-charset-conversion"></a>文字セット変換</h4></div></div></div><p>
          非バイナリ文字列には文字セットがあり、多くの場合、文字列に<code class="literal">_bin</code> 照合順序がある場合でも自動的に別の文字セットに変換されます:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              異なる文字セットを持つ別のカラムにカラム値を割り当てる場合:
            </p><pre class="programlisting">UPDATE t1 SET utf8_bin_column=latin1_column;
INSERT INTO t1 (latin1_column) SELECT utf8_bin_column FROM t2;
</pre></li><li class="listitem"><p>
              文字列リテラルを使用して、<code class="literal">INSERT</code> または <code class="literal">UPDATE</code> のカラム値を割り当てる場合:
            </p><pre class="programlisting">SET NAMES latin1;
INSERT INTO t1 (utf8_bin_column) VALUES ('string-in-latin1');
</pre></li><li class="listitem"><p>
              サーバーからクライアントに結果を送信する場合:
            </p><pre class="programlisting">SET NAMES latin1;
SELECT utf8_bin_column FROM t2;
</pre></li></ul></div><p>
          バイナリ文字列カラムの場合、変換は行われません。 前述のような場合は、文字列値がバイト単位でコピーされます。 
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h4 class="title"><a name="charset-binary-collations-lettercase-conversion"></a>大文字小文字変換</h4></div></div></div><p>
          非バイナリ文字セットの照合順序は、文字の大文字と小文字に関する情報を提供するため、順序付けで大文字と小文字を無視する<code class="literal">_bin</code> 照合順序の場合でも、非バイナリ文字列の文字をある大文字から別の文字に変換できます:
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET NAMES utf8mb4 COLLATE utf8mb4_bin;</code></strong>
mysql&gt; <strong class="userinput"><code>SELECT LOWER('aA'), UPPER('zZ');</code></strong>
+-------------+-------------+
| LOWER('aA') | UPPER('zZ') |
+-------------+-------------+
| aa          | ZZ          |
+-------------+-------------+
</pre><p>
          大文字と小文字という概念は、バイナリ文字列内のバイトには適用されません。 大文字と小文字の変換を実行するには、まず文字列に格納されているデータに適した文字セットを使用して、文字列を非バイナリ文字列に変換する必要があります: 
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET NAMES binary;</code></strong>
mysql&gt; <strong class="userinput"><code>SELECT LOWER('aA'), LOWER(CONVERT('aA' USING utf8mb4));</code></strong>
+-------------+------------------------------------+
| LOWER('aA') | LOWER(CONVERT('aA' USING utf8mb4)) |
+-------------+------------------------------------+
| aA          | aa                                 |
+-------------+------------------------------------+
</pre></div><div class="simplesect"><div class="titlepage"><div><div><h4 class="title"><a name="charset-binary-collations-trailing-space-comparisons"></a>比較での後続領域の処理</h4></div></div></div><a class="indexterm" name="idm46723732712720"></a><a class="indexterm" name="idm46723732711232"></a><a class="indexterm" name="idm46723732709184"></a><a class="indexterm" name="idm46723732707152"></a><a class="indexterm" name="idm46723732705232"></a><a class="indexterm" name="idm46723732703776"></a><a class="indexterm" name="idm46723732701856"></a><p>
          MySQL 照合には、<code class="literal">PAD SPACE</code> または <code class="literal">NO PAD</code> の値を持つ pad 属性があります:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              ほとんどの MySQL 照合には、<code class="literal">PAD SPACE</code> のパッド属性があります。
            </p></li><li class="listitem"><p>
              UCA 9.0.0 以上に基づく Unicode 照合には、<code class="literal">NO PAD</code> のパッド属性があります。<a class="xref" href="charset.html#charset-unicode-sets" title="10.10.1 Unicode 文字セット">セクション10.10.1「Unicode 文字セット」</a> を参照してください。
            </p></li></ul></div><p>
          非バイナリ文字列 (<code class="literal">CHAR</code>、<code class="literal">VARCHAR</code> および <code class="literal">TEXT</code> 値) の場合、文字列照合パッド属性によって、文字列の末尾にある末尾の空白の比較での処理が決まります:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">PAD SPACE</code> 照合の場合、末尾のスペースは比較では重要ではありません。文字列は末尾のスペースに関係なく比較されます。
            </p></li><li class="listitem"><p>
              <code class="literal">NO PAD</code> 照合順序では、他の文字と同様に、比較で末尾のスペースが重要として扱われます。
            </p></li></ul></div><p>
          異なる動作を示すには、いずれか一方が <code class="literal">PAD SPACE</code> で、もう一方が <code class="literal">NO PAD</code> の <code class="literal">utf8mb4</code> バイナリ照合を使用します。 この例では、<code class="literal">INFORMATION_SCHEMA</code> <code class="literal">COLLATIONS</code> テーブルを使用して照合のパッド属性を決定する方法も示します。 
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT COLLATION_NAME, PAD_ATTRIBUTE</code></strong>
       <strong class="userinput"><code>FROM INFORMATION_SCHEMA.COLLATIONS</code></strong>
       <strong class="userinput"><code>WHERE COLLATION_NAME LIKE 'utf8mb4%bin';</code></strong>
+------------------+---------------+
| COLLATION_NAME   | PAD_ATTRIBUTE |
+------------------+---------------+
| utf8mb4_bin      | PAD SPACE     |
| utf8mb4_0900_bin | NO PAD        |
+------------------+---------------+
mysql&gt; <strong class="userinput"><code>SET NAMES utf8mb4 COLLATE utf8mb4_bin;</code></strong>
mysql&gt; <strong class="userinput"><code>SELECT 'a ' = 'a';</code></strong>
+------------+
| 'a ' = 'a' |
+------------+
|          1 |
+------------+
mysql&gt; <strong class="userinput"><code>SET NAMES utf8mb4 COLLATE utf8mb4_0900_bin;</code></strong>
mysql&gt; <strong class="userinput"><code>SELECT 'a ' = 'a';</code></strong>
+------------+
| 'a ' = 'a' |
+------------+
|          0 |
+------------+
</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
            このコンテキストの<span class="quote">「<span class="quote">「比較」</span>」</span>には、<code class="literal">LIKE</code> パターン一致演算子は含まれていません。この演算子の末尾の空白は、照合に関係なく重要です。
          </p></div><p>
          バイナリ文字列 (<code class="literal">BINARY</code>、<code class="literal">VARBINARY</code> および <code class="literal">BLOB</code> の値) の場合、後続の空白を含むすべてのバイトが比較で意味を持ちます:
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET NAMES binary;</code></strong>
mysql&gt; <strong class="userinput"><code>SELECT 'a ' = 'a';</code></strong>
+------------+
| 'a ' = 'a' |
+------------+
|          0 |
+------------+
</pre></div><div class="simplesect"><div class="titlepage"><div><div><h4 class="title"><a name="charset-binary-collations-trailing-space-inserts-retrievals"></a>挿入および取得のための後続領域処理</h4></div></div></div><p>
          <code class="literal">CHAR(<em class="replaceable"><code>N</code></em>)</code> カラムには、バイナリ以外の文字列の <em class="replaceable"><code>N</code></em> 文字の長さが格納されます。 挿入の場合、<em class="replaceable"><code>N</code></em> 文字より短い値はスペースで拡張されます。 取得の場合、末尾の空白は削除されます。 
        </p><p>
          <code class="literal">BINARY(<em class="replaceable"><code>N</code></em>)</code> カラムには、バイナリ文字列の <em class="replaceable"><code>N</code></em> バイト長が格納されます。 挿入の場合、<em class="replaceable"><code>N</code></em> バイトより短い値は <code class="literal">0x00</code> バイトで拡張されます。 取得の場合、何も削除されません。宣言された長さの値が常に返されます。 
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>CREATE TABLE t1 (</code></strong>
         <strong class="userinput"><code>a CHAR(10) CHARACTER SET utf8 COLLATE utf8_bin,</code></strong>
         <strong class="userinput"><code>b BINARY(10)</code></strong>
       <strong class="userinput"><code>);</code></strong>
mysql&gt; <strong class="userinput"><code>INSERT INTO t1 VALUES ('x','x');</code></strong>
mysql&gt; <strong class="userinput"><code>INSERT INTO t1 VALUES ('x ','x ');</code></strong>
mysql&gt; <strong class="userinput"><code>SELECT a, b, HEX(a), HEX(b) FROM t1;</code></strong>
+------+------------+--------+----------------------+
| a    | b          | HEX(a) | HEX(b)               |
+------+------------+--------+----------------------+
| x    | x          | 78     | 78000000000000000000 |
| x    | x          | 78     | 78200000000000000000 |
+------+------------+--------+----------------------+
</pre></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="charset-collation-effect"></a>10.8.6 照合順序の効果の例</h3></div></div></div><p>
        <span class="bold"><strong>例 1: ドイツ語のウムラウトのソート</strong></span>
      </p><p>
        テーブル <code class="literal">T</code> のカラム <code class="literal">X</code> に次の <code class="literal">latin1</code> カラムの値が設定されているとします。
      </p><pre class="programlisting">Muffler
Müller
MX Systems
MySQL
</pre><p>
        さらに、次のステートメントを使用してカラムの値を取得するとします。
      </p><pre class="programlisting">SELECT X FROM T ORDER BY X COLLATE <em class="replaceable"><code>collation_name</code></em>;
</pre><p>
        次の表に、別の照合順序で <code class="literal">ORDER BY</code> を使用した場合に得られる値の順序を示します。
      </p><div class="informaltable"><table summary="An example of the effect of collation, as described in the preceding text. The table shows the resulting order of values for three collations (latin1_swedish_ci, latin1_german1_ci, latin1_german2_ci) when using ORDER BY."><col style="width=30%"><col style="width=30%"><col style="width=30%"><thead><tr>
            <th scope="col"><code class="literal">latin1_swedish_ci</code></th>
            <th scope="col"><code class="literal">latin1_german1_ci</code></th>
            <th scope="col"><code class="literal">latin1_german2_ci</code></th>
          </tr></thead><tbody><tr>
            <th scope="row">Muffler</th>
            <td>Muffler</td>
            <td>Müller</td>
          </tr><tr>
            <th scope="row">MX Systems</th>
            <td>Müller</td>
            <td>Muffler</td>
          </tr><tr>
            <th scope="row">Müller</th>
            <td>MX Systems</td>
            <td>MX Systems</td>
          </tr><tr>
            <th scope="row">MySQL</th>
            <td>MySQL</td>
            <td>MySQL</td>
          </tr></tbody></table></div><p>
        この例でソート順の違いを生じさせている文字は、頭に 2 つの点が付いた U (<code class="literal">ü</code>) であり、これはドイツ語で<span class="quote">「<span class="quote">U ウムラウト</span>」</span>と呼ばれているものです。
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            最初のカラムには、スウェーデン語/フィンランド語の照合ルールを使用した <code class="literal">SELECT</code> の結果が示されています。この照合ルールによると、U ウムラウトは Y とソート順が一致します。
          </p></li><li class="listitem"><p>
            2 番目のカラムには、German DIN-1 ルールを使用した <code class="literal">SELECT</code> の結果が示されています。この照合ルールによると、U ウムラウトは U とソート順が一致します。
          </p></li><li class="listitem"><p>
            3 番目のカラムには、German DIN-2 ルールを使用した <code class="literal">SELECT</code> の結果が示されています。この照合ルールによると、U ウムラウトは UE とソート順が一致します。
          </p></li></ul></div><p>
        <span class="bold"><strong>例 2: ドイツ語のウムラウトの検索</strong></span>
      </p><p>
        使用される文字セットと照合順序だけが異なる次の 3 つのテーブルがあるとします。
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET NAMES utf8;</code></strong>
mysql&gt; <strong class="userinput"><code>CREATE TABLE german1 (</code></strong>
       <strong class="userinput"><code>  c CHAR(10)</code></strong>
       <strong class="userinput"><code>) CHARACTER SET latin1 COLLATE latin1_german1_ci;</code></strong>
mysql&gt; <strong class="userinput"><code>CREATE TABLE german2 (</code></strong>
       <strong class="userinput"><code>  c CHAR(10)</code></strong>
       <strong class="userinput"><code>) CHARACTER SET latin1 COLLATE latin1_german2_ci;</code></strong>
mysql&gt; <strong class="userinput"><code>CREATE TABLE germanutf8 (</code></strong>
       <strong class="userinput"><code>  c CHAR(10)</code></strong>
       <strong class="userinput"><code>) CHARACTER SET utf8 COLLATE utf8_unicode_ci;</code></strong>
</pre><p>
        各テーブルには次の 2 つのレコードが含まれます。
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>INSERT INTO german1 VALUES ('Bar'), ('Bär');</code></strong>
mysql&gt; <strong class="userinput"><code>INSERT INTO german2 VALUES ('Bar'), ('Bär');</code></strong>
mysql&gt; <strong class="userinput"><code>INSERT INTO germanutf8 VALUES ('Bar'), ('Bär');</code></strong>
</pre><p>
        上記の照合順序の 2 つには <code class="literal">A = Ä</code> の等式が含まれ、1 つにはこのような等式はありません (<code class="literal">latin1_german2_ci</code>)。 そのため、比較では次の結果が得られます。 
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT * FROM german1 WHERE c = 'Bär';</code></strong>
+------+
| c    |
+------+
| Bar  |
| Bär  |
+------+
mysql&gt; <strong class="userinput"><code>SELECT * FROM german2 WHERE c = 'Bär';</code></strong>
+------+
| c    |
+------+
| Bär  |
+------+
mysql&gt; <strong class="userinput"><code>SELECT * FROM germanutf8 WHERE c = 'Bär';</code></strong>
+------+
| c    |
+------+
| Bar  |
| Bär  |
+------+
</pre><p>
        これはバグではなく、<code class="literal">latin1_german1_ci</code> と <code class="literal">utf8_unicode_ci</code> のソートプロパティーの結果です (示されたソートは、German DIN 5007 標準に従って行われています)。
      </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="charset-collation-information-schema"></a>10.8.7 INFORMATION_SCHEMA 検索での照合の使用</h3></div></div></div><a class="indexterm" name="idm46723732590352"></a><a class="indexterm" name="idm46723732588176"></a><p>
        <code class="literal">INFORMATION_SCHEMA</code> テーブルの文字列カラムには <code class="literal">utf8_general_ci</code> の照合順序があり、大/小文字は区別されません。 ただし、データベースやテーブルなどのファイルシステムでテーブルされるオブジェクトに対応する値の場合、基礎となるファイルシステムの特性および <code class="literal">lower_case_table_names</code> システム変数の設定に応じて、<code class="literal">INFORMATION_SCHEMA</code> 文字列カラムでの検索では大/小文字が区別される場合と区別されない場合があります。 たとえば、ファイルシステムで大文字と小文字が区別される場合、検索では大文字と小文字が区別されることがあります。 このセクションでは、この動作と、必要に応じてその動作を変更する方法について説明します。 
      </p><p>
        クエリーで、<code class="literal">test</code> データベースに対し <code class="literal">SCHEMATA.SCHEMA_NAME</code> カラムを検索するとします。 Linux では、ファイルシステムは大/小文字が区別されるため、<code class="literal">SCHEMATA.SCHEMA_NAME</code> と<code class="literal">'test'</code>の比較は一致しますが、<code class="literal">'TEST'</code>との比較は一致しません: 
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT SCHEMA_NAME FROM INFORMATION_SCHEMA.SCHEMATA</code></strong>
       <strong class="userinput"><code>WHERE SCHEMA_NAME = 'test';</code></strong>
+-------------+
| SCHEMA_NAME |
+-------------+
| test        |
+-------------+

mysql&gt; <strong class="userinput"><code>SELECT SCHEMA_NAME FROM INFORMATION_SCHEMA.SCHEMATA</code></strong>
       <strong class="userinput"><code>WHERE SCHEMA_NAME = 'TEST';</code></strong>
Empty set (0.00 sec)
</pre><p>
        これらの結果は、<code class="literal">lower_case_table_names</code> システム変数が 0 に設定されている場合に発生します。 <code class="literal">lower_case_table_names</code> 設定が 1 または 2 の場合、2 番目のクエリーは最初のクエリーと同じ (空でない) 結果を返します。 
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
          サーバーの初期化時に使用された設定とは異なる <code class="literal">lower_case_table_names</code> 設定でサーバーを起動することは禁止されています。
        </p></div><p>
        Windows または macOS では、ファイルシステムは大/小文字を区別しないため、比較は<code class="literal">'test'</code>と<code class="literal">'TEST'</code>の両方に一致します:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT SCHEMA_NAME FROM INFORMATION_SCHEMA.SCHEMATA</code></strong>
       <strong class="userinput"><code>WHERE SCHEMA_NAME = 'test';</code></strong>
+-------------+
| SCHEMA_NAME |
+-------------+
| test        |
+-------------+

mysql&gt; <strong class="userinput"><code>SELECT SCHEMA_NAME FROM INFORMATION_SCHEMA.SCHEMATA</code></strong>
       <strong class="userinput"><code>WHERE SCHEMA_NAME = 'TEST';</code></strong>
+-------------+
| SCHEMA_NAME |
+-------------+
| TEST        |
+-------------+
</pre><p>
        このコンテキストでは、<code class="literal">lower_case_table_names</code> の値に違いはありません。
      </p><p>
        前述の動作は、ファイルシステムで表されるオブジェクトに対応する値を検索する際に、<code class="literal">INFORMATION_SCHEMA</code> クエリーに <code class="literal">utf8_general_ci</code> 照合が使用されないために発生します。
      </p><p>
        <code class="literal">INFORMATION_SCHEMA</code> カラムに対する文字列操作の結果が予想と異なる場合、回避策は、明示的な <code class="literal">COLLATE</code> 句を使用して適切な照合を強制することです (<a class="xref" href="charset.html#charset-collate" title="10.8.1 SQL ステートメントでの COLLATE の使用">セクション10.8.1「SQL ステートメントでの COLLATE の使用」</a> を参照)。 たとえば、大文字と小文字を区別しない検索を実行するには、<code class="literal">INFORMATION_SCHEMA</code> カラム名とともに <code class="literal">COLLATE</code> を使用します。 
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT SCHEMA_NAME FROM INFORMATION_SCHEMA.SCHEMATA</code></strong>
       <strong class="userinput"><code>WHERE SCHEMA_NAME COLLATE utf8_general_ci = 'test';</code></strong>
+-------------+
| SCHEMA_NAME |
+-------------+
| test        |
+-------------+

mysql&gt; <strong class="userinput"><code>SELECT SCHEMA_NAME FROM INFORMATION_SCHEMA.SCHEMATA</code></strong>
       <strong class="userinput"><code>WHERE SCHEMA_NAME COLLATE utf8_general_ci = 'TEST';</code></strong>
+-------------+
| SCHEMA_NAME |
+-------------+
| test        |
+-------------+
</pre><p>
        <code class="literal">UPPER()</code> または <code class="literal">LOWER()</code> 関数を使用することもできます。
      </p><pre class="programlisting">WHERE UPPER(SCHEMA_NAME) = 'TEST'
WHERE LOWER(SCHEMA_NAME) = 'test'
</pre><p>
        大文字と小文字を区別するファイルシステムのプラットフォームでも、大文字と小文字を区別しない比較を実行できますが、前述のように、必ずしも常に正しい処理になるとはかぎりません。 このようなプラットフォームでは、大文字と小文字だけが異なる名前の複数のオブジェクトが存在する可能性があります。 たとえば、<code class="literal">city</code>、<code class="literal">CITY</code>、および <code class="literal">City</code> という名前のテーブルがすべて同時に存在することが可能です。 検索がこのようなすべての名前と一致するか、1 つのみ一致するかを検討し、それに応じてクエリーを書き込みます。 次の比較 (<code class="literal">utf8_bin</code> を使用) のうち、最初の比較では大/小文字が区別されますが、それ以外の比較では区別されません: 
      </p><pre class="programlisting">WHERE TABLE_NAME COLLATE utf8_bin = 'City'
WHERE TABLE_NAME COLLATE utf8_general_ci = 'city'
WHERE UPPER(TABLE_NAME) = 'CITY'
WHERE LOWER(TABLE_NAME) = 'city'
</pre><p>
        <code class="literal">INFORMATION_SCHEMA</code> はファイルシステムで表されていない <span class="quote">「<span class="quote">virtual</span>」</span> データベースであるため、<code class="literal">INFORMATION_SCHEMA</code> 文字列カラム内で <code class="literal">INFORMATION_SCHEMA</code> 自体を参照する値を検索すると、<code class="literal">utf8_general_ci</code> 照合が使用されます。 たとえば、<code class="literal">SCHEMATA.SCHEMA_NAME</code> との比較は、プラットフォームに関係なく、<code class="literal">'information_schema'</code> または <code class="literal">'INFORMATION_SCHEMA'</code> に一致します。 
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT SCHEMA_NAME FROM INFORMATION_SCHEMA.SCHEMATA</code></strong>
       <strong class="userinput"><code>WHERE SCHEMA_NAME = 'information_schema';</code></strong>
+--------------------+
| SCHEMA_NAME        |
+--------------------+
| information_schema |
+--------------------+

mysql&gt; <strong class="userinput"><code>SELECT SCHEMA_NAME FROM INFORMATION_SCHEMA.SCHEMATA</code></strong>
       <strong class="userinput"><code>WHERE SCHEMA_NAME = 'INFORMATION_SCHEMA';</code></strong>
+--------------------+
| SCHEMA_NAME        |
+--------------------+
| information_schema |
+--------------------+
</pre></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="charset-unicode"></a>10.9 Unicode のサポート</h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="section"><a href="charset.html#charset-unicode-utf8mb4">10.9.1 utf8mb4 文字セット (4 バイトの UTF-8 Unicode エンコーディング)</a></span></dt><dt><span class="section"><a href="charset.html#charset-unicode-utf8mb3">10.9.2 utf8mb3 文字セット (3 バイトの UTF-8 Unicode エンコーディング)</a></span></dt><dt><span class="section"><a href="charset.html#charset-unicode-utf8">10.9.3 utf8 文字セット (utf8mb3 のエイリアス)</a></span></dt><dt><span class="section"><a href="charset.html#charset-unicode-ucs2">10.9.4 ucs2 文字セット (UCS-2 Unicode エンコーディング)</a></span></dt><dt><span class="section"><a href="charset.html#charset-unicode-utf16">10.9.5 utf16 文字セット (UTF-16 Unicode エンコーディング)</a></span></dt><dt><span class="section"><a href="charset.html#charset-unicode-utf16le">10.9.6 utf16le 文字セット (UTF-16LE Unicode エンコーディング)</a></span></dt><dt><span class="section"><a href="charset.html#charset-unicode-utf32">10.9.7 utf32 文字セット (UTF-32 Unicode エンコーディング)</a></span></dt><dt><span class="section"><a href="charset.html#charset-unicode-conversion">10.9.8 3 バイト Unicode 文字セットと 4 バイト Unicode 文字セット間の変換</a></span></dt></dl></div><p>
      Unicode 標準には、Basic Multilingual Plane (BMP) の文字と BMP の外部にある補助文字が含まれています。 このセクションでは、MySQL での Unicode のサポートについて説明します。 Unicode 規格自体の詳細は、<a class="ulink" href="http://www.unicode.org/" target="_top">「Unicode Consortium の web サイト」</a>を参照してください。 
    </p><p>
      BMP 文字には次の 3 つの特性があります。
    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          コードポイント値は 0 から 65535 (または <code class="literal">U+0000</code> と <code class="literal">U+FFFF</code>) の間です。
        </p></li><li class="listitem"><p>
          これらは、8、16 または 24 ビット (1 から 3 バイト) を使用して可変長エンコーディングでエンコードできます。
        </p></li><li class="listitem"><p>
          これらは、16 ビット (2 バイト) を使用して固定長エンコーディングでエンコードできます。
        </p></li><li class="listitem"><p>
          主要言語のほとんどすべての文字には、これらで十分です。
        </p></li></ul></div><p>
      補助文字は BMP の外部にあります:
    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          コードポイント値は、<code class="literal">U+10000</code> と <code class="literal">U+10FFFF</code> の間です。
        </p></li><li class="listitem"><p>
          Unicode による補助文字のサポートには、BMP 文字の範囲外の文字セットが必要であるため、BMP 文字 (文字当たり最大 4 バイト) よりも多くの領域が必要です。
        </p></li></ul></div><p>
      Unicode データをエンコードするための UTF-8 (8 ビット単位の Unicode 変換形式) メソッドは、RFC 3629 に従って実装されます。RFC 3629 には、1 バイトから 4 バイトまでのエンコーディング順序が記述されています。 UTF-8 の概念は、長さの異なるバイトシーケンスを使用してさまざまな Unicode 文字をエンコードするというものです。 
    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          基本的なラテン文字、数字、句読点は 1 バイトを使用します。
        </p></li><li class="listitem"><p>
          拡張ラテン文字 (チルダ、長音符号、アキュート、グラーヴェ、およびほかのアクセント符号)、キリル文字、ギリシャ語、アルメニア語、ヘブライ語、アラビア語、シリア語などのほとんどのヨーロッパおよび中東のスクリプト文字は、2 バイトシーケンスに収まります。
        </p></li><li class="listitem"><p>
          韓国語、中国語、および日本語の表意文字は、3 バイトまたは 4 バイトのシーケンスを使用します。
        </p></li></ul></div><p>
      MySQL では、次の Unicode 文字セットがサポートされます:
    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          <code class="literal">utf8mb4</code>: Unicode 文字セットの UTF-8 エンコーディング。文字ごとに 1 バイトから 4 バイトを使用します。
        </p></li><li class="listitem"><p>
          <code class="literal">utf8mb3</code>: Unicode 文字セットの UTF-8 エンコーディング。文字ごとに 1 バイトから 3 バイトを使用します。
        </p></li><li class="listitem"><p>
          <code class="literal">utf8</code>: <code class="literal">utf8mb3</code> のエイリアス。
        </p></li><li class="listitem"><p>
          <code class="literal">ucs2</code>: 文字ごとに 2 バイトを使用した Unicode 文字セットの UCS-2 エンコーディング。
        </p></li><li class="listitem"><p>
          <code class="literal">utf16</code>: 文字ごとに 2 バイトまたは 4 バイトを使用する Unicode 文字セットの UTF-16 エンコーディング。 <code class="literal">ucs2</code> と似ていますが、補助文字の拡張子が付いています。 
        </p></li><li class="listitem"><p>
          <code class="literal">utf16le</code>: Unicode 文字セットの UTF-16LE エンコーディング。 <code class="literal">utf16</code> と似ていますが、ビッグエンディアンではなくリトルエンディアンです。 
        </p></li><li class="listitem"><p>
          <code class="literal">utf32</code>: 文字ごとに 4 バイトを使用する Unicode 文字セットの UTF-32 エンコーディング。
        </p></li></ul></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
        <code class="literal">utf8mb3</code> 文字セットは非推奨であり、将来の MySQL リリースで削除される予定です。 かわりに <code class="literal">utf8mb4</code> を使用してください。 <code class="literal">utf8</code> は現在 <code class="literal">utf8mb3</code> のエイリアスですが、ある時点では <code class="literal">utf8</code> が <code class="literal">utf8mb4</code> への参照になることが予想されます。 <code class="literal">utf8</code> の意味があいまいにならないように、<code class="literal">utf8</code> ではなく文字セット参照に <code class="literal">utf8mb4</code> を明示的に指定することを検討してください。 
      </p></div><p>
      <a class="xref" href="charset.html#charset-unicode-charset-characteristics" title="表 10.2 Unicode 文字セットの一般的な特性">表10.2「Unicode 文字セットの一般的な特性」</a> には、MySQL でサポートされている Unicode 文字セットの一般的な特性がまとめられています。
    </p><div class="table"><a name="charset-unicode-charset-characteristics"></a><p class="title"><b>表 10.2 Unicode 文字セットの一般的な特性</b></p><div class="table-contents"><table summary="General characteristics of Unicode character sets."><col style="width=20%"><col style="width=40%"><col style="width=40%"><thead><tr>
          <th scope="col">文字セット</th>
          <th scope="col">サポートされる文字</th>
          <th scope="col">文字ごとに必要な記憶域</th>
        </tr></thead><tbody><tr>
          <th scope="row"><code class="literal">utf8mb3</code>, <code class="literal">utf8</code></th>
          <td>BMP のみ</td>
          <td>1 バイト、2 バイトまたは 3 バイト</td>
        </tr><tr>
          <th scope="row"><code class="literal">ucs2</code></th>
          <td>BMP のみ</td>
          <td>2 バイト</td>
        </tr><tr>
          <th scope="row"><code class="literal">utf8mb4</code></th>
          <td>BMP および補足</td>
          <td>1、2、3 または 4 バイト</td>
        </tr><tr>
          <th scope="row"><code class="literal">utf16</code></th>
          <td>BMP および補足</td>
          <td>2 バイトまたは 4 バイト</td>
        </tr><tr>
          <th scope="row"><code class="literal">utf16le</code></th>
          <td>BMP および補足</td>
          <td>2 バイトまたは 4 バイト</td>
        </tr><tr>
          <th scope="row"><code class="literal">utf32</code></th>
          <td>BMP および補足</td>
          <td>4 バイト</td>
        </tr></tbody></table></div></div><br class="table-break"><p>
      BMP の外部の文字は REPLACEMENT CHARACTER と比較され、BMP 文字 (<code class="literal">utf8mb3</code> または <code class="literal">ucs2</code>) のみをサポートする Unicode 文字セットに変換される場合は<code class="literal">'?'</code>に変換されます。
    </p><p>
      補助文字をサポートし、BMP 専用の <code class="literal">utf8mb3</code> および <code class="literal">ucs2</code> 文字セットより<span class="quote">「<span class="quote">「広い」</span>」</span>である文字セットを使用する場合、アプリケーションに互換性のない問題が発生する可能性があります。<a class="xref" href="charset.html#charset-unicode-conversion" title="10.9.8 3 バイト Unicode 文字セットと 4 バイト Unicode 文字セット間の変換">セクション10.9.8「3 バイト Unicode 文字セットと 4 バイト Unicode 文字セット間の変換」</a> を参照してください。 このセクションでは、テーブルを (3 バイト)<code class="literal">utf8mb3</code> から (4 バイト)<code class="literal">utf8mb4</code> に変換する方法と、その実行時に適用される制約についても説明します。 
    </p><p>
      類似した一連の照合順序を、ほとんどの Unicode 文字セットで使用できます。 たとえば、それぞれにデンマーク語照合順序があり、その名前は <code class="literal">utf8mb4_danish_ci</code>, <code class="literal">utf8mb3_danish_ci</code>, <code class="literal">utf8_danish_ci</code>, <code class="literal">ucs2_danish_ci</code>, <code class="literal">utf16_danish_ci</code> および <code class="literal">utf32_danish_ci</code> です。 例外は <code class="literal">utf16le</code> であり、2 つの照合順序しかありません。 Unicode 照合およびそれらの区別プロパティ (補助文字の照合プロパティを含む) の詳細は、<a class="xref" href="charset.html#charset-unicode-sets" title="10.10.1 Unicode 文字セット">セクション10.10.1「Unicode 文字セット」</a> を参照してください。 
    </p><p>
      UCS-2、UTF-16、および UTF-32 の MySQL での実装は、ビッグエンディアンのバイト順で文字を格納し、値の先頭にバイト順マーク (BOM) を使用しません。 ほかのデータベースシステムでは、リトルエンディアンのバイト順または BOM を使用していることもあります。 このような場合は、これらのシステムと MySQL 間でデータを転送するときに値の変換を実行する必要があります。 UTF-16LE の実装はリトルエンディアンです。 
    </p><p>
      MySQL は UTF-8 値に BOM を使用しません。
    </p><p>
      Unicode を使用してサーバーと通信するクライアントアプリケーションでは、クライアント文字セットを適宜設定する必要があります (たとえば、<code class="literal">SET NAMES 'utf8mb4'</code>ステートメントを発行します)。 一部の文字セットは、クライアントの文字セットとして使用できません。 <code class="literal">SET NAMES</code> または <code class="literal">SET CHARACTER SET</code> でこれらを使用しようとすると、エラーが発生します。 <a class="xref" href="charset.html#charset-connection-impermissible-client-charset" title="許可されていないクライアント文字セット">許可されていないクライアント文字セット</a>を参照してください。 
    </p><p>
      以降のセクションでは、MySQL における Unicode 文字セットについてさらに詳しく説明します。
    </p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="charset-unicode-utf8mb4"></a>10.9.1 utf8mb4 文字セット (4 バイトの UTF-8 Unicode エンコーディング)</h3></div></div></div><a class="indexterm" name="idm46723732430688"></a><p>
        <code class="literal">utfmb4</code> 文字セットには、次の特性があります:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            BMP および補助文字をサポートします。
          </p></li><li class="listitem"><p>
            マルチバイト文字ごとに最大 4 バイトが必要です。
          </p></li></ul></div><p>
        <code class="literal">utf8mb4</code> は、BMP 文字のみをサポートし、文字当たり最大 3 バイトを使用する <code class="literal">utf8mb3</code> 文字セットと対比しています:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            BMP 文字の場合、<code class="literal">utf8mb4</code> と <code class="literal">utf8mb3</code> のストレージ特性は同じです: 同じコード値、同じエンコーディング、同じ長さ。
          </p></li><li class="listitem"><p>
            補助文字の場合、<code class="literal">utf8mb4</code> ではそれを格納するために 4 バイトが必要ですが、<code class="literal">utf8mb3</code> では文字を格納できません。 <code class="literal">utf8mb3</code> カラムを <code class="literal">utf8mb4</code> に変換する場合、補助文字がないため、変換の心配は必要ありません。 
          </p></li></ul></div><p>
        <code class="literal">utf8mb4</code> は <code class="literal">utf8mb3</code> のスーパーセットであるため、次の連結などの操作の場合、結果には文字セット <code class="literal">utf8mb4</code> と <code class="literal">utf8mb4_col</code> の照合順序が含まれます:
      </p><pre class="programlisting">SELECT CONCAT(utf8mb3_col, utf8mb4_col);
</pre><p>
        同様に、次の <code class="literal">WHERE</code> 句内の比較は、<code class="literal">utf8mb4_col</code> の照合順序に従って行われます。
      </p><pre class="programlisting">SELECT * FROM utf8mb3_tbl, utf8mb4_tbl
WHERE utf8mb3_tbl.utf8mb3_col = utf8mb4_tbl.utf8mb4_col;
</pre><p>
        マルチバイト文字セットに関連するデータ型の記憶域の詳細は、<a class="xref" href="data-types.html#data-types-storage-reqs-strings" title="文字列型の格納要件">文字列型の格納要件</a> を参照してください。
      </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="charset-unicode-utf8mb3"></a>10.9.2 utf8mb3 文字セット (3 バイトの UTF-8 Unicode エンコーディング)</h3></div></div></div><a class="indexterm" name="idm46723732406208"></a><a class="indexterm" name="idm46723732404752"></a><a class="indexterm" name="idm46723732402640"></a><p>
        <code class="literal">utf8mb3</code> 文字セットには、次の特性があります:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            BMP 文字のみをサポート (補助文字はサポートされません)
          </p></li><li class="listitem"><p>
            マルチバイト文字ごとに最大 3 バイトが必要です。
          </p></li></ul></div><p>
        UTF-8 データを使用するが補助文字のサポートが必要なアプリケーションでは、<code class="literal">utf8mb3</code> ではなく <code class="literal">utf8mb4</code> を使用する必要があります (<a class="xref" href="charset.html#charset-unicode-utf8mb4" title="10.9.1 utf8mb4 文字セット (4 バイトの UTF-8 Unicode エンコーディング)">セクション10.9.1「utf8mb4 文字セット (4 バイトの UTF-8 Unicode エンコーディング)」</a> を参照)。
      </p><a class="indexterm" name="idm46723732394080"></a><a class="indexterm" name="idm46723732392624"></a><p>
        <code class="literal">utf8mb3</code> および <code class="literal">ucs2</code> では、まったく同じ文字セットを使用できます。 つまり、これらは同じ <a class="link" href="glossary.html#glos_repertoire" title="レパートリー">repertoire</a> を持ちます。 
      </p><p>
        <code class="literal">utf8</code> は <code class="literal">utf8mb3</code> のエイリアスです。文字制限は、名前に明示的ではなく暗黙的です。
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
          <code class="literal">utf8mb3</code> 文字セットは非推奨であり、将来の MySQL リリースで削除される予定です。 かわりに <code class="literal">utf8mb4</code> を使用してください。 <code class="literal">utf8</code> は現在 <code class="literal">utf8mb3</code> のエイリアスですが、ある時点では <code class="literal">utf8</code> が <code class="literal">utf8mb4</code> への参照になることが予想されます。 <code class="literal">utf8</code> の意味があいまいにならないように、<code class="literal">utf8</code> ではなく文字セット参照に <code class="literal">utf8mb4</code> を明示的に指定することを検討してください。 
        </p></div><p>
        <code class="literal">utf8mb3</code> は <code class="literal">CHARACTER SET</code> 句、<code class="literal">utf8mb3_<em class="replaceable"><code>collation_substring</code></em></code> は <code class="literal">COLLATE</code> 句 (<em class="replaceable"><code>collation_substring</code></em> が <code class="literal">bin</code>, <code class="literal">czech_ci</code>, <code class="literal">danish_ci</code>, <code class="literal">esperanto_ci</code>, <code class="literal">estonian_ci</code> など) で使用できます。 例: 
      </p><pre class="programlisting">CREATE TABLE t (s1 CHAR(1) CHARACTER SET utf8mb3;
SELECT * FROM t WHERE s1 COLLATE utf8mb3_general_ci = 'x';
DECLARE x VARCHAR(5) CHARACTER SET utf8mb3 COLLATE utf8mb3_danish_ci;
SELECT CAST('a' AS CHAR CHARACTER SET utf8) COLLATE utf8_czech_ci;
</pre><p>
        MySQL では、ステートメントの <code class="literal">utf8mb3</code> のインスタンスが <code class="literal">utf8</code> に即時に変換されるため、<code class="literal">SHOW CREATE TABLE</code>、<code class="literal">SELECT CHARACTER_SET_NAME FROM INFORMATION_SCHEMA.COLUMNS</code>、<code class="literal">SELECT COLLATION_NAME FROM INFORMATION_SCHEMA.COLUMNS</code> などのステートメントでは、ユーザーには <code class="literal">utf8</code> または <code class="literal">utf8_<em class="replaceable"><code>collation_substring</code></em></code> という名前が表示されます。
      </p><p>
        <code class="literal">utf8mb3</code> は、<code class="literal">CHARACTER SET</code> 句以外のコンテキストでも有効です。 例: 
      </p><pre class="programlisting">mysqld --character-set-server=utf8mb3
</pre><pre class="programlisting">SET NAMES 'utf8mb3'; /* and other SET statements that have similar effect */
SELECT _utf8mb3 'a';
</pre><p>
        マルチバイト文字セットに関連するデータ型の記憶域の詳細は、<a class="xref" href="data-types.html#data-types-storage-reqs-strings" title="文字列型の格納要件">文字列型の格納要件</a> を参照してください。
      </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="charset-unicode-utf8"></a>10.9.3 utf8 文字セット (utf8mb3 のエイリアス)</h3></div></div></div><a class="indexterm" name="idm46723732356224"></a><a class="indexterm" name="idm46723732354768"></a><a class="indexterm" name="idm46723732352656"></a><p>
        <code class="literal">utf8</code> は、<code class="literal">utf8mb3</code> 文字セットのエイリアスです。 詳細は、<a class="xref" href="charset.html#charset-unicode-utf8mb3" title="10.9.2 utf8mb3 文字セット (3 バイトの UTF-8 Unicode エンコーディング)">セクション10.9.2「utf8mb3 文字セット (3 バイトの UTF-8 Unicode エンコーディング)」</a>を参照してください。 
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
          <code class="literal">utf8mb3</code> 文字セットは非推奨であり、将来の MySQL リリースで削除される予定です。 かわりに <code class="literal">utf8mb4</code> を使用してください。 <code class="literal">utf8</code> は現在 <code class="literal">utf8mb3</code> のエイリアスですが、ある時点では <code class="literal">utf8</code> が <code class="literal">utf8mb4</code> への参照になることが予想されます。 <code class="literal">utf8</code> の意味があいまいにならないように、<code class="literal">utf8</code> ではなく文字セット参照に <code class="literal">utf8mb4</code> を明示的に指定することを検討してください。 
        </p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="charset-unicode-ucs2"></a>10.9.4 ucs2 文字セット (UCS-2 Unicode エンコーディング)</h3></div></div></div><a class="indexterm" name="idm46723732338544"></a><p>
        UCS-2 では、すべての文字が 2 バイトの Unicode コードで表され、もっとも重要なバイトは 1 番目のバイトです。 例: <code class="literal">LATIN CAPITAL LETTER A</code> にはコード <code class="literal">0x0041</code> があり、これは 2 バイトのシーケンス (<code class="literal">0x00 0x41</code>) として格納されます。 <code class="literal">CYRILLIC SMALL LETTER YERU</code> (Unicode <code class="literal">0x044B</code>) は、2 バイトシーケンス (<code class="literal">0x04 0x4B</code>) として格納されます。 Unicode 文字とそのコードについては、<a class="ulink" href="http://www.unicode.org/" target="_top">「Unicode Consortium の web サイト」</a>を参照してください。 
      </p><p>
        <code class="literal">ucs2</code> 文字セットには、次の特性があります:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            BMP 文字のみをサポート (補助文字はサポートされません)
          </p></li><li class="listitem"><p>
            固定長の 16 ビットエンコーディングを使用し、文字ごとに 2 バイトが必要です。
          </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="charset-unicode-utf16"></a>10.9.5 utf16 文字セット (UTF-16 Unicode エンコーディング)</h3></div></div></div><a class="indexterm" name="idm46723732325936"></a><p>
        <code class="literal">utf16</code> 文字セットは、補助文字のエンコーディングを可能にする拡張機能を備えた <code class="literal">ucs2</code> 文字セットです。
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            BMP 文字の場合、<code class="literal">utf16</code> と <code class="literal">ucs2</code> には、同じコード値、同じエンコーディング、同じ長さという同一のストレージ特性があります。
          </p></li><li class="listitem"><p>
            補助文字の場合、<code class="literal">utf16</code> には、32 ビットを使用する文字を表すための特殊シーケンスがあります。 これは、<span class="quote">「<span class="quote">サロゲート</span>」</span>メカニズムと呼ばれます。<code class="literal">0xffff</code> より大きな数値の場合、10 ビットを確保して、これらを <code class="literal">0xd800</code> に追加し、最初の 16 ビット語に配置します。さらに 10 ビットを確保して、これらを <code class="literal">0xdc00</code> に追加し、次の 16 ビット語に配置します。 この結果、すべての補助文字に 32 ビットが必要になります。このうち最初の 16 ビットは <code class="literal">0xd800</code> と <code class="literal">0xdbff</code> の間の数値であり、残りの 16 ビットは <code class="literal">0xdc00</code> と <code class="literal">0xdfff</code> の間の数値になります。 Unicode 4.0 ドキュメントの「<a class="ulink" href="http://www.unicode.org/versions/Unicode4.0.0/ch15.pdf" target="_top">15.5 Surrogates Area</a>」に例が記載されています。 
          </p></li></ul></div><p>
        <code class="literal">utf16</code> はサロゲートをサポートし、<code class="literal">ucs2</code> をサポートしていないので、<code class="literal">utf16</code> でのみ適用される妥当性チェックがあります。下位サロゲートがなければ上位サロゲートを挿入できず、逆も同様です。 例: 
      </p><pre class="programlisting">INSERT INTO t (ucs2_column) VALUES (0xd800); /* legal */
INSERT INTO t (utf16_column)VALUES (0xd800); /* illegal */
</pre><p>
        技術的に有効であるが真の Unicode ではない文字 (つまり、Unicode が<span class="quote">「<span class="quote">未割り当てコードポイント</span>」</span>または<span class="quote">「<span class="quote">個人使用</span>」</span>文字、さらには <code class="literal">0xffff</code> のように<span class="quote">「<span class="quote">不正</span>」</span>と見なす文字) に対する妥当性チェックはありません。 たとえば、<code class="literal">U+F8FF</code> は Apple のロゴなので、これは有効です。 
      </p><pre class="programlisting">INSERT INTO t (utf16_column)VALUES (0xf8ff); /* legal */
</pre><p>
        このような文字は、すべてのユーザーに対し同じ意味を持たせることは期待できません。
      </p><p>
        MySQL は、最悪の場合 (文字が 4 バイトを必要とする場合) に対応する必要があるので、<code class="literal">utf16</code> カラムまたはインデックスの最大長は、<code class="literal">ucs2</code> カラムまたはインデックスの最大長の半分しかありません。 たとえば、<code class="literal">MEMORY</code> テーブルのインデックスキーの最大長は 3072 バイトであるため、次のステートメントは、<code class="literal">ucs2</code> および <code class="literal">utf16</code> カラムに対して許可されている最長のインデックスを持つテーブルを作成します: 
      </p><pre class="programlisting">CREATE TABLE tf (s1 VARCHAR(1536) CHARACTER SET ucs2) ENGINE=MEMORY;
CREATE INDEX i ON tf (s1);
CREATE TABLE tg (s1 VARCHAR(768) CHARACTER SET utf16) ENGINE=MEMORY;
CREATE INDEX i ON tg (s1);
</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="charset-unicode-utf16le"></a>10.9.6 utf16le 文字セット (UTF-16LE Unicode エンコーディング)</h3></div></div></div><a class="indexterm" name="idm46723732293840"></a><p>
        これは、<code class="literal">utf16</code> と同じですが、ビッグエンディアンではなくリトルエンディアンです。
      </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="charset-unicode-utf32"></a>10.9.7 utf32 文字セット (UTF-32 Unicode エンコーディング)</h3></div></div></div><a class="indexterm" name="idm46723732289712"></a><p>
        <code class="literal">utf32</code> 文字セットは固定長です (<code class="literal">ucs2</code> と同様で、<code class="literal">utf16</code> とは異なります)。<code class="literal">utf32</code> はすべての文字に 32 ビットを使用し、<code class="literal">ucs2</code> (すべての文字に 16 ビットを使用します) とも、<code class="literal">utf16</code> (一部の文字に 16 ビットを、ほかの文字に 32 ビットを使用します) とも異なります。
      </p><p>
        <code class="literal">utf32</code> は、<code class="literal">ucs2</code> の 2 倍のスペース、<code class="literal">utf16</code> よりも多くのスペースを必要としますが、<code class="literal">utf32</code> には、ストレージについて予測可能であるという <code class="literal">ucs2</code> と同じ利点があります。<code class="literal">utf32</code> に必要なバイト数は文字数の 4 倍になります。 また、<code class="literal">utf16</code> とは異なり、<code class="literal">utf32</code> でのエンコーディングにはトリックはないので、格納された値はコード値と等しくなります。 
      </p><p>
        後者の利点がどのように役立つかを説明するために、<code class="literal">utf32</code> コード値のときに <code class="literal">utf8mb4</code> 値を求める方法を示した例を挙げます。
      </p><pre class="programlisting">/* Assume code value = 100cc LINEAR B WHEELED CHARIOT */
CREATE TABLE tmp (utf32_col CHAR(1) CHARACTER SET utf32,
                  utf8mb4_col CHAR(1) CHARACTER SET utf8mb4);
INSERT INTO tmp VALUES (0x000100cc,NULL);
UPDATE tmp SET utf8mb4_col = utf32_col;
SELECT HEX(utf32_col),HEX(utf8mb4_col) FROM tmp;
</pre><p>
        MySQL では、未割り当ての Unicode 文字または個人使用領域の文字の追加について広く許容しています。 実際、<code class="literal">utf32</code> の妥当性チェックは 1 つしかありません。<code class="literal">0x10ffff</code> よりも大きなコード値はありません。 たとえば次の場合は不正です。 
      </p><pre class="programlisting">INSERT INTO t (utf32_column) VALUES (0x110000); /* illegal */
</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="charset-unicode-conversion"></a>10.9.8 3 バイト Unicode 文字セットと 4 バイト Unicode 文字セット間の変換</h3></div></div></div><p>
        このセクションでは、<code class="literal">utf8mb3</code> と <code class="literal">utf8mb4</code> の文字セット間で文字データを変換する際に発生する可能性のある問題について説明します。
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
          この説明では、主に <code class="literal">utf8mb3</code> と <code class="literal">utf8mb4</code> の間の変換に焦点を当てていますが、<code class="literal">ucs2</code> 文字セットと <code class="literal">utf16</code> や <code class="literal">utf32</code> などの文字セットの間の変換にも同様の原則が適用されます。
        </p></div><p>
        <code class="literal">utf8mb3</code> と <code class="literal">utf8mb4</code> の文字セットは、次の点で異なります:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">utf8mb3</code> では、Basic Multilingual Plane (BMP) の文字のみがサポートされます。<code class="literal">utf8mb4</code> では、BMP の外部にある補助文字もサポートされます。
          </p></li><li class="listitem"><p>
            <code class="literal">utf8mb3</code> では、文字当たり最大 3 バイトが使用されます。<code class="literal">utf8mb4</code> では、文字当たり最大 4 バイトが使用されます。
          </p></li></ul></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
          この説明では、3 バイトおよび 4 バイトの UTF-8 文字セットデータの参照に関する明示的な <code class="literal">utf8mb3</code> および <code class="literal">utf8mb4</code> 文字セット名について説明します。 ただし、テーブル定義では、<code class="literal">utf8</code> が使用されるのは、このような定義で指定された <code class="literal">utf8mb3</code> のインスタンスが、<code class="literal">utf8mb3</code> のエイリアスである <code class="literal">utf8</code> に MySQL によって変換されるためです。 
        </p></div><p>
        <code class="literal">utf8mb3</code> から <code class="literal">utf8mb4</code> に変換する利点の 1 つは、アプリケーションで補助文字を使用できることです。 1 つのトレードオフは、これによってデータストレージ領域要件が増加する可能性があることです。 
      </p><p>
        テーブルの内容に関しては、<code class="literal">utf8mb3</code> から <code class="literal">utf8mb4</code> への変換で問題は発生しません:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            BMP 文字の場合、<code class="literal">utf8mb4</code> と <code class="literal">utf8mb3</code> のストレージ特性は同じです: 同じコード値、同じエンコーディング、同じ長さ。
          </p></li><li class="listitem"><p>
            補助文字の場合、<code class="literal">utf8mb4</code> ではそれを格納するために 4 バイトが必要ですが、<code class="literal">utf8mb3</code> では文字を格納できません。 <code class="literal">utf8mb3</code> カラムを <code class="literal">utf8mb4</code> に変換する場合、補助文字がないため、変換の心配は必要ありません。 
          </p></li></ul></div><p>
        テーブル構造に関して、主な潜在的な非互換性は次のとおりです:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            可変長文字データ型 (<code class="literal">VARCHAR</code> および <code class="literal">TEXT</code> 型) の場合、<code class="literal">utf8mb4</code> カラムに許可される最大長は <code class="literal">utf8mb3</code> カラムより少なくなります。
          </p></li><li class="listitem"><p>
            すべての文字データ型 (<code class="literal">CHAR</code>、<code class="literal">VARCHAR</code> および <code class="literal">TEXT</code> 型) について、<code class="literal">utf8mb4</code> カラムでインデックス付けできる最大文字数は <code class="literal">utf8mb3</code> カラムより少なくなります。
          </p></li></ul></div><p>
        したがって、テーブルを <code class="literal">utf8mb3</code> から <code class="literal">utf8mb4</code> に変換するには、一部のカラムまたはインデックスの定義の変更が必要になる場合があります。
      </p><p>
        テーブルは、<code class="literal">ALTER TABLE</code> を使用して <code class="literal">utf8mb3</code> から <code class="literal">utf8mb4</code> に変換できます。 テーブルに次の定義があるとします: 
      </p><pre class="programlisting">CREATE TABLE t1 (
  col1 CHAR(10) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL,
  col2 CHAR(10) CHARACTER SET utf8 COLLATE utf8_bin NOT NULL
) CHARACTER SET utf8;
</pre><p>
        次のステートメントは、<code class="literal">utf8mb4</code> を使用するように <code class="literal">t1</code> を変換します。
      </p><pre class="programlisting">ALTER TABLE t1
  DEFAULT CHARACTER SET utf8mb4,
  MODIFY col1 CHAR(10)
    CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,
  MODIFY col2 CHAR(10)
    CHARACTER SET utf8mb4 COLLATE utf8mb4_bin NOT NULL;
</pre><p>
        <code class="literal">utf8mb3</code> から <code class="literal">utf8mb4</code> への変換時のキャッチは、<span class="emphasis"><em>bytes</em></span> に関してカラムまたはインデックスキーの最大長が変更されないことです。 そのため、文字の最大長が 3 ではなく 4 なので、<span class="emphasis"><em>文字</em></span>の点ではこれはより小さくなります。 <code class="literal">CHAR</code>、<code class="literal">VARCHAR</code> および <code class="literal">TEXT</code> データ型の場合は、MySQL テーブルを変換する際に次の問題を確認してください: 
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">utf8mb3</code> カラムのすべての定義をチェックし、ストレージエンジンの最大長を超えていないことを確認します。
          </p></li><li class="listitem"><p>
            <code class="literal">utf8mb3</code> カラムのすべてのインデックスをチェックし、ストレージエンジンの最大長を超えていないことを確認します。 最大値は、ストレージエンジンの機能強化によって変更されることがあります。 
          </p></li></ul></div><p>
        前述の条件が適用される場合は、定義されているカラムまたはインデックスの長さを減らすか、<code class="literal">utf8mb4</code> ではなく <code class="literal">utf8mb3</code> を引き続き使用する必要があります。
      </p><p>
        次に、構造的な変更が必要な例をいくつか示します。
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">TINYTEXT</code> カラムは、最大 255 バイトを保持できるので、3 バイトの文字は 85 個まで、4 バイトの文字は 63 個まで保持できます。 <code class="literal">utf8mb3</code> を使用する <code class="literal">TINYTEXT</code> カラムがあるが、63 文字を超えることができる必要があるとします。 データ型も <code class="literal">TEXT</code> などのより長い型に変更しないかぎり、これを <code class="literal">utf8mb4</code> に変換できません。 
          </p><p>
            同様に、<code class="literal">utf8mb3</code> から <code class="literal">utf8mb4</code> に変換する場合は、非常に長い <code class="literal">VARCHAR</code> カラムを長い <code class="literal">TEXT</code> 型のいずれかに変更する必要があります。
          </p></li><li class="listitem"><p>
            <code class="literal">InnoDB</code> では、<code class="literal"><a class="link" href="glossary.html#glos_compact_row_format" title="コンパクト行フォーマット">COMPACT</a></code> または <code class="literal"><a class="link" href="glossary.html#glos_redundant_row_format" title="冗長行フォーマット">REDUNDANT</a></code> の行形式を使用するテーブルのインデックスの最大長は 767 バイトであるため、<code class="literal">utf8mb3</code> または <code class="literal">utf8mb4</code> のカラムでは、それぞれ 255 文字または 191 文字までインデックス付けできます。 191 文字を超えるインデックスを持つ <code class="literal">utf8mb3</code> カラムが現在ある場合は、インデックス付けする文字数を減らす必要があります。 
          </p><p>
            <code class="literal"><a class="link" href="glossary.html#glos_compact_row_format" title="コンパクト行フォーマット">COMPACT</a></code> または <code class="literal"><a class="link" href="glossary.html#glos_redundant_row_format" title="冗長行フォーマット">REDUNDANT</a></code> の行形式を使用する <code class="literal">InnoDB</code> テーブルでは、次のカラムおよびインデックスの定義が有効です:
          </p><pre class="programlisting">col1 VARCHAR(500) CHARACTER SET utf8, INDEX (col1(255))
</pre><p>
            代わりに <code class="literal">utf8mb4</code> を使用するには、インデックスをより小さくする必要があります。
          </p><pre class="programlisting">col1 VARCHAR(500) CHARACTER SET utf8mb4, INDEX (col1(191))
</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
              <code class="literal"><a class="link" href="glossary.html#glos_compressed_row_format" title="圧縮行フォーマット">COMPRESSED</a></code> または <code class="literal"><a class="link" href="glossary.html#glos_dynamic_row_format" title="動的行フォーマット">DYNAMIC</a></code> の行形式を使用する <code class="literal">InnoDB</code> テーブルの場合、767 バイト (最大 3072 バイト) を超える <a class="link" href="glossary.html#glos_index_prefix" title="インデックスプリフィクス">index key prefixes</a> が許可されます。 これらの行フォーマットを使用して作成されたテーブルでは、<code class="literal">utf8mb3</code> カラムまたは <code class="literal">utf8mb4</code> カラムに対してそれぞれ最大 1024 文字または 768 文字をインデックス付けできます。 関連情報については、<a class="xref" href="innodb-storage-engine.html#innodb-limits" title="15.22 InnoDB の制限">セクション15.22「InnoDB の制限」</a>,および<a class="xref" href="innodb-storage-engine.html#innodb-row-format-dynamic" title="DYNAMIC 行フォーマット">DYNAMIC 行フォーマット</a>を参照してください。 
            </p></div></li></ul></div><p>
        前述の変更のタイプは、非常に長いカラムまたはインデックスを持つ場合にのみ必要になる可能性が高くなります。 それ以外の場合は、前述の <code class="literal">ALTER TABLE</code> を使用して、問題なくテーブルを <code class="literal">utf8mb3</code> から <code class="literal">utf8mb4</code> に変換できます。 
      </p><p>
        次の項目は、その他の潜在的な非互換性をまとめたものです:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">SET NAMES 'utf8mb4'</code> では、接続文字セットに対して 4 バイトの文字セットを使用する必要があります。 4 バイト文字がサーバーから送信されていないかぎり、問題は起こりません。 それ以外の場合は、文字ごとに最大 3 バイトの受信を要求するアプリケーションで問題が発生する可能性があります。 反対に、4 バイトの文字の送信を要求するアプリケーションは、その文字がサーバーで認識されることを確認する必要があります。 
          </p></li><li class="listitem"><p>
            レプリケーションでは、補助文字をサポートする文字セットをソースで使用する場合、すべてのレプリカもそれらを理解する必要があります。
          </p><p>
            また、ソースとレプリカでテーブルの定義が異なる場合、予期しない結果が発生する可能性があることにも注意してください。 たとえば、インデックスキーの最大長が異なると、ソースで <code class="literal">utf8mb3</code> を使用し、レプリカで <code class="literal">utf8mb4</code> を使用するリスクがあります。 
          </p></li></ul></div><p>
        <code class="literal">utf8mb4</code>, <code class="literal">utf16</code>, <code class="literal">utf16le</code> または <code class="literal">utf32</code> に変換し、<code class="literal">utf8mb3</code> または <code class="literal">ucs2</code> に変換しなおすことにした場合 (古いバージョンの MySQL にダウングレードする場合など)、次の考慮事項が適用されます:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">utf8mb3</code> および <code class="literal">ucs2</code> データに問題はありません。
          </p></li><li class="listitem"><p>
            サーバーは、変換元の文字セットを参照する定義を認識するのに十分な最新の状態である必要があります。
          </p></li><li class="listitem"><p>
            <code class="literal">utf8mb4</code> 文字セットを参照するオブジェクト定義の場合、ダウングレード前に <span class="command"><strong>mysqldump</strong></span> でダンプし、ダンプファイルを編集して <code class="literal">utf8mb4</code> のインスタンスを <code class="literal">utf8</code> に変更し、データに 4 バイト文字がないかぎり、古いサーバーでファイルをリロードできます。 古いサーバーでは、ダンプファイルのオブジェクト定義に <code class="literal">utf8</code> が表示され、(3 バイト)<code class="literal">utf8</code> 文字セットを使用する新しいオブジェクトが作成されます。 
          </p></li></ul></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="charset-charsets"></a>10.10 サポートされる文字セットおよび照合順序</h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="section"><a href="charset.html#charset-unicode-sets">10.10.1 Unicode 文字セット</a></span></dt><dt><span class="section"><a href="charset.html#charset-we-sets">10.10.2 西ヨーロッパの文字セット</a></span></dt><dt><span class="section"><a href="charset.html#charset-ce-sets">10.10.3 中央ヨーロッパの文字セット</a></span></dt><dt><span class="section"><a href="charset.html#charset-se-me-sets">10.10.4 南ヨーロッパおよび中東の文字セット</a></span></dt><dt><span class="section"><a href="charset.html#charset-baltic-sets">10.10.5 バルト語の文字セット</a></span></dt><dt><span class="section"><a href="charset.html#charset-cyrillic-sets">10.10.6 キリル文字の文字セット</a></span></dt><dt><span class="section"><a href="charset.html#charset-asian-sets">10.10.7 アジアの文字セット</a></span></dt><dt><span class="section"><a href="charset.html#charset-binary-set">10.10.8 バイナリ文字セット</a></span></dt></dl></div><p>
      このセクションでは MySQL がどの文字セットをサポートするかを示します。 関連する文字セットのグループごとに、1 つのサブセクションがあります。 文字セットごとに、許容される照合順序が一覧表示されます。 
    </p><p>
      使用可能な文字セットとそのデフォルトの照合順序をリストするには、<code class="literal">SHOW CHARACTER SET</code> ステートメントを使用するか、<code class="literal">INFORMATION_SCHEMA</code> <code class="literal">CHARACTER_SETS</code> テーブルをクエリーします。 例: 
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW CHARACTER SET;</code></strong>
+----------+---------------------------------+---------------------+--------+
| Charset  | Description                     | Default collation   | Maxlen |
+----------+---------------------------------+---------------------+--------+
| armscii8 | ARMSCII-8 Armenian              | armscii8_general_ci |      1 |
| ascii    | US ASCII                        | ascii_general_ci    |      1 |
| big5     | Big5 Traditional Chinese        | big5_chinese_ci     |      2 |
| binary   | Binary pseudo charset           | binary              |      1 |
| cp1250   | Windows Central European        | cp1250_general_ci   |      1 |
| cp1251   | Windows Cyrillic                | cp1251_general_ci   |      1 |
| cp1256   | Windows Arabic                  | cp1256_general_ci   |      1 |
| cp1257   | Windows Baltic                  | cp1257_general_ci   |      1 |
| cp850    | DOS West European               | cp850_general_ci    |      1 |
| cp852    | DOS Central European            | cp852_general_ci    |      1 |
| cp866    | DOS Russian                     | cp866_general_ci    |      1 |
| cp932    | SJIS for Windows Japanese       | cp932_japanese_ci   |      2 |
| dec8     | DEC West European               | dec8_swedish_ci     |      1 |
| eucjpms  | UJIS for Windows Japanese       | eucjpms_japanese_ci |      3 |
| euckr    | EUC-KR Korean                   | euckr_korean_ci     |      2 |
| gb18030  | China National Standard GB18030 | gb18030_chinese_ci  |      4 |
| gb2312   | GB2312 Simplified Chinese       | gb2312_chinese_ci   |      2 |
| gbk      | GBK Simplified Chinese          | gbk_chinese_ci      |      2 |
| geostd8  | GEOSTD8 Georgian                | geostd8_general_ci  |      1 |
| greek    | ISO 8859-7 Greek                | greek_general_ci    |      1 |
| hebrew   | ISO 8859-8 Hebrew               | hebrew_general_ci   |      1 |
| hp8      | HP West European                | hp8_english_ci      |      1 |
| keybcs2  | DOS Kamenicky Czech-Slovak      | keybcs2_general_ci  |      1 |
| koi8r    | KOI8-R Relcom Russian           | koi8r_general_ci    |      1 |
| koi8u    | KOI8-U Ukrainian                | koi8u_general_ci    |      1 |
| latin1   | cp1252 West European            | latin1_swedish_ci   |      1 |
| latin2   | ISO 8859-2 Central European     | latin2_general_ci   |      1 |
| latin5   | ISO 8859-9 Turkish              | latin5_turkish_ci   |      1 |
| latin7   | ISO 8859-13 Baltic              | latin7_general_ci   |      1 |
| macce    | Mac Central European            | macce_general_ci    |      1 |
| macroman | Mac West European               | macroman_general_ci |      1 |
| sjis     | Shift-JIS Japanese              | sjis_japanese_ci    |      2 |
| swe7     | 7bit Swedish                    | swe7_swedish_ci     |      1 |
| tis620   | TIS620 Thai                     | tis620_thai_ci      |      1 |
| ucs2     | UCS-2 Unicode                   | ucs2_general_ci     |      2 |
| ujis     | EUC-JP Japanese                 | ujis_japanese_ci    |      3 |
| utf16    | UTF-16 Unicode                  | utf16_general_ci    |      4 |
| utf16le  | UTF-16LE Unicode                | utf16le_general_ci  |      4 |
| utf32    | UTF-32 Unicode                  | utf32_general_ci    |      4 |
| utf8     | UTF-8 Unicode                   | utf8_general_ci     |      3 |
| utf8mb4  | UTF-8 Unicode                   | utf8mb4_0900_ai_ci  |      4 |
+----------+---------------------------------+---------------------+--------+
</pre><p>
      文字セットに複数の照合順序が存在する場合、どの照合順序が所定のアプリケーションにもっとも適しているかが明確でないことがあります。 正しくない照合順序を選択しないようにするには、代表的なデータ値で比較を行い、特定の照合順序で期待どおりに値がソートされることを確認すると役立ちます。 
    </p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="charset-unicode-sets"></a>10.10.1 Unicode 文字セット</h3></div></div></div><a class="indexterm" name="idm46723732128240"></a><a class="indexterm" name="idm46723732126240"></a><p>
        このセクションでは、Unicode 文字セットで使用可能な照合順序とその区別プロパティについて説明します。 Unicode の一般情報については、<a class="xref" href="charset.html#charset-unicode" title="10.9 Unicode のサポート">セクション10.9「Unicode のサポート」</a> を参照してください。 
      </p><p>
        MySQL では、複数の Unicode 文字セットがサポートされています:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">utf8mb4</code>: Unicode 文字セットの UTF-8 エンコーディング。文字ごとに 1 バイトから 4 バイトを使用します。
          </p></li><li class="listitem"><p>
            <code class="literal">utf8mb3</code>: Unicode 文字セットの UTF-8 エンコーディング。文字ごとに 1 バイトから 3 バイトを使用します。
          </p></li><li class="listitem"><p>
            <code class="literal">utf8</code>: <code class="literal">utf8mb3</code> のエイリアス。
          </p></li><li class="listitem"><p>
            <code class="literal">ucs2</code>: 文字ごとに 2 バイトを使用した Unicode 文字セットの UCS-2 エンコーディング。
          </p></li><li class="listitem"><p>
            <code class="literal">utf16</code>: 文字ごとに 2 バイトまたは 4 バイトを使用する Unicode 文字セットの UTF-16 エンコーディング。 <code class="literal">ucs2</code> と似ていますが、補助文字の拡張子が付いています。 
          </p></li><li class="listitem"><p>
            <code class="literal">utf16le</code>: Unicode 文字セットの UTF-16LE エンコーディング。 <code class="literal">utf16</code> と似ていますが、ビッグエンディアンではなくリトルエンディアンです。 
          </p></li><li class="listitem"><p>
            <code class="literal">utf32</code>: 文字ごとに 4 バイトを使用する Unicode 文字セットの UTF-32 エンコーディング。
          </p></li></ul></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
          <code class="literal">utf8mb3</code> 文字セットは非推奨であり、将来の MySQL リリースで削除される予定です。 かわりに <code class="literal">utf8mb4</code> を使用してください。 <code class="literal">utf8</code> は現在 <code class="literal">utf8mb3</code> のエイリアスですが、ある時点では <code class="literal">utf8</code> が <code class="literal">utf8mb4</code> への参照になることが予想されます。 <code class="literal">utf8</code> の意味があいまいにならないように、<code class="literal">utf8</code> ではなく文字セット参照に <code class="literal">utf8mb4</code> を明示的に指定することを検討してください。 
        </p></div><p>
        <code class="literal">utf8mb4</code>, <code class="literal">utf16</code>, <code class="literal">utf16le</code> および <code class="literal">utf32</code> は、BMP の外部にある Basic Multilingual Plane (BMP) 文字および補助文字をサポートしています。<code class="literal">utf8</code> および <code class="literal">ucs2</code> では BMP 文字のみがサポートされます。
      </p><p>
        ほとんどの Unicode 文字セットには、一般的な照合順序 (名前または言語指定子がない場合は<code class="literal">_general</code> で示されます)、バイナリ照合順序 (名前に<code class="literal">_bin</code> で示されます) および複数の言語固有の照合順序 (言語指定子で示されます) があります。 たとえば、<code class="literal">utf8mb4</code> の場合、<code class="literal">utf8mb4_general_ci</code> および <code class="literal">utf8mb4_bin</code> はその一般照合およびバイナリ照合であり、<code class="literal">utf8mb4_danish_ci</code> は言語固有の照合のいずれかです。 
      </p><a class="indexterm" name="idm46723732088096"></a><a class="indexterm" name="idm46723732085952"></a><p>
        ほとんどの文字セットには単一のバイナリ照合順序があります。<code class="literal">utf8mb4</code> は、次の例外です: <code class="literal">utf8mb4_bin</code> および (MySQL 8.0.17 以降の)<code class="literal">utf8mb4_0900_bin</code>。 これら 2 つのバイナリ照合順序は同じですが、パッド属性と照合順序特性によって区別されます。 <a class="xref" href="charset.html#charset-unicode-sets-pad-attributes" title="照合パッド属性">照合パッド属性</a>および<a class="xref" href="charset.html#charset-unicode-sets-collating-weights" title="文字照合ウェイト">文字照合ウェイト</a>を参照してください。 
      </p><p>
        <code class="literal">utf16le</code> の照合サポートは制限されています。 使用可能な唯一の照合順序は、<code class="literal">utf16le_general_ci</code> と <code class="literal">utf16le_bin</code> です。 これらは、<code class="literal">utf16_general_ci</code> と <code class="literal">utf16_bin</code> に似ています。 
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="xref" href="charset.html#charset-unicode-sets-uca" title="Unicode 照合アルゴリズム (UCA) のバージョン">Unicode 照合アルゴリズム (UCA) のバージョン</a></p></li><li class="listitem"><p><a class="xref" href="charset.html#charset-unicode-sets-pad-attributes" title="照合パッド属性">照合パッド属性</a></p></li><li class="listitem"><p><a class="xref" href="charset.html#charset-unicode-sets-language-specific-collations" title="言語固有の照合">言語固有の照合</a></p></li><li class="listitem"><p><a class="xref" href="charset.html#charset-unicode-sets-general-versus-unicode" title="_general_ci と unicode_ci の照合順序">_general_ci と unicode_ci の照合順序</a></p></li><li class="listitem"><p><a class="xref" href="charset.html#charset-unicode-sets-collating-weights" title="文字照合ウェイト">文字照合ウェイト</a></p></li><li class="listitem"><p><a class="xref" href="charset.html#charset-unicode-sets-miscellaneous" title="その他の情報">その他の情報</a></p></li></ul></div><div class="simplesect"><div class="titlepage"><div><div><h4 class="title"><a name="charset-unicode-sets-uca"></a>Unicode 照合アルゴリズム (UCA) のバージョン</h4></div></div></div><a class="indexterm" name="idm46723732067360"></a><p>
          MySQL は、<a class="ulink" href="http://www.unicode.org/reports/tr10/" target="_top">http://www.unicode.org/reports/tr10/</a> で説明している Unicode 照合順序アルゴリズム (UCA) に従って <code class="literal"><em class="replaceable"><code>xxx</code></em>_unicode_ci</code> 照合順序を実装します。 照合順序は、バージョン 4.0.0 UCA 重みキー (<a class="ulink" href="http://www.unicode.org/Public/UCA/4.0.0/allkeys-4.0.0.txt" target="_top">http://www.unicode.org/Public/UCA/4.0.0/allkeys-4.0.0.txt</a>) を使用します。 <code class="literal"><em class="replaceable"><code>xxx</code></em>_unicode_ci</code> 照合では、Unicode 照合アルゴリズムの一部のみがサポートされます。 一部の文字はサポートされておらず、結合マークは完全にサポートされていません。 これは主に、ベトナム語、ヨルバ語、ナバホ語などの一部のより小さな言語に影響します。 結合された文字は、文字列比較で単一の Unicode 文字を使用して書き込まれた同じ文字とは異なるとみなされ、その 2 つの文字の長さは異なるとみなされます (たとえば、<code class="literal">CHAR_LENGTH()</code> 関数または結果セットメタデータによって返されます)。 
        </p><p>
          4.0.0 より上位の UCA バージョンに基づく Unicode 照合では、照合名にバージョンが含まれます。 例: 
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">utf8mb4_unicode_520_ci</code> は UCA 5.2.0 重みキー (<a class="ulink" href="http://www.unicode.org/Public/UCA/5.2.0/allkeys.txt" target="_top">http://www.unicode.org/Public/UCA/5.2.0/allkeys.txt</a>) に基づいています。
            </p></li><li class="listitem"><p>
              <code class="literal">utf8mb4_0900_ai_ci</code> は UCA 9.0.0 の重みキー (<a class="ulink" href="http://www.unicode.org/Public/UCA/9.0.0/allkeys.txt" target="_top">http://www.unicode.org/Public/UCA/9.0.0/allkeys.txt</a>) に基づいています。
            </p></li></ul></div><p>
          <code class="literal">LOWER()</code> および <code class="literal">UPPER()</code> 関数は、引数の照合順序に従って大/小文字の折りたたみを実行します。 4.0.0 より大きい Unicode バージョンでのみ大文字と小文字のバージョンを持つ文字は、引数照合で十分な UCA バージョンが使用されている場合にのみ、これらの関数によって変換されます。 
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h4 class="title"><a name="charset-unicode-sets-pad-attributes"></a>照合パッド属性</h4></div></div></div><a class="indexterm" name="idm46723732050608"></a><a class="indexterm" name="idm46723732048576"></a><a class="indexterm" name="idm46723732047056"></a><a class="indexterm" name="idm46723732045136"></a><p>
          UCA 9.0.0 以上に基づく照合は、9.0.0 より前の UCA バージョンに基づく照合より高速です。 また、9.0.0 より前の UCA バージョンに基づく照合で使用される <code class="literal">PAD SPACE</code> とは対照的に、<code class="literal">NO PAD</code> のパッド属性もあります。 非バイナリ文字列を比較するために、<code class="literal">NO PAD</code> 照合順序では、文字列の末尾のスペースは他の文字と同様に扱われます (<a class="xref" href="charset.html#charset-binary-collations-trailing-space-comparisons" title="比較での後続領域の処理">比較での後続領域の処理</a> を参照)。 
        </p><p>
          照合のパッド属性を決定するには、<code class="literal">PAD_ATTRIBUTE</code> カラムを含む <code class="literal">INFORMATION_SCHEMA</code> <code class="literal">COLLATIONS</code> テーブルを使用します。 例: 
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT COLLATION_NAME, PAD_ATTRIBUTE</code></strong>
       <strong class="userinput"><code>FROM INFORMATION_SCHEMA.COLLATIONS</code></strong>
       <strong class="userinput"><code>WHERE CHARACTER_SET_NAME = 'utf8mb4';</code></strong>
+----------------------------+---------------+
| COLLATION_NAME             | PAD_ATTRIBUTE |
+----------------------------+---------------+
| utf8mb4_general_ci         | PAD SPACE     |
| utf8mb4_bin                | PAD SPACE     |
| utf8mb4_unicode_ci         | PAD SPACE     |
| utf8mb4_icelandic_ci       | PAD SPACE     |
...
| utf8mb4_0900_ai_ci         | NO PAD        |
| utf8mb4_de_pb_0900_ai_ci   | NO PAD        |
| utf8mb4_is_0900_ai_ci      | NO PAD        |
...
| utf8mb4_ja_0900_as_cs      | NO PAD        |
| utf8mb4_ja_0900_as_cs_ks   | NO PAD        |
| utf8mb4_0900_as_ci         | NO PAD        |
| utf8mb4_ru_0900_ai_ci      | NO PAD        |
| utf8mb4_ru_0900_as_cs      | NO PAD        |
| utf8mb4_zh_0900_as_cs      | NO PAD        |
| utf8mb4_0900_bin           | NO PAD        |
+----------------------------+---------------+
</pre><p>
          <code class="literal">NO PAD</code> 照合順序を持つ非バイナリ文字列値 (<code class="literal">CHAR</code>、<code class="literal">VARCHAR</code> および <code class="literal">TEXT</code>) の比較は、末尾の空白に関して他の照合順序とは異なります。 たとえば、<code class="literal">'a'</code>と<code class="literal">'a '</code>は、同じ文字列ではなく異なる文字列として比較されます。 これは、<code class="literal">utf8mb4</code> のバイナリ照合を使用して確認できます。 <code class="literal">utf8mb4_bin</code> の pad 属性は <code class="literal">PAD SPACE</code> ですが、<code class="literal">utf8mb4_0900_bin</code> の場合は <code class="literal">NO PAD</code> です。 したがって、<code class="literal">utf8mb4_0900_bin</code> に関連する操作では末尾にスペースが追加されず、末尾にスペースがある文字列を含む比較は、次の 2 つの照合順序で異なる場合があります: 
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>CREATE TABLE t1 (c CHAR(10) COLLATE utf8mb4_bin);</code></strong>
Query OK, 0 rows affected (0.03 sec)

mysql&gt; <strong class="userinput"><code>INSERT INTO t1 VALUES('a');</code></strong>
Query OK, 1 row affected (0.01 sec)

mysql&gt; <strong class="userinput"><code>SELECT * FROM t1 WHERE c = 'a ';</code></strong>
+------+
| c    |
+------+
| a    |
+------+
1 row in set (0.00 sec)

mysql&gt; <strong class="userinput"><code>ALTER TABLE t1 MODIFY c CHAR(10) COLLATE utf8mb4_0900_bin;</code></strong>
Query OK, 0 rows affected (0.02 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql&gt; <strong class="userinput"><code>SELECT * FROM t1 WHERE c = 'a ';</code></strong>
Empty set (0.00 sec)
</pre></div><div class="simplesect"><div class="titlepage"><div><div><h4 class="title"><a name="charset-unicode-sets-language-specific-collations"></a>言語固有の照合</h4></div></div></div><p>
          Unicode 照合アルゴリズム (UCA) のみに基づく順序付けが言語に対して適切に機能しない場合、MySQL は言語固有の Unicode 照合を実装します。 言語固有の照合は UCA ベースであり、追加の言語調整ルールがあります。 このようなルールの例は、このセクションの後半で説明します。 特定の言語の順序付けに関する質問については、<a class="ulink" href="unicode.org" target="_top">unicode.org</a> の <a class="ulink" href="http://www.unicode.org/cldr/charts/30/collation/index.html" target="_top">http://www.unicode.org/cldr/charts/30/collation/index.html</a> に Common Locale Data Repository (CLDR) 照合チャートが用意されています。 
        </p><a class="indexterm" name="idm46723732013088"></a><p>
          たとえば、非言語固有の <code class="literal">utf8mb4_0900_ai_ci</code> および言語固有の <code class="literal">utf8mb4_<em class="replaceable"><code>LOCALE</code></em>_0900_ai_ci</code> Unicode 照合には、それぞれ次の特性があります:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              照合は UCA 9.0.0 および CLDR v30 に基づいており、アクセントは区別されず、大/小文字も区別されません。 これらの特性は、照合名に<code class="literal">_0900</code>、<code class="literal">_ai</code> および<code class="literal">_ci</code> で示されます。 例外: CLDR で古典ラテンが定義されていないため、<code class="literal">utf8mb4_la_0900_ai_ci</code> は CLDR に基づいていません。 
            </p></li><li class="listitem"><p>
              照合は、[U+0, U+10FFFF]の範囲のすべての文字に対して機能します。
            </p></li><li class="listitem"><p>
              照合順序が言語固有でない場合は、補助文字を含むすべての文字がデフォルトの順序 (後述) でソートされます。 照合順序が言語固有の場合、言語固有のルールに従って言語の文字が正しくソートされ、言語内にない文字がデフォルトの順序でソートされます。 
            </p></li><li class="listitem"><p>
              デフォルトでは、照合では、DUCET テーブル (デフォルト Unicode 照合要素テーブル) にリストされているコードポイントを持つ文字が、テーブルに割り当てられている重み値に従ってソートされます。 照合では、UCA に従って構成される暗黙的な重み値を使用して、DUCET テーブルにコードポイントがリストされていない文字がソートされます。 
            </p></li><li class="listitem"><p>
              言語固有でない照合の場合、縮約シーケンス内の文字は個別の文字として扱われます。 言語固有の照合順序の場合、縮約によって文字のソート順が変更されることがあります。 
            </p></li></ul></div><p>
          次のテーブルに示すロケールコードまたは言語名を含む照合名は、言語固有の照合です。 Unicode 文字セットには、これらの言語の照合順序を含めることができます。 
        </p><div class="table"><a name="charset-unicode-collation-language-specifiers"></a><p class="title"><b>表 10.3 Unicode 照合言語指定子</b></p><div class="table-contents"><table summary="Language specifiers for Unicode character set collations."><col style="width=40%"><col style="width=60%"><thead><tr>
              <th>Language</th>
              <th>言語指定子</th>
            </tr></thead><tbody><tr>
              <td>中国語</td>
              <td><code class="literal">zh</code></td>
            </tr><tr>
              <td>古典ラテン語</td>
              <td><code class="literal">la</code> または <code class="literal">roman</code></td>
            </tr><tr>
              <td>クロアチア語</td>
              <td><code class="literal">hr</code> または <code class="literal">croatian</code></td>
            </tr><tr>
              <td>チェコ語</td>
              <td><code class="literal">cs</code> または <code class="literal">czech</code></td>
            </tr><tr>
              <td>デンマーク語</td>
              <td><code class="literal">da</code> または <code class="literal">danish</code></td>
            </tr><tr>
              <td>エスペラント</td>
              <td><code class="literal">eo</code> または <code class="literal">esperanto</code></td>
            </tr><tr>
              <td>エストニア語</td>
              <td><code class="literal">et</code> または <code class="literal">estonian</code></td>
            </tr><tr>
              <td>ドイツ電話帳の順序</td>
              <td><code class="literal">de_pb</code> または <code class="literal">german2</code></td>
            </tr><tr>
              <td>ハンガリー語</td>
              <td><code class="literal">hu</code> または <code class="literal">hungarian</code></td>
            </tr><tr>
              <td>アイスランド語</td>
              <td><code class="literal">is</code> または <code class="literal">icelandic</code></td>
            </tr><tr>
              <td>日本語</td>
              <td><code class="literal">ja</code></td>
            </tr><tr>
              <td>ラトビア語</td>
              <td><code class="literal">lv</code> または <code class="literal">latvian</code></td>
            </tr><tr>
              <td>リトアニア語</td>
              <td><code class="literal">lt</code> または <code class="literal">lithuanian</code></td>
            </tr><tr>
              <td>ペルシア語</td>
              <td><code class="literal">persian</code></td>
            </tr><tr>
              <td>ポーランド語</td>
              <td><code class="literal">pl</code> または <code class="literal">polish</code></td>
            </tr><tr>
              <td>ルーマニア語</td>
              <td><code class="literal">ro</code> または <code class="literal">romanian</code></td>
            </tr><tr>
              <td>ロシア語</td>
              <td><code class="literal">ru</code></td>
            </tr><tr>
              <td>シンハラ</td>
              <td><code class="literal">sinhala</code></td>
            </tr><tr>
              <td>スロバキア語</td>
              <td><code class="literal">sk</code> または <code class="literal">slovak</code></td>
            </tr><tr>
              <td>スロベニア語</td>
              <td><code class="literal">sl</code> または <code class="literal">slovenian</code></td>
            </tr><tr>
              <td>現代スペイン語</td>
              <td><code class="literal">es</code> または <code class="literal">spanish</code></td>
            </tr><tr>
              <td>スペイン語 (繁体字)</td>
              <td><code class="literal">es_trad</code> または <code class="literal">spanish2</code></td>
            </tr><tr>
              <td>スウェーデン語</td>
              <td><code class="literal">sv</code> または <code class="literal">swedish</code></td>
            </tr><tr>
              <td>トルコ語</td>
              <td><code class="literal">tr</code> または <code class="literal">turkish</code></td>
            </tr><tr>
              <td>ベトナム語</td>
              <td><code class="literal">vi</code> または <code class="literal">vietnamese</code></td>
            </tr></tbody></table></div></div><br class="table-break"><p>
          クロアチア語の照合順序は、これらのクロアチア語の文字に合わせて調整されます: <code class="literal">Č</code>, <code class="literal">Ć</code>, <code class="literal">Dž</code>, <code class="literal">Đ</code>, <code class="literal">Lj</code>, <code class="literal">Nj</code>, <code class="literal">Š</code>, <code class="literal">Ž</code>。
        </p><p>
          デンマーク語の照合順序は、ノルウェー語にも使用できます。
        </p><p>
          日本語の場合、<code class="literal">utf8mb4</code> 文字セットには <code class="literal">utf8mb4_ja_0900_as_cs</code> 照合順序および <code class="literal">utf8mb4_ja_0900_as_cs_ks</code> 照合順序が含まれます。 両方の照合でアクセントが区別され、大/小文字が区別されます。また、<code class="literal">utf8mb4_ja_0900_as_cs_ks</code> はカタカナ文字をひらがな文字と区別し、<code class="literal">utf8mb4_ja_0900_as_cs</code> はカタカナ文字とひらががな文字をソート用に同等として扱います。 日本語照合を必要とするが、kana 感度を必要としないアプリケーションでは、ソートパフォーマンスを向上させるために <code class="literal">utf8mb4_ja_0900_as_cs</code> を使用できます。<code class="literal">utf8mb4_ja_0900_as_cs</code> ではソートに 3 つの重みレベルが使用され、<code class="literal">utf8mb4_ja_0900_as_cs_ks</code> では 4 つが使用されます。 
        </p><p>
          アクセントを区別しない古典ラテン照合の場合、<code class="literal">I</code> と <code class="literal">J</code> は等しいと比較され、<code class="literal">U</code> と <code class="literal">V</code> は等しいと比較されます。 <code class="literal">I</code> と <code class="literal">J</code>、および <code class="literal">U</code> と <code class="literal">V</code> は、基本文字レベルと同じように比較されます。 つまり、<code class="literal">J</code> はアクセント付き <code class="literal">I</code> とみなされ、<code class="literal">U</code> はアクセント付き <code class="literal">V</code> とみなされます。 
        </p><p>
          スペイン語照合は、最新のスペイン語および従来のスペイン語で使用できます。 どちらの場合も、<code class="literal">ñ</code> (n-tilde) は <code class="literal">n</code> と <code class="literal">o</code> の間の個別の文字です。 また、スペイン語 (繁体字) の場合、<code class="literal">ch</code> は <code class="literal">c</code> と <code class="literal">d</code> の間の個別の文字であり、<code class="literal">ll</code> は <code class="literal">l</code> と <code class="literal">m</code> の間の個別の文字です。 
        </p><p>
          スペイン語の従来の照合は、アストゥリア語およびガリシア語にも使用できます。
        </p><p>
          スウェーデン語照合にはスウェーデン語ルールが含まれます。 たとえば、スウェーデン語には、ドイツ語やフランス語を使用するユーザーでは予期しないような次の関係があります。 
        </p><pre class="programlisting">Ü = Y &lt; Ö
</pre></div><div class="simplesect"><div class="titlepage"><div><div><h4 class="title"><a name="charset-unicode-sets-general-versus-unicode"></a>_general_ci と unicode_ci の照合順序</h4></div></div></div><p>
          Unicode 文字セットの場合、<code class="literal"><em class="replaceable"><code>xxx</code></em>_general_ci</code> 照合順序を使用して実行する演算は、<code class="literal"><em class="replaceable"><code>xxx</code></em>_unicode_ci</code> 照合順序のものよりも高速です。 たとえば、<code class="literal">utf8_general_ci</code> 照合順序の比較は、<code class="literal">utf8_unicode_ci</code> の比較よりも高速ですが、精度は少し低くなります。 これは、<code class="literal">utf8_unicode_ci</code> で拡張などのマッピングがサポートされているためです。つまり、一方の文字が他の文字の組合せと等しいと比較される場合です。 たとえば、<code class="literal">ß</code>はドイツ語および他の一部の言語の <code class="literal">ss</code> と同等です。<code class="literal">utf8_unicode_ci</code> では、縮約および無視可能な文字もサポートされています。<code class="literal">utf8_general_ci</code> は、拡張、縮小または無視可能な文字をサポートしないレガシー照合です。 文字間で 1 対 1 の比較しかできません。 
        </p><p>
          さらに詳しく説明するために、<code class="literal">utf8_general_ci</code> と <code class="literal">utf8_unicode_ci</code> の両方で次の等価が保持されています (比較または検索での影響については、<a class="xref" href="charset.html#charset-collation-effect" title="10.8.6 照合順序の効果の例">セクション10.8.6「照合順序の効果の例」</a> を参照してください):
        </p><pre class="programlisting">Ä = A
Ö = O
Ü = U
</pre><p>
          照合順序間の違いは、次の式が <code class="literal">utf8_general_ci</code> に当てはまるという点です。
        </p><pre class="programlisting">ß = s
</pre><p>
          一方、次の式は、ドイツ語 DIN-1 順序 (辞書順序とも呼ばれます) をサポートする <code class="literal">utf8_unicode_ci</code> に当てはまります。
        </p><pre class="programlisting">ß = ss
</pre><p>
          <code class="literal">utf8_unicode_ci</code> での順序付けが言語に対して適切に機能しない場合、MySQL は <code class="literal">utf8</code> 言語固有の照合を実装します。 たとえば、<code class="literal">utf8_unicode_ci</code> は、ドイツ語辞書順序とフランス語には適切に機能するので、特殊な <code class="literal">utf8</code> 照合順序を作成する必要はありません。 
        </p><p>
          <code class="literal">utf8_general_ci</code> は、<code class="literal">ß</code>が <code class="literal">ss</code> ではなく <code class="literal">s</code> と同等であることを除き、ドイツ語とフランス語の両方にも満足しています。 これがアプリケーションで許容可能な場合は、<code class="literal">utf8_general_ci</code> のほうが高速なので、こちらを使用する必要があります。 これが許容できない場合 (たとえば、ドイツ語辞書順序が必要な場合) は、<code class="literal">utf8_unicode_ci</code> のほうがより正確なので、こちらを使用してください。 
        </p><p>
          ドイツ語 DIN-2 (電話帳) 順序が必要な場合は、<code class="literal">utf8_german2_ci</code> 照合順序を使用してください。これは次の文字セットを等しいものと見なします。
        </p><pre class="programlisting">Ä = Æ = AE
Ö = Œ = OE
Ü = UE
ß = ss
</pre><p>
          <code class="literal">utf8_german2_ci</code> は <code class="literal">latin1_german2_ci</code> に似ていますが、後者は <code class="literal">AE</code> と同等の<code class="literal">Æ</code>または <code class="literal">OE</code> と同等の<code class="literal">Œ</code>を比較しません。 <code class="literal">utf8_general_ci</code> で十分であるので、ドイツ語辞書順序のための <code class="literal">latin1_german_ci</code> に対応する <code class="literal">utf8_german_ci</code> はありません。 
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h4 class="title"><a name="charset-unicode-sets-collating-weights"></a>文字照合ウェイト</h4></div></div></div><p>
          文字照合の重みは、次のように決定されます:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">_bin</code> (バイナリ) 照合順序を除くすべての Unicode 照合順序について、MySQL はテーブル検索を実行して文字照合順序を検索します。
            </p></li><li class="listitem"><p>
              <code class="literal">utf8mb4_0900_bin</code> 以外の<code class="literal">_bin</code> 照合順序の場合、重みはコードポイントに基づき、先行するゼロバイトが追加される場合があります。
            </p></li><li class="listitem"><p>
              <code class="literal">utf8mb4_0900_bin</code> の場合、重みは <code class="literal">utf8mb4</code> エンコーディングバイトです。 ソート順序は <code class="literal">utf8mb4_bin</code> の場合と同じですが、はるかに高速です。 
            </p></li></ul></div><p>
          照合加重は、<code class="literal">WEIGHT_STRING()</code> 関数を使用して表示できます。 (<a class="xref" href="functions.html#string-functions" title="12.8 文字列関数および演算子">セクション12.8「文字列関数および演算子」</a>を参照してください。) 照合順序で重み参照テーブルが使用されているが、文字がテーブルにない場合 (たとえば、<span class="quote">「<span class="quote">new</span>」</span> 文字であるため)、照合順序決定はより複雑になります: 
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              一般照合 (<code class="literal"><em class="replaceable"><code>xxx</code></em>_general_ci</code>) の BMP 文字の場合、重みはコードポイントです。
            </p></li><li class="listitem"><p>
              UCA 照合順序 (たとえば、<code class="literal"><em class="replaceable"><code>xxx</code></em>_unicode_ci</code> と言語固有の照合順序) での BMP 文字の場合、次のアルゴリズムが適用されます。
            </p><pre class="programlisting">if (code &gt;= 0x3400 &amp;&amp; code &lt;= 0x4DB5)
  base= 0xFB80; /* CJK Ideograph Extension */
else if (code &gt;= 0x4E00 &amp;&amp; code &lt;= 0x9FA5)
  base= 0xFB40; /* CJK Ideograph */
else
  base= 0xFBC0; /* All other characters */
aaaa= base +  (code &gt;&gt; 15);
bbbb= (code &amp; 0x7FFF) | 0x8000;
</pre><p>
              結果は、<code class="literal">aaaa</code> に <code class="literal">bbbb</code> が続いた 2 つの照合要素のシーケンスになります。 例: 
            </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT HEX(WEIGHT_STRING(_ucs2 0x04CF COLLATE ucs2_unicode_ci));</code></strong>
+----------------------------------------------------------+
| HEX(WEIGHT_STRING(_ucs2 0x04CF COLLATE ucs2_unicode_ci)) |
+----------------------------------------------------------+
| FBC084CF                                                 |
+----------------------------------------------------------+
</pre><p>
              したがって、<code class="literal">U+04cf CYRILLIC SMALL LETTER PALOCHKA</code> は、すべての UCA 4.0.0 照合順序で、<code class="literal">U+04c0 CYRILLIC LETTER PALOCHKA</code> より大きくなります。 UCA 5.2.0 照合順序では、すべての palochka は一緒にソートされます。 
            </p></li><li class="listitem"><p>
              一般的な照合順序の補助文字の場合、重みは <code class="literal">0xfffd REPLACEMENT CHARACTER</code> の重みです。 UCA 4.0.0 照合順序の補助文字の場合、照合重みは <code class="literal">0xfffd</code> です。 つまり、MySQL では、すべての補助文字は互いに等しく、ほとんどすべての BMP 文字より大きくなります。 
            </p><p>
              デザレット文字と <code class="literal">COUNT(DISTINCT)</code> を使用した例:
            </p><pre class="programlisting">CREATE TABLE t (s1 VARCHAR(5) CHARACTER SET utf32 COLLATE utf32_unicode_ci);
INSERT INTO t VALUES (0xfffd);   /* REPLACEMENT CHARACTER */
INSERT INTO t VALUES (0x010412); /* DESERET CAPITAL LETTER BEE */
INSERT INTO t VALUES (0x010413); /* DESERET CAPITAL LETTER TEE */
SELECT COUNT(DISTINCT s1) FROM t;
</pre><p>
              結果は 2 です。これは、MySQL <code class="literal"><em class="replaceable"><code>xxx</code></em>_unicode_ci</code> 照合順序で、置換文字は <code class="literal">0x0dc6</code> の重みを持ちますが、デザレット B とデザレット T はどちらも、<code class="literal">0xfffd</code> の重みを持つからです。 (<code class="literal">utf32_general_ci</code> 照合順序がかわりに使用された場合、3 文字すべての照合順序の重みが <code class="literal">0xfffd</code> であるため、結果は 1 になります。) 
            </p><p>
              くさび形文字と <code class="literal">WEIGHT_STRING()</code> を使用した例:
            </p><pre class="programlisting">/*
The four characters in the INSERT string are
00000041  # LATIN CAPITAL LETTER A
0001218F  # CUNEIFORM SIGN KAB
000121A7  # CUNEIFORM SIGN KISH
00000042  # LATIN CAPITAL LETTER B
*/
CREATE TABLE t (s1 CHAR(4) CHARACTER SET utf32 COLLATE utf32_unicode_ci);
INSERT INTO t VALUES (0x000000410001218f000121a700000042);
SELECT HEX(WEIGHT_STRING(s1)) FROM t;
</pre><p>
              結果は次のようになります。
            </p><pre class="programlisting">0E33 FFFD FFFD 0E4A
</pre><p>
              <code class="literal">0E33</code> と <code class="literal">0E4A</code> は、<a class="ulink" href="ftp://www.unicode.org/Public/UCA/4.0.0/allkeys-4.0.0.txt" target="_top">UCA 4.0.0</a> の主要な重みです。 <code class="literal">FFFD</code> は KAB の重みであり、KISH の重みでもあります。 
            </p><p>
              すべての補助文字が互いに同じであるというルールは、最適ではありませんが、問題を引き起こすとは考えられません。 これらの文字は非常にまれであるため、複数文字列が完全に補助文字で構成されることは非常にまれです。 日本では、補助文字はあいまいな漢字表意文字であるので、一般的なユーザーは、いずれにしてもそれらの順序を気にしません。 実際には、行を MySQL ルールでソートし、次にコードポイント値でソートする場合は、次のように簡単です: 
            </p><pre class="programlisting">ORDER BY s1 COLLATE utf32_unicode_ci, s1 COLLATE utf32_bin
</pre></li><li class="listitem"><p>
              4.0.0 より上位の UCA バージョン (たとえば、<code class="literal"><em class="replaceable"><code>xxx</code></em>_unicode_520_ci</code>) に基づく補助文字の場合、補助文字の照合加重がすべて同じであるとはかぎりません。 一部には、UCA <code class="filename">allkeys.txt</code> ファイルからの明示的な重みがあります。 それ以外には、このアルゴリズムから計算された重みがあります。 
            </p><pre class="programlisting">aaaa= base +  (code &gt;&gt; 15);
bbbb= (code &amp; 0x7FFF) | 0x8000;
</pre></li></ul></div><a class="indexterm" name="idm46723731792880"></a><p>
          <span class="quote">「<span class="quote">文字のコード値による順序付け</span>」</span>と<span class="quote">「<span class="quote">文字のバイナリ表現による順序付け</span>」</span>と間には違いがあります。これは、サロゲートのために、<code class="literal">utf16_bin</code> でのみ表示される違いです。
        </p><p>
          <code class="literal">utf16_bin</code> (<code class="literal">utf16</code> のバイナリ照合順序) が、<span class="quote">「<span class="quote">文字ごと</span>」</span>ではなく<span class="quote">「<span class="quote">バイトごと</span>」</span>のバイナリ比較であったとします。 その場合は、<code class="literal">utf16_bin</code> での文字の順序は <code class="literal">utf8_bin</code> での順序とは異なります。 たとえば、次の表には 2 つの珍しい文字が示されています。 最初の文字は <code class="literal">E000</code>-<code class="literal">FFFF</code> の範囲にあるので、サロゲートより大きくなりますが、補助文字より小さくなります。 2 番目の文字は補助文字です。 
        </p><pre class="programlisting">Code point  Character                    utf8         utf16
----------  ---------                    ----         -----
0FF9D       HALFWIDTH KATAKANA LETTER N  EF BE 9D     FF 9D
10384       UGARITIC LETTER DELTA        F0 90 8E 84  D8 00 DF 84
</pre><p>
          表の 2 つの文字は、<code class="literal">0xff9d</code> &lt; <code class="literal">0x10384</code> であるので、コードポイント値による順序になります。 また、<code class="literal">0xef</code> &lt; <code class="literal">0xf0</code> なので、<code class="literal">utf8</code> 値による順序になります。 ただし、<code class="literal">0xff</code> &gt; <code class="literal">0xd8</code> なので、バイトごとの比較を使用する場合は、<code class="literal">utf16</code> 値による順序にはなりません。 
        </p><p>
          したがって、MySQL の <code class="literal">utf16_bin</code> 照合順序は<span class="quote">「<span class="quote">バイトごと</span>」</span>にはなりません。 <span class="quote">「<span class="quote">コードポイントによる</span>」</span>順序になります。 MySQL は、<code class="literal">utf16</code> での補助文字エンコーディングを認識すると、文字のコードポイント値に変換してから比較します。 したがって、<code class="literal">utf8_bin</code> と <code class="literal">utf16_bin</code> の順序付けは同じになります。 これは、UCS_BASIC 照合順序の SQL:2008 標準の要件に一致します。<span class="quote">「<span class="quote">UCS_BASIC は、ソートされている文字列の文字の Unicode スカラー値によって、順序付け全体が決定される照合順序です。 これは UCS 文字レパートリーに適用できます。 すべての文字レパートリーは、UCS レパートリーのサブセットなので、UCS_BASIC 照合順序は、すべての文字セットに適用できる可能性があります。 ノート 11: 文字の Unicode スカラー値は、符号なしの整数として扱われるそのコードポイントです。</span>」</span> 
        </p><p>
          文字セットが <code class="literal">ucs2</code> である場合、比較はバイトごとになりますが、いずれにしても、<code class="literal">ucs2</code> 文字列にはサロゲートを含めないでください。
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h4 class="title"><a name="charset-unicode-sets-miscellaneous"></a>その他の情報</h4></div></div></div><p>
          <code class="literal"><em class="replaceable"><code>xxx</code></em>_general_mysql500_ci</code> 照合では、元の <code class="literal"><em class="replaceable"><code>xxx</code></em>_general_ci</code> 照合の 5.1.24 より前の順序が保持され、MySQL 5.1.24 より前に作成されたテーブルのアップグレードが許可されます (Bug #27877)。
        </p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="charset-we-sets"></a>10.10.2 西ヨーロッパの文字セット</h3></div></div></div><a class="indexterm" name="idm46723731761632"></a><a class="indexterm" name="idm46723731759488"></a><p>
        西ヨーロッパの文字セットには、大部分の西ヨーロッパ言語 (フランス語、スペイン語、カタロニア語、バスク語、ポルトガル語、イタリア語、アルバニア語、オランダ語、ドイツ語、デンマーク語、スウェーデン語、ノルウェー語、フィンランド語、フェロー語、アイスランド語、アイルランド語、スコットランド語、英語など) が含まれます。
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">ascii</code> (US ASCII) 照合順序:
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <code class="literal">ascii_bin</code>
              </p></li><li class="listitem"><p>
                <code class="literal">ascii_general_ci</code> (デフォルト)
              </p></li></ul></div></li><li class="listitem"><p>
            <code class="literal">cp850</code> (DOS 西ヨーロッパ言語) 照合順序:
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <code class="literal">cp850_bin</code>
              </p></li><li class="listitem"><p>
                <code class="literal">cp850_general_ci</code> (デフォルト)
              </p></li></ul></div></li><li class="listitem"><p>
            <code class="literal">dec8</code> (DEC 西ヨーロッパ言語) 照合順序:
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <code class="literal">dec8_bin</code>
              </p></li><li class="listitem"><p>
                <code class="literal">dec8_swedish_ci</code> (デフォルト)
              </p></li></ul></div></li><li class="listitem"><p>
            <code class="literal">hp8</code> (HP 西ヨーロッパ言語) 照合順序:
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <code class="literal">hp8_bin</code>
              </p></li><li class="listitem"><p>
                <code class="literal">hp8_english_ci</code> (デフォルト)
              </p></li></ul></div></li><li class="listitem"><p>
            <code class="literal">latin1</code> (cp1252 西ヨーロッパ言語) 照合順序:
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <code class="literal">latin1_bin</code>
              </p></li><li class="listitem"><p>
                <code class="literal">latin1_danish_ci</code>
              </p></li><li class="listitem"><p>
                <code class="literal">latin1_general_ci</code>
              </p></li><li class="listitem"><p>
                <code class="literal">latin1_general_cs</code>
              </p></li><li class="listitem"><p>
                <code class="literal">latin1_german1_ci</code>
              </p></li><li class="listitem"><p>
                <code class="literal">latin1_german2_ci</code>
              </p></li><li class="listitem"><p>
                <code class="literal">latin1_spanish_ci</code>
              </p></li><li class="listitem"><p>
                <code class="literal">latin1_swedish_ci</code> (デフォルト)
              </p></li></ul></div><p>
            MySQL の <code class="literal">latin1</code> は Windows <code class="literal">cp1252</code> 文字セットと同じです。 つまり、これは公式の <code class="literal">ISO 8859-1</code> または IANA (Internet Assigned Numbers Authority) <code class="literal">latin1</code> と同じですが、IANA <code class="literal">latin1</code> が、<code class="literal">0x80</code> と <code class="literal">0x9f</code> の間のコードポイントを<span class="quote">「<span class="quote">未定義</span>」</span>として扱うのに対し、<code class="literal">cp1252</code>、および MySQL の <code class="literal">latin1</code> はこれらの位置の文字を割り当てる点が異なることを示します。 たとえば <code class="literal">0x80</code> はユーロの記号です。 <code class="literal">cp1252</code> の<span class="quote">「<span class="quote">定義されていない</span>」</span>エントリでは、MySQL は <code class="literal">0x81</code> を Unicode <code class="literal">0x0081</code> に、<code class="literal">0x8d</code> を<code class="literal">0x008d</code> に、<code class="literal">0x8f</code> を<code class="literal">0x008f</code> に、<code class="literal">0x90</code> を<code class="literal">0x0090</code> に、<code class="literal">0x9d</code> を<code class="literal">0x009d</code> に変換します。 
          </p><p>
            <code class="literal">latin1_swedish_ci</code> 照合順序は、大部分の MySQL カスタマが使用しているデフォルトです。 スウェーデン語/フィンランド語の照合順序ルールに基づいているとされていますが、スウェーデン人やフィンランド人の中にはこの意見に賛同しないユーザーもいます。 
          </p><a class="indexterm" name="idm46723731704096"></a><a class="indexterm" name="idm46723731702608"></a><a class="indexterm" name="idm46723731701232"></a><a class="indexterm" name="idm46723731699840"></a><p>
            <code class="literal">latin1_german1_ci</code> と <code class="literal">latin1_german2_ci</code> の照合順序は、DIN-1 と DIN-2 の標準に基づいています。DIN は<span class="emphasis"><em>「<span lang="de" class="phrase">ドイツ工科大学フュールノルムン校</span>」</em></span> (ANSI と同等のドイツ語) を表します。 DIN-1 は<span class="quote">「<span class="quote">辞書の照合順序</span>」</span>と呼ばれ、DIN-2 は<span class="quote">「<span class="quote">電話帳の照合順序</span>」</span>と呼ばれています。 比較、または検索を行うときのこの効果の例については、<a class="xref" href="charset.html#charset-collation-effect" title="10.8.6 照合順序の効果の例">セクション10.8.6「照合順序の効果の例」</a>を参照してください。 
          </p><a class="indexterm" name="idm46723731693456"></a><a class="indexterm" name="idm46723731692016"></a><a class="indexterm" name="idm46723731690640"></a><a class="indexterm" name="idm46723731689248"></a><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <code class="literal">latin1_german1_ci</code> (辞書) ルール:
              </p><pre class="programlisting">Ä = A
Ö = O
Ü = U
ß = s
</pre></li><li class="listitem"><p>
                <code class="literal">latin1_german2_ci</code> (電話帳) ルール:
              </p><pre class="programlisting">Ä = AE
Ö = OE
Ü = UE
ß = ss
</pre></li></ul></div><p>
            <code class="literal">latin1_spanish_ci</code> 照合では、<code class="literal">ñ</code> (n-tilde) は <code class="literal">n</code> と <code class="literal">o</code> の間の個別の文字です。
          </p></li><li class="listitem"><p>
            <code class="literal">macroman</code> (Mac 西ヨーロッパ言語) 照合順序:
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <code class="literal">macroman_bin</code>
              </p></li><li class="listitem"><p>
                <code class="literal">macroman_general_ci</code> (デフォルト)
              </p></li></ul></div></li><li class="listitem"><p>
            <code class="literal">swe7</code> (7 ビットスウェーデン語) 照合順序:
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <code class="literal">swe7_bin</code>
              </p></li><li class="listitem"><p>
                <code class="literal">swe7_swedish_ci</code> (デフォルト)
              </p></li></ul></div></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="charset-ce-sets"></a>10.10.3 中央ヨーロッパの文字セット</h3></div></div></div><a class="indexterm" name="idm46723731667712"></a><a class="indexterm" name="idm46723731665568"></a><p>
        MySQL ではチェコ、スロバキア、ハンガリー、ルーマニア、スロベニア、クロアチア、ポーランド、セルビア (ラテン) で使用される文字セットも一部サポートされています。
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">cp1250</code> (Windows 中央ヨーロッパ言語) 照合順序:
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <code class="literal">cp1250_bin</code>
              </p></li><li class="listitem"><p>
                <code class="literal">cp1250_croatian_ci</code>
              </p></li><li class="listitem"><p>
                <code class="literal">cp1250_czech_cs</code>
              </p></li><li class="listitem"><p>
                <code class="literal">cp1250_general_ci</code> (デフォルト)
              </p></li><li class="listitem"><p>
                <code class="literal">cp1250_polish_ci</code>
              </p></li></ul></div></li><li class="listitem"><p>
            <code class="literal">cp852</code> (DOS 中央ヨーロッパ言語) 照合順序:
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <code class="literal">cp852_bin</code>
              </p></li><li class="listitem"><p>
                <code class="literal">cp852_general_ci</code> (デフォルト)
              </p></li></ul></div></li><li class="listitem"><p>
            <code class="literal">keybcs2</code> (DOS Kamenicky Czech-Slovak) 照合順序:
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <code class="literal">keybcs2_bin</code>
              </p></li><li class="listitem"><p>
                <code class="literal">keybcs2_general_ci</code> (デフォルト)
              </p></li></ul></div></li><li class="listitem"><p>
            <code class="literal">latin2</code> (ISO 8859-2 中央ヨーロッパ言語) 照合順序:
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <code class="literal">latin2_bin</code>
              </p></li><li class="listitem"><p>
                <code class="literal">latin2_croatian_ci</code>
              </p></li><li class="listitem"><p>
                <code class="literal">latin2_czech_cs</code>
              </p></li><li class="listitem"><p>
                <code class="literal">latin2_general_ci</code> (デフォルト)
              </p></li><li class="listitem"><p>
                <code class="literal">latin2_hungarian_ci</code>
              </p></li></ul></div></li><li class="listitem"><p>
            <code class="literal">macce</code> (Mac 中央ヨーロッパ言語) 照合順序:
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <code class="literal">macce_bin</code>
              </p></li><li class="listitem"><p>
                <code class="literal">macce_general_ci</code> (デフォルト)
              </p></li></ul></div></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="charset-se-me-sets"></a>10.10.4 南ヨーロッパおよび中東の文字セット</h3></div></div></div><a class="indexterm" name="idm46723731627424"></a><a class="indexterm" name="idm46723731625296"></a><a class="indexterm" name="idm46723731623248"></a><a class="indexterm" name="idm46723731621216"></a><p>
        MySQL では南ヨーロッパや中東、アルメニア語、アラビア語、ジョージア語、ギリシャ語、ヘブライ語、トルコ語の文字セットがサポートされています。
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">armscii8</code> (ARMSCII-8 アルメニア語) 照合順序: 
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <code class="literal">armscii8_bin</code>
              </p></li><li class="listitem"><p>
                <code class="literal">armscii8_general_ci</code> (デフォルト)
              </p></li></ul></div></li><li class="listitem"><p>
            <code class="literal">cp1256</code> (Windows アラビア語) 照合順序:
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <code class="literal">cp1256_bin</code>
              </p></li><li class="listitem"><p>
                <code class="literal">cp1256_general_ci</code> (デフォルト)
              </p></li></ul></div></li><li class="listitem"><p>
            <code class="literal">geostd8</code> (GEOSTD8 ジョージア語) 照合順序:
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <code class="literal">geostd8_bin</code>
              </p></li><li class="listitem"><p>
                <code class="literal">geostd8_general_ci</code> (デフォルト)
              </p></li></ul></div></li><li class="listitem"><p>
            <code class="literal">greek</code> (ISO 8859-7 ギリシャ語) 照合順序:
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <code class="literal">greek_bin</code>
              </p></li><li class="listitem"><p>
                <code class="literal">greek_general_ci</code> (デフォルト)
              </p></li></ul></div></li><li class="listitem"><p>
            <code class="literal">hebrew</code> (ISO 8859-8 ヘブライ語) 照合順序:
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <code class="literal">hebrew_bin</code>
              </p></li><li class="listitem"><p>
                <code class="literal">hebrew_general_ci</code> (デフォルト)
              </p></li></ul></div></li><li class="listitem"><p>
            <code class="literal">latin5</code> (ISO 8859-9 トルコ語) 照合順序:
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <code class="literal">latin5_bin</code>
              </p></li><li class="listitem"><p>
                <code class="literal">latin5_turkish_ci</code> (デフォルト)
              </p></li></ul></div></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="charset-baltic-sets"></a>10.10.5 バルト語の文字セット</h3></div></div></div><a class="indexterm" name="idm46723731587120"></a><a class="indexterm" name="idm46723731585008"></a><p>
        バルト語に含まれる文字セットにはエストニア語、ラトビア語、リトアニア言語が含まれます。
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">cp1257</code> (Windows バルト語) 照合順序:
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <code class="literal">cp1257_bin</code>
              </p></li><li class="listitem"><p>
                <code class="literal">cp1257_general_ci</code> (デフォルト)
              </p></li><li class="listitem"><p>
                <code class="literal">cp1257_lithuanian_ci</code>
              </p></li></ul></div></li><li class="listitem"><p>
            <code class="literal">latin7</code> (ISO 8859-13 バルト語) 照合順序:
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <code class="literal">latin7_bin</code>
              </p></li><li class="listitem"><p>
                <code class="literal">latin7_estonian_cs</code>
              </p></li><li class="listitem"><p>
                <code class="literal">latin7_general_ci</code> (デフォルト)
              </p></li><li class="listitem"><p>
                <code class="literal">latin7_general_cs</code>
              </p></li></ul></div></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="charset-cyrillic-sets"></a>10.10.6 キリル文字の文字セット</h3></div></div></div><a class="indexterm" name="idm46723731566416"></a><a class="indexterm" name="idm46723731564304"></a><p>
        ベラルーシ語、ブルガリア語、ロシア語、ウクライナ語、セルビア語 (キリル) とともに使用するキリル文字の文字セットおよび照合順序を以下に示します。
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">cp1251</code> (Windows キリル文字) 照合順序:
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <code class="literal">cp1251_bin</code>
              </p></li><li class="listitem"><p>
                <code class="literal">cp1251_bulgarian_ci</code>
              </p></li><li class="listitem"><p>
                <code class="literal">cp1251_general_ci</code> (デフォルト)
              </p></li><li class="listitem"><p>
                <code class="literal">cp1251_general_cs</code>
              </p></li><li class="listitem"><p>
                <code class="literal">cp1251_ukrainian_ci</code>
              </p></li></ul></div></li><li class="listitem"><p>
            <code class="literal">cp866</code> (DOS ロシア語) 照合順序:
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <code class="literal">cp866_bin</code>
              </p></li><li class="listitem"><p>
                <code class="literal">cp866_general_ci</code> (デフォルト)
              </p></li></ul></div></li><li class="listitem"><p>
            <code class="literal">koi8r</code> (KOI8-R Relcom Russian) 照合順序:
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <code class="literal">koi8r_bin</code>
              </p></li><li class="listitem"><p>
                <code class="literal">koi8r_general_ci</code> (デフォルト)
              </p></li></ul></div></li><li class="listitem"><p>
            <code class="literal">koi8u</code> (KOI8-U ウクライナ語) 照合順序:
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <code class="literal">koi8u_bin</code>
              </p></li><li class="listitem"><p>
                <code class="literal">koi8u_general_ci</code> (デフォルト)
              </p></li></ul></div></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="charset-asian-sets"></a>10.10.7 アジアの文字セット</h3></div></div></div><div class="toc"><dl class="toc"><dt><span class="section"><a href="charset.html#charset-cp932">10.10.7.1 cp932 文字セット</a></span></dt><dt><span class="section"><a href="charset.html#charset-gb18030">10.10.7.2 gb18030 文字セット</a></span></dt></dl></div><a class="indexterm" name="idm46723731535040"></a><a class="indexterm" name="idm46723731532928"></a><p>
        サポートされているアジアの文字セットには、中国語、日本語、韓国語、タイ語が含まれています。 これらは複雑な場合があります。 たとえば、中国語の文字セットは数千種類の文字に対応している必要があります。 <code class="literal">cp932</code> および <code class="literal">sjis</code> 文字セットの追加情報については、<a class="xref" href="charset.html#charset-cp932" title="10.10.7.1 cp932 文字セット">セクション10.10.7.1「cp932 文字セット」</a>を参照してください。 中国標準 GB 18030 の文字セットサポートの詳細は、<a class="xref" href="charset.html#charset-gb18030" title="10.10.7.2 gb18030 文字セット">セクション10.10.7.2「gb18030 文字セット」</a> を参照してください。 
      </p><p>
        MySQL でのアジアの文字セットのサポートに関連したよくある質問および問題に対する回答については、<a class="xref" href="faqs.html#faqs-cjk" title="A.11 MySQL 8.0 FAQ: MySQL の中国語、日本語、および韓国語の文字セット">セクションA.11「MySQL 8.0 FAQ: MySQL の中国語、日本語、および韓国語の文字セット」</a>を参照してください。
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">big5</code> (Big5 繁体字中国語) 照合順序:
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <code class="literal">big5_bin</code>
              </p></li><li class="listitem"><p>
                <code class="literal">big5_chinese_ci</code> (デフォルト)
              </p></li></ul></div></li><li class="listitem"><p>
            <a class="link" href="charset.html#charset-cp932" title="10.10.7.1 cp932 文字セット"><code class="literal">cp932</code></a> (SJIS for Windows 日本語) 照合順序:
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <code class="literal">cp932_bin</code>
              </p></li><li class="listitem"><p>
                <code class="literal">cp932_japanese_ci</code> (デフォルト)
              </p></li></ul></div></li><li class="listitem"><p>
            <code class="literal">eucjpms</code> (UJIS for Windows 日本語) 照合順序:
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <code class="literal">eucjpms_bin</code>
              </p></li><li class="listitem"><p>
                <code class="literal">eucjpms_japanese_ci</code> (デフォルト)
              </p></li></ul></div></li><li class="listitem"><p>
            <code class="literal">euckr</code> (EUC-KR 韓国語) 照合順序:
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <code class="literal">euckr_bin</code>
              </p></li><li class="listitem"><p>
                <code class="literal">euckr_korean_ci</code> (デフォルト)
              </p></li></ul></div></li><li class="listitem"><p>
            <code class="literal">gb2312</code> (GB2312 簡体字中国語) 照合順序:
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <code class="literal">gb2312_bin</code>
              </p></li><li class="listitem"><p>
                <code class="literal">gb2312_chinese_ci</code> (デフォルト)
              </p></li></ul></div></li><li class="listitem"><p>
            <code class="literal">gbk</code> (GBK 簡体字中国語) 照合順序:
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <code class="literal">gbk_bin</code>
              </p></li><li class="listitem"><p>
                <code class="literal">gbk_chinese_ci</code> (デフォルト)
              </p></li></ul></div></li><li class="listitem"><p>
            <a class="link" href="charset.html#charset-gb18030" title="10.10.7.2 gb18030 文字セット"><code class="literal">gb18030</code></a> (China National Standard GB18030) 照合順序:
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <code class="literal">gb18030_bin</code>
              </p></li><li class="listitem"><p>
                <code class="literal">gb18030_chinese_ci</code> (default)
              </p></li><li class="listitem"><p>
                <code class="literal">gb18030_unicode_520_ci</code>
              </p></li></ul></div></li><li class="listitem"><p>
            <code class="literal">sjis</code> (Shift-JIS 日本語) 照合順序:
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <code class="literal">sjis_bin</code>
              </p></li><li class="listitem"><p>
                <code class="literal">sjis_japanese_ci</code> (デフォルト)
              </p></li></ul></div></li><li class="listitem"><p>
            <code class="literal">tis620</code> (TIS620 タイ語) 照合順序:
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <code class="literal">tis620_bin</code>
              </p></li><li class="listitem"><p>
                <code class="literal">tis620_thai_ci</code> (デフォルト)
              </p></li></ul></div></li><li class="listitem"><p>
            <code class="literal">ujis</code> (EUC-JP 日本語) 照合順序:
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <code class="literal">ujis_bin</code>
              </p></li><li class="listitem"><p>
                <code class="literal">ujis_japanese_ci</code> (デフォルト)
              </p></li></ul></div></li></ul></div><p>
        <code class="literal">big5_chinese_ci</code> 照合順序は画数でソートします。
      </p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="charset-cp932"></a>10.10.7.1 cp932 文字セット</h4></div></div></div><p>
          <span class="bold"><strong><code class="literal">cp932</code> が必要な理由</strong></span>
        </p><p>
          MySQL では <code class="literal">sjis</code> 文字セットは IANA で定義される <code class="literal">Shift_JIS</code> 文字セットに対応しており、これらは JIS X0201 および JIS X0208 文字セットをサポートしています。 (<a class="ulink" href="http://www.iana.org/assignments/character-sets" target="_top">http://www.iana.org/assignments/character-sets</a>を参照してください。) 
        </p><p>
          ただし、記述用語としての<span class="quote">「<span class="quote">SHIFT JIS</span>」</span>の意味は非常にあいまいになっており、さまざまなベンダーが定義した <code class="literal">Shift_JIS</code> に対する拡張も含める場合もあります。
        </p><p>
          たとえば、日本語 Windows 環境で使用される<span class="quote">「<span class="quote">SHIFT JIS</span>」</span>は、Microsoft による <code class="literal">Shift_JIS</code> の拡張であり、正式な名称は <code class="literal">Microsoft Windows Codepage : 932</code> または <code class="literal">cp932</code> です。 <code class="literal">Shift_JIS</code> でサポートされる文字に加え、<code class="literal">cp932</code> では、NEC 特殊文字、NEC 選定 IBM 拡張文字、IBM 選定文字などの拡張文字をサポートします。 
        </p><p>
          多くの日本語ユーザーは、これらの拡張文字を使用するときに問題に直面してきました。 これらの問題は次の要因によって生じていました。 
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              MySQL が自動的に文字セットの変換を行なっていること。
            </p></li><li class="listitem"><p>
              文字セットが Unicode (<code class="literal">ucs2</code>) を使用して変換されていること。
            </p></li><li class="listitem"><p>
              <code class="literal">sjis</code> 文字セットが、これらの拡張文字の変換をサポートしていないこと。
            </p></li><li class="listitem"><p>
              いわゆる<span class="quote">「<span class="quote">SHIFT JIS</span>」</span>から Unicode への変換には複数の変換ルールが存在し、文字によっては、変換ルールに従って別々に Unicode に変換される場合があること。 MySQL ではこれらの変換ルールのうち、1 つしかサポートしていません (詳細は後述します)。 
            </p></li></ul></div><p>
          MySQL の <code class="literal">cp932</code> 文字セットは、これらの問題を解決するように設計されています。
        </p><p>
          MySQL が文字セットの変換をサポートするので、異なる変換ルールを持つ IANA の <code class="literal">Shift_JIS</code> と <code class="literal">cp932</code> を 2 つの異なる文字セットに区分することが重要になります。
        </p><p>
          <span class="bold"><strong><code class="literal">cp932</code> と <code class="literal">sjis</code> との相違点</strong></span>
        </p><p>
          <code class="literal">cp932</code> 文字セットは次の点で <code class="literal">sjis</code> と異なります。
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">cp932</code> は、NEC 特殊文字、NEC 選定 IBM 拡張文字、IBM 選定文字をサポートします。
            </p></li><li class="listitem"><p>
              一部の <code class="literal">cp932</code> 文字には、2 つの異なるコードポイントがあり、両方とも同一の Unicode コードポイントに変換されます。 Unicode から <code class="literal">cp932</code> に戻すときに、どちらかのコードポイントを選択する必要があります。 この<span class="quote">「<span class="quote">ラウンドトリップ変換</span>」</span>については、Microsoft が推奨するルールが使用されます。 (<a class="ulink" href="http://support.microsoft.com/kb/170559/EN-US/" target="_top">http://support.microsoft.com/kb/170559/EN-US/</a>を参照してください。) 
            </p><p>
              この変換ルールは次のように機能します。
            </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                  文字が JIS X 0208 文字と NEC 特殊文字の両方に存在する場合には、JIS X 0208 のコードポイントを使用します。
                </p></li><li class="listitem"><p>
                  文字が NEC 特殊文字と IBM 選定文字の両方に存在する場合には、NEC 特殊文字のコードポイントを使用します。
                </p></li><li class="listitem"><p>
                  文字が IBM 選定文字と NEC 選定 IBM 拡張文字の両方に存在する場合は、IBM 拡張文字のコードポイントを使用します。
                </p></li></ul></div><p>
              <a class="ulink" href="https://msdn.microsoft.com/en-us/goglobal/cc305152.aspx" target="_top">https://msdn.microsoft.com/en-us/goglobal/cc305152.aspx</a> に示す表には、<code class="literal">cp932</code> 文字の Unicode 値に関する情報が記載されています。 <code class="literal">cp932</code> の表で下に 4 桁の数字が表示されている項目については、その数字は対応する Unicode (<code class="literal">ucs2</code>) エンコーディングを表します。 下線付きの 2 桁の値のある表項目では、これらの 2 桁の値で始まる一定範囲の <code class="literal">cp932</code> 文字があります。 このような表項目をクリックすると、これらの桁の値で始まる <code class="literal">cp932</code> 文字対する各 Unicode 値を示したページが表示されます。 
            </p><p>
              詳細は次のリンクを参照してください。 それぞれ、次の文字セットのエンコーディングに対応します。 
            </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                  NEC 特殊文字 (先頭バイト <code class="literal">0x87</code>):
                </p><pre class="programlisting"><a class="ulink" href="https://msdn.microsoft.com/en-us/goglobal/gg674964" target="_top">https://msdn.microsoft.com/en-us/goglobal/gg674964</a>
</pre></li><li class="listitem"><p>
                  NEC 選択 -IBM 拡張文字 (リードバイト <code class="literal">0xED</code> および <code class="literal">0xEE</code>):
                </p><pre class="programlisting"><a class="ulink" href="https://msdn.microsoft.com/en-us/goglobal/gg671837" target="_top">https://msdn.microsoft.com/en-us/goglobal/gg671837</a>
<a class="ulink" href="https://msdn.microsoft.com/en-us/goglobal/gg671838" target="_top">https://msdn.microsoft.com/en-us/goglobal/gg671838</a>
</pre></li><li class="listitem"><p>
                  IBM が選択した文字 (リードバイト <code class="literal">0xFA</code>, <code class="literal">0xFB</code>, <code class="literal">0xFC</code>):
                </p><pre class="programlisting"><a class="ulink" href="https://msdn.microsoft.com/en-us/goglobal/gg671839" target="_top">https://msdn.microsoft.com/en-us/goglobal/gg671839</a>
<a class="ulink" href="https://msdn.microsoft.com/en-us/goglobal/gg671840" target="_top">https://msdn.microsoft.com/en-us/goglobal/gg671840</a>
<a class="ulink" href="https://msdn.microsoft.com/en-us/goglobal/gg671841" target="_top">https://msdn.microsoft.com/en-us/goglobal/gg671841</a>
</pre></li></ul></div></li><li class="listitem"><p>
              <code class="literal">cp932</code> は、<code class="literal">eucjpms</code> と組み合わせて使用することで、ユーザー定義の文字の変換をサポートし、<code class="literal">sjis</code>/<code class="literal">ujis</code> の変換での問題に対応します。 詳細は、<a class="ulink" href="http://www.sljfaq.org/afaq/encodings.html" target="_top">http://www.sljfaq.org/afaq/encodings.html</a>を参照してください。 
            </p></li></ul></div><p>
          一部の文字については、<code class="literal">ucs2</code> との間の変換は、<code class="literal">sjis</code> と <code class="literal">cp932</code> との場合と異なります。 次の表に、これらの違いを示します。 
        </p><p>
          <code class="literal">ucs2</code> への変換:
        </p><div class="informaltable"><table summary="sjis/cp932 values and the difference between sjis to ucs2 conversion and cp932 to ucs2 conversion."><col style="width=33%"><col style="width=33%"><col style="width=33%"><thead><tr>
              <th scope="col"><code class="literal">sjis</code>/<code class="literal">cp932</code> 値</th>
              <th scope="col"><code class="literal">sjis</code> -&gt; <code class="literal">ucs2</code> の変換</th>
              <th scope="col"><code class="literal">cp932</code> -&gt; <code class="literal">ucs2</code> の変換</th>
            </tr></thead><tbody><tr>
              <th scope="row">5C</th>
              <td>005C</td>
              <td>005C</td>
            </tr><tr>
              <th scope="row">7E</th>
              <td>007E</td>
              <td>007E</td>
            </tr><tr>
              <th scope="row">815C</th>
              <td>2015</td>
              <td>2015</td>
            </tr><tr>
              <th scope="row">815F</th>
              <td>005C</td>
              <td>FF3C</td>
            </tr><tr>
              <th scope="row">8160</th>
              <td>301C</td>
              <td>FF5E</td>
            </tr><tr>
              <th scope="row">8161</th>
              <td>2016</td>
              <td>2225</td>
            </tr><tr>
              <th scope="row">817C</th>
              <td>2212</td>
              <td>FF0D</td>
            </tr><tr>
              <th scope="row">8191</th>
              <td>00A2</td>
              <td>FFE0</td>
            </tr><tr>
              <th scope="row">8192</th>
              <td>00A3</td>
              <td>FFE1</td>
            </tr><tr>
              <th scope="row">81CA</th>
              <td>00AC</td>
              <td>FFE2</td>
            </tr></tbody></table></div><p>
          <code class="literal">ucs2</code> からの変換:
        </p><div class="informaltable"><table summary="ucs2 values and the difference between ucs2 to sjis conversion and ucs2 to cp932 conversion."><col style="width=33%"><col style="width=33%"><col style="width=33%"><thead><tr>
              <th scope="col"><code class="literal">ucs2</code> 値</th>
              <th scope="col"><code class="literal">ucs2</code> -&gt; <code class="literal">sjis</code> の変換</th>
              <th scope="col"><code class="literal">ucs2</code> -&gt; <code class="literal">cp932</code> の変換</th>
            </tr></thead><tbody><tr>
              <th scope="row">005C</th>
              <td>815F</td>
              <td>5C</td>
            </tr><tr>
              <th scope="row">007E</th>
              <td>7E</td>
              <td>7E</td>
            </tr><tr>
              <th scope="row">00A2</th>
              <td>8191</td>
              <td>3F</td>
            </tr><tr>
              <th scope="row">00A3</th>
              <td>8192</td>
              <td>3F</td>
            </tr><tr>
              <th scope="row">00AC</th>
              <td>81CA</td>
              <td>3F</td>
            </tr><tr>
              <th scope="row">2015</th>
              <td>815C</td>
              <td>815C</td>
            </tr><tr>
              <th scope="row">2016</th>
              <td>8161</td>
              <td>3F</td>
            </tr><tr>
              <th scope="row">2212</th>
              <td>817C</td>
              <td>3F</td>
            </tr><tr>
              <th scope="row">2225</th>
              <td>3F</td>
              <td>8161</td>
            </tr><tr>
              <th scope="row">301C</th>
              <td>8160</td>
              <td>3F</td>
            </tr><tr>
              <th scope="row">FF0D</th>
              <td>3F</td>
              <td>817C</td>
            </tr><tr>
              <th scope="row">FF3C</th>
              <td>3F</td>
              <td>815F</td>
            </tr><tr>
              <th scope="row">FF5E</th>
              <td>3F</td>
              <td>8160</td>
            </tr><tr>
              <th scope="row">FFE0</th>
              <td>3F</td>
              <td>8191</td>
            </tr><tr>
              <th scope="row">FFE1</th>
              <td>3F</td>
              <td>8192</td>
            </tr><tr>
              <th scope="row">FFE2</th>
              <td>3F</td>
              <td>81CA</td>
            </tr></tbody></table></div><p>
          日本語文字セットのユーザーは、<code class="option">--character-set-client-handshake</code> (または <code class="option">--skip-character-set-client-handshake</code>) を使用すると大きな効果が得られることに注意してください。 <a class="xref" href="server-administration.html#server-options" title="5.1.7 サーバーコマンドオプション">セクション5.1.7「サーバーコマンドオプション」</a>を参照してください。 
        </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="charset-gb18030"></a>10.10.7.2 gb18030 文字セット</h4></div></div></div><p>
          MySQL では、<code class="literal">gb18030</code> 文字セットは、中華人民共和国 (PRC) の正式な文字セットである<span class="quote">「<span class="quote">「中国規格 GB 18030-2005: 情報テクノロジ - 中国語のコード化された文字セット」</span>」</span>に対応します。
        </p><h5><a name="idm46723731290032"></a>MySQL gb18030 文字セットの特性</h5><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              GB 18030-2005 標準で定義されているすべてのコードポイントをサポートします。 範囲内の未割当てのコードポイント (GB+8431A439、GB+90308130) および (GB+E3329A36、GB+EF39EF39) は、'<code class="literal">?</code>' (0x3F) として扱われます。 未割当てのコードポイントの変換では、'<code class="literal">?</code>'が返されます。 
            </p></li><li class="listitem"><p>
              すべての GB18030 コードポイントに対して UPPER および LOWER 変換をサポートします。 Unicode で定義された大/小文字の折りたたみもサポートされます (<code class="filename">CaseFolding-6.3.0.txt</code> に基づく)。 
            </p></li><li class="listitem"><p>
              他の文字セットとの間でのデータ変換をサポートします。
            </p></li><li class="listitem"><p>
              <code class="literal">SET NAMES</code> などの SQL ステートメントをサポートします。
            </p></li><li class="listitem"><p>
              <code class="literal">gb18030</code> 文字列間、および <code class="literal">gb18030</code> 文字列と他の文字セットの文字列間の比較をサポートします。 文字列の文字セットが異なる場合は、変換が行われます。 末尾の空白を含むか無視する比較もサポートされています。 
            </p></li><li class="listitem"><p>
              Unicode のプライベート使用領域 (U+E000、U+F8FF) は、<code class="literal">gb18030</code> にマップされます。
            </p></li><li class="listitem"><p>
              (U+D800、U+DFFF) と GB18030 の間にマッピングはありません。 この範囲のコードポイントを変換しようとすると、'<code class="literal">?</code>'が返されます。 
            </p></li><li class="listitem"><p>
              着信シーケンスが不正な場合は、エラーまたは警告が返されます。 <code class="literal">CONVERT()</code> で不正な順序が使用されると、エラーが返されます。 それ以外の場合は、警告が返されます。 
            </p></li><li class="listitem"><p>
              <code class="literal">utf8</code> および <code class="literal">utf8mb4</code> との一貫性のために、合字で UPPER はサポートされていません。
            </p></li><li class="listitem"><p>
              <code class="literal">gb18030_unicode_520_ci</code> 照合順序を使用する場合、合字も大文字の合字と一致します。
            </p></li><li class="listitem"><p>
              文字に複数の大文字が含まれている場合、選択した大文字が小文字自体になります。
            </p></li><li class="listitem"><p>
              マルチバイトの最小長は 1、最大長は 4 です。 文字セットは、最初の 1 バイトまたは 2 バイトを使用して順序の長さを決定します。 
            </p></li></ul></div><h5><a name="idm46723731266480"></a>サポートされる照合</h5><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">gb18030_bin</code>: バイナリ照合。
            </p></li><li class="listitem"><p>
              <code class="literal">gb18030_chinese_ci</code>: Pinyin をサポートするデフォルトの照合。 中国語以外の文字のソートは、元のソートキーの順序に基づきます。 <code class="literal">UPPER(ch)</code> が存在する場合、元のソートキーは <code class="literal">GB(UPPER(ch))</code> です。 それ以外の場合、元のソートキーは <code class="literal">GB(ch)</code> です。 中国語の文字は、Unicode 共通ロケールデータリポジトリ (CLDR 24) で定義されている Pinyin 照合順序に従ってソートされます。 中国語以外の文字は、コードポイントの最大値である <code class="literal">GB+FE39FE39</code> を除き、中国語の文字の前にソートされます。 
            </p></li><li class="listitem"><p>
              <code class="literal">gb18030_unicode_520_ci</code>: Unicode 照合。 合字が正しくソートされていることを確認する必要がある場合は、この照合を使用します。 
            </p></li></ul></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="charset-binary-set"></a>10.10.8 バイナリ文字セット</h3></div></div></div><a class="indexterm" name="idm46723731255328"></a><a class="indexterm" name="idm46723731253328"></a><p>
        <code class="literal">binary</code> 文字セットは、バイトのシーケンスであるバイナリ文字列の文字セットです。 <code class="literal">binary</code> 文字セットには、<code class="literal">binary</code> とも呼ばれる照合順序があります。 比較およびソートは、数値文字コード値 (マルチバイト文字の場合は数値バイト値とは異なる) ではなく、数値バイト値に基づきます。 <code class="literal">binary</code> 文字セットの <code class="literal">binary</code> 照合順序と非バイナリ文字セットの<code class="literal">_bin</code> 照合順序の違いについては、<a class="xref" href="charset.html#charset-binary-collations" title="10.8.5 バイナリ照合順序と_bin 照合順序">セクション10.8.5「バイナリ照合順序と_bin 照合順序」</a> を参照してください。 
      </p><p>
        <code class="literal">binary</code> 文字セットの場合、大文字と小文字の区別およびアクセントの等価の概念は適用されません:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            バイナリ文字列として格納されたシングルバイト文字の場合、文字境界とバイト境界は同じであるため、大文字と小文字の違いとアクセントの違いは比較で重要です。 つまり、<code class="literal">binary</code> 照合では大/小文字が区別され、アクセントが区別されます。 
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET NAMES 'binary';</code></strong>
mysql&gt; <strong class="userinput"><code>SELECT CHARSET('abc'), COLLATION('abc');</code></strong>
+----------------+------------------+
| CHARSET('abc') | COLLATION('abc') |
+----------------+------------------+
| binary         | binary           |
+----------------+------------------+
mysql&gt; <strong class="userinput"><code>SELECT 'abc' = 'ABC', 'a' = 'ä';</code></strong>
+---------------+------------+
| 'abc' = 'ABC' | 'a' = 'ä'  |
+---------------+------------+
|             0 |          0 |
+---------------+------------+
</pre></li><li class="listitem"><p>
            バイナリ文字列として格納されるマルチバイト文字の場合、文字とバイトの境界は異なります。 文字境界は失われるため、文字境界に依存する比較は意味がありません。 
          </p></li></ul></div><p>
        バイナリ文字列の大文字と小文字の変換を実行するには、まず文字列に格納されているデータに適した文字セットを使用して、非バイナリ文字列に変換します:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET @str = BINARY 'New York';</code></strong>
mysql&gt; <strong class="userinput"><code>SELECT LOWER(@str), LOWER(CONVERT(@str USING utf8mb4));</code></strong>
+-------------+------------------------------------+
| LOWER(@str) | LOWER(CONVERT(@str USING utf8mb4)) |
+-------------+------------------------------------+
| New York    | new york                           |
+-------------+------------------------------------+
</pre><p>
        文字列式をバイナリ文字列に変換する場合、次の構造体は同等です:
      </p><pre class="programlisting">BINARY <em class="replaceable"><code>expr</code></em>
CAST(<em class="replaceable"><code>expr</code></em> AS BINARY)
CONVERT(<em class="replaceable"><code>expr</code></em> USING BINARY)
</pre><a class="indexterm" name="idm46723731229488"></a><p>
        値が文字列リテラルの場合、<code class="literal">_binary</code> イントロデューサを使用してバイナリ文字列として指定できます。 例: 
      </p><pre class="programlisting">_binary 'a'
</pre><p>
        <code class="literal">_binary</code> イントロデューサは 16 進数リテラルおよびビット値リテラルにも使用できますが、不要です。このようなリテラルはデフォルトでバイナリ文字列です。
      </p><p>
        イントロデューサの詳細は、<a class="xref" href="charset.html#charset-introducer" title="10.3.8 文字セットイントロデューサ">セクション10.3.8「文字セットイントロデューサ」</a> を参照してください。
      </p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="charset-restrictions"></a>10.11 文字セットの制約</h2></div></div></div><a class="indexterm" name="idm46723731221168"></a><a class="indexterm" name="idm46723731219056"></a><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          識別子は、<code class="literal">utf8</code> を使用して <code class="literal">mysql</code> データベーステーブル (<code class="literal">user</code>、<code class="literal">db</code> など) に格納されますが、識別子には Basic Multilingual Plane (BMP) の文字だけを含めることができます。 識別子では補助文字は許可されません。 
        </p></li><li class="listitem"><p>
          <code class="literal">ucs2</code>、<code class="literal">utf16</code>、<code class="literal">utf16le</code>、および <code class="literal">utf32</code> 文字セットには次の制約があります。
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              クライアント文字セットとして使用できるものはありません。 <a class="xref" href="charset.html#charset-connection-impermissible-client-charset" title="許可されていないクライアント文字セット">許可されていないクライアント文字セット</a>を参照してください。 
            </p></li><li class="listitem"><p>
              現在、<code class="literal">LOAD DATA</code> を使用して、これらの文字セットを使用するデータファイルをロードすることはできません。
            </p></li><li class="listitem"><p>
              <code class="literal">FULLTEXT</code> インデックスは、これらのいずれかの文字セットを使用するカラムでは作成できません。 ただし、インデックスのないカラムでは <code class="literal">IN BOOLEAN MODE</code> 検索を実行できます。 
            </p></li></ul></div></li><li class="listitem"><p>
          <code class="literal">REGEXP</code> および <code class="literal">RLIKE</code> 演算子はバイト単位で機能するため、マルチバイトセーフではなく、マルチバイト文字セットを使用すると想定外の結果が生成される可能性があります。 さらに、これらの演算子ではそのバイト値に基づいて文字が比較されるため、アクセント記号付き文字は、指定された照合順序では等しいとみなされた場合でも、等しいとして比較されない可能性があります。 
        </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="error-message-language"></a>10.12 エラーメッセージ言語の設定</h2></div></div></div><a class="indexterm" name="idm46723731197168"></a><a class="indexterm" name="idm46723731195024"></a><a class="indexterm" name="idm46723731192960"></a><a class="indexterm" name="idm46723731190896"></a><p>
      デフォルトでは、<span class="command"><strong>mysqld</strong></span> は英語でエラーメッセージを生成しますが、他のいくつかの言語では表示できます: チェコ語、デンマーク語、オランダ語、エストニア語、フランス語、ドイツ語、ギリシャ語、ハンガリー語、イタリア語、日本語、韓国語、ノルウェー語、ノルウェー語、ニュージー語、ポーランド語、ポルトガル語、ルーマニア語、ロシア語、スロバキア語、スペイン語またはスウェーデン語。 これは、サーバーがエラーログに書き込み、クライアントに送信するメッセージに適用されます。 
    </p><p>
      サーバーがエラーメッセージを書き込む言語を選択するには、このセクションの手順に従います。 エラーメッセージの (言語ではなく) 文字セットの変更の詳細は、<a class="xref" href="charset.html#charset-errors" title="10.6 エラーメッセージ文字セット">セクション10.6「エラーメッセージ文字セット」</a>を参照してください。 エラーロギングの構成に関する一般情報は、<a class="xref" href="server-administration.html#error-log" title="5.4.2 エラーログ">セクション5.4.2「エラーログ」</a> を参照してください。 
    </p><p>
      サーバーは、次のルールを使用してエラーメッセージファイルを検索します:
    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          ファイルは、<code class="literal">lc_messages_dir</code> および <code class="literal">lc_messages</code> の 2 つのシステム変数値から作成されたディレクトリ内で検索され、後者は言語名に変換されます。 次のコマンドを使用してサーバーを起動するとします。 
        </p><pre class="programlisting">mysqld --lc_messages_dir=/usr/share/mysql --lc_messages=fr_FR
</pre><p>
          この場合、<span class="command"><strong>mysqld</strong></span> は、ロケール <code class="literal">fr_FR</code> を言語 <code class="literal">french</code> にマップし、<code class="filename">/usr/share/mysql/french</code> ディレクトリでエラーファイルを検索します。
        </p><p>
          デフォルトでは、言語ファイルは、MySQL ベースディレクトリ下の <code class="filename">share/mysql/<em class="replaceable"><code>LANGUAGE</code></em></code> ディレクトリにあります。
        </p></li><li class="listitem"><p>
          前述のように構築されたディレクトリでメッセージファイルが見つからない場合、サーバーは、<code class="literal">lc_messages</code> 値を無視し、検索する場所として <code class="literal">lc_messages_dir</code> 値だけを使用します。
        </p></li><li class="listitem"><p>
          構成されたメッセージファイルが見つからない場合は、問題を示すメッセージがエラーログに書き込まれ、デフォルトで組込み英語メッセージに設定されます。
        </p></li></ul></div><p>
      <code class="literal">lc_messages_dir</code> システム変数は、サーバーの起動時にのみ設定でき、実行時にはグローバルな読取り専用値のみを持ちます。<code class="literal">lc_messages</code> はサーバーの起動時に設定でき、実行時に変更できるグローバル値およびセッション値を持ちます。 したがって、エラーメッセージの言語はサーバーの実行中に変更でき、各クライアントはセッション <code class="literal">lc_messages</code> 値を目的のロケール名に設定することで、独自のエラーメッセージの言語を持つことができます。 たとえば、サーバーがエラーメッセージに <code class="literal">fr_FR</code> ロケールを使用している場合、クライアントは、次のステートメントを実行すると、英語でエラーメッセージを受信できます。 
    </p><pre class="programlisting">SET lc_messages = 'en_US';
</pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="adding-character-set"></a>10.13 文字セットの追加</h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="section"><a href="charset.html#character-arrays">10.13.1 文字定義配列</a></span></dt><dt><span class="section"><a href="charset.html#string-collating">10.13.2 複雑な文字セットの文字列照合のサポート</a></span></dt><dt><span class="section"><a href="charset.html#multibyte-characters">10.13.3 複雑な文字セットのマルチバイト文字のサポート</a></span></dt></dl></div><a class="indexterm" name="idm46723731161312"></a><a class="indexterm" name="idm46723731159200"></a><p>
      このセクションでは、MySQL に文字セットを追加する手順について説明します。 適切な手順は、文字セットが単純か複雑かによって異なります。 
    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          ソートに特別な文字列照合ルーチンを必要とせず、マルチバイト文字のサポートを必要としない文字セットが、単純な文字セットです。
        </p></li><li class="listitem"><p>
          これらのどちらかの機能が必要な文字セットが、複雑な文字セットです。
        </p></li></ul></div><p>
      たとえば、<code class="literal">greek</code> と <code class="literal">swe7</code> は単純な文字セットですが、<code class="literal">big5</code> と <code class="literal">czech</code> は複雑な文字セットです。
    </p><p>
      次の手順を使用するには、MySQL ソース配布が必要です。 この手順では、<em class="replaceable"><code>MYSET</code></em> は追加する文字セットの名前を表します。 
    </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
          <em class="replaceable"><code>MYSET</code></em> の <code class="literal">&lt;charset&gt;</code> 要素を <code class="filename">sql/share/charsets/Index.xml</code> ファイルに追加します。 ファイル内既存の内容を、新しい内容を追加するためのガイドとして使用します。 <code class="literal">latin1</code> <code class="literal">&lt;charset&gt;</code> 要素のリストの一部を以下に示します。 
        </p><pre class="programlisting">&lt;charset name="latin1"&gt;
  &lt;family&gt;Western&lt;/family&gt;
  &lt;description&gt;cp1252 West European&lt;/description&gt;
  ...
  &lt;collation name="latin1_swedish_ci" id="8" order="Finnish, Swedish"&gt;
    &lt;flag&gt;primary&lt;/flag&gt;
    &lt;flag&gt;compiled&lt;/flag&gt;
  &lt;/collation&gt;
  &lt;collation name="latin1_danish_ci" id="15" order="Danish"/&gt;
  ...
  &lt;collation name="latin1_bin" id="47" order="Binary"&gt;
    &lt;flag&gt;binary&lt;/flag&gt;
    &lt;flag&gt;compiled&lt;/flag&gt;
  &lt;/collation&gt;
  ...
&lt;/charset&gt;
</pre><p>
          <code class="literal">&lt;charset&gt;</code> 要素は、文字セットのすべての照合順序を一覧表示します。 これらには少なくも、バイナリ照合順序とデフォルト (プライマリ) 照合順序が含まれます。 多くの場合、デフォルトの照合には接尾辞 <code class="literal">general_ci</code> を使用して名前が付けられます (一般に、大/小文字は区別されません)。 バイナリ照合順序をデフォルト照合順序にすることは可能ですが、通常、これらは異なります。 デフォルト照合順序には <code class="literal">primary</code> フラグを付ける必要があります。 バイナリ照合順序には <code class="literal">binary</code> フラグを付ける必要があります。 
        </p><p>
          それぞれの照合順序に一意の ID 番号を割り当てる必要があります。 1024 から 2047 の ID 範囲は、ユーザー定義の照合順序に予約されています。 現在使用されている照合順序 ID の最大値を検索するには、次のクエリーを使用します。 
        </p><pre class="programlisting">SELECT MAX(ID) FROM INFORMATION_SCHEMA.COLLATIONS;
</pre></li><li class="listitem"><p>
          このステップは、追加しているのが単純な文字セットか、複雑な文字セットかにより異なります。 単純な文字セットには、構成ファイルだけが必要ですが、複雑な文字セットには、照合順序関数またはマルチバイト関数あるいはその両方を定義する C ソースファイルが必要です。 
        </p><p>
          単純な文字セットの場合、文字セットプロパティーについて記した構成ファイル (<code class="filename"><em class="replaceable"><code>MYSET</code></em>.xml</code>) を作成します。 <code class="filename">sql/share/charsets</code> ディレクトリにこのファイルを作成します。 このファイルの土台として <code class="filename">latin1.xml</code> のコピーを使用できます。 ファイルの構文は非常に単純です。 
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              コメントは、通常の XML コメント (<code class="literal">&lt;!-- <em class="replaceable"><code>text</code></em> --&gt;</code>) として記述されます。
            </p></li><li class="listitem"><p>
              <code class="literal">&lt;map&gt;</code> 配列要素内の単語は、任意の数の空白によって区切られます。
            </p></li><li class="listitem"><p>
              <code class="literal">&lt;map&gt;</code> 配列要素内の各単語は、16 進形式の数値で表す必要があります。
            </p></li><li class="listitem"><p>
              <code class="literal">&lt;ctype&gt;</code> 要素の <code class="literal">&lt;map&gt;</code> 配列要素には 257 語が含まれます。 そのあとのほかの <code class="literal">&lt;map&gt;</code> 配列要素には 256 語が含まれます。 <a class="xref" href="charset.html#character-arrays" title="10.13.1 文字定義配列">セクション10.13.1「文字定義配列」</a>を参照してください。 
            </p></li><li class="listitem"><p>
              <code class="filename">Index.xml</code> 内の文字セットに対して <code class="literal">&lt;charset&gt;</code> 要素に一覧表示された照合順序ごとに、文字の順序を定義する <code class="literal">&lt;collation&gt;</code> 要素を <code class="filename"><em class="replaceable"><code>MYSET</code></em>.xml</code> に含める必要があります。
            </p></li></ul></div><p>
          複雑な文字セットの場合、文字セットプロパティーについて記述し、文字セットに対する演算を適切に実行するために必要なサポートルーチンを定義した C ソースファイルを作成します。
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="filename">strings</code> ディレクトリに <code class="filename">ctype-<em class="replaceable"><code>MYSET</code></em>.c</code> ファイルを作成します。 既存の <code class="filename">ctype-*.c</code> ファイルのいずれか (<code class="filename">ctype-big5.c</code> など) を調べて、定義する必要のあるものを確認します。 ファイル内の配列には、<code class="literal">ctype_<em class="replaceable"><code>MYSET</code></em></code>、<code class="literal">to_lower_<em class="replaceable"><code>MYSET</code></em></code> などの名前を付ける必要があります。 これらは、単純な文字セットの配列に対応します。 <a class="xref" href="charset.html#character-arrays" title="10.13.1 文字定義配列">セクション10.13.1「文字定義配列」</a>を参照してください。 
            </p></li><li class="listitem"><p>
              <code class="filename">Index.xml</code> 内の文字セットに対して <code class="literal">&lt;charset&gt;</code> 要素に一覧表示された <code class="literal">&lt;collation&gt;</code> 要素ごとに、<code class="filename">ctype-<em class="replaceable"><code>MYSET</code></em>.c</code> ファイルが照合順序の実装を提供する必要があります。
            </p></li><li class="listitem"><p>
              文字セットで文字列照合関数が必要な場合は、<a class="xref" href="charset.html#string-collating" title="10.13.2 複雑な文字セットの文字列照合のサポート">セクション10.13.2「複雑な文字セットの文字列照合のサポート」</a>を参照してください。
            </p></li><li class="listitem"><p>
              文字セットでマルチバイト文字のサポートが必要な場合は、<a class="xref" href="charset.html#multibyte-characters" title="10.13.3 複雑な文字セットのマルチバイト文字のサポート">セクション10.13.3「複雑な文字セットのマルチバイト文字のサポート」</a>を参照してください。
            </p></li></ul></div></li><li class="listitem"><p>
          構成情報を変更します。 <em class="replaceable"><code>MYSYS</code></em> の情報を追加するためのガイドとして、既存の構成情報を使用します。 ここでの例では、文字セットにデフォルト照合順序とバイナリ照合順序があることを想定していますが、<em class="replaceable"><code>MYSET</code></em> に追加の照合順序がある場合には、さらに多くの行が必要になります。 
        </p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p>
              <code class="filename">mysys/charset-def.c</code> を編集し、新しい文字セットの照合順序を<span class="quote">「<span class="quote">登録</span>」</span>します。
            </p><p>
              <span class="quote">「<span class="quote">宣言</span>」</span>セクションに次の行を追加します。
            </p><pre class="programlisting">#ifdef HAVE_CHARSET_<em class="replaceable"><code>MYSET</code></em>
extern CHARSET_INFO my_charset_<em class="replaceable"><code>MYSET</code></em>_general_ci;
extern CHARSET_INFO my_charset_<em class="replaceable"><code>MYSET</code></em>_bin;
#endif
</pre><p>
              <span class="quote">「<span class="quote">登録</span>」</span>セクションに次の行を追加します。
            </p><pre class="programlisting">#ifdef HAVE_CHARSET_<em class="replaceable"><code>MYSET</code></em>
  add_compiled_collation(&amp;my_charset_<em class="replaceable"><code>MYSET</code></em>_general_ci);
  add_compiled_collation(&amp;my_charset_<em class="replaceable"><code>MYSET</code></em>_bin);
#endif
</pre></li><li class="listitem"><p>
              文字セットが <code class="filename">ctype-<em class="replaceable"><code>MYSET</code></em>.c</code> を使用する場合、<code class="filename">strings/CMakeLists.txt</code> を編集して、<code class="filename">ctype-<em class="replaceable"><code>MYSET</code></em>.c</code> を <code class="literal">STRINGS_SOURCES</code> 変数の定義に追加します。
            </p></li><li class="listitem"><p>
              <code class="filename">cmake/character_sets.cmake</code> を編集します。
            </p><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem"><p>
                  アルファベット順で <code class="literal">CHARSETS_AVAILABLE</code> の値に <em class="replaceable"><code>MYSET</code></em> を追加します。
                </p></li><li class="listitem"><p>
                  アルファベット順で <code class="literal">CHARSETS_COMPLEX</code> の値に <em class="replaceable"><code>MYSET</code></em> を追加します。 これは、<span class="command"><strong>CMake</strong></span> が <code class="option">-DDEFAULT_CHARSET=<em class="replaceable"><code>MYSET</code></em></code> を認識できるように、単純な文字セットにも必要です。 
                </p></li></ol></div></li></ol></div></li><li class="listitem"><p>
          再構成し、再コンパイルし、テストします。
        </p></li></ol></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="character-arrays"></a>10.13.1 文字定義配列</h3></div></div></div><p>
        それぞれの単純な文字セットには、<code class="filename">sql/share/charsets</code> ディレクトリに置かれた構成ファイルがあります。 <em class="replaceable"><code>MYSYS</code></em> という名前の文字セットの場合、ファイルには <code class="filename"><em class="replaceable"><code>MYSET</code></em>.xml</code> の名前が付けられます。 これは、<code class="literal">&lt;map&gt;</code> 配列要素を使用して、文字セットプロパティーを一覧表示します。<code class="literal">&lt;map&gt;</code> 要素は、これらの要素内に表示されます。 
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">&lt;ctype&gt;</code> は文字ごとに属性を定義します。
          </p></li><li class="listitem"><p>
            <code class="literal">&lt;lower&gt;</code> と <code class="literal">&lt;upper&gt;</code> は、小文字と大文字を一覧表示します。
          </p></li><li class="listitem"><p>
            <code class="literal">&lt;unicode&gt;</code> は、8 ビット文字値を Unicode 値にマップします。
          </p></li><li class="listitem"><p>
            <code class="literal">&lt;collation&gt;</code> 要素は、照合順序ごとに 1 つの要素を比較およびソートするための文字順序を示します。 文字コード自体が順序を提供するので、バイナリ照合順序には <code class="literal">&lt;map&gt;</code> 要素は不要です。 
          </p></li></ul></div><p>
        <code class="filename">strings</code> ディレクトリ内の <code class="filename">ctype-<em class="replaceable"><code>MYSET</code></em>.c</code> ファイルに実装された複雑な文字セットには、<code class="literal">ctype_<em class="replaceable"><code>MYSET</code></em>[]</code>、<code class="literal">to_lower_<em class="replaceable"><code>MYSET</code></em>[]</code> などの対応する配列があります。 すべての複雑な文字セットがすべての配列を持つわけではありません。 例については、既存の <code class="filename">ctype-*.c</code> ファイルも参照してください。 追加情報については、<code class="filename">strings</code> ディレクトリ内の <code class="filename">CHARSET_INFO.txt</code> ファイルを参照してください。 
      </p><p>
        ほとんどの配列には、文字値でインデックスが付けられ、256 個の要素があります。 <code class="literal">&lt;ctype&gt;</code> 配列には、文字値 + 1 でインデックスが付けられ、257 個の要素があります。 これは、<code class="literal">EOF</code> を処理するための従来の規則です。 
      </p><p>
        <code class="literal">&lt;ctype&gt;</code> 配列要素は、ビット値です。 各要素は、文字セット内の単一の文字の属性について記述します。 各属性は、<code class="filename">include/m_ctype.h</code> での定義に従って、ビットマスクに関連付けられます。 
      </p><pre class="programlisting">#define _MY_U   01      /* Upper case */
#define _MY_L   02      /* Lower case */
#define _MY_NMR 04      /* Numeral (digit) */
#define _MY_SPC 010     /* Spacing character */
#define _MY_PNT 020     /* Punctuation */
#define _MY_CTR 040     /* Control character */
#define _MY_B   0100    /* Blank */
#define _MY_X   0200    /* heXadecimal digit */
</pre><p>
        所定の文字の <code class="literal">&lt;ctype&gt;</code> 値は、その文字について記述した適用可能なビットマスク値の結合である必要があります。 たとえば、<code class="literal">'A'</code> は 16 進数 (<code class="literal">_MY_X</code>) と同様に大文字 (<code class="literal">_MY_U</code>) であるので、その <code class="literal">ctype</code> 値は次のように定義する必要があります。 
      </p><pre class="programlisting">ctype['A'+1] = _MY_U | _MY_X = 01 | 0200 = 0201
</pre><p>
        <code class="filename">m_ctype.h</code> のビットマスク値は 8 進数値ですが、<code class="filename"><em class="replaceable"><code>MYSET</code></em>.xml</code> 内の <code class="literal">&lt;ctype&gt;</code> 配列の要素は 16 進値として書き込む必要があります。
      </p><p>
        <code class="literal">&lt;lower&gt;</code> と <code class="literal">&lt;upper&gt;</code> 配列は、文字セットの各メンバーに対応した小文字と大文字を保持します。 例: 
      </p><pre class="programlisting">lower['A'] should contain 'a'
upper['a'] should contain 'A'
</pre><p>
        各 <code class="literal">&lt;collation&gt;</code> 配列は、比較およびソートでどのように文字を順序付けする必要があるかを示します。 MySQL は、この情報の値に基づいて文字をソートします。 場合によっては、これは <code class="literal">&lt;upper&gt;</code> 配列と同じであり、ソートで大文字と小文字が区別されないことになります。 さらに複雑なソートルールについては (複雑な文字セットの場合)、<a class="xref" href="charset.html#string-collating" title="10.13.2 複雑な文字セットの文字列照合のサポート">セクション10.13.2「複雑な文字セットの文字列照合のサポート」</a>での文字列照合の説明を参照してください。 
      </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="string-collating"></a>10.13.2 複雑な文字セットの文字列照合のサポート</h3></div></div></div><a class="indexterm" name="idm46723731030000"></a><a class="indexterm" name="idm46723731027888"></a><p>
        <em class="replaceable"><code>MYSET</code></em> という名前の単純な文字セットの場合、ソートルールは、<code class="literal">&lt;collation&gt;</code> 要素内の <code class="literal">&lt;map&gt;</code> 配列要素を使用して、<code class="filename"><em class="replaceable"><code>MYSET</code></em>.xml</code> 構成ファイルで指定されます。 言語に関するソートルールが非常に複雑で、単純な配列では扱えない場合、<code class="filename">strings</code> ディレクトリ内の <code class="filename">ctype-<em class="replaceable"><code>MYSET</code></em>.c</code> ソースファイルで文字列照合関数を定義する必要があります。 
      </p><p>
        既存の文字セットからは、これらの関数がどのように実装されているかを示す最適なドキュメントおよび例が得られます。 <code class="literal">big5</code>、<code class="literal">czech</code>、<code class="literal">gbk</code>、<code class="literal">sjis</code>、<code class="literal">tis160</code> 文字セットのファイルなど、<code class="filename">strings</code> ディレクトリ内の <code class="filename">ctype-*.c</code> ファイルを調べます。 <code class="literal">MY_COLLATION_HANDLER</code> 構造を見て、どのように使用されているかを確認します。 追加情報については、<code class="filename">strings</code> ディレクトリ内の <code class="filename">CHARSET_INFO.txt</code> ファイルも参照してください。 
      </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="multibyte-characters"></a>10.13.3 複雑な文字セットのマルチバイト文字のサポート</h3></div></div></div><a class="indexterm" name="idm46723731011120"></a><a class="indexterm" name="idm46723731009008"></a><p>
        マルチバイト文字を含む <em class="replaceable"><code>MYSET</code></em> という名前の新しい文字セットのサポートを追加する場合、<code class="filename">strings</code> ディレクトリ内の <code class="filename">ctype-<em class="replaceable"><code>MYSET</code></em>.c</code> ソースファイルのマルチバイト文字関数を使用する必要があります。
      </p><p>
        既存の文字セットからは、これらの関数がどのように実装されているかを示す最適なドキュメントおよび例が得られます。 <code class="literal">euc_kr</code>、<code class="literal">gb2312</code>、<code class="literal">gbk</code>、<code class="literal">sjis</code>、<code class="literal">ujis</code> 文字セットのファイルなど、<code class="filename">strings</code> ディレクトリ内の <code class="filename">ctype-*.c</code> ファイルを調べます。 <code class="literal">MY_CHARSET_HANDLER</code> 構造を見て、どのように使用されているかを確認します。 追加情報については、<code class="filename">strings</code> ディレクトリ内の <code class="filename">CHARSET_INFO.txt</code> ファイルも参照してください。 
      </p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="adding-collation"></a>10.14 文字セットへの照合順序の追加</h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="section"><a href="charset.html#charset-collation-implementations">10.14.1 照合順序の実装タイプ</a></span></dt><dt><span class="section"><a href="charset.html#adding-collation-choosing-id">10.14.2 照合順序 ID の選択</a></span></dt><dt><span class="section"><a href="charset.html#adding-collation-simple-8bit">10.14.3 8 ビットの文字セットへの単純な照合順序の追加</a></span></dt><dt><span class="section"><a href="charset.html#adding-collation-unicode-uca">10.14.4 Unicode 文字セットへの UCA 照合順序の追加</a></span></dt></dl></div><a class="indexterm" name="idm46723730994784"></a><p>
      照合順序は、文字列を比較およびソートする方法を定義した一連のルールです。 MySQL でのそれぞれの照合順序は、単一の文字セットに属しています。 すべての文字セットには少なくとも 1 つの照合順序が属し、ほとんどの文字セットのは 2 つ以上の照合順序が属しています。 
    </p><p>
      照合順序は重みに基づいて文字を順序付けします。 文字セット内のそれぞれの文字が重みにマップされています。 重みが等しい文字は同等と見なされ、重みが等しくない文字は、その重みの相対的な大きさに従って比較されます。 
    </p><p>
      <code class="literal">WEIGHT_STRING()</code> 関数を使用すると、文字列内の文字の重みを確認できます。 重みを示した返される値はバイナリ文字列であるので、<code class="literal">HEX(WEIGHT_STRING(<em class="replaceable"><code>str</code></em>))</code> を使用して重みを出力可能な形式で表示すると便利です。 次の例は、大文字と小文字を区別しない非バイナリ文字列の場合に、<code class="literal">'AaBb'</code>の文字の大文字と小文字で重みが異なることはなく、バイナリ文字列の場合に重みが異なることを示しています: 
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT HEX(WEIGHT_STRING('AaBb' COLLATE latin1_swedish_ci));</code></strong>
+------------------------------------------------------+
| HEX(WEIGHT_STRING('AaBb' COLLATE latin1_swedish_ci)) |
+------------------------------------------------------+
| 41414242                                             |
+------------------------------------------------------+
mysql&gt; <strong class="userinput"><code>SELECT HEX(WEIGHT_STRING(BINARY 'AaBb'));</code></strong>
+-----------------------------------+
| HEX(WEIGHT_STRING(BINARY 'AaBb')) |
+-----------------------------------+
| 41614262                          |
+-----------------------------------+
</pre><p>
      <a class="xref" href="charset.html#charset-collation-implementations" title="10.14.1 照合順序の実装タイプ">セクション10.14.1「照合順序の実装タイプ」</a>で説明するように、MySQL では複数の照合順序の実装をサポートしています。 これらの中には、再コンパイルせずに、MySQL に追加できるものもあります。 
    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          8 ビットの文字セットの単純な照合順序。
        </p></li><li class="listitem"><p>
          Unicode 文字セットの UCA ベースの照合順序。
        </p></li><li class="listitem"><p>
          バイナリ (<code class="literal"><em class="replaceable"><code>xxx</code></em>_bin</code>) 照合順序。
        </p></li></ul></div><p>
      次のセクションでは、最初の 2 つのタイプのユーザー定義照合を既存の文字セットに追加する方法について説明します。 バイナリ照合順序については、既存の文字セットにもすでに用意されているので、ここでは追加方法は説明しません。 
    </p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">警告</div><p>
        組込み照合の再定義はサポートされていないため、予期しないサーバー動作が発生する可能性があります。
      </p></div><p>
      新しいユーザー定義照合を追加する手順のサマリー:
    </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
          照合順序 ID を選択します。
        </p></li><li class="listitem"><p>
          照合順序に名前を付ける構成情報を追加し、文字順序付けルールについて記述します。
        </p></li><li class="listitem"><p>
          サーバーを再起動します。
        </p></li><li class="listitem"><p>
          サーバーが照合順序を認識していることを確認します。
        </p></li></ol></div><p>
      この手順では、MySQL を再コンパイルせずに追加できるユーザー定義の照合のみについて説明します。 再コンパイルを必要とする照合順序 (C ソースファイル内の関数を利用して実装されたものなど) を追加するには、<a class="xref" href="charset.html#adding-character-set" title="10.13 文字セットの追加">セクション10.13「文字セットの追加」</a>の手順を使用してください。 ただし、完全な文字セットに必要なすべての情報を追加するのではなく、既存の文字セットに合わせて適切なファイルを変更します。 つまり、文字セットの現在の照合順序ですでに存在するものに基づいて、新しい照合順序のデータ構造、関数、構成情報を追加します。 
    </p><a class="indexterm" name="idm46723730967856"></a><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
        既存のユーザー定義照合を変更すると、その照合を使用するカラムのインデックスの行の順序に影響する可能性があります。 この場合、間違ったクエリー結果などの問題が起こらないように、これらのインデックスを再構築してください。 <a class="xref" href="installing.html#rebuilding-tables" title="2.11.13 テーブルまたはインデックスの再作成または修復">セクション2.11.13「テーブルまたはインデックスの再作成または修復」</a>を参照してください。 
      </p></div><h3><a name="idm46723730963600"></a>追加のリソース</h3><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          全文検索の照合順序を追加する方法を示す例: <a class="xref" href="functions.html#full-text-adding-collation" title="12.10.7 全文インデックス付けのためのユーザー定義照合の追加">セクション12.10.7「全文インデックス付けのためのユーザー定義照合の追加」</a>
        </p></li><li class="listitem"><p>
          Unicode 照合順序アルゴリズム (UCA) の仕様: <a class="ulink" href="http://www.unicode.org/reports/tr10/" target="_top">http://www.unicode.org/reports/tr10/</a>
        </p></li><li class="listitem"><p>
          Locale Data Markup Language (LDML) の仕様: <a class="ulink" href="http://www.unicode.org/reports/tr35/" target="_top">http://www.unicode.org/reports/tr35/</a>
        </p></li></ul></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="charset-collation-implementations"></a>10.14.1 照合順序の実装タイプ</h3></div></div></div><p>
        MySQL は複数のタイプの照合順序を実装します。
      </p><p>
        <span class="bold"><strong>8 ビットの文字セットに対する単純な照合順序</strong></span>
      </p><p>
        この種の照合順序は、文字コードと重みの 1 対 1 のマッピングを定義した 256 個の重みの配列を使用して実装されます。<code class="literal">latin1_swedish_ci</code> がその一例です。 これは、大文字と小文字を区別しない照合順序なので、大文字と小文字は同じ重みで、等しいものと見なされます。 
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET NAMES 'latin1' COLLATE 'latin1_swedish_ci';</code></strong>
Query OK, 0 rows affected (0.01 sec)

mysql&gt; <strong class="userinput"><code>SELECT HEX(WEIGHT_STRING('a')), HEX(WEIGHT_STRING('A'));</code></strong>
+-------------------------+-------------------------+
| HEX(WEIGHT_STRING('a')) | HEX(WEIGHT_STRING('A')) |
+-------------------------+-------------------------+
| 41                      | 41                      |
+-------------------------+-------------------------+
1 row in set (0.01 sec)

mysql&gt; <strong class="userinput"><code>SELECT 'a' = 'A';</code></strong>
+-----------+
| 'a' = 'A' |
+-----------+
|         1 |
+-----------+
1 row in set (0.12 sec)
</pre><p>
        実装の手順については、<a class="xref" href="charset.html#adding-collation-simple-8bit" title="10.14.3 8 ビットの文字セットへの単純な照合順序の追加">セクション10.14.3「8 ビットの文字セットへの単純な照合順序の追加」</a>を参照してください。
      </p><p>
        <span class="bold"><strong>8 ビット文字セットに対する複雑な照合順序</strong></span>
      </p><p>
        この種の照合順序は、<a class="xref" href="charset.html#adding-character-set" title="10.13 文字セットの追加">セクション10.13「文字セットの追加」</a>で説明しているように、文字を順序付けする方法を定義した C ソースファイル内の関数を使用して実装されます。
      </p><p>
        <span class="bold"><strong>Unicode 以外のマルチバイト文字セットの照合順序</strong></span>
      </p><p>
        この種の照合順序では、8 ビット (シングルバイト) 文字とマルチバイト文字が異なる方法で処理されます。 8 ビットの文字の場合、文字コードは大文字と小文字を区別しない形式で重みにマップされます。 (たとえば、シングルバイト文字 <code class="literal">'a'</code> と <code class="literal">'A'</code> はどちらも重みが <code class="literal">0x41</code> です。) マルチバイト文字の場合、文字コードと重みの間には、2 種類の関係があります。 
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            重みが文字コードと等しい場合。<code class="literal">sjis_japanese_ci</code> がこの種の照合順序の一例です。 マルチバイト文字 <code class="literal">'ぢ'</code> の文字コードは <code class="literal">0x82C0</code> であり、重みも <code class="literal">0x82C0</code> です。 
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>CREATE TABLE t1</code></strong>
       <strong class="userinput"><code>(c1 VARCHAR(2) CHARACTER SET sjis COLLATE sjis_japanese_ci);</code></strong>
Query OK, 0 rows affected (0.01 sec)

mysql&gt; <strong class="userinput"><code>INSERT INTO t1 VALUES ('a'),('A'),(0x82C0);</code></strong>
Query OK, 3 rows affected (0.00 sec)
Records: 3  Duplicates: 0  Warnings: 0

mysql&gt; <strong class="userinput"><code>SELECT c1, HEX(c1), HEX(WEIGHT_STRING(c1)) FROM t1;</code></strong>
+------+---------+------------------------+
| c1   | HEX(c1) | HEX(WEIGHT_STRING(c1)) |
+------+---------+------------------------+
| a    | 61      | 41                     |
| A    | 41      | 41                     |
| ぢ    | 82C0    | 82C0                   |
+------+---------+------------------------+
3 rows in set (0.00 sec)
</pre></li><li class="listitem"><p>
            文字コードが 1 対 1 で重みにマップされていても、必ずしもコードと重みが等しくない場合。<code class="literal">gbk_chinese_ci</code> がこの種の照合順序の一例です。 マルチバイト文字 <code class="literal">'膰'</code> の文字コードは <code class="literal">0x81B0</code> ですが、重みは <code class="literal">0xC286</code> です。 
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>CREATE TABLE t1</code></strong>
       <strong class="userinput"><code>(c1 VARCHAR(2) CHARACTER SET gbk COLLATE gbk_chinese_ci);</code></strong>
Query OK, 0 rows affected (0.33 sec)

mysql&gt; <strong class="userinput"><code>INSERT INTO t1 VALUES ('a'),('A'),(0x81B0);</code></strong>
Query OK, 3 rows affected (0.00 sec)
Records: 3  Duplicates: 0  Warnings: 0

mysql&gt; <strong class="userinput"><code>SELECT c1, HEX(c1), HEX(WEIGHT_STRING(c1)) FROM t1;</code></strong>
+------+---------+------------------------+
| c1   | HEX(c1) | HEX(WEIGHT_STRING(c1)) |
+------+---------+------------------------+
| a    | 61      | 41                     |
| A    | 41      | 41                     |
| 膰    | 81B0    | C286                   |
+------+---------+------------------------+
3 rows in set (0.00 sec)
</pre></li></ul></div><p>
        実装の手順については、<a class="xref" href="charset.html#adding-character-set" title="10.13 文字セットの追加">セクション10.13「文字セットの追加」</a>を参照してください。
      </p><p>
        <span class="bold"><strong>Unicode マルチバイト文字セットの照合順序</strong></span>
      </p><p>
        これらの照合順序の一部は Unicode 照合順序アルゴリズム (UCA) に基づきますが、それ以外は基づいていません。
      </p><p>
        UCA に基づいていない照合順序では、文字コードと重みは 1 対 1 でマップしています。 MySQL では、このような照合では大/小文字が区別されず、アクセントは区別されません。<code class="literal">utf8_general_ci</code> は例です: <code class="literal">'a'</code>, <code class="literal">'A'</code>, <code class="literal">'À'</code>と<code class="literal">'á'</code>はそれぞれ異なる文字コードを持ちますが、すべての重みは <code class="literal">0x0041</code> であり、等しいものとして比較されます。 
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET NAMES 'utf8' COLLATE 'utf8_general_ci';</code></strong>
Query OK, 0 rows affected (0.00 sec)

mysql&gt; <strong class="userinput"><code>CREATE TABLE t1</code></strong>
       <strong class="userinput"><code>(c1 CHAR(1) CHARACTER SET UTF8 COLLATE utf8_general_ci);</code></strong>
Query OK, 0 rows affected (0.01 sec)

mysql&gt; <strong class="userinput"><code>INSERT INTO t1 VALUES ('a'),('A'),('À'),('á');</code></strong>
Query OK, 4 rows affected (0.00 sec)
Records: 4  Duplicates: 0  Warnings: 0

mysql&gt; <strong class="userinput"><code>SELECT c1, HEX(c1), HEX(WEIGHT_STRING(c1)) FROM t1;</code></strong>
+------+---------+------------------------+
| c1   | HEX(c1) | HEX(WEIGHT_STRING(c1)) |
+------+---------+------------------------+
| a    | 61      | 0041                   |
| A    | 41      | 0041                   |
| À    | C380    | 0041                   |
| á    | C3A1    | 0041                   |
+------+---------+------------------------+
4 rows in set (0.00 sec)
</pre><p>
        MySQL の UCA ベースの照合順序には、次の 3 つのプロパティーがあります。
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            文字に重みがある場合、それぞれの重みは 2 バイト (16 ビット) を使用します。
          </p></li><li class="listitem"><p>
            文字の重みはゼロ (または空の重み) の場合があります。 この場合、文字は無視できます。 例:「U+0000 NULL」は重みがなく、無視できます。 
          </p></li><li class="listitem"><p>
            1 つの文字が 1 つの重みを持つ場合があります。 例: <code class="literal">'a'</code> には <code class="literal">0x0E33</code> の重みがあります。 
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET NAMES 'utf8' COLLATE 'utf8_unicode_ci';</code></strong>
Query OK, 0 rows affected (0.05 sec)

mysql&gt; <strong class="userinput"><code>SELECT HEX('a'), HEX(WEIGHT_STRING('a'));</code></strong>
+----------+-------------------------+
| HEX('a') | HEX(WEIGHT_STRING('a')) |
+----------+-------------------------+
| 61       | 0E33                    |
+----------+-------------------------+
1 row in set (0.02 sec)
</pre></li><li class="listitem"><p>
            1 つの文字が複数の重みを持つ場合があります。 これは拡張形式です。 例: ドイツ語の文字 <code class="literal">'ß'</code> (SZ リガチャーまたは SHARP S) には、<code class="literal">0x0FEA0FEA</code> の重みがあります。 
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET NAMES 'utf8' COLLATE 'utf8_unicode_ci';</code></strong>
Query OK, 0 rows affected (0.11 sec)

mysql&gt; <strong class="userinput"><code>SELECT HEX('ß'), HEX(WEIGHT_STRING('ß'));</code></strong>
+-----------+--------------------------+
| HEX('ß')  | HEX(WEIGHT_STRING('ß'))  |
+-----------+--------------------------+
| C39F      | 0FEA0FEA                 |
+-----------+--------------------------+
1 row in set (0.00 sec)
</pre></li><li class="listitem"><p>
            複数の文字が 1 つの重みを持つ場合があります。 これは短縮形式です。 例: <code class="literal">'ch'</code> は、チェコ語の単一の文字であり、<code class="literal">0x0EE2</code> の重みを持ちます。 
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET NAMES 'utf8' COLLATE 'utf8_czech_ci';</code></strong>
Query OK, 0 rows affected (0.09 sec)

mysql&gt; <strong class="userinput"><code>SELECT HEX('ch'), HEX(WEIGHT_STRING('ch'));</code></strong>
+-----------+--------------------------+
| HEX('ch') | HEX(WEIGHT_STRING('ch')) |
+-----------+--------------------------+
| 6368      | 0EE2                     |
+-----------+--------------------------+
1 row in set (0.00 sec)
</pre></li></ul></div><p>
        複数の文字と複数の重みのマッピングも可能です (これは拡張形式を使用した短縮形式です) が、MySQL ではサポートされていません。
      </p><p>
        UCA に基づいていない照合順序に関する実装の手順については、<a class="xref" href="charset.html#adding-character-set" title="10.13 文字セットの追加">セクション10.13「文字セットの追加」</a>を参照してください。 UCA 照合順序については、<a class="xref" href="charset.html#adding-collation-unicode-uca" title="10.14.4 Unicode 文字セットへの UCA 照合順序の追加">セクション10.14.4「Unicode 文字セットへの UCA 照合順序の追加」</a>を参照してください。 
      </p><p>
        <span class="bold"><strong>その他の照合順序</strong></span>
      </p><p>
        上記のカテゴリのどれにも該当しない照合順序も少数存在します。
      </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="adding-collation-choosing-id"></a>10.14.2 照合順序 ID の選択</h3></div></div></div><p>
        各照合順序には一意の ID が必要です。 照合順序を追加するには、現在使用されていない ID 値を選択する必要があります。 MySQL は、2 バイトの照合 ID をサポートしています。 1024 から 2047 の ID 範囲は、ユーザー定義の照合順序に予約されています。 
      </p><p>
        選択した照合 ID は、次のコンテキストで表示されます:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">INFORMATION_SCHEMA.COLLATIONS</code> テーブルの <code class="literal">ID</code> カラム。
          </p></li><li class="listitem"><p>
            <code class="literal">SHOW COLLATION</code> 出力の <code class="literal">Id</code> カラム。
          </p></li><li class="listitem"><p>
            <code class="literal">MYSQL_FIELD</code> C API データ構造の <code class="literal">charsetnr</code> メンバー。
          </p></li><li class="listitem"><p>
            <code class="literal">mysql_get_character_set_info()</code> C API 関数で返される <code class="literal">MY_CHARSET_INFO</code> データ構造の <code class="literal">number</code> メンバー。
          </p></li></ul></div><p>
        現在使用されている最大の ID を判別するには、次のステートメントを発行します。
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT MAX(ID) FROM INFORMATION_SCHEMA.COLLATIONS;</code></strong>
+---------+
| MAX(ID) |
+---------+
|     247 |
+---------+
</pre><p>
        現在使用されているすべての ID のリストを表示するには、次のステートメントを発行します。
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT ID FROM INFORMATION_SCHEMA.COLLATIONS ORDER BY ID;</code></strong>
+-----+
| ID  |
+-----+
|   1 |
|   2 |
| ... |
|  52 |
|  53 |
|  57 |
|  58 |
| ... |
|  98 |
|  99 |
| 128 |
| 129 |
| ... |
| 247 |
+-----+
</pre><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">警告</div><p>
          アップグレードする前に、変更した構成ファイルを保存する必要があります。 適切にアップグレードすると、変更されたファイルがプロセスによって置き換えられます。 
        </p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="adding-collation-simple-8bit"></a>10.14.3 8 ビットの文字セットへの単純な照合順序の追加</h3></div></div></div><p>
        このセクションでは、MySQL <code class="filename">Index.xml</code> ファイル内の <code class="literal">&lt;charset&gt;</code> 文字セットの記述に関連付けられた <code class="literal">&lt;collation&gt;</code> 要素を書き込むことによって、8 ビット文字セットの単純な照合順序を追加する方法について説明します。 ここで説明した手順では、MySQL の再コンパイルは不要です。 この例では、<code class="literal">latin1_test_ci</code> という名前の照合順序を <code class="literal">latin1</code> 文字セットに追加します。 
      </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
            <a class="xref" href="charset.html#adding-collation-choosing-id" title="10.14.2 照合順序 ID の選択">セクション10.14.2「照合順序 ID の選択」</a>で示したように、照合順序 ID を選択します。 次のステップでは、1024 の ID を使用します。 
          </p></li><li class="listitem"><p>
            <code class="literal">Index.xml</code> および <code class="literal">latin1.xml</code> 構成ファイルを変更します。 これらのファイルは、<code class="literal">character_sets_dir</code> システム変数で指定されたディレクトリにあります。 使用しているシステムではパス名が異なることがありますが、次のようにして変数値を確認できます。 
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW VARIABLES LIKE 'character_sets_dir';</code></strong>
+--------------------+-----------------------------------------+
| Variable_name      | Value                                   |
+--------------------+-----------------------------------------+
| character_sets_dir | /user/local/mysql/share/mysql/charsets/ |
+--------------------+-----------------------------------------+
</pre></li><li class="listitem"><p>
            照合順序の名前を選択して、<code class="filename">Index.xml</code> ファイルに表示します。 照合順序を追加する文字セットの <code class="literal">&lt;charset&gt;</code> 要素を探し、照合順序名および ID を指定する <code class="literal">&lt;collation&gt;</code> 要素を追加して、名前を ID に関連付けます。 例: 
          </p><pre class="programlisting">&lt;charset name="latin1"&gt;
  ...
  &lt;collation name="latin1_test_ci" id="1024"/&gt;
  ...
&lt;/charset&gt;
</pre></li><li class="listitem"><p>
            <code class="filename">latin1.xml</code> 構成ファイルで、照合順序に名前を付ける <code class="literal">&lt;collation&gt;</code> 要素と、0 から 255 の文字コードの文字コードと重みのマッピングテーブルを定義する <code class="literal">&lt;map&gt;</code> 要素を追加します。 <code class="literal">&lt;map&gt;</code> 要素内のそれぞれの値は、16 進形式の数値にする必要があります。 
          </p><pre class="programlisting">&lt;collation name="latin1_test_ci"&gt;
&lt;map&gt;
 00 01 02 03 04 05 06 07 08 09 0A 0B 0C 0D 0E 0F
 10 11 12 13 14 15 16 17 18 19 1A 1B 1C 1D 1E 1F
 20 21 22 23 24 25 26 27 28 29 2A 2B 2C 2D 2E 2F
 30 31 32 33 34 35 36 37 38 39 3A 3B 3C 3D 3E 3F
 40 41 42 43 44 45 46 47 48 49 4A 4B 4C 4D 4E 4F
 50 51 52 53 54 55 56 57 58 59 5A 5B 5C 5D 5E 5F
 60 41 42 43 44 45 46 47 48 49 4A 4B 4C 4D 4E 4F
 50 51 52 53 54 55 56 57 58 59 5A 7B 7C 7D 7E 7F
 80 81 82 83 84 85 86 87 88 89 8A 8B 8C 8D 8E 8F
 90 91 92 93 94 95 96 97 98 99 9A 9B 9C 9D 9E 9F
 A0 A1 A2 A3 A4 A5 A6 A7 A8 A9 AA AB AC AD AE AF
 B0 B1 B2 B3 B4 B5 B6 B7 B8 B9 BA BB BC BD BE BF
 41 41 41 41 5B 5D 5B 43 45 45 45 45 49 49 49 49
 44 4E 4F 4F 4F 4F 5C D7 5C 55 55 55 59 59 DE DF
 41 41 41 41 5B 5D 5B 43 45 45 45 45 49 49 49 49
 44 4E 4F 4F 4F 4F 5C F7 5C 55 55 55 59 59 DE FF
&lt;/map&gt;
&lt;/collation&gt;
</pre></li><li class="listitem"><p>
            サーバーを再起動し、このステートメントを使用して、照合順序の有無を検証します。
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW COLLATION WHERE Collation = 'latin1_test_ci';</code></strong>
+----------------+---------+------+---------+----------+---------+
| Collation      | Charset | Id   | Default | Compiled | Sortlen |
+----------------+---------+------+---------+----------+---------+
| latin1_test_ci | latin1  | 1024 |         |          |       1 |
+----------------+---------+------+---------+----------+---------+
</pre></li></ol></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="adding-collation-unicode-uca"></a>10.14.4 Unicode 文字セットへの UCA 照合順序の追加</h3></div></div></div><div class="toc"><dl class="toc"><dt><span class="section"><a href="charset.html#ldml-collation-example">10.14.4.1 LDML 構文を使用した UCA 照合順序の定義</a></span></dt><dt><span class="section"><a href="charset.html#ldml-rules">10.14.4.2 MySQL でサポートされる LDML 構文</a></span></dt><dt><span class="section"><a href="charset.html#collation-diagnostics">10.14.4.3 Index.xml の構文解析中の診断</a></span></dt></dl></div><p>
        このセクションでは、MySQL <code class="filename">Index.xml</code> ファイルで <code class="literal">&lt;charset&gt;</code> 文字セットの記述内に <code class="literal">&lt;collation&gt;</code> 要素を書き込むことによって、Unicode 文字セットの UCA 照合順序を追加する方法について説明します。 ここで説明した手順では、MySQL の再コンパイルは不要です。 これは、<a class="ulink" href="http://www.unicode.org/reports/tr35/" target="_top">http://www.unicode.org/reports/tr35/</a> で入手できる Locale Data Markup Language (LDML) 仕様のサブセットを使用します。 この方法を使用すれば、照合順序全体を定義する必要はありません。 代わりに、既存の<span class="quote">「<span class="quote">基本</span>」</span>照合順序から始め、基本照合順序とどのように異なるかという点で新しい照合順序について記述します。 次の表は、UCA 照合順序を定義できる Unicode 文字セットの基本照合順序を一覧表示しています。 <code class="literal">utf16le</code> のユーザー定義 UCA 照合順序は作成できません。このような照合順序のベースとして役立つ <code class="literal">utf16le_unicode_ci</code> 照合順序はありません。 
      </p><div class="table"><a name="idm46723730826992"></a><p class="title"><b>表 10.4 ユーザー定義の UCA 照合順序に使用可能な MySQL 文字セット</b></p><div class="table-contents"><table summary="Unicode character sets for which user-defined UCA collations can be defined and their base collations."><col style="width=30%"><col style="width=60%"><thead><tr>
            <th>文字セット</th>
            <th>基本照合順序</th>
          </tr></thead><tbody><tr>
            <td><code class="literal">utf8</code></td>
            <td><code class="literal">utf8_unicode_ci</code></td>
          </tr><tr>
            <td><code class="literal">ucs2</code></td>
            <td><code class="literal">ucs2_unicode_ci</code></td>
          </tr><tr>
            <td><code class="literal">utf16</code></td>
            <td><code class="literal">utf16_unicode_ci</code></td>
          </tr><tr>
            <td><code class="literal">utf32</code></td>
            <td><code class="literal">utf32_unicode_ci</code></td>
          </tr></tbody></table></div></div><br class="table-break"><p>
        以降のセクションでは、LDML 構文を使用して定義された照合順序を追加する方法について説明し、MySQL でサポートされている LDML ルールのサマリーを示します。
      </p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="ldml-collation-example"></a>10.14.4.1 LDML 構文を使用した UCA 照合順序の定義</h4></div></div></div><p>
          MySQL を再コンパイルせずに Unicode 文字セットの UCA 照合順序を追加するには、次の手順を使用します。 照合順序のソート特性の記述に使用する LDML ルールを把握していない場合は、<a class="xref" href="charset.html#ldml-rules" title="10.14.4.2 MySQL でサポートされる LDML 構文">セクション10.14.4.2「MySQL でサポートされる LDML 構文」</a>を参照してください。 
        </p><p>
          この例では、<code class="literal">utf8_phone_ci</code> という名前の照合順序を <code class="literal">utf8</code> 文字セットを追加します。 この照合順序は、ユーザーが名前と電話番号を投稿する Web アプリケーションに関連したシナリオ用に設計されています。 電話番号は、次のようなさまざまな形式で指定できます。 
        </p><pre class="programlisting">+7-12345-67
+7-12-345-67
+7 12 345 67
+7 (12) 345 67
+71234567
</pre><p>
          このような値を扱うときに生じる問題は、さまざまな形式が許容されることで、特定の電話番号の検索が非常に困難になるということです。 この解決方法として、句読点文字を並べ替えて無視できるようにする新しい照合順序を定義します。 
        </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
              <a class="xref" href="charset.html#adding-collation-choosing-id" title="10.14.2 照合順序 ID の選択">セクション10.14.2「照合順序 ID の選択」</a>で示したように、照合順序 ID を選択します。 次のステップでは、1029 の ID を使用します。 
            </p></li><li class="listitem"><p>
              <code class="literal">Index.xml</code> 構成ファイルを変更します。 このファイルは、<code class="literal">character_sets_dir</code> システム変数で指定されたディレクトリにあります。 使用しているシステムではパス名が異なることがありますが、次のようにして変数値を確認できます。 
            </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW VARIABLES LIKE 'character_sets_dir';</code></strong>
+--------------------+-----------------------------------------+
| Variable_name      | Value                                   |
+--------------------+-----------------------------------------+
| character_sets_dir | /user/local/mysql/share/mysql/charsets/ |
+--------------------+-----------------------------------------+
</pre></li><li class="listitem"><p>
              照合順序の名前を選択して、<code class="filename">Index.xml</code> ファイルに表示します。 さらに、照合順序の順序付けルールを提供する必要があります。 照合順序を追加する文字セットの <code class="literal">&lt;charset&gt;</code> 要素を探し、照合順序名および ID を指定する <code class="literal">&lt;collation&gt;</code> 要素を追加して、名前を ID に関連付けます。 <code class="literal">&lt;collation&gt;</code> 要素内で、順序付けルールを含む <code class="literal">&lt;rules&gt;</code> 要素を提供します。 
            </p><pre class="programlisting">&lt;charset name="utf8"&gt;
  ...
  &lt;collation name="utf8_phone_ci" id="1029"&gt;
    &lt;rules&gt;
      &lt;reset&gt;\u0000&lt;/reset&gt;
      &lt;i&gt;\u0020&lt;/i&gt; &lt;!-- space --&gt;
      &lt;i&gt;\u0028&lt;/i&gt; &lt;!-- left parenthesis --&gt;
      &lt;i&gt;\u0029&lt;/i&gt; &lt;!-- right parenthesis --&gt;
      &lt;i&gt;\u002B&lt;/i&gt; &lt;!-- plus --&gt;
      &lt;i&gt;\u002D&lt;/i&gt; &lt;!-- hyphen --&gt;
    &lt;/rules&gt;
  &lt;/collation&gt;
  ...
&lt;/charset&gt;
</pre></li><li class="listitem"><p>
              その他の Unicode 文字セットに同様の照合順序が必要な場合は、ほかの <code class="literal">&lt;collation&gt;</code> 要素を追加します。 たとえば、<code class="literal">ucs2_phone_ci</code> を定義するには、<code class="literal">&lt;collation&gt;</code> 要素を <code class="literal">&lt;charset name="ucs2"&gt;</code> 要素に追加します。 それぞれの照合順序には一意の独自 ID が必要になります。 
            </p></li><li class="listitem"><p>
              サーバーを再起動し、このステートメントを使用して、照合順序の有無を検証します。
            </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW COLLATION WHERE Collation = 'utf8_phone_ci';</code></strong>
+---------------+---------+------+---------+----------+---------+
| Collation     | Charset | Id   | Default | Compiled | Sortlen |
+---------------+---------+------+---------+----------+---------+
| utf8_phone_ci | utf8    | 1029 |         |          |       8 |
+---------------+---------+------+---------+----------+---------+
</pre></li></ol></div><p>
          次に、照合順序をテストして、目的のプロパティーがあることを確認します。
        </p><p>
          新しい照合順序を使用して、いくつかのサンプルの電話番号を含むテーブルを作成します。
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>CREATE TABLE phonebook (</code></strong>
       <strong class="userinput"><code>  name VARCHAR(64),</code></strong>
       <strong class="userinput"><code>  phone VARCHAR(64) CHARACTER SET utf8 COLLATE utf8_phone_ci</code></strong>
       <strong class="userinput"><code>);</code></strong>
Query OK, 0 rows affected (0.09 sec)

mysql&gt; <strong class="userinput"><code>INSERT INTO phonebook VALUES ('Svoj','+7 912 800 80 02');</code></strong>
Query OK, 1 row affected (0.00 sec)

mysql&gt; <strong class="userinput"><code>INSERT INTO phonebook VALUES ('Hf','+7 (912) 800 80 04');</code></strong>
Query OK, 1 row affected (0.00 sec)

mysql&gt; <strong class="userinput"><code>INSERT INTO phonebook VALUES ('Bar','+7-912-800-80-01');</code></strong>
Query OK, 1 row affected (0.00 sec)

mysql&gt; <strong class="userinput"><code>INSERT INTO phonebook VALUES ('Ramil','(7912) 800 80 03');</code></strong>
Query OK, 1 row affected (0.00 sec)

mysql&gt; <strong class="userinput"><code>INSERT INTO phonebook VALUES ('Sanja','+380 (912) 8008005');</code></strong>
Query OK, 1 row affected (0.00 sec)
</pre><p>
          一部のクエリーを実行して、無視された句読点文字が実際に比較およびソートで無視されているかどうかを確認します:
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT * FROM phonebook ORDER BY phone;</code></strong>
+-------+--------------------+
| name  | phone              |
+-------+--------------------+
| Sanja | +380 (912) 8008005 |
| Bar   | +7-912-800-80-01   |
| Svoj  | +7 912 800 80 02   |
| Ramil | (7912) 800 80 03   |
| Hf    | +7 (912) 800 80 04 |
+-------+--------------------+
5 rows in set (0.00 sec)

mysql&gt; <strong class="userinput"><code>SELECT * FROM phonebook WHERE phone='+7(912)800-80-01';</code></strong>
+------+------------------+
| name | phone            |
+------+------------------+
| Bar  | +7-912-800-80-01 |
+------+------------------+
1 row in set (0.00 sec)

mysql&gt; <strong class="userinput"><code>SELECT * FROM phonebook WHERE phone='79128008001';</code></strong>
+------+------------------+
| name | phone            |
+------+------------------+
| Bar  | +7-912-800-80-01 |
+------+------------------+
1 row in set (0.00 sec)

mysql&gt; <strong class="userinput"><code>SELECT * FROM phonebook WHERE phone='7 9 1 2 8 0 0 8 0 0 1';</code></strong>
+------+------------------+
| name | phone            |
+------+------------------+
| Bar  | +7-912-800-80-01 |
+------+------------------+
1 row in set (0.00 sec)
</pre></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="ldml-rules"></a>10.14.4.2 MySQL でサポートされる LDML 構文</h4></div></div></div><a class="indexterm" name="idm46723730762512"></a><p>
          このセクションでは、MySQL が認識する LDML 構文について説明します。 これは、<a class="ulink" href="http://www.unicode.org/reports/tr35/" target="_top">http://www.unicode.org/reports/tr35/</a> で入手できる LDML 仕様で説明されている構文のサブセットであり、詳細についてはこの仕様を参照してください。 MySQL は、サイズの大きい構文のサブセットを認識するので、多くの場合、Unicode 共通ロケールデータリポジトリから照合順序定義をダウンロードして、該当する部分 (<code class="literal">&lt;rules&gt;</code> タグと <code class="literal">&lt;/rules&gt;</code> タグの間の部分) を MySQL <code class="filename">Index.xml</code> ファイルに貼り付けることが可能です。 ここで説明するルールは、文字のソートがプライマリレベルのみで行われることを除いて、すべてサポートされます。 セカンダリ以上のソートレベルでの差を指定するルールは認識されますが (たとえば、照合順序の定義に含めることができます)、プライマリレベルでは等式として扱われます。 
        </p><p>
          MySQL Server は、<code class="filename">Index.xml</code> ファイルの構文解析中に問題を検出すると、診断を生成します。 <a class="xref" href="charset.html#collation-diagnostics" title="10.14.4.3 Index.xml の構文解析中の診断">セクション10.14.4.3「Index.xml の構文解析中の診断」</a>を参照してください。 
        </p><p>
          <span class="bold"><strong>文字表現</strong></span>
        </p><p>
          LDML ルールで名前が付けられた文字は、文字どおりに、または <code class="literal">\u<em class="replaceable"><code>nnnn</code></em></code> 形式で書き込めます。ただし、<em class="replaceable"><code>nnnn</code></em> は 16 進 Unicode コードポイント値です。 たとえば、<code class="literal">A</code> と <code class="literal">á</code> は、文字どおりに、または <code class="literal">\u0041</code> および <code class="literal">\u00E1</code> として書き込めます。 16 進数の値内では、<code class="literal">A</code> から <code class="literal">F</code> までの桁は大/小文字が区別されません。<code class="literal">\u00E1</code> と<code class="literal">\u00e1</code> は同等です。 UCA 4.0.0 照合順序の場合、16 進表記は、Basic Multilingual Plane の文字にのみ使用でき、<code class="literal">0000</code> から <code class="literal">FFFF</code> の BMP 範囲外の文字には使用できません。 UCA 5.2.0 照合順序の場合、16 進表記をすべての文字に使用できます。 
        </p><p>
          <code class="filename">Index.xml</code> ファイル自体は、UTF-8 エンコーディングを使用して書き込む必要があります。
        </p><p>
          <span class="bold"><strong>構文ルール</strong></span>
        </p><p>
          LDML には、文字の順序付けを指定するリセットルールとシフトルールがあります。 順序付けは、アンカーポイントを確立するリセットルールから開始し、そのアンカーポイントを基準として文字をソートする方法を示すシフトルールが続く一連のルールとして指定されます。 
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <code class="literal">&lt;reset&gt;</code> ルールはそれ自体ではどの順序付けも指定しません。 その代わりにこれは、所定の文字に関連して後続のシフトルールを実行できるように、順序付けを<span class="quote">「<span class="quote">リセット</span>」</span>します。 次のどちらのルールも、文字 <code class="literal">'A'</code> に関連して実行されるように後続のシフトルールをリセットします。 
            </p><pre class="programlisting">&lt;reset&gt;A&lt;/reset&gt;

&lt;reset&gt;\u0041&lt;/reset&gt;
</pre></li><li class="listitem"><p>
              <code class="literal">&lt;p&gt;</code>、<code class="literal">&lt;s&gt;</code>、および <code class="literal">&lt;t&gt;</code> のシフトルールは、文字と文字とのプライマリ、セカンダリ、およびターシャリの差を定義します。
            </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                  プライマリの差を使用して、個々の文字を区別します。
                </p></li><li class="listitem"><p>
                  セカンダリの差を使用して、アクセントバリエーションを区別します。
                </p></li><li class="listitem"><p>
                  ターシャリの差を使用して、大文字と小文字のバリエーションを区別します。
                </p></li></ul></div><p>
              次のどちらのルールも、<code class="literal">'G'</code> 文字のプライマリシフトルールを指定します。
            </p><pre class="programlisting">&lt;p&gt;G&lt;/p&gt;

&lt;p&gt;\u0047&lt;/p&gt;
</pre></li><li class="listitem"><p>
              <code class="literal">&lt;i&gt;</code> シフトルールは、ある文字が別の文字とまったく同じようにソートするよう指定します。 次のルールは、<code class="literal">'b'</code> が <code class="literal">'a'</code> と同じようにソートします。 
            </p><pre class="programlisting">&lt;reset&gt;a&lt;/reset&gt;
&lt;i&gt;b&lt;/i&gt;
</pre></li><li class="listitem"><p>
              略記されたシフト構文は、タグの単一のペアを使用して、複数のシフトルールを指定します。 次の表は、略記された構文ルールと同等の略記されていないルールとの対応を示します。 
            </p><div class="table"><a name="abreviated-shift-syntax"></a><p class="title"><b>表 10.5 略記されたシフト構文</b></p><div class="table-contents"><table summary="Abbreviated and corresponding nonabbreviated shift syntax rules."><col style="width=40%"><col style="width=60%"><thead><tr>
                  <th>略記された構文</th>
                  <th>略記されていない構文</th>
                </tr></thead><tbody><tr>
                  <td><code class="literal">&lt;pc&gt;xyz&lt;/pc&gt;</code></td>
                  <td><code class="literal">&lt;p&gt;x&lt;/p&gt;&lt;p&gt;y&lt;/p&gt;&lt;p&gt;z&lt;/p&gt;</code></td>
                </tr><tr>
                  <td><code class="literal">&lt;sc&gt;xyz&lt;/sc&gt;</code></td>
                  <td><code class="literal">&lt;s&gt;x&lt;/s&gt;&lt;s&gt;y&lt;/s&gt;&lt;s&gt;z&lt;/s&gt;</code></td>
                </tr><tr>
                  <td><code class="literal">&lt;tc&gt;xyz&lt;/tc&gt;</code></td>
                  <td><code class="literal">&lt;t&gt;x&lt;/t&gt;&lt;t&gt;y&lt;/t&gt;&lt;t&gt;z&lt;/t&gt;</code></td>
                </tr><tr>
                  <td><code class="literal">&lt;ic&gt;xyz&lt;/ic&gt;</code></td>
                  <td><code class="literal">&lt;i&gt;x&lt;/i&gt;&lt;i&gt;y&lt;/i&gt;&lt;i&gt;z&lt;/i&gt;</code></td>
                </tr></tbody></table></div></div><br class="table-break"></li><li class="listitem"><p>
              拡張形式は、複数文字のシーケンスのアンカーポイントを確立するリセットルールです。 MySQL は 2 から 6 文字長の拡張形式をサポートしています。 次のルールは、プライマリレベルで <code class="literal">'z'</code> を 3 文字のシーケンス <code class="literal">'abc'</code> よりも大きくします。 
            </p><pre class="programlisting">&lt;reset&gt;abc&lt;/reset&gt;
&lt;p&gt;z&lt;/p&gt;
</pre></li><li class="listitem"><p>
              短縮形式は、複数文字のシーケンスをソートするシフトルールです。 MySQL は、2 から 6 文字長の短縮形式をサポートしています。 次のルールは、プライマリレベルで 3 文字のシーケンス <code class="literal">'xyz'</code> を <code class="literal">'a'</code> よりも大きくします。 
            </p><pre class="programlisting">&lt;reset&gt;a&lt;/reset&gt;
&lt;p&gt;xyz&lt;/p&gt;
</pre></li><li class="listitem"><p>
              長い拡張形式と長い短縮形式を一緒に使用できます。 次のルールは、プライマリレベルで 3 文字のシーケンス <code class="literal">'xyz'</code> を 3 文字のシーケンス <code class="literal">'abc'</code> よりも大きくします。 
            </p><pre class="programlisting">&lt;reset&gt;abc&lt;/reset&gt;
&lt;p&gt;xyz&lt;/p&gt;
</pre></li><li class="listitem"><p>
              通常の拡張形式の構文では、<code class="literal">&lt;x&gt;</code> と <code class="literal">&lt;extend&gt;</code> 要素を使用して、拡張形式を指定します。 次のルールは、セカンダリレベルで文字 <code class="literal">'k'</code> をシーケンス <code class="literal">'ch'</code> よりも大きくします。 つまり、<code class="literal">'k'</code> は、<code class="literal">'c'</code> に <code class="literal">'h'</code> が続いたあとの文字に拡張したかのように動作します。 
            </p><pre class="programlisting">&lt;reset&gt;c&lt;/reset&gt;
&lt;x&gt;&lt;s&gt;k&lt;/s&gt;&lt;extend&gt;h&lt;/extend&gt;&lt;/x&gt;
</pre><p>
              この構文は長いシーケンスを許可します。 次のルールは、ターシャリレベルでシーケンス <code class="literal">'ccs'</code> をシーケンス <code class="literal">'cscs'</code> よりも大きくします。 
            </p><pre class="programlisting">&lt;reset&gt;cs&lt;/reset&gt;
&lt;x&gt;&lt;t&gt;ccs&lt;/t&gt;&lt;extend&gt;cs&lt;/extend&gt;&lt;/x&gt;
</pre><p>
              LDML 仕様では、通常の拡張形式構文を<span class="quote">「<span class="quote">慎重を要するもの</span>」</span>と記述しています。 詳細についてはその仕様を参照してください。 
            </p></li><li class="listitem"><p>
              前コンテキスト構文は、<code class="literal">&lt;x&gt;</code> および <code class="literal">&lt;context&gt;</code> 要素を使用して、文字の前のコンテキストによってソートが変更されるよう指定します。 次のルールは、セカンダリレベルで <code class="literal">'-'</code> を <code class="literal">'a'</code> よりも大きくしますが、これは <code class="literal">'-'</code> の前に <code class="literal">'b'</code> があったときだけです。 
            </p><pre class="programlisting">&lt;reset&gt;a&lt;/reset&gt;
&lt;x&gt;&lt;context&gt;b&lt;/context&gt;&lt;s&gt;-&lt;/s&gt;&lt;/x&gt;
</pre></li><li class="listitem"><p>
              前コンテキスト構文には、<code class="literal">&lt;extend&gt;</code> 要素を含めることができます。 次のルールは、プライマリレベルで <code class="literal">'def'</code> を <code class="literal">'aghi'</code> よりも大きくしますが、これは <code class="literal">'def'</code> の前に <code class="literal">'abc'</code> があったときだけです。 
            </p><pre class="programlisting">&lt;reset&gt;a&lt;/reset&gt;
&lt;x&gt;&lt;context&gt;abc&lt;/context&gt;&lt;p&gt;def&lt;/p&gt;&lt;extend&gt;ghi&lt;/extend&gt;&lt;/x&gt;
</pre></li><li class="listitem"><p>
              リセットルールでは <code class="literal">before</code> 属性が許可されています。 通常、リセットルールのあとのシフトルールは、リセット文字のあとにソートする文字を指定します。 <code class="literal">before</code> 属性を伴うリセットルール後のシフトルールは、リセット文字の前にソートする文字を指定します。 次のルールは、プライマリレベルで文字 <code class="literal">'b'</code> を <code class="literal">'a'</code> の直前に配置します。 
            </p><pre class="programlisting">&lt;reset before="primary"&gt;a&lt;/reset&gt;
&lt;p&gt;b&lt;/p&gt;
</pre><p>
              許容されている <code class="literal">before</code> 属性値は、名前または同等な数値でソートレベルを指定します。
            </p><pre class="programlisting">&lt;reset before="primary"&gt;
&lt;reset before="1"&gt;

&lt;reset before="secondary"&gt;
&lt;reset before="2"&gt;

&lt;reset before="tertiary"&gt;
&lt;reset before="3"&gt;
</pre></li><li class="listitem"><p>
              リセットルールでは、リテラル文字ではなく、論理リセット位置に名前を付けることができます。
            </p><pre class="programlisting">&lt;first_tertiary_ignorable/&gt;
&lt;last_tertiary_ignorable/&gt;
&lt;first_secondary_ignorable/&gt;
&lt;last_secondary_ignorable/&gt;
&lt;first_primary_ignorable/&gt;
&lt;last_primary_ignorable/&gt;
&lt;first_variable/&gt;
&lt;last_variable/&gt;
&lt;first_non_ignorable/&gt;
&lt;last_non_ignorable/&gt;
&lt;first_trailing/&gt;
&lt;last_trailing/&gt;
</pre><p>
              次のルールは、プライマリレベルで <code class="literal">'z'</code> を、Default Unicode Collation Element Table (DUCET) エントリを伴い、CJK ではない無視できない文字よりも大きくします。
            </p><pre class="programlisting">&lt;reset&gt;&lt;last_non_ignorable/&gt;&lt;/reset&gt;
&lt;p&gt;z&lt;/p&gt;
</pre><p>
              論理位置には、次の表に示すコードポイントが設定されています。
            </p><div class="table"><a name="logical-reset-position-code-points"></a><p class="title"><b>表 10.6 論理リセット位置のコードポイント</b></p><div class="table-contents"><table summary="Logical positions and Unicode 4.0.0 and Unicode 5.2.0 code points."><col style="width=40%"><col style="width=30%"><col style="width=30%"><thead><tr>
                  <th scope="col">論理位置</th>
                  <th scope="col">Unicode 4.0.0 コードポイント</th>
                  <th scope="col">Unicode 5.2.0 コードポイント</th>
                </tr></thead><tbody><tr>
                  <th scope="row"><code class="literal">&lt;first_non_ignorable/&gt;</code></th>
                  <td>U+02D0</td>
                  <td>U+02D0</td>
                </tr><tr>
                  <th scope="row"><code class="literal">&lt;last_non_ignorable/&gt;</code></th>
                  <td>U+A48C</td>
                  <td>U+1342E</td>
                </tr><tr>
                  <th scope="row"><code class="literal">&lt;first_primary_ignorable/&gt;</code></th>
                  <td>U+0332</td>
                  <td>U+0332</td>
                </tr><tr>
                  <th scope="row"><code class="literal">&lt;last_primary_ignorable/&gt;</code></th>
                  <td>U+20EA</td>
                  <td>U+101FD</td>
                </tr><tr>
                  <th scope="row"><code class="literal">&lt;first_secondary_ignorable/&gt;</code></th>
                  <td>U+0000</td>
                  <td>U+0000</td>
                </tr><tr>
                  <th scope="row"><code class="literal">&lt;last_secondary_ignorable/&gt;</code></th>
                  <td>U+FE73</td>
                  <td>U+FE73</td>
                </tr><tr>
                  <th scope="row"><code class="literal">&lt;first_tertiary_ignorable/&gt;</code></th>
                  <td>U+0000</td>
                  <td>U+0000</td>
                </tr><tr>
                  <th scope="row"><code class="literal">&lt;last_tertiary_ignorable/&gt;</code></th>
                  <td>U+FE73</td>
                  <td>U+FE73</td>
                </tr><tr>
                  <th scope="row"><code class="literal">&lt;first_trailing/&gt;</code></th>
                  <td>U+0000</td>
                  <td>U+0000</td>
                </tr><tr>
                  <th scope="row"><code class="literal">&lt;last_trailing/&gt;</code></th>
                  <td>U+0000</td>
                  <td>U+0000</td>
                </tr><tr>
                  <th scope="row"><code class="literal">&lt;first_variable/&gt;</code></th>
                  <td>U+0009</td>
                  <td>U+0009</td>
                </tr><tr>
                  <th scope="row"><code class="literal">&lt;last_variable/&gt;</code></th>
                  <td>U+2183</td>
                  <td>U+1D371</td>
                </tr></tbody></table></div></div><br class="table-break"></li><li class="listitem"><p>
              <code class="literal">&lt;collation&gt;</code> 要素は、シフトルールの文字重み計算に影響する <code class="literal">shift-after-method</code> 属性を許可します。 この属性には、次の値が許可されています。 
            </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                  <code class="literal">simple</code>: <code class="literal">before</code> 属性を持たないリセットルールで、文字の重みを計算します。 これは、属性が指定されない場合のデフォルトです。 
                </p></li><li class="listitem"><p>
                  <code class="literal">expand</code>: リセットルールのあとのシフトに拡張形式を使用します。
                </p></li></ul></div><p>
              <code class="literal">'0'</code> と <code class="literal">'1'</code> が <code class="literal">0E29</code> と <code class="literal">0E2A</code> の重みを持ち、すべての基本ラテン文字を <code class="literal">'0'</code> から <code class="literal">'1'</code> の間に設定するとします。
            </p><pre class="programlisting">&lt;reset&gt;0&lt;/reset&gt;
&lt;pc&gt;abcdefghijklmnopqrstuvwxyz&lt;/pc&gt;
</pre><p>
              単純なシフトモードの場合、重みは次のように計算されます。
            </p><pre class="programlisting">'a' has weight 0E29+1
'b' has weight 0E29+2
'c' has weight 0E29+3
...
</pre><p>
              ただし、<code class="literal">'0'</code> から <code class="literal">'1'</code> の間には 26 個の文字を設定するのに十分な未使用の位置がありません。 数字と文字が混在する結果になります。 
            </p><p>
              これを解決するには <code class="literal">shift-after-method="expand"</code> を使用します。 この場合、重みは次のように計算されます。 
            </p><pre class="programlisting">'a' has weight [0E29][233D+1]
'b' has weight [0E29][233D+2]
'c' has weight [0E29][233D+3]
...
</pre><p>
              <code class="literal">233D</code> は、文字 <code class="literal">0xA48C</code> の UCA 4.0.0 重みです。これは、最後の無視できない文字 (CJK を除き、照合順序で一種のもっとも大きな文字) です。 UCA 5.2.0 も同様ですが、文字 <code class="literal">0x1342E</code> に <code class="literal">3ACA</code> を使用します。 
            </p></li></ul></div><p>
          <span class="bold"><strong>MySQL 固有の LDML 拡張機能</strong></span>
        </p><p>
          LDML ルールの拡張により、<code class="literal">&lt;collation&gt;</code> 要素では、照合のベースとなる UCA バージョンを示すオプションの <code class="literal">version</code> 属性を <code class="literal">&lt;collation&gt;</code> タグに含めることができます。 <code class="literal">version</code> 属性を省略すると、そのデフォルト値は <code class="literal">4.0.0</code> になります。 たとえば、次の指定は、UCA 5.2.0 に基づいている照合順序を示します。 
        </p><pre class="programlisting">&lt;collation id="<em class="replaceable"><code>nnn</code></em>" name="utf8_<em class="replaceable"><code>xxx</code></em>_ci" version="5.2.0"&gt;
...
&lt;/collation&gt;
</pre></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="collation-diagnostics"></a>10.14.4.3 Index.xml の構文解析中の診断</h4></div></div></div><p>
          MySQL Server は、<code class="filename">Index.xml</code> ファイルの構文解析中に問題が見つかったときに、診断を生成します。
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              不明なタグはエラーログに書き込まれます。 たとえば、照合順序定義に <code class="literal">&lt;aaa&gt;</code> タグが含まれる場合、次のメッセージが表示されます。 
            </p><pre class="programlisting">[Warning] Buffered warning: Unknown LDML tag:
'charsets/charset/collation/rules/aaa'
</pre></li><li class="listitem"><p>
              照合順序の初期化が可能でない場合、サーバーは<span class="quote">「<span class="quote">不明な照合順序</span>」</span>エラーをレポートし、前の例のように問題点を説明した警告も生成します。 それ以外の場合、照合順序の説明が全体的に正しいが、いくつかの不明なタグが含まれているときに、照合順序が初期化され、使用できます。 不明な部分は無視されますが、警告がエラーログに生成されます。 
            </p></li><li class="listitem"><p>
              照合順序の問題によって、クライアントが <code class="literal">SHOW WARNINGS</code> で表示できる警告が生成されます。 6 文字のサポートされる最大長より長い拡張形式が、リセットルールに含まれているとします。 
            </p><pre class="programlisting">&lt;reset&gt;abcdefghi&lt;/reset&gt;
&lt;i&gt;x&lt;/i&gt;
</pre><p>
              この照合順序を使用しようとすると、次の警告が生成されます。
            </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT _utf8'test' COLLATE utf8_test_ci;</code></strong>
ERROR 1273 (HY000): Unknown collation: 'utf8_test_ci'
mysql&gt; <strong class="userinput"><code>SHOW WARNINGS;</code></strong>
+---------+------+----------------------------------------+
| Level   | Code | Message                                |
+---------+------+----------------------------------------+
| Error   | 1273 | Unknown collation: 'utf8_test_ci'      |
| Warning | 1273 | Expansion is too long at 'abcdefghi=x' |
+---------+------+----------------------------------------+
</pre></li></ul></div></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="charset-configuration"></a>10.15 文字セットの構成</h2></div></div></div><p>
      MySQL サーバーには、コンパイルされたデフォルトの文字セットと照合順序があります。 これらのデフォルトを変更するには、サーバーの起動時に <code class="option">--character-set-server</code> および <code class="option">--collation-server</code> オプションを使用します。 <a class="xref" href="server-administration.html#server-options" title="5.1.7 サーバーコマンドオプション">セクション5.1.7「サーバーコマンドオプション」</a>を参照してください。 照合順序は、デフォルト文字セットの正当な照合順序である必要があります。 各文字セットで使用可能な照合順序を確認するには、<code class="literal">SHOW COLLATION</code> ステートメントを使用するか、<code class="literal">INFORMATION_SCHEMA</code> <code class="literal">COLLATIONS</code> テーブルをクエリーします。 
    </p><p>
      バイナリにコンパイルされない文字セットを使用しようとすると、次の問題が生じることがあります。
    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          プログラムで誤ったパスを使用して文字セットが格納されている場所 (通常は、MySQL インストールディレクトリの下の <code class="filename">share/mysql/charsets</code> または <code class="filename">share/charsets</code> ディレクトリ) を判別する場合は、プログラムの実行時に <code class="option">--character-sets-dir</code> オプションを使用して修正できます。 たとえば、MySQL クライアントプログラムで使用されるディレクトリを指定するには、オプションファイルの <code class="literal">[client]</code> グループに記述します。 ここに挙げる例は、それぞれ Unix または Windows の場合に設定がどのようになるかを示します。 
        </p><pre class="programlisting">[client]
character-sets-dir=/usr/local/mysql/share/mysql/charsets

[client]
character-sets-dir="C:/Program Files/MySQL/MySQL Server 8.0/share/charsets"
</pre></li><li class="listitem"><p>
          文字セットが動的にロードできない複雑な文字セットの場合は、文字セットをサポートしてプログラムを再コンパイルする必要があります。
        </p><p>
          Unicode 文字セットの場合、LDML 表記を使用することによって、再コンパイルせずに照合順序を定義できます。 <a class="xref" href="charset.html#adding-collation-unicode-uca" title="10.14.4 Unicode 文字セットへの UCA 照合順序の追加">セクション10.14.4「Unicode 文字セットへの UCA 照合順序の追加」</a>を参照してください。 
        </p></li><li class="listitem"><p>
          文字セットが動的文字セットであるが、その構成ファイルがない場合は、新しい MySQL ディストリビューションから文字セットの構成ファイルをインストールする必要があります。
        </p></li><li class="listitem"><p>
          文字セットインデックスファイル (<code class="filename">Index.xml</code>) に文字セットの名前が含まれていない場合は、次のエラーメッセージが表示されます:
        </p><pre class="programlisting">Character set '<em class="replaceable"><code>charset_name</code></em>' is not a compiled character set and is not
specified in the '/usr/share/mysql/charsets/Index.xml' file
</pre><p>
          この問題を解決するには、新しいインデックスファイルを取得するか、欠落している文字セットの名前を手動で現在のファイルに追加する必要があります。
        </p></li></ul></div><p>
      次のようにしてクライアントプログラムに強制的に特定の文字セットを使用させることができます。
    </p><pre class="programlisting">[client]
default-character-set=<em class="replaceable"><code>charset_name</code></em>
</pre><p>
      これは通常は不要です。 ただし、<code class="literal">character_set_system</code> が <code class="literal">character_set_server</code> または <code class="literal">character_set_client</code> と異なり、(データベースオブジェクト識別子またはカラム値、あるいはその両方として) 手動で文字を入力した場合、これらの文字はクライアントからの出力に間違って表示されたり、出力自体が間違って書式設定されたりすることがあります。 このような場合、<code class="option">--default-character-set=<em class="replaceable"><code>system_character_set</code></em></code> を使用して MySQL クライアントを起動し、システム文字セットに一致するようにクライアント文字セットを設定すると、問題が修正されます。 
    </p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="locale-support"></a>10.16 MySQL Server のロケールサポート</h2></div></div></div><p>
      <code class="literal">lc_time_names</code> システム変数で示されたロケールは、曜日および月の名前と短縮形を表示するために使用する言語を制御します。 この変数は <code class="literal">DATE_FORMAT()</code>、<code class="literal">DAYNAME()</code>、および <code class="literal">MONTHNAME()</code> 関数の出力に影響を与えます。 
    </p><p>
      <code class="literal">lc_time_names</code> は、<code class="literal">STR_TO_DATE()</code> または <code class="literal">GET_FORMAT()</code> 関数には影響しません。
    </p><p>
      <code class="literal">lc_time_names</code> 値は、<code class="literal">FORMAT()</code> の結果に影響しませんが、この関数は、結果の数値の小数点、桁区切り、および区切り文字のグルーピングに使用するロケールを指定できるようにするオプションの 3 番目のパラメータを取ります。 許可されるロケール値は、<code class="literal">lc_time_names</code> システム変数の正当な値と同じです。 
    </p><p>
      ロケール名には、<code class="literal">'ja_JP'</code> や <code class="literal">'pt_BR'</code> など、IANA (<a class="ulink" href="http://www.iana.org/assignments/language-subtag-registry" target="_top">http://www.iana.org/assignments/language-subtag-registry</a>) に記載された言語および地域のサブタグが含まれます。 システムのロケール設定に関係なく、デフォルト値は<code class="literal">'en_US'</code>ですが、グローバルシステム変数の設定に十分な権限がある場合は、サーバーの起動時に値を設定するか、実行時に <code class="literal">GLOBAL</code> 値を設定できます。<a class="xref" href="server-administration.html#system-variable-privileges" title="5.1.9.1 システム変数権限">セクション5.1.9.1「システム変数権限」</a> を参照してください。 どのクライアントでも、<code class="literal">lc_time_names</code> の値を調べたり、その <code class="literal">SESSION</code> 値を設定してそれ自体の接続用のロケールに影響を与えたりできます。 
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SET NAMES 'utf8';</code></strong>
Query OK, 0 rows affected (0.09 sec)

mysql&gt; <strong class="userinput"><code>SELECT @@lc_time_names;</code></strong>
+-----------------+
| @@lc_time_names |
+-----------------+
| en_US           |
+-----------------+
1 row in set (0.00 sec)

mysql&gt; <strong class="userinput"><code>SELECT DAYNAME('2010-01-01'), MONTHNAME('2010-01-01');</code></strong>
+-----------------------+-------------------------+
| DAYNAME('2010-01-01') | MONTHNAME('2010-01-01') |
+-----------------------+-------------------------+
| Friday                | January                 |
+-----------------------+-------------------------+
1 row in set (0.00 sec)

mysql&gt; <strong class="userinput"><code>SELECT DATE_FORMAT('2010-01-01','%W %a %M %b');</code></strong>
+-----------------------------------------+
| DATE_FORMAT('2010-01-01','%W %a %M %b') |
+-----------------------------------------+
| Friday Fri January Jan                  |
+-----------------------------------------+
1 row in set (0.00 sec)

mysql&gt; <strong class="userinput"><code>SET lc_time_names = 'es_MX';</code></strong>
Query OK, 0 rows affected (0.00 sec)

mysql&gt; <strong class="userinput"><code>SELECT @@lc_time_names;</code></strong>
+-----------------+
| @@lc_time_names |
+-----------------+
| es_MX           |
+-----------------+
1 row in set (0.00 sec)

mysql&gt; <strong class="userinput"><code>SELECT DAYNAME('2010-01-01'), MONTHNAME('2010-01-01');</code></strong>
+-----------------------+-------------------------+
| DAYNAME('2010-01-01') | MONTHNAME('2010-01-01') |
+-----------------------+-------------------------+
| viernes               | enero                   |
+-----------------------+-------------------------+
1 row in set (0.00 sec)

mysql&gt; <strong class="userinput"><code>SELECT DATE_FORMAT('2010-01-01','%W %a %M %b');</code></strong>
+-----------------------------------------+
| DATE_FORMAT('2010-01-01','%W %a %M %b') |
+-----------------------------------------+
| viernes vie enero ene                   |
+-----------------------------------------+
1 row in set (0.00 sec)
</pre><p>
      影響を受けた関数それぞれの曜日または月の名前は、<code class="literal">utf8</code> から <code class="literal">character_set_connection</code> システム変数で指定される文字セットに変換されます。
    </p><p>
      <code class="literal">lc_time_names</code> は次のどのロケール値にも設定できます。 MySQL でサポートされるロケールのセットは、オペレーティングシステムでサポートされるものと異なる場合があります。 
    </p><div class="informaltable"><table summary="Locale values to which lc_time_names may be set. The locale values are presented in a two-column table and in alphabetical order from top to bottom."><col style="width=50%"><col style="width=50%"><thead><tr>
          <th>ロケール値</th>
          <th>意味</th>
        </tr></thead><tbody><tr>
          <td><code class="literal">ar_AE</code></td>
          <td>アラビア語 - アラブ首長国連邦</td>
        </tr><tr>
          <td><code class="literal">ar_BH</code></td>
          <td>アラビア語 - バーレーン</td>
        </tr><tr>
          <td><code class="literal">ar_DZ</code></td>
          <td>アラビア語 - アルジェリア</td>
        </tr><tr>
          <td><code class="literal">ar_EG</code></td>
          <td>アラビア語 - エジプト</td>
        </tr><tr>
          <td><code class="literal">ar_IN</code></td>
          <td>アラビア語 - インド</td>
        </tr><tr>
          <td><code class="literal">ar_IQ</code></td>
          <td>アラビア語 - イラク</td>
        </tr><tr>
          <td><code class="literal">ar_JO</code></td>
          <td>アラビア語 - ヨルダン</td>
        </tr><tr>
          <td><code class="literal">ar_KW</code></td>
          <td>アラビア語 - クウェート</td>
        </tr><tr>
          <td><code class="literal">ar_LB</code></td>
          <td>アラビア語 - レバノン</td>
        </tr><tr>
          <td><code class="literal">ar_LY</code></td>
          <td>アラビア語 - リビア</td>
        </tr><tr>
          <td><code class="literal">ar_MA</code></td>
          <td>アラビア語 - モロッコ</td>
        </tr><tr>
          <td><code class="literal">ar_OM</code></td>
          <td>アラビア語 - オマーン</td>
        </tr><tr>
          <td><code class="literal">ar_QA</code></td>
          <td>アラビア語 - カタール</td>
        </tr><tr>
          <td><code class="literal">ar_SA</code></td>
          <td>アラビア語 - サウジアラビア</td>
        </tr><tr>
          <td><code class="literal">ar_SD</code></td>
          <td>アラビア語 - スーダン</td>
        </tr><tr>
          <td><code class="literal">ar_SY</code></td>
          <td>アラビア語 - シリア</td>
        </tr><tr>
          <td><code class="literal">ar_TN</code></td>
          <td>アラビア語 - チュニジア</td>
        </tr><tr>
          <td><code class="literal">ar_YE</code></td>
          <td>アラビア語 - イエメン</td>
        </tr><tr>
          <td><code class="literal">be_BY</code></td>
          <td>ベラルーシ語 - ベラルーシ</td>
        </tr><tr>
          <td><code class="literal">bg_BG</code></td>
          <td>ブルガリア語 - ブルガリア</td>
        </tr><tr>
          <td><code class="literal">ca_ES</code></td>
          <td>カタラン - スペイン</td>
        </tr><tr>
          <td><code class="literal">cs_CZ</code></td>
          <td>チェコ語 - チェコ共和国</td>
        </tr><tr>
          <td><code class="literal">da_DK</code></td>
          <td>デンマーク語 - デンマーク</td>
        </tr><tr>
          <td><code class="literal">de_AT</code></td>
          <td>ドイツ語 - オーストリア</td>
        </tr><tr>
          <td><code class="literal">de_BE</code></td>
          <td>ドイツ語 - ベルギー</td>
        </tr><tr>
          <td><code class="literal">de_CH</code></td>
          <td>ドイツ語 - スイス</td>
        </tr><tr>
          <td><code class="literal">de_DE</code></td>
          <td>ドイツ語 - ドイツ</td>
        </tr><tr>
          <td><code class="literal">de_LU</code></td>
          <td>ドイツ語 - ルクセンブルク</td>
        </tr><tr>
          <td><code class="literal">el_GR</code></td>
          <td>ギリシャ語 - ギリシャ</td>
        </tr><tr>
          <td><code class="literal">en_AU</code></td>
          <td>英語 - オーストラリア</td>
        </tr><tr>
          <td><code class="literal">en_CA</code></td>
          <td>英語 - カナダ</td>
        </tr><tr>
          <td><code class="literal">en_GB</code></td>
          <td>英語 - 英国</td>
        </tr><tr>
          <td><code class="literal">en_IN</code></td>
          <td>英語 - インド</td>
        </tr><tr>
          <td><code class="literal">en_NZ</code></td>
          <td>英語 - ニュージーランド</td>
        </tr><tr>
          <td><code class="literal">en_PH</code></td>
          <td>英語 - フィリピン</td>
        </tr><tr>
          <td><code class="literal">en_US</code></td>
          <td>英語 - アメリカ合衆国</td>
        </tr><tr>
          <td><code class="literal">en_ZA</code></td>
          <td>英語 - 南アフリカ</td>
        </tr><tr>
          <td><code class="literal">en_ZW</code></td>
          <td>英語 - ジンバブエ</td>
        </tr><tr>
          <td><code class="literal">es_AR</code></td>
          <td>スペイン語 - アルゼンチン</td>
        </tr><tr>
          <td><code class="literal">es_BO</code></td>
          <td>スペイン語 - ボリビア</td>
        </tr><tr>
          <td><code class="literal">es_CL</code></td>
          <td>スペイン語 - チリ</td>
        </tr><tr>
          <td><code class="literal">es_CO</code></td>
          <td>スペイン語 - コロンビア</td>
        </tr><tr>
          <td><code class="literal">es_CR</code></td>
          <td>スペイン語 - コスタリカ</td>
        </tr><tr>
          <td><code class="literal">es_DO</code></td>
          <td>スペイン語 - ドミニカ共和国</td>
        </tr><tr>
          <td><code class="literal">es_EC</code></td>
          <td>スペイン語 - エクアドル</td>
        </tr><tr>
          <td><code class="literal">es_ES</code></td>
          <td>スペイン語 - スペイン</td>
        </tr><tr>
          <td><code class="literal">es_GT</code></td>
          <td>スペイン語 - グアテマラ</td>
        </tr><tr>
          <td><code class="literal">es_HN</code></td>
          <td>スペイン語 - ホンジュラス</td>
        </tr><tr>
          <td><code class="literal">es_MX</code></td>
          <td>スペイン語 - メキシコ</td>
        </tr><tr>
          <td><code class="literal">es_NI</code></td>
          <td>スペイン語 - ニカラグア</td>
        </tr><tr>
          <td><code class="literal">es_PA</code></td>
          <td>スペイン語 - パナマ</td>
        </tr><tr>
          <td><code class="literal">es_PE</code></td>
          <td>スペイン語 - ペルー</td>
        </tr><tr>
          <td><code class="literal">es_PR</code></td>
          <td>スペイン語 - プエルトリコ</td>
        </tr><tr>
          <td><code class="literal">es_PY</code></td>
          <td>スペイン語 - パラグアイ</td>
        </tr><tr>
          <td><code class="literal">es_SV</code></td>
          <td>スペイン語 - エルサルバドル</td>
        </tr><tr>
          <td><code class="literal">es_US</code></td>
          <td>スペイン語 - アメリカ合衆国</td>
        </tr><tr>
          <td><code class="literal">es_UY</code></td>
          <td>スペイン語 - ウルグアイ</td>
        </tr><tr>
          <td><code class="literal">es_VE</code></td>
          <td>スペイン語 - ベネズエラ</td>
        </tr><tr>
          <td><code class="literal">et_EE</code></td>
          <td>エストニア語 - エストニア</td>
        </tr><tr>
          <td><code class="literal">eu_ES</code></td>
          <td>バスク - スペイン</td>
        </tr><tr>
          <td><code class="literal">fi_FI</code></td>
          <td>フィンランド語 - フィンランド</td>
        </tr><tr>
          <td><code class="literal">fo_FO</code></td>
          <td>フォロー語 - フェロー諸島</td>
        </tr><tr>
          <td><code class="literal">fr_BE</code></td>
          <td>フランス語 - ベルギー</td>
        </tr><tr>
          <td><code class="literal">fr_CA</code></td>
          <td>フランス語 - カナダ</td>
        </tr><tr>
          <td><code class="literal">fr_CH</code></td>
          <td>フランス語 - スイス</td>
        </tr><tr>
          <td><code class="literal">fr_FR</code></td>
          <td>フランス語 - フランス</td>
        </tr><tr>
          <td><code class="literal">fr_LU</code></td>
          <td>フランス語 - ルクセンブルク</td>
        </tr><tr>
          <td><code class="literal">gl_ES</code></td>
          <td>ガリシア - スペイン</td>
        </tr><tr>
          <td><code class="literal">gu_IN</code></td>
          <td>グジャラート - インド</td>
        </tr><tr>
          <td><code class="literal">he_IL</code></td>
          <td>ヘブライ語 - イスラエル</td>
        </tr><tr>
          <td><code class="literal">hi_IN</code></td>
          <td>ヒンディー語 - インド</td>
        </tr><tr>
          <td><code class="literal">hr_HR</code></td>
          <td>クロアチア語 - クロアチア</td>
        </tr><tr>
          <td><code class="literal">hu_HU</code></td>
          <td>ハンガリー語 - ハンガリー</td>
        </tr><tr>
          <td><code class="literal">id_ID</code></td>
          <td>インドネシア語 - インドネシア</td>
        </tr><tr>
          <td><code class="literal">is_IS</code></td>
          <td>アイスランド語 - アイスランド</td>
        </tr><tr>
          <td><code class="literal">it_CH</code></td>
          <td>イタリア語 - スイス</td>
        </tr><tr>
          <td><code class="literal">it_IT</code></td>
          <td>イタリア語 - イタリア</td>
        </tr><tr>
          <td><code class="literal">ja_JP</code></td>
          <td>日本語 - 日本</td>
        </tr><tr>
          <td><code class="literal">ko_KR</code></td>
          <td>韓国語 - 大韓民国</td>
        </tr><tr>
          <td><code class="literal">lt_LT</code></td>
          <td>リトアニア語 - リトアニア</td>
        </tr><tr>
          <td><code class="literal">lv_LV</code></td>
          <td>ラトビア語 - ラトビア</td>
        </tr><tr>
          <td><code class="literal">mk_MK</code></td>
          <td>マケドニア語 - 北マケドニア</td>
        </tr><tr>
          <td><code class="literal">mn_MN</code></td>
          <td>モンゴル語 - モンゴル</td>
        </tr><tr>
          <td><code class="literal">ms_MY</code></td>
          <td>マレー - マレーシア</td>
        </tr><tr>
          <td><code class="literal">nb_NO</code></td>
          <td>ノルウェー (ブークモール) - ノルウェー</td>
        </tr><tr>
          <td><code class="literal">nl_BE</code></td>
          <td>オランダ語 - ベルギー</td>
        </tr><tr>
          <td><code class="literal">nl_NL</code></td>
          <td>オランダ語 - オランダ</td>
        </tr><tr>
          <td><code class="literal">no_NO</code></td>
          <td>ノルウェー語 - ノルウェー</td>
        </tr><tr>
          <td><code class="literal">pl_PL</code></td>
          <td>ポーランド語 - ポーランド</td>
        </tr><tr>
          <td><code class="literal">pt_BR</code></td>
          <td>ポルトガル語 - ブラジル</td>
        </tr><tr>
          <td><code class="literal">pt_PT</code></td>
          <td>ポルトガル語 - ポルトガル</td>
        </tr><tr>
          <td><code class="literal">rm_CH</code></td>
          <td>ロマンシュ語 - スイス</td>
        </tr><tr>
          <td><code class="literal">ro_RO</code></td>
          <td>ルーマニア語 - ルーマニア</td>
        </tr><tr>
          <td><code class="literal">ru_RU</code></td>
          <td>ロシア語 - ロシア</td>
        </tr><tr>
          <td><code class="literal">ru_UA</code></td>
          <td>ロシア語 - ウクライナ</td>
        </tr><tr>
          <td><code class="literal">sk_SK</code></td>
          <td>スロバキア語 - スロバキア</td>
        </tr><tr>
          <td><code class="literal">sl_SI</code></td>
          <td>スロベニア語 - スロベニア</td>
        </tr><tr>
          <td><code class="literal">sq_AL</code></td>
          <td>アルバニア語 - アルバニア</td>
        </tr><tr>
          <td><code class="literal">sr_RS</code></td>
          <td>セルビア語 - セルビア</td>
        </tr><tr>
          <td><code class="literal">sv_FI</code></td>
          <td>スウェーデン語 - フィンランド</td>
        </tr><tr>
          <td><code class="literal">sv_SE</code></td>
          <td>スウェーデン語 - スウェーデン</td>
        </tr><tr>
          <td><code class="literal">ta_IN</code></td>
          <td>タミル語 - インド</td>
        </tr><tr>
          <td><code class="literal">te_IN</code></td>
          <td>テルグ - インド</td>
        </tr><tr>
          <td><code class="literal">th_TH</code></td>
          <td>タイ語 - タイ</td>
        </tr><tr>
          <td><code class="literal">tr_TR</code></td>
          <td>トルコ語 - トルコ</td>
        </tr><tr>
          <td><code class="literal">uk_UA</code></td>
          <td>ウクライナ語 - ウクライナ</td>
        </tr><tr>
          <td><code class="literal">ur_PK</code></td>
          <td>ウルドゥ語 - パキスタン</td>
        </tr><tr>
          <td><code class="literal">vi_VN</code></td>
          <td>ベトナム語 - ベトナム</td>
        </tr><tr>
          <td><code class="literal">zh_CN</code></td>
          <td>中国語 - 中国</td>
        </tr><tr>
          <td><code class="literal">zh_HK</code></td>
          <td>中国語 - 香港</td>
        </tr><tr>
          <td><code class="literal">zh_TW</code></td>
          <td>中国語 - 台湾</td>
        </tr></tbody></table></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="language-structure.html">前</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="data-types.html">次へ</a></td></tr><tr><td width="40%" align="left" valign="top">第 9 章 言語構造 </td><td width="20%" align="center"><a accesskey="h" href="index.html">ホーム</a></td><td width="40%" align="right" valign="top"> 第 11 章 データ型</td></tr></table></div><div class="copyright-footer"></div></body></html>
