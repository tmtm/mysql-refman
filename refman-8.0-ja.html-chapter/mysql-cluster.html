<html lang="ja"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>第 23 章 MySQL NDB Cluster 8.0</title><link rel="stylesheet" type="text/css" href="mvl.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><link rel="home" href="index.html" title="MySQL 8.0 リファレンスマニュアル"><link rel="up" href="index.html" title="MySQL 8.0 リファレンスマニュアル"><link rel="prev" href="mysql-innodb-replicaset-introduction.html" title="第 22 章 InnoDB ReplicaSet"><link rel="next" href="partitioning.html" title="第 24 章 パーティション化"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">第 23 章 MySQL NDB Cluster 8.0</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="mysql-innodb-replicaset-introduction.html">前</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="partitioning.html">次へ</a></td></tr></table><hr></div><div class="status-header"><p class="alert">このページは機械翻訳したものです。</p></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="mysql-cluster"></a>第 23 章 MySQL NDB Cluster 8.0</h1></div></div></div><div class="toc"><p><b>目次</b></p><dl class="toc"><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-overview">23.1 NDB Cluster の概要</a></span></dt><dd><dl><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-basics">23.1.1 NDB Cluster のコア概念</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-nodes-groups">23.1.2 NDB Cluster ノード、ノードグループ、フラグメントレプリカ、およびパーティション</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-overview-requirements">23.1.3 NDB Cluster のハードウェア、ソフトウェア、およびネットワーク要件</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-what-is-new">23.1.4 NDB Cluster の新機能</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-added-deprecated-removed">23.1.5 NDB 8.0
    で追加、非推奨または削除されたオプション、変数、およびパラメータ</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-compared">23.1.6 MySQL Server NDB Cluster と比較した InnoDB の使用</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-limitations">23.1.7 NDB Cluster の既知の制限事項</a></span></dt></dl></dd><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-installation">23.2 NDB Cluster のインストール</a></span></dt><dd><dl><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-install-linux">23.2.1 Linux での NDB Cluster のインストール</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-install-windows">23.2.2 Windows への NDB Cluster のインストール</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-install-configuration">23.2.3 NDB Cluster の初期構成</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-install-first-start">23.2.4 NDB Cluster の初期起動</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-install-example-data">23.2.5 テーブルとデータを含む NDB Cluster の例</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-install-shutdown-restart">23.2.6 NDB Cluster の安全なシャットダウンと再起動</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-upgrade-downgrade">23.2.7 NDB Cluster のアップグレードおよびダウングレード</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-installer">23.2.8 NDB Cluster Auto-Installer (サポートされなくなりました)</a></span></dt></dl></dd><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-configuration">23.3 NDB Cluster の構成</a></span></dt><dd><dl><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-quick">23.3.1 NDB Cluster のクイックテスト設定</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-configuration-overview">23.3.2 NDB Cluster
      構成パラメータ、オプション、および変数の概要</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-config-file">23.3.3 NDB Cluster 構成ファイル</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-interconnects">23.3.4 NDB Cluster での高速インターコネクトの使用</a></span></dt></dl></dd><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs">23.4 NDB Cluster プログラム</a></span></dt><dd><dl><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndbd">23.4.1 ndbd — NDB Cluster データノードデーモン</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndbinfo-select-all">23.4.2 ndbinfo_select_all — ndbinfo テーブルからの選択</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndbmtd">23.4.3 ndbmtd — NDB Cluster データノードデーモン (マルチスレッド)</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd">23.4.4 ndb_mgmd — NDB Cluster 管理サーバーデーモン</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-mgm">23.4.5 ndb_mgm — NDB Cluster 管理クライアント</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-blob-tool">23.4.6 ndb_blob_tool — NDB Cluster テーブルの BLOB および TEXT カラムのチェックおよび修復</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-config">23.4.7 ndb_config — NDB Cluster 構成情報の抽出</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-delete-all">23.4.8 ndb_delete_all — NDB テーブルからのすべての行の削除</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-desc">23.4.9 ndb_desc — NDB テーブルの表示</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-drop-index">23.4.10 ndb_drop_index — NDB テーブルからのインデックスの削除</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-drop-table">23.4.11 ndb_drop_table — NDB テーブルの削除</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-error-reporter">23.4.12 ndb_error_reporter — NDB エラーレポートユーティリティー</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-import">23.4.13 ndb_import — NDB への CSV データのインポート</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-index-stat">23.4.14 ndb_index_stat — NDB インデックス統計ユーティリティー</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-move-data">23.4.15 ndb_move_data — NDB データコピーユーティリティー</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-perror">23.4.16 ndb_perror — NDB エラーメッセージ情報の取得</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-print-backup-file">23.4.17 ndb_print_backup_file — NDB バックアップファイルの内容の出力</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-print-file">23.4.18 ndb_print_file — NDB ディスクデータファイル内容の出力</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-print-frag-file">23.4.19 ndb_print_frag_file — NDB フラグメントリストファイルの内容の出力</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-print-schema-file">23.4.20 ndb_print_schema_file — NDB スキーマファイル内容の出力</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-print-sys-file">23.4.21 ndb_print_sys_file — NDB システムファイル内容の出力</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-redo-log-reader">23.4.22 ndb_redo_log_reader — クラスタ redo ログの内容の確認および印刷</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-restore">23.4.23 ndb_restore — NDB Cluster バックアップの復元</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-select-all">23.4.24 ndb_select_all — NDB テーブルの行の出力</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-select-count">23.4.25 ndb_select_count — NDB テーブルの行数の出力</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-setup-py">23.4.26 ndb_setup.py — NDB Cluster 用ブラウザベースの Auto-Installer の起動 (非推奨)</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-show-tables">23.4.27 ndb_show_tables — NDB テーブルのリストの表示</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-size-pl">23.4.28 ndb_size.pl — NDBCLUSTER サイズ要件エスティメータ</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-top">23.4.29 ndb_top — NDB スレッドの CPU 使用率情報の表示</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-waiter">23.4.30 ndb_waiter — NDB Cluster が特定のステータスに達するまで待機</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndbxfrm">23.4.31 ndbxfrm — NDB Cluster によって作成されたファイルの圧縮、圧縮解除、暗号化、および復号化</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-program-options-common">23.4.32 NDB Cluster プログラムに共通のオプション — NDB Cluster プログラムに共通のオプション</a></span></dt></dl></dd><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-management">23.5 NDB Cluster の管理</a></span></dt><dd><dl><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-mgm-client-commands">23.5.1 NDB Cluster 管理クライアントのコマンド</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-logs-ndb-messages">23.5.2 NDB Cluster ログメッセージ</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-event-reports">23.5.3 NDB Cluster で生成されるイベントレポート</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-start-phases">23.5.4 NDB Cluster 起動フェーズのサマリー</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-rolling-restart">23.5.5 NDB Cluster のローリング再起動の実行</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-single-user-mode">23.5.6 NDB Cluster のシングルユーザーモード</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-online-add-node">23.5.7 NDB Cluster データノードのオンラインでの追加</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-backup">23.5.8 NDB Cluster のオンラインバックアップ</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-mysqld">23.5.9 NDB Cluster での MySQL Server の使用</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-disk-data">23.5.10 NDB Cluster ディスクデータテーブル</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-online-operations">23.5.11 NDB Cluster での ALTER TABLE を使用したオンライン操作</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-privilege-distribution">23.5.12 NDB_STORED_USER での分散 MySQL 権限</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndb-api-statistics">23.5.13 NDB API 統計のカウンタと変数</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo">23.5.14 ndbinfo: NDB Cluster 情報データベース</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-information-schema-tables">23.5.15 NDB Cluster の INFORMATION_SCHEMA テーブル</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-sql-statements">23.5.16 クイックリファレンス: NDB Cluster SQL ステートメント</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-security">23.5.17 NDB Cluster のセキュリティーの問題</a></span></dt></dl></dd><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-replication">23.6 NDB Cluster レプリケーション</a></span></dt><dd><dl><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-replication-abbreviations">23.6.1 NDB Cluster レプリケーション: 省略形と記号</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-replication-general">23.6.2 NDB Cluster レプリケーションの一般的な要件</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-replication-issues">23.6.3 NDB Cluster レプリケーションの既知の問題</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-replication-schema">23.6.4 NDB Cluster レプリケーションスキーマおよびテーブル</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-replication-preparation">23.6.5 NDB Cluster のレプリケーションの準備</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-replication-starting">23.6.6 NDB Cluster レプリケーションの開始 (シングルレプリケーションチャネル)</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-replication-two-channels">23.6.7 NDB Cluster レプリケーションでの 2 つのレプリケーションチャネルの使用</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-replication-failover">23.6.8 NDB Cluster レプリケーションによるフェイルオーバーの実装</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-replication-backups">23.6.9 NDB Cluster レプリケーションによる NDB Cluster バックアップ</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-replication-multi-source">23.6.10 NDB Cluster レプリケーション: 双方向および循環レプリケーション</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-replication-conflict-resolution">23.6.11 NDB Cluster レプリケーションの競合解決</a></span></dt></dl></dd><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-news">23.7 NDB Cluster リリースノート</a></span></dt></dl></div><a class="indexterm" name="idm45563239668016"></a><a class="indexterm" name="idm45563239666928"></a><a class="indexterm" name="idm45563239664992"></a><a class="indexterm" name="idm45563239663152"></a><p class="ndb-rel-level">
    MySQL <span class="firstterm">NDB Cluster</span> は、分散コンピューティング環境に適した高可用性高冗長性バージョンの MySQL です。 最新の NDB Cluster リリースシリーズでは、バージョン 8 の <code class="literal">NDB</code> ストレージエンジン (<code class="literal">NDBCLUSTER</code> とも呼ばれる) を使用して、クラスタ内の MySQL サーバーやその他のソフトウェアで複数のコンピュータを実行できるようにします。 NDB Cluster 8.0 は、バージョン 8.0.19 以降で General Availability (GA) リリースとして使用できるようになり、<code class="literal">NDB</code> ストレージエンジンのバージョン 8.0 が組み込まれています。 NDB Cluster 7.6 および NDB Cluster 7.5 は GA リリースとして引き続き使用でき、それぞれバージョン 7.6 および 7.5 の <code class="literal">NDB</code> を使用します。 以前の GA リリースは、本番、NDB Cluster 7.4 および NDB Cluster 7.3 で引き続き使用でき、それぞれ <code class="literal">NDB</code> バージョン 7.4 および 7.3 が組み込まれています。 <span class="emphasis"><em>NDB 7.2 以前のリリースシリーズはサポートまたは保守されなくなりました</em></span>。 
  </p><p>
    <code class="literal">NDB</code> ストレージエンジンのサポートは、オラクルによってビルドされた標準の MySQL Server 8.0 バイナリには含まれていません。 代わりに、Oracle の NDB Cluster バイナリのユーザーは、サポートされているプラットフォームの NDB Cluster の最新のバイナリリリースにアップグレードするようにしてください。これには、ほとんどの Linux ディストリビューションで動作する RPM が含まれます。 NDB Cluster ソースから構築する 8.0 ユーザーは、MySQL 8.0 用に提供されているソースを使用し、NDB サポートを提供するために必要なオプションで構築するようにしてください。 (ソースを入手できる場所については、このセクションで後述します。) 
  </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">重要</div><p>
      MySQL NDB Cluster は InnoDB クラスタ をサポートしていません。InnoDB クラスタ は、<code class="literal">InnoDB</code> ストレージエンジンとともに MySQL Server 8.0 を使用して配備する必要があり、NDB Cluster 配布に含まれていない追加のアプリケーションを使用して配備する必要があります。 MySQL Server 8.0 バイナリは、MySQL NDB Cluster では使用できません。 InnoDB クラスタ のデプロイおよび使用の詳細は、<a class="ulink" href="https://dev.mysql.com/doc/mysql-shell/8.0/ja/admin-api-userguide.html" target="_top">MySQL AdminAPI の使用</a> を参照してください。<a class="xref" href="mysql-cluster.html#mysql-cluster-compared" title="23.1.6 MySQL Server NDB Cluster と比較した InnoDB の使用">セクション23.1.6「MySQL Server NDB Cluster と比較した InnoDB の使用」</a> では、<code class="literal">NDB</code> ストレージエンジンと <code class="literal">InnoDB</code> ストレージエンジンの違いについて説明します。 
    </p></div><p class="ndb-rel-level">
    この章では、8.0.23 を介した NDB Cluster 8.0 リリースについて説明します。 NDB Cluster 8.0 が一般提供リリースとして使用可能になり (NDB 8.0.19 以降)、新しい配備に推奨されるようになりました。使用可能な最新リリースは NDB 8.0.22 です。 NDB Cluster 7.6 および 7.5 は、本番で引き続きサポートされている以前の GA リリースです。NDB Cluster 7.6 については、<a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-what-is-new-7-6.html" target="_top">What is New in NDB Cluster 7.6</a> を参照してください。 NDB Cluster 7.5 に関する同様の情報については、<a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-what-is-new-7-5.html" target="_top">What is New in NDB Cluster 7.5</a> を参照してください。 NDB Cluster 7.4 および 7.3 は以前の GA リリースで本番で引き続きサポートされていますが、本番用の新しい配備では NDB Cluster 8.0 を使用することをお勧めします。<a class="ulink" href="https://dev.mysql.com/doc/refman/5.6/en/mysql-cluster.html" target="_top">MySQL NDB Cluster 7.3 and NDB Cluster 7.4</a> を参照してください。 
  </p><a class="indexterm" name="idm45563239640624"></a><p><b>サポートされるプラットフォーム. </b>
      NDB Cluster は現在使用可能であり、多数のプラットフォームでサポートされています。 オペレーティングシステムバージョン、オペレーティングシステム配布、およびハードウェアプラットフォームの特定の組み合わせで利用可能な正確なサポートレベルについては、<a class="ulink" href="https://www.mysql.com/support/supportedplatforms/cluster.html" target="_top">https://www.mysql.com/support/supportedplatforms/cluster.html</a> を参照してください。 
    </p><p><b>可用性. </b>
      NDB Cluster バイナリおよびソースパッケージは、<a class="ulink" href="https://dev.mysql.com/downloads/cluster/" target="_top">https://dev.mysql.com/downloads/cluster/</a> からサポートされているプラットフォームで使用できます。
    </p><p><b>NDB Cluster のリリース番号. </b>
      NDB 8.0 は、MySQL 8.0.13 および MySQL NDB Cluster 8.0.13 以降、MySQL Server 8.0 シリーズのリリースと同じリリースパターンに従います。 この<em class="citetitle">「手動」</em>およびその他の MySQL ドキュメントでは、<span class="quote">「<span class="quote">NDB</span>」</span> で始まるバージョン番号を使用して、これら以降の NDB Cluster リリースを識別します。 このバージョン番号は NDB 8.0 リリースで使用される <code class="literal">NDBCLUSTER</code> ストレージエンジンのバージョン番号であり、NDB Cluster 8.0 リリースのベースとなる MySQL 8.0 サーバーのバージョンと同じです。 
    </p><p><a name="mysql-cluster-version-strings"></a><b>NDB Cluster ソフトウェアで使用されるバージョン文字列. </b>
      MySQL NDB Cluster ディストリビューションで提供される <span class="command"><strong>mysql</strong></span> クライアントによって表示されるバージョン文字列は、次の形式を使用します:
    </p><pre class="programlisting">mysql-<em class="replaceable"><code>mysql_server_version</code></em>-cluster
</pre><p>
    <em class="replaceable"><code>mysql_server_version</code></em> は NDB Cluster リリースのベースとなる MySQL Server のバージョンを表します。 NDB Cluster 8.0 のすべてのリリースでは、これは <code class="literal">8.0.<em class="replaceable"><code>n</code></em></code> です。ここで、<em class="replaceable"><code>n</code></em> はリリース番号です。 <code class="option">-DWITH_NDBCLUSTER</code> または同等のものを使用してソースからビルドすると、<code class="literal">-cluster</code> 接尾辞がバージョン文字列に追加されます。 (<a class="xref" href="mysql-cluster.html#mysql-cluster-install-linux-source" title="23.2.1.4 Linux でのソースからの NDB Cluster の構築">セクション23.2.1.4「Linux でのソースからの NDB Cluster の構築」</a>および<a class="xref" href="mysql-cluster.html#mysql-cluster-install-windows-source" title="23.2.2.2 Windows でのソースからの NDB Cluster のコンパイルとインストール">セクション23.2.2.2「Windows でのソースからの NDB Cluster のコンパイルとインストール」</a>を参照してください。) 次に示すように、<span class="command"><strong>mysql</strong></span> クライアントでこの書式が使用されていることがわかります。 
  </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>mysql</code></strong>
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 2
Server version: 8.0.23-cluster Source distribution

Type 'help;' or '\h' for help. Type '\c' to clear the buffer.

mysql&gt; <strong class="userinput"><code>SELECT VERSION()\G</code></strong>
*************************** 1. row ***************************
VERSION(): 8.0.23-cluster
1 row in set (0.00 sec)
</pre><p>
    MySQL 8.0 を使用した NDB Cluster の最初の General Availability リリースは、MySQL 8.0.19 を使用した NDB 8.0.19 です。
  </p><p>
    MySQL 8.0 配布に通常含まれていないほかの NDB Cluster プログラムによって表示されるバージョン文字列は、次の形式を使用します:
  </p><pre class="programlisting">mysql-<em class="replaceable"><code>mysql_server_version</code></em> ndb-<em class="replaceable"><code>ndb_engine_version</code></em>
</pre><p>
    <em class="replaceable"><code>mysql_server_version</code></em> は NDB Cluster リリースのベースとなる MySQL Server のバージョンを表します。 NDB Cluster 8.0 のすべてのリリースでは、これは <code class="literal">8.0.<em class="replaceable"><code>n</code></em></code> です。ここで、<em class="replaceable"><code>n</code></em> はリリース番号です。<em class="replaceable"><code>ndb_engine_version</code></em> は、NDB Cluster ソフトウェアのこのリリースで使用される <code class="literal">NDB</code> ストレージエンジンのバージョンです。 すべての NDB 8.0 リリースで、この番号は MySQL Server バージョンと同じです。 この形式は、次のように <span class="command"><strong>ndb_mgm</strong></span> クライアントの <code class="literal">SHOW</code> コマンドの出力で使用されます: 
  </p><pre class="programlisting">ndb_mgm&gt; <strong class="userinput"><code>SHOW</code></strong>
Connected to Management Server at: localhost:1186
Cluster Configuration
---------------------
[ndbd(NDB)]     2 node(s)
id=1    @10.0.10.6  (mysql-8.0.25 ndb-8.0.23, Nodegroup: 0, *)
id=2    @10.0.10.8  (mysql-8.0.25 ndb-8.0.23, Nodegroup: 0)

[ndb_mgmd(MGM)] 1 node(s)
id=3    @10.0.10.2  (mysql-8.0.25 ndb-8.0.23)

[mysqld(API)]   2 node(s)
id=4    @10.0.10.10  (mysql-8.0.25 ndb-8.0.23)
id=5 (not connected, accepting connect from any host)
</pre><p><b>標準の MySQL 8.0 リリースとの互換性. </b>
      多くの標準 MySQL スキーマおよびアプリケーションは NDB Cluster を使用して動作できますが、NDB Cluster を使用して実行すると、変更されていないアプリケーションおよびデータベーススキーマにわずかな互換性がないか、パフォーマンスが最適でない可能性があります (<a class="xref" href="mysql-cluster.html#mysql-cluster-limitations" title="23.1.7 NDB Cluster の既知の制限事項">セクション23.1.7「NDB Cluster の既知の制限事項」</a> を参照)。 これらの問題のほとんどは克服できますが、これは、スキーマ、クエリー、およびアプリケーションに変更を加える可能性を考慮せずに、既存の (たとえば、<code class="literal">MyISAM</code> や <code class="literal">InnoDB</code> を使用する) アプリケーションデータストアを <code class="literal">NDB</code> ストレージエンジンを使用するものに切り替えることがほとんど不可能であることも意味します。 <code class="literal">NDB</code> サポートなしでコンパイルされた (つまり、<code class="option">-DWITH_NDBCLUSTER_STORAGE_ENGINE</code> またはそのエイリアス <code class="option">-DWITH_NDBCLUSTER</code> なしで構築された) <span class="command"><strong>mysqld</strong></span> は、それを使用して構築された <span class="command"><strong>mysqld</strong></span> のドロップイン置換として機能できません。 
    </p><p><b>NDB Cluster 開発ソースツリー. </b>
      NDB Cluster 開発ツリーには、<a class="ulink" href="https://github.com/mysql/mysql-server" target="_top">https://github.com/mysql/mysql-server</a> からもアクセスできます。
    </p><p>
    <a class="ulink" href="https://github.com/mysql/mysql-server" target="_top">https://github.com/mysql/mysql-server</a> で保守される NDB Cluster 開発ソースは GPL のもとでライセンス供与されます。 Git を使用して MySQL ソースを取得し、自分で構築する方法の詳細は、<a class="xref" href="installing.html#installing-development-tree" title="2.9.5 開発ソースツリーを使用して MySQL をインストールする">セクション2.9.5「開発ソースツリーを使用して MySQL をインストールする」</a> を参照してください。 
  </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
      MySQL Server 8.0 と同様に、NDB Cluster 8.0 リリースは <span class="command"><strong>CMake</strong></span> を使用して構築されます。
    </p></div><p class="ndb-rel-level">
    NDB Cluster 8.0 は NDB 8.0.19 以降で一般提供リリースとして使用可能であり、新しい配備に推奨されます。 NDB Cluster 7.6 および 7.5 は、本番で引き続きサポートされている以前の GA リリースです。NDB Cluster 7.6 については、<a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-what-is-new-7-6.html" target="_top">What is New in NDB Cluster 7.6</a> を参照してください。 NDB Cluster 7.5 に関する同様の情報については、<a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-what-is-new-7-5.html" target="_top">What is New in NDB Cluster 7.5</a> を参照してください。 NDB Cluster 7.4 および 7.3 は以前の GA リリースで本番で引き続きサポートされていますが、本番用の新しい配備では NDB Cluster 8.0 を使用することをお勧めします。<a class="ulink" href="https://dev.mysql.com/doc/refman/5.6/en/mysql-cluster.html" target="_top">MySQL NDB Cluster 7.3 and NDB Cluster 7.4</a> を参照してください。 
  </p><p>
    NDB Cluster が進化し続けるため、この章の内容は改訂の対象となります。 NDB Cluster に関する追加情報は、<a class="ulink" href="http://www.mysql.com/products/cluster/" target="_top">http://www.mysql.com/products/cluster/</a> の MySQL web サイトにあります。 
  </p><a class="indexterm" name="idm45563239582944"></a><p><b>追加のリソース. </b>
      NDB Cluster の詳細は、次の場所を参照してください:
    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
        NDB Cluster に関してよく寄せられる質問への回答については、<a class="xref" href="faqs.html#faqs-mysql-cluster" title="A.10 MySQL 8.0 FAQ: NDB Cluster">セクションA.10「MySQL 8.0 FAQ: NDB Cluster」</a> を参照してください。
      </p></li><li class="listitem"><p>
        NDB Cluster フォーラム: <a class="ulink" href="https://forums.mysql.com/list.php?25" target="_top">https://forums.mysql.com/list.php?25</a>。
      </p></li><li class="listitem"><p>
        NDB Cluster に関する多くの NDB Cluster ユーザーおよび開発者のブログで NDB Cluster に関する経験が得られ、<a class="ulink" href="http://www.planetmysql.org/" target="_top">PlanetMySQL</a> を介してこれらのフィードを利用できるようになります。
      </p></li></ul></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-cluster-overview"></a>23.1 NDB Cluster の概要</h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-basics">23.1.1 NDB Cluster のコア概念</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-nodes-groups">23.1.2 NDB Cluster ノード、ノードグループ、フラグメントレプリカ、およびパーティション</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-overview-requirements">23.1.3 NDB Cluster のハードウェア、ソフトウェア、およびネットワーク要件</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-what-is-new">23.1.4 NDB Cluster の新機能</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-added-deprecated-removed">23.1.5 NDB 8.0
    で追加、非推奨または削除されたオプション、変数、およびパラメータ</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-compared">23.1.6 MySQL Server NDB Cluster と比較した InnoDB の使用</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-limitations">23.1.7 NDB Cluster の既知の制限事項</a></span></dt></dl></div><a class="indexterm" name="idm45563239572976"></a><p>
    <span class="firstterm">NDB Cluster</span> は、共有なしシステムでインメモリーデータベースのクラスタリングを可能にするテクノロジです。 シェアードナッシングアーキテクチャーでは、非常に安価なハードウェアでシステムが動作し、ハードウェアやソフトウェアの要件が最小限に抑えられます。 
  </p><p>
    NDB Cluster は、単一点障害を持たないように設計されています。 シェアードナッシングシステムでは、各コンポーネントに固有のメモリーとディスクが用意され、ネットワーク共有、ネットワークファイルシステム、SAN などの共有ストレージメカニズムの使用は推奨またはサポートされません。 
  </p><p>
    NDB Cluster は、標準の MySQL サーバーを <code class="literal">NDB</code> (<span class="quote">「<span class="quote"><span class="emphasis"><em>N</em></span> etwork <span class="emphasis"><em>D</em></span> ata <span class="emphasis"><em>B</em></span> ase</span>」</span> を表す) と呼ばれるメモリー内クラスタ化ストレージエンジンと統合します。 このドキュメントでは、<code class="literal">NDB</code> という用語はストレージエンジンに固有の設定部分を指しますが、<span class="quote">「<span class="quote">MySQL NDB Cluster</span>」</span> とは、1 つ以上の MySQL サーバーと <code class="literal">NDB</code> ストレージエンジンの組み合わせを指します。 
  </p><p>
    NDB Cluster は、<span class="firstterm">ホスト</span>と呼ばれる一連のコンピュータで構成され、それぞれが 1 つ以上のプロセスを実行しています。 <span class="firstterm">ノード</span>と呼ばれるこれらのプロセスには、MySQL Server (NDB データへのアクセス用)、データノード (データのストレージ用)、1 つ以上の管理サーバー、および場合によってはその他の特殊なデータアクセスプログラムが含まれます。 NDB Cluster 内のこれらのコンポーネントの関係を次に示します: 
  </p><div class="figure"><a name="fig-mysql-cluster-components"></a><p class="title"><b>図 23.1 NDB Cluster コンポーネント</b></p><div class="figure-contents"><div class="mediaobject"><img src="images/cluster-components-1.png" width="583" height="372" alt="このクラスタでは、3 つの MySQL サーバー (mysqld プログラム) が、データを格納する 4 つのデータノード (ndbd プログラム) へのアクセスを提供する SQL ノードです。 SQL ノードとデータノードは NDB 管理サーバー (ndb_mgmd プログラム) の制御下にあります。 様々なクライアントおよび API が SQL ノードと対話できます - mysql クライアント、MySQL C API、PHP、Connector/J、および Connector/NET。 NDB API を使用してカスタムクライアントを作成して、データノードまたは NDB 管理サーバーと対話することもできます。 NDB 管理クライアント (ndb_mgm プログラム) は NDB 管理サーバーと対話します。"></div></div></div><br class="figure-break"><p>
    これらのプログラムはすべて連携して NDB Cluster を形成します (<a class="xref" href="mysql-cluster.html#mysql-cluster-programs" title="23.4 NDB Cluster プログラム">セクション23.4「NDB Cluster プログラム」</a> を参照)。 <code class="literal">NDB</code> ストレージエンジンによってデータが格納されると、データノードにテーブル (およびテーブルデータ) が格納されます。 このようなテーブルには、クラスタ内のほかのすべての MySQL Server (SQL ノード) から直接アクセスできます。 したがって、クラスタにデータを格納する給料計算アプリケーションでは、あるアプリケーションが社員の給料を更新すると、このデータをクエリーするほかのすべての MySQL サーバーがこの変更をただちに認識できます。 
  </p><p>
    NDB Cluster SQL ノードは <span class="command"><strong>mysqld</strong></span> サーバーデーモンを使用しますが、MySQL 8.0 ディストリビューションで提供される <span class="command"><strong>mysqld</strong></span> バイナリと多くの重要な点で異なり、2 つのバージョンの <span class="command"><strong>mysqld</strong></span> は交換できません。
  </p><p>
    また、NDB Cluster に接続されていない MySQL サーバーは、<code class="literal">NDB</code> ストレージエンジンを使用できず、NDB Cluster データにアクセスできません。
  </p><p>
    NDB Cluster のデータノードに格納されているデータはミラー化できます。クラスタは、トランザクションの状態が失われたために少数のトランザクションが中止されること以外に影響を与えることなく、個々のデータノードの障害を処理できます。 トランザクションの失敗はトランザクションアプリケーションが処理すると想定されるため、これが問題の原因になることはないはずです。 
  </p><p>
    個々のノードは、停止して再起動したあと、システム (クラスタ) に再度参加できます。 構成の変更やソフトウェアのアップグレードを行うときは、ローリング再起動 (すべてのノードが順に再起動される) が使用されます (<a class="xref" href="mysql-cluster.html#mysql-cluster-rolling-restart" title="23.5.5 NDB Cluster のローリング再起動の実行">セクション23.5.5「NDB Cluster のローリング再起動の実行」</a>を参照してください)。 ローリング再起動は、新しいデータノードをオンラインで追加するプロセスの一部としても使用されます (<a class="xref" href="mysql-cluster.html#mysql-cluster-online-add-node" title="23.5.7 NDB Cluster データノードのオンラインでの追加">セクション23.5.7「NDB Cluster データノードのオンラインでの追加」</a>を参照してください)。 データノード、NDB Cluster 内での編成方法、および NDB Cluster データの処理方法と格納方法の詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-nodes-groups" title="23.1.2 NDB Cluster ノード、ノードグループ、フラグメントレプリカ、およびパーティション">セクション23.1.2「NDB Cluster ノード、ノードグループ、フラグメントレプリカ、およびパーティション」</a> を参照してください。 
  </p><p>
    NDB Cluster データベースのバックアップと復元は、NDB Cluster 管理クライアントにある <code class="literal">NDB</code> ネイティブ機能と NDB Cluster 配布に含まれる <span class="command"><strong>ndb_restore</strong></span> プログラムを使用して実行できます。 詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-backup" title="23.5.8 NDB Cluster のオンラインバックアップ">セクション23.5.8「NDB Cluster のオンラインバックアップ」</a>および<a class="xref" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="23.4.23 ndb_restore — NDB Cluster バックアップの復元">セクション23.4.23「ndb_restore — NDB Cluster バックアップの復元」</a>を参照してください。 <span class="command"><strong>mysqldump</strong></span> および MySQL Server でこの目的のために用意されている標準の MySQL 機能を使用することもできます。 詳細は、<a class="xref" href="programs.html#mysqldump" title="4.5.4 mysqldump — データベースバックアッププログラム">セクション4.5.4「mysqldump — データベースバックアッププログラム」</a>を参照してください。 
  </p><p>
    NDB Cluster ノードは、ノード間通信にさまざまなトランスポートメカニズムを採用できます。ほとんどの実際の配備では、標準 100 Mbps 以上の TCP/IP または高速 Ethernet ハードウェアが使用されます。
  </p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-cluster-basics"></a>23.1.1 NDB Cluster のコア概念</h3></div></div></div><a class="indexterm" name="idm45563239530928"></a><a class="indexterm" name="idm45563239528816"></a><a class="indexterm" name="idm45563239526752"></a><a class="indexterm" name="idm45563239524688"></a><a class="indexterm" name="idm45563239522624"></a><a class="indexterm" name="idm45563239520544"></a><a class="indexterm" name="idm45563239518464"></a><a class="indexterm" name="idm45563239516000"></a><a class="indexterm" name="idm45563239513536"></a><a class="indexterm" name="idm45563239511072"></a><a class="indexterm" name="idm45563239508544"></a><a class="indexterm" name="idm45563239506512"></a><a class="indexterm" name="idm45563239504480"></a><a class="indexterm" name="idm45563239502432"></a><a class="indexterm" name="idm45563239500384"></a><p>
      <span class="firstterm"><code class="literal">NDBCLUSTER</code></span> (<code class="literal">NDB</code> とも呼ばれる) は、高可用性とデータ永続性の機能を備えたインメモリーストレージエンジンです。
    </p><p>
      <code class="literal">NDBCLUSTER</code> ストレージエンジンはさまざまなフェイルオーバーとロードバランシングのオプションを使って構成できますが、クラスタレベルのストレージエンジンから始めるのがもっとも簡単です。 NDB Cluster <code class="literal">NDB</code> ストレージエンジンには、クラスタ自体内のほかのデータにのみ依存する完全なデータセットが含まれています。 
    </p><p>
      NDB Cluster の<span class="quote">「<span class="quote">「クラスタ」</span>」</span>部分は、MySQL サーバーから独立して構成されます。 NDB Cluster では、クラスタの各部分は<span class="firstterm">ノード</span>とみなされます。 
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
        多くのコンテキストでは、<span class="quote">「<span class="quote">「ノード」</span>」</span>という用語はコンピュータを示すために使用されますが、NDB Cluster について説明するときは<span class="emphasis"><em>プロセス</em></span>を意味します。 1 台のコンピュータで複数のノードを実行できます。1 つ以上のクラスタノードを実行しているコンピュータに対しては、<span class="firstterm">クラスタホスト</span>という用語を使用します。 
      </p></div><p>
      クラスタノードには 3 つのタイプがあり、NDB Cluster の最小構成では、少なくとも 3 つのノードがあり、これらの各タイプのいずれかです:
    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          <span class="firstterm">管理ノード</span>: このタイプのノードの役割は、NDB Cluster 内のほかのノードを管理し、構成データの提供、ノードの起動と停止、バックアップの実行などの機能を実行することです。 このノードタイプはほかのノードの構成を管理するため、このタイプのノードは最初に (ほかのノードより先に) 起動するようにしてください。 管理ノードは、コマンド <span class="command"><strong>ndb_mgmd</strong></span> を使用して起動されます。 
        </p></li><li class="listitem"><p>
          <span class="firstterm">データノード</span>: このタイプのノードにはクラスタのデータが格納されます。 フラグメントレプリカの数にフラグメントの数を掛けた数と同じ数のデータノードがあります (<a class="xref" href="mysql-cluster.html#mysql-cluster-nodes-groups" title="23.1.2 NDB Cluster ノード、ノードグループ、フラグメントレプリカ、およびパーティション">セクション23.1.2「NDB Cluster ノード、ノードグループ、フラグメントレプリカ、およびパーティション」</a> を参照)。 たとえば、2 つのフラグメントレプリカがあり、それぞれに 2 つのフラグメントがある場合、4 つのデータノードが必要です。 1 つのフラグメントレプリカではデータストレージに十分ですが、冗長性は提供されません。したがって、冗長性と高可用性を実現するために、2 つ以上のフラグメントレプリカを使用することをお薦めします。 データノードは、<span class="command"><strong>ndbd</strong></span> (<a class="xref" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="23.4.1 ndbd — NDB Cluster データノードデーモン">セクション23.4.1「ndbd — NDB Cluster データノードデーモン」</a>を参照してください) または <span class="command"><strong>ndbmtd</strong></span> (<a class="xref" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="23.4.3 ndbmtd — NDB Cluster データノードデーモン (マルチスレッド)">セクション23.4.3「ndbmtd — NDB Cluster データノードデーモン (マルチスレッド)」</a>を参照してください) コマンドで起動します。 
        </p><p>
          「NDB Cluster」テーブルは通常、ディスクではなくメモリーに完全に格納されます (このため、「NDB Cluster」を <span class="firstterm">in-memory</span> データベースと呼びます)。 ただし、一部の NDB Cluster データはディスクに格納できます。詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-disk-data" title="23.5.10 NDB Cluster ディスクデータテーブル">セクション23.5.10「NDB Cluster ディスクデータテーブル」</a> を参照してください。 
        </p></li><li class="listitem"><p>
          <span class="firstterm">SQL ノード</span>: これは、クラスタデータにアクセスするノードです。 NDB Cluster の場合、SQL ノードは <code class="literal">NDBCLUSTER</code> ストレージエンジンを使用する従来の MySQL サーバーです。 SQL ノードは、<code class="option">--ndbcluster</code> および <code class="option">--ndb-connectstring</code> オプション (これらについては、この章の別の場所で説明します) を指定して起動される <span class="command"><strong>mysqld</strong></span> プロセスです。場合によっては、追加の MySQL Server オプションも指定できます。 
        </p><p>
          SQL ノードは、NDB Cluster データにアクセスするすべてのアプリケーションを指定する特殊なタイプの<span class="firstterm">API ノード</span>です。 API ノードのもう 1 つの例は、クラスタのバックアップをリストアするために使われる <span class="command"><strong>ndb_restore</strong></span> ユーティリティーです。 NDB API を使用してこのようなアプリケーションを作成できます。 NDB API の基本情報については、<a class="ulink" href="https://dev.mysql.com/doc/ndbapi/en/ndb-getting-started.html" target="_top">Getting Started with the NDB API</a>を参照してください。 
        </p></li></ul></div><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">重要</div><p>
        本番環境で 3 ノードセットアップの採用を期待するのは現実的ではありません。 このような構成では冗長性は提供されません。NDB Cluster の高可用性機能を利用するには、複数のデータおよび SQL ノードを使用する必要があります。 複数の管理ノードを使用することも、強くお勧めします。 
      </p></div><p>
      NDB Cluster 内のノード、ノードグループ、フラグメントレプリカ、およびパーティション間の関係の簡単な概要については、<a class="xref" href="mysql-cluster.html#mysql-cluster-nodes-groups" title="23.1.2 NDB Cluster ノード、ノードグループ、フラグメントレプリカ、およびパーティション">セクション23.1.2「NDB Cluster ノード、ノードグループ、フラグメントレプリカ、およびパーティション」</a> を参照してください。
    </p><p>
      クラスタの構成には、クラスタ内の各ノードの構成と、ノード間の個々の通信リンクの設定が含まれます。 NDB Cluster は現在、データノードがプロセッサの電力、メモリー領域、および帯域幅に関して同種であることを意図して設計されています。 さらに、一元管理の構成を提供するため、クラスタのすべての構成データが全体として 1 つの構成ファイルに格納されます。 
    </p><p>
      管理サーバーは、クラスタ構成ファイルとクラスタログを管理します。 クラスタ内の各ノードは、管理サーバーから構成データを取得するため、管理サーバーがどこにあるかを特定する手段を必要とします。 データノードで注目に値するイベントが発生すると、そのノードはこれらのイベントに関する情報を管理サーバーに転送し、管理サーバーはその情報をクラスタログに書き込みます。 
    </p><p>
      さらに、任意の数のクラスタクライアントプロセスまたはアプリケーションが存在する可能性があります。 これらには、標準の MySQL クライアント、<code class="literal">NDB</code> 専用の API プログラム、管理クライアントなどが含まれます。 次のいくつかの段落で、これらについて説明します。 
    </p><p><b>標準の MySQL クライアント. </b>
        NDB Cluster は、PHP、Perl、C、C++、Java、Python、Ruby などで記述された既存の MySQL アプリケーションで使用できます。 このようなクライアントアプリケーションは、NDB Cluster SQL ノードとして機能する MySQL サーバーとの間で、スタンドアロン MySQL サーバーとの対話とほぼ同じ方法で SQL ステートメントを送受信します。 
      </p><a class="indexterm" name="idm45563239458384"></a><a class="indexterm" name="idm45563239456208"></a><a class="indexterm" name="idm45563239454144"></a><p>
      NDB Cluster をデータソースとして使用する MySQL クライアントは、複数の MySQL サーバーに接続して負荷分散とフェイルオーバーを実現する機能を利用するように変更できます。 たとえば、Connector/J 5.0.6 以降を使用する Java クライアントは、<code class="literal">jdbc:mysql:loadbalance://</code> URL (Connector/J 5.1.7 で改善された) を使用して、負荷分散を透過的に実現できます。NDB Cluster で Connector/J を使用する方法の詳細は、<a class="ulink" href="https://dev.mysql.com/doc/ndbapi/en/mccj-using-connectorj.html" target="_top">Using Connector/J with NDB Cluster</a> を参照してください。 
    </p><p><b>NDB クライアントプログラム. </b>
        高レベルの C++ API である <span class="firstterm">NDB API</span> を使用して、クラスタに接続されている MySQL Servers をバイパスして、<code class="literal">NDBCLUSTER</code> ストレージエンジンから NDB Cluster データに直接アクセスするクライアントプログラムを作成できます。 このようなアプリケーションは、データへの SQL インタフェースを必要としない特殊な目的に役立ちます。 詳細は、<a class="ulink" href="https://dev.mysql.com/doc/ndbapi/en/ndbapi.html" target="_top">The NDB API</a>を参照してください。 
      </p><p>
      <code class="literal">NDB</code> 固有の Java アプリケーションは、<span class="firstterm">NDB Cluster Connector for Java</span> を使用して NDB Cluster 用に記述することもできます。 この NDB Cluster コネクタには、<code class="literal">NDBCLUSTER</code> に直接接続する Hibernate や JPA などのオブジェクトリレーショナルマッピング永続性フレームワークに似た高レベルのデータベース API である <span class="firstterm">ClusterJ</span> が含まれているため、MySQL Server にアクセスする必要はありません。 詳細は、<a class="ulink" href="https://dev.mysql.com/doc/ndbapi/en/mccj-overview-java.html" target="_top">Java and NDB Cluster</a>および<a class="ulink" href="https://dev.mysql.com/doc/ndbapi/en/mccj-overview-clusterj-object-models.html" target="_top">The ClusterJ API and Data Object Model</a>を参照してください。 
    </p><p>
      NDB Cluster は、Node.js を使用して JavaScript で記述されたアプリケーションもサポートします。 JavaScript 用の MySQL Connector には、MySQL Server だけでなく、<code class="literal">NDB</code> ストレージエンジンに直接アクセスするためのアダプタも含まれています。 この Connector を使用するアプリケーションは、通常イベント駆動型であり、ClusterJ に採用されているものと多くの点で似ているドメインオブジェクトモデルを使用します。 詳細は、<a class="ulink" href="https://dev.mysql.com/doc/ndbapi/en/ndb-nodejs.html" target="_top">MySQL NoSQL Connector for JavaScript</a>を参照してください。 
    </p><p><b>管理クライアント. </b>
        これらのクライアントは、管理サーバーに接続して、ノードの正常な起動と停止、メッセージトレースの開始と停止 (デバッグバージョンのみ)、ノードのバージョンとステータスの表示、バックアップの開始と停止などのコマンドを提供します。 このタイプのプログラムの例としては、NDB Cluster に付属する <span class="command"><strong>ndb_mgm</strong></span> 管理クライアントがあります (<a class="xref" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgm" title="23.4.5 ndb_mgm — NDB Cluster 管理クライアント">セクション23.4.5「ndb_mgm — NDB Cluster 管理クライアント」</a> を参照)。 このようなアプリケーションは、NDB Cluster 管理サーバーと直接通信する C 言語 API である <span class="firstterm">MGM API</span> を使用して記述できます。 詳細は、<a class="ulink" href="https://dev.mysql.com/doc/ndbapi/en/mgm-api.html" target="_top">The MGM API</a>を参照してください。 
      </p><p>
      Oracle は、多数のノードで NDB Cluster を再起動するなど、多くの複雑な NDB Cluster 管理タスクを簡略化する高度なコマンド行インタフェースを提供する MySQL Cluster Manager も使用可能にします。 MySQL Cluster Manager クライアントは、ほとんどのノード構成パラメータの値、NDB Cluster に関連する <span class="command"><strong>mysqld</strong></span> サーバーオプションおよび変数を取得および設定するためのコマンドもサポートしています。MySQL Cluster Manager 1.4.8 は NDB 8.0 の実験的なサポートを提供します。 詳しくは<a class="ulink" href="https://dev.mysql.com/doc/mysql-cluster-manager/1.4/en/" target="_top">MySQL™ Cluster Manager 1.4.8 User Manual</a>,をご覧ください。 
    </p><p><b>イベントログ. </b>
        NDB Cluster は、イベントをカテゴリ (起動、シャットダウン、エラー、チェックポイントなど)、優先順位、および重大度別にログに記録します。 すべてのレポート可能イベントの完全なリストについては、<a class="xref" href="mysql-cluster.html#mysql-cluster-event-reports" title="23.5.3 NDB Cluster で生成されるイベントレポート">セクション23.5.3「NDB Cluster で生成されるイベントレポート」</a>を参照してください。 イベントログには、ここに示す 2 つのタイプがあります。 
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          <span class="firstterm">クラスタログ</span>: クラスタに関する必要なすべてのレポート可能イベントが全体として保持されます。
        </p></li><li class="listitem"><p>
          <span class="firstterm">ノードログ</span>: 個々のノードごとに保持される個別のログです。
        </p></li></ul></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
        通常の状況では、クラスタログのみを保持して調べるだけで必要十分です。 ノードログを調べる必要があるのは、アプリケーション開発やデバッグの場合だけです。 
      </p></div><p><b>Checkpoint. </b>
        一般的には、データをディスクに保存したときに<span class="firstterm">チェックポイント</span>に達したといいます。 NDB Cluster に固有のチェックポイントは、コミットされたすべてのトランザクションがディスクに格納される時点です。 <code class="literal">NDB</code> ストレージエンジンには、クラスタデータの一貫したビューが維持されるように連携する 2 つのタイプのチェックポイントがあります。 次のリストにそれらを示します。 
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          <span class="firstterm">ローカルチェックポイント (LCP)</span>: これは、1 つのノードに固有のチェックポイントです。ただし、LCP はクラスタ内のすべてのノードである程度同時に発生します。 LCP は通常、数分ごとに発生します。正確な間隔は、ノードに格納されるデータ量、クラスタアクティビティのレベルおよびその他の要因によって異なります。 
        </p><p>
          NDB 8.0 は部分 LCP をサポートしており、状況によってはパフォーマンスを大幅に向上させることができます。 部分 LCP を有効にし、それらが使用する記憶域の量を制御する <code class="literal">EnablePartialLcp</code> および <code class="literal">RecoveryWork</code> の構成パラメータの説明を参照してください。 
        </p></li><li class="listitem"><p>
          <span class="firstterm">グローバルチェックポイント (GCP)</span>: GCP は、すべてのノードのトランザクションが同期し、Redo ログがディスクにフラッシュされたときに、数秒間隔で発生します。
        </p></li></ul></div><p>
      ローカルチェックポイントとグローバルチェックポイントによって作成されるファイルおよびディレクトリの詳細は、<a class="ulink" href="https://dev.mysql.com/doc/ndb-internals/en/ndb-internals-ndbd-filesystemdir-files.html" target="_top">NDB Cluster Data Node File System Directory</a>を参照してください。
    </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-cluster-nodes-groups"></a>23.1.2 NDB Cluster ノード、ノードグループ、フラグメントレプリカ、およびパーティション</h3></div></div></div><a class="indexterm" name="idm45563239406448"></a><a class="indexterm" name="idm45563239404320"></a><a class="indexterm" name="idm45563239402256"></a><a class="indexterm" name="idm45563239400224"></a><a class="indexterm" name="idm45563239398848"></a><a class="indexterm" name="idm45563239397440"></a><p>
      このセクションでは、NDB Cluster がストレージのデータを分割および複製する方法について説明します。
    </p><p>
      次の各段落では、このトピックを理解する上で中心となるいくつかの概念について説明します。
    </p><p><b>データノード. </b>
        <span class="command"><strong>ndbd</strong></span> または <span class="command"><strong>ndbmtd</strong></span> プロセス。ノードがメンバーであるノードグループに割り当てられた<span class="firstterm">フラグメントレプリカ</span>、つまり<span class="firstterm">パーティション</span>のコピーを格納します。
      </p><p>
      各データノードは、別個のコンピュータに配置するようにしてください。 単一のコンピュータ上で複数のデータノードプロセスをホストすることもできますが、このような構成は通常はお勧めしません。 
    </p><p>
      <span class="quote">「<span class="quote">「ノード」</span>」</span>および<span class="quote">「<span class="quote">「データノード」</span>」</span>という用語は、<span class="command"><strong>ndbd</strong></span> または <span class="command"><strong>ndbmtd</strong></span> プロセスを参照するときに同じ意味で使用されます。ここで言及しているように、管理ノード (<span class="command"><strong>ndb_mgmd</strong></span> プロセス) および SQL ノード (<span class="command"><strong>mysqld</strong></span> プロセス) はこの説明で指定されています。
    </p><p><a name="mysql-cluster-nodes-groups-nodegroup"></a><b>ノードグループ. </b>
        ノードグループは、1 つ以上のノードで構成され、パーティションまたは<span class="firstterm">フラグメントレプリカ</span>のセットを格納します (次の項目を参照)。
      </p><p>
      NDB Cluster 内のノードグループの数は直接構成できません。次に示すように、データノードの数とフラグメントレプリカの数 (<code class="literal">NoOfReplicas</code> 構成パラメータ) の関数です:
    </p><pre class="programlisting">[# of node groups] = [# of data nodes] / <code class="literal">NoOfReplicas</code>
</pre><p>
      したがって、4 つのデータノードを持つ NDB Cluster には、<code class="filename">config.ini</code> ファイルで <code class="literal">NoOfReplicas</code> が 1 に設定されている場合は 4 つのノードグループ、<code class="literal">NoOfReplicas</code> が 2 に設定されている場合は 2 つのノードグループ、<code class="literal">NoOfReplicas</code> が 4 に設定されている場合は 1 つのノードグループがあります。 フラグメントレプリカについては、このセクションの後半で説明します。<code class="literal">NoOfReplicas</code> の詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndbd-definition" title="23.3.3.6 NDB Cluster データノードの定義">セクション23.3.3.6「NDB Cluster データノードの定義」</a> を参照してください。 
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
        NDB Cluster 内のすべてのノードグループは、同じ数のデータノードを持つ必要があります。
      </p></div><p>
      実行中の NDB Cluster に新しいノードグループ (およびその結果として新しいデータノード) をオンラインで追加できます。詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-online-add-node" title="23.5.7 NDB Cluster データノードのオンラインでの追加">セクション23.5.7「NDB Cluster データノードのオンラインでの追加」</a> を参照してください。
    </p><p><a name="mysql-cluster-nodes-groups-partition"></a><b>パーティション. </b>
        これは、クラスタに格納されるデータの一部分です。 各ノードは、そのノードに割り当てられているパーティション (少なくとも 1 つのフラグメントレプリカ) の少なくとも 1 つのコピーをクラスタで使用できるようにします。 
      </p><p>
      NDB Cluster によってデフォルトで使用されるパーティションの数は、次に示すように、データノードの数およびデータノードで使用されている LDM スレッドの数によって異なります:
    </p><pre class="programlisting">[# of partitions] = [# of data nodes] * [# of LDM threads]
</pre><p>
      <span class="command"><strong>ndbmtd</strong></span> を実行しているデータノードを使用する場合、LDM スレッドの数は <code class="literal">MaxNoOfExecutionThreads</code> の設定によって制御されます。 <span class="command"><strong>ndbd</strong></span> を使用する場合、単一の LDM スレッドが存在します。つまり、クラスタに参加しているノードと同じ数のクラスタパーティションが存在します。 これは、<code class="literal">MaxNoOfExecutionThreads</code> を 3 以下に設定して <span class="command"><strong>ndbmtd</strong></span> を使用する場合にも当てはまります。 (LDM スレッドの数はこのパラメータの値とともに増加しますが、厳密に線形な方法では増加せず、設定に追加の制約があることに注意してください。詳細は、<code class="literal">MaxNoOfExecutionThreads</code> の説明を参照してください。) 
    </p><p><a name="mysql-cluster-nodes-groups-user-partitioning"></a><b>NDB とユーザー定義のパーティション化. </b>
        NDB Cluster は通常、<code class="literal">NDBCLUSTER</code> テーブルを自動的にパーティション化します。 ただし、<code class="literal">NDBCLUSTER</code> テーブルにユーザー定義のパーティション化を適用することもできます。 これには、次の制限があります。 
      </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
          <code class="literal">NDB</code> テーブルを使用した本番では、<code class="literal">KEY</code> および <code class="literal">LINEAR KEY</code> パーティション化スキームのみがサポートされます。
        </p></li><li class="listitem"><p>
          任意の <code class="literal">NDB</code> テーブルに対して明示的に定義できるパーティションの最大数は、このセクションで前述したように決定される NDB Cluster 内のノードグループの数である <code class="literal">8 * [<em class="replaceable"><code>number of LDM threads</code></em>] * [<em class="replaceable"><code>number of node groups</code></em>]</code>です。 データノードプロセスに対して <span class="command"><strong>ndbd</strong></span> を実行している場合、LDM スレッドの数を設定しても効果はありません (<code class="literal">ThreadConfig</code> は <span class="command"><strong>ndbmtd</strong></span> にのみ適用されるため)。このような場合、この計算を実行するために、この値は 1 と同等であるかのように処理できます。 
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="23.4.3 ndbmtd — NDB Cluster データノードデーモン (マルチスレッド)">セクション23.4.3「ndbmtd — NDB Cluster データノードデーモン (マルチスレッド)」</a>を参照してください。
        </p></li></ol></div><p>
      NDB Cluster およびユーザー定義パーティショニングに関する詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-limitations" title="23.1.7 NDB Cluster の既知の制限事項">セクション23.1.7「NDB Cluster の既知の制限事項」</a>、および <a class="xref" href="partitioning.html#partitioning-limitations-storage-engines" title="24.6.2 ストレージエンジンに関連するパーティショニング制限">セクション24.6.2「ストレージエンジンに関連するパーティショニング制限」</a> を参照してください。
    </p><p><a name="mysql-cluster-nodes-groups-replica"></a><b>フラグメントのレプリカ. </b>
        これは、クラスタパーティションのコピーです。 ノードグループ内の各ノードには、フラグメントレプリカが格納されます。 <span class="firstterm">パーティションレプリカ</span>と呼ばれることもあります。 フラグメントレプリカの数は、ノードグループ当たりのノード数と同じです。 
      </p><p>
      フラグメントレプリカは、完全に単一のノードに属します。ノードには、複数のフラグメントレプリカを格納できます (通常は格納できます)。
    </p><p>
      次の図は、<span class="command"><strong>ndbd</strong></span> を実行している 4 つのデータノードがあり、それぞれ 2 つのノードの 2 つのノードグループに配置されている NDB Cluster を示しています。ノード 1 と 2 はノードグループ 0 に属し、ノード 3 と 4 はノードグループ 1 に属しています。
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
        ここにはデータノードのみが表示されます。動作中の NDB Cluster では、クラスタ管理のために <span class="command"><strong>ndb_mgmd</strong></span> プロセスが必要ですが、クラスタによって格納されているデータにアクセスするために少なくとも 1 つの SQL ノードが必要ですが、わかりやすくするため、これらは図から省略されています。
      </p></div><div class="figure"><a name="fig-mysql-cluster-2-node-groups"></a><p class="title"><b>図 23.2 2 つのノードグループを持つ NDB Cluster</b></p><div class="figure-contents"><div class="mediaobject"><img src="images/fragment-replicas-groups-1-1.png" width="625" height="825" alt="内容は周囲のテキストで説明されています。"></div></div></div><br class="figure-break"><p>
      クラスタに格納されたデータは、0、1、2、3 の番号が付けられた 4 つのパーティションに分割されています。 各パーティションは同じノードグループに (複数のコピーで) 格納されます。 パーティションは、次のように各ノードグループに交互に格納されます。 
    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          パーティション 0 はノードグループ 0 に格納され、<span class="firstterm">プライマリフラグメントレプリカ</span> (プライマリコピー) はノード 1 に格納され、<span class="firstterm">バックアップフラグメントのレプリカ</span> (パーティションのバックアップコピー) はノード 2 に格納されます。
        </p></li><li class="listitem"><p>
          パーティション 1 は他のノードグループ (ノードグループ 1) に格納され、このパーティションのプライマリフラグメントレプリカはノード 3 にあり、そのバックアップフラグメントレプリカはノード 4 にあります。
        </p></li><li class="listitem"><p>
          パーティション 2 はノードグループ 0 に格納されます。 ただし、その 2 つのフラグメントレプリカの配置は、パーティション 0 の配置から逆になります。パーティション 2 の場合、プライマリフラグメントレプリカはノード 2 に格納され、バックアップはノード 1 に格納されます。 
        </p></li><li class="listitem"><p>
          パーティション 3 はノードグループ 1 に格納され、その 2 つのフラグメントレプリカの配置はパーティション 1 の配置から逆になります。 つまり、プライマリフラグメントレプリカはノード 4 にあり、バックアップはノード 3 にあります。 
        </p></li></ul></div><p>
      NDB Cluster の継続的な操作に関する意味は次のとおりです: クラスタに参加している各ノードグループのノードが少なくとも 1 つ動作しているかぎり、クラスタにはすべてのデータの完全なコピーがあり、実行可能なままです。 これを次の図に示します。 
    </p><div class="figure"><a name="fig-mysql-cluster-nodes-required-2x2"></a><p class="title"><b>図 23.3 2x2 NDB Cluster に必要なノード</b></p><div class="figure-contents"><div class="mediaobject"><img src="images/replicas-groups-1-2.png" width="500" height="395" alt="内容は周囲のテキストで説明されています。"></div></div></div><br class="figure-break"><p>
      この例では、クラスタはそれぞれ 2 つのデータノードで構成される 2 つのノードグループで構成されています。 各データノードは、<span class="command"><strong>ndbd</strong></span> のインスタンスを実行しています。 クラスタ<span class="quote">「<span class="quote">「アライブ」</span>」</span>を保持するには、ノードグループ 0 の少なくとも 1 つのノードとノードグループ 1 の少なくとも 1 つのノードの組み合わせで十分です。 ただし、単一ノードグループの両方のノードで障害が発生した場合、他のノードグループの残りの 2 つのノードで構成される組合せでは不十分です。 この状況では、クラスタはパーティション全体を失ったため、すべての NDB Cluster データの完全なセットにアクセスできなくなります。 
    </p><p>
      単一の NDB Cluster インスタンスでサポートされるノードグループの最大数は 48 です。
    </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-cluster-overview-requirements"></a>23.1.3 NDB Cluster のハードウェア、ソフトウェア、およびネットワーク要件</h3></div></div></div><a class="indexterm" name="idm45563239302416"></a><a class="indexterm" name="idm45563239300272"></a><p>
      NDB Cluster の強みの 1 つは、すべてのライブデータストレージがメモリー内で実行されるため、コモディティーハードウェア上で実行でき、大量の RAM 以外はこの点で異常な要件がないことです。 (ディスクデータテーブルを使用してこの要件を削減することもできます。詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-disk-data" title="23.5.10 NDB Cluster ディスクデータテーブル">セクション23.5.10「NDB Cluster ディスクデータテーブル」</a>を参照してください。) 当然ながら、複数の高速な CPU を使用すればパフォーマンスは向上します。 ほかの NDB Cluster プロセスのメモリー要件は比較的小さくなります。 
    </p><p>
      NDB Cluster のソフトウェア要件も最新です。 ホストオペレーティングシステムで NDB Cluster をサポートするために、異常なモジュール、サービス、アプリケーション、または構成は必要ありません。 サポートされるオペレーティングシステムについては、標準のインストールで十分のはずです。 MySQL のソフトウェア要件は単純です: 必要なのは NDB Cluster の本番リリースだけです。 NDB Cluster を使用できるようにするためにのみ、MySQL を自分でコンパイルする必要はありません。 使用しているプラットフォームに適したバイナリを使用していることを前提としています。このバイナリは、<a class="ulink" href="https://dev.mysql.com/downloads/cluster/" target="_top">https://dev.mysql.com/downloads/cluster/</a> の NDB Cluster ソフトウェアのダウンロードページから入手できます。 
    </p><p>
      ノード間の通信の場合、NDB Cluster は任意の標準トポロジで TCP/IP ネットワークをサポートし、各ホストに必要な最小値は、標準の 100 Mbps Ethernet カードと、クラスタ全体にネットワーク接続を提供するためのスイッチ、ハブ、またはルーターです。 NDB Cluster は、次の理由により、クラスタの一部を形成していないマシンと共有されていない独自のサブネット上で実行することを強くお勧めします: 
    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><b>セキュリティー. </b>
            NDB Cluster ノード間の通信は暗号化またはシールドされません。 NDB Cluster 内の転送を保護する唯一の方法は、保護されたネットワーク上で NDB Cluster を実行することです。 NDB Cluster を Web アプリケーションに使用する場合、クラスタはネットワークの非武装地帯 (<a class="ulink" href="http://compnetworking.about.com/cs/networksecurity/g/bldef_dmz.htm" target="_top">DMZ</a>) またはほかの場所ではなく、ファイアウォールの内側に確実に配置するようにしてください。 
          </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-security-networking-issues" title="23.5.17.1 NDB Cluster のセキュリティーおよびネットワークの問題">セクション23.5.17.1「NDB Cluster のセキュリティーおよびネットワークの問題」</a>を参照してください。
        </p></li><li class="listitem"><p><b>効率. </b>
            プライベートネットワークまたは保護されたネットワークで NDB Cluster を設定すると、クラスタはクラスタホスト間の帯域幅を排他的に使用できます。 NDB Cluster に別のスイッチを使用すると、NDB Cluster データへの不正アクセスから保護できるだけでなく、NDB Cluster ノードがネットワーク上のほかのコンピュータ間の転送によって発生する干渉から遮断されることも保証されます。 信頼性を高めるため、デュアルスイッチとデュアルカードを使用して、単一障害点になったネットワークを除去できます。多くのデバイスドライバがこのような通信リンクのフェイルオーバーをサポートしています。 
          </p></li></ul></div><p><a name="mysql-cluster-network-latency-issues"></a><b>ネットワーク通信と待機時間. </b>
        NDB Cluster でクエリーおよび更新を実行するには、データノードと API ノード (SQL ノードを含む) の間、およびデータノードとほかのデータノードの間の通信が必要です。 これらのプロセス間通信の待機時間は、ユーザークエリーの観測されるパフォーマンスと待機時間に直接影響を与える可能性があります。 さらに、ノードのサイレント障害にもかかわらず一貫性とサービスを維持するために、NDB Cluster は、ノードからの通信の拡張損失をノード障害として処理するハートビートおよびタイムアウトメカニズムを使用します。 これは、冗長性の低下につながる可能性があります。 データの整合性を維持するために、NDB Cluster はノードグループ内の最後のノードで障害が発生したときにシャットダウンすることを思い出してください。 したがって、強制的なシャットダウンのリスクを増やさないようにするため、ノード間通信の中断はできるかぎり回避すべきです。 
      </p><p>
      データノードまたは API ノードに障害が発生すると、障害が発生したノードに関係するコミットされていないすべてのトランザクションが中止されます。 データノードをリカバリするには、データノードのサービスを再開する前に、障害が発生したノードのデータを残存するデータノードのデータと同期し、ディスクベースの redo ログとチェックポイントログを再構築する必要があります。 このリカバリには時間がかかる場合があり、その間、クラスタは冗長性が低下した状態で動作します。 
    </p><p>
      ハートビートは、すべてのノードでハートビート信号が遅延なく生成されるかどうかに依存しています。 ノードに過大な負荷がかかったり、マシンの CPU がほかのプログラムと共有されるために不十分だったり、スワッピングによる遅延が発生したりすると、これは不可能になります。 ハートビート生成の遅延が十分に大きくなると、ほかのノードは応答が遅いノードを障害発生ノードとして扱います。 
    </p><p>
      このように遅いノードを障害発生ノードとして扱うことは、ノードの遅い動作がクラスタの残りの部分にどの程度影響するかによって、望ましい場合とそうでない場合があります。 NDB Cluster 用の <code class="literal">HeartbeatIntervalDbDb</code> や <code class="literal">HeartbeatIntervalDbApi</code> などのタイムアウト値を設定する場合は、迅速な検出、フェイルオーバー、およびサービスへの復帰を実現しながら、費用のかかる誤検出を回避するよう注意する必要があります。 
    </p><p>
      データノード間の通信待機時間が LAN 環境での予想値 (およそ 100 マイクロ秒) より大きくなると予想される場合は、タイムアウトのパラメータを増やして、許容する待機時間が構成したタイムアウトの範囲に十分に収まるようにする必要があります。 このようにタイムアウトを増やすと、最大の障害検出時間および (その結果としての) サービスリカバリ時間にも類似の効果があります。 
    </p><p>
      LAN 環境は、通常、安定した小さい待機時間で構成できるため、高速フェイルオーバーによる冗長性を提供できます。 個々のリンク障害は、最小および制御された待機時間を TCP レベルで表示して回復できます (NDB Cluster は通常動作します)。 WAN 環境では、待機時間に幅があり、冗長性についてもフェイルオーバーに時間がかかる可能性があります。 個々のリンク障害では、エンドツーエンドの接続をリストアする前に、ルート変更を伝播する必要があります。 これは、TCP レベルでは個々のチャネルの大きな待機時間として現れます。 これらのシナリオで最悪の場合に観測される TCP 待機時間は、IP 層で障害を回避するために行われる再ルーティングの最大時間に関連しています。 
    </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-cluster-what-is-new"></a>23.1.4 NDB Cluster の新機能</h3></div></div></div><a class="indexterm" name="idm45563239269904"></a><a class="indexterm" name="idm45563239268816"></a><a class="indexterm" name="idm45563239267360"></a><p>
      次のセクションでは、以前のリリースシリーズと比較して、8.0.23 を介した MySQL NDB Cluster 8.0 での NDB Cluster の実装の変更点について説明します。 NDB Cluster 8.0 は、NDB 8.0.19 以降の General Availability (GA) リリースとして使用できます。 NDB Cluster 7.6 および 7.5 は、本番で引き続きサポートされている以前の GA リリースです。NDB Cluster 7.6 については、<a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-what-is-new-7-6.html" target="_top">What is New in NDB Cluster 7.6</a> を参照してください。 NDB Cluster 7.5 に関する同様の情報については、<a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-what-is-new-7-5.html" target="_top">What is New in NDB Cluster 7.5</a> を参照してください。 NDB Cluster 7.4 および 7.3 は以前の GA リリースで本番で引き続きサポートされていますが、本番用の新しい配備では NDB Cluster 8.0 を使用することをお勧めします。<a class="ulink" href="https://dev.mysql.com/doc/refman/5.6/en/mysql-cluster.html" target="_top">MySQL NDB Cluster 7.3 and NDB Cluster 7.4</a> を参照してください。 
    </p><h4><a name="mysql-cluster-what-is-new-8-0"></a>NDB Cluster 8.0 の新機能</h4><p>
      関心のある NDB Cluster 8.0 の主な変更点と新機能を次のリストに示します:
    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><b>互換性の強化. </b>
            次の変更により、他の MySQL ストレージエンジンと比較して、<code class="literal">NDB</code> の動作における重要でない長期的な違いが軽減されます:
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><b>MySQL サーバーと並行した開発. </b>
                このリリース以降、MySQL NDB Cluster は、次の機能を備えた新しい統合リリースモデルで、標準の MySQL 8.0 サーバーと並行して開発されています:
              </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: square; "><li class="listitem"><p>
                  NDB 8.0 は、MySQL 8.0 ソースコードツリーで開発、構築、およびリリースされます。
                </p></li><li class="listitem"><p>
                  NDB Cluster 8.0 リリースの番号スキームは、バージョン 8.0.13 以降の MySQL 8.0 のスキームに従います。
                </p></li><li class="listitem"><p>
                  <code class="literal">NDB</code> サポートを使用してソースを構築すると、次に示すように、<span class="command"><strong>mysql</strong></span> <code class="option">-V</code> によって返されるバージョン文字列に <code class="literal">-cluster</code> が追加されます:
                </p><pre class="programlisting">shell≫ <strong class="userinput"><code>mysql -V</code></strong>
mysql  Ver 8.0.23-cluster for Linux on x86_64 (Source distribution)
</pre><p>
                  <code class="literal">NDB</code> バイナリには、次のように MySQL Server バージョンと <code class="literal">NDB</code> エンジンバージョンの両方が引き続き表示されます:
                </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>ndb_mgm -V</code></strong>
MySQL distrib mysql-8.0.23 ndb-8.0.23, for Linux (x86_64)
</pre><p>
                  MySQL Cluster NDB 8.0 では、これらの 2 つのバージョン番号は常に同じです。
                </p></li></ul></div><p>
              NDB Cluster をサポートする MySQL 8.0.13 (またはそれ以降) ソースを構築するには、CMake オプション <code class="option">-DWITH_NDBCLUSTER</code> を使用します。
            </p></li><li class="listitem"><p><b>プラットフォームサポートノート. </b>
                NDB 8.0 は、プラットフォームサポートで次の変更を行います:
              </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: square; "><li class="listitem"><p>
                  <code class="literal">NDBCLUSTER</code> では、32-bit プラットフォームはサポートされなくなりました。 NDB 8.0.21 以降、NDB 構築プロセスはシステムアーキテクチャーをチェックし、64 ビットプラットフォームでない場合は中止します。 
                </p></li><li class="listitem"><p>
                  NDB 8.0.18 以降では、64 ビット <code class="literal">ARM</code> CPU のソースから <code class="literal">NDB</code> を構築できます。 現在、このサポートはソースのみであり、このプラットフォームにプリコンパイルされたバイナリは提供されていません。 
                </p></li></ul></div></li><li class="listitem"><p><b>データベース名とテーブル名. </b>
                NDB 8.0.18 の時点では、データベースおよびテーブルの識別子に対する 63 バイトの制限が削除されます。 これらの識別子は、ほかの MySQL ストレージエンジンを使用するオブジェクトの場合と同様に、最大 64 バイトを使用できるようになりました。 <a class="xref" href="mysql-cluster.html#mysql-cluster-limitations-resolved" title="23.1.7.11 前 NDB Cluster 8.0 で解決される NDB Cluster の問題">セクション23.1.7.11「前 NDB Cluster 8.0 で解決される NDB Cluster の問題」</a>を参照してください。 
              </p></li><li class="listitem"><p><b>外部キーに対して生成された名前. </b>
                <code class="literal">NDB</code> (バージョン 8.0.18 以降) では、内部的に生成された外部キーの命名にパターン <code class="literal"><em class="replaceable"><code>tbl_name</code></em>_fk_<em class="replaceable"><code>N</code></em></code> が使用されるようになりました。 これは、<code class="literal">InnoDB</code> で使用されるパターンに似ています。 
              </p></li></ul></div></li><li class="listitem"><p><b>スキーマとメタデータの分散および同期. </b>
            NDB 8.0 では、MySQL データディクショナリを使用して、クラスタに参加している SQL ノードにスキーマ情報を分散し、既存の SQL ノード間で新しいスキーマ変更を同期します。 次のリストでは、この統合作業に関連する個々の拡張機能について説明します: 
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><b>スキーマ分散の拡張機能. </b>
                スキーマ操作を処理し、その進行状況を追跡する <code class="literal">NDB</code> スキーマ配布コーディネータは NDB 8.0.17 で拡張され、スキーマ操作中に使用されるリソースがその最後に解放されるようになりました。 以前は、この作業の一部はスキーマ分散クライアントによって実行されていました。これは、クライアントに必ずしもすべての必要な状態情報がないために変更されており、クライアントが完了前にコーディネータに通知せずにスキーマ操作を破棄することを決定した場合、リソースリークが発生する可能性がありました。 
              </p><p>
              この問題を修正するために、スキーマ操作のタイムアウト検出がスキーマ配布クライアントからコーディネータに移動され、スキーマ操作中に使用されたリソースをクリーンアップする機会がコーディネータに提供されました。 コーディネータは、進行中のスキーマ操作のタイムアウトを定期的にチェックし、タイムアウトの検出時に、指定されたスキーマ操作をまだ完了していない参加者を失敗としてマークします。 また、スキーマ操作のタイムアウトが発生するたびに適切な警告が表示されます。 (このようなタイムアウトが検出されると、スキーマ操作自体が続行されることに注意してください。) 追加のレポートは、アクティブなスキーマ操作のリストを、これらの操作の進行中に定期的に出力することによって行われます。 
            </p><p>
              この作業の追加部分として、新しい <span class="command"><strong>mysqld</strong></span> オプション <code class="option">--ndb-schema-dist-timeout</code> を使用すると、スキーマ操作がタイムアウトとマークされるまで待機する時間の長さを設定できます。
            </p></li><li class="listitem"><p><b>ディスクデータファイルの分散. </b>
                NDB Cluster 8.0.14 以降、<code class="literal">NDB</code> は MySQL データディクショナリを使用して、ディスクデータファイルおよび関連する構成 (テーブルスペースやログファイルグループなど) が、接続されているすべての SQL ノード間で正しく分散されていることを確認します。
              </p></li><li class="listitem"><p><b>テーブルスペースオブジェクトのスキーマ同期. </b>
                MySQL Server は、SQL ノードとして NDB クラスタに接続するときに、そのデータディクショナリを <code class="literal">NDB</code> ディクショナリにある情報と照合してチェックします。
              </p><p>
              以前は、新しい SQL ノードの接続時に同期された <code class="literal">NDB</code> オブジェクトはデータベースとテーブルだけでした。MySQL NDB Cluster 8.0.14 以降では、テーブルスペースやログファイルグループを含むディスクデータオブジェクトのスキーマ同期も実装されていました。 これにより、テーブルスペースおよびログファイルグループが MySQL Server データディクショナリではなく <code class="literal">NDB</code> ディクショナリにリストアされたネイティブのバックアップおよびリストア後に、MySQL データディクショナリと <code class="literal">NDB</code> ディクショナリの間で不一致が発生する可能性がなくなります。 
            </p><p>
              存在しないテーブルスペースを参照する <code class="literal">CREATE TABLE</code> ステートメントを発行することもできなくなりました。 このようなステートメントはエラーで失敗します。 
            </p></li><li class="listitem"><p><b>データベース DDL 同期の拡張機能. </b>
                NDB 8.0.17 で行われた作業により、新しく結合 (または再結合) された SQL ノードと既存の SQL ノード上のデータベースの同期がデータディクショナリを適切に使用するようになり、この SQL ノードで見逃された可能性のあるデータベースレベルの操作 (<code class="literal">CREATE DATABASE</code>、<code class="literal">ALTER DATABASE</code> または <code class="literal">DROP DATABASE</code>) がクラスタに接続 (または再接続) されたときに正しく複製されるようになりました。
              </p><p>
              起動時に実行されるスキーマ同期化プロシージャの一部として、SQL ノードはクラスタデータノード上のすべてのデータベースを独自のデータディクショナリ内のデータベースと比較するようになり、これらのいずれかが SQL ノードデータディクショナリから欠落していることが判明した場合、SQL ノードは <code class="literal">CREATE DATABASE</code> ステートメントを実行してローカルにインストールします。 このように作成されたデータベースでは、ステートメントの実行時にこの SQL ノードで有効なデフォルトの MySQL Server データベースプロパティ (<code class="literal">character_set_database</code> や <code class="literal">collation_database</code> によって決定されるものなど) が使用されます。 
            </p></li><li class="listitem"><p><b>NDB メタデータ変更の検出および同期. </b>
                NDB 8.0.16 は、MySQL データディクショナリを使用して、テーブル、テーブルスペース、ログファイルグループなどのデータオブジェクトのメタデータの更新を検出するための新しいメカニズムを実装しています。 これは、バックグラウンドで実行され、<code class="literal">NDB</code> ディクショナリと MySQL データディクショナリの間の不整合を定期的にチェックする <code class="literal">NDB</code> メタデータ変更モニタースレッドであるスレッドを使用して行われます。 
              </p><p>
              モニターは、デフォルトで 60 秒ごとにメタデータチェックを実行します。 ポーリング間隔を調整するには、<code class="literal">ndb_metadata_check_interval</code> システム変数の値を設定します。ポーリングを完全に無効にするには、<code class="literal">ndb_metadata_check</code> システム変数を <code class="literal">OFF</code> に設定します。 ステータス変数 (こちらも NDB 8.0.16 で追加) <code class="literal">Ndb_metadata_detected_count</code> は、<span class="command"><strong>mysqld</strong></span> が最後に起動されてから不一致が検出された回数を示します。 
            </p><p>
              バージョン 8.0.18 以降、<code class="literal">NDB</code> では、起動後の操作中にメタデータチェンジモニタースレッドによって発行された <code class="literal">NDB</code> テーブル、ログファイルグループおよびテーブルスペースオブジェクトの不一致が自動的にチェックされ、<code class="literal">NDB</code> binlog スレッドによって同期化されます。
            </p><p>
              NDB 8.0.18 は、自動同期に関連する 2 つのステータス変数も追加: <code class="literal">Ndb_metadata_synced_count</code> には、自動的に同期されたオブジェクトの数が表示されます。<code class="literal">Ndb_metadata_excluded_count</code> は、同期が失敗したオブジェクトの数を示します (NDB 8.0.22 より前では、この変数の名前は <code class="literal">Ndb_metadata_blacklist_size</code> でした)。 また、どのオブジェクトが同期化されているかを確認するには、クラスタログを調べます。 
            </p><p>
              NDB 8.0.19 は、変更が検出および同期されるオブジェクトにデータベースを追加することによって、この機能をさらに強化します。 <code class="literal">NDB</code> テーブルで実際に使用されるデータベースのみが処理され、MySQL データディクショナリに存在する可能性のある他のデータベースは無視されます。 これにより、このデータベースを手動で作成するために、<code class="literal">NDB</code> にテーブルが存在していても、それが属するテーブルおよびデータベースが SQL ノードに存在しない場合に、以前の要件がなくなります。このような場合は、データベースおよびそれに属するすべての <code class="literal">NDB</code> テーブルを SQL ノードに自動的に作成する必要があります。 
            </p><p>
              NDB 8.0.19 では、<code class="literal">ndb_metadata_sync</code> システム変数も導入されています。この変数を <code class="literal">true</code> に設定すると、<code class="literal">ndb_metadata_check_interval</code> および <code class="literal">ndb_metadata_check</code> に対して行われたすべての設定がオーバーライドされ、変更モニタースレッドが連続したメタデータ変更検出を開始します。
            </p><p>
              NDB 8.0.22 以降では、<code class="literal">ndb_metadata_sync</code> を <code class="literal">true</code> に設定すると、以前に同期が失敗したオブジェクトのリストがクリアされるため、個々のテーブルを検出したり、SQL ノードをクラスタに再接続して同期を再トリガーしたりする必要がなくなります。 また、この変数を <code class="literal">false</code> に設定すると、再試行を待機しているオブジェクトのリストがクリアされます。 
            </p><p>
              NDB 8.0.21 以降、ログメッセージまたはステータス変数から取得できる自動同期の現在の状態に関する詳細情報は、MySQL パフォーマンススキーマに追加された 2 つの新しいテーブルによって提供されます。 テーブルは次のとおりです: 
            </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: square; "><li class="listitem"><p>
                  <code class="literal">ndb_sync_pending_objects</code>: <code class="literal">NDB</code> ディクショナリと MySQL データディクショナリの間で不一致が検出された (および自動同期から除外されていない) データベースオブジェクトに関する情報が含まれます。
                </p></li><li class="listitem"><p>
                  <code class="literal">ndb_sync_excluded_objects</code>: 除外された <code class="literal">NDB</code> データベースオブジェクトに関する情報が含まれます。これらのオブジェクトは、<code class="literal">NDB</code> ディクショナリと MySQL データディクショナリの間で同期できないため、手動操作が必要になります。
                </p></li></ul></div><p>
              これらのテーブルのいずれかの行には、データベースオブジェクトの親スキーマ、名前およびタイプが示されます。 オブジェクトのタイプには、スキーマ、テーブルスペース、ログファイルグループおよびテーブルがあります。 (オブジェクトがログファイルグループまたはテーブルスペースの場合、親スキーマは <code class="literal">NULL</code> です。) また、<code class="literal">ndb_sync_excluded_objects</code> テーブルには、オブジェクトが除外された理由が表示されます。 
            </p><p>
              これらのテーブルは、<code class="literal">NDBCLUSTER</code> ストレージエンジンのサポートが有効になっている場合にのみ存在します。 これらのテーブルの詳細は、<a class="xref" href="performance-schema.html#performance-schema-ndb-cluster-tables" title="27.12.12 パフォーマンススキーマ NDB Cluster テーブル">セクション27.12.12「パフォーマンススキーマ NDB Cluster テーブル」</a> を参照してください。 
            </p></li><li class="listitem"><p><a name="mysql-cluster-what-is-new-8-0-extra-metadata"></a><b>NDB テーブルの追加メタデータの変更. </b>
                NDB 8.0.14 以降では、<code class="literal">NDB</code> テーブルの追加のメタデータプロパティーは、以前のバージョンと同様にテーブルのバイナリ表現を格納するのではなく、MySQL データディクショナリから直列化されたメタデータを格納するために使用されます。 (これは <code class="filename">.frm</code> ファイルであり、MySQL Server-see <a class="xref" href="data-dictionary.html" title="第 14 章 MySQL データディクショナリ">第14章「<i>MySQL データディクショナリ</i>」</a> では使用されなくなりました。) この変更をサポートする作業の一環として、テーブルの追加メタデータの使用可能なサイズが増加しました。 つまり、NDB Cluster 8.0.14 以降で作成された <code class="literal">NDB</code> テーブルは、以前の NDB Cluster リリースと互換性がありません。 以前のリリースで作成されたテーブルは NDB 8.0.14 以降で使用できますが、それより前のバージョンで開くことはできません。 
              </p><p>
              このメタデータには、NDB 8.0.13 で実装された NDB API メソッド <code class="literal">getExtraMetadata()</code> および <code class="literal">setExtraMetadata()</code> を使用してアクセスできます。
            </p><p>
              詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-upgrade-downgrade" title="23.2.7 NDB Cluster のアップグレードおよびダウングレード">セクション23.2.7「NDB Cluster のアップグレードおよびダウングレード」</a>を参照してください。
            </p></li><li class="listitem"><p><b>.frm ファイルを使用したテーブルのオンザフライアップグレード. </b>
                NDB 7.6 以前で作成されたテーブルには、MySQL 8.0 ではサポートされなくなった圧縮 <code class="filename">.frm</code> ファイルの形式でメタデータが含まれています。 NDB 8.0 へのオンラインアップグレードを容易にするために、<code class="literal">NDB</code> はこのメタデータのオンザフライ変換を実行し、MySQL Server データディクショナリに書き込みます。これにより、NDB Cluster 8.0 内の <span class="command"><strong>mysqld</strong></span> は、以前のバージョンの <code class="literal">NDB</code> ソフトウェアによるテーブルの以降の使用を妨げずにテーブルを操作できます。 
              </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">重要</div><p>
                NDB 8.0 でテーブル構造が変更されると、そのメタデータはデータディクショナリを使用して格納され、NDB 7.6 以前からはアクセスできなくなります。
              </p></div><p>
              この拡張機能により、以前のバージョンを使用して作成された <code class="literal">NDB</code> バックアップを NDB 8.0 以降を実行しているクラスタに復元することもできます。
            </p></li><li class="listitem"><p><b>メタデータ整合性チェックのエラーロギング. </b>
                NDB 8.0 で以前に実行された作業の一部として、NDB ディクショナリ内の <code class="literal">NDB</code> テーブルの表現と MySQL データディクショナリ内の対応する表現との間の自動同期の一部として実行されるメタデータチェックには、テーブル名、ストレージエンジン、および内部 ID が含まれます。 NDB 8.0.23 以降、チェックされるプロパティーの範囲は、次のデータオブジェクトのプロパティーを含むように拡張されます: 
              </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: square; "><li class="listitem"><p>
                  Columns
                </p></li><li class="listitem"><p>
                  インデックス
                </p></li><li class="listitem"><p>
                  外部キー
                </p></li></ul></div><p>
              また、メタデータプロパティの不一致の詳細が MySQL サーバーのエラーログに書き込まれるようになりました。 エラーログメッセージに使用される書式は、差異がテーブルレベルで検出されるか、カラム、インデックスまたは外部キーのレベルで検出されるかによって若干異なります。 テーブルレベルのプロパティーの不一致によるログエラーの形式を次に示します。ここで、<em class="replaceable"><code>property</code></em> はプロパティー名、<em class="replaceable"><code>ndb_value</code></em> は NDB ディクショナリに格納されているプロパティー値、<em class="replaceable"><code>mysqld_value</code></em> は MySQL データディクショナリに格納されているプロパティーの値です: 
            </p><pre class="programlisting">Diff in '<em class="replaceable"><code>property</code></em>' detected, '<em class="replaceable"><code>ndb_value</code></em>' != '<em class="replaceable"><code>mysqld_value</code></em>'
</pre><p>
              カラム、インデックスおよび外部キーのプロパティの不一致の場合、形式は次のようになります。ここで、<em class="replaceable"><code>obj_type</code></em> は <code class="literal">column</code>、<code class="literal">index</code> または <code class="literal">foreign key</code> のいずれかで、<em class="replaceable"><code>obj_name</code></em> はオブジェクトの名前です:
            </p><pre class="programlisting">Diff in <em class="replaceable"><code>obj_type</code></em> '<em class="replaceable"><code>obj_name</code></em>.<em class="replaceable"><code>property</code></em>' detected, '<em class="replaceable"><code>ndb_value</code></em>' != '<em class="replaceable"><code>mysqld_value</code></em>'
</pre><p>
              NDB Cluster 内の SQL ノードとして機能する任意の <span class="command"><strong>mysqld</strong></span> のデータディクショナリにインストールされると、<code class="literal">NDB</code> テーブルの自動同期中にメタデータチェックが実行されます。 <span class="command"><strong>mysqld</strong></span> がデバッグコンパイルされている場合は、<code class="literal">CREATE TABLE</code> ステートメントが実行されるたび、および <code class="literal">NDB</code> テーブルが開かれるたびにもチェックが行われます。 
            </p></li></ul></div></li><li class="listitem"><p><b>NDB_STORED_USER とのユーザー権限の同期. </b>
            NDB 8.0.18 以降では、<code class="literal">NDB_STORED_USER</code> 権限を使用して、SQL ノード間でユーザー、役割、および特権を共有および同期するための新しいメカニズムを使用できます。 NDB 7.6 以前で実装された分散特権 (<a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-privilege-distribution.html" target="_top">Distributed Privileges Using Shared Grant Tables</a> を参照) はサポートされなくなりました。 
          </p><p>
          SQL ノードでユーザーアカウントが作成されると、ユーザーとその権限を <code class="literal">NDB</code> に格納できるため、次のような <code class="literal">GRANT</code> ステートメントを発行して、クラスタ内のすべての SQL ノード間で共有できます:
        </p><pre class="programlisting">GRANT NDB_STORED_USER ON *.* TO 'jon'@'localhost';
</pre><p>
          <code class="literal">NDB_STORED_USER</code> は常にグローバルスコープを持ち、<code class="literal">ON *.*</code> を使用して付与する必要があります。 <code class="literal">mysql.session@localhost</code> や <code class="literal">mysql.infoschema@localhost</code> などのシステム予約アカウントには、この権限を割り当てることはできません。 
        </p><p>
          適切な <code class="literal">GRANT NDB_STORED_USER</code> ステートメントを発行して、ロールを SQL ノード間で共有することもできます。 このようなロールをユーザーに割り当てても、ユーザーは共有されません。<code class="literal">NDB_STORED_USER</code> 権限は、各ユーザーに明示的に付与する必要があります。 
        </p><p>
          <code class="literal">NDB_STORED_USER</code> を持つユーザーまたは役割は、その特権とともに、特定の NDB Cluster に参加するとすぐにすべての SQL ノードと共有されます。 ユーザーまたはロールの権限に対する変更は、接続されているすべての SQL ノードとただちに同期されます。 このような変更は接続されている任意の SQL ノードから行うことができますが、異なる SQL ノードからの権限に影響するステートメントの実行順序はすべての SQL ノードで同じであることが保証されないため、指定された SQL ノードからのみ行うことをお薦めします。 
        </p><p><b>アップグレードの意味. </b>
            MySQL サーバー特権システム (<a class="xref" href="security.html#grant-tables" title="6.2.3 付与テーブル">セクション6.2.3「付与テーブル」</a> を参照) が変更されたため、<code class="literal">NDB</code> ストレージエンジンを使用する特権テーブルは NDB 8.0 で正しく機能しません。 NDB 7.6 以前で作成されたこのような特権テーブルを保持する必要はありませんが、アクセス制御には使用されなくなりました。 NDB 8.0.16 以降、SQL ノードとして機能し、<code class="literal">NDB</code> でこのようなテーブルを検出する <span class="command"><strong>mysqld</strong></span> は、MySQL サーバーログに警告を書き込み、<code class="literal">InnoDB</code> シャドウテーブルをそれ自体に対してローカルに作成します。このようなシャドウテーブルは、クラスタに接続されている各 MySQL サーバー上に作成されます。 NDB 7.6 以前からアップグレードを実行する場合、SQL ノードとして機能するすべての MySQL サーバーがアップグレードされると、<code class="literal">NDB</code> を使用している特権テーブルを <span class="command"><strong>ndb_drop_table</strong></span> を使用して安全に削除できます (<a class="xref" href="mysql-cluster.html#mysql-cluster-upgrade-downgrade" title="23.2.7 NDB Cluster のアップグレードおよびダウングレード">セクション23.2.7「NDB Cluster のアップグレードおよびダウングレード」</a> を参照)。 
          </p><p>
          <span class="command"><strong>ndb_restore</strong></span> ユーティリティーの <code class="option">--restore-privilege-tables</code> オプションは非推奨ですが、NDB 8.0 では引き続き適用され、以前のリリースの NDB Cluster から取得されたバックアップに存在する分散特権テーブルを NDB 8.0 を実行しているクラスタに復元するために引き続き使用できます。 これらのテーブルは、前の段落で説明されているように処理されます。 
        </p><p>
          共有ユーザーおよび権限は <code class="literal">ndb_sql_metadata</code> テーブルに格納されますが、NDB 8.0.19 以降の <span class="command"><strong>ndb_restore</strong></span> ではデフォルトで復元されません。<code class="option">--include-stored-grants</code> オプションを指定してこれを行うことができます。
        </p></li><li class="listitem"><p><b>INFORMATION_SCHEMA の変更点. </b>
            <code class="literal">INFORMATION_SCHEMA.FILES</code> テーブルのディスクデータファイルに関する情報の表示では、次の変更が行われます:
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              テーブルスペースおよびログファイルグループは、<code class="literal">FILES</code> テーブルに表示されなくなりました。 (これらの構成は実際にはファイルではありません。) 
            </p></li><li class="listitem"><p>
              各データファイルは、<code class="literal">FILES</code> テーブルの単一行でテーブルされるようになりました。 各 undo ログファイルも、このテーブルでは 1 行のみでテーブルされるようになりました。 (以前は、各データノード上のこれらの各ファイルのコピーごとに行が表示されていました。) 
            </p></li></ul></div><p>
          また、<code class="literal">INFORMATION_SCHEMA</code> テーブルには、MySQL クラスタテーブルのテーブルスペース統計が移入されるようになりました。 (Bug #27167728) 
        </p></li><li class="listitem"><p><b>ndb_perror のエラー情報. </b>
            <span class="command"><strong>perror</strong></span> の非推奨の <code class="option">--ndb</code> オプションは削除されました。 かわりに、<span class="command"><strong>ndb_perror</strong></span> を使用して、<code class="literal">NDB</code> エラーコードからエラーメッセージ情報を取得します。 (Bug #81704、Bug #81705、Bug #23523926、Bug #23523957) 
          </p></li><li class="listitem"><p><b>条件プッシュダウンの拡張機能. </b>
            以前は、条件プッシュダウンは、条件がプッシュされたのと同じテーブルのカラム値を参照する述語条件に制限されていました。 NDB 8.0.16 では、この制限は、クエリープラン内の以前のテーブルのカラム値をプッシュされた条件から参照することもできるように削除されます。 NDB 8.0.18 では、同じテーブル内のカラム間の比較と同様に、カラム式を比較する結合がサポートされています。 比較するカラムおよびカラム式は、完全に同じタイプである必要があります。つまり、これらの属性が適用される場合は常に、同じ符号性、長さ、文字セット、精度およびスケールである必要があります。 
          </p><p>
          条件の大きな部分をプッシュダウンすると、データノードによってより多くの行をフィルタで除外できるため、結合処理中に <span class="command"><strong>mysqld</strong></span> が処理する必要がある行数が削減されます。 これらの拡張機能の別の利点は、SQL ノード上の単一の mysqld プロセスではなく、LDM スレッドで並列でフィルタリングを実行できることです。これにより、クエリーのパフォーマンスが大幅に向上する可能性があります。 
        </p><p>
          比較対象のカラム値間の型の互換性に関する既存のルールが引き続き適用されます (<a class="xref" href="optimization.html#engine-condition-pushdown-optimization" title="8.2.1.5 エンジンコンディションプッシュダウンの最適化">セクション8.2.1.5「エンジンコンディションプッシュダウンの最適化」</a> を参照)。
        </p><p>
          NDB 8.0.21 では、次の追加の改善が行われています:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              <code class="literal">NOT EXISTS</code> および <code class="literal">NOT IN</code> クエリー (<a class="xref" href="optimization.html#semijoins" title="8.2.2.1 準結合変換による IN および EXISTS サブクエリー述語の最適化">セクション8.2.2.1「準結合変換による IN および EXISTS サブクエリー述語の最適化」</a> を参照) の変換によって MySQL オプティマイザによって生成されたアンチ結合は、<code class="literal">NDB</code> によってデータノードにプッシュダウンできます。
            </p><p>
              これは、テーブルにプッシュされていない条件がなく、外部結合をプッシュダウンするために満たす必要がある他の条件をクエリーが満たしている場合に実行できます。
            </p></li><li class="listitem"><p>
              <code class="literal">NDB</code> は、連結先のテーブルから行を取得する前に、非依存スカラーサブクエリーを識別および評価しようとします。 その場合、取得された値は、値を提供したサブクエリーを使用するかわりに、プッシュされた条件の一部として使用されます。 
            </p></li></ul></div></li><li class="listitem"><p><b>最大行サイズの増加. </b>
            NDB 8.0.18 は、<code class="literal">NDBCLUSTER</code> テーブルに格納できる最大バイト数を 14000 から 30000 バイトに増やします。
          </p><p>
          <code class="literal">BLOB</code> または <code class="literal">TEXT</code> カラムは、以前と同様に、この合計の 264 バイトを引き続き使用します。
        </p><p>
          <code class="literal">NDB</code> テーブルの固定幅カラムの最大オフセットは 8188 バイトです。これは、8.0.18 より前のリリースからも変更されていません。
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-limitations-database-objects" title="23.1.7.5 NDB Cluster 内のデータベースオブジェクトに関連付けられる制限">セクション23.1.7.5「NDB Cluster 内のデータベースオブジェクトに関連付けられる制限」</a>を参照してください。
        </p></li><li class="listitem"><p><b>ndb_mgm SHOW コマンドおよびシングルユーザーモード. </b>
            NDB 8.0.17 以降では、シングルユーザーモードのクラスタの場合、管理クライアントの <code class="literal">SHOW</code> コマンドの出力に、このモードが有効なときに排他的アクセス権を持つ API または SQL ノードが示されます。
          </p></li><li class="listitem"><p><b>オンラインカラム名の変更. </b>
            NDB 8.0.18 以降では、<code class="literal">ALGORITHM=INPLACE</code> を使用して <code class="literal">NDB</code> テーブルのカラムの名前をオンラインで変更できます。 詳しくは<a class="xref" href="mysql-cluster.html#mysql-cluster-online-operations" title="23.5.11 NDB Cluster での ALTER TABLE を使用したオンライン操作">セクション23.5.11「NDB Cluster での ALTER TABLE を使用したオンライン操作」</a>,をご覧ください。 
          </p></li><li class="listitem"><p><b>ndb_mgmd の起動時間の改善. </b>
            NDB 8.0.18 以降では、管理ノードデーモンの起動時間が次のように大幅に改善されました:
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              構成データのノードプロパティをハッシュテーブルで処理するために以前に <code class="literal">ndb_mgmd</code> で使用されていたリストデータ構造を置き換えるため、管理サーバーの全体的な起動時間が 6 以上減少しました。
            </p></li><li class="listitem"><p>
              また、管理サーバーの <code class="filename">hosts</code> ファイルに存在しないデータおよび SQL ノードのホスト名がクラスタ構成ファイルで使用されている場合は、<span class="command"><strong>ndb_mgmd</strong></span> の起動時間を以前のケースの 20 倍短くすることができます。
            </p></li></ul></div></li><li class="listitem"><p><b>NDB API の拡張機能. </b>
            NDB 8.0.18 以降では、<code class="literal">NdbScanFilter::cmp()</code> と <code class="literal">NdbInterpretedCode</code> のいくつかの比較方法を使用して、テーブルカラム値を相互に比較できます。 影響を受ける <code class="literal">NdbInterpretedCode</code> メソッドを次に示します: 
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              <code class="literal">branch_col_eq()</code>
            </p></li><li class="listitem"><p>
              <code class="literal">branch_col_ge()</code>
            </p></li><li class="listitem"><p>
              <code class="literal">branch_col_gt()</code>
            </p></li><li class="listitem"><p>
              <code class="literal">branch_col_le()</code>
            </p></li><li class="listitem"><p>
              <code class="literal">branch_col_lt()</code>
            </p></li><li class="listitem"><p>
              <code class="literal">branch_col_ne()</code>
            </p></li></ul></div><p>
          前述のすべての方法で、比較されるテーブルのカラム値は、長さ、精度、符号性、スケール、文字セットおよび照合順序に関して、正確に一致する型である必要があります。
        </p><p>
          詳細は、個々の API メソッドの説明を参照してください。
        </p></li><li class="listitem"><p><b>オフラインマルチスレッドインデックスの構築. </b>
            ファイル I/O、圧縮、解凍などの通常の I/O 職務とは対照的に、順序付けられたインデックスのオフラインマルチスレッドビルドを実行する I/O スレッドに使用するコアのセットを指定できるようになりました。 このコンテキストの<span class="quote">「<span class="quote">「オフライン」</span>」</span>とは、親テーブルが書き込まれていないときに実行される順序付けされたインデックスの構築を指します。このような構築は、<code class="literal">NDB</code> クラスタがノードまたはシステムの再起動を実行したとき、または <span class="command"><strong>ndb_restore</strong></span> <code class="option">--rebuild-indexes</code> を使用したバックアップからのクラスタのリストアの一環として行われます。 
          </p><p>
          また、オフラインインデックス作成作業のデフォルトの動作は、I/O スレッド用に予約されたコアに制限されるのではなく、<span class="command"><strong>ndbmtd</strong></span> で使用可能なすべてのコアを使用するように変更されます。 これにより、再起動とリストアの時間、パフォーマンス、可用性およびユーザーエクスペリエンスを向上させることができます。 
        </p><p>
          この拡張機能は、次のように実装されます:
        </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
              <code class="literal">BuildIndexThreads</code> のデフォルト値は 0 から 128 に変更されています。 つまり、オフライン順序付けされたインデックス構築はデフォルトでマルチスレッド化されるようになりました。 
            </p></li><li class="listitem"><p>
              <code class="literal">TwoPassInitialNodeRestartCopy</code> のデフォルト値は、<code class="literal">false</code> から <code class="literal">true</code> に変更されました。 つまり、最初のノードの再起動では、最初にすべてのデータが<span class="quote">「<span class="quote">「ライブ」</span>」</span>ノードから、インデックス構築の順序付きインデックスをオフラインで作成せずに開始しているノードにコピーされてから、そのデータがライブノードと再度同期化されます。つまり、2 回同期化され、2 つの同期化の間でオフラインでインデックスが構築されます。 これにより、ノードの初期再起動はノードの通常の再起動と同様に動作し、インデックスの作成に必要な時間が短縮されます。 
            </p></li><li class="listitem"><p>
              <code class="literal">ThreadConfig</code> 構成パラメータに新しいスレッドタイプ (<code class="literal">idxbld</code>) が定義され、オフラインインデックス構築スレッドを特定の CPU にロックできるようになりました。
            </p></li></ol></div><p>
          また、<code class="literal">NDB</code> では、次の 2 つの基準によって <code class="literal">ThreadConfig</code> にアクセス可能なスレッドタイプが区別されるようになりました:
        </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
              スレッドが実行スレッドかどうか。 <code class="literal">main</code>, <code class="literal">ldm</code>, <code class="literal">recv</code>, <code class="literal">rep</code>, <code class="literal">tc</code> および <code class="literal">send</code> タイプのスレッドは実行スレッドであり、<code class="literal">io</code>、<code class="literal">watchdog</code> および <code class="literal">idxbld</code> タイプは実行スレッドではありません。 
            </p></li><li class="listitem"><p>
              指定されたタスクへのスレッドの割当てが永続的か一時的か。 現在、<code class="literal">idxbld</code> 以外のすべてのスレッドタイプは永続的です。 
            </p></li></ol></div><p>
          追加情報については、マニュアルで示されているパラメータの説明を参照してください。 (Bug #25835748、Bug #26928111) 
        </p></li><li class="listitem"><p><b>logbuffers テーブルバックアッププロセス情報. </b>
            NDB バックアップを実行すると、<code class="literal">ndbinfo.logbuffers</code> テーブルに、各データノード上のバックアッププロセスによるバッファーの使用状況に関する情報が表示されるようになりました。 これは、<code class="literal">REDO</code> および <code class="literal">DD-UNDO</code> に加えて、2 つの新しいログタイプを反映する行として実装されます。 これらのいずれかの行のログタイプは <code class="literal">BACKUP-DATA</code> で、バックアップ中にフラグメントをバックアップファイルにコピーするために使用されるデータバッファの量が表示されます。 もう一方の行のログタイプは <code class="literal">BACKUP-LOG</code> で、バックアップの開始後に行われた変更を記録するためにバックアップ中に使用されたログバッファの量が表示されます。 これらの <code class="literal">log_type</code> 行のそれぞれが、クラスタ内の各データノードの <code class="literal">logbuffers</code> テーブルに表示されます。 これら 2 つのログタイプを持つ行は、NDB バックアップが現在進行中の場合にのみテーブルに存在します。 (Bug #25822988) 
          </p></li><li class="listitem"><p><b>Windows 上の ndbinfo.processes テーブル. </b>
            <span class="command"><strong>mysqld</strong></span> を生成および再起動するために <code class="literal">RESTART</code> によって Windows プラットフォームで使用されるモニタープロセスのプロセス ID が、<code class="literal">angel_pid</code> として <code class="literal">processes</code> テーブルに表示されるようになりました。
          </p></li><li class="listitem"><p><b>文字列ハッシュの改善. </b>
            NDB 8.0 より前では、すべての文字列ハッシュは、最初に文字列を正規化された形式に変換してから、結果のバイナリイメージを MD5 ハッシュ化することに基づいていました。 これにより、次の理由でパフォーマンスの問題が発生する可能性があります: 
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              正規化された文字列は、常に空白がその全長に埋め込まれます。 <code class="literal">VARCHAR</code> の場合、多くの場合、これには元の文字列の文字よりも多くのスペースの追加が含まれます。 
            </p></li><li class="listitem"><p>
              このスペースパディング用に文字列ライブラリが最適化されなかったため、ユースケースによってはかなりのオーバーヘッドが発生しました。
            </p></li><li class="listitem"><p>
              パディングセマンティクスは文字セット間で異なり、その一部は全長までパディングされませんでした。
            </p></li><li class="listitem"><p>
              変換された文字列は、空白埋めなしでも非常に大きくなる可能性があります。Unicode 9.0 照合順序によっては、単一のコードポイントを 100 バイト以上の文字データに変換できる場合があります。
            </p></li><li class="listitem"><p>
              後続の MD5 ハッシングは主にスペースで埋めることで構成されており、特に効率的ではなかったため、L1 キャッシュの重要な部分をフラッシュすることでパフォーマンスのペナルティが増大する可能性があります。
            </p></li></ul></div><p>
          照合には独自のハッシュ関数が用意されており、最初に正規化された文字列を作成せずに文字列を直接ハッシュします。 また、Unicode 9.0 照合の場合、ハッシュはパディングなしで計算されます。 Unicode 9.0 照合順序を使用して識別された文字列をハッシュするたびに、<code class="literal">NDB</code> でこの組込み関数が利用されるようになりました。 
        </p><p>
          他の照合の場合、変換された文字列でハッシュパーティション化されている既存のデータベースが存在するため、<code class="literal">NDB</code> では、これらを使用する文字列をハッシュ化するための以前の方法を引き続き使用して互換性を維持します。 (Bug #89590、Bug #89604、Bug #89609、Bug #27515000、Bug #27523758、Bug #27522732) 
        </p></li><li class="listitem"><p><b>RESET MASTER の変更. </b>
            MySQL Server はグローバル読み取りロックを使用して <code class="literal">RESET MASTER</code> を実行するようになったため、NDB Cluster で使用された場合のこのステートメントの動作は、次の 2 つの点で変更されました:
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              シノクロであることは保証されなくなりました。つまり、バイナリログがローテーションされるまで、<code class="literal">RESET MASTER</code> が発行される直前に行われる読み取りがログに記録されない可能性があります。
            </p></li><li class="listitem"><p>
              バイナリログを書き込む同じ SQL ノード上でステートメントが発行されたか、同じクラスタ内の別の SQL ノード上で発行されたかにかかわらず、まったく同じように動作するようになりました。
            </p></li></ul></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
            <code class="literal">SHOW BINLOG EVENTS</code>、<code class="literal">FLUSH LOGS</code> およびほとんどのデータ定義ステートメントは、以前の <code class="literal">NDB</code> バージョンと同様に、同期方式で動作します。
          </p></div></li><li class="listitem"><p><b>ndb_restore オプションの使用方法. </b>
            NDB 8.0.16 以降では、<span class="command"><strong>ndb_restore</strong></span> を呼び出すときに <code class="option">--nodeid</code> と <code class="option">--backupid</code> の両方のオプションが必要です。
          </p></li><li class="listitem"><p><b>ndb_log_bin のデフォルト. </b>
            NDB 8.0.16 以降、<code class="literal">ndb_log_bin</code> システム変数のデフォルト値が <code class="literal">TRUE</code> から <code class="literal">FALSE</code> に変更されました。
          </p></li><li class="listitem"><p><b>動的トランザクションリソース割当て. </b>
            トランザクションコルディネータ (<a class="ulink" href="https://dev.mysql.com/doc/ndb-internals/en/ndb-internals-kernel-blocks-dbtc.html" target="_top">The DBTC Block</a> を参照) でのリソースの割当ては、動的メモリープールを使用して実行されるようになりました。 これは、<code class="literal">MaxDMLOperationsPerTransaction</code>, <code class="literal">MaxNoOfConcurrentIndexOperations</code>, <code class="literal">MaxNoOfConcurrentOperations</code>, <code class="literal">MaxNoOfConcurrentScans</code>, <code class="literal">MaxNoOfConcurrentTransactions</code>, <code class="literal">MaxNoOfFiredTriggers</code>, <code class="literal">MaxNoOfLocalScans</code> などのデータノード構成パラメータによって決定されるリソース割り当てと <code class="literal">TransactionBufferMemory</code> が、これらの各パラメータによって表される負荷がそのようなすべてのリソースのターゲット負荷内にある場合、使用可能なリソースの合計を超えないように制限できることを意味します。 
          </p><p>
          この作業の一環として、次に示すように、<code class="literal">DBTC</code> のトランザクションリソースを制御するいくつかの新しいデータノードパラメータが追加されました:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              <code class="literal">ReservedConcurrentIndexOperations</code>
            </p></li><li class="listitem"><p>
              <code class="literal">ReservedConcurrentOperations</code>
            </p></li><li class="listitem"><p>
              <code class="literal">ReservedConcurrentScans</code>
            </p></li><li class="listitem"><p>
              <code class="literal">ReservedConcurrentTransactions</code>
            </p></li><li class="listitem"><p>
              <code class="literal">ReservedFiredTriggers</code>
            </p></li><li class="listitem"><p>
              <code class="literal">ReservedLocalScans</code>
            </p></li><li class="listitem"><p>
              <code class="literal">ReservedTransactionBufferMemory</code>。
            </p></li></ul></div><p>
          詳細は、前述のパラメータの説明を参照してください。
        </p></li><li class="listitem"><p><b>データノードごとに複数の LDM を使用したバックアップ. </b>
            複数のローカルデータマネージャ (LDM) を使用して、個々のデータノードで <code class="literal">NDB</code> バックアップをパラレルに実行できるようになりました。 (以前は、バックアップはデータノード間で並列で実行されていましたが、常にデータノードプロセス内でシリアル化されていました。) <span class="command"><strong>ndb_mgm</strong></span> クライアントの <code class="literal">START BACKUP</code> コマンドでこの機能を有効にするために特別な構文は必要ありませんが、すべてのデータノードが複数の LDM を使用している必要があります。 つまり、データノードは <span class="command"><strong>ndbmtd</strong></span> を実行している必要があり (<span class="command"><strong>ndbd</strong></span> はシングルスレッドであるため、常に LDM が 1 つしかありません)、バックアップを取得する前に複数の LDM を使用するように構成する必要があります。これを行うには、マルチスレッドデータノード構成パラメータ <code class="literal">MaxNoOfExecutionThreads</code> または <code class="literal">ThreadConfig</code> のいずれかに適切な設定を選択します。 
          </p><p>
          複数の LDM を使用したバックアップでは、サブディレクトリが LDM ごとに <code class="filename">BACKUP/BACKUP-<em class="replaceable"><code>backup_id</code></em>/</code>ディレクトリの下に作成されます。<span class="command"><strong>ndb_restore</strong></span> では、これらのサブディレクトリが自動的に検出されるようになり、存在する場合は、バックアップのパラレルリストアが試行されます。詳細は、<a class="xref" href="mysql-cluster.html#ndb-restore-parallel-data-node-backup" title="23.4.23.3 パラレルで作成されたバックアップからのリストア">セクション23.4.23.3「パラレルで作成されたバックアップからのリストア」</a> を参照してください。 (シングルスレッドバックアップは、以前のバージョンの <code class="literal">NDB</code> と同様にリストアされます。) 通常の復元手順を変更することによって、以前のバージョンの NDB Cluster から <span class="command"><strong>ndb_restore</strong></span> バイナリを使用して並列で作成されたバックアップを復元することもできます。これを行う方法については、<a class="xref" href="mysql-cluster.html#ndb-restore-parallel-backup-serial" title="23.4.23.3.2 パラレルバックアップのシリアルリストア">セクション23.4.23.3.2「パラレルバックアップのシリアルリストア」</a> を参照してください。 
        </p></li><li class="listitem"><p><b>バイナリ構成ファイルの拡張. </b>
            NDB 8.0.18 以降では、管理サーバーのバイナリ構成ファイルに新しい形式が使用されます。 以前は、クラスタ構成ファイルに最大 16381 個のセクションが表示されていましたが、セクションの最大数は 4G でした。 これは、この変更前に可能だったよりも多くのノードをクラスタでサポートすることを目的としています。 
          </p><p>
          新しい形式へのアップグレードは比較的シームレスであり、管理サーバーは問題なく古い形式を読み取ることができるため、手動操作が必要になることはほとんどありません。 NDB 8.0.18 (またはそれ以降) から古いバージョンの NDB Cluster ソフトウェアへのダウングレードでは、バイナリ構成ファイルを手動で削除するか、<code class="option">--initial</code> オプションを使用して古い管理サーバーバイナリを起動する必要があります。 
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-upgrade-downgrade" title="23.2.7 NDB Cluster のアップグレードおよびダウングレード">セクション23.2.7「NDB Cluster のアップグレードおよびダウングレード」</a>を参照してください。
        </p></li><li class="listitem"><p><b>データノードの数の増加. </b>
            NDB 8.0.18 は、クラスタごとにサポートされるデータノードの最大数を 144 に増やします (以前は 48 でした)。 データノードは、1 から 144 の範囲のノード ID を使用できるようになりました。 
          </p><p>
          以前は、管理ノードの推奨ノード ID は 49 および 50 でした。 これらは引き続き管理ノードでサポートされますが、これを使用するとデータノードの最大数が 142 に制限されるため、ノード ID 145 および 146 を管理ノードに使用することをお勧めします。 
        </p><p>
          この作業の一環として、データノード <code class="filename">sysfile</code> に使用される形式がバージョン 2 に更新されました。 このファイルには、各ノードの最後のグローバルチェックポイントインデックス、再起動ステータス、ノードグループメンバーシップなどの情報が記録されます (<a class="ulink" href="https://dev.mysql.com/doc/ndb-internals/en/ndb-internals-ndbd-filesystemdir-files.html" target="_top">NDB Cluster Data Node File System Directory</a> を参照)。 
        </p></li><li class="listitem"><p><b>RedoOverCommitCounter および RedoOverCommitLimit の変更. </b>
            これらを 0 に設定するセマンティクスがあいまいなため、NDB 8.0.19 以降、データノード構成パラメータ <code class="literal">RedoOverCommitCounter</code> および <code class="literal">RedoOverCommitLimit</code> のそれぞれの最小値が 1 に増加しました。
          </p></li><li class="listitem"><p><b>ndb_autoincrement_prefetch_sz の変更点. </b>
            NDB 8.0.19 では、<code class="literal">ndb_autoincrement_prefetch_sz</code> サーバーシステム変数のデフォルト値が 512 に増加しています。
          </p></li><li class="listitem"><p><b>パラメータ maxmimums および default の変更. </b>
            NDB 8.0.19 は、構成パラメータの最大値とデフォルト値を次のように変更します:
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              <code class="literal">DataMemory</code> の最大値は 16 テラバイトに増加します。
            </p></li><li class="listitem"><p>
              <code class="literal">DiskPageBufferMemory</code> の最大値も 16 テラバイトに増加します。
            </p></li><li class="listitem"><p>
              <code class="literal">StringMemory</code> のデフォルト値は 25% に増加します。
            </p></li><li class="listitem"><p>
              <code class="literal">LcpScanProgressTimeout</code> のデフォルトは 180 秒に増加します。
            </p></li></ul></div></li><li class="listitem"><p><b>ディスクデータチェックポイントの改善. </b>
            NDB Cluster 8.0.19 には、ソリッドステートドライブなどの不揮発性メモリーデバイスおよびそのようなデバイスの NVMe 仕様を使用する場合に、「ディスクデータ」テーブルおよびテーブルスペースのチェックポイントの待機時間を短縮するのに役立つ多くの新しい拡張機能が用意されています。 これらの改善点には、次のリストの改善点が含まれます: 
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              チェックポイントディスク書込みのバーストの回避
            </p></li><li class="listitem"><p>
              redo ログまたは undo ログがいっぱいになったときのディスクデータテーブルスペースのチェックポイントの高速化
            </p></li><li class="listitem"><p>
              必要に応じて、チェックポイントをディスクチェックポイントとインメモリーチェックポイントのバランスを調整
            </p></li><li class="listitem"><p>
              過負荷からディスクデバイスを保護し、高負荷での低レイテンシを保証
            </p></li></ul></div><p>
          この作業の一環として、NDB 8.0.19 には 2 つの新しいデータノード構成パラメータが導入されています。 <code class="literal">MaxDiskDataLatency</code> では、ディスクアクセスに許可されるレイテンシの程度に上限が設定され、この時間よりもトランザクションの中断に時間がかかります。 <code class="literal">DiskDataUsingSameDisk</code> では、このようなテーブルスペースのチェックポイントを実行できる速度を上げることで、別々のディスク上の「ディスクデータ」テーブルスペースを利用できます。 
        </p><p>
          さらに、ここに一覧表示されている <code class="literal">ndbinfo</code> データベース内の 3 つの新しいテーブルは、ディスクデータパフォーマンスに関する情報を提供します (こちらも NDB 8.0.19 で追加):
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              <code class="literal">diskstat</code> テーブルは、過去 1 秒間の「ディスクデータ」テーブルスペースへの書込みについてレポート
            </p></li><li class="listitem"><p>
              <code class="literal">diskstats_1sec</code> テーブルは、過去 20 秒間の「ディスクデータ」テーブルスペースへの書込みについてレポート
            </p></li><li class="listitem"><p>
              <code class="literal">pgman_time_track_stats</code> テーブルには、「ディスクデータ」テーブルスペースに関連するディスク操作のレイテンシがレポートされます
            </p></li></ul></div></li><li class="listitem"><p><b>メモリー割当てと TransactionMemory. </b>
            NDB 8.0.19 では、トランザクションおよびローカルデータマネージャー (LDM) メモリーをプールするために実行される作業の一環として、トランザクションのデータノードメモリーの割り当てを簡略化する新しい <code class="literal">TransactionMemory</code> パラメータが導入されました。 このパラメータは、非推奨になったいくつかの古いトランザクションメモリーパラメータを置き換えることを目的としています。 
          </p><p>
          トランザクションメモリーは、次の 3 つの方法のいずれかで設定できるようになりました:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              いくつかの構成パラメータは <code class="literal">TransactionMemory</code> と互換性がありません。 これらのいずれかが設定されている場合、<code class="literal">TransactionMemory</code> は設定できず (<a class="xref" href="mysql-cluster.html#mysql-cluster-transactionmemory-incompatible" title="TransactionMemory と互換性のないパラメータ">TransactionMemory と互換性のないパラメータ</a> を参照)、データノードトランザクションメモリーは NDB 8.0.19 より前の状態で決定されます。 
            </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
                <code class="filename">config.ini</code> ファイルで <code class="literal">TransactionMemory</code> とこれらのパラメータを同時に設定しようとすると、管理サーバーが起動しなくなります。
              </p></div></li><li class="listitem"><p>
              <code class="literal">TransactionMemory</code> が設定されている場合、この値はトランザクションメモリーの決定に使用されます。 前の項目で説明した互換性のないパラメータも設定されている場合、<code class="literal">TransactionMemory</code> は設定できません。 
            </p></li><li class="listitem"><p>
              互換性のないパラメータが設定されておらず、<code class="literal">TransactionMemory</code> も設定されていない場合、トランザクションメモリーは <code class="literal">NDB</code> によって設定されます。
            </p></li></ul></div><p>
          詳細は、<code class="literal">TransactionMemory</code> および <a class="xref" href="mysql-cluster.html#mysql-cluster-data-node-memory-management" title="23.3.3.13 データノードのメモリー管理">セクション23.3.3.13「データノードのメモリー管理」</a> の説明を参照してください。
        </p></li><li class="listitem"><p><b>追加のフラグメントレプリカのサポート. </b>
            NDB 8.0.19 は、本番でサポートされるフラグメントレプリカの最大数を 2 から 4 に増やします。 (以前は、<code class="literal">NoOfReplicas</code> を 3 または 4 に設定できましたが、テストで正式にサポートまたは検証されていませんでした。) 
          </p></li><li class="listitem"><p><b>スライスによる復元. </b>
            NDB 8.0.20 以降では、<span class="command"><strong>ndb_restore</strong></span> に実装されている 2 つの新しいオプションを使用して、バックアップをほぼ同じ部分 (スライス) に分割し、これらのスライスを並列で復元できます:
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              <code class="option">--num-slices</code> は、バックアップを分割するスライスの数を決定します。
            </p></li><li class="listitem"><p>
              <code class="option">--slice-id</code> は、<span class="command"><strong>ndb_restore</strong></span> の現在のインスタンスによって復元されるスライスの ID を提供します。
            </p></li></ul></div><p>
          これにより、<span class="command"><strong>ndb_restore</strong></span> の複数のインスタンスを使用してバックアップのサブセットをパラレルにリストアできるため、リストア操作の実行に必要な時間が短縮される可能性があります。
        </p><p>
          詳細は、<span class="command"><strong>ndb_restore</strong></span> <code class="option">--num-slices</code> オプションの説明を参照してください。
        </p></li><li class="listitem"><p><b>有効なフラグメントレプリカからの読取り. </b>
            NDB 8.0.19 以降では、すべての <code class="literal">NDB</code> テーブルでフラグメントレプリカからの読み取りがデフォルトで有効になっています。 これは、<code class="literal">ndb_read_backup</code> システム変数のデフォルト値が ON になり、新しい <code class="literal">NDB</code> テーブルの作成時に <code class="literal">NDB_TABLE</code> コメントオプション <code class="literal">READ_BACKUP</code> の値が 1 になることを意味します。 フラグメントレプリカからの読取りを有効にすると、書込みへの影響を最小限に抑えながら、<code class="literal">NDB</code> テーブルからの読取りのパフォーマンスが大幅に向上します。 
          </p><p>
          詳細は、<code class="literal">ndb_read_backup</code> システム変数および <a class="xref" href="sql-statements.html#create-table-ndb-table-comment-options" title="13.1.20.11 NDB_TABLE オプションの設定">セクション13.1.20.11「NDB_TABLE オプションの設定」</a> の説明を参照してください。
        </p></li><li class="listitem"><p><b>ndb_blob_tool の拡張機能. </b>
            NDB 8.0.20 以降、<span class="command"><strong>ndb_blob_tool</strong></span> ユーティリティーはインラインパートが存在する欠落している BLOB パートを検出し、それらを正しい長さのプレースホルダー BLOB パート (スペース文字で構成される) に置き換えることができます。 BLOB 部分が欠落しているかどうかを確認するには、このプログラムで <code class="option">--check-missing</code> オプションを使用します。 欠落している BLOB 部分をプレースホルダに置き換えるには、<code class="option">--add-missing</code> オプションを使用します。 
          </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-programs-ndb-blob-tool" title="23.4.6 ndb_blob_tool — NDB Cluster テーブルの BLOB および TEXT カラムのチェックおよび修復">セクション23.4.6「ndb_blob_tool — NDB Cluster テーブルの BLOB および TEXT カラムのチェックおよび修復」</a>を参照してください。
        </p></li><li class="listitem"><p><b>ndbinfo バージョニング. </b>
            <code class="literal">NDB</code> 8.0.20 以降では、<code class="literal">ndbinfo</code> テーブルのバージョニングがサポートされ、そのテーブルの現在の定義が内部的に保持されます。 起動時に、<code class="literal">NDB</code> はサポートされている <code class="literal">ndbinfo</code> バージョンをデータディクショナリに格納されているバージョンと比較します。 バージョンが異なる場合、<code class="literal">NDB</code> は古い <code class="literal">ndbinfo</code> テーブルを削除し、現在の定義を使用して再作成します。 
          </p></li><li class="listitem"><p><b>Fedora Linux のサポート. </b>
            NDB 8.0.20 以降、Fedora Linux は NDB Cluster コミュニティリリースでサポートされているプラットフォームであり、Oracle がこの目的で提供する RPM を使用してインストールできます。 これらは<a class="ulink" href="https://dev.mysql.com/downloads/cluster/" target="_top">「NDB Cluster のダウンロードページ」</a>から取得できます。 
          </p></li><li class="listitem"><p><b>NDB プログラム -NDBT 依存関係の削除. </b>
            多数の <code class="literal">NDB</code> ユーティリティプログラムの <code class="literal">NDBT</code> ライブラリへの依存性が削除されました。 このライブラリは開発用に内部的に使用され、通常の使用には必要ありません。これらのプログラムに含めると、テスト時に不要な問題が発生する可能性があります。 
          </p><p>
          影響を受けるプログラムを、依存関係が削除された <code class="literal">NDB</code> バージョンとともに次に示します:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              <span class="command"><strong>ndb_restore</strong></span>、NDB 8.0.17
            </p></li><li class="listitem"><p>
              <span class="command"><strong>ndb_delete_all</strong></span>、NDB 8.0.18
            </p></li><li class="listitem"><p>
              <span class="command"><strong>ndb_show_tables</strong></span>、NDB 8.0.20
            </p></li><li class="listitem"><p>
              <span class="command"><strong>ndb_waiter</strong></span>、NDB 8.0.20
            </p></li></ul></div><p>
          ユーザーに対するこの変更の主な影響は、これらのプログラムが実行の完了後に <code class="literal">NDBT_ProgramExit - <em class="replaceable"><code>status</code></em></code> を印刷しなくなることです。 このような動作に依存するアプリケーションは、示されたバージョンにアップグレードするときに変更を反映するように更新する必要があります。 
        </p></li><li class="listitem"><p><b>外部結合および準結合のプッシュダウン. </b>
            NDB 8.0.20 で実行される作業では、主キーまたは一意キー検索を使用するものだけでなく、多くの外部結合および準結合をデータノードにプッシュダウンできます (<a class="xref" href="optimization.html#engine-condition-pushdown-optimization" title="8.2.1.5 エンジンコンディションプッシュダウンの最適化">セクション8.2.1.5「エンジンコンディションプッシュダウンの最適化」</a> を参照)。
          </p><p>
          プッシュできるようになったスキャンを使用した外部結合には、次の条件を満たす外部結合が含まれます:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              テーブルにプッシュされていない条件はありません
            </p></li><li class="listitem"><p>
              同じ結合ネスト内または依存する上位結合ネスト内の他のテーブルに未プッシュ条件がありません
            </p></li><li class="listitem"><p>
              同じ結合ネスト内または依存する上位結合ネスト内の他のすべてのテーブルもプッシュされます
            </p></li></ul></div><p>
          インデックススキャンを使用する準結合は、プッシュされた外部結合で示された条件を満たし、<code class="literal">firstMatch</code> 戦略を使用する場合にプッシュできるようになりました (<a class="xref" href="optimization.html#semijoins" title="8.2.2.1 準結合変換による IN および EXISTS サブクエリー述語の最適化">セクション8.2.2.1「準結合変換による IN および EXISTS サブクエリー述語の最適化」</a> を参照)。
        </p><p>
          結合をプッシュできない場合、<code class="literal">EXPLAIN</code> は理由を指定する必要があります。
        </p></li><li class="listitem"><p><b>外部キーと大文字小文字の区別. </b>
            <code class="literal">NDB</code> では、定義された大/小文字を使用して外部キーの名前が格納されます。 以前は、<code class="literal">lower_case_table_names</code> システム変数の値が 0 に設定されていた場合、<code class="literal">SELECT</code> で使用されている外部キー名と格納されている名前を持つ他の SQL ステートメントとの大/小文字を区別した比較が実行されていました。 NDB 8.0.20 以降、このような比較は、<code class="literal">lower_case_table_names</code> の値に関係なく、常に大文字と小文字を区別しない方法で実行されるようになりました。 
          </p></li><li class="listitem"><p><b>複数のトランスポータ. </b>
            NDB 8.0.20 では、データノードのペア間のノード間通信を処理するための複数のトランスポータのサポートが導入されています。 これにより、クラスタ内の各ノードグループに対する更新操作の速度が向上し、単一ソケットを使用したノード間通信に対するシステムまたはその他の制限による制約を回避できます。 
          </p><p>
          デフォルトでは、<code class="literal">NDB</code> は、ローカルデータ管理 (LDM) スレッドの数またはトランザクションコーディネータ (TC) スレッドの数 (いずれか大きい方) に基づいて、多数のトランスポータを使用するようになりました。 デフォルトでは、トランスポータの数はこの数の半分です。 ほとんどのワークロードではデフォルトのパフォーマンスが適切ですが、<code class="literal">NodeGroupTransporters</code> データノード構成パラメータ (NDB 8.0.20 でも導入されています) を LDM スレッドの最大数または TC スレッドの数まで設定することで、各ノードグループで使用されるトランスポータの数を調整できます。 0 に設定すると、トランスポータの数は LDM スレッドの数と同じになります。 
        </p></li><li class="listitem"><p><b>ndb_restore: 主キースキーマの変更. </b>
            NDB 8.0.21 (以降) は、<code class="option">--allow-pk-changes</code> オプションを指定して実行されたときに <span class="command"><strong>ndb_restore</strong></span> を使用して <code class="literal">NDB</code> ネイティブバックアップを復元するときに、ソーステーブルとターゲットテーブルに対して異なる主キー定義をサポートします。 元の主キーを構成するカラム数の増減がサポートされています。 
          </p><p>
          主キーが追加のカラムで拡張されている場合、追加されたカラムは <code class="literal">NOT NULL</code> として定義する必要があり、そのようなカラムの値はバックアップの取得中に変更できません。 一部のアプリケーションでは、更新時に行のすべてのカラム値が設定されるため、すべての値が実際に変更されているかどうかにかかわらず、主キーに追加されるカラムの値が変更されていなくてもリストア操作が失敗する可能性があります。 <code class="option">--ignore-extended-pk-updates</code> オプションを使用して、この動作をオーバーライドできます (こちらも NDB 8.0.21 で追加)。この場合、このような値が変更されていないことを確認する必要があります。 
        </p><p>
          このカラムがテーブルの一部であるかどうかにかかわらず、テーブルの主キーからカラムを削除できます。
        </p><p>
          詳細は、<span class="command"><strong>ndb_restore</strong></span> の <code class="option">--allow-pk-changes</code> オプションの説明を参照してください。
        </p></li><li class="listitem"><p><b>ndb_restore とのバックアップのマージ. </b>
            場合によっては、NDB Cluster の異なるインスタンス (すべて同じスキーマを使用) に格納されていたデータを単一のターゲット NDB Cluster に統合することが望ましいことがあります。 これは、NDB 8.0.21 で <code class="option">--restore-data</code> とともに追加された <code class="option">--remap-column</code> オプションを使用して、<span class="command"><strong>ndb_mgm</strong></span> クライアント (<a class="xref" href="mysql-cluster.html#mysql-cluster-backup-using-management-client" title="23.5.8.2 NDB Cluster 管理クライアントを使用したバックアップの作成">セクション23.5.8.2「NDB Cluster 管理クライアントを使用したバックアップの作成」</a> を参照) で作成されたバックアップを使用し、<span class="command"><strong>ndb_restore</strong></span> でそれらを復元するときにサポートされるようになりました (さらに、必要に応じて互換性のある追加オプションもあります)。<code class="option">--remap-column</code> を使用すると、主キー値と一意キー値がソースクラスタ間で重複しているケースを処理できます。また、外部キーなどのテーブル間の他の関係を保持するために、ターゲットクラスタで重複しないようにする必要があります。 
          </p><p>
          <code class="option">--remap-column</code> は、その引数として <code class="literal"><em class="replaceable"><code>db</code></em>.<em class="replaceable"><code>tbl</code></em>.<em class="replaceable"><code>col</code></em>:<em class="replaceable"><code>fn</code></em>:<em class="replaceable"><code>args</code></em></code> という形式の文字列を取ります。ここで、<em class="replaceable"><code>db</code></em>、<em class="replaceable"><code>tbl</code></em> および <em class="replaceable"><code>col</code></em> はそれぞれ、データベース、テーブルおよびカラムの名前、<em class="replaceable"><code>fn</code></em> は再マッピング関数の名前、<em class="replaceable"><code>args</code></em> は <em class="replaceable"><code>fn</code></em> への 1 つ以上の引数です。 デフォルト値はありません。 関数名として <code class="literal">offset</code> のみがサポートされ、バックアップからターゲットテーブルに挿入するときにカラムの値に適用される整数オフセットとして <em class="replaceable"><code>args</code></em> が使用されます。 このカラムは、<code class="literal">INT</code> または <code class="literal">BIGINT</code> のいずれかである必要があります。オフセット値の許容範囲は、そのタイプの符号付きバージョンと同じです (これにより、必要に応じてオフセットを負にできます)。 
        </p><p>
          <span class="command"><strong>ndb_restore</strong></span> の同じ起動で新しいオプションを複数回使用できるため、同じテーブルまたは異なるテーブル (あるいはその両方) の新しい値を複数のカラムに再マップできます。 オフセット値は、オプションのすべてのインスタンスで同じである必要はありません。 
        </p><p>
          さらに、NDB 8.0.21 からも、<span class="command"><strong>ndb_desc</strong></span> 用に 2 つの新しいオプションが提供されています:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              <code class="option">--auto-inc</code> (ショートフォーム <code class="option">-a</code>): テーブルに <code class="literal">AUTO_INCREMENT</code> カラムがある場合は、次の自動インクリメント値が出力に含まれます。
            </p></li><li class="listitem"><p>
              <code class="option">--context</code> (ショートフォーム <code class="option">-x</code>): スキーマ、データベース名、テーブル名、内部 ID など、テーブルに関する追加情報を提供します。
            </p></li></ul></div><p>
          詳細および例については、<code class="option">--remap-column</code> オプションの説明を参照してください。
        </p></li><li class="listitem"><p><b>スレッド改善の送信. </b>
            NDB 8.0.20 の時点では、各送信スレッドがトランスポータのサブセットへの送信を処理するようになり、各ブロックスレッドは 1 つの送信スレッドのみを支援するようになったため、より多くの送信スレッドが生成されるため、パフォーマンスとデータノードのスケーラビリティーが向上します。
          </p></li><li class="listitem"><p><b>SpinMethod を使用した適応スピン制御. </b>
            NDB 8.0.20 では、<code class="literal">SpinMethod</code> データノードパラメータを使用して、それをサポートするプラットフォームで適応 CPU スピンを設定するための単純なインタフェースが導入されています。 このパラメータには 4 つの設定があり、それぞれ静的スピン用、コストベースの適応スピン用、待機時間最適化された適応スピン用、および各スレッドが独自の CPU を持つデータベースマシン用に最適化された適応スピン用です。 これらの各設定により、データノードは 1 つまたは複数のスピンパラメータに事前定義された値のセットを使用し、適応スピンを有効にし、スピンタイミングを設定し、スピンオーバーヘッドを特定のシナリオに応じて設定するため、一般的なユースケースでこれらを直接設定する必要がなくなります。 
          </p><p>
          スピン動作を微調整するには、既存の <code class="literal">SchedulerSpinTimer</code> データノード構成パラメータおよび <span class="command"><strong>ndb_mgm</strong></span> クライアントの次の <code class="literal">DUMP</code> コマンドを使用して、これらのスピンパラメータと追加のスピンパラメータを直接設定することもできます:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              <code class="literal">DUMP 104000 (SetSchedulerSpinTimerAll)</code>: すべてのスレッドのスピン時間を設定
            </p></li><li class="listitem"><p>
              <code class="literal">DUMP 104001 (SetSchedulerSpinTimerThread)</code>: 指定されたスレッドのスピン時間を設定
            </p></li><li class="listitem"><p>
              <code class="literal">DUMP 104002 (SetAllowedSpinOverhead)</code>: 1 単位の待機時間を取得できる CPU 時間の単位数としてスピンオーバーヘッドを設定
            </p></li><li class="listitem"><p>
              <code class="literal">DUMP 104003 (SetSpintimePerCall)</code>: スピンするコールの時間を設定
            </p></li><li class="listitem"><p>
              <code class="literal">DUMP 104004 (EnableAdaptiveSpinning)</code>: 患者のスピンを有効または無効にします
            </p></li></ul></div><p>
          NDB 8.0.20 は、指定された TCP 接続に対してスピンする時間を設定する新しい TCP 構成パラメータ <code class="literal">TcpSpinTime</code> も追加します。
        </p><p>
          <span class="command"><strong>ndb_top</strong></span> ツールは、スレッドごとにスピン時間情報を提供するように拡張されています。
        </p><p>
          詳細は、<code class="literal">SpinMethod</code> パラメータ、リストされている <code class="literal">DUMP</code> コマンドおよび <a class="xref" href="mysql-cluster.html#mysql-cluster-programs-ndb-top" title="23.4.29 ndb_top — NDB スレッドの CPU 使用率情報の表示">セクション23.4.29「ndb_top — NDB スレッドの CPU 使用率情報の表示」</a> の説明を参照してください。
        </p></li><li class="listitem"><p><b>ディスクデータとクラスタの再起動. </b>
            NDB 8.0.21 以降では、クラスタを最初に再起動すると、テーブルスペースやログファイルグループなどのすべてのディスクデータオブジェクト (これらのオブジェクトに関連付けられたデータファイルや undo ログファイルを含む) が強制的に削除されます。
          </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-disk-data" title="23.5.10 NDB Cluster ディスクデータテーブル">セクション23.5.10「NDB Cluster ディスクデータテーブル」</a>を参照してください。
        </p></li><li class="listitem"><p><b>ディスクデータエクステント割当て. </b>
            NDB 8.0.20 以降では、データファイル内のエクステントの割り当ては、特定のテーブルスペースで使用されるすべてのデータファイル間でラウンドロビン方式で行われます。 これは、ディスクデータストレージに複数のストレージデバイスが使用されている場合に、データの分散を改善することが期待されます。 
          </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-disk-data-objects" title="23.5.10.1 NDB Cluster ディスクデータオブジェクト">セクション23.5.10.1「NDB Cluster ディスクデータオブジェクト」</a>を参照してください。
        </p></li><li class="listitem"><p><b>--ndb-log-fail-terminate オプション. </b>
            NDB 8.0.21 以降では、すべての行イベントを完全にログに記録できない場合は常に SQL ノードを終了させることができます。 これを行うには、<code class="option">--ndb-log-fail-terminate</code> オプションを指定して <span class="command"><strong>mysqld</strong></span> を起動します。 
          </p></li><li class="listitem"><p><b>AllowUnresolvedHostNames パラメータ. </b>
            デフォルトでは、管理ノードは、グローバル構成ファイルに存在するホスト名を解決できない場合に起動を拒否します (Kubernetes などの一部の環境で問題が発生する可能性があります)。 NDB 8.0.22 以降では、クラスタグローバル会議ファイル (<code class="filename">config.ini</code> ファイル) の<code class="literal">[tcp default]</code>セクションで <code class="literal">AllowUnresolvedHostNames</code> を <code class="literal">true</code> に設定することによって、この動作をオーバーライドできます。 これにより、そのようなエラーはかわりに警告として処理され、<span class="command"><strong>ndb_mgmd</strong></span> の起動を続行できます 
          </p></li><li class="listitem"><p><b>BLOB 書込みパフォーマンスの向上. </b>
            NDB 8.0.22 は、同じ行で複数の BLOB カラムを変更するとき、または同じステートメントで BLOB カラムを含む複数の行を変更するときに、これらの変更を適用するときに SQL またはほかの API ノードとデータノードの間で必要なラウンドトリップ数を減らすことによって、より効率的なバッチ処理を可能にする多数の改善を実装しています。 したがって、多くの <code class="literal">INSERT</code>、<code class="literal">UPDATE</code> および <code class="literal">DELETE</code> ステートメントのパフォーマンスを向上させることができます。 このようなステートメントの例を次に示します。<em class="replaceable"><code>table</code></em> は、1 つ以上の BLOB カラムを含む <code class="literal">NDB</code> テーブルです: 
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              <code class="literal">INSERT INTO <em class="replaceable"><code>table</code></em> VALUES ROW(1, <em class="replaceable"><code>blob_value1</code></em>, <em class="replaceable"><code>blob_value2</code></em>, ...)</code>、つまり、BLOB カラムを含む行の挿入
            </p></li><li class="listitem"><p>
              <code class="literal">INSERT INTO <em class="replaceable"><code>table</code></em> VALUES ROW(1, <em class="replaceable"><code>blob_value1</code></em>), ROW(2, <em class="replaceable"><code>blob_value2</code></em>), ROW(3, <em class="replaceable"><code>blob_value3</code></em>), ...</code>、つまり、1 つ以上の BLOB カラムを含む複数行の挿入
            </p></li><li class="listitem"><p>
              <code class="literal">UPDATE <em class="replaceable"><code>table</code></em> SET <em class="replaceable"><code>blob_column1</code></em> = <em class="replaceable"><code>blob_value1</code></em>, <em class="replaceable"><code>blob_column2</code></em> = <em class="replaceable"><code>blob_value2</code></em>, ...</code>
            </p></li><li class="listitem"><p>
              <code class="literal">UPDATE <em class="replaceable"><code>table</code></em> SET <em class="replaceable"><code>blob_column</code></em> = <em class="replaceable"><code>blob_value</code></em> WHERE <em class="replaceable"><code>primary_key_column</code></em> in (<em class="replaceable"><code>value_list</code></em>)</code>:主キーカラムが BLOB 型ではない場合
            </p></li><li class="listitem"><p>
              <code class="literal">DELETE FROM <em class="replaceable"><code>table</code></em> WHERE <em class="replaceable"><code>primary_key_column</code></em> = <em class="replaceable"><code>value</code></em></code>:主キーカラムが BLOB 型ではない場合
            </p></li><li class="listitem"><p>
              <code class="literal">DELETE FROM <em class="replaceable"><code>table</code></em> WHERE <em class="replaceable"><code>primary_key_column</code></em> IN (<em class="replaceable"><code>value_list</code></em>)</code>:主キーカラムが BLOB 型ではない場合
            </p></li></ul></div><p>
          他の SQL ステートメントでも、これらの改善のメリットが得られる場合があります。 これには、<code class="literal">LOAD DATA INFILE</code> および <code class="literal">CREATE TABLE ... SELECT ...</code> が含まれます。 また、<em class="replaceable"><code>table</code></em> がステートメントの実行前に <code class="literal">NDB</code> 以外のストレージエンジンを使用する <code class="literal">ALTER TABLE <em class="replaceable"><code>table</code></em> ENGINE = NDB</code> も、より効率的に実行できます。 
        </p><p>
          この拡張機能は、MySQL タイプ <code class="literal">BLOB</code>, <code class="literal">MEDIUMBLOB</code>, <code class="literal">LONGBLOB</code>, <code class="literal">TEXT</code>, <code class="literal">MEDIUMTEXT</code> および <code class="literal">LONGTEXT</code> のカラムに影響するステートメントに適用されます。 <code class="literal">TINYBLOB</code> カラムまたは <code class="literal">TINYTEXT</code> カラム (あるいはその両方) のみを更新するステートメントは、この作業の影響を受けないため、パフォーマンスは変更されません。 
        </p><p>
          バッチ処理を分割するテーブル Blob カラムのスキャンが必要なため、一部の SQL ステートメントのパフォーマンスはこの拡張によって大幅に向上しません。 このようなステートメントには、次に示すタイプのステートメントが含まれます: 
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              <code class="literal">SELECT FROM <em class="replaceable"><code>table</code></em> [WHERE <em class="replaceable"><code>key_column</code></em> IN (<em class="replaceable"><code>blob_value_list</code></em>)]</code>: Blob 型を使用する主キーまたは一意キーカラムを照合することで行が選択されます
            </p></li><li class="listitem"><p>
              <code class="literal">UPDATE <em class="replaceable"><code>table</code></em> SET <em class="replaceable"><code>blob_column</code></em> = <em class="replaceable"><code>blob_value</code></em> WHERE <em class="replaceable"><code>condition</code></em></code>:一意の値に依存しない <em class="replaceable"><code>condition</code></em> を使用
            </p></li><li class="listitem"><p>
              一意の値に依存しない <em class="replaceable"><code>condition</code></em> を使用して、BLOB カラムを含む行を削除する <code class="literal">DELETE FROM <em class="replaceable"><code>table</code></em> WHERE <em class="replaceable"><code>condition</code></em></code>
            </p></li><li class="listitem"><p>
              ステートメントの実行前に <code class="literal">NDB</code> ストレージエンジンをすでに使用しており、ステートメントの実行前または実行後 (あるいはその両方) に行に BLOB カラムが含まれているテーブルに対するコピー <code class="literal">ALTER TABLE</code> ステートメント
            </p></li></ul></div><p>
          この改善を最大限に活用するために、<span class="command"><strong>mysqld</strong></span> の <code class="option">--ndb-batch-size</code> および <code class="option">--ndb-blob-write-batch-bytes</code> オプションに使用される値を増やして、BLOB の変更に必要なラウンドトリップの回数を最小限に抑えることができます。 レプリケーションの場合は、<code class="literal">slave_allow_batching</code> システム変数を有効にすることもお薦めします。これにより、エポックトランザクションを適用するためにレプリカクラスタで必要なラウンドトリップの回数が最小限に抑えられます。 
        </p></li><li class="listitem"><p><b>Node.js の更新. </b>
            NDB 8.0.22 以降、<code class="literal">NDB</code> Adapter for Node.js はバージョン 12.18.3 を使用して構築され、そのバージョン (またはそれ以降のバージョンの Node.js) のみがサポートされるようになりました。
          </p></li><li class="listitem"><p><b>暗号化バックアップ. </b>
            NDB 8.0.22 では、AES-256-CBC を使用して暗号化されたバックアップファイルのサポートが追加されています。これは、未承認のパーティによってアクセスされたバックアップからのデータの回復から保護することを目的としています。 暗号化すると、バックアップデータはユーザー指定のパスワードによって保護されます。 パスワードには、<code class="literal">!</code>, <code class="literal">'</code>, <code class="literal">"</code>, <code class="literal">$</code>, <code class="literal">%</code>, <code class="literal">\</code>および <code class="literal">^</code> 以外の印刷可能な ASCII 文字の範囲から 256 文字までの任意の文字列を指定できます。 指定された NDB Cluster バックアップの暗号化に使用されるパスワードの保持は、ユーザーまたはアプリケーションが実行する必要があります。<code class="literal">NDB</code> はパスワードを保存しません。 パスワードは空にできますが、これはお薦めしません。 
          </p><p>
          NDB Cluster のバックアップを作成するときは、管理クライアントの <code class="literal">START BACKUP</code> コマンドで <code class="literal">ENCRYPT PASSWORD=<em class="replaceable"><code>password</code></em></code> を使用して暗号化できます。 MGM API のユーザーは、<code class="literal">ndb_mgm_start_backup4()</code> をコールして暗号化バックアップを開始することもできます。 
        </p><p>
          暗号化バックアップからリストアするには、<code class="option">--decrypt</code> および <code class="option">--backup-password</code> オプションを指定して <span class="command"><strong>ndb_restore</strong></span> を使用します。 両方のオプションと、暗号化されていない場合に同じバックアップをリストアするために必要なその他のオプションが必要です。<span class="command"><strong>ndb_print_backup_file</strong></span> および <span class="command"><strong>ndbxfrm</strong></span> は、それぞれ <code class="option">-P</code> <em class="replaceable"><code>password</code></em> および <code class="option">--decrypt-password= <em class="replaceable"><code>password</code></em></code> を使用して、暗号化されたファイルを読み取ることもできます。 
        </p><p>
          暗号化または復号化のためにパスワードを指定する場合は、すべて引用符で囲む必要があります。パスワードを区切るには、一重引用符または二重引用符を使用できます。
        </p><p>
          8.0.22 リリースで NDB Cluster ディストリビューションに追加された <span class="command"><strong>ndbxfrm</strong></span> ユーティリティーを使用して、既存のバックアップファイルを暗号化できます。このプログラムは、暗号化されたバックアップファイルの復号化にも使用できます。 さらに、<code class="literal">CompressedBackup</code> 構成パラメータが 1 に設定されている場合、<span class="command"><strong>ndbxfrm</strong></span> は NDB Cluster がバックアップの作成に使用するのと同じ方法を使用して、バックアップファイルを圧縮し、圧縮されたバックアップファイルを解凍できます。 
        </p><p>
          この機能は、クラスタグローバル構成ファイルの<code class="literal">[ndbd default]</code>セクションで <code class="literal">RequireEncryptedBackup=1</code> を設定することで、暗号化バックアップを強制する機能も実装します。 これが行われると、<span class="command"><strong>ndb_mgm</strong></span> クライアントは暗号化されていないバックアップの実行を拒否します。 
        </p></li><li class="listitem"><p><b>IPv6 のサポート. </b>
            NDB 8.0.22 以降、IPv6 アドレス指定は、管理ノードおよびデータノードへの接続でサポートされます。これには、管理ノードと SQL ノードを持つデータノード間の接続が含まれます。 クラスタを構成する場合、数値の IPv6 アドレス、IPv6 アドレスに解決されるホスト名、またはその両方を使用できます。 
          </p><p>
          IPv6 アドレス指定が機能するには、クラスタがデプロイされているオペレーティングプラットフォームおよびネットワークで IPv6 がサポートされている必要があります。 IPv4 アドレス指定を使用する場合と同様に、IPv6 アドレスへのホスト名解決はオペレーティングプラットフォームによって提供される必要があります。 
        </p><p>
          IPv4 アドレス指定は、引き続き <code class="literal">NDB</code> でサポートされます。 IPv4 アドレスと IPv6 アドレスを同時に使用することはお薦めしませんが、次の場合に機能するようにできます: 
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              管理ノードが IPv6 で構成され、データノードが <code class="filename">config.ini</code> ファイル内の IPv4 アドレスで構成されている場合: これは、<code class="option">--bind-address</code> が <span class="command"><strong>mgmd</strong></span> で使用されておらず、<code class="option">--ndb-connectstring</code> が管理ノードの IPv4 アドレスに設定された状態でデータノードが起動された場合に機能します。
            </p></li><li class="listitem"><p>
              管理ノードが IPv4 で構成され、データノードが <code class="filename">config.ini</code> の IPv6 アドレスで構成されている場合: 他の場合と同様に、これは、<code class="option">--bind-address</code> が <span class="command"><strong>mgmd</strong></span> に渡されず、<code class="option">--ndb-connectstring</code> が管理ノードの IPv6 アドレスに設定された状態でデータノードが起動された場合に機能します。
            </p></li></ul></div><p>
          これらのケースは、<span class="command"><strong>ndb_mgmd</strong></span> がデフォルトではどの IP アドレスにもバインドしないため機能します。
        </p><p>
          IPv6 アドレス指定をサポートしていないバージョンの <code class="literal">NDB</code> からそのバージョンへのアップグレードを実行するには、ネットワークで IPv4 および IPv6 がサポートされている場合、まずソフトウェアのアップグレードを実行します。これが完了したら、<code class="filename">config.ini</code> ファイルで使用されている IPv4 アドレスを IPv6 アドレスで更新できます。 その後、構成の変更を有効にし、IPv6 アドレスを使用してクラスタを起動するには、クラスタのシステム再起動を実行する必要があります。 
        </p></li><li class="listitem"><p><b>自動インストーラの非推奨および削除. </b>
            MySQL NDB Cluster Auto-Installer web ベースのインストールツール (<span class="command"><strong>ndb_setup.py</strong></span>) は NDB 8.0.22 では非推奨であり、NDB 8.0.23 以降では削除されます。 サポートされなくなりました。 
          </p></li><li class="listitem"><p><b>ndbmemcache の非推奨および削除. </b>
            <code class="literal">ndbmemcache</code> はサポートされなくなりました。<code class="literal">ndbmemcache</code> は NDB 8.0.22 で非推奨になり、NDB 8.0.23 で削除されました。
          </p></li><li class="listitem"><p><b>ndbinfo backup_id テーブル. </b>
            NDB 8.0.24 は、<code class="literal">backup_id</code> テーブルを <code class="literal">ndbinfo</code> 情報データベースに追加します。 これは、<span class="command"><strong>ndb_select_all</strong></span> を使用して内部 <code class="literal">SYSTAB_0</code> 入力可能オブジェクトの内容をダンプすることで、この情報を取得するための代替手段として機能します。これはエラーが発生しやすく、実行に非常に時間がかかります。 
          </p><p>
          このテーブルには、<code class="literal">START BACKUP</code> 管理クライアントコマンドを使用して取得されたクラスタの最新のバックアップの ID を含む単一のカラムおよび行があります。 このクラスタのバックアップが見つからない場合、テーブルにはカラム値が <code class="literal">0</code> の単一行が含まれます。 
        </p></li><li class="listitem"><p><b>テーブルのパーティション化の拡張機能. </b>
            NDB 8.0.23 には、テーブルのパーティションおよびフラグメントを処理するための新しい方法が導入されており、これにより、REDO ログ部分の数に関係なく、特定のデータノードのローカルデータマネージャー (LDM) の数を決定できます。 これは、LDM の数が大きく変動する可能性があることを意味します。 <code class="literal">NDB</code> は、NDB 8.0.23 にも実装されている <code class="literal">ClassicFragmentation</code> データノード構成パラメータが <code class="literal">false</code> に設定されている場合にこの方法を使用できます。この場合、LDM の数はデータノードごとのテーブルに作成するパーティションの数を決定するために使用されなくなり、<code class="literal">PartitionsPerNode</code> パラメータの値 (NDB 8.0.23 にも導入されています) によってこの数が代わりに決定され、テーブルに使用されるフラグメントの数の計算にも使用されます。 
          </p><p>
          <code class="literal">ClassicFragmentation</code> のデフォルト値が <code class="literal">true</code> の場合、LDM の数を使用する従来の方法を使用して、テーブルに必要なフラグメントの数が決定されます。
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndbd-definition-ndbmtd-parameters" title="マルチスレッドの構成パラメータ (ndbmtd)">マルチスレッドの構成パラメータ (ndbmtd)</a> で前述の新しいパラメータの説明を参照してください。
        </p></li><li class="listitem"><p><b>用語の更新. </b>
            NDB 8.0.23 は、MySQL 8.0.21 および NDB 8.0.21 で開始された作業に合わせて、次に示す用語の多くの変更を実装します:
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              システム変数 <code class="literal">ndb_slave_conflict_role</code> は非推奨になりました。 <code class="literal">ndb_conflict_role</code> に置き換えられています。 
            </p></li><li class="listitem"><p>
              多くの <code class="literal">NDB</code> ステータス変数は非推奨です。 これらの変数とその置換を次のテーブルに示します: 
            </p><div class="table"><a name="idm45563238522944"></a><p class="title"><b>表 23.1 非推奨の NDB ステータス変数とその代替</b></p><div class="table-contents"><table><col style="width: 50%"><col style="width: 50%"><thead><tr>
                  <th>非推奨の変数</th>
                  <th>置換</th>
                </tr></thead><tbody><tr>
                  <td><code class="literal">Ndb_api_adaptive_send_deferred_count_slave</code></td>
                  <td><code class="literal">Ndb_api_adaptive_send_deferred_count_replica</code></td>
                </tr><tr>
                  <td><code class="literal">Ndb_api_adaptive_send_forced_count_slave</code></td>
                  <td><code class="literal">Ndb_api_adaptive_send_forced_count_replica</code></td>
                </tr><tr>
                  <td><code class="literal">Ndb_api_adaptive_send_unforced_count_slave</code></td>
                  <td><code class="literal">Ndb_api_adaptive_send_unforced_count_replica</code></td>
                </tr><tr>
                  <td><code class="literal">Ndb_api_bytes_received_count_slave</code></td>
                  <td><code class="literal">Ndb_api_bytes_received_count_replica</code></td>
                </tr><tr>
                  <td><code class="literal">Ndb_api_bytes_sent_count_slave</code></td>
                  <td><code class="literal">Ndb_api_bytes_sent_count_replica</code></td>
                </tr><tr>
                  <td><code class="literal">Ndb_api_pk_op_count_slave</code></td>
                  <td><code class="literal">Ndb_api_pk_op_count_replica</code></td>
                </tr><tr>
                  <td><code class="literal">Ndb_api_pruned_scan_count_slave</code></td>
                  <td><code class="literal">Ndb_api_pruned_scan_count_replica</code></td>
                </tr><tr>
                  <td><code class="literal">Ndb_api_range_scan_count_slave</code></td>
                  <td><code class="literal">Ndb_api_range_scan_count_replica</code></td>
                </tr><tr>
                  <td><code class="literal">Ndb_api_read_row_count_slave</code></td>
                  <td><code class="literal">Ndb_api_read_row_count_replica</code></td>
                </tr><tr>
                  <td><code class="literal">Ndb_api_scan_batch_count_slave</code></td>
                  <td><code class="literal">Ndb_api_scan_batch_count_replica</code></td>
                </tr><tr>
                  <td><code class="literal">Ndb_api_table_scan_count_slave</code></td>
                  <td><code class="literal">Ndb_api_table_scan_count_replica</code></td>
                </tr><tr>
                  <td><code class="literal">Ndb_api_trans_abort_count_slave</code></td>
                  <td><code class="literal">Ndb_api_trans_abort_count_replica</code></td>
                </tr><tr>
                  <td><code class="literal">Ndb_api_trans_close_count_slave</code></td>
                  <td><code class="literal">Ndb_api_trans_close_count_replica</code></td>
                </tr><tr>
                  <td><code class="literal">Ndb_api_trans_commit_count_slave</code></td>
                  <td><code class="literal">Ndb_api_trans_commit_count_replica</code></td>
                </tr><tr>
                  <td><code class="literal">Ndb_api_trans_local_read_row_count_slave</code></td>
                  <td><code class="literal">Ndb_api_trans_local_read_row_count_replica</code></td>
                </tr><tr>
                  <td><code class="literal">Ndb_api_trans_start_count_slave</code></td>
                  <td><code class="literal">Ndb_api_trans_start_count_replica</code></td>
                </tr><tr>
                  <td><code class="literal">Ndb_api_uk_op_count_slave</code></td>
                  <td><code class="literal">Ndb_api_uk_op_count_replica</code></td>
                </tr><tr>
                  <td><code class="literal">Ndb_api_wait_exec_complete_count_slave</code></td>
                  <td><code class="literal">Ndb_api_wait_exec_complete_count_replica</code></td>
                </tr><tr>
                  <td><code class="literal">Ndb_api_wait_meta_request_count_slave</code></td>
                  <td><code class="literal">Ndb_api_wait_meta_request_count_replica</code></td>
                </tr><tr>
                  <td><code class="literal">Ndb_api_wait_nanos_count_slave</code></td>
                  <td><code class="literal">Ndb_api_wait_nanos_count_replica</code></td>
                </tr><tr>
                  <td><code class="literal">Ndb_api_wait_scan_result_count_slave</code></td>
                  <td><code class="literal">Ndb_api_wait_scan_result_count_replica</code></td>
                </tr><tr>
                  <td><code class="literal">Ndb_slave_max_replicated_epoch</code></td>
                  <td><code class="literal">Ndb_replica_max_replicated_epoch</code></td>
                </tr></tbody></table></div></div><br class="table-break"><p>
              非推奨のステータス変数は引き続き <code class="literal">SHOW STATUS</code> の出力に表示されますが、将来のリリースシリーズでの可用性は保証されないため、アプリケーションは依存しないようにできるかぎり早く更新する必要があります。
            </p></li><li class="listitem"><p>
              <code class="literal">ndbinfo</code> <code class="literal">ndbinfo.table_distribution_status</code> テーブルの <code class="literal">tab_copy_status</code> カラムに以前表示されていた <code class="literal">ADD_TABLE_MASTER</code> および <code class="literal">ADD_TABLE_SLAVE</code> の値は非推奨になりました。 これらはそれぞれ、<code class="literal">ADD_TABLE_COORDINATOR</code> および <code class="literal">ADD_TABLE_PARTICIPANT</code> の値に置き換えられます。 
            </p></li><li class="listitem"><p>
              <span class="command"><strong>ndb_restore</strong></span> などの一部の <code class="literal">NDB</code> クライアントプログラムおよびユーティリティプログラムの <code class="option">--help</code> 出力が変更されました。
            </p></li></ul></div></li><li class="listitem"><p><b>ThreadConfig の拡張機能. </b>
            NDB 8.0.23 の時点で、<code class="literal">ThreadConfig</code> パラメータの構成可能性は、次に示す 2 つの新しいスレッドタイプで拡張されています:
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              <code class="literal">query</code>: クエリースレッドは、ローカルデータマネージャ (LDM) 内で動作し、フラグメントをクエリーします。 クエリースレッドは、リカバリスレッドとしても機能します。 クエリースレッドの数は、LDM スレッドの数の 0、1、2、または 3 倍にする必要があります。0 (<code class="literal">ThreadConfig</code> を使用しない場合、または <code class="literal">AutomaticThreadConfig</code> が有効になっている場合、デフォルト) を指定すると、LDM は NDB 8.0.23 の前と同じように動作します。 
            </p></li><li class="listitem"><p>
              <code class="literal">recover</code>: リカバリスレッドは、ローカルチェックポイントからデータを取得します。 そのように指定されたリカバリスレッドは、クエリースレッドとして機能しません。 
            </p></li></ul></div><p>
          次のいずれかの方法で、既存の <code class="literal">main</code> スレッドと <code class="literal">rep</code> スレッドを組み合せることもできます:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              これらの引数のいずれかを 0 に設定して、単一スレッドにします。 これを実行すると、結果として生成される結合スレッドが <code class="literal">ndbinfo.threads</code> テーブルに <code class="literal">main_rep</code> という名前で表示されます。 
            </p></li><li class="listitem"><p>
              <code class="literal">ldm</code> と <code class="literal">tc</code> の両方を 0 に設定し、<code class="literal">recv</code> を 1 に設定することで、<code class="literal">recv</code> スレッドと連携します。 この場合、結合されたスレッドの名前は <code class="literal">main_rep_recv</code> です。 
            </p></li></ul></div><p>
          また、既存のスレッドタイプの最大数が増加しました。 クエリースレッドおよびリカバリスレッドの最大値を含む新しい最大値を次に示します: 
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              LDM: 332
            </p></li><li class="listitem"><p>
              Query: 332
            </p></li><li class="listitem"><p>
              Recovery: 332
            </p></li><li class="listitem"><p>
              TC: 128
            </p></li><li class="listitem"><p>
              Receive: 64
            </p></li><li class="listitem"><p>
              Send: 64
            </p></li><li class="listitem"><p>
              メイン: 2
            </p></li></ul></div><p>
          その他のスレッドタイプの最大値は変更されません。
        </p><p>
          詳細は、<code class="literal">ThreadConfig</code> パラメータおよび <code class="literal">ndbinfo.threads</code> テーブルの説明を参照してください。
        </p><p>
          また、このタスクに関連して実行された作業の結果、<code class="literal">NDB</code> では、32 を超えるブロックスレッドを使用する場合に mutex を使用してジョブバッファを保護するようになりました。 これにより、パフォーマンスがわずかに低下する可能性がありますが (ほとんどの場合、1 から 2 パーセント)、非常に大規模な構成に必要なメモリー量も大幅に減少します。 たとえば、NDB 8.0.23 より前の 2 G バイトのジョブバッファーメモリーを使用する 64 スレッドの設定では、NDB 8.0.23 以降では約 1 G バイトのみが必要です。 このテストでは、非常に複雑なクエリーの実行で全体的に 5 パーセントの順序で改善されました。 
        </p></li><li class="listitem"><p><b>ndbmtd スレッドの自動構成. </b>
            NDB 8.0.23 以降では、<span class="command"><strong>ndbmtd</strong></span> 構成パラメータ <code class="literal">AutomaticThreadConfig</code> を使用して、マルチスレッドデータノードのスレッドの自動構成を使用できます。 このパラメータが 1 に設定されている場合、<code class="literal">NDB</code> は、アプリケーションで使用可能なプロセッサの数に基づいて、前の項目で説明した新しい <code class="literal">query</code> および <code class="literal">recover</code> スレッドタイプを含む、すべてのスレッドでサポートされるスレッドタイプのスレッド割当てを自動的に設定します。 システムがプロセッサの数を制限しない場合は、必要に応じて <code class="literal">NumCPUs</code> を設定することで制限できます (こちらも NDB 8.0.23 で追加)。 それ以外の場合、自動スレッド構成は最大 1024 個の CPU に対応します。 
          </p><p>
          自動スレッド構成は、<code class="filename">config.ini</code> で <code class="literal">ThreadConfig</code> または <code class="literal">MaxNoOfExecutionThreads</code> に設定された値に関係なく行われます。つまり、これらのパラメータのいずれも設定する必要はありません。
        </p><p>
          さらに、NDB 8.0.23 は、ハードウェアと CPU の可用性に関する情報を提供する多くの新しい <code class="literal">ndbinfo</code> 情報データベーステーブル、および <code class="literal">NDB</code> データノードによる CPU 使用率を実装しています。 これらのテーブルは次のとおりです: 
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              <code class="literal">cpudata</code>
            </p></li><li class="listitem"><p>
              <code class="literal">cpudata_1sec</code>
            </p></li><li class="listitem"><p>
              <code class="literal">cpudata_20sec</code>
            </p></li><li class="listitem"><p>
              <code class="literal">cpudata_50ms</code>
            </p></li><li class="listitem"><p>
              <code class="literal">cpuinfo</code>
            </p></li><li class="listitem"><p>
              <code class="literal">hwinfo</code>
            </p></li></ul></div><p>
          NDB Cluster でサポートされているすべてのプラットフォームでこれらのテーブルの一部を使用できるわけではありません。詳細は、それらの個々の説明を参照してください。
        </p></li><li class="listitem"><p><b>NDB データベースオブジェクトの階層ビュー. </b>
            NDB 8.0.24 の <code class="literal">ndbinfo</code> 情報データベースに追加された <code class="literal">dict_obj_tree</code> テーブルは、次のような多くの <code class="literal">NDB</code> データベースオブジェクトの階層およびツリー形式のビューを提供できます:
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              テーブルおよび関連するインデックス
            </p></li><li class="listitem"><p>
              テーブルスペースおよび関連するデータファイル
            </p></li><li class="listitem"><p>
              ログファイルグループおよび関連する UNDO ログファイル
            </p></li></ul></div><p>
          詳細および例については、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndbinfo-dict-obj-tree" title="23.5.14.22 ndbinfo dict_obj_tree テーブル">セクション23.5.14.22「ndbinfo dict_obj_tree テーブル」</a>を参照してください。
        </p></li></ul></div><p>
      MySQL Cluster Manager 1.4.8 は NDB Cluster 8.0 の実験的なサポートも提供します。MySQL Cluster Manager には、多くの複雑な NDB Cluster 管理タスクを簡略化できる高度なコマンド行インタフェースがあります。 詳しくは<a class="ulink" href="https://dev.mysql.com/doc/mysql-cluster-manager/1.4/en/" target="_top">MySQL™ Cluster Manager 1.4.8 User Manual</a>,をご覧ください。 
    </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-cluster-added-deprecated-removed"></a>23.1.5 NDB 8.0
    で追加、非推奨または削除されたオプション、変数、およびパラメータ</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="xref" href="mysql-cluster.html#params-added-ndb-8.0" title="導入されたパラメータ: NDB 8.0">導入されたパラメータ: NDB 8.0</a></p></li><li class="listitem"><p><a class="xref" href="mysql-cluster.html#params-deprecated-ndb-8.0" title="非推奨となったパラメータ: NDB 8.0">非推奨となったパラメータ: NDB 8.0</a></p></li><li class="listitem"><p><a class="xref" href="mysql-cluster.html#params-removed-ndb-8.0" title="削除されたパラメータ: NDB 8.0">削除されたパラメータ: NDB 8.0</a></p></li><li class="listitem"><p><a class="xref" href="mysql-cluster.html#optvars-added-ndb-8.0" title="導入されたオプションおよび変数: NDB 8.0">導入されたオプションおよび変数: NDB 8.0</a></p></li><li class="listitem"><p><a class="xref" href="mysql-cluster.html#optvars-deprecated-ndb-8.0" title="非推奨となったオプションおよび変数: NDB 8.0">非推奨となったオプションおよび変数: NDB 8.0</a></p></li><li class="listitem"><p><a class="xref" href="mysql-cluster.html#optvars-removed-ndb-8.0" title="削除されたオプションおよび変数: NDB 8.0">削除されたオプションおよび変数: NDB 8.0</a></p></li></ul></div><p>
    次のいくつかのセクションでは、NDB 8.0
    に追加、非推奨になった、または NDB 8.0
    から削除された <code class="literal">NDB</code>
    ノード構成パラメータおよび NDB 固有の
    <span class="command"><strong>mysqld</strong></span>
    オプションと変数について説明します。
  </p><div class="simplesect"><div class="titlepage"><div><div><h4 class="title"><a name="params-added-ndb-8.0"></a>導入されたパラメータ: NDB 8.0</h4></div></div></div><p>
      次のノード構成パラメータが追加されました: NDB
      8.0.
    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-tcp-allowunresolvedhostnames">AllowUnresolvedHostNames</a></code>:
          false (デフォルト)
          の場合、管理ノードによるホスト名の解決に失敗すると致命的なエラーが発生します。true
          の場合、未解決のホスト名は警告としてのみ報告されます.
          追加されたバージョン: NDB 8.0.22.
        </p></li><li class="listitem"><p>
          <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbmtd-automaticthreadconfig">AutomaticThreadConfig</a></code>:
          自動スレッド構成を使用し、ThreadConfig および
          MaxNoOfExecutionThreads の設定をオーバーライド.
          追加されたバージョン: NDB 8.0.23.
        </p></li><li class="listitem"><p>
          <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbmtd-classicfragmentation">ClassicFragmentation</a></code>:
          true
          の場合、従来のテーブル断片化を使用します。false
          に設定すると、LDM
          間でのテーブルフラグメントの柔軟な分散が有効になります.
          追加されたバージョン: NDB 8.0.23.
        </p></li><li class="listitem"><p>
          <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-diskdatausingsamedisk">DiskDataUsingSameDisk</a></code>:
          「ディスクデータ」テーブルスペースが別の物理ディスクにある場合は
          false に設定. 追加されたバージョン: NDB 8.0.19.
        </p></li><li class="listitem"><p>
          <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxdiskdatalatency">MaxDiskDataLatency</a></code>:
          トランザクションの中断を開始するまでのディスクアクセスの最大許容平均レイテンシ
          (ミリ秒). 追加されたバージョン: NDB 8.0.19.
        </p></li><li class="listitem"><p>
          <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-nodegrouptransporters">NodeGroupTransporters</a></code>:
          同じノードグループ内のノード間で使用するトランスポータの数.
          追加されたバージョン: NDB 8.0.20.
        </p></li><li class="listitem"><p>
          <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbmtd-numcpus">NumCPUs</a></code>:
          AutomaticThreadConfig で使用する CPU の数の指定.
          追加されたバージョン: NDB 8.0.23.
        </p></li><li class="listitem"><p>
          <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbmtd-partitionspernode">PartitionsPerNode</a></code>:
          各データノードで作成されるテーブルパーティションの数を決定します。ClassicFragmentation
          が有効な場合は使用されません.
          追加されたバージョン: NDB 8.0.23.
        </p></li><li class="listitem"><p>
          <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-requireencryptedbackup">RequireEncryptedBackup</a></code>:
          バックアップを暗号化する必要があるかどうか
          (1 = 暗号化が必要、それ以外の場合は 0).
          追加されたバージョン: NDB 8.0.22.
        </p></li><li class="listitem"><p>
          <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-reservedconcurrentindexoperations">ReservedConcurrentIndexOperations</a></code>:
          1
          つのデータノード上に専用のリソースを持つ同時インデックス操作の数.
          追加されたバージョン: NDB 8.0.16.
        </p></li><li class="listitem"><p>
          <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-reservedconcurrentoperations">ReservedConcurrentOperations</a></code>:
          1
          つのデータノード上のトランザクションコーディネータに専用のリソースを持つ同時操作の数.
          追加されたバージョン: NDB 8.0.16.
        </p></li><li class="listitem"><p>
          <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-reservedconcurrentscans">ReservedConcurrentScans</a></code>:
          1
          つのデータノード上で専用のリソースを持つ同時スキャンの数.
          追加されたバージョン: NDB 8.0.16.
        </p></li><li class="listitem"><p>
          <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-reservedconcurrenttransactions">ReservedConcurrentTransactions</a></code>:
          1
          つのデータノード上に専用のリソースを持つ同時トランザクションの数.
          追加されたバージョン: NDB 8.0.16.
        </p></li><li class="listitem"><p>
          <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-reservedfiredtriggers">ReservedFiredTriggers</a></code>:
          1
          つのデータノード上に専用のリソースを持つトリガーの数.
          追加されたバージョン: NDB 8.0.16.
        </p></li><li class="listitem"><p>
          <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-reservedlocalscans">ReservedLocalScans</a></code>:
          1
          つのデータノード上に専用のリソースを持つ同時フラグメントスキャンの数.
          追加されたバージョン: NDB 8.0.16.
        </p></li><li class="listitem"><p>
          <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-reservedtransactionbuffermemory">ReservedTransactionBufferMemory</a></code>:
          各データノードに割り当てられたキーおよび属性データの動的バッファ領域
          (バイト). 追加されたバージョン: NDB 8.0.16.
        </p></li><li class="listitem"><p>
          <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-spinmethod">SpinMethod</a></code>:
          データノードで使用されるスピン方法を決定します。詳細は、ドキュメントを参照してください.
          追加されたバージョン: NDB 8.0.20.
        </p></li><li class="listitem"><p>
          <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-tcp-tcpspintime">TcpSpinTime</a></code>:
          受信時にスリープするまでのスピン時間.
          追加されたバージョン: NDB 8.0.20.
        </p></li><li class="listitem"><p>
          <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-transactionmemory">TransactionMemory</a></code>:
          各データノード上のトランザクションに割り当てられたメモリー.
          追加されたバージョン: NDB 8.0.19.
        </p></li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><h4 class="title"><a name="params-deprecated-ndb-8.0"></a>非推奨となったパラメータ: NDB 8.0</h4></div></div></div><p>
      次のノード構成パラメータが非推奨になりました:
      NDB 8.0.
    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-batchsizeperlocalscan">BatchSizePerLocalScan</a></code>:
          保留ロックがあるスキャンのロックレコード数の計算に使用されます.
          非推奨になったバージョン: NDB 8.0.19.
        </p></li><li class="listitem"><p>
          <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnoofconcurrentindexoperations">MaxNoOfConcurrentIndexOperations</a></code>:
          1
          つのデータノードで同時に実行できるインデックス操作の合計数.
          非推奨になったバージョン: NDB 8.0.19.
        </p></li><li class="listitem"><p>
          <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnoofconcurrenttransactions">MaxNoOfConcurrentTransactions</a></code>:
          このデータノードで同時に実行されるトランザクションの最大数。同時に実行できるトランザクションの合計数は、この値にクラスタ内のデータノードの数を掛けた数です.
          非推奨になったバージョン: NDB 8.0.19.
        </p></li><li class="listitem"><p>
          <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnooffiredtriggers">MaxNoOfFiredTriggers</a></code>:
          1
          つのデータノード上で同時に起動できるトリガーの総数.
          非推奨になったバージョン: NDB 8.0.19.
        </p></li><li class="listitem"><p>
          <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnooflocaloperations">MaxNoOfLocalOperations</a></code>:
          このデータノードに定義されている操作レコードの最大数.
          非推奨になったバージョン: NDB 8.0.19.
        </p></li><li class="listitem"><p>
          <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnooflocalscans">MaxNoOfLocalScans</a></code>:
          このデータノードで並列に実行されるフラグメントスキャンの最大数.
          非推奨になったバージョン: NDB 8.0.19.
        </p></li><li class="listitem"><p>
          <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-reservedtransactionbuffermemory">ReservedTransactionBufferMemory</a></code>:
          各データノードに割り当てられたキーおよび属性データの動的バッファ領域
          (バイト). 非推奨になったバージョン: NDB 8.0.19.
        </p></li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><h4 class="title"><a name="params-removed-ndb-8.0"></a>削除されたパラメータ: NDB 8.0</h4></div></div></div><p>
      ノード構成パラメータは削除されていません: NDB
      8.0.
    </p></div><div class="simplesect"><div class="titlepage"><div><div><h4 class="title"><a name="optvars-added-ndb-8.0"></a>導入されたオプションおよび変数: NDB 8.0</h4></div></div></div><p>
      次のシステム変数、ステータス変数、およびサーバーオプションが追加されました:
      NDB 8.0.
    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_adaptive_send_deferred_count_replica">Ndb_api_adaptive_send_deferred_count_replica</a></code>:
          このレプリカによって実際に送信されていない適応送信コールの数.
          追加されたバージョン: NDB 8.0.23.
        </p></li><li class="listitem"><p>
          <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_adaptive_send_forced_count_replica">Ndb_api_adaptive_send_forced_count_replica</a></code>:
          このレプリカによって送信された強制送信セットを含む適応送信の数.
          追加されたバージョン: NDB 8.0.23.
        </p></li><li class="listitem"><p>
          <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_adaptive_send_unforced_count_replica">Ndb_api_adaptive_send_unforced_count_replica</a></code>:
          このレプリカによって強制送信されていない適応送信の数.
          追加されたバージョン: NDB 8.0.23.
        </p></li><li class="listitem"><p>
          <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_bytes_received_count_replica">Ndb_api_bytes_received_count_replica</a></code>:
          このレプリカによってデータノードから受信されたデータの量
          (バイト). 追加されたバージョン: NDB 8.0.23.
        </p></li><li class="listitem"><p>
          <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_bytes_sent_count_replica">Ndb_api_bytes_sent_count_replica</a></code>:
          このレプリカによってデータノードに送信されたデータの数量
          (バイト). 追加されたバージョン: NDB 8.0.23.
        </p></li><li class="listitem"><p>
          <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_pk_op_count_replica">Ndb_api_pk_op_count_replica</a></code>:
          このレプリカによる主キーに基づく、または主キーを使用する操作の数.
          追加されたバージョン: NDB 8.0.23.
        </p></li><li class="listitem"><p>
          <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_pruned_scan_count_replica">Ndb_api_pruned_scan_count_replica</a></code>:
          このレプリカによって 1
          つのパーティションにプルーニングされたスキャンの数.
          追加されたバージョン: NDB 8.0.23.
        </p></li><li class="listitem"><p>
          <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_range_scan_count_replica">Ndb_api_range_scan_count_replica</a></code>:
          このレプリカによって開始されたレンジスキャンの数.
          追加されたバージョン: NDB 8.0.23.
        </p></li><li class="listitem"><p>
          <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_read_row_count_replica">Ndb_api_read_row_count_replica</a></code>:
          このレプリカによって読み取られた行の合計数.
          追加されたバージョン: NDB 8.0.23.
        </p></li><li class="listitem"><p>
          <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_scan_batch_count_replica">Ndb_api_scan_batch_count_replica</a></code>:
          このレプリカによって受信された行のバッチ数.
          追加されたバージョン: NDB 8.0.23.
        </p></li><li class="listitem"><p>
          <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_table_scan_count_replica">Ndb_api_table_scan_count_replica</a></code>:
          このレプリカによって開始されたテーブルスキャンの数
          (内部テーブルのスキャンを含む).
          追加されたバージョン: NDB 8.0.23.
        </p></li><li class="listitem"><p>
          <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_trans_abort_count_replica">Ndb_api_trans_abort_count_replica</a></code>:
          このレプリカによって中断されたトランザクションの数.
          追加されたバージョン: NDB 8.0.23.
        </p></li><li class="listitem"><p>
          <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_trans_close_count_replica">Ndb_api_trans_close_count_replica</a></code>:
          このレプリカによって中断されたトランザクションの数
          (TransCommitCount と TransAbortCount
          の合計より大きい可能性があります).
          追加されたバージョン: NDB 8.0.23.
        </p></li><li class="listitem"><p>
          <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_trans_commit_count_replica">Ndb_api_trans_commit_count_replica</a></code>:
          このレプリカによってコミットされたトランザクションの数.
          追加されたバージョン: NDB 8.0.23.
        </p></li><li class="listitem"><p>
          <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_trans_local_read_row_count_replica">Ndb_api_trans_local_read_row_count_replica</a></code>:
          このレプリカによって読み取られた行の合計数.
          追加されたバージョン: NDB 8.0.23.
        </p></li><li class="listitem"><p>
          <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_trans_start_count_replica">Ndb_api_trans_start_count_replica</a></code>:
          このレプリカによって開始されたトランザクションの数.
          追加されたバージョン: NDB 8.0.23.
        </p></li><li class="listitem"><p>
          <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_uk_op_count_replica">Ndb_api_uk_op_count_replica</a></code>:
          このレプリカによる一意キーに基づく、または一意キーを使用する操作の数.
          追加されたバージョン: NDB 8.0.23.
        </p></li><li class="listitem"><p>
          <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_wait_exec_complete_count_replica">Ndb_api_wait_exec_complete_count_replica</a></code>:
          このレプリカによる操作実行の完了を待機中にスレッドがブロックされた回数.
          追加されたバージョン: NDB 8.0.23.
        </p></li><li class="listitem"><p>
          <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_wait_meta_request_count_replica">Ndb_api_wait_meta_request_count_replica</a></code>:
          このレプリカによるメタデータベースのシグナルを待機してスレッドがブロックされた回数.
          追加されたバージョン: NDB 8.0.23.
        </p></li><li class="listitem"><p>
          <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_wait_nanos_count_replica">Ndb_api_wait_nanos_count_replica</a></code>:
          このレプリカによるデータノードからの何らかのタイプのシグナルの待機に費やされた合計時間
          (ナノ秒). 追加されたバージョン: NDB 8.0.23.
        </p></li><li class="listitem"><p>
          <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_wait_scan_result_count_replica">Ndb_api_wait_scan_result_count_replica</a></code>:
          このレプリカによるスキャンベースのシグナルの待機中にスレッドがブロックされた回数.
          追加されたバージョン: NDB 8.0.23.
        </p></li><li class="listitem"><p>
          <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_config_generation">Ndb_config_generation</a></code>:
          クラスタの現在の構成の生成番号.
          追加されたバージョン: NDB 8.0.24.
        </p></li><li class="listitem"><p>
          <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_metadata_excluded_count">Ndb_metadata_blacklist_size</a></code>:
          NDB binlog スレッドが同期に失敗した NDB
          メタデータオブジェクトの数。NDB 8.0.22 では
          Ndb_metadata_excluded_count
          として名前が変更されました.
          追加されたバージョン: NDB 8.0.18.
        </p></li><li class="listitem"><p>
          <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_metadata_detected_count">Ndb_metadata_detected_count</a></code>:
          NDB
          メタデータ変更モニタースレッドが変更を検出した回数.
          追加されたバージョン: NDB 8.0.16.
        </p></li><li class="listitem"><p>
          <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_metadata_excluded_count">Ndb_metadata_excluded_count</a></code>:
          NDB binlog スレッドが同期に失敗した NDB
          メタデータオブジェクトの数.
          追加されたバージョン: NDB 8.0.22.
        </p></li><li class="listitem"><p>
          <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_metadata_synced_count">Ndb_metadata_synced_count</a></code>:
          同期された NDB メタデータオブジェクトの数.
          追加されたバージョン: NDB 8.0.18.
        </p></li><li class="listitem"><p>
          <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_trans_hint_count_session">Ndb_trans_hint_count_session</a></code>:
          このセッションで開始されたヒントを使用するトランザクションの数.
          追加されたバージョン: NDB 8.0.17.
        </p></li><li class="listitem"><p>
          <code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndb-log-fail-terminate">ndb-log-fail-terminate</a></code>:
          見つかったすべての行イベントの完全なロギングが不可能な場合は
          mysqld プロセスを終了. 追加されたバージョン:
          NDB 8.0.21.
        </p></li><li class="listitem"><p>
          <code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndb-schema-dist-timeout">ndb-schema-dist-timeout</a></code>:
          スキーマ分散中にタイムアウトを検出するまでの待機時間.
          追加されたバージョン: NDB 8.0.17.
        </p></li><li class="listitem"><p>
          <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_conflict_role">ndb_conflict_role</a></code>:
          レプリカが競合検出および解決で果たす役割。
          値は PRIMARY、SECONDARY、PASS、NONE (デフォルト)
          のいずれかです。 レプリケーション SQL
          スレッドが停止している場合にのみ変更できます。
          詳細は、ドキュメントを参照してください.
          追加されたバージョン: NDB 8.0.23.
        </p></li><li class="listitem"><p>
          <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_dbg_check_shares">ndb_dbg_check_shares</a></code>:
          言語共有のチェック (デバッグビルドのみ).
          追加されたバージョン: NDB 8.0.13.
        </p></li><li class="listitem"><p>
          <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_metadata_check">ndb_metadata_check</a></code>:
          MySQL データディクショナリに関する NDB
          メタデータ変更の自動検出を有効にします。デフォルトで有効になっています.
          追加されたバージョン: NDB 8.0.16.
        </p></li><li class="listitem"><p>
          <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_metadata_check_interval">ndb_metadata_check_interval</a></code>:
          MySQL データディクショナリに関する NDB
          メタデータ変更のチェックを実行する間隔
          (秒). 追加されたバージョン: NDB 8.0.16.
        </p></li><li class="listitem"><p>
          <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_metadata_sync">ndb_metadata_sync</a></code>:
          NDB ディクショナリと MySQL
          データディクショナリ間のすべての変更の即時同期をトリガーします。これにより、ndb_metadata_check
          値と ndb_metadata_check_interval 値は無視されます。
          同期が完了すると false にリセットされます.
          追加されたバージョン: NDB 8.0.19.
        </p></li><li class="listitem"><p>
          <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_schema_dist_lock_wait_timeout">ndb_schema_dist_lock_wait_timeout</a></code>:
          エラーが返される前にロックを待機するスキーマ配布中の時間.
          追加されたバージョン: NDB 8.0.18.
        </p></li><li class="listitem"><p>
          <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_schema_dist_timeout">ndb_schema_dist_timeout</a></code>:
          スキーマ分散中にタイムアウトを検出するまでの待機時間.
          追加されたバージョン: NDB 8.0.16.
        </p></li><li class="listitem"><p>
          <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_schema_dist_upgrade_allowed">ndb_schema_dist_upgrade_allowed</a></code>:
          NDB
          への接続時にスキーマ配布テーブルのアップグレードを許可.
          追加されたバージョン: NDB 8.0.17.
        </p></li><li class="listitem"><p>
          <code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndbinfo">ndbinfo</a></code>:
          ndbinfo プラグインの有効化
          (サポートされている場合).
          追加されたバージョン: NDB 8.0.13.
        </p></li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><h4 class="title"><a name="optvars-deprecated-ndb-8.0"></a>非推奨となったオプションおよび変数: NDB 8.0</h4></div></div></div><p>
      次のシステム変数、ステータス変数、およびオプションが非推奨になりました:
      NDB 8.0.
    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_adaptive_send_deferred_count_slave">Ndb_api_adaptive_send_deferred_count_slave</a></code>:
          このレプリカによって実際に送信されていない適応送信コールの数.
          非推奨になったバージョン: NDB 8.0.23.
        </p></li><li class="listitem"><p>
          <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_adaptive_send_forced_count_slave">Ndb_api_adaptive_send_forced_count_slave</a></code>:
          このレプリカによって送信された強制送信セットを含む適応送信の数.
          非推奨になったバージョン: NDB 8.0.23.
        </p></li><li class="listitem"><p>
          <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_adaptive_send_unforced_count_slave">Ndb_api_adaptive_send_unforced_count_slave</a></code>:
          このレプリカによって強制送信されていない適応送信の数.
          非推奨になったバージョン: NDB 8.0.23.
        </p></li><li class="listitem"><p>
          <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_bytes_received_count_slave">Ndb_api_bytes_received_count_slave</a></code>:
          このレプリカによってデータノードから受信されたデータの量
          (バイト). 非推奨になったバージョン: NDB 8.0.23.
        </p></li><li class="listitem"><p>
          <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_bytes_sent_count_slave">Ndb_api_bytes_sent_count_slave</a></code>:
          このレプリカによってデータノードに送信されたデータの数量
          (バイト). 非推奨になったバージョン: NDB 8.0.23.
        </p></li><li class="listitem"><p>
          <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_pk_op_count_slave">Ndb_api_pk_op_count_slave</a></code>:
          このレプリカによる主キーに基づく、または主キーを使用する操作の数.
          非推奨になったバージョン: NDB 8.0.23.
        </p></li><li class="listitem"><p>
          <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_pruned_scan_count_slave">Ndb_api_pruned_scan_count_slave</a></code>:
          このレプリカによって 1
          つのパーティションにプルーニングされたスキャンの数.
          非推奨になったバージョン: NDB 8.0.23.
        </p></li><li class="listitem"><p>
          <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_range_scan_count_slave">Ndb_api_range_scan_count_slave</a></code>:
          このレプリカによって開始されたレンジスキャンの数.
          非推奨になったバージョン: NDB 8.0.23.
        </p></li><li class="listitem"><p>
          <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_read_row_count_slave">Ndb_api_read_row_count_slave</a></code>:
          このレプリカによって読み取られた行の合計数.
          非推奨になったバージョン: NDB 8.0.23.
        </p></li><li class="listitem"><p>
          <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_scan_batch_count_slave">Ndb_api_scan_batch_count_slave</a></code>:
          このレプリカによって受信された行のバッチ数.
          非推奨になったバージョン: NDB 8.0.23.
        </p></li><li class="listitem"><p>
          <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_table_scan_count_slave">Ndb_api_table_scan_count_slave</a></code>:
          このレプリカによって開始されたテーブルスキャンの数
          (内部テーブルのスキャンを含む).
          非推奨になったバージョン: NDB 8.0.23.
        </p></li><li class="listitem"><p>
          <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_trans_abort_count_slave">Ndb_api_trans_abort_count_slave</a></code>:
          このレプリカによって中断されたトランザクションの数.
          非推奨になったバージョン: NDB 8.0.23.
        </p></li><li class="listitem"><p>
          <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_trans_close_count_slave">Ndb_api_trans_close_count_slave</a></code>:
          このレプリカによって中断されたトランザクションの数
          (TransCommitCount と TransAbortCount
          の合計より大きい可能性があります).
          非推奨になったバージョン: NDB 8.0.23.
        </p></li><li class="listitem"><p>
          <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_trans_commit_count_slave">Ndb_api_trans_commit_count_slave</a></code>:
          このレプリカによってコミットされたトランザクションの数.
          非推奨になったバージョン: NDB 8.0.23.
        </p></li><li class="listitem"><p>
          <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_trans_local_read_row_count_slave">Ndb_api_trans_local_read_row_count_slave</a></code>:
          このレプリカによって読み取られた行の合計数.
          非推奨になったバージョン: NDB 8.0.23.
        </p></li><li class="listitem"><p>
          <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_trans_start_count_slave">Ndb_api_trans_start_count_slave</a></code>:
          このレプリカによって開始されたトランザクションの数.
          非推奨になったバージョン: NDB 8.0.23.
        </p></li><li class="listitem"><p>
          <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_uk_op_count_slave">Ndb_api_uk_op_count_slave</a></code>:
          このレプリカによる一意キーに基づく、または一意キーを使用する操作の数.
          非推奨になったバージョン: NDB 8.0.23.
        </p></li><li class="listitem"><p>
          <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_wait_exec_complete_count_slave">Ndb_api_wait_exec_complete_count_slave</a></code>:
          このレプリカによる操作実行の完了を待機中にスレッドがブロックされた回数.
          非推奨になったバージョン: NDB 8.0.23.
        </p></li><li class="listitem"><p>
          <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_wait_meta_request_count_slave">Ndb_api_wait_meta_request_count_slave</a></code>:
          このレプリカによるメタデータベースのシグナルを待機してスレッドがブロックされた回数.
          非推奨になったバージョン: NDB 8.0.23.
        </p></li><li class="listitem"><p>
          <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_wait_nanos_count_slave">Ndb_api_wait_nanos_count_slave</a></code>:
          このレプリカによるデータノードからの何らかのタイプのシグナルの待機に費やされた合計時間
          (ナノ秒). 非推奨になったバージョン: NDB 8.0.23.
        </p></li><li class="listitem"><p>
          <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_wait_scan_result_count_slave">Ndb_api_wait_scan_result_count_slave</a></code>:
          このレプリカによるスキャンベースのシグナルの待機中にスレッドがブロックされた回数.
          非推奨になったバージョン: NDB 8.0.23.
        </p></li><li class="listitem"><p>
          <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_metadata_excluded_count">Ndb_metadata_blacklist_size</a></code>:
          NDB binlog スレッドが同期に失敗した NDB
          メタデータオブジェクトの数。NDB 8.0.22 では
          Ndb_metadata_excluded_count
          として名前が変更されました.
          非推奨になったバージョン: NDB 8.0.21.
        </p></li><li class="listitem"><p>
          <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_replica_max_replicated_epoch">Ndb_replica_max_replicated_epoch</a></code>:
          このレプリカで最近コミットされた NDB
          エポック。 この値が Ndb_conflict_last_conflict_epoch
          以上の場合、競合はまだ検出されていません.
          非推奨になったバージョン: NDB 8.0.23.
        </p></li><li class="listitem"><p>
          <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_slave_conflict_role">ndb_slave_conflict_role</a></code>:
          レプリカが競合検出および解決で果たす役割。
          値は PRIMARY、SECONDARY、PASS、NONE (デフォルト)
          のいずれかです。 レプリケーション SQL
          スレッドが停止している場合にのみ変更できます。
          詳細は、ドキュメントを参照してください.
          非推奨になったバージョン: NDB 8.0.23.
        </p></li></ul></div></div><div class="simplesect"><div class="titlepage"><div><div><h4 class="title"><a name="optvars-removed-ndb-8.0"></a>削除されたオプションおよび変数: NDB 8.0</h4></div></div></div><p>
      次のシステム変数、ステータス変数、およびオプションが削除されました:
      NDB 8.0.
    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          <code class="literal">Ndb_metadata_blacklist_size</code>: NDB binlog
          スレッドが同期に失敗した NDB
          メタデータオブジェクトの数。NDB 8.0.22 では
          Ndb_metadata_excluded_count
          として名前が変更されました.
          削除されたバージョン: NDB 8.0.22.
        </p></li></ul></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-cluster-compared"></a>23.1.6 MySQL Server NDB Cluster と比較した InnoDB の使用</h3></div></div></div><div class="toc"><dl class="toc"><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndb-innodb-engines">23.1.6.1 NDB および InnoDB ストレージエンジンの違い</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndb-innodb-workloads">23.1.6.2 NDB と InnoDB のワークロード</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndb-innodb-usage">23.1.6.3 NDB および InnoDB の機能使用のサマリー</a></span></dt></dl></div><a class="indexterm" name="idm45563238113664"></a><a class="indexterm" name="idm45563238111488"></a><a class="indexterm" name="idm45563238109440"></a><p>
      MySQL Server では、ストレージエンジンに数多くの選択肢があります。 <code class="literal">NDB</code> と <code class="literal">InnoDB</code> の両方がトランザクション MySQL ストレージエンジンとして機能できるため、MySQL Server のユーザーが NDB Cluster に関心を持つことがあります。 <code class="literal">NDB</code> は、MySQL 8.0 のデフォルトの <code class="literal">InnoDB</code> ストレージエンジンの代替候補またはアップグレード候補とみなされています。 <code class="literal">NDB</code> と <code class="literal">InnoDB</code> は共通の特性を共有しますが、アーキテクチャーと実装に違いがあるため、一部の既存の MySQL Server アプリケーションと使用シナリオは NDB Cluster には適していますが、すべてに適しているわけではありません。 
    </p><p>
      このセクションでは、NDB 8.0 で使用される <code class="literal">NDB</code> ストレージエンジンのいくつかの特性と、MySQL 8.0 で使用される <code class="literal">InnoDB</code> について説明し、比較します。 次のいくつかのセクションでは、技術的な比較を示します。 多くの場合、NDB Cluster を使用するタイミングと場所に関する決定は、すべての要因を考慮してケース単位で行う必要があります。 このドキュメントでは、すべての有意義な使用シナリオに固有の情報を提供することは範囲外ですが、<code class="literal">InnoDB</code> バックエンドではなく、<code class="literal">NDB</code> の一部の共通タイプのアプリケーションの相対的な適合性に関する一般的なガイダンスも提供しようとしています。 
    </p><a class="indexterm" name="idm45563238093952"></a><a class="indexterm" name="idm45563238091808"></a><a class="indexterm" name="idm45563238089776"></a><p>
      NDB Cluster 8.0 は、<code class="literal">InnoDB</code> 1.1 のサポートを含む、MySQL 8.0 に基づく <span class="command"><strong>mysqld</strong></span> を使用します。 NDB Cluster で <code class="literal">InnoDB</code> テーブルを使用することは可能ですが、このようなテーブルはクラスタ化されません。 NDB Cluster 8.0 配布のプログラムまたはライブラリを MySQL Server 8.0 とともに使用することも、その逆もできません。 
    </p><p>
      NDB Cluster または MySQL Server (<code class="literal">InnoDB</code> ストレージエンジンを使用している可能性が高い) のいずれかで実行できる共通ビジネスアプリケーションの一部のタイプにも当てはまりますが、いくつかの重要なアーキテクチャーと実装の違いがあります。<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-innodb-engines" title="23.1.6.1 NDB および InnoDB ストレージエンジンの違い">セクション23.1.6.1「NDB および InnoDB ストレージエンジンの違い」</a> には、これらの違いのサマリーが表示されます。 これらの違いのため、一部の使用シナリオは明らかにどちらか一方のエンジンに適しています。<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-innodb-workloads" title="23.1.6.2 NDB と InnoDB のワークロード">セクション23.1.6.2「NDB と InnoDB のワークロード」</a>を参照してください。 これは、<code class="literal">NDB</code> または <code class="literal">InnoDB</code> とともに使用するのが適切なアプリケーションのタイプにも影響を与えます。 それぞれが一般的なタイプのデータベースアプリケーションでの使用にどの程度適合するかの比較については、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-innodb-usage" title="23.1.6.3 NDB および InnoDB の機能使用のサマリー">セクション23.1.6.3「NDB および InnoDB の機能使用のサマリー」</a>を参照してください。 
    </p><p>
      <code class="literal">NDB</code> および <code class="literal">MEMORY</code> ストレージエンジンの相対的な特徴については、<a class="xref" href="storage-engines.html#memory-storage-engine-compared-cluster" title="MEMORY または NDB Cluster を使用する場合">MEMORY または NDB Cluster を使用する場合</a>を参照してください。
    </p><p>
      MySQL ストレージエンジンに関する追加情報は、<a class="xref" href="storage-engines.html" title="第 16 章 代替ストレージエンジン">第16章「<i>代替ストレージエンジン</i>」</a>を参照してください。
    </p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-ndb-innodb-engines"></a>23.1.6.1 NDB および InnoDB ストレージエンジンの違い</h4></div></div></div><a class="indexterm" name="idm45563238071216"></a><a class="indexterm" name="idm45563238069040"></a><a class="indexterm" name="idm45563238066992"></a><a class="indexterm" name="idm45563238064960"></a><p>
        <code class="literal">NDB</code> ストレージエンジンは、分散型のシェアードナッシングアーキテクチャーを使用して実装されます。これにより、多くの点で <code class="literal">InnoDB</code> と動作が異なります。 <code class="literal">NDB</code> の操作に慣れていないユーザーにとっては、NDB の持つ分散型の性質によって、トランザクション、外部キー、テーブルの制限、およびその他の特性に関して予期しない動作が発生する可能性があります。 次の表にそれらを示します。 
      </p><div class="table"><a name="idm45563238058800"></a><p class="title"><b>表 23.2 
          InnoDB ストレージエンジンと NDB ストレージエンジンの違い
        </b></p><div class="table-contents"><table><col style="width: 33%"><col style="width: 34%"><col style="width: 33%"><thead><tr>
            <th scope="col">機能</th>
            <th scope="col"><code class="literal">InnoDB</code> (MySQL 8.0)</th>
            <th scope="col"><code class="literal">NDB</code> 8.0</th>
          </tr></thead><tbody><tr>
            <th scope="row">MySQL Server のバージョン</th>
            <td>8.0</td>
            <td>8.0</td>
          </tr><tr>
            <th scope="row"><code class="literal">InnoDB</code> のバージョン</th>
            <td><code class="literal">InnoDB</code> 8.0.25</td>
            <td><code class="literal">InnoDB</code> 8.0.25</td>
          </tr><tr>
            <th scope="row">NDB Cluster バージョン</th>
            <td>N/A</td>
            <td><code class="literal">NDB</code> 8.0.23/8.0.23</td>
          </tr><tr>
            <th scope="row">ストレージの制限</th>
            <td>64TB</td>
            <td>128TB</td>
          </tr><tr>
            <th scope="row">外部キー</th>
            <td>はい</td>
            <td>はい</td>
          </tr><tr>
            <th scope="row">トランザクション</th>
            <td>すべての標準タイプ</td>
            <td><code class="literal">READ COMMITTED</code></td>
          </tr><tr>
            <th scope="row">MVCC</th>
            <td>はい</td>
            <td>いいえ</td>
          </tr><tr>
            <th scope="row">データ圧縮</th>
            <td>はい</td>
            <td>いいえ (NDB チェックポイントおよびバックアップファイルは圧縮できます)</td>
          </tr><tr>
            <th scope="row">大規模な行のサポート (&gt; 14K)</th>
            <td><code class="literal">VARBINARY</code>、<code class="literal">VARCHAR</code>、<code class="literal">BLOB</code>、および <code class="literal">TEXT</code> カラムでサポートされます</td>
            <td><code class="literal">BLOB</code> および <code class="literal">TEXT</code> カラムでのみサポートされます (これらのタイプを使用して非常に大量のデータを格納すると NDB のパフォーマンスが低下する可能性があります)</td>
          </tr><tr>
            <th scope="row">レプリケーションのサポート</th>
            <td>MySQL レプリケーションを使用した非同期および準同期レプリケーション (MySQL <a class="link" href="group-replication.html" title="第 18 章 グループレプリケーション">Group Replication</a>)</td>
            <td>NDB Cluster 内の自動同期レプリケーション。MySQL レプリケーションを使用した NDB Cluster 間の非同期レプリケーション (準同期レプリケーションはサポートされていません)</td>
          </tr><tr>
            <th scope="row">読み取り操作のスケールアウト</th>
            <td>はい (MySQL レプリケーション)</td>
            <td>はい (NDB Cluster での自動パーティション分割、NDB Cluster レプリケーション)</td>
          </tr><tr>
            <th scope="row">書き込み操作のスケールアウト</th>
            <td>アプリケーションレベルのパーティション化 (シャーディング) が必要です</td>
            <td>はい (NDB Cluster の自動パーティション分割はアプリケーションに対して透過的です)</td>
          </tr><tr>
            <th scope="row">高可用性 (HA)</th>
            <td>組込み (InnoDB クラスタから)</td>
            <td>はい (99.999% の稼働時間を実現するように設計されています)</td>
          </tr><tr>
            <th scope="row">ノードの障害リカバリとフェイルオーバー</th>
            <td>MySQL Group Replication から</td>
            <td>Automatic (NDB アーキテクチャーの鍵要素)</td>
          </tr><tr>
            <th scope="row">ノードの障害リカバリにかかる時間</th>
            <td>30 秒以上</td>
            <td>通常は 1 秒未満</td>
          </tr><tr>
            <th scope="row">リアルタイムのパフォーマンス</th>
            <td>いいえ</td>
            <td>はい</td>
          </tr><tr>
            <th scope="row">インメモリーテーブル</th>
            <td>いいえ</td>
            <td>はい (一部のデータはオプションでディスクに格納できます。インメモリーとディスクの両方のデータストレージは永続的です)</td>
          </tr><tr>
            <th scope="row">ストレージエンジンへの NoSQL アクセス</th>
            <td>はい</td>
            <td>はい (Memcached、Node.js/JavaScript、Java、JPA、C++、HTTP/REST を含む複数の API)</td>
          </tr><tr>
            <th scope="row">同時および並列書き込み</th>
            <td>はい</td>
            <td>同時書き込みのために最適化された最大 48 個のライター</td>
          </tr><tr>
            <th scope="row">競合の検出および解決 (複数のソース)</th>
            <td>はい (MySQL Group Replication)</td>
            <td>はい</td>
          </tr><tr>
            <th scope="row">ハッシュインデックス</th>
            <td>いいえ</td>
            <td>はい</td>
          </tr><tr>
            <th scope="row">オンラインのノード追加</th>
            <td>MySQL Group Replication を使用した読取り/書込みレプリカ</td>
            <td>はい (すべてのノードタイプ)</td>
          </tr><tr>
            <th scope="row">オンラインのアップグレード</th>
            <td>はい (レプリケーションを使用)</td>
            <td>はい</td>
          </tr><tr>
            <th scope="row">オンラインのスキーマ変更</th>
            <td>はい (MySQL 8.0 の一部として)</td>
            <td>はい</td>
          </tr></tbody></table></div></div><br class="table-break"></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-ndb-innodb-workloads"></a>23.1.6.2 NDB と InnoDB のワークロード</h4></div></div></div><a class="indexterm" name="idm45563237956192"></a><a class="indexterm" name="idm45563237953984"></a><a class="indexterm" name="idm45563237951936"></a><a class="indexterm" name="idm45563237949904"></a><a class="indexterm" name="idm45563237947808"></a><a class="indexterm" name="idm45563237945712"></a><p>
        NDB Cluster には、高可用性、高速フェイルオーバー、高スループット、および低待機時間を必要とするアプリケーションの提供に最適な一意の属性の範囲があります。 NDB Cluster には、分散アーキテクチャーとマルチノード実装のために、一部のワークロードが適切に実行されないようにする可能性がある特定の制約もあります。 データベース駆動型アプリケーションの一般的なワークロードのタイプに関する <code class="literal">NDB</code> ストレージエンジンと <code class="literal">InnoDB</code> ストレージエンジンの動作の主な違いを、次の表にいくつか示します。 
      </p><div class="table"><a name="idm45563237940528"></a><p class="title"><b>表 23.3 InnoDB ストレージエンジンと NDB ストレージエンジンの違いは、一般的なタイプのデータ駆動型アプリケーションワークロードです。</b></p><div class="table-contents"><table><col style="width: 33%"><col style="width: 34%"><col style="width: 33%"><thead><tr>
            <th scope="col">ワークロード</th>
            <th scope="col"><code class="literal">InnoDB</code></th>
            <th scope="col">NDB Cluster (<code class="literal">NDB</code>)</th>
          </tr></thead><tbody><tr>
            <th scope="row">大容量 OLTP アプリケーション</th>
            <td>はい</td>
            <td>はい</td>
          </tr><tr>
            <th scope="row">DSS アプリケーション (データマート、分析)</th>
            <td>はい</td>
            <td>制限付き (サイズが 3T バイトを超える OLTP データセット間の結合操作は不可)</td>
          </tr><tr>
            <th scope="row">カスタムアプリケーション</th>
            <td>はい</td>
            <td>はい</td>
          </tr><tr>
            <th scope="row">パッケージ化されたアプリケーション</th>
            <td>はい</td>
            <td>制限付き (主キーアクセスであるべきです)。NDB Cluster 8.0 は外部キーをサポートしています</td>
          </tr><tr>
            <th scope="row">ネットワーク内電気通信アプリケーション (HLR、HSS、SDP)</th>
            <td>いいえ</td>
            <td>はい</td>
          </tr><tr>
            <th scope="row">セッション管理およびキャッシュ</th>
            <td>はい</td>
            <td>はい</td>
          </tr><tr>
            <th scope="row">電子商取引アプリケーション</th>
            <td>はい</td>
            <td>はい</td>
          </tr><tr>
            <th scope="row">ユーザープロファイル管理、AAA プロトコル</th>
            <td>はい</td>
            <td>はい</td>
          </tr></tbody></table></div></div><br class="table-break"></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-ndb-innodb-usage"></a>23.1.6.3 NDB および InnoDB の機能使用のサマリー</h4></div></div></div><a class="indexterm" name="idm45563237902592"></a><a class="indexterm" name="idm45563237900384"></a><a class="indexterm" name="idm45563237898336"></a><a class="indexterm" name="idm45563237896304"></a><a class="indexterm" name="idm45563237894240"></a><a class="indexterm" name="idm45563237892160"></a><a class="indexterm" name="idm45563237890080"></a><p>
        <code class="literal">InnoDB</code> と <code class="literal">NDB</code> の機能に対するアプリケーション機能要件を比較すると、その一部は明らかにどちらか一方のストレージエンジンと高い互換性があります。
      </p><p>
        次の表に、サポートされるアプリケーション機能を、一般に各機能がより適合するストレージエンジンに従って示します。
      </p><div class="table"><a name="idm45563237884656"></a><p class="title"><b>表 23.4 各機能が通常適しているストレージエンジンに応じてサポートされているアプリケーション機能</b></p><div class="table-contents"><table><col style="width: 50%"><col style="width: 50%"><thead><tr>
            <th><code class="literal">InnoDB</code> がより適合するアプリケーション要件</th>
            <th><code class="literal">NDB</code> がより適合するアプリケーション要件</th>
          </tr></thead><tbody><tr>
            <td><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    外部キー
                  </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
                      NDB Cluster 8.0 は外部キーをサポート
                    </p></div></li><li class="listitem"><p>
                    完全なテーブルスキャン
                  </p></li><li class="listitem"><p>
                    非常に大規模なデータベース、行、またはトランザクション
                  </p></li><li class="listitem"><p>
                    <code class="literal">READ COMMITTED</code> 以外のトランザクション
                  </p></li></ul></div></td>
            <td><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    書き込みのスケーリング
                  </p></li><li class="listitem"><p>
                    99.999% の稼働時間
                  </p></li><li class="listitem"><p>
                    オンラインのノード追加とオンラインのスキーマ操作
                  </p></li><li class="listitem"><p>
                    複数の SQL および NoSQL API (<a class="ulink" href="https://dev.mysql.com/doc/ndbapi/en/mysql-cluster-api-overview.html" target="_top">NDB Cluster APIs: Overview and Concepts</a>を参照してください)
                  </p></li><li class="listitem"><p>
                    リアルタイムのパフォーマンス
                  </p></li><li class="listitem"><p>
                    <code class="literal">BLOB</code> カラムの限定的な使用
                  </p></li><li class="listitem"><p>
                    外部キーがサポートされますが、外部キーの使用は高スループットでのパフォーマンスに影響する可能性があります。
                  </p></li></ul></div></td>
          </tr></tbody></table></div></div><br class="table-break"></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-cluster-limitations"></a>23.1.7 NDB Cluster の既知の制限事項</h3></div></div></div><div class="toc"><dl class="toc"><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-limitations-syntax">23.1.7.1 NDB Cluster の SQL 構文に準拠していません</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-limitations-limits">23.1.7.2 NDB Cluster と標準の MySQL 制限の制限と相違点</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-limitations-transactions">23.1.7.3 NDB Cluster でのトランザクション処理に関する制限</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-limitations-error-handling">23.1.7.4 NDB Cluster のエラー処理</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-limitations-database-objects">23.1.7.5 NDB Cluster 内のデータベースオブジェクトに関連付けられる制限</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-limitations-unsupported">23.1.7.6 NDB Cluster でサポートされない機能または欠落している機能</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-limitations-performance">23.1.7.7 NDB Cluster のパフォーマンスに関する制限事項</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-limitations-exclusive-to-cluster">23.1.7.8 NDB Cluster 専用の問題</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-limitations-disk-data">23.1.7.9 NDB Cluster ディスクデータストレージに関する制限事項</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-limitations-multiple-nodes">23.1.7.10 複数の NDB Cluster ノードに関する制限事項</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-limitations-resolved">23.1.7.11 前 NDB Cluster 8.0 で解決される NDB Cluster の問題</a></span></dt></dl></div><a class="indexterm" name="idm45563237859504"></a><a class="indexterm" name="idm45563237858048"></a><p>
      以降のセクションでは、NDB Cluster の現在のリリースにおける既知の制限について、<code class="literal">MyISAM</code> および <code class="literal">InnoDB</code> ストレージエンジンを使用するときに使用可能な機能と比較して説明します。 <a class="ulink" href="http://bugs.mysql.com" target="_top">http://bugs.mysql.com</a> の MySQL バグデータベースで<span class="quote">「<span class="quote">クラスタ</span>」</span>カテゴリを確認すると、<a class="ulink" href="http://bugs.mysql.com" target="_top">http://bugs.mysql.com</a> の MySQL バグデータベースにある <span class="quote">「<span class="quote">MySQL Server:</span>」</span>の下の次のカテゴリで既知のバグが見つかります。これは、NDB Cluster の今後のリリースで修正する予定です: 
    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          NDB Cluster
        </p></li><li class="listitem"><p>
          Cluster Direct API (NDBAPI)
        </p></li><li class="listitem"><p>
          Cluster Disk Data
        </p></li><li class="listitem"><p>
          Cluster Replication
        </p></li><li class="listitem"><p>
          ClusterJ
        </p></li></ul></div><p>
      この情報は、規定された条件に関して完結するように意図されています。 不具合が発生した場合は、<a class="xref" href="introduction.html#bug-reports" title="1.6 質問またはバグをレポートする方法">セクション1.6「質問またはバグをレポートする方法」</a>に示す手順を使用して MySQL バグデータベースにそれらを報告できます。 NDB Cluster 8.0 で修正を計画していない問題はすべて、リストに追加されます。 
    </p><p>
      NDB Cluster 8.0 で解決された以前のリリースの問題のリストについては、<a class="xref" href="mysql-cluster.html#mysql-cluster-limitations-resolved" title="23.1.7.11 前 NDB Cluster 8.0 で解決される NDB Cluster の問題">セクション23.1.7.11「前 NDB Cluster 8.0 で解決される NDB Cluster の問題」</a> を参照してください。
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
        NDB Cluster レプリケーションに固有の制限事項およびその他の問題については、<a class="xref" href="mysql-cluster.html#mysql-cluster-replication-issues" title="23.6.3 NDB Cluster レプリケーションの既知の問題">セクション23.6.3「NDB Cluster レプリケーションの既知の問題」</a> を参照してください。
      </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-limitations-syntax"></a>23.1.7.1 NDB Cluster の SQL 構文に準拠していません</h4></div></div></div><a class="indexterm" name="idm45563237841728"></a><p>
        次のリストに示すように、特定の MySQL 機能に関連する SQL ステートメントの中には、<code class="literal">NDB</code> テーブルで使用したときにエラーを生成するものがあります。
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><b>一時テーブル. </b>
              一時テーブルはサポートされません。 <code class="literal">NDB</code> ストレージエンジンを使用する一時テーブルを作成しようとしたり、<code class="literal">NDB</code> を使用するように既存の一時テーブルを変更しようとしたりすると、失敗して次のエラーが発生します:<span class="errortext">Table storage engine 'ndbcluster' does not support the create option 'TEMPORARY'</span>. 
            </p></li><li class="listitem"><p><b>NDB テーブルのインデックスとキー. </b>
              「NDB Cluster」テーブルのキーおよびインデックスには、次の制限事項があります:
            </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><b>カラム幅. </b>
                  3072 バイトを超える幅の <code class="literal">NDB</code> テーブルカラムに対するインデックスを作成しようとすると、成功しますが、インデックスに実際に使用されるのは最初の 3072 バイトだけです。 このような場合は、警告 <span class="errortext">Specified key was too long; max key length is 3072 bytes</span> が発行され、<code class="literal">SHOW CREATE TABLE</code> ステートメントではインデックスの長さが 3072 と表示されます。 
                </p></li><li class="listitem"><p><b>TEXT および BLOB カラム. </b>
                  <code class="literal">TEXT</code> または <code class="literal">BLOB</code> データ型のどちらかを使用する <code class="literal">NDB</code> テーブルカラムに対するインデックスは作成できません。
                </p></li><li class="listitem"><p><b>FULLTEXT インデックス. </b>
                  <code class="literal">NDB</code> ストレージエンジンは、<code class="literal">MyISAM</code> および <code class="literal">InnoDB</code> テーブルでのみ可能な <code class="literal">FULLTEXT</code> インデックスをサポートしていません。
                </p><p>
                ただし、<code class="literal">NDB</code> テーブルの <code class="literal">VARCHAR</code> カラムに対するインデックスは作成できます。
              </p></li><li class="listitem"><p><b>USING HASH キーと NULL. </b>
                  一意キーおよび主キーで NULL 可能カラムを使用すると、これらのカラムを使用するクエリーは完全なテーブルスキャンとして処理されます。 この問題を回避するには、カラムを <code class="literal">NOT NULL</code> にするか、<code class="literal">USING HASH</code> オプションを指定せずにインデックスを再作成します。 
                </p></li><li class="listitem"><p><b>プリフィクス. </b>
                  プリフィクスインデックスはありません。インデックスはカラム全体にのみ付けることができます。 (<code class="literal">NDB</code> のカラムインデックスのサイズは、このセクションで前述したように、カラムの幅 (バイト単位) と常に同じ (最大 3072 バイトまで) です。 追加情報については、<a class="xref" href="mysql-cluster.html#mysql-cluster-limitations-unsupported" title="23.1.7.6 NDB Cluster でサポートされない機能または欠落している機能">セクション23.1.7.6「NDB Cluster でサポートされない機能または欠落している機能」</a>を参照してください。) 
                </p></li><li class="listitem"><p><b>BIT カラム. </b>
                  <code class="literal">BIT</code> カラムを主キー、一意キー、またはインデックスにすることはできません。また、複合の主キー、一意キー、またはインデックスの一部にすることもできません。
                </p></li><li class="listitem"><p><b>AUTO_INCREMENT カラム. </b>
                  ほかの MySQL ストレージエンジンと同様に、<code class="literal">NDB</code> ストレージエンジンはテーブルあたり最大 1 つの <code class="literal">AUTO_INCREMENT</code> カラムを処理できます。 ただし、明示的な主キーを持たない NDB テーブルの場合は、<code class="literal">AUTO_INCREMENT</code> カラムが自動的に定義され、<span class="quote">「<span class="quote">「非表示」</span>」</span>主キーとして使用されます。 このため、明示的な <code class="literal">AUTO_INCREMENT</code> カラムを持つテーブルは、<code class="literal">PRIMARY KEY</code> オプションを同時に使用してカラムを宣言しないかぎり定義できません。 テーブルの主キーでない <code class="literal">AUTO_INCREMENT</code> カラムを持つテーブルを作成しようとして、<code class="literal">NDB</code> ストレージエンジンを使用すると、失敗してエラーが発生します。 
                </p></li></ul></div></li><li class="listitem"><p><b>外部キーに関する制限. </b>
              NDB 8.0 での外部キー制約のサポートは、<code class="literal">InnoDB</code> で提供されるものと同等ですが、次の制限事項があります:
            </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                外部キーとして参照されるすべてのカラムは、それがテーブルの主キーでない場合、明示的な一意キーを必要とします。
              </p></li><li class="listitem"><p>
                参照先が親テーブルの主キーである場合、<code class="literal">ON UPDATE CASCADE</code> はサポートされません。
              </p><p>
                これは、主キーの更新が古い行 (古い主キーを含む) の削除と新しい行 (新しい主キーを持つ) の挿入として実装されているためです。 これは <code class="literal">NDB</code> カーネルには表示されないため、これらの 2 つの行は同じであると表示されるため、この更新をカスケードする必要があることを知る方法はありません。 
              </p></li><li class="listitem"><p>
                NDB 8.0.16 の時点: <code class="literal">TEXT</code> 型または <code class="literal">BLOB</code> 型のカラムが子テーブルに含まれている場合、<code class="literal">ON DELETE CASCADE</code> はサポートされません。 (Bug #89511、Bug #27484882) 
              </p></li><li class="listitem"><p>
                <code class="literal">SET DEFAULT</code> はサポートされません。 (<code class="literal">InnoDB</code> でもサポートされません。) 
              </p></li><li class="listitem"><p>
                <code class="literal">NO ACTION</code> キーワードは受け入れられますが、<code class="literal">RESTRICT</code> として扱われます。 MySQL 8.0 では、標準の SQL キーワードである <code class="literal">NO ACTION</code> がデフォルトです。 (<code class="literal">InnoDB</code> でも同じです。) 
              </p></li><li class="listitem"><p>
                NDB Cluster の以前のバージョンでは、別のテーブル内のインデックスを参照する外部キーを持つテーブルを作成するとき、適切なエラーが常に内部的に返されなかったために、インデックス内のカラムの順序が一致しなかった場合でも、外部キーを作成できるように見えることがありました。 この問題を部分的に修正すると、ほとんどの場合に内部的に使用されるエラーが改善されましたが、親インデックスが一意インデックスである場合でも、この状況が発生する可能性があります。 (Bug #18094360) 
              </p></li></ul></div><p>
            詳細は、<a class="xref" href="sql-statements.html#create-table-foreign-keys" title="13.1.20.5 FOREIGN KEY の制約">セクション13.1.20.5「FOREIGN KEY の制約」</a>および<a class="xref" href="introduction.html#constraint-foreign-key" title="1.7.3.2 FOREIGN KEY の制約">セクション1.7.3.2「FOREIGN KEY の制約」</a>を参照してください。
          </p></li><li class="listitem"><p><b>NDB Cluster およびジオメトリデータタイプ. </b><a class="indexterm" name="idm45563237770880"></a>
              <code class="literal">NDB</code> テーブルでは、ジオメトリデータ型 (<code class="literal">WKT</code> および <code class="literal">WKB</code>) がサポートされます。 ただし、空間インデックスはサポートされません。 
            </p></li><li class="listitem"><p><b>文字セットとバイナリログファイル. </b>
              現在、<code class="literal">ndb_apply_status</code> および <code class="literal">ndb_binlog_index</code> テーブルは <code class="literal">latin1</code> (ASCII) 文字セットを使用して作成されています。 バイナリログの名前はこのテーブルに記録されるため、ラテン語以外の文字を使用する名前が付けられたバイナリログファイルはこれらのテーブルで正しく参照されません。 これは既知の問題であり、現在修正中です。 (Bug #50226) 
            </p><p>
            この問題を回避するには、バイナリログファイルの名前を付けるときや、<code class="option">--basedir</code>、<code class="option">--log-bin</code>、または <code class="option">--log-bin-index</code> オプションを設定するときに、Latin-1 文字のみを使用してください。
          </p></li><li class="listitem"><p><b>ユーザー定義のパーティション化を使用した「NDB の作成」テーブル. </b>
              NDB Cluster でのユーザー定義パーティショニングに対する<a class="indexterm" name="idm45563237756832"></a> <a class="indexterm" name="idm45563237754656"></a> <a class="indexterm" name="idm45563237752560"></a>のサポートは、[<code class="literal">LINEAR</code>] <code class="literal">KEY</code> パーティショニングに制限されています。 <code class="literal">CREATE TABLE</code> ステートメントで <code class="literal">ENGINE=NDB</code> または <code class="literal">ENGINE=NDBCLUSTER</code> とともにほかのパーティショニングタイプを使用すると、エラーが発生します。 
            </p><p>
            この制限はオーバーライドできますが、本番設定での使用はサポートされていません。 詳細は、<a class="xref" href="partitioning.html#partitioning-limitations-ndb" title="ユーザー定義のパーティション分割と NDB ストレージエンジン (NDB Cluster)">ユーザー定義のパーティション分割と NDB ストレージエンジン (NDB Cluster)</a>を参照してください。 
          </p><p><b>デフォルトのパーティション化スキーム. </b>
              「すべての NDB Cluster」テーブルは、デフォルトでは、テーブル主キーをパーティション化キーとして使用して <code class="literal">KEY</code> によってパーティション化されます。 テーブルに明示的に設定された主キーがない場合は、代わりに <code class="literal">NDB</code> ストレージエンジンによって自動的に作成された<span class="quote">「<span class="quote">隠し</span>」</span>主キーが使用されます。 これらおよび関連する問題の追加情報については、<a class="xref" href="partitioning.html#partitioning-key" title="24.2.5 KEY パーティショニング">セクション24.2.5「KEY パーティショニング」</a>を参照してください。 
            </p><p>
            ユーザーパーティション化された <code class="literal">NDBCLUSTER</code> テーブルが次の 2 つの要件のどちらかまたは両方を満たさない原因となる <code class="literal">CREATE TABLE</code> および <code class="literal">ALTER TABLE</code> ステートメントは許可されず、失敗してエラーが発生します。
          </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
                テーブルに明示的な主キーが存在する必要があります。
              </p></li><li class="listitem"><p>
                テーブルのパーティショニング式に指定されたすべてのカラムが主キーの一部である必要があります。
              </p></li></ol></div><p><b>例外. </b>
              空のカラムリストを使用して (つまり、<code class="literal">PARTITION BY [LINEAR] KEY()</code> を使用して) ユーザーパーティション化された <code class="literal">NDBCLUSTER</code> テーブルを作成する場合は、明示的な主キーは必要ありません。
            </p><p><b>NDBCLUSTER テーブルの最大パーティション数. </b>
              ユーザー定義のパーティション化を使用したときに <code class="literal">NDBCLUSTER</code> テーブルに定義できるパーティションの最大数は、ノードグループあたり 8 個です。 (NDB Cluster ノードグループの詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-nodes-groups" title="23.1.2 NDB Cluster ノード、ノードグループ、フラグメントレプリカ、およびパーティション">セクション23.1.2「NDB Cluster ノード、ノードグループ、フラグメントレプリカ、およびパーティション」</a> を参照してください。 
            </p><p><b>DROP PARTITION の未サポート. </b>
              <code class="literal">ALTER TABLE ... DROP PARTITION</code> を使用して <code class="literal">NDB</code> テーブルからパーティションを削除することはできません。 <code class="literal">ALTER TABLE</code> に対するその他のパーティション化拡張機能 -<code class="literal">ADD PARTITION</code>、<code class="literal">REORGANIZE PARTITION</code>、および <code class="literal">COALESCE PARTITION</code> は NDB テーブルでサポートされますが、コピーを使用するため、最適化されません。 <a class="xref" href="partitioning.html#partitioning-management-range-list" title="24.3.1 RANGE および LIST パーティションの管理">セクション24.3.1「RANGE および LIST パーティションの管理」</a>および<a class="xref" href="sql-statements.html#alter-table" title="13.1.9 ALTER TABLE ステートメント">セクション13.1.9「ALTER TABLE ステートメント」</a>を参照してください。 
            </p></li><li class="listitem"><p><b>行ベースのレプリケーション. </b><a class="indexterm" name="idm45563237717168"></a>
              NDB Cluster で行ベースレプリケーションを使用する場合、バイナリロギングを無効にすることはできません。 つまり、<code class="literal">NDB</code> ストレージエンジンは <code class="literal">sql_log_bin</code> の値を無視します。 
            </p></li><li class="listitem"><p><b>JSON データ型. </b>
              MySQL <code class="literal">JSON</code> データ型は、NDB 8.0 で提供される <span class="command"><strong>mysqld</strong></span> 内の <code class="literal">NDB</code> テーブルでサポートされます。
            </p><a class="indexterm" name="idm45563237708240"></a><p>
            <code class="literal">NDB</code> テーブルには、最大 3 つの <code class="literal">JSON</code> カラムを含めることができます。
          </p><p>
            NDB API には、単に <code class="literal">BLOB</code> データとして表示される <code class="literal">JSON</code> データを操作するための特別なプロビジョニングはありません。 <code class="literal">JSON</code> としてのデータの処理は、アプリケーションで実行する必要があります。 
          </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-limitations-limits"></a>23.1.7.2 NDB Cluster と標準の MySQL 制限の制限と相違点</h4></div></div></div><a class="indexterm" name="idm45563237699680"></a><p>
        このセクションでは、NDB Cluster で検出された制限のうち、標準 MySQL で検出された制限とは異なる制限または見つからない制限を一覧表示します。
      </p><a class="indexterm" name="idm45563237696896"></a><a class="indexterm" name="idm45563237694832"></a><a class="indexterm" name="idm45563237692736"></a><a class="indexterm" name="idm45563237691072"></a><a class="indexterm" name="idm45563237689296"></a><p><b>メモリーの使用量とリカバリ. </b>
          ほかのストレージエンジンと同様、<code class="literal">NDB</code> テーブルにデータを挿入したときに消費されたメモリーは、削除したときに自動的にリカバリされません。 代わりに、次のルールが適用されます。 
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">NDB</code> テーブルに対して <code class="literal">DELETE</code> ステートメントを実行すると、削除された行で以前使用されていたメモリーが同じテーブルでの挿入にかぎって再利用可能になります。 ただし、<code class="literal">OPTIMIZE TABLE</code> を実行すると、このメモリーの一般的な再利用が可能になります。 
          </p><p>
            クラスタのローリング再起動が行われた場合も、削除された行で使用されていたメモリーが解放されます。 <a class="xref" href="mysql-cluster.html#mysql-cluster-rolling-restart" title="23.5.5 NDB Cluster のローリング再起動の実行">セクション23.5.5「NDB Cluster のローリング再起動の実行」</a>を参照してください。 
          </p></li><li class="listitem"><p>
            <code class="literal">NDB</code> テーブルに対して <code class="literal">DROP TABLE</code> または <code class="literal">TRUNCATE TABLE</code> 操作を実行すると、このテーブルで使用されていたメモリーが解放され、任意の <code class="literal">NDB</code> テーブルで (同じテーブルでも別の <code class="literal">NDB</code> テーブルでも) 再利用可能になります。
          </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
              <code class="literal">TRUNCATE TABLE</code> によってテーブルが削除され、再作成されることを思い出してください。 <a class="xref" href="sql-statements.html#truncate-table" title="13.1.37 TRUNCATE TABLE ステートメント">セクション13.1.37「TRUNCATE TABLE ステートメント」</a>を参照してください。 
            </p></div></li><li class="listitem"><p><b>クラスタの構成によって課される制限. </b><a class="indexterm" name="idm45563237669248"></a>
              多くの構成可能なハード制限がありますが、クラスタ内の利用可能なメインメモリーによって制限が設定されます。 <a class="xref" href="mysql-cluster.html#mysql-cluster-config-file" title="23.3.3 NDB Cluster 構成ファイル">セクション23.3.3「NDB Cluster 構成ファイル」</a>の構成パラメータの完全なリストを参照してください。 ほとんどの構成パラメータはオンラインでアップグレードできます。 これらのハード制限には次のようなものがあります。 
            </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                データベースのメモリーサイズとインデックスのメモリーサイズ (それぞれ <code class="literal">DataMemory</code> と <code class="literal">IndexMemory</code>)。
              </p><p>
                <code class="literal">DataMemory</code> は 32K バイトのページとして割り当てられます。 各 <code class="literal">DataMemory</code> ページは、使用されたときに特定のテーブルに割り当てられます。割り当てられたあとは、テーブルを削除した場合を除いてこのメモリーを解放できません。 
              </p><p>
                詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndbd-definition" title="23.3.3.6 NDB Cluster データノードの定義">セクション23.3.3.6「NDB Cluster データノードの定義」</a>を参照してください。
              </p></li><li class="listitem"><p>
                1 つのトランザクションで実行できる操作の最大数は、構成パラメータ <code class="literal">MaxNoOfConcurrentOperations</code> および <code class="literal">MaxNoOfLocalOperations</code> を使用して設定されます。
              </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
                  一括ロード、<code class="literal">TRUNCATE TABLE</code>、および <code class="literal">ALTER TABLE</code> は、複数のトランザクションを実行することによって特別なケースとして扱われるため、この制限が適用されません。
                </p></div></li><li class="listitem"><p>
                テーブルとインデックスに関するさまざまな制限。 たとえば、クラスタ内の順序付けされたインデックスの最大数は <code class="literal">MaxNoOfOrderedIndexes</code> によって決定され、テーブルあたりの順序付けされたインデックスの最大数は 16 です。 
              </p></li></ul></div></li><li class="listitem"><p><b>ノードとデータオブジェクトの最大数. </b>
              クラスタノードとメタデータオブジェクトの数には、次の制限が適用されます。
            </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                NDB 8.0.18 の時点では、データノードの最大数は 145 です。 (以前は 48 でした。) 
              </p><p>
                データノードは 1 から 144 までの (これらを含む) 範囲のノード ID を持つ必要があります。 (NDB 8.0.17 以前のリリースでは、これは 1 から 48 でした。) 
              </p><p>
                管理ノードおよび API ノードでは、1 から 255 の範囲のノード ID を使用できます。
              </p></li><li class="listitem"><p>
                NDB Cluster 内のノードの合計最大数は 255 です。 この数には、すべての SQL ノード (MySQL Server)、API ノード (MySQL Server 以外のクラスタにアクセスするアプリケーション)、データノード、および管理サーバーが含まれます。 
              </p></li><li class="listitem"><p>
                NDB Cluster の現在のバージョンのメタデータオブジェクトの最大数は 20320 です。 この制限はハードコーディングされています。 
              </p></li></ul></div><p>
            詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-limitations-resolved" title="23.1.7.11 前 NDB Cluster 8.0 で解決される NDB Cluster の問題">セクション23.1.7.11「前 NDB Cluster 8.0 で解決される NDB Cluster の問題」</a>を参照してください。
          </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-limitations-transactions"></a>23.1.7.3 NDB Cluster でのトランザクション処理に関する制限</h4></div></div></div><a class="indexterm" name="idm45563237638112"></a><p>
        NDB Cluster には、トランザクションの処理に関していくつかの制限があります。 これらには、次のものが含まれます。 
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><b>トランザクション分離レベル. </b>
              <a class="indexterm" name="idm45563237634128"></a> <a class="indexterm" name="idm45563237631936"></a> <a class="indexterm" name="idm45563237629968"></a> <code class="literal">NDBCLUSTER</code> ストレージエンジンは <code class="literal">READ COMMITTED</code> トランザクション分離レベルのみをサポートします。 (たとえば、<code class="literal">InnoDB</code> は <code class="literal">READ COMMITTED</code>、<code class="literal">READ UNCOMMITTED</code>、<code class="literal">REPEATABLE READ</code>、および <code class="literal">SERIALIZABLE</code> をサポートします。) <code class="literal">NDB</code> は <code class="literal">READ COMMITTED</code> を行単位で実装する必要があることに注意してください。読取りリクエストが行を格納しているデータノードに到着すると、その時点で最後にコミットされたバージョンの行が返されます。 
            </p><p>
            コミットされていないデータが返されることはありませんが、複数の行を変更するトランザクションが同じ行を読み取るトランザクションと同時にコミットする場合、特定の行読取りリクエストを他のトランザクションのコミットの前または後に処理できるため、読取りを実行するトランザクションは、これらの間で異なる行に対して値の前、値の後、またはその両方を監視できます。
          </p><p>
            特定のトランザクションが変更前または変更後の値のみを読み取るようにするには、<code class="literal">SELECT ... LOCK IN SHARE MODE</code> を使用して行ロックを設定します。 このような場合、ロックは、所有しているトランザクションがコミットされるまで保持されます。 行ロックを使用すると、次の問題が発生することもあります: 
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                ロック待機タイムアウトエラーの頻度の向上と同時実行性の低下
              </p></li><li class="listitem"><p>
                コミットフェーズを必要とする読取りによるトランザクション処理オーバーヘッドの増加
              </p></li><li class="listitem"><p>
                使用可能な同時ロック数を使い果たす可能性があり、<code class="literal">MaxNoOfConcurrentOperations</code> によって制限されています
              </p></li></ul></div><p>
            <code class="literal">NDB</code> では、<code class="literal">LOCK IN SHARE MODE</code> や <code class="literal">FOR UPDATE</code> などの修飾子を使用しないかぎり、すべての読取りに <code class="literal">READ COMMITTED</code> が使用されます。 <code class="literal">LOCK IN SHARE MODE</code> では共有行ロックが使用され、<code class="literal">FOR UPDATE</code> では排他行ロックが使用されます。 一意キー読取りでは、自己一貫性読取りを保証するために <code class="literal">NDB</code> によってロックが自動的にアップグレードされます。<code class="literal">BLOB</code> 読取りでは、一貫性のために追加ロックも使用されます。 
          </p><p>
            NDB のトランザクション分離レベルのクラスタ実装が <code class="literal">NDB</code> データベースのバックアップおよび復元に与える影響については、<a class="xref" href="mysql-cluster.html#mysql-cluster-backup-troubleshooting" title="23.5.8.4 NDB Cluster バックアップのトラブルシューティング">セクション23.5.8.4「NDB Cluster バックアップのトラブルシューティング」</a> を参照してください。
          </p></li><li class="listitem"><p><b>トランザクションと BLOB または TEXT カラム. </b>
              <code class="literal">NDBCLUSTER</code> は、MySQL から認識できるテーブルに MySQL の <code class="literal">BLOB</code> または <code class="literal">TEXT</code> データ型のいずれかを使用するカラム値の一部のみを格納します。<code class="literal">BLOB</code> または <code class="literal">TEXT</code> の残りの部分は、MySQL からアクセスできない別の内部テーブルに格納されます。 これに関連して、これらの型のカラムを含むテーブルに対して <code class="literal">SELECT</code> ステートメントを実行するときに常に注意すべき問題が 2 つ発生します。 
            </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
                「NDB Cluster」テーブルからの <code class="literal">SELECT</code> の場合: <code class="literal">SELECT</code> に <code class="literal">BLOB</code> または <code class="literal">TEXT</code> カラムが含まれている場合、<code class="literal">READ COMMITTED</code> トランザクション分離レベルは読取りロック付きの読取りに変換されます。 これは一貫性を保証するために行われます。 
              </p></li><li class="listitem"><p>
                一意キーのルックアップを使用して <code class="literal">BLOB</code> または <code class="literal">TEXT</code> データ型のいずれかを使用するカラムを取得し、1 つのトランザクション内で実行される <code class="literal">SELECT</code> の場合は、共有読み取りロックがトランザクションの期間中 (つまり、トランザクションがコミットまたは中止されるまで) そのテーブルに保持されます。
              </p><p>
                インデックスまたはテーブルスキャンを使用するクエリーでは、<code class="literal">BLOB</code> または <code class="literal">TEXT</code> カラムを含む <code class="literal">NDB</code> テーブルが対象であっても、この問題は発生しません。
              </p><p>
                たとえば、次の <code class="literal">CREATE TABLE</code> ステートメントによって定義されたテーブル <code class="literal">t</code> について考えます。
              </p><pre class="programlisting">CREATE TABLE t (
    a INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    b INT NOT NULL,
    c INT NOT NULL,
    d TEXT,
    INDEX i(b),
    UNIQUE KEY u(c)
) ENGINE = NDB,
</pre><p>
                <code class="literal">t</code> で次のクエリーを実行すると、一意キー検索が使用されるため、共有読取りロックが発生します:
              </p><pre class="programlisting">SELECT * FROM t WHERE c = 1;
</pre><p>
                しかし、ここに示す 4 つのクエリーでは、いずれも共有読み取りロックは発生しません。
              </p><pre class="programlisting">SELECT * FROM t WHERE b = 1;

SELECT * FROM t WHERE d = '1';

SELECT * FROM t;

SELECT b,c WHERE a = 1;
</pre><p>
                その理由は、これら 4 つのクエリーのうち、1 つ目はインデックススキャンを使用し、2 つ目と 3 つ目はテーブルスキャンを使用し、4 つ目は (主キールックアップを使用していますが) <code class="literal">BLOB</code> または <code class="literal">TEXT</code> カラムの値を取得していないためです。
              </p><p>
                <code class="literal">BLOB</code> または <code class="literal">TEXT</code> カラムを取得する一意キールックアップを使用するクエリーを回避するか、このようなクエリーを回避できない場合はトランザクションのコミットをできるだけあとで行うようにすると、共有読み取りロックによる問題を最小限に抑えることができます。
              </p></li></ol></div></li><li class="listitem"><p><b>一意キー参照とトランザクション分離. </b>
              一意インデックスは、内部的にメンテナンスされる非表示インデックステーブルを使用して <code class="literal">NDB</code> に実装されます。 一意インデックスを使用してユーザーが作成した <code class="literal">NDB</code> テーブルにアクセスすると、非表示のインデックステーブルが最初に読み取られて主キーが検索され、次にユーザーが作成したテーブルの読取りに使用されます。 この二重読取り操作中にインデックスが変更されないように、非表示のインデックステーブルで検出された行はロックされます。 ユーザー作成の <code class="literal">NDB</code> テーブルの一意インデックスによって参照される行が更新されると、非表示のインデックステーブルには、更新が実行されるトランザクションによる排他ロックが適用されます。 つまり、同じ (ユーザーが作成した) <code class="literal">NDB</code> テーブルに対する読取り操作は、更新が完了するまで待機する必要があります。 これは、読取り操作のトランザクションレベルが <code class="literal">READ COMMITTED</code> の場合でも当てはまります。 
            </p><p>
            潜在的なブロッキング読取りをバイパスするために使用できる回避策の 1 つは、読取りの実行時に SQL ノードが一意のインデックスを無視するように強制することです。 これを行うには、テーブルを読み取る <code class="literal">SELECT</code> ステートメントの一部として <code class="literal">IGNORE INDEX</code> インデックスヒントを使用します (<a class="xref" href="optimization.html#index-hints" title="8.9.4 インデックスヒント">セクション8.9.4「インデックスヒント」</a> を参照)。 MySQL サーバーでは、<code class="literal">NDB</code> で作成された一意のインデックスごとにシャドウ順序付きインデックスが作成されるため、かわりに順序付きインデックスを読み取ることができ、一意のインデックスアクセスロックが回避されます。 結果の読取りは、主キーによってコミットされた読取りと同じ一貫性があり、行の読取り時に最後にコミットされた値を返します。 
          </p><p>
            順序付けされたインデックスを介して読み取ると、クラスタ内のリソースの使用効率が低下し、待機時間が長くなる可能性があります。
          </p><p>
            一意の値ではなく範囲をクエリーすることで、アクセスに一意のインデックスを使用しないようにすることもできます。
          </p></li><li class="listitem"><p><b>ロールバック. </b>
              部分的なトランザクションおよびトランザクションの部分的なロールバックはありません。 重複キーまたは同様のエラーが発生すると、トランザクション全体がロールバックされます。 
            </p><p>
            この動作は、個々のステートメントをロールバックできる <code class="literal">InnoDB</code> などのほかのトランザクション対応のストレージエンジンと異なります。
          </p></li><li class="listitem"><p><b>トランザクションとメモリー使用量. </b><a class="indexterm" name="idm45563237545408"></a><a class="indexterm" name="idm45563237543104"></a>
              この章のほかの場所で説明されているように、NDB Cluster は大きなトランザクションを適切に処理しません。多数の操作を含む単一の大きなトランザクションを試みるよりも、少数の操作で多数の小さなトランザクションを実行することをお勧めします。 特に考慮すべき点は、大規模なトランザクションが非常に大量のメモリーを必要とすることです。 このため、次のリストで説明するように、多数の MySQL ステートメントのトランザクション動作が影響を受けます: 
            </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <code class="literal">TRUNCATE TABLE</code> は、<code class="literal">NDB</code> テーブルに対して使用した場合、トランザクションになりません。 <code class="literal">TRUNCATE TABLE</code> でテーブルを空にできない場合は、成功するまでこれを再実行する必要があります。 
              </p></li><li class="listitem"><p>
                <code class="literal">DELETE FROM</code> (<code class="literal">WHERE</code> 句が内場合も含む) は、トランザクションに<span class="emphasis"><em>なります</em></span>。 テーブルに非常に多くの行が含まれる場合は、複数の <code class="literal">DELETE FROM ... LIMIT ...</code> ステートメントを使用して削除操作を<span class="quote">「<span class="quote">ひとまとめに</span>」</span>すると、パフォーマンスが向上することがあります。 テーブルを空にすることが目的である場合は、代わりに <code class="literal">TRUNCATE TABLE</code> を使用することをお勧めします。 
              </p></li><li class="listitem"><p><b>LOAD DATA ステートメント. </b>
                  <code class="literal">NDB</code> テーブルで使用する場合、<code class="literal">LOAD DATA</code> はトランザクション対応ではありません。
                </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">重要</div><p>
                  <code class="literal">LOAD DATA</code> ステートメントを実行すると、<code class="literal">NDB</code> エンジンは不規則な間隔でコミットを実行し、通信ネットワークの使用率を向上させます。 このようなコミットが発生するタイミングを事前に知ることはできません。 
                </p></div></li><li class="listitem"><p><b>ALTER TABLE とトランザクション. </b>
                  <code class="literal">ALTER TABLE</code> の一部として <code class="literal">NDB</code> テーブルをコピーする場合、コピーの作成はトランザクションになりません。 (いずれにしても、コピーが削除されたときにこの操作はロールバックされます。) 
                </p></li></ul></div></li><li class="listitem"><p><b>トランザクションと COUNT() 関数. </b>
              NDB Cluster レプリケーションを使用する場合、レプリカ上の <code class="literal">COUNT()</code> 関数のトランザクションの一貫性を保証することはできません。 つまり、ソースで単一トランザクション内のテーブルの行数を変更する一連のステートメント (<code class="literal">INSERT</code>、<code class="literal">DELETE</code>、またはその両方) を実行する場合、レプリカで <code class="literal">SELECT COUNT(*) FROM <em class="replaceable"><code>table</code></em></code> クエリーを実行すると中間結果が生成されることがあります。 これは、<code class="literal">SELECT COUNT(...)</code> がダーティー読み取りを行うために発生し、<code class="literal">NDB</code> ストレージエンジンのバグではありません。 (詳細は、Bug #31321 を参照してください。) 
            </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-limitations-error-handling"></a>23.1.7.4 NDB Cluster のエラー処理</h4></div></div></div><a class="indexterm" name="idm45563237508352"></a><p>
        ノードの起動、停止、および再起動によって、トランザクションが失敗する原因となる一時的なエラーが発生する場合があります。 これらには、次のケースが含まれます。 
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><b>一時エラー. </b>
              ノードを最初に起動するときは、エラー 1204 <span class="errortext">Temporary failure, distribution changed</span>および同様の一時エラーが発生する可能性があります。
            </p></li><li class="listitem"><p><b>ノード障害によるエラー. </b>
              データノードの停止または障害によって、いくつかの異なるノード障害エラーが発生する場合があります。 (ただし、クラスタの計画的なシャットダウンを実行したときに中止されるトランザクションは存在しないはずです。) 
            </p></li></ul></div><p>
        これらのいずれの場合も、生成されたエラーはアプリケーションの内部で処理する必要があります。 これは、トランザクションの再試行によって行うべきです。 
      </p><p>
        <a class="xref" href="mysql-cluster.html#mysql-cluster-limitations-limits" title="23.1.7.2 NDB Cluster と標準の MySQL 制限の制限と相違点">セクション23.1.7.2「NDB Cluster と標準の MySQL 制限の制限と相違点」</a>も参照してください。
      </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-limitations-database-objects"></a>23.1.7.5 NDB Cluster 内のデータベースオブジェクトに関連付けられる制限</h4></div></div></div><a class="indexterm" name="idm45563237497152"></a><p>
        <code class="literal">NDBCLUSTER</code> ストレージエンジンを使用するときは、テーブルやインデックスなどの一部のデータベースオブジェクトに関してさまざまな制限があります。
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><b>データベースオブジェクトの数. </b>
              単一の NDB Cluster (データベース、テーブル、およびインデックスを含む) 内の <span class="emphasis"><em>all</em></span> <code class="literal">NDB</code> データベースオブジェクトの最大数は 20320 に制限されます。
            </p></li><li class="listitem"><p><b>テーブルあたりの属性数. </b>
              特定のテーブルに属すことができる属性 (つまり、カラムとインデックス) の最大数は 512 です。
            </p></li><li class="listitem"><p><b>キーあたりの属性数. </b>
              キーあたりの属性の最大数は 32 です。
            </p></li><li class="listitem"><p><b>行サイズ. </b>
              NDB 8.0.18 以降、いずれかの行の最大許容サイズは 30000 バイトで、NDB 8.0.17 以前のリリースでは、この制限は 14000 バイトです。
            </p><p>
            <code class="literal">BLOB</code> または <code class="literal">TEXT</code> の各カラムは、この合計に 256 バイトを超える 8 = 264 バイトを占めます。これには <code class="literal">JSON</code> カラムが含まれます。 これらのタイプの詳細は、<a class="xref" href="data-types.html#data-types-storage-reqs-strings" title="文字列型の格納要件">文字列型の格納要件</a> および <a class="xref" href="data-types.html#data-types-storage-reqs-json" title="JSON 記憶域の要件">JSON 記憶域の要件</a> を参照してください。 
          </p><p>
            また、<code class="literal">NDB</code> テーブルの固定幅カラムの最大オフセットは 8188 バイトです。この制限に違反するテーブルを作成しようとすると、NDB エラー 851 <span class="errortext">「固定サイズカラムの最大オフセットを超えました」</span>で失敗します。 メモリーベースのカラムの場合、<code class="literal">VARCHAR</code> などの可変幅のカラムタイプを使用するか、カラムを <code class="literal">COLUMN_FORMAT=DYNAMIC</code> として定義することで、この制限を回避できます。これは、ディスクに格納されているカラムでは機能しません。 ディスクベースのカラムの場合、テーブルの作成に使用された <code class="literal">CREATE TABLE</code> ステートメントで最後に定義されたディスクベースのカラム以外のすべてのカラムの幅の組合せが 8188 バイトを超えず、<code class="literal">CHAR</code> や <code class="literal">VARCHAR</code> などの一部のデータ型に対して実行される可能性のある丸めを減らすように、テーブルディスクベースのカラムの順序を変更できます。そうでない場合は、問題のあるカラムの 1 つ以上にメモリーベースの記憶域を使用する必要があります。 
          </p></li><li class="listitem"><p><b>テーブルごとの BIT カラムの記憶域. </b>
              特定の <code class="literal">NDB</code> テーブルで使用されるすべての <code class="literal">BIT</code> カラムの最大合計幅は 4096 です。
            </p></li><li class="listitem"><p><b>FIXED カラムの格納. </b>
              NDB Cluster 8.0 は、<code class="literal">FIXED</code> カラム内のデータのフラグメントあたり最大 128 TB をサポートします。
            </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-limitations-unsupported"></a>23.1.7.6 NDB Cluster でサポートされない機能または欠落している機能</h4></div></div></div><a class="indexterm" name="idm45563237462000"></a><p>
        <code class="literal">NDB</code> テーブルでは、ほかのストレージエンジンでサポートされるいくつかの機能がサポートされません。 NDB Cluster でこれらの機能のいずれかを使用しようとしても、それ自体のエラーは発生しません。ただし、機能がサポートまたは適用されることが予想されるアプリケーションでは、エラーが発生する可能性があります。 このような機能を参照するステートメントは、<code class="literal">NDB</code> によって事実上無視される場合でも、構文上有効である必要があります。 
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><b>インデックスのプリフィクス. </b>
              インデックスの接頭辞は、<code class="literal">NDB</code> テーブルではサポートされません。 接頭辞が <code class="literal">CREATE TABLE</code>、<code class="literal">ALTER TABLE</code>、<code class="literal">CREATE INDEX</code> などのステートメントのインデックス指定の一部として使用されている場合、その接頭辞は <code class="literal">NDB</code> によって作成されません。 
            </p><p>
            インデックス接頭辞を含むステートメント、および <code class="literal">NDB</code> テーブルの作成または変更は、構文的に有効である必要があります。 たとえば、次のステートメントは、ストレージエンジンに関係なく、常にエラー 1089 <span class="errortext">「接頭辞キーが正しくありません。使用されているキー部分が文字列でないか、使用されている長さがキー部分より長いか、ストレージエンジンが一意の接頭辞キーをサポートしていません」</span>で失敗します: 
          </p><pre class="programlisting"><code class="literal">CREATE TABLE</code> t1 (
    c1 INT NOT NULL,
    <span class="emphasis"><em>c2 VARCHAR(100),
    INDEX i1 (c2(500))</em></span>
);</pre><p>
            これは、インデックスにそれ自体より大きい接頭辞がない可能性があるという SQL 構文ルールを考慮して発生します。
          </p></li><li class="listitem"><p><b>セーブポイントとロールバック. </b>
              セーブポイントおよびセーブポイントへのロールバックは、<code class="literal">MyISAM</code> と同様に無視されます。
            </p></li><li class="listitem"><p><b>コミットの持続性. </b>
              ディスクに対する永続的なコミットはありません。 コミットはレプリケートされますが、コミット時にログがディスクにフラッシュされる保証はありません。 
            </p></li><li class="listitem"><p><b>レプリケーション. </b>
              ステートメントベースのレプリケーションはサポートされません。 クラスタのレプリケーションを設定するときは、<code class="option">--binlog-format=ROW</code> (または <code class="option">--binlog-format=MIXED</code>) を使用してください。 詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-replication" title="23.6 NDB Cluster レプリケーション">セクション23.6「NDB Cluster レプリケーション」</a>を参照してください。 
            </p><p>
            グローバルトランザクション識別子 (GTID) を使用したレプリケーションは NDB Cluster と互換性がなく、NDB Cluster 8.0 ではサポートされません。 NDB Cluster レプリケーションの失敗までの問題を引き起こす可能性が非常に高いため、<code class="literal">NDB</code> ストレージエンジンを使用するときに GTID を有効にしないでください。 
          </p><p>
            準同期レプリケーションは NDB Cluster ではサポートされていません。
          </p></li><li class="listitem"><p><b>生成されるカラム. </b>
              <code class="literal">NDB</code> ストレージエンジンは、仮想生成カラムのインデックスをサポートしていません。
            </p><p>
            他のストレージエンジンと同様に、格納された生成カラムにインデックスを作成できますが、<code class="literal">NDB</code> では、生成されたカラムの格納に <code class="literal">DataMemory</code> が使用され、インデックスに <code class="literal">IndexMemory</code> が使用されることに注意する必要があります。 例については、<a class="xref" href="sql-statements.html#json-column-indirect-index-mysql-cluster" title="NDB Cluster での JSON カラムと間接インデックス">NDB Cluster での JSON カラムと間接インデックス</a>を参照してください。 
          </p><p>
            NDB Cluster は、格納された生成カラム内の変更をバイナリログに書き込みますが、仮想カラムに対して行われた変更はログに記録しません。 これは、NDB Cluster レプリケーションまたは <code class="literal">NDB</code> とほかの MySQL ストレージエンジン間のレプリケーションには影響しません。 
          </p></li></ul></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
          <code class="literal">NDB</code> でのトランザクション処理に関する制限の詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-limitations-transactions" title="23.1.7.3 NDB Cluster でのトランザクション処理に関する制限">セクション23.1.7.3「NDB Cluster でのトランザクション処理に関する制限」</a>を参照してください。
        </p></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-limitations-performance"></a>23.1.7.7 NDB Cluster のパフォーマンスに関する制限事項</h4></div></div></div><a class="indexterm" name="idm45563237420208"></a><p>
        次のパフォーマンスの問題は、NDB Cluster に固有または特に発音されます:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><b>Range scans. </b>
              <code class="literal">NDB</code> ストレージエンジンへの順次アクセスによって発生するクエリーのパフォーマンスの問題があります。多数の範囲スキャンの実行も、<code class="literal">MyISAM</code> や <code class="literal">InnoDB</code> に比べて負荷が高くなります。
            </p></li><li class="listitem"><p><b>Records in range の信頼性. </b>
              <code class="literal">Records in range</code> 統計は使用可能ですが、完全なテストや正式なサポートは行われていません。 このため、場合によっては最適でないクエリー計画が生成されることがあります。 必要な場合は、<code class="literal">USE INDEX</code> または <code class="literal">FORCE INDEX</code> を使用して実行プランを変更できます。 これを行う方法の詳細は、<a class="xref" href="optimization.html#index-hints" title="8.9.4 インデックスヒント">セクション8.9.4「インデックスヒント」</a>を参照してください。 
            </p></li><li class="listitem"><p><b>一意のハッシュインデックス. </b>
              <code class="literal">USING HASH</code> で作成された一意のハッシュインデックスは、<code class="literal">NULL</code> がキーの一部として指定された場合はテーブルへのアクセスに使用できません。
            </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-limitations-exclusive-to-cluster"></a>23.1.7.8 NDB Cluster 専用の問題</h4></div></div></div><a class="indexterm" name="idm45563237403120"></a><p>
        <code class="literal">NDB</code> ストレージエンジンに固有の制限は次のとおりです:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><b>マシンアーキテクチャー. </b>
              クラスタ内で使用されるすべてのマシンが同じアーキテクチャーである必要があります。 つまり、ノードをホストするすべてのマシンがビッグエンディアンまたはリトルエンディアンのどちらかである必要があり、両者を組み合わせて使用することはできません。 たとえば、PowerPC で実行されている管理ノードから x86 マシンで実行されているデータノードに指示することはできません。 この制限は、単に <span class="command"><strong>mysql</strong></span> を実行しているマシンや、クラスタ SQL ノードにアクセスしている可能性のあるその他のクライアントには適用されません。 
            </p></li><li class="listitem"><p><b>バイナリロギング. </b><a class="indexterm" name="idm45563237395328"></a><a class="indexterm" name="idm45563237393104"></a>
              NDB Cluster には、バイナリロギングに関して次の制限事項があります:
            </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <code class="literal">sql_log_bin</code> は、データ操作では効果がありませんが、スキーマ操作ではサポートされます。
              </p></li><li class="listitem"><p>
                NDB Cluster は、<code class="literal">BLOB</code> カラムを持つが主キーを持たないテーブルのバイナリログを生成できません。
              </p></li><li class="listitem"><p>
                ステートメントを実行する <span class="command"><strong>mysqld</strong></span> に配置されて<span class="emphasis"><em>いない</em></span>クラスタバイナリログには、次のスキーマ操作だけが記録されます。
              </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: square; "><li class="listitem"><p>
                    <code class="literal">CREATE TABLE</code>
                  </p></li><li class="listitem"><p>
                    <code class="literal">ALTER TABLE</code>
                  </p></li><li class="listitem"><p>
                    <code class="literal">DROP TABLE</code>
                  </p></li><li class="listitem"><p>
                    <code class="literal">CREATE DATABASE</code> / <code class="literal">CREATE SCHEMA</code>
                  </p></li><li class="listitem"><p>
                    <code class="literal">DROP DATABASE</code> / <code class="literal">DROP SCHEMA</code>
                  </p></li><li class="listitem"><p>
                    <code class="literal">CREATE TABLESPACE</code>
                  </p></li><li class="listitem"><p>
                    <code class="literal">ALTER TABLESPACE</code>
                  </p></li><li class="listitem"><p>
                    <code class="literal">DROP TABLESPACE</code>
                  </p></li><li class="listitem"><p>
                    <code class="literal">CREATE LOGFILE GROUP</code>
                  </p></li><li class="listitem"><p>
                    <code class="literal">ALTER LOGFILE GROUP</code>
                  </p></li><li class="listitem"><p>
                    <code class="literal">DROP LOGFILE GROUP</code>
                  </p></li></ul></div></li></ul></div></li><li class="listitem"><p><b>スキーマ操作. </b>
              スキーマ操作 (DDL ステートメント) は、データノードの再起動中に拒否されます。 オンラインアップグレードまたはダウングレードの実行中は、スキーマ操作もサポートされません。 
            </p></li><li class="listitem"><p><b>フラグメントレプリカの数. </b>
              <code class="literal">NoOfReplicas</code> データノード構成パラメータによって決定されるフラグメントレプリカの数は、NDB Cluster によって格納されるすべてのデータのコピーの数です。 このパラメータを 1 に設定すると、単一のコピーのみが存在することを意味します。この場合、冗長性は提供されず、データノードの損失にはデータの損失が伴います。 冗長性を保証し、データノードに障害が発生した場合でもデータを保持するには、このパラメータを 2 に設定します。これは、本番でのデフォルト値および推奨値です。 
            </p><p>
            <code class="literal">NoOfReplicas</code> を 2 より大きい値 (最大 4) に設定することはサポートされていますが、データ損失から保護する必要はありません。
          </p></li></ul></div><p>
        <a class="xref" href="mysql-cluster.html#mysql-cluster-limitations-multiple-nodes" title="23.1.7.10 複数の NDB Cluster ノードに関する制限事項">セクション23.1.7.10「複数の NDB Cluster ノードに関する制限事項」</a>も参照してください。
      </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-limitations-disk-data"></a>23.1.7.9 NDB Cluster ディスクデータストレージに関する制限事項</h4></div></div></div><a class="indexterm" name="idm45563237351184"></a><p><b>ディスクデータオブジェクトの最大数と最小数. </b>
          ディスクデータオブジェクトには、次の最大数および最小数が適用されます。
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            テーブルスペースの最大数: 2<sup>32</sup> (4294967296)
          </p></li><li class="listitem"><p>
            テーブルスペースあたりのデータファイルの最大数: 2<sup>16</sup> (65536)
          </p></li><li class="listitem"><p>
            テーブルスペースのデータファイルのエクステントが取り得る最小および最大サイズは、それぞれ 32K および 2G です。 詳細は、<a class="xref" href="sql-statements.html#create-tablespace" title="13.1.21 CREATE TABLESPACE ステートメント">セクション13.1.21「CREATE TABLESPACE ステートメント」</a>を参照してください。 
          </p></li></ul></div><p>
        また、「NDB ディスクデータ」テーブルを使用する場合は、データファイルおよびエクステントに関する次の問題に注意する必要があります:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            データファイルは <code class="literal">DataMemory</code> を使用します。 使用方法は、メモリー内データの場合と同じです。 
          </p></li><li class="listitem"><p>
            データファイルはファイル記述子を使用します。 データファイルは常に開いていることに注意してください。つまり、ファイル記述子は常に使用され、他のシステムタスクに再利用することはできません。 
          </p></li><li class="listitem"><p>
            エクステントには十分な <code class="literal">DiskPageBufferMemory</code> が必要です。すべてのエクステントで使用されるすべてのメモリー (エクステント数×エクステントのサイズ) を考慮するために、このパラメータを十分に予約する必要があります。
          </p></li></ul></div><p><b>ディスクデータテーブルとディスクレスモード. </b>
          ディスクレスモードでクラスタを実行している場合、「ディスクデータ」テーブルの使用はサポートされません。
        </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-limitations-multiple-nodes"></a>23.1.7.10 複数の NDB Cluster ノードに関する制限事項</h4></div></div></div><p><b>複数の SQL ノード. </b><a class="indexterm" name="idm45563237332320"></a>
          NDB Cluster SQL ノードとしての複数の MySQL サーバーの使用に関連する問題は次のとおりで、<code class="literal">NDBCLUSTER</code> ストレージエンジンに固有です:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><b>ストアドプログラムが配布されていません. </b>
              ストアドプロシージャ、ストアドファンクション、トリガーおよびスケジュール済イベントはすべて、<code class="literal">NDB</code> ストレージエンジンを使用するテーブルでサポートされていますが、これらはクラスタ SQL ノードとして機能する MySQL Servers 間で自動的に伝播されないため、各 SQL ノードで個別に再作成する必要があります。 <a class="xref" href="stored-objects.html#stored-routines-ndbcluster" title="NDB Cluster 内のストアドルーチンとトリガー">NDB Cluster 内のストアドルーチンとトリガー</a>を参照してください。 
            </p></li><li class="listitem"><p><b>分散型のテーブルロックがない. </b>
              <code class="literal">LOCK TABLES</code> は、ロックが発行された SQL ノードに対してのみ機能します。クラスタ内のほかの SQL ノードでは、このロックは<span class="quote">「<span class="quote">認識</span>」</span>されません。 これは、操作の一部としてテーブルをロックするステートメントによって発行されたロックにも当てはまります。 (例については、次の項目を参照してください。) 
            </p></li><li class="listitem"><p><b>ALTER TABLE 操作. </b>
              複数の MySQL サーバー (SQL ノード) が実行されているときは、<code class="literal">ALTER TABLE</code> によるロックは完全ではありません。 (前の項目で説明したように、NDB Cluster は分散テーブルロックをサポートしていません。) 
            </p></li></ul></div><p><b>複数の管理ノード. </b><a class="indexterm" name="idm45563237316528"></a>
          複数の管理サーバーを使用する場合:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            いずれかの管理サーバーが同じホスト上で実行されている場合は、ノード ID の自動割当てが同じホスト上の複数の管理サーバー間で機能しないため、接続文字列でノードに明示的な ID を指定する必要があります。 すべての管理サーバーが異なるホストに存在する場合、これは必要ありません。 
          </p></li><li class="listitem"><p>
            管理サーバーは起動時に、まず同じ NDB Cluster 内のほかの管理サーバーをチェックし、ほかの管理サーバーへの接続が成功すると、その構成データを使用します。 つまり、管理サーバーの <code class="option">--reload</code> および <code class="option">--initial</code> 起動オプションは、それが実行中の唯一の管理サーバーでないかぎり、無視されます。 また、複数の管理ノードを持つ NDB Cluster のローリング再起動を実行する場合、管理サーバーは、それがこの NDB Cluster で実行されている唯一の管理サーバーである場合にのみ、独自の構成ファイルを読み取ります。 詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-rolling-restart" title="23.5.5 NDB Cluster のローリング再起動の実行">セクション23.5.5「NDB Cluster のローリング再起動の実行」</a>を参照してください。 
          </p></li></ul></div><p><b>複数のネットワークアドレス. </b>
          1 つのデータノードに対する複数のネットワークアドレスはサポートされません。 これらを使用すると、問題が発生しやすくなります。データノードに障害が発生すると、SQL ノードはデータノードが停止したことの確認を待機しますが、そのデータノードへの別のルートが開いたままであるため、この確認を受信できません。 これにより、クラスタは実質的に操作不能になります。 
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
          1 つのデータノードで複数のネットワークハードウェア<span class="emphasis"><em>インタフェース</em></span> (Ethernet カードなど) を使用できますが、これらは同じアドレスにバインドする必要があります。 これは、<code class="literal">config.ini</code> ファイルで接続ごとに複数の <code class="literal">[tcp]</code> セクションを使用できないことも意味します。 詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-tcp-definition" title="23.3.3.10 NDB Cluster TCP/IP 接続">セクション23.3.3.10「NDB Cluster TCP/IP 接続」</a>を参照してください。 
        </p></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-limitations-resolved"></a>23.1.7.11 前 NDB Cluster 8.0 で解決される NDB Cluster の問題</h4></div></div></div><a class="indexterm" name="idm45563237300736"></a><p>
        NDB Cluster の以前のバージョンに存在していた多くの制限事項および関連する問題が NDB 8.0 で解決されました。 これらについて、次のリストで簡単に説明します。 
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><b>データベース名とテーブル名. </b>
              NDB 8.0.18 より前では、<code class="literal">NDB</code> ストレージエンジンを使用する場合、データベース名とテーブル名の両方に許可される最大長は 63 文字であり、この制限より長いデータベース名またはテーブル名を使用するステートメントは適切なエラーで失敗しました。 NDB 8.0.18 の時点では、この制限はなくなり、<code class="literal">NDB</code> データベースおよびテーブルの識別子は、ほかの MySQL データベースおよびテーブル名と同様に最大 64 バイトを使用できるようになりました。 
            </p></li><li class="listitem"><p><b>IPv6 のサポート. </b>
              NDB 8.0.22 より前では、NDB Cluster 内のノード間の接続に使用されるすべてのネットワークアドレスが、IPv4 アドレスを使用するか、または解決できるようにする必要がありました。 NDB 8.0.22 以降、<code class="literal">NDB</code> は、すべてのタイプのクラスタノード、および NDB API または MGM API を使用するアプリケーションに対して IPv6 アドレスをサポートします。 
            </p></li></ul></div></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-cluster-installation"></a>23.2 NDB Cluster のインストール</h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-install-linux">23.2.1 Linux での NDB Cluster のインストール</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-install-windows">23.2.2 Windows への NDB Cluster のインストール</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-install-configuration">23.2.3 NDB Cluster の初期構成</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-install-first-start">23.2.4 NDB Cluster の初期起動</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-install-example-data">23.2.5 テーブルとデータを含む NDB Cluster の例</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-install-shutdown-restart">23.2.6 NDB Cluster の安全なシャットダウンと再起動</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-upgrade-downgrade">23.2.7 NDB Cluster のアップグレードおよびダウングレード</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-installer">23.2.8 NDB Cluster Auto-Installer (サポートされなくなりました)</a></span></dt></dl></div><a class="indexterm" name="idm45563237288640"></a><a class="indexterm" name="idm45563237287184"></a><a class="indexterm" name="idm45563237285776"></a><a class="indexterm" name="idm45563237283744"></a><a class="indexterm" name="idm45563237282352"></a><p>
    このセクションでは、NDB Cluster の計画、インストール、構成、および実行の基本について説明します。 <a class="xref" href="mysql-cluster.html#mysql-cluster-configuration" title="23.3 NDB Cluster の構成">セクション23.3「NDB Cluster の構成」</a> の例ではさまざまなクラスタ化オプションおよび構成に関する詳細な情報が提供されていますが、ここで説明するガイドラインおよび手順に従った結果は、データの可用性および保護のための<span class="emphasis"><em>最小</em></span>要件を満たす使用可能な NDB Cluster であるべきです。 
  </p><p>
    NDB Cluster をリリースバージョン間でアップグレードまたはダウングレードする方法については、<a class="xref" href="mysql-cluster.html#mysql-cluster-upgrade-downgrade" title="23.2.7 NDB Cluster のアップグレードおよびダウングレード">セクション23.2.7「NDB Cluster のアップグレードおよびダウングレード」</a> を参照してください。
  </p><p>
    このセクションでは、ハードウェアとソフトウェアの要件、ネットワークの問題、NDB Cluster のインストール、基本的な構成の問題、クラスタの起動、停止、および再起動、サンプルデータベースのロード、およびクエリーの実行について説明します。
  </p><p>
    NDB Cluster は、NDB Cluster ディストリビューションの一部として、web ベースのグラフィカルインストーラである NDB Cluster Auto-Installer (現在は非推奨) も提供します。 Auto-Installer を使用すると、1 台以上のホストコンピュータで NDB Cluster の基本的なインストールとセットアップを実行できます。 詳しくは<a class="xref" href="mysql-cluster.html#mysql-cluster-installer" title="23.2.8 NDB Cluster Auto-Installer (サポートされなくなりました)">セクション23.2.8「NDB Cluster Auto-Installer (サポートされなくなりました)」</a>,をご覧ください。 
  </p><p><b>仮定. </b>
      以降のセクションでは、クラスタの物理的構成とネットワーク構成に関していくつかの仮定を立てています。 これらの仮定については、次のいくつかの段落で説明します。 
    </p><p><a name="mysql-cluster-install-nodes-hosts"></a><b>クラスタノードとホストコンピュータ. </b>
      このクラスタは、ここに示す 4 つのノードで構成されます。各ノードは別個のホストコンピュータ上に配置され、一般的な Ethernet ネットワーク上に固定のネットワークアドレスを持っています。
    </p><div class="table"><a name="idm45563237269952"></a><p class="title"><b>表 23.5 クラスタ例のノードのネットワークアドレス</b></p><div class="table-contents"><table><col style="width: 50%"><col style="width: 50%"><thead><tr>
        <th>ノード</th>
        <th>IP アドレス</th>
      </tr></thead><tbody><tr>
        <td>管理ノード (<span class="command"><strong>mgmd</strong></span>)</td>
        <td>198.51.100.10</td>
      </tr><tr>
        <td>SQL ノード (<span class="command"><strong>mysqld</strong></span>)</td>
        <td>198.51.100.20</td>
      </tr><tr>
        <td>データノード "A" (<span class="command"><strong>ndbd</strong></span>)</td>
        <td>198.51.100.30</td>
      </tr><tr>
        <td>データノード "B" (<span class="command"><strong>ndbd</strong></span>)</td>
        <td>198.51.100.40</td>
      </tr></tbody></table></div></div><br class="table-break"><p>
    この設定は、次の図にも示されています:
  </p><div class="figure"><a name="fig-mysql-cluster-multi-computer"></a><p class="title"><b>図 23.4 NDB Cluster マルチコンピュータの設定</b></p><div class="figure-contents"><div class="mediaobject"><img src="images/multi-comp-1.png" width="500" height="393" alt="ほとんどのコンテンツは周囲のテキストで説明されています。 4 つのノードはそれぞれ、ネットワークに接続する中央スイッチに接続します。"></div></div></div><br class="figure-break"><p><b>ネットワークアドレス設定. </b>
      <a class="indexterm" name="idm45563237244848"></a> <a class="indexterm" name="idm45563237242656"></a>この <em class="citetitle">How-To</em> では、簡略化 (および信頼性) のために数値 IP アドレスのみが使用されます。 ただし、ネットワーク上で DNS 解決が利用可能な場合は、クラスタ構成時に IP アドレスの代わりにホスト名を使用できます。 また、<code class="filename">hosts</code> ファイル (通常、Linux およびその他の Unix 系オペレーティングシステムでは <code class="filename">/etc/hosts</code>、Windows では <code class="filename">C:\WINDOWS\system32\drivers\etc\hosts</code>、または使用しているオペレーティングシステムの同等のファイル) が使用可能な場合は、ホスト検索を行う手段として使用することもできます。 
    </p><p>
    NDB 8.0.22 より前では、データおよび管理ノードとの接続に使用されるすべてのネットワークアドレスは、IPv4 を使用して使用または解決できる必要があります。 これには、SQL ノードが他のノードに接続するために使用するアドレスが含まれます。 NDB 8.0.22 以降では、NDB Cluster は任意のクラスタノードとすべてのクラスタノード間の接続のために IPv6 をサポートしています。 
  </p><p><b>hosts ファイルの潜在的な問題. </b>
      クラスタノードにホスト名を使用しようとしたときによくある問題は、一部のオペレーティングシステム (一部の Linux 配布を含む) がインストール中にシステム独自のホスト名を <code class="filename">/etc/hosts</code> に設定する方法が原因で発生します。 <code class="literal">ndb1</code> および <code class="literal">ndb2</code> というホスト名を持つ 2 台のマシンがどちらも <code class="literal">cluster</code> ネットワークドメインに含まれる場合について考えます。 Red Hat Linux (CentOS や Fedora などの一部の派生バージョンを含む) では、これらのマシンの <code class="filename">/etc/hosts</code> ファイルに次のエントリが設定されます。 
    </p><pre class="programlisting">#  ndb1 <code class="filename">/etc/hosts</code>:
127.0.0.1   ndb1.cluster ndb1 localhost.localdomain localhost
</pre><pre class="programlisting">#  ndb2 <code class="filename">/etc/hosts</code>:
127.0.0.1   ndb2.cluster ndb2 localhost.localdomain localhost
</pre><p>
    SUSE Linux (OpenSUSE を含む) では、マシンの <code class="filename">/etc/hosts</code> ファイルにこれらのエントリが設定されます。
  </p><pre class="programlisting">#  ndb1 <code class="filename">/etc/hosts</code>:
127.0.0.1       localhost
127.0.0.2       ndb1.cluster ndb1
</pre><pre class="programlisting">#  ndb2 <code class="filename">/etc/hosts</code>:
127.0.0.1       localhost
127.0.0.2       ndb2.cluster ndb2
</pre><p>
    どちらの場合も、<code class="literal">ndb1</code> は <code class="literal">ndb1.cluster</code> をループバック IP アドレスにルーティングしますが、DNS から <code class="literal">ndb2.cluster</code> のパブリック IP アドレスを取得します。一方、<code class="literal">ndb2</code> は <code class="literal">ndb2.cluster</code> をループバックアドレスにルーティングし、<code class="literal">ndb1.cluster</code> のパブリックアドレスを取得します。 その結果、各データノードは管理サーバーに接続しますが、ほかのデータノードが接続したことを検出できないため、データノードが起動中にハングアップしたように見えます。 
  </p><div class="caution" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注意</div><p>
      <code class="filename">config.ini</code> では <code class="literal">localhost</code> とほかのホスト名または IP アドレスを混在できません。 これらの理由により、このようなケースの (<code class="filename">config.ini</code> の<span class="emphasis"><em>すべての</em></span> <code class="literal">HostName</code> エントリで IP アドレスを使用する以外の) 解決策は、すべてのクラスタホストの <code class="filename">/etc/hosts</code> から完全修飾ホスト名を削除し、<code class="filename">config.ini</code> で使用することです。 
    </p></div><p><b>ホストコンピュータのタイプ. </b>
      このインストールシナリオに含まれる各ホストコンピュータは、標準的な構成でディスクにインストールされたサポート対象のオペレーティングシステムを実行し、不要なサービスを実行していない Intel ベースのデスクトップ PC です。 標準の TCP/IP ネットワーク機能を含む中核的なオペレーティングシステムで十分です。 また、簡略化のため、すべてのホストのファイルシステムが完全に同じように設定されていると仮定します。 そうでない場合は、状況に応じてこれらの手順を適用してください。 
    </p><p><b>ネットワークハードウェア. </b>
      各マシンには標準の 100M ビット/秒または 1 ギガビット Ethernet カードが (カードに対応するドライバとともに) 取り付けられ、4 台のホストすべてがスイッチなどの標準仕様の Ethernet ネットワークアプライアンスを介して接続されています。 (すべてのマシンで、同じスループットのネットワークカードを使用する必要があります。 つまり、クラスタ内の 4 台のマシンで 100M ビット/秒カードを使用するか、<span class="emphasis"><em>または</em></span> 4 台のマシンで 1 ギガビットカードを使用してください。) NDB Cluster は 100 Mbps ネットワークで動作しますが、ギガビットイーサネットを使用するとパフォーマンスが向上します。 
    </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">重要</div><p>
      NDB Cluster は、スループットが 100 Mbps 未満のネットワーク、または待機時間が非常に長いネットワークでの使用を目的としていません。 このため (特に)、インターネットなどの広域ネットワーク上で NDB Cluster を実行しようとしても成功しない可能性が高く、本番ではサポートされません。 
    </p></div><p><b>サンプルデータ. </b>
      MySQL の web サイトからダウンロードできる <code class="literal">world</code> データベースを使用します (<a class="ulink" href="https://dev.mysql.com/doc/index-other.html" target="_top">https://dev.mysql.com/doc/index-other.html</a> を参照)。 各マシンには、オペレーティングシステム、必要な NDB Cluster プロセス、および (データノード上の) データベースを格納するための十分なメモリーがあることを前提としています。 
    </p><p>
    MySQL のインストールに関する一般的な情報は、<a class="xref" href="installing.html" title="第 2 章 MySQL のインストールとアップグレード">第2章「<i>MySQL のインストールとアップグレード</i>」</a>を参照してください。 Linux およびその他の Unix に似たオペレーティングシステムへの NDB Cluster のインストールについては、<a class="xref" href="mysql-cluster.html#mysql-cluster-install-linux" title="23.2.1 Linux での NDB Cluster のインストール">セクション23.2.1「Linux での NDB Cluster のインストール」</a> を参照してください。 Windows オペレーティングシステムへの NDB Cluster のインストールについては、<a class="xref" href="mysql-cluster.html#mysql-cluster-install-windows" title="23.2.2 Windows への NDB Cluster のインストール">セクション23.2.2「Windows への NDB Cluster のインストール」</a> を参照してください。 
  </p><p>
    NDB Cluster のハードウェア、ソフトウェア、およびネットワーク要件に関する一般的な情報については、<a class="xref" href="mysql-cluster.html#mysql-cluster-overview-requirements" title="23.1.3 NDB Cluster のハードウェア、ソフトウェア、およびネットワーク要件">セクション23.1.3「NDB Cluster のハードウェア、ソフトウェア、およびネットワーク要件」</a> を参照してください。
  </p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-cluster-install-linux"></a>23.2.1 Linux での NDB Cluster のインストール</h3></div></div></div><div class="toc"><dl class="toc"><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-install-linux-binary">23.2.1.1 Linux への NDB Cluster バイナリリリースのインストール</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-install-linux-rpm">23.2.1.2 RPM から NDB Cluster をインストール</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-install-debian">23.2.1.3 .deb ファイルを使用した NDB Cluster のインストール</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-install-linux-source">23.2.1.4 Linux でのソースからの NDB Cluster の構築</a></span></dt></dl></div><a class="indexterm" name="idm45563237193536"></a><a class="indexterm" name="idm45563237191488"></a><p>
      このセクションでは、Linux およびその他の Unix に似たオペレーティングシステムでの NDB Cluster のインストール方法について説明します。 次のセクションでは Linux オペレーティングシステムについて言及しますが、記載されている指示と手順は、サポートされるほかの Unix 系プラットフォームにも簡単に適用できます。 Windows システムに固有の手動のインストールおよびセットアップ手順については、<a class="xref" href="mysql-cluster.html#mysql-cluster-install-windows" title="23.2.2 Windows への NDB Cluster のインストール">セクション23.2.2「Windows への NDB Cluster のインストール」</a>を参照してください。 
    </p><p>
      各 NDB Cluster ホストコンピュータには、正しい実行可能プログラムがインストールされている必要があります。 SQL ノードを実行するホストには、MySQL Server バイナリ (<span class="command"><strong>mysqld</strong></span>) がインストールされている必要があります。 管理ノードには、管理サーバーデーモン (<span class="command"><strong>ndb_mgmd</strong></span>) が必要です。データノードには、データノードデーモン (<span class="command"><strong>ndbd</strong></span> または <span class="command"><strong>ndbmtd</strong></span>) が必要です。 管理ノードホストおよびデータノードホストに MySQL Server バイナリをインストールする必要はありません。 管理サーバーホストには管理クライアント (<span class="command"><strong>ndb_mgm</strong></span>) もインストールすることをお勧めします。 
    </p><p>
      Linux への NDB Cluster のインストールは、Oracle (.tar.gz アーカイブとしてダウンロード)、RPM パッケージ (Oracle からも入手可能)、またはソースコードからプリコンパイルされたバイナリを使用して実行できます。 次のセクションでは、これら 3 つのすべてのインストール方法について説明します。 
    </p><p>
      使用する方法に関係なく、NDB Cluster バイナリをインストールしたあとも、クラスタを起動する前に、すべてのクラスタノードの構成ファイルを作成する必要があります。 <a class="xref" href="mysql-cluster.html#mysql-cluster-install-configuration" title="23.2.3 NDB Cluster の初期構成">セクション23.2.3「NDB Cluster の初期構成」</a>を参照してください。 
    </p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-install-linux-binary"></a>23.2.1.1 Linux への NDB Cluster バイナリリリースのインストール</h4></div></div></div><a class="indexterm" name="idm45563237178208"></a><a class="indexterm" name="idm45563237175984"></a><p>
        このセクションでは、オラクルが提供する事前コンパイル済みバイナリからクラスタノードの各タイプに対応する適切な実行可能ファイルをインストールするために必要なステップについて説明します。
      </p><p>
        プリコンパイルされたバイナリを使用してクラスタを設定する場合、各クラスタホストのインストールプロセスの最初のステップは、<a class="ulink" href="https://dev.mysql.com/downloads/cluster/" target="_top">「NDB Cluster のダウンロードページ」</a>からバイナリアーカイブをダウンロードすることです。 (最新の 64 ビット NDB 8.0 リリースの場合、これは <code class="filename">mysql-cluster-gpl-8.0.22-linux-glibc2.12-x86_64.tar.gz</code> です。) ここでは、このファイルが各マシンの <code class="filename">/var/tmp</code> ディレクトリに配置されていると仮定します。 
      </p><p>
        カスタムバイナリが必要な場合は、<a class="xref" href="installing.html#installing-development-tree" title="2.9.5 開発ソースツリーを使用して MySQL をインストールする">セクション2.9.5「開発ソースツリーを使用して MySQL をインストールする」</a> を参照してください。
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
          インストールが完了しても、バイナリはまだ起動しないでください。 ノードの構成に続いてその実行方法を示します (<a class="xref" href="mysql-cluster.html#mysql-cluster-install-configuration" title="23.2.3 NDB Cluster の初期構成">セクション23.2.3「NDB Cluster の初期構成」</a>を参照してください)。 
        </p></div><p><b>SQL ノード. </b>
          SQL ノードのホストとして指定された各マシンで、システムの <code class="literal">root</code> ユーザーとして次のステップを実行します。
        </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
            <code class="filename">/etc/passwd</code> および <code class="filename">/etc/group</code> ファイルを調べて (または、オペレーティングシステムが提供する何らかのユーザーおよびグループ管理ツールを使用して)、システムに <code class="literal">mysql</code> グループと <code class="literal">mysql</code> ユーザーがすでに存在しているかどうかを確認します。 一部の OS 配布では、オペレーティングシステムのインストールプロセスの一部としてこれらが作成されます。 まだ存在しない場合は、<code class="literal">mysql</code> ユーザーグループを新規作成し、このグループに <code class="literal">mysql</code> ユーザーを追加します。 
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>groupadd mysql</code></strong>
shell&gt; <strong class="userinput"><code>useradd -g mysql -s /bin/false mysql</code></strong>
</pre><p>
            <span class="command"><strong>useradd</strong></span> および <span class="command"><strong>groupadd</strong></span> の構文は、Unix のバージョンによって多少異なる場合があり、また <span class="command"><strong>adduser</strong></span> および <span class="command"><strong>addgroup</strong></span> などの別な名前を使用している場合もあります。
          </p></li><li class="listitem"><p>
            ダウンロードしたファイルを含むディレクトリに移動し、アーカイブを解凍して、<code class="filename">mysql</code> という名前で <code class="filename">mysql</code> ディレクトリへのシンボリックリンクを作成します。
          </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
              実際のファイル名とディレクトリ名は NDB Cluster のバージョン番号によって異なります。
            </p></div><pre class="programlisting">shell&gt; <strong class="userinput"><code>cd /var/tmp</code></strong>
shell&gt; <strong class="userinput"><code>tar -C /usr/local -xzvf mysql-cluster-gpl-8.0.22-linux-glibc2.12-x86_64.tar.gz</code></strong>
shell&gt; <strong class="userinput"><code>ln -s /usr/local/mysql-cluster-gpl-8.0.22-linux-glibc2.12-x86_64 /usr/local/mysql</code></strong>
</pre></li><li class="listitem"><p>
            次に示すように、場所を <code class="filename">mysql</code> ディレクトリに変更し、<span class="command"><strong>mysqld</strong></span> <code class="option">--initialize</code> を使用してシステムデータベースを設定します:
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>cd mysql</code></strong>
shell&gt; <strong class="userinput"><code>mysqld --initialize</code></strong>
</pre><p>
            これにより、MySQL <code class="literal">root</code> アカウントのランダムパスワードが生成されます。 ランダムパスワードを生成しない場合は、<code class="option">--initialize</code> の <code class="option">--initialize-insecure</code> オプションに置き換えることができます。 いずれの場合も、このステップを実行する前に、<a class="xref" href="installing.html#data-directory-initialization" title="2.10.1 データディレクトリの初期化">セクション2.10.1「データディレクトリの初期化」</a> で追加情報を確認する必要があります。 <a class="xref" href="programs.html#mysql-secure-installation" title="4.4.2 mysql_secure_installation — MySQL インストールのセキュリティー改善">セクション4.4.2「mysql_secure_installation — MySQL インストールのセキュリティー改善」</a>も参照してください。 
          </p></li><li class="listitem"><p>
            MySQL サーバーおよびデータディレクトリで必要なアクセス許可を設定します。
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>chown -R root .</code></strong>
shell&gt; <strong class="userinput"><code>chown -R mysql data</code></strong>
shell&gt; <strong class="userinput"><code>chgrp -R mysql .</code></strong>
</pre></li><li class="listitem"><p>
            MySQL 起動スクリプトを適切なディレクトリにコピーし、実行可能にして、オペレーティングシステムがブートしたときに起動するように設定します。
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>cp support-files/mysql.server /etc/rc.d/init.d/</code></strong>
shell&gt; <strong class="userinput"><code>chmod +x /etc/rc.d/init.d/mysql.server</code></strong>
shell&gt; <strong class="userinput"><code>chkconfig --add mysql.server</code></strong>
</pre><p>
            (起動スクリプトのディレクトリは、オペレーティングシステムとバージョンによって異なります。たとえば、一部の Linux 配布では <code class="filename">/etc/init.d</code> です。)
          </p><p>
            ここでは、起動スクリプトへのリンクを作成するために Red Hat の <span class="command"><strong>chkconfig</strong></span> を使用します。使用しているプラットフォームのこの目的に適した何らかの手段 (Debian の <span class="command"><strong>update-rc.d</strong></span> など) を使用してください。
          </p></li></ol></div><p>
        前述の各ステップは、SQL ノードを配置するマシンごとに繰り返す必要があります。
      </p><p><b>データノード. </b>
          データノードのインストールには、<span class="command"><strong>mysqld</strong></span> バイナリは必要ありません。 NDB Cluster データノード実行可能ファイル <span class="command"><strong>ndbd</strong></span> (シングルスレッド) または <span class="command"><strong>ndbmtd</strong></span> (マルチスレッド) のみが必要です。 これらのバイナリも、<code class="filename">.tar.gz</code> アーカイブに含まれています。 ここでも、このアーカイブが <code class="filename">/var/tmp</code> に配置されていると仮定します。 
        </p><p>
        システムの <code class="literal">root</code> として (つまり、<span class="command"><strong>sudo</strong></span>、<span class="command"><strong>su root</strong></span>、または使用しているシステムでシステム管理者アカウントの特権を一時的に持つための同等のコマンドを使用したあとで)、次のステップを実行してデータノードホストにデータノードバイナリをインストールします。
      </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
            <code class="filename">/var/tmp</code> ディレクトリに移動し、アーカイブに含まれる <span class="command"><strong>ndbd</strong></span> および <span class="command"><strong>ndbmtd</strong></span> バイナリを <code class="filename">/usr/local/bin</code> などの適切なディレクトリに抽出します。
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>cd /var/tmp</code></strong>
shell&gt; <strong class="userinput"><code>tar -zxvf mysql-cluster-gpl-8.0.22-linux-glibc2.12-x86_64.tar.gz</code></strong>
shell&gt; <strong class="userinput"><code>cd mysql-cluster-gpl-8.0.22-linux-glibc2.12-x86_64</code></strong>
shell&gt; <strong class="userinput"><code>cp bin/ndbd /usr/local/bin/ndbd</code></strong>
shell&gt; <strong class="userinput"><code>cp bin/ndbmtd /usr/local/bin/ndbmtd</code></strong>
</pre><p>
            (<span class="command"><strong>ndb_mgm</strong></span> および <span class="command"><strong>ndb_mgmd</strong></span> を実行可能ファイルのディレクトリにコピーしたあとは、ダウンロードしたアーカイブを解凍したときに作成されたディレクトリ (およびディレクトリ内のファイル) を <code class="filename">/var/tmp</code> から安全に削除できます。)
          </p></li><li class="listitem"><p>
            ファイルをコピーしたディレクトリに移動して、両方のファイルを実行可能にします。
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>cd /usr/local/bin</code></strong>
shell&gt; <strong class="userinput"><code>chmod +x ndb*</code></strong>
</pre></li></ol></div><p>
        前述のステップは、データノードホストごとに繰り返してください。
      </p><p>
        NDB Cluster データノードを実行するために必要なデータノード実行可能ファイルは 1 つだけですが、前の手順で <span class="command"><strong>ndbd</strong></span> と <span class="command"><strong>ndbmtd</strong></span> の両方をインストールする方法を示しました。 NDB Cluster をインストールまたはアップグレードするときは、NDB Cluster のいずれか一方のみを使用する予定の場合でも、これを行うことをお勧めします。これにより、あとでいずれかから他方への変更を決定した場合に時間と問題が節約されるためです。 
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
          データノードをホストする各マシン上のデータディレクトリは <code class="filename">/usr/local/mysql/data</code> です。 この情報は、管理ノードを構成するときに重要になります。 (<a class="xref" href="mysql-cluster.html#mysql-cluster-install-configuration" title="23.2.3 NDB Cluster の初期構成">セクション23.2.3「NDB Cluster の初期構成」</a>を参照してください。) 
        </p></div><p><b>管理ノード. </b>
          管理ノードのインストールには、<span class="command"><strong>mysqld</strong></span> バイナリは必要ありません。 NDB Cluster 管理サーバー (<span class="command"><strong>ndb_mgmd</strong></span>) のみが必要です。多くの場合、管理クライアント (<span class="command"><strong>ndb_mgm</strong></span>) もインストールします。 これらのバイナリは、どちらも <code class="filename">.tar.gz</code> アーカイブに含まれています。 ここでも、このアーカイブが <code class="filename">/var/tmp</code> に配置されていると仮定します。 
        </p><p>
        システムの <code class="literal">root</code> として、次のステップを実行して管理ノードホストに <span class="command"><strong>ndb_mgmd</strong></span> および <span class="command"><strong>ndb_mgm</strong></span> をインストールします。
      </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
            <code class="filename">/var/tmp</code> ディレクトリに移動し、アーカイブに含まれる <span class="command"><strong>ndb_mgm</strong></span> および <span class="command"><strong>ndb_mgmd</strong></span> を <code class="filename">/usr/local/bin</code> などの適切なディレクトリに抽出します。
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>cd /var/tmp</code></strong>
shell&gt; <strong class="userinput"><code>tar -zxvf mysql-cluster-gpl-8.0.22-linux-glibc2.12-x86_64.tar.gz</code></strong>
shell&gt; <strong class="userinput"><code>cd mysql-cluster-gpl-8.0.22-linux-glibc2.12-x86_64</code></strong>
shell&gt; <strong class="userinput"><code>cp bin/ndb_mgm* /usr/local/bin</code></strong>
</pre><p>
            (<span class="command"><strong>ndb_mgm</strong></span> および <span class="command"><strong>ndb_mgmd</strong></span> を実行可能ファイルのディレクトリにコピーしたあとは、ダウンロードしたアーカイブを解凍したときに作成されたディレクトリ (およびディレクトリ内のファイル) を <code class="filename">/var/tmp</code> から安全に削除できます。)
          </p></li><li class="listitem"><p>
            ファイルをコピーしたディレクトリに移動して、両方のファイルを実行可能にします。
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>cd /usr/local/bin</code></strong>
shell&gt; <strong class="userinput"><code>chmod +x ndb_mgm*</code></strong>
</pre></li></ol></div><p>
        <a class="xref" href="mysql-cluster.html#mysql-cluster-install-configuration" title="23.2.3 NDB Cluster の初期構成">セクション23.2.3「NDB Cluster の初期構成」</a> では、NDB Cluster の例のすべてのノードの構成ファイルを作成します。
      </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-install-linux-rpm"></a>23.2.1.2 RPM から NDB Cluster をインストール</h4></div></div></div><a class="indexterm" name="idm45563237064080"></a><a class="indexterm" name="idm45563237062032"></a><p>
        このセクションでは、Oracle が提供する RPM パッケージを使用して、NDB Cluster 8.0 ノードのタイプごとに正しい実行可能ファイルをインストールするために必要な手順について説明します。 NDB Cluster の以前のバージョンの RPM については、<a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-install-linux-rpm.html#mysql-cluster-install-linux-rpm-old" target="_top">Installation using old-style RPMs (NDB 7.5.3 and earlier)</a> を参照してください。 
      </p><p>
        このセクションで説明する方法の代わりに、Oracle は、多くの一般的な Linux ディストリビューションと互換性のある NDB Cluster 用の MySQL リポジトリを提供します。 RPM ベースの配布では、次の 2 つのリポジトリを使用できます: 
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <span class="command"><strong>yum</strong></span> または <span class="command"><strong>dnf</strong></span> を使用する配布の場合は、NDB Cluster 用の MySQL Yum リポジトリを使用できます。 手順および追加情報は、<a class="ulink" href="https://dev.mysql.com/doc/mysql-yum-repo-quick-guide/en/#repo-qg-yum-fresh-cluster-install" target="_top">「<em class="citetitle">Yum リポジトリを使用した MySQL NDB Cluster のインストール</em>」</a>を参照してください。 
          </p></li><li class="listitem"><p>
            SLES の場合、NDB Cluster 用の MySQL SLES リポジトリを使用できます。 手順および追加情報は、<a class="ulink" href="https://dev.mysql.com/doc/mysql-sles-repo-quick-guide/en/#repo-qg-sles-fresh-cluster-install" target="_top">「<em class="citetitle">SLES リポジトリを使用した MySQL NDB Cluster のインストール</em>」</a>を参照してください。 
          </p></li></ul></div><p>
        RPM は、32 ビットと 64 ビットの両方の Linux プラットフォームで使用できます。 これらの RPM のファイル名には、次のパターンが使用されています。 
      </p><pre class="programlisting">mysql-cluster-community-data-node-8.0.22-1.el7.x86_64.rpm

mysql-cluster-<em class="replaceable"><code>license</code></em>-<em class="replaceable"><code>component</code></em>-<em class="replaceable"><code>ver</code></em>-<em class="replaceable"><code>rev</code></em>.<em class="replaceable"><code>distro</code></em>.<em class="replaceable"><code>arch</code></em>.rpm

    <em class="replaceable"><code>license</code></em>:= {commercial | community}

    <em class="replaceable"><code>component</code></em>: {management-server | data-node | server | client | <em class="replaceable"><code>other—see text</code></em>}

    <em class="replaceable"><code>ver</code></em>: <em class="replaceable"><code>major</code></em>.<em class="replaceable"><code>minor</code></em>.<em class="replaceable"><code>release</code></em>

    <em class="replaceable"><code>rev</code></em>: <em class="replaceable"><code>major</code></em>[.<em class="replaceable"><code>minor</code></em>]

    <em class="replaceable"><code>distro</code></em>: {el6 | el7 | sles12}

    <em class="replaceable"><code>arch</code></em>: {i686 | x86_64}
</pre><p>
        <em class="replaceable"><code>license</code></em> は、RPM が NDB Cluster のコマーシャルリリースまたはコミュニティーリリースのどちらの一部であるかを示します。 このセクションの残りの部分では、Community リリースをインストールする例を想定しています。 
      </p><p>
        次のテーブルに、<em class="replaceable"><code>component</code></em> で使用可能な値とその説明を示します:

        </p><div class="table"><a name="idm45563237037856"></a><p class="title"><b>表 23.6 NDB Cluster RPM ディストリビューションのコンポーネント</b></p><div class="table-contents"><table><col style="width: 50%"><col style="width: 50%"><thead><tr>
              <th>コンポーネント</th>
              <th>説明</th>
            </tr></thead><tbody><tr>
              <td><code class="literal">auto-installer</code> (DEPRECATED)</td>
              <td>NDB Cluster Auto Installer プログラム。使用方法については、<a class="xref" href="mysql-cluster.html#mysql-cluster-installer" title="23.2.8 NDB Cluster Auto-Installer (サポートされなくなりました)">セクション23.2.8「NDB Cluster Auto-Installer (サポートされなくなりました)」</a> を参照してください</td>
            </tr><tr>
              <td><code class="literal">クライアント</code></td>
              <td>MySQL および <code class="literal">NDB</code> クライアントプログラム。<span class="command"><strong>mysql</strong></span> クライアント、<span class="command"><strong>ndb_mgm</strong></span> クライアントおよびその他のクライアントツールが含まれます</td>
            </tr><tr>
              <td><code class="literal">common</code></td>
              <td>MySQL サーバーに必要な文字セットおよびエラーメッセージ情報</td>
            </tr><tr>
              <td><code class="literal">data-node</code></td>
              <td><span class="command"><strong>ndbd</strong></span> および <span class="command"><strong>ndbmtd</strong></span> データノードバイナリ</td>
            </tr><tr>
              <td><code class="literal">devel</code></td>
              <td>MySQL クライアント開発に必要なヘッダーおよびライブラリファイル</td>
            </tr><tr>
              <td><code class="literal">embedded</code></td>
              <td>埋込み MySQL サーバー</td>
            </tr><tr>
              <td><code class="literal">embedded-compat</code></td>
              <td>下位互換埋込み MySQL サーバー</td>
            </tr><tr>
              <td><code class="literal">embedded-devel</code></td>
              <td>埋込み MySQL 用のアプリケーションを開発するためのヘッダーおよびライブラリファイル</td>
            </tr><tr>
              <td><code class="literal">java</code></td>
              <td>ClusterJ アプリケーションのサポートに必要な JAR ファイル</td>
            </tr><tr>
              <td><code class="literal">libs</code></td>
              <td>MySQL クライアントライブラリ</td>
            </tr><tr>
              <td><code class="literal">libs-compat</code></td>
              <td>下位互換性のある MySQL クライアントライブラリ</td>
            </tr><tr>
              <td><code class="literal">management-server</code></td>
              <td>NDB Cluster 管理サーバー (<span class="command"><strong>ndb_mgmd</strong></span>)</td>
            </tr><tr>
              <td><code class="literal">memcached</code></td>
              <td><code class="literal">ndbmemcache</code> のサポートに必要なファイル</td>
            </tr><tr>
              <td><code class="literal">minimal-debuginfo</code></td>
              <td>パッケージ server-minimal のデバッグ情報。このパッケージを使用するアプリケーションを開発する場合、またはこのパッケージをデバッグする場合に役立ちます</td>
            </tr><tr>
              <td><code class="literal">ndbclient</code></td>
              <td>NDB API および MGM API アプリケーションを実行するための <code class="literal">NDB</code> クライアントライブラリ (<code class="literal">libndbclient</code>)</td>
            </tr><tr>
              <td><code class="literal">ndbclient-devel</code></td>
              <td>NDB API および MGM API アプリケーションの開発に必要なヘッダーおよびその他のファイル</td>
            </tr><tr>
              <td><code class="literal">nodejs</code></td>
              <td>NDB Cluster の Node.JS サポートの設定に必要なファイル</td>
            </tr><tr>
              <td><code class="literal">server</code></td>
              <td><code class="literal">NDB</code> ストレージエンジンサポートを含む MySQL サーバー (<span class="command"><strong>mysqld</strong></span>) と、関連する MySQL サーバープログラム</td>
            </tr><tr>
              <td><code class="literal">server-minimal</code></td>
              <td>NDB および関連ツール用の MySQL サーバーの最小インストール</td>
            </tr><tr>
              <td><code class="literal">test</code></td>
              <td><span class="command"><strong>mysqltest</strong></span>、その他の MySQL テストプログラムおよびサポートファイル</td>
            </tr></tbody></table></div></div><p><br class="table-break">
      </p><p>
        特定のプラットフォームおよびアーキテクチャーのすべての NDB Cluster RPM の単一バンドル (<code class="filename">.tar</code> ファイル) も使用できます。 このファイルの名前は、次に示すパターンに従います: 
      </p><pre class="programlisting">mysql-cluster-<em class="replaceable"><code>license</code></em>-<em class="replaceable"><code>ver</code></em>-<em class="replaceable"><code>rev</code></em>.<em class="replaceable"><code>distro</code></em>.<em class="replaceable"><code>arch</code></em>.rpm-bundle.tar
</pre><p>
        <span class="command"><strong>tar</strong></span> またはアーカイブの抽出に適したツールを使用して、このファイルから個々の RPM ファイルを抽出できます。
      </p><p>
        NDB Cluster ノードの 3 つの主要なタイプをインストールするために必要なコンポーネントを次のリストに示します:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <span class="emphasis"><em>管理ノード</em></span>: <code class="literal">management-server</code>
          </p></li><li class="listitem"><p>
            <span class="emphasis"><em>データノード</em></span>: <code class="literal">data-node</code>
          </p></li><li class="listitem"><p>
            <span class="emphasis"><em>SQL ノード</em></span>: <code class="literal">server</code> および <code class="literal">common</code>
          </p></li></ul></div><p>
        また、<code class="literal">client</code> RPM をインストールして、少なくとも 1 つの管理ノードに <span class="command"><strong>ndb_mgm</strong></span> 管理クライアントを提供する必要があります。 SQL ノードにインストールして、<span class="command"><strong>mysql</strong></span> およびその他の MySQL クライアントプログラムを使用可能にすることもできます。 ノードのインストールについては、このセクションの後半でタイプ別に説明します。 
      </p><p>
        <em class="replaceable"><code>ver</code></em> は、例で <code class="literal">8.0.22</code> として表示される 8.0. <em class="replaceable"><code>x</code></em> 形式の 3 部分の <code class="literal">NDB</code> ストレージエンジンのバージョン番号を表します。<code class="literal">rev</code> は <em class="replaceable"><code>major</code></em>.<em class="replaceable"><code>minor</code></em> 形式の RPM リビジョン番号を提供します。 このセクションの例では、この値に <code class="literal">1.1</code> を使用します。 
      </p><p>
        <em class="replaceable"><code>distro</code></em> (Linux ディストリビューション) は、<code class="literal">rhel5</code> (Oracle Linux 5, Red Hat Enterprise Linux 4 and 5)、<code class="literal">el6</code> (Oracle Linux 6, Red Hat Enterprise Linux 6)、<code class="literal">el7</code> (Oracle Linux 7, Red Hat Enterprise Linux 7) または <code class="literal">sles12</code> (SUSE Enterprise Linux 12) のいずれかです。 このセクションの例では、ホストで Oracle Linux 7、Red Hat Enterprise Linux 7 または同等 (<code class="literal">el7</code>) が実行されていることを前提としています。 
      </p><p>
        <em class="replaceable"><code>arch</code></em> は、32-bit RPM 用の <code class="literal">i686</code> および 64-bit バージョン用の <code class="literal">x86_64</code> です。 ここに示す例では、64 ビットプラットフォームを想定しています。 
      </p><p>
        RPM ファイル名 (ここでは <code class="literal">8.0.22</code> として示されています) の NDB Cluster のバージョン番号は、実際に使用しているバージョンによって異なる可能性があります。 <span class="emphasis"><em>インストールするすべてのクラスタ RPM のバージョン番号が同じになっていることが非常に重要です</em></span>。 アーキテクチャは RPM がインストールされるマシンにも適している必要があります。特に、64 ビット RPM (<code class="literal">x86_64</code>) は 32 ビットオペレーティングシステムでは使用できないことに注意してください (後者には <code class="literal">i686</code> を使用してください)。 
      </p><p><b>データノード. </b>
          NDB Cluster データノードをホストするコンピュータでは、<code class="literal">data-node</code> RPM のみをインストールする必要があります。 これを行うには、この RPM をデータノードホストにコピーし、システムの root ユーザーとして次のコマンドを実行し、必要に応じて RPM に表示される名前を MySQL web サイトからダウンロードした RPM の名前と一致するように置き換えます: 
        </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>rpm -Uhv mysql-cluster-community-data-node-8.0.22-1.el7.x86_64.rpm</code></strong>
</pre><p>
        これにより、<span class="command"><strong>ndbd</strong></span> および <span class="command"><strong>ndbmtd</strong></span> データノードのバイナリが<code class="filename">/usr/sbin</code> にインストールされます。 これらのいずれかを使用して、このホストでデータノードプロセスを実行できます。 
      </p><p><b>SQL ノード. </b>
          NDB Cluster SQL ノードのホストに使用する各マシンに <code class="literal">server</code> および <code class="literal">common</code> RPM をコピーします (<code class="literal">server</code> には <code class="literal">common</code> が必要です)。 システムルートユーザーとして次のコマンドを実行し、MySQL web サイトからダウンロードした RPM の名前と一致するように、必要に応じて RPM に表示される名前を置き換えて、<code class="literal">server</code> RPM をインストールします: 
        </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>rpm -Uhv mysql-cluster-community-server-8.0.22-1.el7.x86_64.rpm</code></strong>
</pre><p>
        これにより、<code class="literal">NDB</code> ストレージエンジンがサポートされた MySQL サーバーバイナリ (<span class="command"><strong>mysqld</strong></span>) が<code class="filename">/usr/sbin</code> ディレクトリにインストールされます。 また、必要なすべての MySQL Server サポートファイルと、<span class="command"><strong>mysql.server</strong></span> および <span class="command"><strong>mysqld_safe</strong></span> 起動スクリプトを含む有用な MySQL サーバープログラムもインストールされます (<code class="filename">/usr/share/mysql</code> および<code class="filename">/usr/bin</code> 内)。 RPM インストーラでは、一般的な構成の問題 (必要に応じて <code class="literal">mysql</code> ユーザーおよびグループを作成するなど) に自動的に対応します。 
      </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">重要</div><p>
          NDB Cluster 用にリリースされたこれらの RPM のバージョンを使用する必要があります。標準の MySQL サーバー用にリリースされた RPM は、<code class="literal">NDB</code> ストレージエンジンのサポートを提供しません。
        </p></div><p>
        SQL ノード (MySQL サーバー) を管理するには、ここに示すように <code class="literal">client</code> RPM もインストールするようにしてください。
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>rpm -Uhv mysql-cluster-community-client-8.0.22-1.el7.x86_64.rpm</code></strong>
</pre><p>
        これにより、<span class="command"><strong>mysql</strong></span> クライアントおよびその他の MySQL クライアントプログラム (<span class="command"><strong>mysqladmin</strong></span> や <span class="command"><strong>mysqldump</strong></span> など) が<code class="filename">/usr/bin</code> にインストールされます。
      </p><p><b>管理ノード. </b>
          NDB Cluster 管理サーバーをインストールするには、<code class="literal">management-server</code> RPM のみを使用する必要があります。 この RPM を管理ノードをホストするコンピュータにコピーし、システムルートユーザーとして次のコマンドを実行してインストールします (MySQL web サイトからダウンロードした <code class="literal">management-server</code> RPM の名前と一致するように、RPM に示されている名前を必要に応じて置き換えます): 
        </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>rpm -Uhv mysql-cluster-community-management-server-8.0.22-1.el7.x86_64.rpm</code></strong>
</pre><p>
        この RPM は、管理サーバーのバイナリ <span class="command"><strong>ndb_mgmd</strong></span> を<code class="filename">/usr/sbin</code> ディレクトリにインストールします。 これは管理ノードを実行するために実際に必要な唯一のプログラムですが、<span class="command"><strong>ndb_mgm</strong></span> NDB Cluster 管理クライアントも使用可能にすることをお勧めします。 前述のように <code class="literal">client</code> RPM をインストールすると、このプログラムおよび <span class="command"><strong>ndb_desc</strong></span> や <span class="command"><strong>ndb_config</strong></span> などの他の <code class="literal">NDB</code> クライアントプログラムを入手できます。 
      </p><p>
        オラクルが提供する RPM を使った MySQL のインストールに関する一般的な情報は、<a class="xref" href="installing.html#linux-installation-rpm" title="2.5.4 Oracle の RPM パッケージを使用した Linux への MySQL のインストール">セクション2.5.4「Oracle の RPM パッケージを使用した Linux への MySQL のインストール」</a>を参照してください。
      </p><p>
        RPM からインストールした後も、クラスタを構成する必要があります。関連情報は、<a class="xref" href="mysql-cluster.html#mysql-cluster-install-configuration" title="23.2.3 NDB Cluster の初期構成">セクション23.2.3「NDB Cluster の初期構成」</a> を参照してください。
      </p><p>
        <span class="emphasis"><em>インストールするすべてのクラスタ RPM のバージョン番号が同じになっていることが非常に重要です</em></span>。 <em class="replaceable"><code>architecture</code></em> の指定は、RPM をインストールするマシンにも適している必要があります。特に、64 ビット RPM は 32 ビットオペレーティングシステムでは使用できないことに注意してください。 
      </p><p><b>データノード. </b>
          クラスタのデータノードをホストするコンピュータには、<code class="literal">server</code> RPM のみをインストールする必要があります。 これを行うには、この RPM をデータノードホストにコピーし、システムの root ユーザーとして次のコマンドを実行し、必要に応じて RPM に表示される名前を MySQL web サイトからダウンロードした RPM の名前と一致するように置き換えます: 
        </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>rpm -Uhv MySQL-Cluster-server-gpl-8.0.22-1.sles11.i386.rpm</code></strong>
</pre><p>
        これにより、すべての NDB Cluster バイナリがインストールされますが、NDB Cluster データノードを実行するには、プログラム <span class="command"><strong>ndbd</strong></span> または <span class="command"><strong>ndbmtd</strong></span> (両方とも<code class="filename">/usr/sbin</code> 内) のみが実際に必要です。
      </p><p><b>SQL ノード. </b>
          クラスタ SQL ノードのホストに使用する各マシンで、システムルートユーザーとして次のコマンドを実行し、MySQL web サイトからダウンロードした RPM の名前と一致するように RPM に表示される名前を置き換えて、<code class="literal">server</code> RPM をインストールします:
        </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>rpm -Uhv MySQL-Cluster-server-gpl-8.0.22-1.sles11.i386.rpm</code></strong>
</pre><p>
        これにより、<code class="literal">NDB</code> ストレージエンジンのサポートを含む MySQL サーバーバイナリ (<span class="command"><strong>mysqld</strong></span>) と必要なすべての MySQL Server サポートファイルが <code class="filename">/usr/sbin</code> ディレクトリにインストールされます。 また、<span class="command"><strong>mysql.server</strong></span> および <span class="command"><strong>mysqld_safe</strong></span> 起動スクリプトも (それぞれ <code class="filename">/usr/share/mysql</code> および <code class="filename">/usr/bin</code> に) インストールされます。 RPM インストーラでは、一般的な構成の問題 (必要に応じて <code class="literal">mysql</code> ユーザーおよびグループを作成するなど) に自動的に対応します。 
      </p><p>
        SQL ノード (MySQL サーバー) を管理するには、ここに示すように <code class="literal">client</code> RPM もインストールするようにしてください。
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>rpm -Uhv MySQL-Cluster-client-gpl-8.0.22-1.sles11.i386.rpm</code></strong>
</pre><p>
        これにより、<span class="command"><strong>mysql</strong></span> クライアントプログラムがインストールされます。
      </p><p><b>管理ノード. </b>
          NDB Cluster 管理サーバーをインストールするには、<code class="literal">server</code> RPM のみを使用する必要があります。 この RPM を管理ノードをホストするコンピュータにコピーし、システムルートユーザーとして次のコマンドを実行してインストールします (MySQL web サイトからダウンロードした <code class="literal">server</code> RPM の名前と一致するように、RPM に示されている名前を必要に応じて置き換えます): 
        </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>rpm -Uhv MySQL-Cluster-server-gpl-8.0.22-1.sles11.i386.rpm</code></strong>
</pre><p>
        この RPM によってほかの多くのファイルがインストールされますが、管理ノードを実行するために実際に必要なのは管理サーバーバイナリ <span class="command"><strong>ndb_mgmd</strong></span> (<code class="filename">/usr/sbin</code> ディレクトリにあります) だけです。 <code class="literal">server</code> RPM によって、<code class="literal">NDB</code> の管理クライアントである <span class="command"><strong>ndb_mgm</strong></span> もインストールされます。 
      </p><p>
        オラクルが提供する RPM を使った MySQL のインストールに関する一般的な情報は、<a class="xref" href="installing.html#linux-installation-rpm" title="2.5.4 Oracle の RPM パッケージを使用した Linux への MySQL のインストール">セクション2.5.4「Oracle の RPM パッケージを使用した Linux への MySQL のインストール」</a>を参照してください。 必要なインストール後の構成の詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-install-configuration" title="23.2.3 NDB Cluster の初期構成">セクション23.2.3「NDB Cluster の初期構成」</a> を参照してください。 
      </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-install-debian"></a>23.2.1.3 .deb ファイルを使用した NDB Cluster のインストール</h4></div></div></div><a class="indexterm" name="idm45563236851856"></a><a class="indexterm" name="idm45563236849808"></a><a class="indexterm" name="idm45563236847712"></a><p>
        このセクションでは、この目的のために Oracle によって提供される <code class="filename">.deb</code> ファイルを使用して、NDB Cluster を Debian および関連する Linux ディストリビューション (Ubuntu) にインストールする方法について説明します。
      </p><p>
        Oracle は、Debian およびその他の配布用の NDB Cluster APT リポジトリも提供します。 手順および追加情報は、<a class="ulink" href="https://dev.mysql.com/doc/mysql-apt-repo-quick-guide/en/#repo-qg-apt-cluster-install" target="_top">「<em class="citetitle">APT リポジトリを使用した MySQL NDB Cluster のインストール</em>」</a>を参照してください。 
      </p><p>
        Oracle には、32 ビットおよび 64 ビットプラットフォーム用の NDB Cluster 用の <code class="filename">.deb</code> インストーラファイルが用意されています。 Debian ベースのシステムでは、単一のインストーラファイルのみが必要です。 このファイルには、適用可能な NDB Cluster バージョン、Debian バージョン、およびアーキテクチャーに従って、次に示すパターンを使用して名前が付けられます: 
      </p><pre class="programlisting">mysql-cluster-gpl-<em class="replaceable"><code>ndbver</code></em>-debian<em class="replaceable"><code>debianver</code></em>-<em class="replaceable"><code>arch</code></em>.deb
</pre><p>
        ここで、<em class="replaceable"><code>ndbver</code></em> は 3 部分の <code class="literal">NDB</code> エンジンのバージョン番号、<em class="replaceable"><code>debianver</code></em> は Debian (<code class="literal">8</code> または <code class="literal">9</code>) のメジャーバージョン、<em class="replaceable"><code>arch</code></em> は <code class="literal">i686</code> または <code class="literal">x86_64</code> のいずれかです。 次の例では、NDB 8.0.22 を 64 ビット Debian 9 システムにインストールすることを前提としています。この場合、インストーラファイルの名前は <code class="filename">mysql-cluster-gpl-8.0.22-debian9-x86_64.deb-bundle.tar</code> です。 
      </p><p>
        適切な <code class="filename">.deb</code> ファイルをダウンロードしたら、解凍し、次のように <code class="literal">dpkg</code> を使用してコマンドラインからインストールできます:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>dpkg -i mysql-cluster-gpl-8.0.22-debian9-i686.deb</code></strong>
</pre><p>
        次に示すように、<code class="literal">dpkg</code> を使用して削除することもできます:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>dpkg -r mysql</code></strong>
</pre><p>
        インストーラファイルは、Gnome デスクトップ用の <code class="literal">GDebi</code> など、<code class="filename">.deb</code> ファイルを操作するほとんどのグラフィカルパッケージマネージャとも互換性がある必要があります。
      </p><p>
        <code class="filename">.deb</code> ファイルは NDB Cluster を<code class="filename">/opt/mysql/server-<em class="replaceable"><code>version</code></em>/</code>の下にインストールします。ここで、<em class="replaceable"><code>version</code></em> は含まれている MySQL サーバーの 2 部分リリースシリーズバージョンです。 NDB 8.0 の場合、これは常に <code class="literal">5.7</code> です。 ディレクトリレイアウトは、一般的な Linux バイナリ配布 (<a class="xref" href="installing.html#binary-installation-layout" title="表 2.3 一般的な Unix/Linux バイナリパッケージの MySQL インストールのレイアウト">表2.3「一般的な Unix/Linux バイナリパッケージの MySQL インストールのレイアウト」</a> を参照) の場合と同じですが、起動スクリプトおよび構成ファイルが <code class="filename">share</code> ではなく <code class="filename">support-files</code> にある点が異なります。 <span class="command"><strong>ndb_mgm</strong></span>、<span class="command"><strong>ndbd</strong></span>、<span class="command"><strong>ndb_mgmd</strong></span> などの NDB Cluster 実行可能ファイルはすべて、<code class="filename">bin</code> ディレクトリに配置されます。 
      </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-install-linux-source"></a>23.2.1.4 Linux でのソースからの NDB Cluster の構築</h4></div></div></div><a class="indexterm" name="idm45563236811248"></a><a class="indexterm" name="idm45563236809040"></a><p>
        このセクションでは、Linux およびその他の Unix に似たプラットフォームで NDB Cluster をコンパイルする方法について説明します。 ソースから NDB Cluster を構築することは、ここで説明するいくつかの重要な点で異なりますが、標準の MySQL Server を構築することに似ています。 ソースからの MySQL のビルドに関する一般的な情報は、<a class="xref" href="installing.html#source-installation" title="2.9 ソースから MySQL をインストールする">セクション2.9「ソースから MySQL をインストールする」</a>を参照してください。 Windows プラットフォームで NDB Cluster をコンパイルする方法については、<a class="xref" href="mysql-cluster.html#mysql-cluster-install-windows-source" title="23.2.2.2 Windows でのソースからの NDB Cluster のコンパイルとインストール">セクション23.2.2.2「Windows でのソースからの NDB Cluster のコンパイルとインストール」</a> を参照してください。 
      </p><p>
        MySQL NDB Cluster 8.0 を構築するには、MySQL Server 8.0 ソースを使用する必要があります。 これらは、<a class="ulink" href="https://dev.mysql.com/downloads/" target="_top">https://dev.mysql.com/downloads/</a> の MySQL ダウンロードページから入手できます。 アーカイブされたソースファイルには、<code class="filename">mysql-8.0.22.tar.gz</code> と同様の名前を付ける必要があります。 <a class="ulink" href="https://github.com/mysql/mysql-server" target="_top">https://github.com/mysql/mysql-server</a> の GitHub からソースを取得することもできます。 
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
          以前のバージョンでは、標準 MySQL Server ソースからの NDB Cluster の構築はサポートされていませんでした。 MySQL 8.0 および NDB Cluster 8.0 では、これは<span class="emphasis"><em>両方の製品が同じソースから構築されました</em></span>ではなくなりました。 
        </p></div><p>
        <span class="command"><strong>CMake</strong></span> の <code class="option">WITH_NDBCLUSTER</code> オプションを使用すると、管理ノード、データノード、およびその他の NDB Cluster プログラムのバイナリが構築されます。また、<span class="command"><strong>mysqld</strong></span> は <code class="literal">NDB</code> ストレージエンジンをサポートしてコンパイルされます。 NDB Cluster を構築するときは、このオプション (またはそのエイリアス <code class="option">WITH_NDBCLUSTER_STORAGE_ENGINE</code> と <code class="option">WITH_PLUGIN_NDBCLUSTER</code> のいずれか) が必要です。 
      </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">重要</div><p>
          <code class="option">WITH_NDB_JAVA</code> オプションはデフォルトで有効になっています。 つまり、デフォルトでは <span class="command"><strong>CMake</strong></span> でシステム上の Java の場所が見つからなかった場合に構成プロセスが失敗します。Java および ClusterJ のサポートを有効にしない場合は、<code class="option">-DWITH_NDB_JAVA=OFF</code> を使用してビルドを構成することで、これを明示的に示す必要があります。 必要な場合は、<code class="option">WITH_CLASSPATH</code> を使用して Java クラスパスを指定します。 
        </p></div><p>
        NDB Cluster の構築に固有の <span class="command"><strong>CMake</strong></span> オプションの詳細は、<a class="link" href="installing.html#cmake-mysql-cluster-options" title="NDB Cluster をコンパイルするための CMake オプション">Options for Compiling NDB Cluster</a> を参照してください。
      </p><p>
        <span class="command"><strong>make &amp;&amp; make install</strong></span> (または使用しているシステムの同等のコマンド) を実行すると、同じ場所に事前コンパイル済みバイナリを解凍した場合と同じ結果が得られます。
      </p><p><b>管理ノード. </b>
          ソースからビルドしてデフォルトの <span class="command"><strong>make install</strong></span> を実行すると、管理サーバーと管理クライアントのバイナリ (<span class="command"><strong>ndb_mgmd</strong></span> と <span class="command"><strong>ndb_mgm</strong></span>) が <code class="filename">/usr/local/mysql/bin</code> に見つかります。 管理ノードホストに配置する必要があるのは <span class="command"><strong>ndb_mgmd</strong></span> だけですが、同じホストマシンに <span class="command"><strong>ndb_mgm</strong></span> も配置することをお勧めします。 これらの実行可能ファイルは、どちらもホストマシンのファイルシステム上の特定の場所に配置する必要はありません。 
        </p><p><b>データノード. </b>
          データノードホストに配置する必要がある実行可能ファイルは、データノードバイナリ <span class="command"><strong>ndbd</strong></span> または <span class="command"><strong>ndbmtd</strong></span> だけです。(たとえば、<span class="command"><strong>mysqld</strong></span> をホストマシンに配置する必要はありません。) ソースからビルドすると、デフォルトではこのファイルは <code class="filename">/usr/local/mysql/bin</code> ディレクトリに配置されます。 複数のデータノードホストにインストールする場合、ほかのマシンにコピーする必要があるのは <span class="command"><strong>ndbd</strong></span> または <span class="command"><strong>ndbmtd</strong></span> だけです。 (これは、すべてのデータノードホストで同じアーキテクチャーとオペレーティングシステムが使用されていることが前提です。そうでない場合は、異なるプラットフォームごとに別個にコンパイルする必要がある可能性があります。) データノードバイナリは、その場所が既知であるかぎり、ホストのファイルシステム上の特定の場所に配置する必要はありません。 
        </p><p>
        NDB Cluster をソースからコンパイルする場合、マルチスレッドデータノードバイナリを構築するための特別なオプションは必要ありません。 <code class="literal">NDB</code> ストレージエンジンのサポート付きでビルドを構成すると、自動的に <span class="command"><strong>ndbmtd</strong></span> がビルドされます。<span class="command"><strong>make install</strong></span> を実行すると、<span class="command"><strong>ndbmtd</strong></span> バイナリは <span class="command"><strong>mysqld</strong></span>、<span class="command"><strong>ndbd</strong></span>、および <span class="command"><strong>ndb_mgm</strong></span> とともにインストールの <code class="filename">bin</code> ディレクトリに配置されます。 
      </p><p><b>SQL ノード. </b>
          クラスタリングのサポート付きで MySQL をコンパイルし、デフォルトのインストールを実行 (システムの <code class="literal">root</code> ユーザーとして <span class="command"><strong>make install</strong></span> を使用) すると、<span class="command"><strong>mysqld</strong></span> は <code class="filename">/usr/local/mysql/bin</code> に配置されます。 <a class="xref" href="installing.html#source-installation" title="2.9 ソースから MySQL をインストールする">セクション2.9「ソースから MySQL をインストールする」</a>に示したステップに従って、<span class="command"><strong>mysqld</strong></span> を使用できるようにします。 複数の SQL ノードを実行する場合は、同じ <span class="command"><strong>mysqld</strong></span> 実行可能ファイルと関連するサポートファイルのコピーを複数のマシンで使用できます。 これを実行するもっとも簡単な方法は、<code class="filename">/usr/local/mysql</code> ディレクトリ全体およびその内部に含まれているすべてのディレクトリとファイルをほかの SQL ノードホストにコピーし、各マシンで<a class="xref" href="installing.html#source-installation" title="2.9 ソースから MySQL をインストールする">セクション2.9「ソースから MySQL をインストールする」</a>のステップを繰り返すことです。 デフォルトではない <code class="option">PREFIX</code> オプションを指定してビルドを構成する場合は、それに合わせてディレクトリを調整する必要があります。 
        </p><p>
        <a class="xref" href="mysql-cluster.html#mysql-cluster-install-configuration" title="23.2.3 NDB Cluster の初期構成">セクション23.2.3「NDB Cluster の初期構成」</a> では、NDB Cluster の例のすべてのノードの構成ファイルを作成します。
      </p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-cluster-install-windows"></a>23.2.2 Windows への NDB Cluster のインストール</h3></div></div></div><div class="toc"><dl class="toc"><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-install-windows-binary">23.2.2.1 バイナリリリースから Windows への NDB Cluster のインストール</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-install-windows-source">23.2.2.2 Windows でのソースからの NDB Cluster のコンパイルとインストール</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-install-windows-initial-start">23.2.2.3 Windows での NDB Cluster の初期起動</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-install-windows-service">23.2.2.4 NDB Cluster プロセスを Windows サービスとしてインストール</a></span></dt></dl></div><a class="indexterm" name="idm45563236752768"></a><a class="indexterm" name="idm45563236750720"></a><p>
      このセクションでは、Windows ホストでの NDB Cluster のインストール手順について説明します。 Windows 用の NDB Cluster 8.0 バイナリは、<a class="ulink" href="https://dev.mysql.com/downloads/cluster/" target="_top">https://dev.mysql.com/downloads/cluster/</a> から取得できます。 Oracle が提供するバイナリリリースから Windows に NDB Cluster をインストールする方法については、<a class="xref" href="mysql-cluster.html#mysql-cluster-install-windows-binary" title="23.2.2.1 バイナリリリースから Windows への NDB Cluster のインストール">セクション23.2.2.1「バイナリリリースから Windows への NDB Cluster のインストール」</a> を参照してください。 
    </p><p>
      Microsoft Visual Studio を使用して、Windows 上のソースから NDB Cluster をコンパイルおよびインストールすることもできます。 詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-install-windows-source" title="23.2.2.2 Windows でのソースからの NDB Cluster のコンパイルとインストール">セクション23.2.2.2「Windows でのソースからの NDB Cluster のコンパイルとインストール」</a>を参照してください。 
    </p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-install-windows-binary"></a>23.2.2.1 バイナリリリースから Windows への NDB Cluster のインストール</h4></div></div></div><a class="indexterm" name="idm45563236743328"></a><a class="indexterm" name="idm45563236741104"></a><p>
        このセクションでは、次のテーブルに示すように、このセクション (<a class="xref" href="mysql-cluster.html#mysql-cluster-installation" title="23.2 NDB Cluster のインストール">セクション23.2「NDB Cluster のインストール」</a> を参照) の最初に説明したものと同じ 4 ノード設定を使用して、Oracle で提供されるバイナリ <span class="quote">「<span class="quote">no-install</span>」</span> NDB Cluster リリースを使用した Windows への NDB Cluster の基本的なインストールについて説明します:
      </p><div class="table"><a name="idm45563236735952"></a><p class="title"><b>表 23.7 クラスタ例のノードのネットワークアドレス</b></p><div class="table-contents"><table><col style="width: 50%"><col style="width: 50%"><thead><tr>
            <th>ノード</th>
            <th>IP アドレス</th>
          </tr></thead><tbody><tr>
            <td>管理ノード (<span class="command"><strong>mgmd</strong></span>)</td>
            <td>198.51.100.10</td>
          </tr><tr>
            <td>SQL ノード (<span class="command"><strong>mysqld</strong></span>)</td>
            <td>198.51.100.20</td>
          </tr><tr>
            <td>データノード "A" (<span class="command"><strong>ndbd</strong></span>)</td>
            <td>198.51.100.30</td>
          </tr><tr>
            <td>データノード "B" (<span class="command"><strong>ndbd</strong></span>)</td>
            <td>198.51.100.40</td>
          </tr></tbody></table></div></div><br class="table-break"><p>
        ほかのプラットフォームと同様に、SQL ノードを実行している NDB Cluster ホストコンピュータには、MySQL Server バイナリ (<span class="command"><strong>mysqld.exe</strong></span>) がインストールされている必要があります。 このホストには MySQL クライアント (<span class="command"><strong>mysql.exe</strong></span>) も配置するようにしてください。 管理ノードおよびデータノードに MySQL Server バイナリをインストールする必要はありません。各管理サーバーには、管理サーバーデーモン (<span class="command"><strong>ndb_mgmd.exe</strong></span>) が必要です。各データノードには、データノードデーモン (<span class="command"><strong>ndbd.exe</strong></span> または <span class="command"><strong>ndbmtd.exe</strong></span>) が必要です。 この例では、<span class="command"><strong>ndbd.exe</strong></span> をデータノード実行可能ファイルと呼びますが、このプログラムのマルチスレッドバージョンである <span class="command"><strong>ndbmtd.exe</strong></span> をまったく同じ方法でインストールできます。 管理サーバーホストには、管理クライアント (<span class="command"><strong>ndb_mgm.exe</strong></span>) もインストールするようにしてください。 このセクションでは、NDB Cluster ノードのタイプごとに正しい Windows バイナリをインストールするために必要な手順について説明します。 
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
          ほかの Windows プログラムと同様に、NDB Cluster 実行可能ファイルには <code class="filename">.exe</code> ファイル拡張子が付けられます。 ただし、コマンド行からこれらのプログラムを起動するときに <code class="filename">.exe</code> 拡張子を含める必要はありません。 そのため、このドキュメントでは多くの場合、これらのプログラムを <span class="command"><strong>mysqld</strong></span>、<span class="command"><strong>mysql</strong></span>、<span class="command"><strong>ndb_mgmd</strong></span> などと呼びます。 ここでは、(たとえば) <span class="command"><strong>mysqld</strong></span> と <span class="command"><strong>mysqld.exe</strong></span> のどちらの呼び方であっても、どちらの名前も同じもの (MySQL Server プログラム) を意味しています。 
        </p></div><p>
        Oracle <code class="literal">no-install</code> バイナリを使用して NDB Cluster を設定する場合、インストールプロセスの最初のステップは、<a class="ulink" href="https://dev.mysql.com/downloads/cluster/" target="_top">https://dev.mysql.com/downloads/cluster/</a> から最新の NDB Cluster Windows ZIP バイナリアーカイブをダウンロードすることです。 このアーカイブには <code class="filename">mysql-cluster-gpl-<em class="replaceable"><code>ver</code></em>-win<em class="replaceable"><code>arch</code></em>.zip</code> のファイル名があり、<em class="replaceable"><code>ver</code></em> は <code class="literal">NDB</code> ストレージエンジンのバージョン (<code class="literal">8.0.22</code> など)、<em class="replaceable"><code>arch</code></em> はアーキテクチャー (32 ビットバイナリの場合は <code class="literal">32</code>、64 ビットバイナリの場合は <code class="literal">64</code>) です。 たとえば、64 ビット Windows システム用 NDB Cluster 8.0.22 アーカイブの名前は <code class="filename">mysql-cluster-gpl-8.0.22-win64.zip</code> です。 
      </p><p>
        32 ビット NDB Cluster バイナリは、32 ビットバージョンと 64 ビットバージョンの両方の Windows で実行できますが、64 ビット NDB Cluster バイナリは 64 ビットバージョンの Windows でのみ使用できます。 64 ビット CPU を搭載したコンピュータで 32 ビットバージョンの Windows を使用している場合は、32 ビット NDB Cluster バイナリを使用する必要があります。 
      </p><p>
        インターネットからダウンロードしたりマシン間でコピーしたりする必要があるファイルの数を最小限に抑えるため、ここでは SQL ノードを実行するコンピュータから始めます。
      </p><p><b>SQL ノード. </b>
          198.51.100.20 という IP アドレスを持つコンピュータ上のディレクトリ <code class="filename">C:\Documents and Settings\<em class="replaceable"><code>username</code></em>\My Documents\Downloads</code> にアーカイブのコピーが配置されていることを前提としています。ここで、<em class="replaceable"><code>username</code></em> は現在のユーザーの名前です。 (この名前は、コマンド行で <code class="literal">ECHO %USERNAME%</code> を使用すると表示されます。) NDB Cluster 実行可能ファイルを Windows サービスとしてインストールして実行するには、このユーザーが <code class="literal">Administrators</code> グループのメンバーである必要があります。 
        </p><p>
        アーカイブからすべてのファイルを抽出します。 このタスクには、Windows Explorer に組み込まれた抽出ウィザードが適しています。 (別のアーカイブプログラムを使用する場合は、アーカイブからすべてのファイルとディレクトリが抽出されたこと、アーカイブのディレクトリ構造が維持されていることを確認してください。) 宛先ディレクトリを要求されたら、<code class="filename">C:\</code>と入力します。これにより、抽出ウィザードによってアーカイブが <code class="filename">C:\mysql-cluster-gpl-<em class="replaceable"><code>ver</code></em>-win<em class="replaceable"><code>arch</code></em></code> ディレクトリに抽出されます。 このディレクトリの名前を <code class="filename">C:\mysql</code> に変更します。 
      </p><p>
        NDB Cluster バイナリは <code class="filename">C:\mysql\bin</code> 以外のディレクトリにインストールできますが、インストールする場合は、この手順に示すパスを適宜変更する必要があります。 特に、MySQL Server (SQL ノード) バイナリを <code class="filename">C:\mysql</code> または <code class="filename">C:\Program Files\MySQL\MySQL Server 8.0</code> 以外の場所にインストールした場合や、SQL ノードのデータディレクトリが <code class="filename">C:\mysql\data</code> または <code class="filename">C:\Program Files\MySQL\MySQL Server 8.0\data</code> 以外の場所にある場合は、SQL ノードの起動時に、追加の構成オプションをコマンド行で使用するか、<code class="filename">my.ini</code> または <code class="filename">my.cnf</code> ファイルに追加する必要があります。 標準以外の場所で実行するように MySQL Server を構成する方法の詳細は、<a class="xref" href="installing.html#windows-install-archive" title="2.3.4 noinstall ZIP アーカイブを使用した Microsoft Windows への MySQL のインストール">セクション2.3.4「<code class="literal">noinstall</code> ZIP アーカイブを使用した Microsoft Windows への MySQL のインストール」</a>を参照してください。 
      </p><p>
        NDB Cluster をサポートする MySQL Server を NDB Cluster の一部として実行するには、<code class="option">--ndbcluster</code> および <code class="option">--ndb-connectstring</code> オプションを指定して起動する必要があります。 これらのオプションは、コマンド行で指定することもできますが、通常はオプションファイルに設定する方が便利です。 そのためには、メモ帳などのテキストエディタで新しいテキストファイルを作成します。 このファイルに次の構成情報を入力します。 
      </p><pre class="programlisting">[mysqld]
# Options for mysqld process:
ndbcluster                       # run NDB storage engine
ndb-connectstring=198.51.100.10  # location of management server
</pre><p>
        この MySQL Server が使用するほかのオプション (<a class="xref" href="installing.html#windows-create-option-file" title="2.3.4.2 オプションファイルの作成">セクション2.3.4.2「オプションファイルの作成」</a>を参照してください) を必要に応じて追加できますが、このファイルには少なくともここに示したオプションを含める必要があります。 このファイルを <code class="filename">C:\mysql\my.ini</code> として保存します。 これで、SQL ノードのインストールとセットアップが完了します。 
      </p><p><b>データノード. </b>
          Windows ホスト上の NDB Cluster データノードには、<span class="command"><strong>ndbd.exe</strong></span> または <span class="command"><strong>ndbmtd.exe</strong></span> のいずれかの単一の実行可能ファイルのみが必要です。 この例では、<span class="command"><strong>ndbd.exe</strong></span> を使用すると仮定しますが、<span class="command"><strong>ndbmtd.exe</strong></span> を使用するときも同じ手順が適用されます。 データノードを実行する各コンピュータ (IP アドレスが 198.51.100.30 および 198.51.100.40 のコンピュータ) で、<code class="filename">C:\mysql</code>、<code class="filename">C:\mysql\bin</code>、および <code class="filename">C:\mysql\cluster-data</code> の各ディレクトリを作成します。次に、<code class="literal">no-install</code> アーカイブをダウンロードして抽出したコンピュータで、<code class="filename">C:\mysql\bin</code> ディレクトリ内の <code class="filename">ndbd.exe</code> を見つけます。 このファイルを 2 台のデータノードホストの <code class="filename">C:\mysql\bin</code> ディレクトリにそれぞれコピーします。 
        </p><p>
        NDB Cluster の一部として機能するには、各データノードに管理サーバーのアドレスまたはホスト名を指定する必要があります。 この情報を指定するには、各データノードプロセスの起動時にコマンド行で <code class="option">--ndb-connectstring</code> または <code class="option">-c</code> オプションを使用します。 ただし、通常はオプションファイルにこの情報を指定することをお勧めします。 そのためには、メモ帳などのテキストエディタで新しいテキストファイルを作成して、次のテキストを入力します。 
      </p><pre class="programlisting">[mysql_cluster]
# Options for data node process:
ndb-connectstring=198.51.100.10  # location of management server
</pre><p>
        このファイルをデータノードホストに <code class="filename">C:\mysql\my.ini</code> として保存します。 もう一方のデータノードホストで同じ内容を含むテキストファイルをもう 1 つ作成し、それを <code class="filename">C:mysql\my.ini</code> として保存するか、my.ini ファイルを 1 つ目のデータノードホストから 2 つ目のデータノードホストにコピーし、そのコピーを 2 つ目のデータノードの <code class="filename">C:\mysql</code> ディレクトリに確実に配置します。 両方のデータノードホストを NDB Cluster で使用する準備ができました。これにより、インストールおよび構成する管理ノードのみが残されます。 
      </p><p><b>管理ノード. </b>
          NDB Cluster 管理ノードのホストに使用されるコンピュータで必要な実行可能プログラムは、管理サーバープログラム <span class="command"><strong>ndb_mgmd.exe</strong></span> だけです。 ただし、NDB Cluster を起動したあとで管理するには、NDB Cluster 管理クライアントプログラム <span class="command"><strong>ndb_mgm.exe</strong></span> も管理サーバーと同じマシンにインストールするようにしてください。 <code class="literal">no-install</code> アーカイブをダウンロードして抽出したマシンで、これら 2 つのプログラムを見つけます。これは、SQL ノードホストの <code class="filename">C:\mysql\bin</code> ディレクトリになります。 IP アドレスが 198.51.100.10 であるコンピュータに <code class="filename">C:\mysql\bin</code> ディレクトリを作成し、両方のプログラムをこのディレクトリにコピーします。 
        </p><p>
        ここで、<code class="filename">ndb_mgmd.exe</code> が使用する 2 つの構成ファイルを作成してください。
      </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
            管理ノード自体に固有の構成データを提供するローカル構成ファイル。 通常、このファイルは NDB Cluster グローバル構成ファイルの場所を指定するだけで済みます (項目 2 を参照)。 
          </p><p>
            このファイルを作成するには、メモ帳などのテキストエディタで新しいテキストファイルを作成し、次の情報を入力します。
          </p><pre class="programlisting">[mysql_cluster]
# Options for management node process
config-file=C:/mysql/bin/config.ini
</pre><p>
            このファイルをテキストファイル <code class="filename">C:\mysql\bin\my.ini</code> として保存します。
          </p></li><li class="listitem"><p>
            NDB Cluster 全体を管理する構成情報を管理ノードが取得できるグローバル構成ファイル。 少なくとも、このファイルには NDB Cluster 内の各ノードのセクションと、管理ノードおよびすべてのデータノードの IP アドレスまたはホスト名 (<code class="literal">HostName</code> 構成パラメータ) が含まれている必要があります。 また、次の追加情報も含めることをお勧めします。 
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                SQL ノードの IP アドレスまたはホスト名
              </p></li><li class="listitem"><p>
                各データノードに割り当てられたデータメモリーおよびインデックスメモリー (<code class="literal">DataMemory</code> および <code class="literal">IndexMemory</code> 構成パラメータ)
              </p></li><li class="listitem"><p>
                <code class="literal">NoOfReplicas</code> 構成パラメータを使用したフラグメントレプリカの数 (<a class="xref" href="mysql-cluster.html#mysql-cluster-nodes-groups" title="23.1.2 NDB Cluster ノード、ノードグループ、フラグメントレプリカ、およびパーティション">セクション23.1.2「NDB Cluster ノード、ノードグループ、フラグメントレプリカ、およびパーティション」</a> を参照)
              </p></li><li class="listitem"><p>
                各データノードがデータおよびログファイルを格納するディレクトリと、管理ノードがログファイルを保持するディレクトリ (どちらの場合も、<code class="literal">DataDir</code> 構成パラメータ)
              </p></li></ul></div><p>
            メモ帳などのテキストエディタを使用して新しいテキストファイルを作成し、次の情報を入力します。
          </p><pre class="programlisting">[ndbd default]
# Options affecting ndbd processes on all data nodes:
NoOfReplicas=2                      # Number of fragment replicas
DataDir=C:/mysql/cluster-data       # Directory for each data node's data files
                                    # Forward slashes used in directory path,
                                    # rather than backslashes. This is correct;
                                    # see <span class="bold"><strong>Important</strong></span> note in text
DataMemory=80M    # Memory allocated to data storage
IndexMemory=18M   # Memory allocated to index storage
                  # For DataMemory and IndexMemory, we have used the
                  # default values. Since the "world" database takes up
                  # only about 500KB, this should be more than enough for
                  # this example Cluster setup.

[ndb_mgmd]
# Management process options:
HostName=198.51.100.10              # Hostname or IP address of management node
DataDir=C:/mysql/bin/cluster-logs   # Directory for management node log files

[ndbd]
# Options for data node "A":
                                # (one [ndbd] section per data node)
HostName=198.51.100.30          # Hostname or IP address

[ndbd]
# Options for data node "B":
HostName=198.51.100.40          # Hostname or IP address

[mysqld]
# SQL node options:
HostName=198.51.100.20          # Hostname or IP address
</pre><p>
            このファイルをテキストファイル <code class="filename">C:\mysql\bin\config.ini</code> として保存します。
          </p></li></ol></div><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">重要</div><p>
          Windows 上の NDB Cluster で使用されるプログラムオプションまたは構成ファイルでディレクトリパスを指定する場合、単一のバックスラッシュ文字 (<code class="literal">\</code>) は使用できません。 代わりに、個々のバックスラッシュ文字を 2 つ目のバックスラッシュ (<code class="literal">\\</code>) でエスケープするか、バックスラッシュをスラッシュ文字 (<code class="literal">/</code>) に置き換えてください。 たとえば、NDB Cluster <code class="filename">config.ini</code> ファイルの<code class="literal">[ndb_mgmd]</code>セクションからの次の行は機能しません: 
        </p><pre class="programlisting">DataDir=C:\mysql\bin\cluster-logs
</pre><p>
          代わりに、次のいずれかを使用できます。
        </p><pre class="programlisting">DataDir=C:\\mysql\\bin\\cluster-logs  # Escaped backslashes
</pre><pre class="programlisting">DataDir=C:/mysql/bin/cluster-logs     # Forward slashes
</pre><p>
          簡潔さと読みやすさの理由から、NDB Cluster プログラムのオプションおよび Windows の構成ファイルで使用されるディレクトリパスにはスラッシュを使用することをお勧めします。
        </p></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-install-windows-source"></a>23.2.2.2 Windows でのソースからの NDB Cluster のコンパイルとインストール</h4></div></div></div><a class="indexterm" name="idm45563236611472"></a><a class="indexterm" name="idm45563236609296"></a><p>
        Oracle には、ほとんどのユーザーに適したプリコンパイル済み NDB Cluster バイナリが Windows 用に用意されています。 ただし、必要に応じて、NDB Cluster for Windows をソースコードからコンパイルすることもできます。 これを実行する手順は、標準の Windows 用 MySQL Server バイナリをコンパイルする場合の手順とほぼ同じであり、同じツールを使用します。 ただし、2 つの大きな違いがあります。 
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            MySQL NDB Cluster 8.0 を構築するには、MySQL Server 8.0 ソースを使用する必要があります。 これらは、<a class="ulink" href="https://dev.mysql.com/downloads/" target="_top">https://dev.mysql.com/downloads/</a> の MySQL ダウンロードページから入手できます。 アーカイブされたソースファイルには、<code class="filename">mysql-8.0.22.tar.gz</code> と同様の名前を付ける必要があります。 <a class="ulink" href="https://github.com/mysql/mysql-server" target="_top">https://github.com/mysql/mysql-server</a> の GitHub からソースを取得することもできます。 
          </p></li><li class="listitem"><p>
            <span class="command"><strong>CMake</strong></span> で使用するその他のビルドオプションに加えて、<code class="option">WITH_NDBCLUSTER</code> オプションを使用してビルドを構成する必要があります。 <code class="option">WITH_NDBCLUSTER_STORAGE_ENGINE</code> および <code class="option">WITH_PLUGIN_NDBCLUSTER</code> は、<code class="option">WITH_NDBCLUSTER</code> のエイリアスとしてサポートされており、まったく同じ方法で動作します。 
          </p></li></ul></div><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">重要</div><p>
          <code class="option">WITH_NDB_JAVA</code> オプションはデフォルトで有効になっています。 つまり、デフォルトでは <span class="command"><strong>CMake</strong></span> でシステム上の Java の場所が見つからなかった場合に構成プロセスが失敗します。Java および ClusterJ のサポートを有効にしない場合は、<code class="option">-DWITH_NDB_JAVA=OFF</code> を使用してビルドを構成することで、これを明示的に示す必要があります。 (Bug #12379735) 必要な場合は、<code class="option">WITH_CLASSPATH</code> を使用して Java クラスパスを指定します。 
        </p></div><p>
        NDB Cluster の構築に固有の <span class="command"><strong>CMake</strong></span> オプションの詳細は、<a class="link" href="installing.html#cmake-mysql-cluster-options" title="NDB Cluster をコンパイルするための CMake オプション">Options for Compiling NDB Cluster</a> を参照してください。
      </p><p>
        ビルドプロセスが完了したら、コンパイルされたバイナリを含む Zip アーカイブを作成できます。Windows システムでこのタスクを実行するのに必要なコマンドについては、<a class="xref" href="installing.html#installing-source-distribution" title="2.9.4 標準ソース配布を使用して MySQL をインストールする">セクション2.9.4「標準ソース配布を使用して MySQL をインストールする」</a>を参照してください。 NDB Cluster バイナリは、生成されるアーカイブの <code class="filename">bin</code> ディレクトリにあり、これは <code class="literal">no-install</code> アーカイブと同等であり、同じ方法でインストールおよび構成できます。 詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-install-windows-binary" title="23.2.2.1 バイナリリリースから Windows への NDB Cluster のインストール">セクション23.2.2.1「バイナリリリースから Windows への NDB Cluster のインストール」</a>を参照してください。 
      </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-install-windows-initial-start"></a>23.2.2.3 Windows での NDB Cluster の初期起動</h4></div></div></div><a class="indexterm" name="idm45563236585664"></a><p>
        NDB Cluster の実行可能ファイルと必要な構成ファイルが配置されたら、クラスタ内のすべてのノードで NDB Cluster の実行可能ファイルを起動するだけで、クラスタの初期起動を実行できます。 各クラスタノードプロセスは、それが配置されているホストコンピュータ上で別個に起動する必要があります。 最初に管理ノード、次にデータノード、最後に SQL ノードを起動するようにしてください。 
      </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
            管理ノードホストでは、コマンド行から次のコマンドを発行して管理ノードプロセスを起動します。 ここに示すような出力が表示されます。 
          </p><pre class="programlisting">C:\mysql\bin&gt; <strong class="userinput"><code>ndb_mgmd</code></strong>
2010-06-23 07:53:34 [MgmtSrvr] INFO -- NDB Cluster Management Server. mysql-8.0.23-ndb-8.0.23
2010-06-23 07:53:34 [MgmtSrvr] INFO -- Reading cluster configuration from 'config.ini'
</pre><p>
            管理ノードプロセスは、ロギング出力をコンソールに出力し続けます。 管理ノードは Windows サービスとして実行されていないため、これは正常な動作です。 (Linux などの Unix に似たプラットフォームで NDB Cluster を使用している場合、Windows でのこの点での管理ノードのデフォルト動作は、Unix システムでのその動作とは逆であり、デフォルトでは Unix デーモンプロセスとして実行されます。 この動作は、Windows で実行されている NDB Cluster データノードプロセスにも当てはまります。) このため、<span class="command"><strong>ndb_mgmd.exe</strong></span> が実行されているウィンドウを閉じないでください。閉じると、管理ノードプロセスが強制終了されます。 (NDB Cluster プロセスを Windows サービスとしてインストールおよび実行する方法については、<a class="xref" href="mysql-cluster.html#mysql-cluster-install-windows-service" title="23.2.2.4 NDB Cluster プロセスを Windows サービスとしてインストール">セクション23.2.2.4「NDB Cluster プロセスを Windows サービスとしてインストール」</a> を参照してください。) 
          </p><p>
            必須の <code class="option">-f</code> オプションで、管理ノードにグローバル構成ファイル (<code class="filename">config.ini</code>) がある場所を指示します。 このオプションの長形式は <code class="option">--config-file</code> です。 
          </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">重要</div><p>
              NDB Cluster 管理ノードは、<code class="filename">config.ini</code> から読み取る構成データをキャッシュします。構成キャッシュを作成すると、ほかの方法を強制しないかぎり、後続の起動時に <code class="filename">config.ini</code> ファイルを無視します。 つまり、このファイル内のエラーが原因で管理ノードが起動に失敗した場合は、エラーを修正してから、管理ノードに <code class="filename">config.ini</code> を再度読み取らせる必要があります。 これを行うには、コマンド行で <code class="option">--reload</code> または <code class="option">--initial</code> オプションを指定して <span class="command"><strong>ndb_mgmd.exe</strong></span> を起動します。 これらのオプションは、どちらも構成キャッシュをリフレッシュする機能を持っています。 
            </p><p>
              管理ノードの <code class="filename">my.ini</code> ファイルでこれらのオプションのいずれかを使用することは、必要ないか、または推奨されません。
            </p></div><p>
            <span class="command"><strong>ndb_mgmd</strong></span> で使用できるオプションに関する追加情報は、<a class="xref" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="23.4.4 ndb_mgmd — NDB Cluster 管理サーバーデーモン">セクション23.4.4「ndb_mgmd — NDB Cluster 管理サーバーデーモン」</a>および<a class="xref" href="mysql-cluster.html#mysql-cluster-program-options-common" title="23.4.32 NDB Cluster プログラムに共通のオプション — NDB Cluster プログラムに共通のオプション">セクション23.4.32「NDB Cluster プログラムに共通のオプション — NDB Cluster プログラムに共通のオプション」</a>を参照してください。
          </p></li><li class="listitem"><p>
            各データノードホストで、ここに示すコマンドを実行してデータノードプロセスを起動します。
          </p><pre class="programlisting">C:\mysql\bin&gt; <strong class="userinput"><code>ndbd</code></strong>
2010-06-23 07:53:46 [ndbd] INFO -- Configuration fetched from 'localhost:1186', generation: 1
</pre><p>
            いずれの場合も、データノードプロセスによって生成される出力の最初の行は前の例で示したものと似ていますが、そのあとにロギング出力の行が追加されます。 管理ノードと同様に、データノードは Windows サービスとして実行されていないため、これは正常な動作です。 このため、データノードプロセスが実行されているコンソールウィンドウを閉じないでください。閉じると、<span class="command"><strong>ndbd.exe</strong></span> が強制終了されます。 (詳細は<a class="xref" href="mysql-cluster.html#mysql-cluster-install-windows-service" title="23.2.2.4 NDB Cluster プロセスを Windows サービスとしてインストール">セクション23.2.2.4「NDB Cluster プロセスを Windows サービスとしてインストール」</a>を参照してください。) 
          </p></li><li class="listitem"><p>
            SQL ノードをまだ起動しないでください。データノードの起動 (しばらく時間がかかることがあります) が完了するまでは、SQL ノードをクラスタに接続できません。 代わりに、管理ノードホスト上の新しいコンソールウィンドウで、NDB Cluster 管理クライアント <span class="command"><strong>ndb_mgm.exe</strong></span> を起動します。これは、管理ノードホスト上の <code class="filename">C:\mysql\bin</code> 内にあるはずです。 (<span class="keycap"><strong>CTRL</strong></span>+<span class="keycap"><strong>C</strong></span> を入力して <span class="command"><strong>ndb_mgmd.exe</strong></span> が実行されているコンソールウィンドウを再利用しないでください。これを行うと管理ノードが強制終了されます。) 生成される出力は次のようになります。 
          </p><pre class="programlisting">C:\mysql\bin&gt; <strong class="userinput"><code>ndb_mgm</code></strong>
-- NDB Cluster -- Management Client --
ndb_mgm&gt;
</pre><p>
            <code class="literal">ndb_mgm&gt;</code> というプロンプトが表示されたら、これは管理クライアントが NDB Cluster 管理コマンドを受信する準備ができていることを示します。 管理クライアントのプロンプトで <code class="literal">ALL STATUS</code> と入力すると、データノードの起動時のステータスを確認できます。 このコマンドによって、データノードの起動シーケンスのレポートが実行され、次のように表示されます。 
          </p><pre class="programlisting">ndb_mgm&gt; <strong class="userinput"><code>ALL STATUS</code></strong>
Connected to Management Server at: localhost:1186
Node 2: starting (Last completed phase 3) (mysql-8.0.23-ndb-8.0.23)
Node 3: starting (Last completed phase 3) (mysql-8.0.23-ndb-8.0.23)

Node 2: starting (Last completed phase 4) (mysql-8.0.23-ndb-8.0.23)
Node 3: starting (Last completed phase 4) (mysql-8.0.23-ndb-8.0.23)

Node 2: Started (version 8.0.23)
Node 3: Started (version 8.0.23)

ndb_mgm&gt;
</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
              管理クライアントで発行されるコマンドでは大文字と小文字が区別されません。ここでは、コマンドの標準形式として大文字を使用しますが、<span class="command"><strong>ndb_mgm</strong></span> クライアントに入力するときに、この表記法に従う必要はありません。 詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-mgm-client-commands" title="23.5.1 NDB Cluster 管理クライアントのコマンド">セクション23.5.1「NDB Cluster 管理クライアントのコマンド」</a>を参照してください。 
            </p></div><p>
            <code class="literal">ALL STATUS</code> によって生成される出力は、データノードの起動速度、使用している NDB Cluster ソフトウェアのリリースバージョン番号、およびその他の要因に応じて、ここに表示される内容とは異なる可能性があります。 重要なのは、両方のデータノードの起動を確認したときに、SQL ノードの起動準備が整うことです。 
          </p><p>
            <span class="command"><strong>ndb_mgm.exe</strong></span> を実行したままにできます。NDB Cluster のパフォーマンスに悪影響はなく、次の手順でこれを使用して、SQL ノードが起動後にクラスタに接続されていることを確認します。
          </p></li><li class="listitem"><p>
            SQL ノードホストとして指定されたコンピュータで、コンソールウィンドウを開き、NDB Cluster バイナリを展開したディレクトリに移動します (この例に従っている場合は、<code class="filename">C:\mysql\bin</code> です)。
          </p><p>
            SQL ノードを起動するには、ここに示すように、コマンド行で <span class="command"><strong>mysqld.exe</strong></span> を起動します。
          </p><pre class="programlisting">C:\mysql\bin&gt; <strong class="userinput"><code>mysqld --console</code></strong>
</pre><p>
            <code class="option">--console</code> オプションによって、コンソールにロギング情報が書き込まれます。これは問題が発生したときに役立つことがあります。 (SQL ノードが問題なく実行されていることを確認できたら、SQL ノードを停止してから <code class="option">--console</code> オプションを指定せずに起動すると、ロギングが通常どおり実行されるようになります。) 
          </p><p>
            管理ノードホストの管理クライアント (<span class="command"><strong>ndb_mgm.exe</strong></span>) が実行されているコンソールウィンドウで、<code class="literal">SHOW</code> コマンドを入力します。ここに示すような出力が生成されます。
          </p><pre class="programlisting">ndb_mgm&gt; <strong class="userinput"><code>SHOW</code></strong>
Connected to Management Server at: localhost:1186
Cluster Configuration
---------------------
[ndbd(NDB)]     2 node(s)
id=2    @198.51.100.30  (Version: 8.0.23-ndb-8.0.23, Nodegroup: 0, *)
id=3    @198.51.100.40  (Version: 8.0.23-ndb-8.0.23, Nodegroup: 0)

[ndb_mgmd(MGM)] 1 node(s)
id=1    @198.51.100.10  (Version: 8.0.23-ndb-8.0.23)

[mysqld(API)]   1 node(s)
id=4    @198.51.100.20  (Version: 8.0.23-ndb-8.0.23)
</pre><p>
            <code class="literal">SHOW ENGINE NDB STATUS</code> ステートメントを使用して、SQL ノードが <span class="command"><strong>mysql</strong></span> クライアント (<span class="command"><strong>mysql.exe</strong></span>) の NDB Cluster に接続されていることを確認することもできます。
          </p></li></ol></div><p>
        NDB Cluster の <code class="literal">NDBCLUSTER</code> ストレージエンジンを使用してデータベースオブジェクトおよびデータを操作する準備ができました。 詳細と例については、<a class="xref" href="mysql-cluster.html#mysql-cluster-install-example-data" title="23.2.5 テーブルとデータを含む NDB Cluster の例">セクション23.2.5「テーブルとデータを含む NDB Cluster の例」</a>を参照してください。 
      </p><p>
        <span class="command"><strong>ndb_mgmd.exe</strong></span>、<span class="command"><strong>ndbd.exe</strong></span>、および <span class="command"><strong>ndbmtd.exe</strong></span> を Windows サービスとしてインストールすることもできます。 これを行う方法については、<a class="xref" href="mysql-cluster.html#mysql-cluster-install-windows-service" title="23.2.2.4 NDB Cluster プロセスを Windows サービスとしてインストール">セクション23.2.2.4「NDB Cluster プロセスを Windows サービスとしてインストール」</a>を参照してください)。 
      </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-install-windows-service"></a>23.2.2.4 NDB Cluster プロセスを Windows サービスとしてインストール</h4></div></div></div><p>
        NDB Cluster が必要に応じて実行されていることを確認したら、管理ノードとデータノードを Windows サービスとしてインストールして、Windows が起動または停止されるたびにこれらのプロセスが自動的に起動および停止されるようにできます。 これにより、適切な <span class="command"><strong>SC START</strong></span> および <span class="command"><strong>SC STOP</strong></span> コマンドを使用してコマンドラインから、または Windows グラフィカル <span class="command"><strong>Services</strong></span> ユーティリティを使用して、これらのプロセスを制御することもできます。 <span class="command"><strong>NET START</strong></span> および <span class="command"><strong>NET STOP</strong></span> コマンドも使用できます。 
      </p><p>
        プログラムを Windows サービスとしてインストールする場合は、通常、システム上の Administrator 権利を持つアカウントを使用する必要があります。
      </p><p>
        管理ノードを Windows 上のサービスとしてインストールするには、ここに示すように、管理ノードをホストするマシンのコマンド行で <code class="option">--install</code> オプションを使用して <span class="command"><strong>ndb_mgmd.exe</strong></span> を起動します。
      </p><pre class="programlisting">C:\&gt; <strong class="userinput"><code>C:\mysql\bin\ndb_mgmd.exe --install</code></strong>
Installing service 'NDB Cluster Management Server'
  as '"C:\mysql\bin\ndbd.exe" "--service=ndb_mgmd"'
Service successfully installed.
</pre><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">重要</div><p>
          NDB Cluster プログラムを Windows サービスとしてインストールする場合は、常に完全なパスを指定するようにしてください。そうしないと、サービスのインストールがエラー<span class="errortext">「指定されたファイルが見つかりません」</span>で失敗する可能性があります。
        </p></div><p>
        <code class="option">--install</code> オプションは、<span class="command"><strong>ndb_mgmd.exe</strong></span> に指定できるほかのオプションより先に使用する必要があります。 ただし、このようなオプションはオプションファイルに指定することをお勧めします。 オプションファイルが <span class="command"><strong>ndb_mgmd.exe</strong></span> <code class="option">--help</code> の出力に示されるデフォルトの場所のいずれにも存在しない場合は、<code class="option">--config-file</code> オプションを使用するとその場所を指定できます。 
      </p><p>
        これで、このように管理サーバーを起動および停止できるようになります。
      </p><pre class="programlisting">C:\&gt; <strong class="userinput"><code>SC START ndb_mgmd</code></strong>

C:\&gt; <strong class="userinput"><code>SC STOP ndb_mgmd</code></strong>
</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
          <span class="command"><strong>NET</strong></span> コマンドを使用する場合は、次に示すように、わかりやすい名前を使用して Windows サービスとして管理サーバーを起動または停止することもできます:
        </p><pre class="programlisting">C:\&gt; <strong class="userinput"><code>NET START 'NDB Cluster Management Server'</code></strong>
The NDB Cluster Management Server service is starting.
The NDB Cluster Management Server service was started successfully.

C:\&gt; <strong class="userinput"><code>NET STOP  'NDB Cluster Management Server'</code></strong>
The NDB Cluster Management Server service is stopping..
The NDB Cluster Management Server service was stopped successfully.
</pre></div><p>
        通常は、短いサービス名を指定するか、サービスのインストール時にデフォルトのサービス名を使用できるようにしてから、サービスの起動または停止時にその名前を参照する方が簡単です。 <code class="literal">ndb_mgmd</code> 以外のサービス名を指定するには、この例に示すように <code class="option">--install</code> オプションを追加します。 
      </p><pre class="programlisting">C:\&gt; <strong class="userinput"><code>C:\mysql\bin\ndb_mgmd.exe --install=mgmd1</code></strong>
Installing service 'NDB Cluster Management Server'
  as '"C:\mysql\bin\ndb_mgmd.exe" "--service=mgmd1"'
Service successfully installed.
</pre><p>
        これで、このように指定した名前を使用してサービスを起動または停止できるようになります。
      </p><pre class="programlisting">C:\&gt; <strong class="userinput"><code>SC START mgmd1</code></strong>

C:\&gt; <strong class="userinput"><code>SC STOP mgmd1</code></strong>
</pre><p>
        管理ノードサービスを削除するには、<span class="command"><strong>SC DELETE <em class="replaceable"><code>service_name</code></em></strong></span> を使用します:
      </p><pre class="programlisting">C:\&gt; <strong class="userinput"><code>SC DELETE mgmd1</code></strong>
</pre><p>
        または、次に示すように、<code class="option">--remove</code> オプションを指定して <span class="command"><strong>ndb_mgmd.exe</strong></span> を起動します:
      </p><pre class="programlisting">C:\&gt; <strong class="userinput"><code>C:\mysql\bin\ndb_mgmd.exe --remove</code></strong>
Removing service 'NDB Cluster Management Server'
Service successfully removed.
</pre><p>
        デフォルト以外のサービス名を使用してサービスをインストールした場合は、次のように、<span class="command"><strong>ndb_mgmd.exe</strong></span> <code class="option">--remove</code> オプションの値としてサービス名を渡します:
      </p><pre class="programlisting">C:\&gt; <strong class="userinput"><code>C:\mysql\bin\ndb_mgmd.exe --remove=mgmd1</code></strong>
Removing service 'mgmd1'
Service successfully removed.
</pre><p>
        NDB Cluster データノードプロセスの Windows サービスとしてのインストールは、次に示すように、<span class="command"><strong>ndbd.exe</strong></span> (または <span class="command"><strong>ndbmtd.exe</strong></span>) の <code class="option">--install</code> オプションを使用して同様の方法で実行できます:
      </p><pre class="programlisting">C:\&gt; <strong class="userinput"><code>C:\mysql\bin\ndbd.exe --install</code></strong>
Installing service 'NDB Cluster Data Node Daemon' as '"C:\mysql\bin\ndbd.exe" "--service=ndbd"'
Service successfully installed.
</pre><p>
        これで、次の例に示すように、データノードを起動または停止できます:
      </p><pre class="programlisting">C:\&gt; <strong class="userinput"><code>SC START ndbd</code></strong>

C:\&gt; <strong class="userinput"><code>SC STOP ndbd</code></strong>
</pre><p>
        データノードサービスを削除するには、<span class="command"><strong>SC DELETE <em class="replaceable"><code>service_name</code></em></strong></span> を使用します:
      </p><pre class="programlisting">C:\&gt; <strong class="userinput"><code>SC DELETE ndbd</code></strong>
</pre><p>
        または、次に示すように、<code class="option">--remove</code> オプションを指定して <span class="command"><strong>ndbd.exe</strong></span> を起動します:
      </p><pre class="programlisting">C:\&gt; <strong class="userinput"><code>C:\mysql\bin\ndbd.exe --remove</code></strong>
Removing service 'NDB Cluster Data Node Daemon'
Service successfully removed.
</pre><p>
        <span class="command"><strong>ndb_mgmd.exe</strong></span> (および <span class="command"><strong>mysqld.exe</strong></span>) と同様に、<span class="command"><strong>ndbd.exe</strong></span> を Windows サービスとしてインストールするときは、このようにサービスの名前を <code class="option">--install</code> の値として指定し、サービスの起動または停止時にそれを使用することもできます。
      </p><pre class="programlisting">C:\&gt; <strong class="userinput"><code>C:\mysql\bin\ndbd.exe --install=dnode1</code></strong>
Installing service 'dnode1' as '"C:\mysql\bin\ndbd.exe" "--service=dnode1"'
Service successfully installed.

C:\&gt; <strong class="userinput"><code>SC START dnode1</code></strong>

C:\&gt; <strong class="userinput"><code>SC STOP dnode1</code></strong>
</pre><p>
        データノードサービスのインストール時にサービス名を指定した場合は、次に示すように、この名前を削除するときにも使用できます:
      </p><pre class="programlisting">C:\&gt; <strong class="userinput"><code>SC DELETE dnode1</code></strong>
</pre><p>
        または、次に示すように、<code class="filename">ndbd.exe</code> <code class="option">--remove</code> オプションの値としてサービス名を渡すこともできます:
      </p><pre class="programlisting">C:\&gt; <strong class="userinput"><code>C:\mysql\bin\ndbd.exe --remove=dnode1</code></strong>
Removing service 'dnode1'
Service successfully removed.
</pre><p>
        SQL ノードの Windows サービスとしてのインストール、サービスの起動、サービスの停止およびサービスの削除は、<span class="command"><strong>mysqld</strong></span> <code class="option">--install</code>、<span class="command"><strong>SC START</strong></span>、<span class="command"><strong>SC STOP</strong></span>、<span class="command"><strong>SC DELETE</strong></span>(または <span class="command"><strong>mysqld</strong></span> <code class="option">--remove</code>) を使用して同様の方法で実行されます。 <span class="command"><strong>NET</strong></span> コマンドを使用して、サービスを起動または停止することもできます。 追加情報については、<a class="xref" href="installing.html#windows-start-service" title="2.3.4.8 Windows のサービスとして MySQL を起動する">セクション2.3.4.8「Windows のサービスとして MySQL を起動する」</a>を参照してください。 
      </p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-cluster-install-configuration"></a>23.2.3 NDB Cluster の初期構成</h3></div></div></div><a class="indexterm" name="idm45563236434272"></a><a class="indexterm" name="idm45563236432192"></a><a class="indexterm" name="idm45563236430528"></a><p>
      このセクションでは、構成ファイルを作成および編集して、インストールされた NDB Cluster の手動構成について説明します。
    </p><p>
      NDB Cluster には、別のアプリケーションでテキストファイルを編集しなくても構成を実行するために使用できる GUI インストーラも用意されています。 詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-installer" title="23.2.8 NDB Cluster Auto-Installer (サポートされなくなりました)">セクション23.2.8「NDB Cluster Auto-Installer (サポートされなくなりました)」</a>を参照してください。 
    </p><p>
      4 ノードの 4 ホスト NDB Cluster (<a class="xref" href="mysql-cluster.html#mysql-cluster-install-nodes-hosts" title="クラスタノードとホストコンピュータ">クラスタノードとホストコンピュータ</a> を参照) の場合、4 つの構成ファイルをノードホストごとに 1 つずつ書き込む必要があります。
    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          個々のデータノードまたは SQL ノードには <code class="filename">my.cnf</code> ファイルが必要です。このファイルは、管理ノードが配置されたノードを指定する<span class="firstterm">接続文字列</span>と、このホスト (データノードをホストしているマシン) の MySQL サーバーに対して <code class="literal">NDBCLUSTER</code> ストレージエンジンを有効にするように指示する行の 2 つの情報を提供します。
        </p><p>
          接続文字列の詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-connection-strings" title="23.3.3.3 NDB Cluster 接続文字列">セクション23.3.3.3「NDB Cluster 接続文字列」</a>を参照してください。
        </p></li><li class="listitem"><p>
          管理ノードには、保持するフラグメントレプリカの数、各データノードのデータおよびインデックスに割り当てるメモリー量、データノードの場所、各データノードのディスクへのデータの保存場所および SQL ノードの検索場所を示す <code class="filename">config.ini</code> ファイルが必要です。
        </p></li></ul></div><p><b>データノードと SQL ノードの構成. </b>
        データノードに必要な <code class="filename">my.cnf</code> ファイルはかなり単純です。 この構成ファイルは、<code class="filename">/etc</code> ディレクトリに配置され、任意のテキストエディタを使用して編集できます。 (このファイルが存在しない場合は作成してください。) 例: 
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>vi /etc/my.cnf</code></strong>
</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
        ここでは、<span class="command"><strong>vi</strong></span> を使用してこのファイルを作成しますが、どのテキストエディタでも同じように機能します。
      </p></div><p>
      このセットアップ例の各データノードおよび SQL ノードでは、<code class="filename">my.cnf</code> はこのようになります。
    </p><pre class="programlisting">[mysqld]
# Options for mysqld process:
ndbcluster                      # run NDB storage engine

[mysql_cluster]
# Options for NDB Cluster processes:
ndb-connectstring=198.51.100.10  # location of management server
</pre><p>
      上記の情報を入力したら、このファイルを保存してテキストエディタを終了します。 これを、データノード <span class="quote">「<span class="quote">A</span>」</span>、データノード<span class="quote">「<span class="quote">B</span>」</span>、および SQL ノードをホストしているマシンで実行します。 
    </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">重要</div><p>
        上記の <code class="filename">my.cnf</code> ファイルの <code class="literal">[mysqld]</code> および <code class="literal">[mysql_cluster]</code> セクションの <code class="literal">ndbcluster</code> および <code class="literal">ndb-connectstring</code> パラメータを使用して <span class="command"><strong>mysqld</strong></span> プロセスを起動したあとは、クラスタが実際に起動しないと、<code class="literal">CREATE TABLE</code> または <code class="literal">ALTER TABLE</code> ステートメントを実行できません。 そうしないと、これらのステートメントはエラーで失敗します。 これは意図的なものです。 
      </p></div><p><b>管理ノードの構成. </b>
        管理ノードの構成では、最初のステップとして構成ファイルを配置するディレクトリを作成し、その後構成ファイル自体を作成します。 例 (<code class="literal">root</code> として実行します): 
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>mkdir /var/lib/mysql-cluster</code></strong>
shell&gt; <strong class="userinput"><code>cd /var/lib/mysql-cluster</code></strong>
shell&gt; <strong class="userinput"><code>vi config.ini</code></strong>
</pre><p>
      ここで使用する典型的なセットアップでは、<code class="filename">config.ini</code> ファイルは次のようになります。
    </p><pre class="programlisting">[ndbd default]
# Options affecting ndbd processes on all data nodes:
NoOfReplicas=2    # Number of fragment replicas
DataMemory=98M    # How much memory to allocate for data storage

[ndb_mgmd]
# Management process options:
HostName=198.51.100.10          # Hostname or IP address of management node
DataDir=/var/lib/mysql-cluster  # Directory for management node log files

[ndbd]
# Options for data node "A":
                                # (one [ndbd] section per data node)
HostName=198.51.100.30          # Hostname or IP address
NodeId=2                        # Node ID for this data node
DataDir=/usr/local/mysql/data   # Directory for this data node's data files

[ndbd]
# Options for data node "B":
HostName=198.51.100.40          # Hostname or IP address
NodeId=3                        # Node ID for this data node
DataDir=/usr/local/mysql/data   # Directory for this data node's data files

[mysqld]
# SQL node options:
HostName=198.51.100.20          # Hostname or IP address
                                # (additional mysqld connections can be
                                # specified for this node for various
                                # purposes such as running ndb_restore)
</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
        <code class="literal">world</code> データベースは、<a class="ulink" href="https://dev.mysql.com/doc/index-other.html" target="_top">https://dev.mysql.com/doc/index-other.html</a> からダウンロードできます。
      </p></div><p>
      すべての構成ファイルを作成し、最小限のオプションを指定したら、クラスタの起動とすべてのプロセスの実行確認に進む準備が整います。 これを行う方法については、<a class="xref" href="mysql-cluster.html#mysql-cluster-install-first-start" title="23.2.4 NDB Cluster の初期起動">セクション23.2.4「NDB Cluster の初期起動」</a>で説明します。 
    </p><p>
      使用可能な NDB Cluster 構成パラメータとその使用方法の詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-config-file" title="23.3.3 NDB Cluster 構成ファイル">セクション23.3.3「NDB Cluster 構成ファイル」</a> および <a class="xref" href="mysql-cluster.html#mysql-cluster-configuration" title="23.3 NDB Cluster の構成">セクション23.3「NDB Cluster の構成」</a> を参照してください。 バックアップの作成に関連する NDB Cluster の構成については、<a class="xref" href="mysql-cluster.html#mysql-cluster-backup-configuration" title="23.5.8.3 NDB Cluster バックアップの構成">セクション23.5.8.3「NDB Cluster バックアップの構成」</a> を参照してください。 
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
        クラスタ管理ノードのデフォルトポートは 1186 です。データノードのデフォルトポートは 2202 です。 ただし、クラスタではすでに開放されているポートからデータノードのポートを自動的に割り当てることができます。 
      </p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-cluster-install-first-start"></a>23.2.4 NDB Cluster の初期起動</h3></div></div></div><a class="indexterm" name="idm45563236380448"></a><p>
      構成後のクラスタを起動することは、それほど難しいことではありません。 各クラスタノードプロセスは、配置されているホストで別個に起動する必要があります。 最初に管理ノード、次にデータノード、最後に SQL ノードを起動してください。 
    </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
          管理ホストで、システムシェルから次のコマンドを発行して管理ノードプロセスを起動します。
        </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>ndb_mgmd -f /var/lib/mysql-cluster/config.ini</code></strong>
</pre><p>
          <span class="command"><strong>ndb_mgmd</strong></span> をはじめて起動するときは、<code class="option">-f</code> または <code class="option">--config-file</code> オプションを使用してその構成ファイルの場所を指定する必要があります。 (詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="23.4.4 ndb_mgmd — NDB Cluster 管理サーバーデーモン">セクション23.4.4「ndb_mgmd — NDB Cluster 管理サーバーデーモン」</a>を参照してください。) 
        </p><p>
          <span class="command"><strong>ndb_mgmd</strong></span> で使用できる追加のオプションについては、<a class="xref" href="mysql-cluster.html#mysql-cluster-program-options-common" title="23.4.32 NDB Cluster プログラムに共通のオプション — NDB Cluster プログラムに共通のオプション">セクション23.4.32「NDB Cluster プログラムに共通のオプション — NDB Cluster プログラムに共通のオプション」</a>を参照してください。
        </p></li><li class="listitem"><p>
          個々のデータノードホストで、このコマンドを実行して <span class="command"><strong>ndbd</strong></span> プロセスを起動します。
        </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>ndbd</code></strong>
</pre></li><li class="listitem"><p>
          SQL ノードを配置するクラスタホストで RPM ファイルを使用して MySQL をインストールした場合は、付属の起動スクリプトを使用して SQL ノードの MySQL サーバープロセスを起動できます (起動するようにしてください)。
        </p></li></ol></div><a class="indexterm" name="idm45563236364032"></a><a class="indexterm" name="idm45563236362256"></a><p>
      すべてが順調に進み、クラスタが正しくセットアップされると、クラスタは使用できる状態になります。 これをテストするには、<span class="command"><strong>ndb_mgm</strong></span> 管理ノードクライアントを起動します。 ここに示すような出力が表示されますが、使用している MySQL の特定のバージョンによって出力内容がやや異なる場合があります。 
    </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>ndb_mgm</code></strong>
-- NDB Cluster -- Management Client --
ndb_mgm&gt; <strong class="userinput"><code>SHOW</code></strong>
Connected to Management Server at: localhost:1186
Cluster Configuration
---------------------
[ndbd(NDB)]     2 node(s)
id=2    @198.51.100.30  (Version: 8.0.23-ndb-8.0.23, Nodegroup: 0, *)
id=3    @198.51.100.40  (Version: 8.0.23-ndb-8.0.23, Nodegroup: 0)

[ndb_mgmd(MGM)] 1 node(s)
id=1    @198.51.100.10  (Version: 8.0.23-ndb-8.0.23)

[mysqld(API)]   1 node(s)
id=4    @198.51.100.20  (Version: 8.0.23-ndb-8.0.23)
</pre><p>
      ここでは、SQL ノードは<code class="literal">[mysqld(API)]</code>として参照されます。これは、<span class="command"><strong>mysqld</strong></span> プロセスが NDB Cluster API ノードとして機能しているという事実を反映しています。
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
        <code class="literal">SHOW</code> の出力で特定の NDB Cluster SQL またはその他の API ノードに表示される IP アドレスは、どの管理ノードにも接続せずに、SQL または API ノードがクラスタデータノードに接続するために使用するアドレスです。
      </p></div><p>
      NDB Cluster 内のデータベース、テーブル、およびデータを操作する準備ができました。 簡単な説明については、<a class="xref" href="mysql-cluster.html#mysql-cluster-install-example-data" title="23.2.5 テーブルとデータを含む NDB Cluster の例">セクション23.2.5「テーブルとデータを含む NDB Cluster の例」</a>を参照してください。 
    </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-cluster-install-example-data"></a>23.2.5 テーブルとデータを含む NDB Cluster の例</h3></div></div></div><a class="indexterm" name="idm45563236348688"></a><a class="indexterm" name="idm45563236346544"></a><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
        このセクションの情報は、Unix プラットフォームと Windows プラットフォームの両方で実行されている NDB Cluster に適用されます。
      </p></div><p>
      NDB Cluster でのデータベーステーブルおよびデータの操作は、標準の MySQL での作業とほとんど異なりません。 留意すべき重要なポイントが 2 つあります。 
    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          クラスタ内でレプリケートされるテーブルでは、<code class="literal">NDBCLUSTER</code> ストレージエンジンを使用する必要があります。 これを指定するには、テーブルの作成時に <code class="literal">ENGINE=NDBCLUSTER</code> または <code class="literal">ENGINE=NDB</code> オプションを使用します。 
        </p><pre class="programlisting">CREATE TABLE <em class="replaceable"><code>tbl_name</code></em> (<em class="replaceable"><code>col_name</code></em> <em class="replaceable"><code>column_definitions</code></em>) ENGINE=NDBCLUSTER;
</pre><p>
          または、異なるストレージエンジンを使用する既存のテーブルに対して <code class="literal">ALTER TABLE</code> を使用して、<code class="literal">NDBCLUSTER</code> を使用するようにテーブルを変更します。
        </p><pre class="programlisting">ALTER TABLE <em class="replaceable"><code>tbl_name</code></em> ENGINE=NDBCLUSTER;
</pre></li><li class="listitem"><p>
          すべての <code class="literal">NDBCLUSTER</code> テーブルには主キーがあります。 テーブルの作成時にユーザーが主キーを定義しなかった場合は、<code class="literal">NDBCLUSTER</code> ストレージエンジンが隠し主キーを自動的に生成します。 このようなキーは、ほかのテーブルインデックスと同じサイズの領域を占有します。 (これらの自動的に作成されるインデックスを格納する十分なメモリーがないために問題が発生することは、珍しくありません。) 
        </p></li></ul></div><p>
      <span class="command"><strong>mysqldump</strong></span> の出力を使用して既存のデータベースからテーブルをインポートする場合は、SQL スクリプトをテキストエディタで開いて、テーブル作成ステートメントに <code class="literal">ENGINE</code> オプションを追加するか、既存の <code class="literal">ENGINE</code> オプションを置き換えることができます。 NDB Cluster をサポートしていない別の MySQL サーバーに <code class="literal">world</code> サンプルデータベースがあり、<code class="literal">City</code> テーブルをエクスポートするとします: 
    </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>mysqldump --add-drop-table world City &gt; city_table.sql</code></strong>
</pre><p>
      結果の <code class="filename">city_table.sql</code> ファイルには、次のテーブル作成ステートメント (およびテーブルデータのインポートに必要な <code class="literal">INSERT</code> ステートメント) が含まれます:
    </p><pre class="programlisting">DROP TABLE IF EXISTS `City`;
CREATE TABLE `City` (
  `ID` int(11) NOT NULL auto_increment,
  `Name` char(35) NOT NULL default '',
  `CountryCode` char(3) NOT NULL default '',
  `District` char(20) NOT NULL default '',
  `Population` int(11) NOT NULL default '0',
  PRIMARY KEY  (`ID`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1;

INSERT INTO `City` VALUES (1,'Kabul','AFG','Kabol',1780000);
INSERT INTO `City` VALUES (2,'Qandahar','AFG','Qandahar',237500);
INSERT INTO `City` VALUES (3,'Herat','AFG','Herat',186800);
<em class="replaceable"><code>(remaining INSERT statements omitted)</code></em>
</pre><p>
      MySQL がこのテーブルに対して <code class="literal">NDBCLUSTER</code> ストレージエンジンを使用するか確認する必要があります。 これを行うには 2 つの方法があります。 1 つは、テーブル定義をクラスタデータベースにインポートする<span class="emphasis"><em>前に</em></span>変更することです。 例として <code class="literal">City</code> テーブルを使用し、定義の <code class="literal">ENGINE</code> オプションを次のように変更します。 
    </p><pre class="programlisting">DROP TABLE IF EXISTS `City`;
CREATE TABLE `City` (
  `ID` int(11) NOT NULL auto_increment,
  `Name` char(35) NOT NULL default '',
  `CountryCode` char(3) NOT NULL default '',
  `District` char(20) NOT NULL default '',
  `Population` int(11) NOT NULL default '0',
  PRIMARY KEY  (`ID`)
) <span class="bold"><strong>ENGINE=NDBCLUSTER</strong></span> DEFAULT CHARSET=latin1;

INSERT INTO `City` VALUES (1,'Kabul','AFG','Kabol',1780000);
INSERT INTO `City` VALUES (2,'Qandahar','AFG','Qandahar',237500);
INSERT INTO `City` VALUES (3,'Herat','AFG','Herat',186800);
<em class="replaceable"><code>(remaining INSERT statements omitted)</code></em>
</pre><p>
      クラスタ化されたデータベースの一部になる個々のテーブルの定義で、これを行う必要があります。 これを行うもっとも簡単な方法は、定義を含むファイルに対して検索置換を実行し、<code class="literal">TYPE=<em class="replaceable"><code>engine_name</code></em></code> または <code class="literal">ENGINE=<em class="replaceable"><code>engine_name</code></em></code> のすべてのインスタンスを <code class="literal">ENGINE=NDBCLUSTER</code> に置換することです。 ファイルを変更したくない場合は、変更していないファイルを使用してテーブルを作成してから、<code class="literal">ALTER TABLE</code> を使用してストレージエンジンを変更します。 詳細はこのセクションで後述します。 
    </p><p>
      クラスタの SQL ノードで <code class="literal">world</code> という名前のデータベースがすでに作成されていることを前提に、<span class="command"><strong>mysql</strong></span> コマンド行クライアントを使用して <code class="filename">city_table.sql</code> を読み取り、対応するテーブルを通常の方法で作成して移入します。
    </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>mysql world &lt; city_table.sql</code></strong>
</pre><p>
      非常に重要な留意点として、前述のコマンドは SQL ノードを実行しているホスト (この場合は、IP アドレスが <code class="literal">198.51.100.20</code> のマシン) で実行する必要があります。
    </p><p>
      SQL ノード上に <code class="literal">world</code> データベース全体のコピーを作成するには、非クラスタサーバー上の <span class="command"><strong>mysqldump</strong></span> を使用して、<code class="filename">world.sql</code> という名前のファイル (<code class="filename">/tmp</code> ディレクトリなど) にデータベースをエクスポートします。 次に、前述のとおりにテーブル定義を変更し、このようにファイルをクラスタの SQL ノードにインポートします。 
    </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>mysql world &lt; /tmp/world.sql</code></strong>
</pre><p>
      ファイルを別の場所に保存する場合は、それに合わせて前述の手順を調整してください。
    </p><p>
      SQL ノードでの <code class="literal">SELECT</code> クエリーの実行は、MySQL サーバーのほかのインスタンスでの実行と違いはありません。 コマンド行からクエリーを実行するには、最初に通常の方法で (<code class="literal">Enter password:</code> プロンプトで <code class="literal">root</code> パスワードを指定して) MySQL Monitor にログインする必要があります。 
    </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>mysql -u root -p</code></strong>
Enter password:
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 1 to server version: 8.0.23-ndb-8.0.23

Type 'help;' or '\h' for help. Type '\c' to clear the buffer.

mysql&gt;
</pre><p>
      ここでは、MySQL サーバーの <code class="literal">root</code> アカウントを使用し、MySQL サーバーのインストールに関する標準的なセキュリティー対策 (強力な <code class="literal">root</code> パスワードの設定を含む) に従っていると仮定します。 詳細は、<a class="xref" href="installing.html#default-privileges" title="2.10.4 初期 MySQL アカウントの保護">セクション2.10.4「初期 MySQL アカウントの保護」</a>を参照してください。 
    </p><p>
      NDB Cluster ノードは、相互にアクセスするときに MySQL 特権システムを使用しないことを考慮する価値があります。 MySQL ユーザーアカウント (<code class="literal">root</code> アカウントを含む) の設定または変更は、SQL ノードにアクセスするアプリケーションにのみ影響し、ノード間のやり取りには影響しません。 詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-security-mysql-privileges" title="23.5.17.2 NDB Cluster および MySQL の権限">セクション23.5.17.2「NDB Cluster および MySQL の権限」</a>を参照してください。 
    </p><p>
      SQL スクリプトをインポートする前にテーブル定義の <code class="literal">ENGINE</code> 句を変更しなかった場合は、この時点で次のステートメントを実行してください。
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>USE world;</code></strong>
mysql&gt; <strong class="userinput"><code>ALTER TABLE City ENGINE=NDBCLUSTER;</code></strong>
mysql&gt; <strong class="userinput"><code>ALTER TABLE Country ENGINE=NDBCLUSTER;</code></strong>
mysql&gt; <strong class="userinput"><code>ALTER TABLE CountryLanguage ENGINE=NDBCLUSTER;</code></strong>
</pre><p>
      データベースの選択とそのデータベース内のテーブルに対する <span class="command"><strong>SELECT</strong></span> クエリーの実行も、MySQL Monitor の終了と同様に通常の方法で行います。
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>USE world;</code></strong>
mysql&gt; <strong class="userinput"><code>SELECT Name, Population FROM City ORDER BY Population DESC LIMIT 5;</code></strong>
+-----------+------------+
| Name      | Population |
+-----------+------------+
| Bombay    |   10500000 |
| Seoul     |    9981619 |
| São Paulo |    9968485 |
| Shanghai  |    9696300 |
| Jakarta   |    9604900 |
+-----------+------------+
5 rows in set (0.34 sec)

mysql&gt; <strong class="userinput"><code>\q</code></strong>
Bye

shell&gt;
</pre><p>
      MySQL を使用するアプリケーションは、標準の API を使用して <code class="literal">NDB</code> テーブルにアクセスできます。 アプリケーションは、管理ノードやデータノードではなく、SQL ノードにアクセスする必要があります。 この簡単な例では、ネットワーク上の別の場所にある Web サーバーで実行されている PHP 5.X の <code class="literal">mysqli</code> 拡張を使用して、ここに示す <code class="literal">SELECT</code> ステートメントを実行する方法を示しています。 
    </p><pre class="programlisting">&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
  "http://www.w3.org/TR/html4/loose.dtd"&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;meta http-equiv="Content-Type"
           content="text/html; charset=iso-8859-1"&gt;
  &lt;title&gt;SIMPLE mysqli SELECT&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;?php
  # connect to SQL node:
  $link = new mysqli('198.51.100.20', 'root', '<em class="replaceable"><code>root_password</code></em>', 'world');
  # parameters for mysqli constructor are:
  #   host, user, password, database

  if( mysqli_connect_errno() )
    die("Connect failed: " . mysqli_connect_error());

  $query = "SELECT Name, Population
            FROM City
            ORDER BY Population DESC
            LIMIT 5";

  # if no errors...
  if( $result = $link-&gt;query($query) )
  {
?&gt;
&lt;table border="1" width="40%" cellpadding="4" cellspacing ="1"&gt;
  &lt;tbody&gt;
  &lt;tr&gt;
    &lt;th width="10%"&gt;City&lt;/th&gt;
    &lt;th&gt;Population&lt;/th&gt;
  &lt;/tr&gt;
&lt;?
    # then display the results...
    while($row = $result-&gt;fetch_object())
      printf("&lt;tr&gt;\n  &lt;td align=\"center\"&gt;%s&lt;/td&gt;&lt;td&gt;%d&lt;/td&gt;\n&lt;/tr&gt;\n",
              $row-&gt;Name, $row-&gt;Population);
?&gt;
  &lt;/tbody
&lt;/table&gt;
&lt;?
  # ...and verify the number of rows that were retrieved
    printf("&lt;p&gt;Affected rows: %d&lt;/p&gt;\n", $link-&gt;affected_rows);
  }
  else
    # otherwise, tell us what went wrong
    echo mysqli_error();

  # free the result set and the mysqli connection object
  $result-&gt;close();
  $link-&gt;close();
?&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre><p>
      ここでは、Web サーバーで実行されているプロセスが SQL ノードの IP アドレスに到達できると仮定します。
    </p><p>
      同様の方法で、MySQL C API、Perl-DBI、Python-mysql、または MySQL Connector を使用して、MySQL で通常実行する同じデータの定義や操作のタスクを実行できます。
    </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-cluster-install-shutdown-restart"></a>23.2.6 NDB Cluster の安全なシャットダウンと再起動</h3></div></div></div><a class="indexterm" name="idm45563236261296"></a><a class="indexterm" name="idm45563236259152"></a><p>
      クラスタをシャットダウンするには、管理ノードをホストしているマシン上のシェルで次のコマンドを入力します。
    </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>ndb_mgm -e shutdown</code></strong>
</pre><p>
      この <code class="option">-e</code> オプションは、シェルから <span class="command"><strong>ndb_mgm</strong></span> クライアントにコマンドを渡すために使用されます。 (このオプションの詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-program-options-common" title="23.4.32 NDB Cluster プログラムに共通のオプション — NDB Cluster プログラムに共通のオプション">セクション23.4.32「NDB Cluster プログラムに共通のオプション — NDB Cluster プログラムに共通のオプション」</a>を参照してください。) このコマンドによって、<span class="command"><strong>ndb_mgm</strong></span>、<span class="command"><strong>ndb_mgmd</strong></span>、およびすべての <span class="command"><strong>ndbd</strong></span> または <span class="command"><strong>ndbmtd</strong></span> プロセスが適切な方法で終了します。 SQL ノードは <span class="command"><strong>mysqladmin shutdown</strong></span> およびその他の方法で終了できます。 Windows プラットフォームでは、SQL ノードが Windows サービスとしてインストールされている場合、<span class="command"><strong>SC STOP <em class="replaceable"><code>service_name</code></em></strong></span> または <span class="command"><strong>NET STOP <em class="replaceable"><code>service_name</code></em></strong></span> を使用できます。 
    </p><p>
      Unix プラットフォームでクラスタを再起動するには、次のコマンドを実行します。
    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          管理ホスト (このセットアップ例では <code class="literal">198.51.100.10</code>):
        </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>ndb_mgmd -f /var/lib/mysql-cluster/config.ini</code></strong>
</pre></li><li class="listitem"><p>
          個々のデータノードホスト (<code class="literal">198.51.100.30</code> および <code class="literal">198.51.100.40</code>):
        </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>ndbd</code></strong>
</pre></li><li class="listitem"><p>
          <span class="command"><strong>ndb_mgm</strong></span> クライアントを使用して、両方のデータノードが正常に起動したか確認します。
        </p></li><li class="listitem"><p>
          SQL ホスト (<code class="literal">198.51.100.20</code>):
        </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>mysqld_safe &amp;</code></strong>
</pre></li></ul></div><p>
      Windows プラットフォームでは、デフォルトのサービス名 (<a class="xref" href="mysql-cluster.html#mysql-cluster-install-windows-service" title="23.2.2.4 NDB Cluster プロセスを Windows サービスとしてインストール">セクション23.2.2.4「NDB Cluster プロセスを Windows サービスとしてインストール」</a> を参照) を使用してすべての NDB Cluster プロセスを Windows サービスとしてインストールしたと仮定すると、次のようにクラスタを再起動できます:
    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          管理ホスト (このセットアップ例では <code class="literal">198.51.100.10</code>) で、次のコマンドを実行します。
        </p><pre class="programlisting">C:\&gt; <strong class="userinput"><code>SC START ndb_mgmd</code></strong>
</pre></li><li class="listitem"><p>
          個々のデータノードホスト (<code class="literal">198.51.100.30</code> および <code class="literal">198.51.100.40</code>) で、次のコマンドを実行します。
        </p><pre class="programlisting">C:\&gt; <strong class="userinput"><code>SC START ndbd</code></strong>
</pre></li><li class="listitem"><p>
          管理ノードホストで、<span class="command"><strong>ndb_mgm</strong></span> クライアントを使用して管理ノードと両方のデータノードが正常に起動したか確認します (<a class="xref" href="mysql-cluster.html#mysql-cluster-install-windows-initial-start" title="23.2.2.3 Windows での NDB Cluster の初期起動">セクション23.2.2.3「Windows での NDB Cluster の初期起動」</a>を参照してください)。
        </p></li><li class="listitem"><p>
          SQL ノードホスト (<code class="literal">198.51.100.20</code>) で、次のコマンドを実行します。
        </p><pre class="programlisting">C:\&gt; <strong class="userinput"><code>SC START mysql</code></strong>
</pre></li></ul></div><p>
      本番設定では、通常、クラスタを完全にシャットダウンすることは望ましくありません。 多くの場合、構成変更やクラスタのハードウェアまたはソフトウェア (あるいはその両方) のアップグレードを実行して個々のホストマシンをシャットダウンする必要が生じた場合でも、クラスタの<span class="firstterm">ローリング再起動</span>を実行することで、クラスタ全体をシャットダウンせずに処理を完了できます。 この実行方法の詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-rolling-restart" title="23.5.5 NDB Cluster のローリング再起動の実行">セクション23.5.5「NDB Cluster のローリング再起動の実行」</a>を参照してください。 
    </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-cluster-upgrade-downgrade"></a>23.2.7 NDB Cluster のアップグレードおよびダウングレード</h3></div></div></div><a class="indexterm" name="idm45563236213456"></a><a class="indexterm" name="idm45563236211248"></a><a class="indexterm" name="idm45563236209136"></a><a class="indexterm" name="idm45563236207216"></a><p>
      このセクションでは、アップグレードとダウングレードの実行に関する NDB Cluster 8.0 のさまざまなリリース間の NDB Cluster ソフトウェアとテーブルファイルの互換性、および互換性マトリクスとノートについて説明します。 アップグレードまたはダウングレードを試みる前に、NDB Cluster のインストールおよび構成に精通している必要があります。 <a class="xref" href="mysql-cluster.html#mysql-cluster-configuration" title="23.3 NDB Cluster の構成">セクション23.3「NDB Cluster の構成」</a>を参照してください。 
    </p><p>
      SQL DDL ステートメントを含むスキーマ操作は、データノードの再起動中、およびクラスタのオンラインアップグレードまたはダウングレード中には実行できません。 オンラインアップグレードの実行に使用されるローリング再起動手順に関するその他の情報は、<a class="xref" href="mysql-cluster.html#mysql-cluster-rolling-restart" title="23.5.5 NDB Cluster のローリング再起動の実行">セクション23.5.5「NDB Cluster のローリング再起動の実行」</a> を参照してください。 
    </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">重要</div><p>
        このセクションでは、MySQL バージョン間の <code class="literal">NDBCLUSTER</code> に関する互換性のみを考慮しますが、考慮すべき問題はほかにもある場合があります。 <span class="emphasis"><em>NDB Cluster ソフトウェアのアップグレードまたはダウングレードを試みる前に、ほかの MySQL ソフトウェアのアップグレードまたはダウングレードと同様に、移行元および移行先の MySQL バージョンについて、MySQL マニュアルの関連する部分を確認することを強くお勧めします</em></span>。 <a class="xref" href="installing.html#upgrading" title="2.11 MySQL のアップグレード">セクション2.11「MySQL のアップグレード」</a>を参照してください。 
      </p></div><p>
      ここに示すテーブルは、NDB 8.0 の異なるリリース間での NDB Cluster のアップグレードおよびダウングレードの互換性に関する情報を示しています。 NDB Cluster 8.0 リリースシリーズへのアップグレード、NDB Cluster 8.0 リリースシリーズからのダウングレード、または NDB Cluster 8.0 リリースシリーズ内でのダウングレードに関する追加のノートは、次のテーブルのあとにあります。 
    </p><h4><a name="idm45563236195904"></a>アップグレードとダウングレード、NDB Cluster 8.0</h4><div class="figure"><a name="fig-mysql-cluster-upgrade-downgrade-8-0"></a><p class="title"><b>図 23.5 NDB Cluster のアップグレードおよびダウングレードの互換性、MySQL NDB Cluster 8.0</b></p><div class="figure-contents"><div class="mediaobject"><img src="images/mysql-cluster-upgrade-downgrade-8-0.png" width="250" height="425" alt="MySQL 8.0 ソースツリーからのファイル storage/ndb/src/common/util/version.cpp に含まれるアップグレード/ダウングレードマトリックスのグラフィカル表現。"></div></div></div><br class="figure-break"><p><b>バージョンのサポート. </b>
        NDB Cluster 8.0 (8.0.19 以降) の GA リリースへのアップグレードでは、次のバージョンの NDB Cluster がサポートされています:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          NDB Cluster 7.6: NDB 7.6.4 以降
        </p></li><li class="listitem"><p>
          NDB Cluster 7.5: NDB 7.5.4 以降
        </p></li><li class="listitem"><p>
          NDB Cluster 7.4: NDB 7.4.6 以降
        </p></li></ul></div><p>
      NDB 7.4 より前のリリースシリーズからアップグレードするには、最初にリストされているいずれかのバージョンにアップグレードしてから、そのバージョンから最新の NDB 8.0 リリースにアップグレードする必要があります。 このような場合は、最初の手順として最新の NDB 7.6 リリースにアップグレードすることをお勧めします。 
    </p><p><b>既知の問題. </b>
        NDB 8.0 リリース間でアップグレードする場合、次の問題が発生することがわかっています:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          NDB 8.0.14 から以前のリリースへのオンラインダウングレードはサポートされていません。 NDB 8.0.14 で作成されたテーブルは、以前のリリースとの下位互換性がありません。 これは、MySQL データディクショナリを完全にサポートするために、<code class="literal">NDB</code> テーブルによって実装される追加のメタデータプロパティの使用方法が変更されたためです。 
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-what-is-new-8-0-extra-metadata" title="NDB テーブルの追加メタデータの変更">NDB テーブルの追加メタデータの変更</a>を参照してください。 <a class="xref" href="data-dictionary.html" title="第 14 章 MySQL データディクショナリ">第14章「<i>MySQL データディクショナリ</i>」</a>も参照してください。 
        </p></li><li class="listitem"><p>
          以前のリリースシリーズ (<a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-privilege-distribution.html" target="_top">Distributed Privileges Using Shared Grant Tables</a> を参照) で実装された MySQL サーバー間で共有される分散特権は、NDB Cluster 8.0 ではサポートされていません。 NDB 8.0.16 で提供される <span class="command"><strong>mysqld</strong></span> は、起動時に、あとで <code class="literal">NDB</code> ストレージエンジンを使用する付与テーブルの存在をチェックします。見つかった場合は、<code class="literal">InnoDB</code> を使用してこれらのローカルコピー (<span class="quote">「<span class="quote">「シャドウテーブル」</span>」</span>) を作成します。 これは NDB Cluster に接続されている各 MySQL サーバーに当てはまります。 NDB Cluster SQL ノードとして機能するすべての MySQL サーバーでこれが実行されたあと、NDB Cluster 配布に付属の <span class="command"><strong>ndb_drop_table</strong></span> ユーティリティーを使用して、<code class="literal">NDB</code> 付与テーブルを安全に削除できます。次に例を示します: 
        </p><pre class="programlisting">ndb_drop_table -d mysql user db columns_priv tables_priv proxies_priv procs_priv
</pre><p>
          <code class="literal">NDB</code> 付与テーブルは安全に保持できますが、アクセス制御には使用されず、事実上無視されます。
        </p><p>
          NDB 8.0 で使用される MySQL 特権システムの詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-privilege-distribution" title="23.5.12 NDB_STORED_USER での分散 MySQL 権限">セクション23.5.12「NDB_STORED_USER での分散 MySQL 権限」</a> および <a class="xref" href="security.html#grant-tables" title="6.2.3 付与テーブル">セクション6.2.3「付与テーブル」</a> を参照してください。
        </p></li><li class="listitem"><p>
          NDB 8.0.18 では、バイナリ構成ファイル形式が拡張され、以前のバージョンよりも多くのノードをサポートするようになりました。 新しい形式は、8.0.17 および古いノードからはアクセスできませんが、新しい管理サーバーは古いノードを検出し、適切な形式を使用してそれらと通信できます。 
        </p><p>
          8.0.17 以前から NDB 8.0.18 以降へのアップグレードは、この点で問題になるべきではありません。 NDB 8.0.18 以降から 8.0.17 以前へのダウングレードの場合、古い管理サーバーは新しいバイナリ構成ファイル形式を読み取ることができないため、手動の介入が必要になります。 このようなダウングレードを実行する場合は、古い <code class="literal">NDB</code> ソフトウェアバージョンを使用して管理を開始する前に、キャッシュされたバイナリ構成ファイルを削除し、管理サーバーでプレーンテキスト構成ファイルを読み取ることができるようにする必要があります。 または、<code class="option">--initial</code> オプションを使用して古い管理サーバーを起動することもできます (再度、<code class="filename">config.ini</code> を使用可能にする必要があります)。 クラスタで複数の管理サーバーを使用する場合は、管理サーバーバイナリごとに次の 2 つのいずれかを実行する必要があります。 
        </p><p>
          また、ノード数の増加のサポートに関連して、NDB 8.0.18 でデータノード LCP <code class="filename">Sysfile</code> に実装された互換性のない変更のため、NDB 8.0.18 (以降) から以前のリリースへのオンラインダウングレードを実行して、<code class="option">--initial</code> オプションを使用してすべてのデータノードを再起動する必要があります。
        </p><p>
          NDB 7.6.4 より前のリリースを NDB 8.0 リリースにアップグレードする場合も、<code class="option">--initial</code> を使用してデータノードを再起動する必要があります。
        </p></li><li class="listitem"><p>
          48 を超えるデータノードを実行しているクラスタ、または 48 を超えるノード ID を使用しているデータノードを NDB 8.0.17 以前の NDB 8.0.18 に直接ダウングレードすることはサポートされていません。 このような場合は、データノードの数を減らし、古い最大値を超えないように、48 以下のノード ID を使用するようにすべてのデータノードの構成を変更する必要があります。 
        </p></li><li class="listitem"><p>
          NDB 8.0 から NDB 7.5 または NDB 7.4 にダウングレードする場合、まだ存在しないときは、クラスタ構成ファイルで <code class="literal">IndexMemory</code> の明示的な値を設定する必要があります。 これは、NDB 8.0 が (NDB 7.6 で削除された) このパラメータを使用せず、デフォルトで 0 に設定するのに対し、NDB 7.5 および NDB 7.4 では必須であり、<code class="literal">IndexMemory</code> がゼロ以外の値に設定されていない場合、どちらのクラスタも<span class="errortext">「管理サーバーから無効な構成を受信しました ...」</span>での起動を拒否するためです。 
        </p><p>
          NDB 8.0 から NDB 7.6 へのダウングレードには、<code class="literal">IndexMemory</code> の設定は必要ありません。
        </p></li><li class="listitem"><p>
          NDB 8.0.22 では、<code class="filename">config.ini</code> ファイル内の管理ノードおよびデータノードに対する IPv6 アドレス指定のサポートが追加されました。 アップグレードの一環として IPv6 アドレスの使用を開始するには、次のステップを実行します: 
        </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
              通常の方法で、8.0.22 以降のバージョンの NDB Cluster ソフトウェアへのクラスタのアップグレードを実行します。
            </p></li><li class="listitem"><p>
              <code class="filename">config.ini</code> ファイルで使用されているアドレスを IPv6 アドレスに変更します。
            </p></li><li class="listitem"><p>
              クラスタのシステム再起動を実行します。
            </p></li></ol></div></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-cluster-installer"></a>23.2.8 NDB Cluster Auto-Installer (サポートされなくなりました)</h3></div></div></div><div class="toc"><dl class="toc"><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-installer-requirements">23.2.8.1 NDB Cluster 自動インストーラの要件</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-installer-using">23.2.8.2 NDB Cluster Auto-Installer の使用</a></span></dt></dl></div><a class="indexterm" name="idm45563236139696"></a><a class="indexterm" name="idm45563236138096"></a><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>この機能は NDB Cluster から削除され、サポートされなくなりました。 詳しくは<a class="xref" href="mysql-cluster.html#mysql-cluster-what-is-new" title="23.1.4 NDB Cluster の新機能">セクション23.1.4「NDB Cluster の新機能」</a>,をご覧ください。 </p></div><p>
      このセクションでは、NDB Cluster 配布の一部として含まれる web ベースのグラフィカル構成インストーラについて説明します。 ここでは、インストーラとその部品、ソフトウェア、およびインストーラの実行、GUI のナビゲート、およびインストーラを使用した 1 台以上のホストコンピュータでの NDB Cluster の設定と起動、または停止に関するその他の要件の概要について説明します。 
    </p><a class="indexterm" name="idm45563236132672"></a><p>
      NDB Cluster Auto-Installer は 2 つのコンポーネントで構成されています。 フロントエンドは、Firefox や Microsoft Internet Explorer などの標準の Web ブラウザでロードおよび実行される Web ページとして実装される GUI クライアントです。 バックエンドは、ローカルマシンまたはユーザーがアクセスできる別のホストで実行されるサーバープロセス (<span class="command"><strong>ndb_setup.py</strong></span>) です。 
    </p><p>
      これら 2 つのコンポーネント (クライアントとサーバー) は、標準の HTTP 要求および応答を使用して相互に通信します。 バックエンドは、バックエンドユーザーがアクセス権を付与した任意のホストで NDB Cluster ソフトウェアプログラムを管理できます。 NDB Cluster ソフトウェアが別のホスト上にある場合、バックエンドは SSH を使用してアクセスします。 
    </p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-installer-requirements"></a>23.2.8.1 NDB Cluster 自動インストーラの要件</h4></div></div></div><a class="indexterm" name="idm45563236126640"></a><p>
        このセクションでは、NDB Cluster Auto-Installer を実行するためにサポートされているオペレーティングシステムとソフトウェア、必要なソフトウェア、およびその他の前提条件について説明します。
      </p><p><b>サポートされるプラットフォーム. </b>
          <a class="indexterm" name="idm45563236122656"></a> NDB Cluster Auto-Installer は、最新バージョンの Linux、Windows、Solaris、および macOS 用の NDB 8.0 ディストリビューションで使用できます。 NDB Cluster および NDB Cluster 自動インストーラのプラットフォームサポートの詳細は、<a class="ulink" href="https://www.mysql.com/support/supportedplatforms/cluster.html" target="_top">https://www.mysql.com/support/supportedplatforms/cluster.html</a> を参照してください。 
        </p><p><b>サポートされる web ブラウザ. </b>
          <a class="indexterm" name="idm45563236118080"></a> web ベースのインストーラは、最新バージョンの Firefox および Microsoft Internet Explorer でサポートされます。 また、Opera、Safari、および Chrome の最近のバージョンでも動作しますが、これらのブラウザとの互換性に関する詳細なテストは行われていません。 
        </p><p><b>必要なソフトウェア (セットアップホスト). </b>
          <a class="indexterm" name="idm45563236113872"></a> Auto-Installer が実行されているホストに次のソフトウェアをインストールする必要があります:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><b>Python 2.6 以上. </b>
              <a class="indexterm" name="idm45563236109632"></a> Auto-Installer には、Python インタプリタと標準ライブラリが必要です。 これらがシステムにまだインストールされていない場合は、システムのパッケージマネージャーを使用して追加できる可能性があります。 それ以外の場合は、<a class="ulink" href="http://python.org/download/" target="_top">http://python.org/download/</a> からダウンロードできます。 
            </p></li><li class="listitem"><p><b>Paramiko 2 以上. </b>
              これがシステムパッケージマネージャから入手できない場合は、<a class="ulink" href="http://www.lag.net/paramiko/" target="_top">http://www.lag.net/paramiko/</a> からダウンロードできます。
            </p></li><li class="listitem"><p><b>Pycrypto バージョン 1.9 以上. </b>
              この暗号化モジュールは Paramiko に必要であり、<code class="literal">pip install cryptography</code> を使用してインストール解除できます。 <code class="literal">pip</code> がインストールされておらず、システムパッケージ管理を使用してモジュールを使用できない場合は、<a class="ulink" href="https://www.dlitz.net/software/pycrypto/" target="_top">https://www.dlitz.net/software/pycrypto/</a> からダウンロードできます。 
            </p></li></ul></div><p>
        構成ツールの Windows バージョンには、前のリストに示したすべてのソフトウェアが含まれているため、別個にインストールする必要はありません。
      </p><p><b>必要なソフトウェア (リモートホスト). </b>
          <a class="indexterm" name="idm45563236097152"></a> NDB Cluster ノードを配備するリモートホストに必要なソフトウェアは SSH サーバーだけです。SSH サーバーは通常、Linux および Solaris システムにデフォルトでインストールされます。 Windows では、いくつかの代わりとなるものが使用可能です。概要については、<a class="ulink" href="http://en.wikipedia.org/wiki/Comparison_of_SSH_servers" target="_top">http://en.wikipedia.org/wiki/Comparison_of_SSH_servers</a> を参照してください。 
        </p><p>
        <a class="indexterm" name="idm45563236093072"></a>複数のホストを使用する場合の追加要件は、次のいくつかの段落で説明するように、SSH および適切なキーまたはユーザー資格証明を使用して任意のリモートホストに対して認証できることです:
      </p><p><b>認証とセキュリティー. </b>
          <a class="indexterm" name="idm45563236089344"></a>リモートアクセスのための 3 つの基本的なセキュリティーまたは認証メカニズムを Auto-Installer で使用できます。ここでは、これらについて説明します:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><b>SSH. </b>
              セキュアシェル接続を使用すると、バックエンドからリモートホストでのアクションを実行できるようになります。 そのためには、リモートホストで SSH サーバーが実行されている必要があります。 また、インストーラを実行しているオペレーティングシステムユーザーは、ユーザー名とパスワード、または公開キーと秘密キーを使用してリモートサーバーにアクセスできる必要があります。 
            </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">重要</div><p>
              システムの <code class="literal">root</code> アカウントは安全性がきわめて低いため、リモートアクセスには決して使用しないでください。 また、<span class="command"><strong>mysqld</strong></span> はシステムの <code class="literal">root</code> によって正常に起動できません。 これらの理由やその他の理由から、システムの <code class="literal">root</code> ではく、ターゲットシステム上の通常のユーザーアカウントの SSH 資格証明を提供してください。 この問題の詳細は、<a class="xref" href="security.html#changing-mysql-user" title="6.1.5 MySQL を通常ユーザーとして実行する方法">セクション6.1.5「MySQL を通常ユーザーとして実行する方法」</a>を参照してください。 
            </p></div></li><li class="listitem"><p><b>HTTPS. </b>
              デフォルトでは、Web ブラウザのフロントエンドとバックエンドの間のリモート通信は暗号化されません。つまり、ユーザー SSH パスワードなどの情報はクリアテキストとして送信され、すべてのユーザーが読み取ることができます。 リモートクライアントからの通信を暗号化するには、バックエンドに証明書を用意し、フロントエンドが HTTP ではなく HTTPS を使用してバックエンドと通信する必要があります。 HTTPS を有効にするには、自己署名証明書を発行するのがもっとも簡単です。 証明書を発行したあとは、それが使用されていることを確認する必要があります。 これを行うには、<code class="option">--use-https</code> (<code class="option">-S</code>) および <code class="option">--cert-file</code> (<code class="option">-c</code>) オプションを指定してコマンドラインから <span class="command"><strong>ndb_setup.py</strong></span> を起動します。 
            </p><p>
            サンプルの証明書ファイル <code class="filename">cfg.pem</code> が含まれており、デフォルトで使用されます。 このファイルは、インストール共有ディレクトリの下の <code class="filename">mcc</code> ディレクトリにあります。Linux では、ファイルへのフルパスは通常<code class="filename">/usr/share/mysql/mcc/cfg.pem</code> です。 Windows システムでは、これは通常 <code class="filename">C:\Program Files\MySQL\MySQL Server 8.0\share\mcc\cfg.pem</code> です。 デフォルトを使用できるということは、テスト目的で、<code class="option">-S</code> オプションを使用してインストーラを起動し、ブラウザとバックエンド間の HTTPS 接続を使用できることを意味します。 
          </p><p>
            Auto-Installer は、<span class="command"><strong>ndb_setup.py</strong></span> 実行可能ファイルを呼び出すユーザーのホームディレクトリに、特定のクラスタ <code class="literal">mycluster01</code> の構成ファイルを <code class="filename">mycluster01.mcc</code> として保存します。 このファイルは、(<a class="ulink" href="https://cryptography.io/en/latest/fernet/" target="_top">Fernet</a> を使用して) ユーザーが指定したパスフレーズで暗号化されます。HTTP はパスフレーズをクリアな<span class="emphasis"><em>リモートホスト上の Auto-Installer にアクセスするには、常に HTTPS 接続を使用することを強くお勧めします</em></span>で転送するためです。 
          </p></li><li class="listitem"><p><b>証明書ベースの認証. </b>
              バックエンドの <span class="command"><strong>ndb_setup.py</strong></span> プロセスは、ローカルホストだけでなくリモートホストに対してもコマンドを実行できます。 これは、バックエンドに接続した任意のユーザーがコマンドの実行方法を管理できることを意味します。 バックエンドへの不要な接続を拒否するには、クライアントを認証するための証明書が必要です。 この場合は、証明書がユーザーによって発行され、ブラウザにインストールされ、バックエンドで認証に使用できるようになっている必要があります。 <code class="option">--ca-certs-file</code> (<code class="option">-a</code>) オプションを指定して <span class="command"><strong>ndb_setup.py</strong></span> を起動することで、この要件を (パスワードまたはキー認証とともに、またはそのかわりに) 実施できます。 
            </p></li></ul></div><p>
        <a class="indexterm" name="idm45563236057072"></a>クライアントブラウザが Auto-Installer バックエンドと同じホスト上で実行されている場合、セキュアな認証は必要ありません。
      </p><p>
        さらに一般的な MySQL セキュリティー情報については、NDB Cluster を配備するときに考慮すべきセキュリティー上の考慮事項を考慮した <a class="xref" href="mysql-cluster.html#mysql-cluster-security" title="23.5.17 NDB Cluster のセキュリティーの問題">セクション23.5.17「NDB Cluster のセキュリティーの問題」</a> および <a class="xref" href="security.html" title="第 6 章 セキュリティー">第6章「<i>セキュリティー</i>」</a> も参照してください。
      </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-installer-using"></a>23.2.8.2 NDB Cluster Auto-Installer の使用</h4></div></div></div><a class="indexterm" name="idm45563236050656"></a><p>
        NDB Cluster の Auto-Installer インタフェースは複数のページで構成され、それぞれが NDB Cluster の構成および配備に使用されるプロセスのステップに対応しています。 これらのページは、次の順序でリストされます: 
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <span class="bold"><strong><a class="link" href="mysql-cluster.html#mysql-cluster-installer-using-welcome" title="NDB Cluster 自動インストーラのようこそ画面">Welcome</a></strong></span>: 新しい NDB Cluster を構成するか、既存の NDB Cluster の構成を続行するかを選択して、Auto-Installer の使用を開始します。
          </p></li><li class="listitem"><p>
            <span class="bold"><strong><a class="link" href="mysql-cluster.html#mysql-cluster-installer-using-define-cluster" title="NDB Cluster 自動インストーラの Define Cluster 画面">「Define Cluster」</a></strong></span>: クラスタ全体の基本的な情報 (名前、ホスト、負荷タイプなど) を設定します。 ここでは、必要に応じてリモートホストへのアクセスに使用する SSH 認証のタイプを設定することもできます。 
          </p></li><li class="listitem"><p>
            <span class="bold"><strong><a class="link" href="mysql-cluster.html#mysql-cluster-installer-using-define-hosts" title="NDB Cluster 自動インストーラの Define Hosts 画面">Define Hosts</a></strong></span>: NDB Cluster プロセスを実行する予定のホストを特定します。
          </p></li><li class="listitem"><p>
            <span class="bold"><strong><a class="link" href="mysql-cluster.html#mysql-cluster-installer-using-define-processes" title="NDB Cluster 自動インストーラの Define Processes 画面">「Define Processes」</a></strong></span>: 各クラスタホストに特定のタイプのプロセスを 1 つ以上割り当てます。
          </p></li><li class="listitem"><p>
            <span class="bold"><strong><a class="link" href="mysql-cluster.html#mysql-cluster-installer-using-define-parameters" title="NDB Cluster 自動インストーラのパラメータの定義画面">Define Parameters</a></strong></span>: プロセスまたはプロセスのタイプの構成属性を設定します。
          </p></li><li class="listitem"><p>
            <span class="bold"><strong><a class="link" href="mysql-cluster.html#mysql-cluster-installer-using-deploy-configuration" title="NDB Cluster 自動インストーラの Deploy Configuration 画面">Deploy Configuration</a></strong></span>: 以前に設定した構成でクラスタをデプロイし、デプロイしたクラスタを起動および停止します。
          </p></li></ul></div><h5><a name="mysql-install-auto-settings-help-menus"></a>NDB Cluster インストーラの Settings および Help メニュー</h5><p>
        これらのメニューは、<span class="bold"><strong>ようこそ</strong></span>画面を除くすべての画面に表示されます。 インストーラの設定および情報にアクセスできます。 <span class="guimenu">「設定」</span>メニューの詳細を次に示します。 
      </p><div class="figure"><a name="fig-mysql-cluster-installer-settings-menu"></a><p class="title"><b>図 23.6 NDB Cluster の Auto-Installer Settings メニュー</b></p><div class="figure-contents"><div class="mediaobject"><img src="images/settings-menu.png" width="400" height="300" alt="内容は周囲のテキストで説明されています。"></div></div></div><br class="figure-break"><p>
        <span class="guimenu">「設定」</span>メニューには、次のエントリがあります:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <span class="guimenuitem">「Automatically save configuration as cookies」</span>: 構成情報 (ホスト名、プロセスデータ、パラメータ値など) をブラウザの Cookie として保存します。 このオプションを選択すると、SSH パスワードを除くすべての情報が保存されます。 つまり、ブラウザを終了して再起動し、前のセッションの終了時と同じ構成で作業を続行できます。 このオプションはデフォルトで有効となっています。 
          </p><p>
            SSH パスワードは保存されません。SSH パスワードを使用する場合は、新しいセッションの開始時にパスワードを指定する必要があります。
          </p></li><li class="listitem"><p>
            <span class="guimenuitem">拡張構成オプションの表示</span>: デフォルトで、拡張構成パラメータが使用可能な場合に表示されます。
          </p><p>
            設定した拡張パラメータは、明示的に変更またはリセットされるまで構成ファイルで引き続き使用されます。 これは、高度なパラメータが現在インストーラに表示されているかどうかは関係ありません。メニュー項目を無効にしても、パラメータの値はリセットされません。 
          </p><p>
            <a class="link" href="mysql-cluster.html#mysql-cluster-installer-using-define-parameters" title="NDB Cluster 自動インストーラのパラメータの定義画面">「<span class="bold"><strong>パラメータの定義</strong></span> screen」</a>の個々のプロセスの拡張パラメータの表示を切り替えることもできます。
          </p><p>
            このオプションはデフォルトで無効になっています。
          </p></li><li class="listitem"><p>
            <span class="guimenuitem">「Automatically get resource information for new hosts」</span>: 新しいホストのハードウェアリソース情報を自動的にクエリーして、構成オプションおよび値を事前に移入します。 この場合、提案された値は必須ではありませんが、インストーラの対応する編集オプションを使用して明示的に変更しないかぎり、その値が使用されます。 
          </p><p>
            このオプションはデフォルトで有効となっています。
          </p></li></ul></div><p>
        インストーラの <span class="guimenu">Help</span> メニューを次に示します:
      </p><div class="figure"><a name="fig-mysql-cluster-installer-help-menu"></a><p class="title"><b>図 23.7 NDB Cluster Auto-Installer の Help メニュー</b></p><div class="figure-contents"><div class="mediaobject"><img src="images/help-menu.png" width="400" height="300" alt="内容は周囲のテキストで説明されています。"></div></div></div><br class="figure-break"><p>
        <span class="guimenu">「ヘルプ」</span>メニューには、次のリストで説明する複数のオプションがあります。
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <span class="guibutton">目次</span>: 組込みユーザーガイドを表示します。 これは、別のブラウザウィンドウで開くため、ワークフローを中断せずにインストーラと同時に使用できます。 
          </p></li><li class="listitem"><p>
            <span class="guibutton">「現在のページ」</span>: 組み込みのユーザーガイドの、インストーラに現在表示されているページについて説明するセクションを開きます。
          </p></li><li class="listitem"><p>
            <span class="guibutton">バージョン情報</span>: インストーラ名と、それが提供された NDB Cluster ディストリビューションのバージョン番号を表示するダイアログを開きます。
          </p></li></ul></div><p>
        Auto-Installer では、ほとんどの入力ウィジェットでツールチップ形式のコンテキスト依存ヘルプも提供されます。
      </p><p>
        また、ほとんどの NDB 構成パラメータの名前は、オンラインドキュメントの説明にリンクされています。 ドキュメントは別のブラウザウィンドウに表示されます。 
      </p><p>
        次のセクションでは、Auto-Installer の起動について説明します。 次の各セクションでは、これらの各ページの目的と機能について、前述の順序で詳しく説明します。 
      </p><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="mysql-cluster-installer-using-starting"></a>NDB Cluster Auto-Installer の起動</h5></div></div></div><a class="indexterm" name="idm45563235990720"></a><p>
          Auto-Installer は NDB Cluster ソフトウェアとともに提供されます。 Auto-Installer のみを含む RPM パッケージと <code class="filename">.deb</code> パッケージは、多くの Linux ディストリビューションでも個別に使用できます。 (<a class="xref" href="mysql-cluster.html#mysql-cluster-installation" title="23.2 NDB Cluster のインストール">セクション23.2「NDB Cluster のインストール」</a>を参照してください。) 
        </p><p>
          このセクションでは、インストーラの起動方法について説明します。 これを行うには、<span class="command"><strong>ndb_setup.py</strong></span> 実行可能ファイルを起動します。 
        </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">ユーザーおよび権限</div><p>
            <span class="command"><strong>ndb_setup.py</strong></span> は通常のユーザーとして実行する必要があります。そのために特別な権限は必要ありません。 このプログラムは、<code class="literal">mysql</code> ユーザーとして、またはシステムの <code class="literal">root</code> または管理者アカウントを使用して実行しないでください。実行すると、インストールが失敗する可能性があります。 
          </p></div><p>
          <span class="command"><strong>ndb_setup.py</strong></span> は NDB Cluster インストールディレクトリ内の <code class="filename">bin</code> にあります。一般的な場所は、Linux システム上の<code class="filename">/usr/local/mysql/bin</code> または Windows システム上の <code class="filename">C:\Program Files\MySQL\MySQL Server 8.0\bin</code> です。 これは、NDB Cluster ソフトウェアがインストールされているシステム上の場所とインストール方法によって異なる場合があります。 
        </p><p>
          Windows では、NDB Cluster のインストールディレクトリで <span class="command"><strong>setup.bat</strong></span> を実行してインストーラを起動することもできます。 コマンドラインから起動した場合、このバッチファイルは <span class="command"><strong>ndb_setup.py</strong></span> と同じオプションを受け入れます。 
        </p><a class="indexterm" name="idm45563235974336"></a><a class="indexterm" name="idm45563235972016"></a><p>
          <span class="command"><strong>ndb_setup.py</strong></span> は、その動作に影響を与える複数のオプションを指定して起動できますが、通常はデフォルト設定を使用するだけで十分です。その場合は、次の 2 つの方法で <span class="command"><strong>ndb_setup.py</strong></span> を起動できます。
        </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
              端末で NDB Cluster <code class="filename">bin</code> ディレクトリに移動し、次のような追加の引数やオプションを指定せずにコマンド行から呼び出します:
            </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>ndb_setup.py</code></strong>
Running out of install dir: /usr/local/mysql/bin
Starting web server on port 8081
URL is https://localhost:8081/welcome.html
deathkey=627876
Press CTRL+C to stop web server.
The application should now be running in your browser.
(Alternatively you can navigate to https://localhost:8081/welcome.html to start it)
</pre><p>
              これは、オペレーティングシステムに関係なく有効です。
            </p></li><li class="listitem"><p>
              ファイルブラウザで NDB Cluster <code class="filename">bin</code> ディレクトリ (Windows の場合は Windows エクスプローラ、Linux の場合は Konqueror、Dolphin、Nautilus など) に移動し、<span class="guilabel">ndb_setup.py</span> ファイルアイコンをアクティブにします (通常はダブルクリックします)。 これは Windows で有効ですが、ほとんどの一般的な Linux デスクトップでも有効です。 
            </p><p>
              Windows では、NDB Cluster のインストールディレクトリに移動して、<span class="guilabel">setup.bat</span> ファイルアイコンをアクティブにすることもできます。
            </p></li></ol></div><p>
          いずれの場合も、<span class="command"><strong>ndb_setup.py</strong></span> が呼び出されると、Auto-Installer <a class="link" href="mysql-cluster.html#mysql-cluster-installer-using-welcome" title="NDB Cluster 自動インストーラのようこそ画面">「<span class="bold"><strong>ようこそ</strong></span> screen」</a>がシステムのデフォルトの web ブラウザで開かれます。 そうでない場合は、ページを開くことができます 
          <code class="uri">http://localhost:8081/welcome.html</code> または
          <code class="uri">https://localhost:8081/welcome.html</code> ブラウザで手動で。
        </p><p>
          場合によっては、接続に HTTPS を指定したり、Auto-Installer が実行する web サーバーを含む別のポートを指定するなど、インストーラにデフォルト以外の設定を使用することがあります。その場合は、必要なデフォルト値をオーバーライドして、1 つ以上の起動オプションで <span class="command"><strong>ndb_setup.py</strong></span> を起動する必要があります。 NDB Cluster ソフトウェアディストリビューション内のこのようなプラットフォーム用に提供されている <span class="command"><strong>setup.bat</strong></span> ファイルを使用して、Windows システムで同じ起動オプションを使用できます。 これはコマンドラインを使用して実行できますが、これらのオプションを使用してデスクトップまたはファイルブラウザからインストーラを起動する必要がある場合は、適切な起動を含むスクリプトまたはバッチファイルを作成し、ファイルブラウザでそのファイルアイコンをダブルクリックしてインストーラを起動することもできます。 (Linux システムでは、最初にスクリプトファイルを実行可能にする必要もあります。) リモートホストから Auto-Installer を使用する場合は、<code class="option">-S</code> オプションの使用を開始するようにしてください。 NDB Cluster Auto-Installer のこのオプションおよびその他の高度な起動オプションについては、<a class="xref" href="mysql-cluster.html#mysql-cluster-programs-ndb-setup-py" title="23.4.26 ndb_setup.py — NDB Cluster 用ブラウザベースの Auto-Installer の起動 (非推奨)">セクション23.4.26「ndb_setup.py — NDB Cluster 用ブラウザベースの Auto-Installer の起動 (非推奨)」</a> を参照してください。 
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="mysql-cluster-installer-using-welcome"></a>NDB Cluster 自動インストーラのようこそ画面</h5></div></div></div><a class="indexterm" name="idm45563235946096"></a><p>
          <span class="bold"><strong>ようこそ</strong></span>画面は、<span class="command"><strong>ndb_setup.py</strong></span> の起動時にデフォルトブラウザにロードされます。 Auto-Installer がはじめて実行されるとき (または何らかの理由で既存の構成が存在しない場合)、この画面は次のように表示されます: 
        </p><div class="figure"><a name="fig-mysql-cluster-installer-welcome-first-run"></a><p class="title"><b>図 23.8 「NDB Cluster 自動インストーラのようこそ」画面、最初の実行</b></p><div class="figure-contents"><div class="mediaobject"><img src="images/welcome-first-run.png" width="800" height="600" alt="内容は周囲のテキストで説明されています。"></div></div></div><br class="figure-break"><p>
          この場合、リストされるクラスタの選択肢は新しいクラスタの構成のみで、<span class="guibutton">構成の表示</span>ボタンと<span class="guibutton">続行</span>ボタンの両方が非アクティブになります。
        </p><p>
          新しい構成を作成するには、表示されたテキストボックスにパスフレーズを入力して確認します。 これが完了したら、<span class="guibutton">続行</span>をクリックして<span class="bold"><strong>クラスタの定義</strong></span>画面に進み、新しいクラスタに名前を割り当てることができます。 
        </p><p>
          Auto-Installer を使用してすでに 1 つ以上のクラスタを作成している場合は、それらが名前で一覧表示されます。 この例は、<code class="literal">mycluster-1</code> という名前の既存のクラスタを示しています: 
        </p><div class="figure"><a name="fig-mysql-cluster-installer-welcome-previous-run"></a><p class="title"><b>図 23.9 「NDB Cluster 自動インストーラのようこそ」画面 (以前に作成したクラスタ mycluster-1 を含む)</b></p><div class="figure-contents"><div class="mediaobject"><img src="images/welcome-previous-run.png" width="800" height="600" alt="内容は周囲のテキストで説明されています。"></div></div></div><br class="figure-break"><p>
          特定のクラスタの構成を表示して操作するには、リストでその名前の横にあるラジオボタンを選択し、作成に使用したパスフレーズを入力して確認します。 これが正しく完了したら、<span class="guibutton">構成の表示</span>をクリックして、このクラスタ構成を表示および編集できます。 
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="mysql-cluster-installer-using-define-cluster"></a>NDB Cluster 自動インストーラの Define Cluster 画面</h5></div></div></div><a class="indexterm" name="idm45563235919072"></a><p>
          <span class="bold"><strong>クラスタの定義</strong></span>画面は、<a class="link" href="mysql-cluster.html#mysql-cluster-installer-using-welcome" title="NDB Cluster 自動インストーラのようこそ画面">「<span class="bold"><strong>ようこそ</strong></span> screen」</a>の後に表示され、クラスタの一般プロパティの設定に使用されます。 <span class="bold"><strong>「Define Cluster」</strong></span>画面のレイアウトを次に示します。 
        </p><div class="figure"><a name="fig-mysql-cluster-installer-define-cluster-start"></a><p class="title"><b>図 23.10 「NDB Cluster 自動インストーラクラスタの定義」画面</b></p><div class="figure-contents"><div class="mediaobject"><img src="images/define-cluster-start.png" width="800" height="600" alt="内容は周囲のテキストで説明されています。"></div></div></div><br class="figure-break"><p>
          この画面および後続の画面には、このセクションの後半で説明する<span class="guilabel">「設定」</span>および <span class="guilabel">Help</span> のメニューも含まれています。<a class="xref" href="mysql-cluster.html#mysql-install-auto-settings-help-menus" title="NDB Cluster インストーラの Settings および Help メニュー">NDB Cluster インストーラの Settings および Help メニュー</a> を参照してください。
        </p><p>
          <span class="bold"><strong>クラスタの定義</strong></span>画面では、クラスタの 3 種類のプロパティを設定できます: クラスタプロパティ、SSH プロパティおよびインストールプロパティ。
        </p><p>
          この画面で設定できるクラスタプロパティは、次のとおりです:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <span class="guilabel">クラスタ名</span>: クラスタを識別する名前。この例では、<code class="literal">mycluster-1</code> です。 名前は前の画面で設定され、ここでは変更できません。 
            </p></li><li class="listitem"><p>
              <span class="guilabel">「Host list」</span>: クラスタプロセスを実行する 1 台以上のホストのカンマ区切りリスト。 デフォルトでは、これは <code class="literal">127.0.0.1</code> です。 リストにリモートホストを追加する場合は、SSH プロパティとして指定された資格証明を使用して接続できる必要があります。 
            </p></li><li class="listitem"><p>
              <span class="guilabel">「Application type」</span>: 次のいずれかを選択します。
            </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
                  <span class="guimenuitem">「Simple testing」</span>: 小規模なテストに対応する最小限のリソース使用。 これはデフォルトです。 <span class="emphasis"><em>本番環境を目的にしたものではありません</em></span>。 
                </p></li><li class="listitem"><p>
                  <span class="guimenuitem">「Web」</span>: 特定のハードウェアに合わせてパフォーマンスを最大化します。
                </p></li><li class="listitem"><p>
                  <span class="guimenuitem">「Real-time」</span>: 障害の発生したクラスタプロセスの検出にかかる時間を最小限に抑えるため、タイムアウトへの感度を最大限にしながらパフォーマンスを最大化します。
                </p></li></ol></div></li><li class="listitem"><p>
              <span class="guilabel">「Write load」</span>: クラスタ全体で予測される書き込み数のレベルを選択します。 次のいずれかのレベルを選択できます。 
            </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
                  <span class="guimenuitem">「Low」</span>: 予想される負荷に、1 秒あたり 100 件未満の書き込みトランザクションが含まれます。
                </p></li><li class="listitem"><p>
                  <span class="guimenuitem">中</span>: 予想される負荷には、100～ 1000 個の書き込みトランザクション/秒が含まれます。これがデフォルトです。
                </p></li><li class="listitem"><p>
                  <span class="guimenuitem">「High」</span>: 予想される負荷に、1 秒あたり 1000 件を超える書き込みトランザクションが含まれます。
                </p></li></ol></div></li></ul></div><p>
          SSH プロパティーについては、次のリストで説明します:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <span class="guilabel">キーベースの SSH</span>: リモートホストへのキー対応ログインを使用する場合は、このボックスを選択します。 選択した場合、キーユーザーとパスフレーズも指定する必要があります。それ以外の場合は、リモートログインアカウントのユーザーとパスワードが必要です。 
            </p></li><li class="listitem"><p>
              <span class="guilabel">User</span>: リモートログインアクセス権を持つユーザーの名前。
            </p></li><li class="listitem"><p>
              <span class="guilabel">パスワード</span>: リモートユーザーのパスワード。
            </p></li><li class="listitem"><p>
              <span class="guilabel">キーユーザー</span>: キーが有効なユーザーの名前 (オペレーティングシステムユーザーと同じでない場合)。
            </p></li><li class="listitem"><p>
              <span class="guilabel">キーパスフレーズ</span>: 必要に応じて、キーのパスフレーズ。
            </p></li><li class="listitem"><p>
              <span class="guilabel">キーファイル</span>: キーファイルへのパス。 デフォルトは <code class="filename">~/.ssh/id_rsa</code> です。 
            </p></li></ul></div><p>
          このページで設定した SSH プロパティは、クラスタ内のすべてのホストに適用されます。 これらは、<span class="bold"><strong>ホストの定義</strong></span>画面でホストプロパティを編集することで、特定のホストに対してオーバーライドできます。 
        </p><p>
          この画面では、次の 2 つのインストールプロパティも設定できます:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <span class="guilabel">MySQL クラスタのインストール</span>: この設定は、Auto-Installer が NDB Cluster ソフトウェア (存在する場合) をクラスタホストにインストールするソースを決定します。 使用可能な値とその効果を次に示します: 
            </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
                  <code class="literal">DOCKER</code>: から MySQL Cluster Docker イメージをインストールしてみます
                  <code class="uri">https://hub.docker.com/r/mysql/mysql-cluster/</code>
                  各ホスト上
                </p></li><li class="listitem"><p>
                  <code class="literal">REPO</code> : 各ホストの <a class="ulink" href="https://repo.mysql.com/" target="_top">MySQL リポジトリ</a>から NDB Cluster ソフトウェアをインストールしてみます
                </p></li><li class="listitem"><p>
                  <code class="literal">BOTH</code>: Docker イメージまたはソフトウェアのいずれかを各ホストのリポジトリからインストールし、リポジトリを優先
                </p></li><li class="listitem"><p>
                  <code class="literal">NONE</code>: NDB Cluster ソフトウェアをホストにインストールしないでください。これがデフォルトです
                </p></li></ol></div></li><li class="listitem"><p>
              <span class="guilabel">FW ポートを開く</span>: インストーラがすべてのホスト上の NDB CLuster プロセスに必要なポートを開こうとするようにするには、このチェックボックスをオンにします。
            </p></li></ul></div><p>
          次の図に、すべてのノードが <code class="literal">localhost</code> で実行されている小規模なテストクラスタの設定が表示された<span class="bold"><strong>クラスタの定義</strong></span>ページを示します:
        </p><div class="figure"><a name="fig-mysql-cluster-installer-define-cluster-local-setup"></a><p class="title"><b>図 23.11 テストクラスタの設定が表示された「NDB Cluster 自動インストーラクラスタの定義」画面</b></p><div class="figure-contents"><div class="mediaobject"><img src="images/define-cluster-local-setup.png" width="800" height="800" alt="内容は周囲のテキストで説明されています。"></div></div></div><br class="figure-break"><p>
          必要な設定を行ったら、構成ファイルに保存し、<span class="guibutton"> &amp; を次に保存</span>ボタンをクリックして<span class="bold"><strong>ホストの定義</strong></span>画面に進むことができます。
        </p><p>
          保存せずにインストーラを終了した場合、構成ファイルは変更されません。
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="mysql-cluster-installer-using-define-hosts"></a>NDB Cluster 自動インストーラの Define Hosts 画面</h5></div></div></div><a class="indexterm" name="idm45563235839392"></a><p>
          ここに示す<span class="bold"><strong>「Define Hosts」</strong></span>画面では、各クラスタホストのいくつかの主要なプロパティーを表示および指定できます。
        </p><div class="figure"><a name="fig-mysql-cluster-installer-define-hosts-start"></a><p class="title"><b>図 23.12 「NDB Cluster ホストの定義」画面, start</b></p><div class="figure-contents"><div class="mediaobject"><img src="images/define-hosts-start.png" width="1000" height="600" alt="内容は周囲のテキストで説明されています。"></div></div></div><br class="figure-break"><p>
          表示されるプロパティは次のとおりです:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <span class="guilabel">ホスト</span>: このホストの名前または IP アドレス
            </p></li><li class="listitem"><p>
              <span class="guilabel">Res.info</span>: インストーラがこのホストからリクエストされたリソース情報を取得できた場合に <code class="literal">OK</code> を表示
            </p></li><li class="listitem"><p>
              <span class="guilabel">Platform</span>: オペレーティングシステムまたはプラットフォーム
            </p></li><li class="listitem"><p>
              <span class="guilabel">メモリー (MB)</span>: このホストの RAM の量
            </p></li><li class="listitem"><p>
              <span class="guilabel">コア</span>: このホストで使用可能な CPU コアの数
            </p></li><li class="listitem"><p>
              <span class="guilabel">MySQL クラスタのインストールディレクトリ</span>: NDB Cluster ソフトウェアがこのホストにインストールされているディレクトリへのパス。デフォルトは<code class="filename">/usr/local/bin</code> です
            </p></li><li class="listitem"><p>
              <span class="guilabel">MySQL クラスタデータディレクトリ</span>: このホスト上の NDB Cluster プロセスによってデータに使用されるディレクトリへのパス。デフォルトは<code class="filename">/var/lib/mysql-cluster</code> です。
            </p></li><li class="listitem"><p>
              <span class="guilabel">DiskFree</span>: 空きディスク領域 (バイト)
            </p><p>
              複数のディスクがあるホストの場合、データディレクトリに使用されるディスク上の使用可能な領域のみが表示されます。
            </p></li></ul></div><p>
          この画面には、次のプロパティを含む各ホストの拡張ビューも表示されます:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <span class="guilabel">FDQN</span> : このホストの完全修飾ドメイン名。インストーラが接続、構成情報の配布、クラスタプロセスの起動と停止に使用します。
            </p></li><li class="listitem"><p>
              <span class="guilabel">内部 IP</span>: 別の場所で実行されているプロセスによってこのホストで実行されているクラスタプロセスとの通信に使用される IP アドレス。
            </p></li><li class="listitem"><p>
              <span class="guilabel">OS 詳細</span>: オペレーティングシステム名およびバージョン情報の詳細。
            </p></li><li class="listitem"><p>
              <span class="guilabel">FW のオープン</span>: このチェックボックスが有効になっている場合、インストーラは、クラスタプロセスに必要なホストファイアウォールのポートを開こうとします。
            </p></li><li class="listitem"><p>
              <span class="guilabel">REPO URL</span>: MySQL NDB Cluster リポジトリの URL
            </p></li><li class="listitem"><p>
              <span class="guilabel">DOCKER URL</span> : MySQL NDB CLuster Docker イメージの URL。NDB 8.0 の場合、これは <code class="literal">mysql/mysql-cluster:8.0</code> です。
            </p></li><li class="listitem"><p>
              <span class="guilabel">Install</span>: このチェックボックスが有効な場合、Auto-Installer は NDB Cluster ソフトウェアをこのホストにインストールしようとします
            </p></li></ul></div><p>
          拡張ビューを次に示します:
        </p><div class="figure"><a name="fig-mysql-cluster-installer-define-hosts-extended"></a><p class="title"><b>図 23.13 「NDB Cluster ホストの定義」画面、拡張ホスト情報ビュー</b></p><div class="figure-contents"><div class="mediaobject"><img src="images/define-hosts-extended.png" width="1000" height="600" alt="内容は周囲のテキストで説明されています。"></div></div></div><br class="figure-break"><p>
          表示内のすべてのセルは編集可能ですが、<span class="guilabel">「ホスト」</span>、<span class="guilabel">Res.info</span> および <span class="guilabel">FQDN</span> カラムのセルは例外です。
        </p><p>
          リモートホストから情報を取得するには時間がかかる場合があることに注意してください。 値を取得できなかったフィールドは省略記号 (<code class="literal">…</code>) で示されます。 リストでホストを選択して<span class="guilabel">「選択したホストのリフレッシュ」</span>ボタンをクリックすると、複数のホストからのリソース情報のフェッチを再試行できます。 
        </p><a class="indexterm" name="idm45563235785568"></a><h6><a name="idm45563235783472"></a>ホストの追加および削除</h6><p>
          次に示すように、<span class="guibutton">ホストの追加</span>ボタンをクリックし、<span class="guilabel">「新規ホストの追加」</span>ダイアログに示されている必要なプロパティを入力することで、複数のホストを追加できます:
        </p><div class="figure"><a name="fig-mysql-cluster-installer-add-host-widget"></a><p class="title"><b>図 23.14 「NDB Cluster のホストの追加」ダイアログ</b></p><div class="figure-contents"><div class="mediaobject"><img src="images/add-host-widget.png" width="250" height="405" alt="内容は周囲のテキストで説明されています。"></div></div></div><br class="figure-break"><p>
          このダイアログには、次のフィールドがあります:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <span class="guilabel">ホスト名</span>: 1 つ以上のホスト名、IP アドレス、またはその両方のカンマ区切りリスト。 これらは、Auto-Installer が実行されているホストからアクセスできる必要があります。 
            </p></li><li class="listitem"><p>
              <span class="guilabel">ホスト内部 IP (VPN)</span>: VPN または他の内部ネットワークで実行するようにクラスタを設定する場合は、他のホストのクラスタノードによる接続に使用する IP アドレスを入力します。
            </p></li><li class="listitem"><p>
              <span class="guilabel">キーベースの認証</span>: 選択すると、キーベースの認証が有効になります。 <span class="guilabel">User</span>、<span class="guilabel">Passphrase</span> および<span class="guilabel">「キーファイル」</span>の各フィールドに必要な追加情報を入力できます。 
            </p></li><li class="listitem"><p>
              <span class="guilabel">通常のログイン</span>: パスワードベースのログインを使用してこのホストにアクセスする場合は、<span class="guilabel">User</span> および<span class="guilabel">パスワード</span>フィールドに適切な情報を入力します。
            </p></li><li class="listitem"><p>
              <span class="guilabel">FW ポートを開く</span>: このチェックボックスを選択すると、インストーラは、このホストファイアウォールでクラスタプロセスに必要なポートを開こうとします。
            </p></li><li class="listitem"><p>
              <span class="guilabel">インストールの構成</span>: これをチェックすると、Auto-Install はこのホストで NDB Cluster ソフトウェアの設定を試みることができます。
            </p></li></ul></div><p>
          新しいホストとそのプロパティを保存するには、<span class="guilabel">「追加」</span>をクリックします。 変更を保存せずに取り消す場合は、かわりに<span class="guilabel">「取消」</span>をクリックします。 
        </p><p>
          同様に、<span class="guibutton">「Remove selected host(s)」</span>というラベルのボタンを使用して 1 台以上のホストを削除できます。 <span class="emphasis"><em>ホストを削除すると、そのホスト用に構成されたプロセスも削除されます</em></span>。 
        </p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">警告</div><p>
            <span class="guibutton">選択したホストの削除</span>はすぐに動作します。 確認ダイアログはありません。 エラーのあるホストを削除する場合は、<span class="guibutton">ホストの追加</span>を使用して名前とプロパティを手動で再入力する必要があります。 
          </p></div><p>
          <a class="link" href="mysql-cluster.html#mysql-cluster-installer-using-define-cluster" title="NDB Cluster 自動インストーラの Define Cluster 画面">「<span class="emphasis"><em>クラスタの定義</em></span> screen」</a>の SSH ユーザー資格証明が変更されると、Auto-Installer は、情報が欠落しているホストからリソース情報をリフレッシュしようとします。

        </p><p>
          ホストプラットフォーム名、ハードウェアリソース情報、インストールディレクトリおよびデータディレクトリを編集するには、グリッド内の対応するセルをクリックし、ホストを選択して<span class="guilabel">「選択したホストの編集」</span>というラベルのボタンをクリックします。 これにより、ここに示すように、これらのフィールドを編集できるダイアログボックスが表示されます。 
        </p><div class="figure"><a name="fig-mysql-cluster-installer-edit-hosts-widget"></a><p class="title"><b>図 23.15 「NDB Cluster 自動インストーラホストの編集」ダイアログ</b></p><div class="figure-contents"><div class="mediaobject"><img src="images/edit-host-widget.png" width="650" height="525" alt="内容は周囲のテキストで説明されています。"></div></div></div><br class="figure-break"><p>
          複数のホストを選択すると、編集した値が選択したすべてのホストに適用されます。
        </p><p>
          必要なすべてのホスト情報を入力したら、<span class="guibutton"> &amp; を次に保存</span>ボタンを使用して情報をクラスタ構成ファイルに保存し、<a class="link" href="mysql-cluster.html#fig-mysql-cluster-installer-define-processes" title="図 23.16 「NDB Cluster 自動インストーラプロセスの定義」ダイアログ">「<span class="bold"><strong>プロセスの定義</strong></span> screen」</a>に進み、そこで NDB Cluster プロセスを 1 つ以上のホストに設定できます。
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="mysql-cluster-installer-using-define-processes"></a>NDB Cluster 自動インストーラの Define Processes 画面</h5></div></div></div><a class="indexterm" name="idm45563235736176"></a><p>
          ここに示す<span class="bold"><strong>プロセスの定義</strong></span>画面では、NDB Cluster プロセス (ノード) をクラスタホストに割り当てる方法が提供されます:
        </p><div class="figure"><a name="fig-mysql-cluster-installer-define-processes"></a><p class="title"><b>図 23.16 「NDB Cluster 自動インストーラプロセスの定義」ダイアログ</b></p><div class="figure-contents"><div class="mediaobject"><img src="images/define-processes-start.png" width="600" height="435" alt="内容は周囲のテキストで説明されています。 前に定義したように、プロセスツリートポロジの例には「任意のホスト」および「localhost」が含まれます。 localhost ツリーには、次のプロセスが含まれます: 管理モード 1、API ノード 1、API ノード 2、API ノード 3、SQL ノード 1、SQL ノード 2、マルチスレッドデータノード 1、およびマルチスレッドデータノード 2。 このパネルには、「プロセスの追加」および「プロセスの削除」ボタンもあります。"></div></div></div><br class="figure-break"><p>
          この画面には、クラスタホストと各ホストで実行するように設定されたプロセスを示すプロセスツリー、およびツリーで現在選択されている項目に関する情報を表示するパネルが含まれています。
        </p><p>
          特定のクラスタでこの画面に最初にアクセスすると、ホストの数に基づいてデフォルトのプロセスセットが自動的に定義されます。 後で<a class="link" href="mysql-cluster.html#mysql-cluster-installer-using-define-hosts" title="NDB Cluster 自動インストーラの Define Hosts 画面">「<span class="bold"><strong>ホストの定義</strong></span> screen」</a>に戻ってすべてのホストを削除し、新しいホストを追加すると、新しいデフォルトのプロセスセットも定義されます。 
        </p><p>
          NDB Cluster プロセスは、このリストで説明されているタイプです:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><b>管理ノード. </b>
                個々のデータノードの停止、ノードやクラスタのステータスのクエリー、バックアップの作成などの管理タスクを実行します。 実行可能ファイル: <span class="command"><strong>ndb_mgmd</strong></span>。 
              </p></li><li class="listitem"><p><b>シングルスレッドのデータノード. </b>
                データを格納し、クエリーを実行します。 実行可能ファイル: <span class="command"><strong>ndbd</strong></span>。 
              </p></li><li class="listitem"><p><b>マルチスレッドのデータノード. </b>
                並列で実行される複数のワーカースレッドによってデータを格納し、クエリーを実行します。 実行可能ファイル: <span class="command"><strong>ndbmtd</strong></span>。 
              </p></li><li class="listitem"><p><b>SQL ノード. </b>
                <code class="literal">NDB</code> に対して SQL クエリーを実行するための MySQL サーバー。 実行可能ファイル: <span class="command"><strong>mysqld</strong></span>。 
              </p></li><li class="listitem"><p><b>API ノード. </b>
                SQL を使用せずに、NDB API またはその他の低レベルのクライアント API を使用して <code class="literal">NDB</code> 内のデータにアクセスするクライアント。 詳細は、<a class="ulink" href="https://dev.mysql.com/doc/ndbapi/en/" target="_top">MySQL NDB Cluster API Developer Guide</a>を参照してください。 
              </p></li></ul></div><p>
          プロセス (ノード) タイプの詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-basics" title="23.1.1 NDB Cluster のコア概念">セクション23.1.1「NDB Cluster のコア概念」</a>を参照してください。
        </p><p>
          ツリーに表示されるプロセスには、簡単に識別できるように (たとえば、<code class="literal">SQL node 1</code>、<code class="literal">SQL node 2</code> のように) ホストごとにタイプ別の連番が付けられています。
        </p><p>
          個々の管理ノード、データノード、または SQL プロセスは、特定のホストに割り当てる必要があり、ほかのホストでは実行できません。 API ノードは 1 台のホストに割り当てる<span class="emphasis"><em>こともできます</em></span>が、これは必須ではありません。 代わりに、ほかのホストとは別にツリー内に表示される<span class="guimenuitem">「Any host」</span>エントリに別途割り当てることができます。このエントリは、任意のホストで実行できるプロセスのプレースホルダとして機能します。 <span class="emphasis"><em>この<span class="guimenuitem">「Any host」</span>エントリを使用できるのは API プロセスだけです</em></span>。 
        </p><p><b>プロセスの追加. </b>
            <a class="indexterm" name="idm45563235697424"></a>特定のホストに新しいプロセスを追加するには、ツリーでそのホストエントリを右クリックして<span class="guilabel">「プロセスの追加」</span>ポップアップが表示されたらそれを選択するか、プロセスツリーでホストを選択して、プロセスツリーの下の<span class="guibutton">プロセスの追加</span>ボタンを押します。 これらのアクションのどちらを実行した場合も、ここに示すようなプロセス追加ダイアログが開きます。 
          </p><div class="figure"><a name="fig-mysql-cluster-installer-add-process"></a><p class="title"><b>図 23.17 NDB Cluster 自動インストーラのプロセスの追加ダイアログ</b></p><div class="figure-contents"><div class="mediaobject"><img src="images/add-process-widget.png" width="600" height="300" alt="ほとんどのコンテンツは周囲のテキストで説明されています。 2 つのオプションがある「Add new process」というタイトルのウィンドウを表示:「API node」が選択された選択ボックスと、「API node 4」がプレーンテキストとして入力された「Enter process name:」が表示された「Select process type:」。 アクションボタンには、「取消」および「追加」があります。"></div></div></div><br class="figure-break"><p>
          ここでは、このセクションで前述した利用可能なプロセスタイプを選択できます。必要に応じて、提案された値の代わりに任意のプロセス名を入力することもできます。
        </p><p><b>プロセスの削除. </b>
            <a class="indexterm" name="idm45563235683536"></a>プロセスを削除するには、ツリーでそのプロセスを選択し、<span class="guibutton"> Del process </span>ボタンを使用します。
          </p><p>
          プロセスツリーでプロセスを選択すると、そのプロセスに関する情報が情報パネルに表示され、ここでプロセス名とそのタイプを変更できます。 マルチスレッドデータノード (<span class="command"><strong>ndbmtd</strong></span>) をシングルスレッドデータノード (<span class="command"><strong>ndbd</strong></span>) に変更することも、その逆のみを変更することもできます。ほかのプロセスタイプの変更は許可されません。 <span class="emphasis"><em>他のプロセスタイプ間で変更を行う場合は、最初に元のプロセスを削除してから、目的のタイプの新しいプロセスを追加する必要があります</em></span>。 
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="mysql-cluster-installer-using-define-parameters"></a>NDB Cluster 自動インストーラのパラメータの定義画面</h5></div></div></div><a class="indexterm" name="idm45563235675440"></a><p>
          <a class="link" href="mysql-cluster.html#mysql-cluster-installer-using-define-processes" title="NDB Cluster 自動インストーラの Define Processes 画面">「<span class="bold"><strong>プロセスの定義</strong></span> screen」</a>と同様に、この画面にはプロセスツリーが含まれています。<span class="bold"><strong>パラメータの定義</strong></span>プロセスツリーは、<span class="guimenu">「管理レイヤー」</span>、<span class="guimenu">「データレイヤー」</span>、<span class="guimenu">「SQL レイヤー」</span>および<span class="guimenu">「API レイヤー」</span>というラベルの付いたグループにプロセスまたはノードタイプ別に編成されています。 情報パネルには、現在選択されているアイテムに関する情報が表示されます。 <span class="bold"><strong>「Define Attributes」</strong></span>画面をここに示します。 
        </p><div class="figure"><a name="fig-mysql-cluster-installer-define-parameters-start"></a><p class="title"><b>図 23.18 「NDB Cluster Auto-Installer パラメータの定義」画面</b></p><div class="figure-contents"><div class="mediaobject"><img src="images/define-parameters-start.png" width="800" height="600" alt="内容は周囲のテキストで説明されています。"></div></div></div><br class="figure-break"><p>
          <span class="guilabel">「拡張構成の表示」</span>のラベルが付いたチェックボックスを選択すると、データノードおよび SQL ノードプロセスの拡張オプションが情報ペインに表示されます。 これらのオプションは、表示されているかどうかに関係なく設定および使用されます。 この動作は、<span class="guilabel">「設定」</span>の下の<span class="guimenuitem">「拡張構成オプションの表示」</span>をチェックしてグローバルに有効にすることもできます (<a class="xref" href="mysql-cluster.html#mysql-install-auto-settings-help-menus" title="NDB Cluster インストーラの Settings および Help メニュー">NDB Cluster インストーラの Settings および Help メニュー</a> を参照)。 
        </p><p>
          1 つのプロセスの属性を編集するには、ツリーからそのプロセスを選択します。クラスタに含まれる同じタイプのプロセスすべての属性を編集するには、いずれかの<span class="guimenu">「Layer」</span>フォルダを選択します。 プロセス単位で設定された特定の属性の値は、該当するプロセスに以前に適用されていた属性のグループ単位の設定をオーバーライドします。 このような情報パネルの例 (SQL プロセスの場合) をここに示します。 
        </p><div class="figure"><a name="fig-mysql-cluster-installer-define-parameters-process"></a><p class="title"><b>図 23.19 パラメータの定義 - プロセス属性</b></p><div class="figure-contents"><div class="mediaobject"><img src="images/define-parameters-process.png" width="800" height="675" alt="内容は周囲のテキストで説明されています。"></div></div></div><br class="figure-break"><p>
          値をオーバーライドできる属性は、プラス記号が付いたボタンとともに情報パネルに表示されます。 この <span class="guibutton">+</span> ボタンをクリックすると、属性の入力ウィジェットがアクティブ化され、属性の値を変更できるようになります。 値がオーバーライドされると、このボタンは<span class="guibutton"> X </span>を表示するボタンに変わります。 <span class="guibutton"> X </span>ボタンを使用すると、特定の属性に加えられた変更が元に戻され、すぐに事前定義済の値に戻ります。 
        </p><p>
          すべての構成属性には、インストーラがホスト名、ノード ID、ノードタイプなどの要因に基づいて計算した事前定義値があります。 ほとんどの場合、これらの値はそのままにしておくことができます。 これらの操作をまだ習熟していない場合は、属性値を変更する前に該当するドキュメントを読むことを強くお勧めします。 この情報を見つけやすくするために、情報パネルに表示される各属性名は、NDB Cluster のオンラインドキュメントの説明にリンクされています。 
        </p></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="mysql-cluster-installer-using-deploy-configuration"></a>NDB Cluster 自動インストーラの Deploy Configuration 画面</h5></div></div></div><a class="indexterm" name="idm45563235640496"></a><p>
          この画面では、次のタスクを実行できます。
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              適用されるプロセス起動コマンドと構成ファイルを確認します
            </p></li><li class="listitem"><p>
              すべてのクラスタホストで必要なファイルおよびディレクトリを作成して、構成ファイルを配布します (つまり、現在の構成に従ってクラスタを<span class="emphasis"><em>配備</em></span>します)
            </p></li><li class="listitem"><p>
              クラスタを起動および停止します
            </p></li></ul></div><p>
          <span class="bold"><strong>構成のデプロイ</strong></span>画面を次に示します:
        </p><div class="figure"><a name="fig-mysql-cluster-installer-deploy-configuration"></a><p class="title"><b>図 23.20 「NDB Cluster 自動インストーラの配備構成」画面</b></p><div class="figure-contents"><div class="mediaobject"><img src="images/deploy-configuration-start.png" width="800" height="675" alt="内容は周囲のテキストで説明されています。"></div></div></div><br class="figure-break"><p>
          <a class="link" href="mysql-cluster.html#mysql-cluster-installer-using-define-parameters" title="NDB Cluster 自動インストーラのパラメータの定義画面">「<span class="bold"><strong>パラメータの定義</strong></span> screen」</a>と同様に、この画面にはプロセスタイプ別に編成されたプロセスツリーが表示されます。 ツリー内の各プロセスの横には、プロセスの現在のステータスを示すステータスアイコンがあります: 接続 (<code class="literal">CONNECTED</code>)、起動 (<code class="literal">STARTING</code>)、実行 (<code class="literal">STARTED</code>)、停止 (<code class="literal">STOPPING</code>) または切断 (<code class="literal">NO_CONTACT</code>)。 このアイコンは、プロセスが接続されているか実行中の場合は緑色、起動中または停止中の場合は黄色、プロセスが停止しているか管理サーバーから接続できない場合は赤色で表示されます。 
        </p><p>
          この画面には、起動コマンドまたは選択したプロセスの開始に必要なコマンドを示す 2 つの情報パネルも含まれています。 (プロセスによっては、初期化が必要な場合など、複数のコマンドが必要な場合があります。) もう一方のパネルには、指定されたプロセスの構成ファイルがある場合、その内容が表示されます。 
        </p><p>
          この画面には、次のリストで説明する機能としてラベル付けされ、実行される 4 つのボタンもあります:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
              <span class="guibutton">クラスタのインストール</span>: このリリースでは機能しません。将来のリリースを対象とした実装です。
            </p></li><li class="listitem"><p>
              <span class="guibutton">「Deploy cluster」</span>: 構成が有効かどうか検証します。 クラスタホスト上に必要なディレクトリを作成し、各ホストに構成ファイルを配布します。 進捗バーには、次に示すようにデプロイメントの進行状況が表示され、次に示すように、デプロイメントが完了するとダイアログが表示されます: 
            </p><div class="figure"><a name="fig-mysql-cluster-installer-deploy-configuration-deploy-cluster"></a><p class="title"><b>図 23.21 クラスタデプロイメントプロセス</b></p><div class="figure-contents"><div class="mediaobject"><img src="images/deploy-configuration-deploy-cluster.png" width="800" height="675" alt="内容は周囲のテキストで説明されています。"></div></div></div><br class="figure-break"></li><li class="listitem"><p>
              <span class="guibutton">「Start cluster」</span>: <span class="guibutton">「Deploy cluster」</span>と同様にクラスタを配備し、その後、すべてのクラスタプロセスを正しい順序で起動します。
            </p><p>
              これらのプロセスの起動には、ある程度時間がかかることがあります。 完了までの推定時間が長すぎる場合は、起動プロセスを取り消しまたは続行できます。 ここに示すように、進行状況バーに起動手順の現在のステータスが示されます。 
            </p><div class="figure"><a name="fig-mysql-cluster-installer-deploy-configuration-start-cluster"></a><p class="title"><b>図 23.22 進行状況バーのあるクラスタ起動プロセス</b></p><div class="figure-contents"><div class="mediaobject"><img src="images/deploy-configuration-start-cluster.png" width="800" height="675" alt="内容は周囲のテキストで説明されています。"></div></div></div><br class="figure-break"><p>
              プロセスツリーに表示される項目の横にあるプロセスステータスアイコンも、各プロセスのステータスで更新されます。
            </p><p>
              次に示すように、起動プロセスが完了すると、確認ダイアログが表示されます:
            </p><div class="figure"><a name="fig-mysql-cluster-installer-deploy-configuration-start-cluster-started"></a><p class="title"><b>図 23.23 クラスタの起動、プロセス完了ダイアログ</b></p><div class="figure-contents"><div class="mediaobject"><img src="images/deploy-configuration-start-cluster-started.png" width="800" height="675" alt="内容は周囲のテキストで説明されています。"></div></div></div><br class="figure-break"></li><li class="listitem"><p>
              <span class="guibutton">クラスタの停止</span>: クラスタを起動したら、これを使用して停止できます。 クラスタの起動と同様に、クラスタは瞬時にシャットダウンされず、ある程度時間がかかることがあります。 クラスタの起動時に表示されるのと同様の進行状況バーが表示され、プロセスツリーの横にあるプロセスステータスアイコンと同じように、クラスタのシャットダウン手順の現在の大まかなステータスが示されます。 進捗バーは次のとおりです: 
            </p><div class="figure"><a name="fig-mysql-cluster-installer-deploy-configuration-stop-cluster"></a><p class="title"><b>図 23.24 クラスタ停止プロセス (進行状況バーあり)</b></p><div class="figure-contents"><div class="mediaobject"><img src="images/deploy-configuration-stop-cluster.png" width="800" height="675" alt="内容は周囲のテキストで説明されています。"></div></div></div><br class="figure-break"><p>
              停止プロセスが完了すると、確認ダイアログが表示されます:
            </p><div class="figure"><a name="fig-mysql-cluster-installer-deploy-configuration-stop-cluster-stopped"></a><p class="title"><b>図 23.25 Cluster Shutdown, Process Completed ダイアログ</b></p><div class="figure-contents"><div class="mediaobject"><img src="images/deploy-configuration-stop-cluster-stopped.png" width="800" height="675" alt="内容は周囲のテキストで説明されています。"></div></div></div><br class="figure-break"></li></ul></div><p>
          Auto-Installer は、管理ノードごとに NDB ノードパラメータを含む <code class="filename">config.ini</code> ファイルと、クラスタ内の <span class="command"><strong>mysqld</strong></span> プロセスごとに適切なオプションを含む <code class="filename">my.cnf</code> ファイルを生成します。 データノードまたは API ノードの構成ファイルは作成されません。 
        </p></div></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-cluster-configuration"></a>23.3 NDB Cluster の構成</h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-quick">23.3.1 NDB Cluster のクイックテスト設定</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-configuration-overview">23.3.2 NDB Cluster
      構成パラメータ、オプション、および変数の概要</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-config-file">23.3.3 NDB Cluster 構成ファイル</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-interconnects">23.3.4 NDB Cluster での高速インターコネクトの使用</a></span></dt></dl></div><a class="indexterm" name="idm45563235567296"></a><a class="indexterm" name="idm45563235565840"></a><p>
    NDB Cluster の一部である MySQL
    サーバーは、<code class="literal">NDB</code>
    ストレージエンジンを採用しているという点で、通常の
    (クラスタ化されていない) MySQL
    サーバーとは主に異なります。 このエンジンは
    <code class="literal">NDBCLUSTER</code>
    と呼ばれることもありますが、<code class="literal">NDB</code>
    が推奨されます。
  </p><p>
    不要なリソースの割り当てを避けるため、デフォルトでは
    <code class="literal">NDB</code>
    ストレージエンジンを無効にするようにサーバーが構成されます。
    <code class="literal">NDB</code>
    を有効にするには、サーバーの
    <code class="filename">my.cnf</code>
    構成ファイルを変更するか、<code class="option">--ndbcluster</code>
    オプションを指定してサーバーを起動する必要があります。
  </p><p>
    この MySQL
    サーバーはクラスタの一部であるため、管理ノードにアクセスしてクラスタ構成データを取得する方法も知っている必要があります。
    デフォルトの動作では、<code class="literal">localhost</code>
    上の管理ノードを検索します。
    ただし、それがほかの場所であることを指定する必要がある場合は、<code class="filename">my.cnf</code>
    で、または <span class="command"><strong>mysql</strong></span>
    クライアントを使用してこれを行います。
    <code class="literal">NDB</code>
    ストレージエンジンを使用する前に、少なくとも 1
    つの管理ノードと必要なデータノードが使用可能である必要があります。
  </p><p>
    <code class="option">--ndbcluster</code> および NDB Cluster
    に固有のその他の <span class="command"><strong>mysqld</strong></span>
    オプションの詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-program-options-mysqld" title="23.3.3.9.1 NDB Cluster の MySQL Server オプション">セクション23.3.3.9.1「NDB Cluster の MySQL Server オプション」</a>
    を参照してください。
  </p><p>
    NDB Cluster
    のインストールに関する一般情報については、<a class="xref" href="mysql-cluster.html#mysql-cluster-installation" title="23.2 NDB Cluster のインストール">セクション23.2「NDB Cluster のインストール」</a>
    を参照してください。
  </p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-cluster-quick"></a>23.3.1 NDB Cluster のクイックテスト設定</h3></div></div></div><a class="indexterm" name="idm45563235545616"></a><a class="indexterm" name="idm45563235543488"></a><a class="indexterm" name="idm45563235541568"></a><p>
      基本を理解するために、機能する NDB Cluster
      のもっとも単純な構成について説明します。
      その後、この章の関連するほかのセクションに示した情報から、必要なセットアップを設計できるようになります。
    </p><p>
      最初に、システムの <code class="literal">root</code>
      ユーザーとして次のコマンドを実行して、<code class="filename">/var/lib/mysql-cluster</code>
      などの構成ディレクトリを作成する必要があります。
    </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>mkdir /var/lib/mysql-cluster</code></strong>
</pre><p>
      このディレクトリで、次の情報を含む
      <code class="filename">config.ini</code>
      という名前のファイルを作成します。
      必要に応じて、<code class="literal">HostName</code> および
      <code class="literal">DataDir</code>
      をシステムの適切な値に置き換えます。
    </p><pre class="programlisting"># file "config.ini" - showing minimal setup consisting of 1 data node,
# 1 management server, and 3 MySQL servers.
# The empty default sections are not required, and are shown only for
# the sake of completeness.
# Data nodes must provide a hostname but MySQL Servers are not required
# to do so.
# If you don't know the hostname for your machine, use localhost.
# The DataDir parameter also has a default value, but it is recommended to
# set it explicitly.
# Note: [db], [api], and [mgm] are aliases for [ndbd], [mysqld], and [ndb_mgmd],
# respectively. [db] is deprecated and should not be used in new installations.

[ndbd default]
NoOfReplicas= 1

[mysqld  default]
[ndb_mgmd default]
[tcp default]

[ndb_mgmd]
HostName= myhost.example.com

[ndbd]
HostName= myhost.example.com
DataDir= /var/lib/mysql-cluster

[mysqld]
[mysqld]
[mysqld]
</pre><p>
      これで、<span class="command"><strong>ndb_mgmd</strong></span>
      管理サーバーを起動できるようになりました。
      デフォルトでは現在の作業ディレクトリ内にある
      <code class="filename">config.ini</code>
      ファイルの読み取りが試行されるため、このファイルが配置されているディレクトリに場所を移動してから
      <span class="command"><strong>ndb_mgmd</strong></span> を起動します。
    </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>cd /var/lib/mysql-cluster</code></strong>
shell&gt; <strong class="userinput"><code>ndb_mgmd</code></strong>
</pre><p>
      次に、<span class="command"><strong>ndbd</strong></span> を実行して 1
      つのデータノードを起動します。
    </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>ndbd</code></strong>
</pre><p>
      <span class="command"><strong>ndbd</strong></span>
      の起動時に使用できるコマンド行オプションについては、<a class="xref" href="mysql-cluster.html#mysql-cluster-program-options-common" title="23.4.32 NDB Cluster プログラムに共通のオプション — NDB Cluster プログラムに共通のオプション">セクション23.4.32「NDB Cluster プログラムに共通のオプション — NDB Cluster プログラムに共通のオプション」</a>を参照してください。
    </p><p>
      デフォルトでは、<span class="command"><strong>ndbd</strong></span> は
      <code class="literal">localhost</code> のポート 1186
      で管理サーバーを検索します。
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
        バイナリ tarball から MySQL
        をインストールした場合は、<span class="command"><strong>ndb_mgmd</strong></span>
        および <span class="command"><strong>ndbd</strong></span>
        サーバーのパスを明示的に指定する必要があります。
        (通常、これらは<code class="filename">/usr/local/mysql/bin</code>
        にあります。)
      </p></div><p>
      最後に、MySQL データディレクトリ (通常は
      <code class="filename">/var/lib/mysql</code> または
      <code class="filename">/usr/local/mysql/data</code>)
      に場所を変更して、NDB
      ストレージエンジンを有効にするのに必要なオプションが
      <code class="filename">my.cnf</code>
      ファイルに含まれていることを確認します。
    </p><pre class="programlisting">[mysqld]
ndbcluster
</pre><p>
      これで、MySQL
      サーバーを通常どおり起動できるようになりました。
    </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>mysqld_safe --user=mysql &amp;</code></strong>
</pre><p>
      しばらく待ってから、MySQL
      サーバーが適切に実行されていることを確認します。
      <code class="literal">「mysql
      ended」</code>という通知が表示された場合は、サーバーの
      <code class="filename">.err</code>
      ファイルをチェックして、どのような不具合があったかを調べます。
    </p><p>
      ここまで問題なく進んだ場合は、クラスタを使用し始めることができます。
      サーバーに接続して、<code class="literal">NDBCLUSTER</code>
      ストレージエンジンが有効になっていることを確認します。
    </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>mysql</code></strong>
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 1 to server version: 8.0.25

Type 'help;' or '\h' for help. Type '\c' to clear the buffer.

mysql&gt; <strong class="userinput"><code>SHOW ENGINES\G</code></strong>
...
*************************** 12. row ***************************
Engine: NDBCLUSTER
Support: YES
Comment: Clustered, fault-tolerant, memory-based tables
*************************** 13. row ***************************
Engine: NDB
Support: YES
Comment: Alias for NDBCLUSTER
...
</pre><p>
      前の出力例に表示されている行番号は、サーバーの構成方法によっては、使用しているシステムで表示されるものと異なる可能性があります。
    </p><p>
      <code class="literal">NDBCLUSTER</code>
      テーブルを作成してみます。
    </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>mysql</code></strong>
mysql&gt; <strong class="userinput"><code>USE test;</code></strong>
Database changed

mysql&gt; <strong class="userinput"><code>CREATE TABLE ctest (i INT) ENGINE=NDBCLUSTER;</code></strong>
Query OK, 0 rows affected (0.09 sec)

mysql&gt; <strong class="userinput"><code>SHOW CREATE TABLE ctest \G</code></strong>
*************************** 1. row ***************************
       Table: ctest
Create Table: CREATE TABLE `ctest` (
  `i` int(11) default NULL
) ENGINE=ndbcluster DEFAULT CHARSET=latin1
1 row in set (0.00 sec)
</pre><p>
      ノードが適切にセットアップされたことをチェックするには、管理クライアントを起動します。
    </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>ndb_mgm</code></strong>
</pre><a class="indexterm" name="idm45563235492688"></a><p>
      クラスタのステータスに関するレポートを取得するには、管理クライアント内で
      <span class="command"><strong>SHOW</strong></span> コマンドを使用します。
    </p><pre class="programlisting">ndb_mgm&gt; <strong class="userinput"><code>SHOW</code></strong>
Cluster Configuration
---------------------
[ndbd(NDB)]     1 node(s)
id=2    @127.0.0.1  (Version: 8.0.23-ndb-8.0.23, Nodegroup: 0, *)

[ndb_mgmd(MGM)] 1 node(s)
id=1    @127.0.0.1  (Version: 8.0.23-ndb-8.0.23)

[mysqld(API)]   3 node(s)
id=3    @127.0.0.1  (Version: 8.0.23-ndb-8.0.23)
id=4 (not connected, accepting connect from any host)
id=5 (not connected, accepting connect from any host)
</pre><p>
      これで、動作中の NDB Cluster
      が正常に設定されました。
      これで、<code class="literal">ENGINE=NDBCLUSTER</code>
      またはそのエイリアスである
      <code class="literal">ENGINE=NDB</code>
      を指定して作成したテーブルを使用して、クラスタにデータを格納できます。
    </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-cluster-configuration-overview"></a>23.3.2 NDB Cluster
      構成パラメータ、オプション、および変数の概要</h3></div></div></div><div class="toc"><dl class="toc"><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-params-ndbd">23.3.2.1 NDB Cluster データノード構成パラメータ</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-params-mgmd">23.3.2.2 NDB Cluster 管理ノードの構成パラメータ</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-params-api">23.3.2.3 NDB Cluster SQL ノードおよび API ノードの構成パラメータ</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-params-other">23.3.2.4 その他の NDB Cluster 構成パラメータ</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-option-tables">23.3.2.5 NDB Cluster mysqld オプションおよび変数のリファレンス</a></span></dt></dl></div><a class="indexterm" name="idm45563235483200"></a><a class="indexterm" name="idm45563235481088"></a><p>
      次のいくつかのセクションでは、NDB Cluster
      プロセスとして実行するときに
      <span class="command"><strong>mysqld</strong></span> によって <code class="filename">my.cnf</code>
      ファイルまたはコマンド行から読み取られるオプションおよび変数のほかに、ノードの動作のさまざまな側面を制御するために
      <code class="filename">config.ini</code> ファイルで使用される NDB
      Cluster
      ノード構成パラメータのサマリーテーブルを提供します。
      各ノードパラメータテーブルには、特定のタイプ
      (<code class="literal">ndbd</code>, <code class="literal">ndb_mgmd</code>,
      <code class="literal">mysqld</code>, <code class="literal">computer</code>,
      <code class="literal">tcp</code> または <code class="literal">shm</code>)
      のパラメータがリストされます。
      すべてのテーブルには、パラメータ、オプションまたは変数のデータ型に加えて、必要に応じてデフォルト値、最小値および最大値が含まれます。
    </p><p><b>ノードの再起動時の考慮事項. </b>
        ノードパラメータの場合、これらのテーブルには、必要な再起動のタイプ
        (ノードの再起動またはシステムの再起動)
        と、特定の構成パラメータの値を変更するために
        <code class="option">--initial</code>
        で再起動する必要があるかどうかも示されます。
        ノードの再起動またはノードの初期再起動を実行する場合は、すべてのクラスタデータノードを順番に再起動する必要があります
        (<span class="firstterm">ローリング再起動</span>とも呼ばれます)。
        <code class="literal">node</code>
        としてマークされたクラスタ構成パラメータは、オンラインで
        (つまり、この方法でクラスタをシャットダウンすることなく)
        更新できます。
        ノードの初期再起動では、<code class="option">--initial</code>
        オプションを指定して各 <span class="command"><strong>ndbd</strong></span>
        プロセスを再起動する必要があります。
      </p><p>
      システムの再起動では、クラスタ全体を完全にシャットダウンして再起動する必要があります。
      システムの初期再起動では、クラスタのバックアップを取り、シャットダウン後にクラスタファイルシステムを消去して、再起動後にバックアップからリストアする必要があります。
    </p><p>
      どのクラスタ再起動でも、クラスタのすべての管理サーバーを再起動して、更新された構成パラメータ値を読み取ることができるようにする必要があります。
    </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">重要</div><p>
        数値型のクラスタパラメータの値は通常問題なく増やすことができますが、そのような調整は比較的小さいインクリメントで徐々に行うことをお勧めします。
        多くのパラメータは、ローリング再起動を使用してオンラインで増やすことができます。
      </p><p>
        ただし、このようなパラメータ値の削減は、ノードの再起動、ノードの初期再起動、またはクラスタの完全なシステムの再起動のどれを使用するかに関係なく、安易に行うべきではありません。その場合は、事前に入念な計画とテストを行うことをお勧めします。
        これは、メモリー使用やディスクスペースに関連するパラメータ
        (<code class="literal">MaxNoOfTables</code>、<code class="literal">MaxNoOfOrderedIndexes</code>、<code class="literal">MaxNoOfUniqueHashIndexes</code>
        など) に関して特に当てはまります。
        さらに、一般的には、メモリーおよびディスク使用に関連する構成パラメータは単純なノードの再起動により値を増やすことができますが、値を減らすにはノードの初期再起動が必要になります。
      </p></div><p>
      これらのパラメータの一部は、複数のタイプのクラスタノードの構成に使用できるため、複数の表に表示されている場合があります。
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
        これらの表では、多くの場合、最大値として
        <code class="literal">4294967039</code> が表示されています。
        この値は、<code class="literal">NDBCLUSTER</code>
        のソースで <code class="literal">MAX_INT_RNIL</code>
        として定義されており、<code class="literal">0xFFFFFEFF</code>、または
        <code class="literal">2<sup>32</sup> -
        2<sup>8</sup> - 1</code> と等価です。
      </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-params-ndbd"></a>23.3.2.1 NDB Cluster データノード構成パラメータ</h4></div></div></div><a class="indexterm" name="idm45563235448976"></a><a class="indexterm" name="idm45563235446864"></a><a class="indexterm" name="idm45563235445632"></a><p>
        このセクションのリストは、NDB Cluster
        データノードを構成するために
        <code class="filename">config.ini</code>
        ファイルの<code class="literal">[ndbd]</code>または<code class="literal">[ndbd
        default]</code>セクションで使用されるパラメータに関する情報を提供します。
        これらの各パラメータに関する詳しい説明およびその他の追加情報については、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndbd-definition" title="23.3.3.6 NDB Cluster データノードの定義">セクション23.3.3.6「NDB Cluster データノードの定義」</a>を参照してください。
      </p><p>
        これらのパラメータは、マルチスレッドバージョンの
        <span class="command"><strong>ndbd</strong></span> である <span class="command"><strong>ndbmtd</strong></span>
        にも適用されます。
        詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="23.4.3 ndbmtd — NDB Cluster データノードデーモン (マルチスレッド)">セクション23.4.3「ndbmtd — NDB Cluster データノードデーモン (マルチスレッド)」</a>を参照してください。
      </p><div class="itemizedlist"><a name="ndbparam-summary-list-ndbd"></a><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-arbitration">Arbitration</a></code>:
            ノード障害時のスプリットブレインの問題を回避するためのアービトレーションの実行方法.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-arbitrationtimeout">ArbitrationTimeout</a></code>:
            データベースパーティションがアービトレーション信号を待機する最大時間
            (ミリ秒).
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-backupdatabuffersize">BackupDataBufferSize</a></code>:
            バックアップのデータバッファーのデフォルトサイズ
            (バイト).
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-backupdatadir">BackupDataDir</a></code>:
            バックアップを格納する場所へのパス。 *
            有効な * デフォルトが FileSystemPath/BACKUP
            になるように、文字列'/BACKUP'が常にこの設定に追加されることに注意してください.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-backupdiskwritespeedpct">BackupDiskWriteSpeedPct</a></code>:
            バックアップの開始時に LCP
            用に予約するデータノードの割り当て済み最大書き込み速度
            (MaxDiskWriteSpeed) の割合を設定.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-backuplogbuffersize">BackupLogBufferSize</a></code>:
            バックアップのログバッファのデフォルトサイズ
            (バイト).
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-backupmaxwritesize">BackupMaxWriteSize</a></code>:
            バックアップによるファイルシステム書込みの最大サイズ
            (バイト).
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-backupmemory">BackupMemory</a></code>:
            ノード当たりのバックアップに割り当てられた合計メモリー
            (バイト).
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-backupreportfrequency">BackupReportFrequency</a></code>:
            バックアップ中のバックアップステータスレポートの頻度
            (秒).
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-backupwritesize">BackupWriteSize</a></code>:
            バックアップによるファイルシステム書込みのデフォルトサイズ
            (バイト).
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-batchsizeperlocalscan">BatchSizePerLocalScan</a></code>:
            保留ロックがあるスキャンのロックレコード数の計算に使用されます.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-buildindexthreads">BuildIndexThreads</a></code>:
            システムまたはノードの再起動時に順序付けされた索引の構築に使用するスレッドの数。
            ndb_restore --rebuild-indexes
            の実行時にも適用されます。
            このパラメータを 0
            に設定すると、順序付き索引のマルチスレッド構築が無効になります.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-compressedbackup">CompressedBackup</a></code>:
            zlib
            を使用した書込み時のバックアップの圧縮.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-compressedlcp">CompressedLCP</a></code>:
            zlib を使用した圧縮 LCP の書き込み.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-connectcheckintervaldelay">ConnectCheckIntervalDelay</a></code>:
            データノード接続性チェックステージ間の時間。
            データノードは、1
            間隔後は疑わしいと見なされ、2
            間隔後は応答なしで停止.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-crashoncorruptedtuple">CrashOnCorruptedTuple</a></code>:
            有効にすると、破損したタプルが検出されるたびにノードが強制的に停止されます.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-datadir">DataDir</a></code>:
            このノードのデータディレクトリ.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-datamemory">DataMemory</a></code>:
            データを格納するために割り当てられた各データノード上のバイト数。使用可能なシステム
            RAM および IndexMemory のサイズに従います.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-defaulthashmapsize">DefaultHashMapSize</a></code>:
            テーブルハッシュマップに使用するサイズ
            (バケット単位) を設定します。 3
            つの値がサポートされています: 0、240
            および 3840。.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-dicttrace">DictTrace</a></code>:
            NDB 開発のための DBDICT デバッグの有効化.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-diskdatausingsamedisk">DiskDataUsingSameDisk</a></code>:
            「ディスクデータ」テーブルスペースが別の物理ディスクにある場合は
            false に設定.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-diskiothreadpool">DiskIOThreadPool</a></code>:
            ファイルアクセス用のバインドされていないスレッドの数。ディスクデータにのみ適用されます.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-diskless">Diskless</a></code>:
            ディスクを使用せずに実行.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-diskpagebufferentries">DiskPageBufferEntries</a></code>:
            DiskPageBufferMemory
            で割り当てるメモリー。非常に大きなディスクトランザクションでは、この値を増やす必要がある場合があります.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-diskpagebuffermemory">DiskPageBufferMemory</a></code>:
            ディスクページバッファキャッシュに割り当てられた各データノードのバイト数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-disksyncsize">DiskSyncSize</a></code>:
            同期が強制される前にファイルに書き込まれるデータ量.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-enablepartiallcp">EnablePartialLcp</a></code>:
            部分 LCP を有効にします (true)。これが無効
            (false) の場合、すべての LCP
            が完全なチェックポイントを書き込みます.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-enableredocontrol">EnableRedoControl</a></code>:
            REDO
            ログの使用を制御するための適応チェックポイント処理速度の有効化.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-eventlogbuffersize">EventLogBufferSize</a></code>:
            データノード内の NDB
            ログイベントの循環バッファーのサイズ.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-executeoncomputer">ExecuteOnComputer</a></code>:
            以前に定義された COMPUTER を参照する文字列.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-extrasendbuffermemory">ExtraSendBufferMemory</a></code>:
            TotalSendBufferMemory または SendBufferMemory
            によって割り当てられたものに加えて、送信バッファに使用するメモリー。
            デフォルト (0) では最大 16MB
            まで許可されます.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-filesystempath">FileSystemPath</a></code>:
            データノードがデータを格納するディレクトリへのパス
            (ディレクトリが存在する必要があります).
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-filesystempathdatafiles">FileSystemPathDataFiles</a></code>:
            データノードがディスクデータファイルを格納するディレクトリへのパス。
            デフォルト値は、設定されている場合は
            FilesystemPathDD
            です。設定されている場合は、FilesystemPath
            が使用されます。それ以外の場合は、DataDir
            の値が使用されます.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-filesystempathdd">FileSystemPathDD</a></code>:
            データノードがディスクデータと Undo
            ファイルを格納するディレクトリへのパス。
            デフォルト値は、設定されている場合は
            FileSystemPath です。それ以外の場合は、DataDir
            の値が使用されます.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-filesystempathundofiles">FileSystemPathUndoFiles</a></code>:
            データノードがディスクデータ用の Undo
            ファイルを格納するディレクトリへのパス。
            デフォルト値は、設定されている場合は
            FilesystemPathDD
            です。設定されている場合は、FilesystemPath
            が使用されます。それ以外の場合は、DataDir
            の値が使用されます.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-fragmentlogfilesize">FragmentLogFileSize</a></code>:
            各 REDO ログファイルのサイズ.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-heartbeatintervaldbapi">HeartbeatIntervalDbApi</a></code>:
            API
            ノードデータノードのハートビート間の時間。
            (3 つのハートビートの欠落後に API
            接続がクローズされました).
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-heartbeatintervaldbdb">HeartbeatIntervalDbDb</a></code>:
            データノードからデータノードへのハートビート間の時間。データノードは、ハートビートが
            3 回失われたあとで停止したと見なされます.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-heartbeatorder">HeartbeatOrder</a></code>:
            指定されたノードがまだアクティブでクラスタに接続されているかどうかを判断するために、データノードが相互にハートビートをチェックする順序を設定します。
            すべてのデータノードでゼロであるか、すべてのデータノードで個別のゼロ以外の値である必要があります。詳細は、ドキュメントを参照してください.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-hostname">HostName</a></code>:
            このデータノードのホスト名または IP
            アドレス.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-indexmemory">IndexMemory</a></code>:
            インデックスを格納するために割り当てられた各データノード上のバイト数。使用可能なシステム
            RAM および DataMemory のサイズに従います.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-indexstatautocreate">IndexStatAutoCreate</a></code>:
            索引作成時の自動統計収集の有効化/無効化.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-indexstatautoupdate">IndexStatAutoUpdate</a></code>:
            索引の変更の監視および自動統計更新のトリガー.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-indexstatsavescale">IndexStatSaveScale</a></code>:
            格納された索引統計のサイズを決定するために使用されるスケール変更係数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-indexstatsavesize">IndexStatSaveSize</a></code>:
            索引ごとの保存済統計の最大サイズ
            (バイト).
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-indexstattriggerpct">IndexStatTriggerPct</a></code>:
            索引統計の更新に対する DML
            操作のしきい値の変更率。 値は
            IndexStatTriggerScale
            によってスケールダウンされます.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-indexstattriggerscale">IndexStatTriggerScale</a></code>:
            大きい索引の場合、IndexStatTriggerPct
            をこの量でスケールダウンし、2
            を底とする索引サイズの対数で乗算します。
            スケーリングを無効にするには 0 に設定.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-indexstatupdatedelay">IndexStatUpdateDelay</a></code>:
            指定された索引の自動索引統計更新間の最小遅延。0
            は遅延なしを意味.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-initfragmentlogfiles">InitFragmentLogFiles</a></code>:
            フラグメントログファイルの初期化
            (スパース/フル).
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-initiallogfilegroup">InitialLogFileGroup</a></code>:
            最初の起動時に作成されるログファイルグループについて説明します。
            形式についてはドキュメントを参照してください.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-initialnoofopenfiles">InitialNoOfOpenFiles</a></code>:
            データノードごとの開いているファイルの初期数。
            (ファイルごとに 1
            つのスレッドが作成されます).
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-initialtablespace">InitialTablespace</a></code>:
            最初の起動時に作成されるテーブルスペースについて説明します。
            形式についてはドキュメントを参照してください.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-insertrecoverywork">InsertRecoveryWork</a></code>:
            挿入された行に使用される RecoveryWork
            の割合。部分的なローカルチェックポイントが使用されていないかぎり効果はありません.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-latealloc">LateAlloc</a></code>:
            管理サーバーへの接続の確立後にメモリーを割り当てます.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-lcpscanprogresstimeout">LcpScanProgressTimeout</a></code>:
            システム全体の LCP
            の進行を保証するために、ノードが停止されるまでにローカルチェックポイントフラグメントスキャンを停止できる最大時間。
            無効にするには 0 を使用.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-lockexecutethreadtocpu">LockExecuteThreadToCPU</a></code>:
            CPU ID のカンマ区切りリスト.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-lockmaintthreadstocpu">LockMaintThreadsToCPU</a></code>:
            メンテナンススレッドを実行する CPU を示す
            CPU ID.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-lockpagesinmainmemory">LockPagesInMainMemory</a></code>:
            0 = ロックを無効化、1 =
            メモリー割当て後にロック、2 =
            メモリー割当て前にロック.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-loglevelcheckpoint">LogLevelCheckpoint</a></code>:
            stdout
            に出力されるローカルおよびグローバルチェックポイント情報のログレベル.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-loglevelcongestion">LogLevelCongestion</a></code>:
            標準出力に出力される輻輳情報のレベル.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-loglevelconnection">LogLevelConnection</a></code>:
            stdout
            に出力されるノード接続/切断情報のレベル.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-loglevelerror">LogLevelError</a></code>:
            トランスポータ、標準出力に出力されるハートビートエラー.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-loglevelinfo">LogLevelInfo</a></code>:
            ハートビートおよびログ情報が stdout
            に出力される.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-loglevelnoderestart">LogLevelNodeRestart</a></code>:
            ノード再起動のレベルおよびノード障害情報が
            stdout に出力されます.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-loglevelshutdown">LogLevelShutdown</a></code>:
            stdout に出力されるノード停止情報のレベル.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-loglevelstartup">LogLevelStartup</a></code>:
            stdout に出力されるノード起動情報のレベル.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-loglevelstatistic">LogLevelStatistic</a></code>:
            stdout
            に出力されるトランザクション、操作およびトランスポータ情報のレベル.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-longmessagebuffer">LongMessageBuffer</a></code>:
            内部ロングメッセージ用に各データノードに割り当てられたバイト数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxallocate">MaxAllocate</a></code>:
            テーブルのメモリー割当て時に使用する割当ての最大サイズ.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxbufferedepochs">MaxBufferedEpochs</a></code>:
            サブスクライブしているノードが遅れることのできるエポックの許容数
            (未処理エポック)。
            超過すると、遅れているサブスクライバが切断されます.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxbufferedepochbytes">MaxBufferedEpochBytes</a></code>:
            エポックをバッファリングするために割り当てられた合計バイト数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxdiskdatalatency">MaxDiskDataLatency</a></code>:
            トランザクションの中断を開始するまでのディスクアクセスの最大許容平均レイテンシ
            (ミリ秒).
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxdiskwritespeed">MaxDiskWriteSpeed</a></code>:
            再起動が進行中でない場合に LCP
            およびバックアップで書き込むことができる最大バイト数/秒.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxdiskwritespeedothernoderestart">MaxDiskWriteSpeedOtherNodeRestart</a></code>:
            別のノードの再起動時に LCP
            およびバックアップで書き込むことができる最大バイト数/秒.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxdiskwritespeedownrestart">MaxDiskWriteSpeedOwnRestart</a></code>:
            このノードの再起動時に LCP
            およびバックアップで書き込むことができる最大バイト数/秒.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxfkbuildbatchsize">MaxFKBuildBatchSize</a></code>:
            外部キーの作成に使用するスキャンバッチの最大サイズ。
            この値を大きくすると、外部キーの構築が高速化されますが、進行中のトラフィックにも影響.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxdmloperationspertransaction">MaxDMLOperationsPerTransaction</a></code>:
            トランザクションのサイズを制限します。この数を超える
            DML
            操作が必要な場合は、トランザクションを中断します。
            無効にするには 0 に設定.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxlcpstartdelay">MaxLCPStartDelay</a></code>:
            LCP
            が、テーブルデータのパラレルリカバリのために自身をロックキューに入れるまでに、(他のデータノードがメタデータ同期を完了できるようにするために)
            チェックポイント mutex
            をポーリングする時間 (秒).
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnoofattributes">MaxNoOfAttributes</a></code>:
            データベースに格納されている属性の合計数を提案します
            (すべてのテーブルの合計).
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnoofconcurrentindexoperations">MaxNoOfConcurrentIndexOperations</a></code>:
            1
            つのデータノードで同時に実行できるインデックス操作の合計数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnoofconcurrentoperations">MaxNoOfConcurrentOperations</a></code>:
            トランザクションコーディネータ内の操作レコードの最大数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnoofconcurrentscans">MaxNoOfConcurrentScans</a></code>:
            データノードで同時に実行されるスキャンの最大数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnoofconcurrentsuboperations">MaxNoOfConcurrentSubOperations</a></code>:
            同時サブスクライバ操作の最大数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnoofconcurrenttransactions">MaxNoOfConcurrentTransactions</a></code>:
            このデータノードで同時に実行されるトランザクションの最大数。同時に実行できるトランザクションの合計数は、この値にクラスタ内のデータノードの数を掛けた数です.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnooffiredtriggers">MaxNoOfFiredTriggers</a></code>:
            1
            つのデータノード上で同時に起動できるトリガーの総数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnooflocaloperations">MaxNoOfLocalOperations</a></code>:
            このデータノードに定義されている操作レコードの最大数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnooflocalscans">MaxNoOfLocalScans</a></code>:
            このデータノードで並列に実行されるフラグメントスキャンの最大数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnoofopenfiles">MaxNoOfOpenFiles</a></code>:
            データ node.(One thread is created per file)
            当たりの最大オープンファイル数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnooforderedindexes">MaxNoOfOrderedIndexes</a></code>:
            システムで定義できる順序付き索引の合計数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnoofsavedmessages">MaxNoOfSavedMessages</a></code>:
            エラーログに書き込むエラーメッセージの最大数および保持するトレースファイルの最大数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnoofsubscribers">MaxNoOfSubscribers</a></code>:
            サブスクライバの最大数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnoofsubscriptions">MaxNoOfSubscriptions</a></code>:
            サブスクリプションの最大数 (デフォルトは
            0 = MaxNoOfTables).
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnooftables">MaxNoOfTables</a></code>:
            データベースに格納されている NDB
            テーブルの合計数を提案.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnooftriggers">MaxNoOfTriggers</a></code>:
            システムで定義できるトリガーの合計数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxnoofuniquehashindexes">MaxNoOfUniqueHashIndexes</a></code>:
            システムで定義できる一意のハッシュ索引の合計数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxparallelcopyinstances">MaxParallelCopyInstances</a></code>:
            ノードの再起動時のパラレルコピーの数。
            デフォルトは 0 で、両方のノードの LDM
            の数を最大 16 まで使用.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxparallelscansperfragment">MaxParallelScansPerFragment</a></code>:
            フラグメント当たりのパラレルスキャンの最大数。
            この制限に達すると、スキャンはシリアル化されます.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxreorgbuildbatchsize">MaxReorgBuildBatchSize</a></code>:
            テーブルパーティションの再編成に使用するスキャンバッチの最大サイズ。
            この値を大きくすると、テーブルパーティションの再編成が高速化されますが、進行中のトラフィックにも影響.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxstartfailretries">MaxStartFailRetries</a></code>:
            データノードが起動時に失敗した場合の最大再試行回数。StopOnError
            = 0 が必要です。 0
            に設定すると、開始試行は無期限に続行されます.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-maxuibuildbatchsize">MaxUIBuildBatchSize</a></code>:
            一意キーの作成に使用するスキャンバッチの最大サイズ。
            この値を大きくすると、一意キーの構築が高速化されますが、進行中のトラフィックにも影響.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-memreportfrequency">MemReportFrequency</a></code>:
            メモリーレポートの頻度 (秒)。0 =
            パーセンテージ制限を超えた場合にのみレポート.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-mindiskwritespeed">MinDiskWriteSpeed</a></code>:
            LCP
            およびバックアップで書き込むことができる最小バイト数/秒.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-minfreepct" title="MinFreePct">MinFreePct</a></code>:
            再起動のために予約しておくメモリーリソースの割合.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-nodegroup">NodeGroup</a></code>:
            データノードが属するノードグループ。クラスタの初期起動時にのみ使用されます.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-nodegrouptransporters">NodeGroupTransporters</a></code>:
            同じノードグループ内のノード間で使用するトランスポータの数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-nodeid">NodeId</a></code>:
            クラスタ内のすべてのノード間でデータノードを一意に識別する番号.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-nooffragmentlogfiles">NoOfFragmentLogFiles</a></code>:
            データノードに属する 4
            つの各ファイルセット内の 16 M バイト REDO
            ログファイルの数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-noofreplicas">NoOfReplicas</a></code>:
            データベース内のすべてのデータのコピー数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-numa">Numa</a></code>:
            (Linux のみ。libnuma が必要) NUMA
            サポートを制御します。 0
            に設定すると、システムはデータノードプロセスによるインターリーブの使用を決定できます。1
            はデータノードによるインターリーブの使用を意味.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-odirect">ODirect</a></code>:
            可能な場合は O_DIRECT
            ファイルの読取りおよび書込みを使用.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-odirectsyncflag">ODirectSyncFlag</a></code>:
            O_DIRECT
            書込みは同期書込みとして処理されます。ODirect
            が有効になっていない場合、InitFragmentLogFiles
            が SPARSE
            に設定されている場合、またはその両方の場合は無視されます.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-realtimescheduler">RealtimeScheduler</a></code>:
            true
            の場合、データノードスレッドはリアルタイムスレッドとしてスケジュールされます。
            デフォルトは false です.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-recoverywork">RecoveryWork</a></code>:
            LCP ファイルの記憶域オーバーヘッドの割合:
            値が大きいほど、通常の操作での作業が少なくなり、リカバリ中の作業が増えます.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-redobuffer">RedoBuffer</a></code>:
            REDO
            ログの書込み用に割り当てられた各データノードのバイト数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-redoovercommitcounter">RedoOverCommitCounter</a></code>:
            RedoOverCommitLimit
            がこの回数を超えると、トランザクションは中断され、操作は
            DefaultOperationRedoProblemAction
            で指定されたとおりに処理されます.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-redoovercommitlimit">RedoOverCommitLimit</a></code>:
            現行の REDO
            バッファのフラッシュにかかる時間がこの秒数を超えるたびに、これが発生した回数が
            RedoOverCommitCounter と比較されます.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-reservedconcurrentindexoperations">ReservedConcurrentIndexOperations</a></code>:
            1
            つのデータノード上に専用のリソースを持つ同時インデックス操作の数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-reservedconcurrentoperations">ReservedConcurrentOperations</a></code>:
            1
            つのデータノード上のトランザクションコーディネータに専用のリソースを持つ同時操作の数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-reservedconcurrentscans">ReservedConcurrentScans</a></code>:
            1
            つのデータノード上で専用のリソースを持つ同時スキャンの数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-reservedconcurrenttransactions">ReservedConcurrentTransactions</a></code>:
            1
            つのデータノード上に専用のリソースを持つ同時トランザクションの数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-reservedfiredtriggers">ReservedFiredTriggers</a></code>:
            1
            つのデータノード上に専用のリソースを持つトリガーの数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-reservedlocalscans">ReservedLocalScans</a></code>:
            1
            つのデータノード上に専用のリソースを持つ同時フラグメントスキャンの数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-reservedtransactionbuffermemory">ReservedTransactionBufferMemory</a></code>:
            各データノードに割り当てられたキーおよび属性データの動的バッファ領域
            (バイト).
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-restartonerrorinsert">RestartOnErrorInsert</a></code>:
            挿入エラーが原因の再起動の制御タイプ
            (StopOnError が有効な場合).
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-schedulerexecutiontimer">SchedulerExecutionTimer</a></code>:
            送信前にスケジューラで実行されるマイクロ秒数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-schedulerresponsiveness">SchedulerResponsiveness</a></code>:
            NDB スケジューラの応答の最適化を 0-10
            に設定します。値が大きいほど応答時間は短縮されますが、スループットは低下.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-schedulerspintimer">SchedulerSpinTimer</a></code>:
            スリープ前にスケジューラで実行されるマイクロ秒数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-serverport">ServerPort</a></code>:
            API
            ノードからの着信接続用にトランスポータを設定するために使用されるポート.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-sharedglobalmemory">SharedGlobalMemory</a></code>:
            使用するために割り当てられた各データノード上の合計バイト数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-spinmethod">SpinMethod</a></code>:
            データノードで使用されるスピン方法を決定します。詳細は、ドキュメントを参照してください.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-startfailretrydelay">StartFailRetryDelay</a></code>:
            再試行前の起動失敗後の遅延 (秒)。StopOnError
            = 0 が必要です.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-startfailuretimeout">StartFailureTimeout</a></code>:
            終了するまでの待機時間 (ミリ秒)。(0 =
            永久に待機).
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-startnonodegrouptimeout">StartNoNodeGroupTimeout</a></code>:
            起動を試行する前にノードグループのないノードを待機する時間
            (0 = 永久).
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-startpartialtimeout">StartPartialTimeout</a></code>:
            すべてのノードなしで起動を試行するまでの待機時間
            (ミリ秒)。(0 = 永久に待機).
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-startpartitionedtimeout">StartPartitionedTimeout</a></code>:
            パーティション化を開始する前に待機するミリ秒数。(0
            = 永久に待機).
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-startupstatusreportfrequency">StartupStatusReportFrequency</a></code>:
            起動時のステータスレポートの頻度.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-stoponerror">StopOnError</a></code>:
            0
            に設定すると、データノードは自動的に再起動し、次のノード障害を回復.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-stringmemory">StringMemory</a></code>:
            文字列メモリーのデフォルトサイズ (0 から
            100 = 最大の %、101+= 実際のバイト).
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-tcpbind_inaddr_any">TcpBind_INADDR_ANY</a></code>:
            任意の場所から接続を確立できるように
            IP_ADDR_ANY をバインドします
            (自動生成された接続の場合).
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-timebetweenepochs">TimeBetweenEpochs</a></code>:
            エポック間の時間
            (レプリケーションに使用される同期).
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-timebetweenepochstimeout">TimeBetweenEpochsTimeout</a></code>:
            エポック間の時間のタイムアウト。
            ノード停止の原因を超えています.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-timebetweenglobalcheckpoints">TimeBetweenGlobalCheckpoints</a></code>:
            ディスクへのトランザクションのグループコミット間隔.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-timebetweenglobalcheckpointstimeout">TimeBetweenGlobalCheckpointsTimeout</a></code>:
            ディスクへのトランザクションのグループコミットの最小タイムアウト.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-timebetweeninactivetransactionabortcheck">TimeBetweenInactiveTransactionAbortCheck</a></code>:
            非アクティブなトランザクションのチェック間隔.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-timebetweenlocalcheckpoints">TimeBetweenLocalCheckpoints</a></code>:
            データベースのスナップショットを取得する間隔
            (base-2 のバイトの対数で表現).
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-timebetweenwatchdogcheck">TimeBetweenWatchDogCheck</a></code>:
            データノード内での実行チェック間の時間.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-timebetweenwatchdogcheckinitial">TimeBetweenWatchDogCheckInitial</a></code>:
            データノード内部での実行チェック間の時間
            (メモリー割当て時の初期開始フェーズ).
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-totalsendbuffermemory">TotalSendBufferMemory</a></code>:
            すべてのトランスポータ送信バッファに使用する合計メモリー。.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-transactionbuffermemory">TransactionBufferMemory</a></code>:
            各データノードに割り当てられたキーおよび属性データの動的バッファ領域
            (バイト).
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-transactiondeadlockdetectiontimeout">TransactionDeadlockDetectionTimeout</a></code>:
            トランザクションがデータノード内での実行に費やすことができる時間。
            これは、トランザクションコーディネータがトランザクションに参加している各データノードがリクエストを実行するのを待機する時間です。
            データノードにこの時間より長い時間がかかった場合、トランザクションは中止されます.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-transactioninactivetimeout">TransactionInactiveTimeout</a></code>:
            トランザクションの別の部分を実行する前にアプリケーションが待機する時間
            (ミリ秒)。
            これは、アプリケーションがトランザクションの別の部分
            (クエリー、ステートメント)
            を実行または送信するのをトランザクションコーディネータが待機する時間です。
            アプリケーションに時間がかかりすぎると、トランザクションは中断されます。
            Timeout = 0
            は、アプリケーションがタイムアウトしないことを意味.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-transactionmemory">TransactionMemory</a></code>:
            各データノード上のトランザクションに割り当てられたメモリー.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-twopassinitialnoderestartcopy">TwoPassInitialNodeRestartCopy</a></code>:
            ノードの初期再起動時に 2
            つのパスにデータをコピーします。これにより、このような再起動のための順序付き索引のマルチスレッド構築が可能になります.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-undodatabuffer">UndoDataBuffer</a></code>:
            データ UNDO
            ログの書込み用に割り当てられた各データノードのバイト数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-undoindexbuffer">UndoIndexBuffer</a></code>:
            インデックス Undo
            ログの書き込み用に割り当てられた各データノード上のバイト数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbd-useshm">UseShm</a></code>:
            このデータノードと、このホストで実行されている
            API ノードの間の共有メモリー接続を使用.
          </p></li></ul></div><p>
        次のパラメータは、<span class="command"><strong>ndbmtd</strong></span>
        に固有です:
      </p><div class="itemizedlist"><a name="ndbparam-summary-list-ndbmtd"></a><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbmtd-automaticthreadconfig">AutomaticThreadConfig</a></code>:
            自動スレッド構成を使用し、ThreadConfig
            および MaxNoOfExecutionThreads
            の設定をオーバーライド.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbmtd-classicfragmentation">ClassicFragmentation</a></code>:
            true
            の場合、従来のテーブル断片化を使用します。false
            に設定すると、LDM
            間でのテーブルフラグメントの柔軟な分散が有効になります.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbmtd-maxnoofexecutionthreads">MaxNoOfExecutionThreads</a></code>:
            ndbmtd
            の場合のみ、実行スレッドの最大数を指定.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbmtd-nooffragmentlogparts">NoOfFragmentLogParts</a></code>:
            このデータノードに属する REDO
            ログファイルグループの数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbmtd-numcpus">NumCPUs</a></code>:
            AutomaticThreadConfig で使用する CPU の数の指定.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbmtd-partitionspernode">PartitionsPerNode</a></code>:
            各データノードで作成されるテーブルパーティションの数を決定します。ClassicFragmentation
            が有効な場合は使用されません.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-ndbmtd-threadconfig">ThreadConfig</a></code>:
            マルチスレッドデータノード (ndbmtd)
            の構成に使用されます。
            デフォルトは空の文字列です。構文およびその他の情報は、ドキュメントを参照してください.
          </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-params-mgmd"></a>23.3.2.2 NDB Cluster 管理ノードの構成パラメータ</h4></div></div></div><a class="indexterm" name="idm45563235028064"></a><a class="indexterm" name="idm45563235025984"></a><a class="indexterm" name="idm45563235024720"></a><p>
        このセクションのリストでは、NDB Cluster
        管理ノードを構成するために
        <code class="filename">config.ini</code>
        ファイルの<code class="literal">[ndb_mgmd]</code>または<code class="literal">[mgm]</code>セクションで使用されるパラメータについて説明します。
        各パラメータ関する詳しい説明およびその他の追加情報については、<a class="xref" href="mysql-cluster.html#mysql-cluster-mgm-definition" title="23.3.3.5 NDB Cluster 管理サーバーの定義">セクション23.3.3.5「NDB Cluster 管理サーバーの定義」</a>を参照してください。
      </p><div class="itemizedlist"><a name="ndbparam-summary-list-mgmd"></a><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-mgmd-arbitrationdelay">ArbitrationDelay</a></code>:
            アービトレートするよう求められた場合、アービトレータはこの時間待機してから投票します
            (ミリ秒).
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-mgmd-arbitrationrank">ArbitrationRank</a></code>:
            0
            の場合、管理ノードはアービトレータではありません。
            カーネルがアービトレータを選択する順序 1,
            2.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-mgmd-datadir">DataDir</a></code>:
            このノードのデータディレクトリ.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-mgmd-executeoncomputer">ExecuteOnComputer</a></code>:
            以前に定義された COMPUTER を参照する文字列.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-mgmd-extrasendbuffermemory">ExtraSendBufferMemory</a></code>:
            TotalSendBufferMemory または SendBufferMemory
            によって割り当てられたものに加えて、送信バッファに使用するメモリー。
            デフォルト (0) では最大 16MB
            まで許可されます.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-mgmd-heartbeatintervalmgmdmgmd">HeartbeatIntervalMgmdMgmd</a></code>:
            管理ノードから管理ノードへのハートビート間の時間。管理ノード間の接続は、ハートビートが
            3 回失われた後に失われたとみなされます.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-mgmd-heartbeatthreadpriority">HeartbeatThreadPriority</a></code>:
            管理ノードのハートビートスレッドポリシーおよび優先度を設定します。使用可能な値については、手動を参照してください.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-mgmd-hostname">HostName</a></code>:
            この管理ノードのホスト名または IP
            アドレス.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-mgmd-id">Id</a></code>:
            管理ノードを識別する番号。
            現在は非推奨です。かわりに NodeId
            を使用してください.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-mgmd-logdestination">LogDestination</a></code>:
            ログメッセージの送信先:
            コンソール、システムログ、または指定されたログファイル.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-mgmd-nodeid">NodeId</a></code>:
            クラスタ内のすべてのノード間で管理ノードを一意に識別する番号.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-mgmd-portnumber">PortNumber</a></code>:
            管理サーバーにコマンドを送信し、管理サーバーから構成をフェッチするためのポート番号.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-mgmd-portnumberstats">PortNumberStats</a></code>:
            管理サーバーから統計情報を取得するために使用されるポート番号.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-mgmd-totalsendbuffermemory">TotalSendBufferMemory</a></code>:
            すべてのトランスポータ送信バッファに使用する合計メモリー.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-mgmd-wan">wan</a></code>:
            WAN の TCP
            設定をデフォルトとして使用します.
          </p></li></ul></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
          管理ノードの構成に変更を加えたあとは、新しい構成を有効にするために、クラスタのローリング再起動を実行する必要があります。
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-mgm-definition" title="23.3.3.5 NDB Cluster 管理サーバーの定義">セクション23.3.3.5「NDB Cluster 管理サーバーの定義」</a>を参照してください。
        </p><p>
          実行中の NDB Cluster
          に新しい管理サーバーを追加するには、既存の
          <code class="filename">config.ini</code>
          ファイルを変更したあとに、すべてのクラスタノードのローリング再起動も実行する必要があります。
          複数の管理ノードを使用するときに発生する問題の詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-limitations-multiple-nodes" title="23.1.7.10 複数の NDB Cluster ノードに関する制限事項">セクション23.1.7.10「複数の NDB Cluster ノードに関する制限事項」</a>を参照してください。
        </p></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-params-api"></a>23.3.2.3 NDB Cluster SQL ノードおよび API ノードの構成パラメータ</h4></div></div></div><a class="indexterm" name="idm45563234975664"></a><a class="indexterm" name="idm45563234973552"></a><a class="indexterm" name="idm45563234972320"></a><p>
        このセクションのリストでは、NDB Cluster SQL
        ノードおよび API ノードを構成するために
        <code class="filename">config.ini</code>
        ファイルの<code class="literal">[mysqld]</code>および<code class="literal">[api]</code>セクションで使用されるパラメータについて説明します。
        各パラメータに関する詳しい説明およびその他の追加情報については、<a class="xref" href="mysql-cluster.html#mysql-cluster-api-definition" title="23.3.3.7 NDB Cluster での SQL およびその他の API ノードの定義">セクション23.3.3.7「NDB Cluster での SQL およびその他の API ノードの定義」</a>を参照してください。
      </p><div class="itemizedlist"><a name="ndbparam-summary-list-api"></a><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-api-apiverbose" title="API ノードのデバッグパラメータ">ApiVerbose</a></code>:
            NDB API のデバッグを有効にします (NDB
            開発用).
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-api-arbitrationdelay">ArbitrationDelay</a></code>:
            アービトレートするよう求められた場合、アービトレータは投票前にこのミリ秒数待機.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-api-arbitrationrank">ArbitrationRank</a></code>:
            0 の場合、API
            ノードはアービトレータではありません。
            カーネルがアービトレータを選択する順序 1,
            2.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-api-autoreconnect">AutoReconnect</a></code>:
            クラスタから切断されたときに API
            ノードを完全に再接続するかどうかを指定.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-api-batchbytesize">BatchByteSize</a></code>:
            デフォルトのバッチサイズ (バイト).
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-api-batchsize">BatchSize</a></code>:
            レコード数のデフォルトバッチサイズ.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-api-connectbackoffmaxtime">ConnectBackoffMaxTime</a></code>:
            この API
            ノードによる特定のデータノードへの接続試行間の最長時間をミリ秒単位で指定します
            (最大 100 ミリ秒の解決)。
            接続試行の進行中に経過した時間を除外します。最悪の場合は数秒かかることがあります。
            0 に設定すると無効になります。 この API
            ノードに現在接続されているデータノードがない場合は、代わりに
            StartConnectBackoffMaxTime が使用されます.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-api-connectionmap">ConnectionMap</a></code>:
            接続するデータノードを指定します.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-api-defaulthashmapsize">DefaultHashMapSize</a></code>:
            テーブルハッシュマップに使用するサイズ
            (バケット単位) を設定します。 3
            つの値がサポートされています: 0、240
            および 3840.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-api-defaultoperationredoproblemaction">DefaultOperationRedoProblemAction</a></code>:
            RedoOverCommitCounter
            を超えた場合の操作の処理方法.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-api-executeoncomputer">ExecuteOnComputer</a></code>:
            以前に定義された COMPUTER を参照する文字列.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-api-extrasendbuffermemory">ExtraSendBufferMemory</a></code>:
            TotalSendBufferMemory または SendBufferMemory
            によって割り当てられたものに加えて、送信バッファに使用するメモリー。
            デフォルト (0) では最大 16MB
            まで許可されます.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-api-heartbeatthreadpriority">HeartbeatThreadPriority</a></code>:
            ハートビートスレッドポリシーおよび API
            ノードの優先度を設定します。使用可能な値についてはマニュアルを参照してください.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-api-hostname">HostName</a></code>:
            この SQL または API ノードのホスト名または
            IP アドレス.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-api-id">Id</a></code>:
            MySQL サーバーまたは API ノード (Id)
            を識別する番号。
            現在は非推奨です。かわりに NodeId
            を使用してください.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-api-maxscanbatchsize">MaxScanBatchSize</a></code>:
            1 つのスキャンの最大集合バッチサイズ.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-api-nodeid">NodeId</a></code>:
            クラスタ内のすべてのノード間で SQL
            ノードまたは API
            ノードを一意に識別する番号.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-api-startconnectbackoffmaxtime">StartConnectBackoffMaxTime</a></code>:
            ConnectBackoffMaxTime と同じですが、この API
            ノードにデータノードが接続されていない場合にこのパラメータがかわりに使用される点が異なります.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-api-totalsendbuffermemory">TotalSendBufferMemory</a></code>:
            すべてのトランスポータ送信バッファに使用する合計メモリー.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-api-wan">wan</a></code>:
            WAN の TCP
            設定をデフォルトとして使用します.
          </p></li></ul></div><p>
        NDB Cluster の MySQL
        サーバーオプションについては、<a class="xref" href="mysql-cluster.html#mysql-cluster-program-options-mysqld" title="23.3.3.9.1 NDB Cluster の MySQL Server オプション">セクション23.3.3.9.1「NDB Cluster の MySQL Server オプション」</a>
        を参照してください。 NDB Cluster に関連する MySQL
        サーバーシステム変数については、<a class="xref" href="mysql-cluster.html#mysql-cluster-system-variables" title="23.3.3.9.2 NDB Cluster システム変数">セクション23.3.3.9.2「NDB Cluster システム変数」</a>
        を参照してください。
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
          実行中の NDB Cluster の構成に新しい SQL または
          API
          ノードを追加するには、新しい<code class="literal">[mysqld]</code>または<code class="literal">[api]</code>セクションを
          <code class="filename">config.ini</code> ファイル
          (または、複数の管理サーバーを使用している場合はファイル)
          に追加したあとで、すべてのクラスタノードのローリング再起動を実行する必要があります。
          これは、新しい SQL または API
          ノードをクラスタに接続する前に実行する必要があります。
        </p><p>
          新しい SQL または API
          ノードがクラスタ構成内の以前に使用されていない
          API
          スロットを使用してクラスタに接続する場合、クラスタの再起動を実行する必要は<span class="emphasis"><em>ありません</em></span>。
        </p></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-params-other"></a>23.3.2.4 その他の NDB Cluster 構成パラメータ</h4></div></div></div><a class="indexterm" name="idm45563234907584"></a><a class="indexterm" name="idm45563234905472"></a><a class="indexterm" name="idm45563234904208"></a><a class="indexterm" name="idm45563234902864"></a><p>
        このセクションのリストでは、NDB Cluster
        を構成するために <code class="filename">config.ini</code>
        ファイルの<code class="literal">[computer]</code>、<code class="literal">[tcp]</code>、および<code class="literal">[shm]</code>セクションで使用されるパラメータについて説明します。
        個々のパラメータの詳細および追加情報は、必要に応じて
        <a class="xref" href="mysql-cluster.html#mysql-cluster-tcp-definition" title="23.3.3.10 NDB Cluster TCP/IP 接続">セクション23.3.3.10「NDB Cluster TCP/IP 接続」</a> または
        <a class="xref" href="mysql-cluster.html#mysql-cluster-shm-definition" title="23.3.3.12 NDB Cluster の共有メモリー接続">セクション23.3.3.12「NDB Cluster の共有メモリー接続」</a>
        を参照してください。
      </p><p>
        <code class="filename">config.ini</code>
        ファイルの<code class="literal">[computer]</code>セクションには、次のパラメータが適用されます:
      </p><div class="itemizedlist"><a name="ndbparam-summary-list-computer"></a><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-computer-hostname">HostName</a></code>:
            このコンピュータのホスト名または IP
            アドレス.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-computer-id">Id</a></code>:
            このコンピュータの一意の識別子.
          </p></li></ul></div><p>
        <code class="filename">config.ini</code>
        ファイルの<code class="literal">[tcp]</code>セクションには、次のパラメータが適用されます:
      </p><div class="itemizedlist"><a name="ndbparam-summary-list-tcp"></a><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-tcp-allowunresolvedhostnames">AllowUnresolvedHostNames</a></code>:
            false (デフォルト)
            の場合、管理ノードによるホスト名の解決に失敗すると致命的なエラーが発生します。true
            の場合、未解決のホスト名は警告としてのみ報告されます.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-tcp-checksum">Checksum</a></code>:
            チェックサムが有効になっている場合、ノード間のすべてのシグナルでエラーがチェックされます.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-tcp-group">Group</a></code>:
            グループ近接性に使用されます。値が小さいほど、近接していると解釈されます.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-tcp-nodeid1">NodeId1</a></code>:
            接続の片側のノード (データノード、API
            ノード、または管理ノード) の ID.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-tcp-nodeid2">NodeId2</a></code>:
            接続の片側のノード (データノード、API
            ノード、または管理ノード) の ID.
          </p></li><li class="listitem"><p>
            <code class="literal">NodeIdServer</code>: TCP
            接続のサーバー側の設定.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-tcp-overloadlimit">OverloadLimit</a></code>:
            この数を超える未送信バイトが送信バッファにある場合、接続は過負荷とみなされます.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-tcp-presendchecksum">PreSendChecksum</a></code>:
            このパラメータとチェックサムの両方が有効になっている場合は、送信前チェックサムチェックを実行し、ノード間のすべての
            TCP シグナルにエラーがないかどうかを確認.
          </p></li><li class="listitem"><p>
            <code class="literal">Proxy</code>: .
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-tcp-receivebuffermemory">ReceiveBufferMemory</a></code>:
            このノードが受信したシグナルのバッファのバイト数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-tcp-sendbuffermemory">SendBufferMemory</a></code>:
            このノードから送信されたシグナルの TCP
            バッファのバイト数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-tcp-sendsignalid">SendSignalId</a></code>:
            各シグナルで ID を送信します。
            トレースファイルで使用されます。
            デバッグビルドでは、デフォルトは true
            です.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-tcp-tcp_maxseg_size">TCP_MAXSEG_SIZE</a></code>:
            TCP_MAXSEG に使用される値.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-tcp-tcp_rcv_buf_size">TCP_RCV_BUF_SIZE</a></code>:
            SO_RCVBUF に使用される値.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-tcp-tcp_snd_buf_size">TCP_SND_BUF_SIZE</a></code>:
            SO_SNDBUF に使用される値.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-tcp-tcpbind_inaddr_any">TcpBind_INADDR_ANY</a></code>:
            接続のサーバー部分のホスト名のかわりに
            InAddrAny をバインド.
          </p></li></ul></div><p>
        <code class="filename">config.ini</code>
        ファイルの<code class="literal">[shm]</code>セクションには、次のパラメータが適用されます:
      </p><div class="itemizedlist"><a name="ndbparam-summary-list-shm"></a><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-shm-checksum">Checksum</a></code>:
            チェックサムが有効になっている場合、ノード間のすべてのシグナルでエラーがチェックされます.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-shm-group">Group</a></code>:
            グループ近接性に使用されます。値が小さいほど、近接していると解釈されます.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-shm-nodeid1">NodeId1</a></code>:
            接続の片側のノード (データノード、API
            ノード、または管理ノード) の ID.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-shm-nodeid2">NodeId2</a></code>:
            接続の片側のノード (データノード、API
            ノード、または管理ノード) の ID.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-shm-nodeidserver">NodeIdServer</a></code>:
            SHM 接続のサーバー側の設定.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-shm-overloadlimit">OverloadLimit</a></code>:
            この数を超える未送信バイトが送信バッファにある場合、接続は過負荷とみなされます.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-shm-presendchecksum">PreSendChecksum</a></code>:
            このパラメータとチェックサムの両方が有効になっている場合は、送信前チェックサムチェックを実行し、ノード間のすべての
            SHM シグナルにエラーがないかどうかを確認.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-shm-sendbuffermemory">SendBufferMemory</a></code>:
            このノードから送信されたシグナルの共有メモリーバッファ内のバイト数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-shm-sendsignalid">SendSignalId</a></code>:
            各シグナルで ID を送信します。
            トレースファイルで使用.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-shm-shmkey">ShmKey</a></code>:
            共有メモリーキー。1 に設定すると、NDB
            によって計算されます.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-shm-shmspintime">ShmSpinTime</a></code>:
            受信時に、スリープするまでにスピンするミリ秒数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-shm-shmsize">ShmSize</a></code>:
            共有メモリーセグメントのサイズ.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#ndbparam-shm-signum">Signum</a></code>:
            シグナリングに使用されるシグナル番号.
          </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-option-tables"></a>23.3.2.5 NDB Cluster mysqld オプションおよび変数のリファレンス</h4></div></div></div><p>
        次のテーブルに、NDB Cluster で SQL
        ノードとして実行されている場合に
        <code class="literal">mysqld</code>
        内で適用可能なコマンド行オプション、サーバー、およびステータス変数のリストを示します。
        <span class="command"><strong>mysqld</strong></span>
        で使用できる<span class="emphasis"><em>すべての</em></span>コマンド行オプションとサーバーおよびステータス変数を示す表については、<a class="xref" href="server-administration.html#server-option-variable-reference" title="5.1.4 サーバーオプション、システム変数およびステータス変数リファレンス">セクション5.1.4「サーバーオプション、システム変数およびステータス変数リファレンス」</a>を参照してください。
      </p><div class="itemizedlist"><a name="mysql-cluster-mysqld-optvars-summary-list"></a><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal"><a class="link" href="server-administration.html#statvar_Com_xxx">Com_show_ndb_status</a></code>:
            SHOW NDB STATUS ステートメントの数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Handler_discover">Handler_discover</a></code>:
            テーブルが検出された回数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndb-batch-size">ndb-batch-size</a></code>:
            NDB
            トランザクションバッチで使用さするサイズ
            (バイト).
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndb-blob-read-batch-bytes">ndb-blob-read-batch-bytes</a></code>:
            大規模な BLOB
            読み取りがバッチ化されるサイズをバイトで指定します。0
            = 制限なし.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndb-blob-write-batch-bytes">ndb-blob-write-batch-bytes</a></code>:
            大規模な BLOB
            書き込みがバッチ化されるサイズをバイトで指定します。0
            = 制限なし.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndb-cluster-connection-pool">ndb-cluster-connection-pool</a></code>:
            MySQL で使用されるクラスタへの接続数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndb-cluster-connection-pool-nodeids">ndb-cluster-connection-pool-nodeids</a></code>:
            MySQL
            で使用されるクラスタへの接続用のノード ID
            のカンマ区切りリスト。リスト内のノード数は
            --ndb-cluster-connection-pool
            に設定された値と一致する必要があります.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndb-connectstring">ndb-connectstring</a></code>:
            このクラスタの構成情報を配布する NDB
            管理サーバーのアドレス.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndb-default-column-format">ndb-default-column-format</a></code>:
            テーブルのカラムを作成または追加する場合は、COLUMN_FORMAT
            および ROW_FORMAT
            オプションにデフォルトでこの値 (FIXED
            または DYNAMIC) を使用.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndb-deferred-constraints">ndb-deferred-constraints</a></code>:
            一意のインデックスに関する制約チェック
            (サポートされている場合)
            を、コミット時まで遅延させることを指定します。
            通常は必要なく、使用されません。テストの目的にのみ使用されます.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndb-distribution">ndb-distribution</a></code>:
            NDBCLUSTER
            の新しいテーブルのデフォルトの配布 (KEYHASH
            または LINHASH、デフォルトは KEYHASH).
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndb-log-apply-status">ndb-log-apply-status</a></code>:
            レプリカとして機能する MySQL
            サーバーが、即時ソースから受信した
            mysql.ndb_apply_status 更新を、独自のサーバー ID
            を使用して独自のバイナリログに記録します。
            --ndbcluster
            オプションを指定してサーバーを起動した場合にのみ有効です.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndb-log-empty-epochs">ndb-log-empty-epochs</a></code>:
            有効にすると、--log-slave-updates
            が有効になっている場合でも、変更がなかったエポックが
            ndb_apply_status および ndb_binlog_index
            テーブルに書き込まれます.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndb-log-empty-update">ndb-log-empty-update</a></code>:
            有効にすると、--log-slave-updates
            が有効な場合でも、変更を生成しなかった更新が
            ndb_apply_status および ndb_binlog_index
            テーブルに書き込まれます.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndb-log-exclusive-reads">ndb-log-exclusive-reads</a></code>:
            排他ロックを使用する主キーの読み取りをログに記録します。読み取りの競合に基づく競合解決を可能にします.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndb-log-fail-terminate">ndb-log-fail-terminate</a></code>:
            見つかったすべての行イベントの完全なロギングが不可能な場合は
            mysqld プロセスを終了.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndb-log-orig">ndb-log-orig</a></code>:
            発信サーバー ID とエポックを
            mysql.ndb_binlog_index テーブルに記録します.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndb-log-transaction-id">ndb-log-transaction-id</a></code>:
            NDB トランザクション ID
            をバイナリログに書き込みます。
            --log-bin-v1-events=OFF が必要です.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndb-log-update-as-write">ndb-log-update-as-write</a></code>:
            ソースでの更新のロギングを更新 (OFF)
            と書込み (ON) の間で切り替えます.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndb-mgmd-host">ndb-mgmd-host</a></code>:
            管理サーバーに接続するためのホスト
            (および必要に応じてポート) の設定.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndb-nodeid">ndb-nodeid</a></code>:
            この MySQL サーバーの NDB Cluster ノード ID.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndb-transid-mysql-connection-map">ndb-transid-mysql-connection-map</a></code>:
            ndb_transid_mysql_connection_map
            プラグインを有効または無効にします。つまり、その名前の
            INFORMATION_SCHEMA
            テーブルを有効または無効にします.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndb-wait-connected">ndb-wait-connected</a></code>:
            MySQL サーバーが MySQL
            クライアント接続を受け入れる前にクラスタ管理およびデータノードへの接続を待機する時間
            (秒).
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndb-wait-setup">ndb-wait-setup</a></code>:
            NDB エンジンの設定が完了するまで MySQL
            サーバーが待機する時間 (秒).
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndb-allow-copying-alter-table">ndb-allow-copying-alter-table</a></code>:
            ALTER TABLE が NDB
            テーブルでコピー操作を使用しないようにするには、OFF
            に設定.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_adaptive_send_deferred_count">Ndb_api_adaptive_send_deferred_count</a></code>:
            この MySQL Server (SQL ノード)
            によって実際に送信されなかった適応送信コールの数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_adaptive_send_deferred_count_session">Ndb_api_adaptive_send_deferred_count_slave</a></code>:
            このクライアントセッションで実際に送信されなかった適応送信コールの数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_adaptive_send_deferred_count_replica">Ndb_api_adaptive_send_deferred_count_replica</a></code>:
            このレプリカによって実際に送信されていない適応送信コールの数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_adaptive_send_deferred_count_slave">Ndb_api_adaptive_send_deferred_count_slave</a></code>:
            このレプリカによって実際に送信されていない適応送信コールの数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_adaptive_send_forced_count">Ndb_api_adaptive_send_forced_count</a></code>:
            この MySQL Server (SQL ノード)
            によって送信された強制送信セットを含む適応送信の数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_adaptive_send_forced_count_session">Ndb_api_adaptive_send_forced_count_session</a></code>:
            このクライアントセッションで強制送信が設定されている適応送信の数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_adaptive_send_forced_count_replica">Ndb_api_adaptive_send_forced_count_replica</a></code>:
            このレプリカによって送信された強制送信セットを含む適応送信の数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_adaptive_send_forced_count_slave">Ndb_api_adaptive_send_forced_count_slave</a></code>:
            このレプリカによって送信された強制送信セットを含む適応送信の数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_adaptive_send_unforced_count">Ndb_api_adaptive_send_unforced_count</a></code>:
            この MySQL Server (SQL ノード)
            によって強制送信されなかった適応送信の数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_adaptive_send_unforced_count_session">Ndb_api_adaptive_send_unforced_count_session</a></code>:
            このクライアントセッションでの強制送信なしの適応送信の数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_adaptive_send_unforced_count_replica">Ndb_api_adaptive_send_unforced_count_replica</a></code>:
            このレプリカによって強制送信されていない適応送信の数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_adaptive_send_unforced_count_slave">Ndb_api_adaptive_send_unforced_count_slave</a></code>:
            このレプリカによって強制送信されていない適応送信の数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_bytes_received_count">Ndb_api_bytes_received_count</a></code>:
            この MySQL Server (SQL ノード)
            によってデータノードから受信されたデータの量
            (バイト).
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_bytes_received_count_session">Ndb_api_bytes_received_count_session</a></code>:
            このクライアントセッションでデータノードから受信されたデータの量
            (バイト単位).
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_bytes_received_count_replica">Ndb_api_bytes_received_count_replica</a></code>:
            このレプリカによってデータノードから受信されたデータの量
            (バイト).
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_bytes_received_count_slave">Ndb_api_bytes_received_count_slave</a></code>:
            このレプリカによってデータノードから受信されたデータの量
            (バイト).
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_bytes_sent_count">Ndb_api_bytes_sent_count</a></code>:
            この MySQL Server (SQL ノード)
            によってデータノードに送信されたデータの量
            (バイト単位).
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_bytes_sent_count_session">Ndb_api_bytes_sent_count_session</a></code>:
            このクライアントセッションでデータノードに送信されたデータの量
            (バイト単位).
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_bytes_sent_count_replica">Ndb_api_bytes_sent_count_replica</a></code>:
            このレプリカによってデータノードに送信されたデータの数量
            (バイト).
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_bytes_sent_count_slave">Ndb_api_bytes_sent_count_slave</a></code>:
            このレプリカによってデータノードに送信されたデータの数量
            (バイト).
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_event_bytes_count">Ndb_api_event_bytes_count</a></code>:
            この MySQL Server (SQL ノード)
            によって受信されたイベントのバイト数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_event_bytes_count_injector">Ndb_api_event_bytes_count_injector</a></code>:
            NDB
            バイナリログインジェクタスレッドが受信したイベントデータのバイト数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_event_data_count">Ndb_api_event_data_count</a></code>:
            この MySQL Server (SQL ノード)
            によって受信された行変更イベントの数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_event_data_count_injector">Ndb_api_event_data_count_injector</a></code>:
            NDB
            バイナリログインジェクタスレッドによって受信された行変更イベントの数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_event_nondata_count">Ndb_api_event_nondata_count</a></code>:
            この MySQL Server (SQL ノード)
            によって受信された、行変更イベント以外のイベントの数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_event_nondata_count_injector">Ndb_api_event_nondata_count_injector</a></code>:
            NDB
            バイナリログインジェクタスレッドによって受信された行変更イベント以外のイベントの数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_pk_op_count">Ndb_api_pk_op_count</a></code>:
            この MySQL Server (SQL ノード)
            による主キーに基づく、または主キーを使用する操作の数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_pk_op_count_session">Ndb_api_pk_op_count_session</a></code>:
            このクライアントセッションで、主キーに基づいた、または主キーを使用した操作の数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_pk_op_count_replica">Ndb_api_pk_op_count_replica</a></code>:
            このレプリカによる主キーに基づく、または主キーを使用する操作の数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_pk_op_count_slave">Ndb_api_pk_op_count_slave</a></code>:
            このレプリカによる主キーに基づく、または主キーを使用する操作の数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_pruned_scan_count">Ndb_api_pruned_scan_count</a></code>:
            この MySQL Server (SQL ノード)
            によってパーティションにプルーニングされたスキャンの数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_pruned_scan_count_session">Ndb_api_pruned_scan_count_session</a></code>:
            このクライアントセッションで 1
            つのパーティションにプルーニングされたスキャンの数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_pruned_scan_count_replica">Ndb_api_pruned_scan_count_replica</a></code>:
            このレプリカによって 1
            つのパーティションにプルーニングされたスキャンの数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_pruned_scan_count_slave">Ndb_api_pruned_scan_count_slave</a></code>:
            このレプリカによって 1
            つのパーティションにプルーニングされたスキャンの数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_range_scan_count">Ndb_api_range_scan_count</a></code>:
            この MySQL Server (SQL ノード)
            によって開始されたレンジスキャンの数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_range_scan_count_session">Ndb_api_range_scan_count_session</a></code>:
            このクライアントセッションで開始された範囲スキャンの回数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_range_scan_count_replica">Ndb_api_range_scan_count_replica</a></code>:
            このレプリカによって開始されたレンジスキャンの数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_range_scan_count_slave">Ndb_api_range_scan_count_slave</a></code>:
            このレプリカによって開始されたレンジスキャンの数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_read_row_count">Ndb_api_read_row_count</a></code>:
            この MySQL Server (SQL ノード)
            によって読み取られた行の合計数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_read_row_count_session">Ndb_api_read_row_count_session</a></code>:
            このクライアントセッションで読み取られた行の合計数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_read_row_count_replica">Ndb_api_read_row_count_replica</a></code>:
            このレプリカによって読み取られた行の合計数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_read_row_count_slave">Ndb_api_read_row_count_slave</a></code>:
            このレプリカによって読み取られた行の合計数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_scan_batch_count">Ndb_api_scan_batch_count</a></code>:
            この MySQL Server (SQL ノード)
            によって受信された行のバッチ数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_scan_batch_count_session">Ndb_api_scan_batch_count_session</a></code>:
            このクライアントセッションで受信されたバッチの行数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_scan_batch_count_replica">Ndb_api_scan_batch_count_replica</a></code>:
            このレプリカによって受信された行のバッチ数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_scan_batch_count_slave">Ndb_api_scan_batch_count_slave</a></code>:
            このレプリカによって受信された行のバッチ数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_table_scan_count">Ndb_api_table_scan_count</a></code>:
            この MySQL Server (SQL ノード)
            によって開始されたテーブルスキャンの数
            (内部テーブルのスキャンを含む).
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_table_scan_count_session">Ndb_api_table_scan_count_session</a></code>:
            このクライアントセッションで開始された、内部テーブルのスキャンを含むテーブルスキャンの回数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_table_scan_count_replica">Ndb_api_table_scan_count_replica</a></code>:
            このレプリカによって開始されたテーブルスキャンの数
            (内部テーブルのスキャンを含む).
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_table_scan_count_slave">Ndb_api_table_scan_count_slave</a></code>:
            このレプリカによって開始されたテーブルスキャンの数
            (内部テーブルのスキャンを含む).
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_trans_abort_count">Ndb_api_trans_abort_count</a></code>:
            この MySQL Server (SQL ノード)
            によって中断されたトランザクションの数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_trans_abort_count_session">Ndb_api_trans_abort_count_session</a></code>:
            このクライアントセッションで中止されたトランザクションの数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_trans_abort_count_replica">Ndb_api_trans_abort_count_replica</a></code>:
            このレプリカによって中断されたトランザクションの数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_trans_abort_count_slave">Ndb_api_trans_abort_count_slave</a></code>:
            このレプリカによって中断されたトランザクションの数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_trans_close_count">Ndb_api_trans_close_count</a></code>:
            この MySQL Server (SQL ノード)
            によって中断されたトランザクションの数
            (TransCommitCount および TransAbortCount
            の合計より大きい可能性があります).
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_trans_close_count_session">Ndb_api_trans_close_count_session</a></code>:
            このクライアントセッションで中断されたトランザクションの数
            (TransCommitCount と TransAbortCount
            の合計より大きい可能性があります).
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_trans_close_count_replica">Ndb_api_trans_close_count_replica</a></code>:
            このレプリカによって中断されたトランザクションの数
            (TransCommitCount と TransAbortCount
            の合計より大きい可能性があります).
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_trans_close_count_slave">Ndb_api_trans_close_count_slave</a></code>:
            このレプリカによって中断されたトランザクションの数
            (TransCommitCount と TransAbortCount
            の合計より大きい可能性があります).
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_trans_commit_count">Ndb_api_trans_commit_count</a></code>:
            この MySQL Server (SQL ノード)
            によってコミットされたトランザクションの数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_trans_commit_count_session">Ndb_api_trans_commit_count_session</a></code>:
            このクライアントセッションでコミットされたトランザクションの数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_trans_commit_count_replica">Ndb_api_trans_commit_count_replica</a></code>:
            このレプリカによってコミットされたトランザクションの数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_trans_commit_count_slave">Ndb_api_trans_commit_count_slave</a></code>:
            このレプリカによってコミットされたトランザクションの数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_trans_local_read_row_count">Ndb_api_trans_local_read_row_count</a></code>:
            この MySQL Server (SQL ノード)
            によって読み取られた行の合計数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_trans_local_read_row_count_session">Ndb_api_trans_local_read_row_count_session</a></code>:
            このクライアントセッションで読み取られた行の合計数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_trans_local_read_row_count_replica">Ndb_api_trans_local_read_row_count_replica</a></code>:
            このレプリカによって読み取られた行の合計数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_trans_local_read_row_count_slave">Ndb_api_trans_local_read_row_count_slave</a></code>:
            このレプリカによって読み取られた行の合計数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_trans_start_count">Ndb_api_trans_start_count</a></code>:
            この MySQL Server (SQL ノード)
            によって開始されたトランザクションの数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_trans_start_count_session">Ndb_api_trans_start_count_session</a></code>:
            このクライアントセッションで開始されたトランザクションの数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_trans_start_count_replica">Ndb_api_trans_start_count_replica</a></code>:
            このレプリカによって開始されたトランザクションの数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_trans_start_count_slave">Ndb_api_trans_start_count_slave</a></code>:
            このレプリカによって開始されたトランザクションの数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_uk_op_count">Ndb_api_uk_op_count</a></code>:
            この MySQL Server (SQL ノード)
            による一意キーに基づく、または一意キーを使用する操作の数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_uk_op_count_session">Ndb_api_uk_op_count_session</a></code>:
            このクライアントセッションで、一意のキーに基づいた、または一意のキーを使用した操作の数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_uk_op_count_replica">Ndb_api_uk_op_count_replica</a></code>:
            このレプリカによる一意キーに基づく、または一意キーを使用する操作の数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_uk_op_count_slave">Ndb_api_uk_op_count_slave</a></code>:
            このレプリカによる一意キーに基づく、または一意キーを使用する操作の数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_wait_exec_complete_count">Ndb_api_wait_exec_complete_count</a></code>:
            この MySQL Server (SQL ノード)
            による操作実行の完了を待機中にスレッドがブロックされた回数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_wait_exec_complete_count_session">Ndb_api_wait_exec_complete_count_session</a></code>:
            このクライアントセッションで操作実行の完了を待機中にスレッドがブロックされた回数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_wait_exec_complete_count_replica">Ndb_api_wait_exec_complete_count_replica</a></code>:
            このレプリカによる操作実行の完了を待機中にスレッドがブロックされた回数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_wait_exec_complete_count_slave">Ndb_api_wait_exec_complete_count_slave</a></code>:
            このレプリカによる操作実行の完了を待機中にスレッドがブロックされた回数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_wait_meta_request_count">Ndb_api_wait_meta_request_count</a></code>:
            この MySQL Server (SQL ノード)
            によるメタデータベースのシグナルを待機してスレッドがブロックされた回数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_wait_meta_request_count_session">Ndb_api_wait_meta_request_count_session</a></code>:
            このクライアントセッションでメタデータベースのシグナルを待機してスレッドがブロックされた回数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_wait_meta_request_count_replica">Ndb_api_wait_meta_request_count_replica</a></code>:
            このレプリカによるメタデータベースのシグナルを待機してスレッドがブロックされた回数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_wait_meta_request_count_slave">Ndb_api_wait_meta_request_count_slave</a></code>:
            このレプリカによるメタデータベースのシグナルを待機してスレッドがブロックされた回数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_wait_nanos_count">Ndb_api_wait_nanos_count</a></code>:
            この MySQL Server (SQL ノード)
            によってデータノードからの何らかのタイプのシグナルの待機に費やされた合計時間
            (ナノ秒).
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_wait_nanos_count_session">Ndb_api_wait_nanos_count_session</a></code>:
            このクライアントセッションでデータノードからの何らかのタイプのシグナルの待機に費やされた合計時間
            (ナノ秒).
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_wait_nanos_count_replica">Ndb_api_wait_nanos_count_replica</a></code>:
            このレプリカによるデータノードからの何らかのタイプのシグナルの待機に費やされた合計時間
            (ナノ秒).
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_wait_nanos_count_slave">Ndb_api_wait_nanos_count_slave</a></code>:
            このレプリカによるデータノードからの何らかのタイプのシグナルの待機に費やされた合計時間
            (ナノ秒).
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_wait_scan_result_count">Ndb_api_wait_scan_result_count</a></code>:
            この MySQL Server (SQL ノード)
            によるスキャンベースのシグナルの待機中にスレッドがブロックされた回数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_wait_scan_result_count_session">Ndb_api_wait_scan_result_count_session</a></code>:
            このクライアントセッションでスキャンベースのシグナルを待機している間にスレッドがブロックされた回数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_wait_scan_result_count_replica">Ndb_api_wait_scan_result_count_replica</a></code>:
            このレプリカによるスキャンベースのシグナルの待機中にスレッドがブロックされた回数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_api_wait_scan_result_count_slave">Ndb_api_wait_scan_result_count_slave</a></code>:
            このレプリカによるスキャンベースのシグナルの待機中にスレッドがブロックされた回数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_autoincrement_prefetch_sz">ndb_autoincrement_prefetch_sz</a></code>:
            NDB
            自動インクリメント値のプリフェッチサイズ.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_cache_check_time">ndb_cache_check_time</a></code>:
            MySQL
            クエリーキャッシュによって作成されたクラスタ
            SQL ノードのチェック間のミリ秒数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_clear_apply_status">ndb_clear_apply_status</a></code>:
            RESET SLAVE/RESET REPLICA で ndb_apply_status
            テーブルからすべての行をクリアします。デフォルトは
            ON です.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_cluster_node_id">Ndb_cluster_node_id</a></code>:
            NDB Cluster SQL
            ノードとして動作している場合のこのサーバーのノード
            ID.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_config_from_host">Ndb_config_from_host</a></code>:
            NDB Cluster 管理サーバーのホスト名または IP
            アドレス.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_config_from_port">Ndb_config_from_port</a></code>:
            NDB Cluster
            管理サーバーに接続するためのポート.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_config_generation">Ndb_config_generation</a></code>:
            クラスタの現在の構成の生成番号.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_conflict_fn_epoch">Ndb_conflict_fn_epoch</a></code>:
            NDB$EPOCH()
            競合検出関数によって競合が検出された行数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_conflict_fn_epoch2">Ndb_conflict_fn_epoch2</a></code>:
            NDB$EPOCH2()
            競合検出関数によって競合が検出された行数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_conflict_fn_epoch2_trans">Ndb_conflict_fn_epoch2_trans</a></code>:
            NDB$EPOCH2_TRANS()
            競合検出関数によって競合が検出された行数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_conflict_fn_epoch_trans">Ndb_conflict_fn_epoch_trans</a></code>:
            NDB$EPOCH_TRANS()
            競合検出関数によって競合が検出された行数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_conflict_fn_max">Ndb_conflict_fn_max</a></code>:
            サーバーがクラスタレプリケーションに関与する
            NDB Cluster
            の一部である場合に、「より大きなタイムスタンプが優先される」に基づく競合解決が適用された回数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_conflict_fn_old">Ndb_conflict_fn_old</a></code>:
            このサーバーがクラスタレプリケーションに関与する
            NDB Cluster
            の一部である場合に、「同じタイムスタンプが優先」競合解決が適用された回数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_conflict_last_conflict_epoch">Ndb_conflict_last_conflict_epoch</a></code>:
            競合が検出された、このレプリカ上の最新の
            NDB エポック.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_conflict_last_stable_epoch">Ndb_conflict_last_stable_epoch</a></code>:
            トランザクション競合関数によって競合していることが検出された行数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_conflict_reflected_op_discard_count">Ndb_conflict_reflected_op_discard_count</a></code>:
            実行中にエラーが発生したために適用されなかった反映操作の数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_conflict_reflected_op_prepare_count">Ndb_conflict_reflected_op_prepare_count</a></code>:
            実行の準備が完了した、受信したリフレクト操作の数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_conflict_refresh_op_count">Ndb_conflict_refresh_op_count</a></code>:
            準備されたリフレッシュ操作の数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_conflict_role">ndb_conflict_role</a></code>:
            レプリカが競合検出および解決で果たす役割。
            値は PRIMARY、SECONDARY、PASS、NONE (デフォルト)
            のいずれかです。 レプリケーション SQL
            スレッドが停止している場合にのみ変更できます。
            詳細は、ドキュメントを参照してください.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_conflict_trans_conflict_commit_count">Ndb_conflict_trans_conflict_commit_count</a></code>:
            トランザクション競合処理を必要としたあとでコミットされたエポックトランザクションの数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_conflict_trans_detect_iter_count">Ndb_conflict_trans_detect_iter_count</a></code>:
            エポックトランザクションのコミットに必要な内部反復数。
            Ndb_conflict_trans_conflict_commit_count より
            (わずかに)
            大きいか、または等しい値にしてください.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_conflict_trans_reject_count">Ndb_conflict_trans_reject_count</a></code>:
            トランザクション競合関数によって競合が検出された後に拒否されたトランザクションの数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_conflict_trans_row_conflict_count">Ndb_conflict_trans_row_conflict_count</a></code>:
            トランザクション競合関数によって競合が検出された行数。
            競合するトランザクションに含まれる行または競合するトランザクションに依存する行が含まれます.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_conflict_trans_row_reject_count">Ndb_conflict_trans_row_reject_count</a></code>:
            トランザクション競合関数によって競合が検出された後に再編成された行の合計数。
            Ndb_conflict_trans_row_conflict_count、および競合するトランザクションに含まれているか、または依存しているすべての行が含まれます.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_data_node_neighbour">ndb_data_node_neighbour</a></code>:
            トランザクションヒントおよび完全にレプリケートされたテーブルに対して、この
            MySQL Server
            に最も近いクラスタデータノードを指定.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_default_column_format">ndb_default_column_format</a></code>:
            新しい NDB
            テーブルに使用されるデフォルトの行形式およびカラム形式
            (FIXED または DYNAMIC) を設定.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_deferred_constraints">ndb_deferred_constraints</a></code>:
            制約チェック (サポートされている場合)
            を遅延させることを指定します。
            通常は必要なく、使用されません。テストの目的にのみ使用されます.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_dbg_check_shares">ndb_dbg_check_shares</a></code>:
            言語共有のチェック (デバッグビルドのみ).
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndb-schema-dist-timeout">ndb-schema-dist-timeout</a></code>:
            スキーマ分散中にタイムアウトを検出するまでの待機時間.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_distribution">ndb_distribution</a></code>:
            NDBCLUSTER
            の新しいテーブルのデフォルトの配布 (KEYHASH
            または LINHASH、デフォルトは KEYHASH).
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_epoch_delete_delete_count">Ndb_epoch_delete_delete_count</a></code>:
            削除の競合が検出された数
            (削除操作は適用されましたが、行が存在しません).
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_eventbuffer_free_percent">ndb_eventbuffer_free_percent</a></code>:
            ndb_eventbuffer_max_alloc
            によって設定された制限に達した後、バッファリングを再開する前にイベントバッファで使用可能にする必要がある空きメモリーの割合.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_eventbuffer_max_alloc">ndb_eventbuffer_max_alloc</a></code>:
            NDB API
            によってイベントをバッファリングするために割り当てることができる最大メモリー。
            デフォルトは 0 (無制限) です.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_execute_count">Ndb_execute_count</a></code>:
            操作によって行われた NDB
            カーネルへのラウンドトリップ数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_extra_logging">ndb_extra_logging</a></code>:
            NDB Cluster
            スキーマ、接続、およびデータ配布イベントの
            MySQL エラーログへのロギングを制御.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_force_send">ndb_force_send</a></code>:
            NDB
            に対し、ほかのスレッドを待機せずただちにバッファーを送るよう命令.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_fully_replicated">ndb_fully_replicated</a></code>:
            新しい NDB
            テーブルが完全にレプリケートされるかどうか.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_index_stat_enable">ndb_index_stat_enable</a></code>:
            クエリーの最適化で NDB
            インデックス統計を使用.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_index_stat_option">ndb_index_stat_option</a></code>:
            NDB
            インデックス統計の調整可能なオプションのコンマ区切りリスト。list
            にはスペースを含めないでください.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_join_pushdown">ndb_join_pushdown</a></code>:
            データノードへの結合のプッシュダウンを有効化.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_last_commit_epoch_server">Ndb_last_commit_epoch_server</a></code>:
            NDB によって直近でコミットされたエポック.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_last_commit_epoch_session">Ndb_last_commit_epoch_session</a></code>:
            この NDB
            クライアントによって直近でコミットされたエポック.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_log_apply_status">ndb_log_apply_status</a></code>:
            レプリカログとして機能する MySQL
            サーバーが、自身のサーバー ID
            を使用して、その即時ソースから受信した
            mysql.ndb apply_status
            更新を独自のバイナリログに記録するかどうか.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_log_bin">ndb_log_bin</a></code>:
            NDB
            テーブルへの更新をバイナリログに書き込みます。
            --log-bin
            でバイナリロギングが有効になっている場合にのみ有効です.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_log_binlog_index">ndb_log_binlog_index</a></code>:
            エポックとバイナリログの位置の間のマッピングを
            ndb_binlog_index テーブルに挿入します。
            デフォルトでは ON になります。
            バイナリロギングが有効な場合にのみ有効です.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_log_empty_epochs">ndb_log_empty_epochs</a></code>:
            有効にすると、log_slave_updates
            が有効になっていても、変更がなかったエポックは
            ndb_apply_status テーブルおよび ndb_binlog_index
            テーブルに書き込まれます.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_log_empty_update">ndb_log_empty_update</a></code>:
            有効にすると、log_slave_updates
            が有効になっている場合でも、変更を生成しない更新は
            ndb_apply_status テーブルおよび ndb_binlog_index
            テーブルに書き込まれます.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_log_exclusive_reads">ndb_log_exclusive_reads</a></code>:
            排他ロックを使用する主キーの読み取りをログに記録します。読み取りの競合に基づく競合解決を可能にします.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_log_orig">ndb_log_orig</a></code>:
            発信元サーバーの id と epoch が
            mysql.ndb_binlog_index
            テーブルに記録されるかどうか。 mysqld
            の起動時に --ndb-log-orig
            オプションを使用して設定.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_log_transaction_id">ndb_log_transaction_id</a></code>:
            NDB トランザクション ID
            がバイナリログに書き込まれるかどうか
            (読み取り専用).
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndb-log-update-minimal">ndb-log-update-minimal</a></code>:
            最小限の形式で更新を記録.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndb-log-updated-only">ndb-log-updated-only</a></code>:
            完全な行 (ON) または更新のみ (OFF)
            をログに記録.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_metadata_check">ndb_metadata_check</a></code>:
            MySQL データディクショナリに関する NDB
            メタデータ変更の自動検出を有効にします。デフォルトで有効になっています.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_metadata_excluded_count">Ndb_metadata_blacklist_size</a></code>:
            NDB binlog スレッドが同期に失敗した NDB
            メタデータオブジェクトの数。NDB 8.0.22 では
            Ndb_metadata_excluded_count
            として名前が変更されました.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_metadata_check_interval">ndb_metadata_check_interval</a></code>:
            MySQL データディクショナリに関する NDB
            メタデータ変更のチェックを実行する間隔
            (秒).
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_metadata_detected_count">Ndb_metadata_detected_count</a></code>:
            NDB
            メタデータ変更モニタースレッドが変更を検出した回数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_metadata_excluded_count">Ndb_metadata_excluded_count</a></code>:
            NDB binlog スレッドが同期に失敗した NDB
            メタデータオブジェクトの数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_metadata_sync">ndb_metadata_sync</a></code>:
            NDB ディクショナリと MySQL
            データディクショナリ間のすべての変更の即時同期をトリガーします。これにより、ndb_metadata_check
            値と ndb_metadata_check_interval
            値は無視されます。 同期が完了すると false
            にリセットされます.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_metadata_synced_count">Ndb_metadata_synced_count</a></code>:
            同期された NDB メタデータオブジェクトの数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_number_of_data_nodes">Ndb_number_of_data_nodes</a></code>:
            この NDB
            クラスタ内のデータノードの数。サーバーがクラスタに参加する場合にのみ設定されます.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndb-optimization-delay">ndb-optimization-delay</a></code>:
            NDB テーブルで OPTIMIZE TABLE
            によって一連の行を処理する間に待機するミリ秒数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_optimized_node_selection">ndb_optimized_node_selection</a></code>:
            SQL
            ノードがトランザクションコーディネータとして使用するクラスタデータノードを選択する方法を決定.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_pruned_scan_count">Ndb_pruned_scan_count</a></code>:
            パーティションプルーニングを使用できるクラスタが最後に起動されてから
            NDB によって実行されたスキャンの数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_pushed_queries_defined">Ndb_pushed_queries_defined</a></code>:
            API
            ノードがデータノードにプッシュダウンしようとした結合の数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_pushed_queries_dropped">Ndb_pushed_queries_dropped</a></code>:
            API
            ノードがデータノードにプッシュダウンしようとしたが失敗した結合の数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_pushed_queries_executed">Ndb_pushed_queries_executed</a></code>:
            データノードで正常にプッシュダウンおよび実行された結合の数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_pushed_reads">Ndb_pushed_reads</a></code>:
            プッシュダウン結合によってデータノードで実行された読み取りの数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_read_backup">ndb_read_backup</a></code>:
            すべての NDB
            テーブルの任意のレプリカからの読み取りを有効にします。個々の
            NDB
            テーブルを有効または無効にするには、CREATE
            TABLE または ALTER TABLE とともに
            NDB_TABLE=READ_BACKUP={0|1} を使用.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_recv_thread_activation_threshold">ndb_recv_thread_activation_threshold</a></code>:
            受信スレッドがクラスタ接続のポーリングを引き継ぐときのアクティブ化しきい値
            (同時にアクティブなスレッドで測定).
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_recv_thread_cpu_mask">ndb_recv_thread_cpu_mask</a></code>:
            受信スレッドを特定の CPU
            にロックするための CPU マスク。16
            進数で指定します。
            詳細は、ドキュメントを参照してください.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_replica_max_replicated_epoch">Ndb_replica_max_replicated_epoch</a></code>:
            このレプリカで最近コミットされた NDB
            エポック。 この値が
            Ndb_conflict_last_conflict_epoch
            以上の場合、競合はまだ検出されていません.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_report_thresh_binlog_epoch_slip">ndb_report_thresh_binlog_epoch_slip</a></code>:
            NDB 7.5.4 以降: NDB 7.5.4 の前に
            BUFFERED_EPOCHS_OVER_THRESHOLD
            イベントバッファーステータスメッセージを生成する、完全にバッファリングされたがまだ消費されていないエポックの数のしきい値
            (超過した場合):
            バイナリログステータスをレポートする前に遅れるエポック数のしきい値.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_report_thresh_binlog_mem_usage">ndb_report_thresh_binlog_mem_usage</a></code>:
            バイナリログステータスを報告する前に残っている空きメモリーの割合のしきい値.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_row_checksum">ndb_row_checksum</a></code>:
            有効にすると、行チェックサムが設定され、デフォルトで有効になります.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_scan_count">Ndb_scan_count</a></code>:
            クラスタが最後に起動されてから NDB
            によって実行されたスキャンの合計数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_schema_dist_lock_wait_timeout">ndb_schema_dist_lock_wait_timeout</a></code>:
            エラーが返される前にロックを待機するスキーマ配布中の時間.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_schema_dist_timeout">ndb_schema_dist_timeout</a></code>:
            スキーマ分散中にタイムアウトを検出するまでの待機時間.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_schema_dist_upgrade_allowed">ndb_schema_dist_upgrade_allowed</a></code>:
            NDB
            への接続時にスキーマ配布テーブルのアップグレードを許可.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_show_foreign_key_mock_tables">ndb_show_foreign_key_mock_tables</a></code>:
            foreign_key_checks=0
            のサポートに使用されるモックテーブルを表示.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_slave_conflict_role">ndb_slave_conflict_role</a></code>:
            レプリカが競合検出および解決で果たす役割。
            値は PRIMARY、SECONDARY、PASS、NONE (デフォルト)
            のいずれかです。 レプリケーション SQL
            スレッドが停止している場合にのみ変更できます。
            詳細は、ドキュメントを参照してください.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_slave_max_replicated_epoch">Ndb_slave_max_replicated_epoch</a></code>:
            このレプリカで最近コミットされた NDB
            エポック。 この値が
            Ndb_conflict_last_conflict_epoch
            以上の場合、競合はまだ検出されていません.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_system_name">Ndb_system_name</a></code>:
            構成されたクラスタシステム名。サーバーが
            NDB に接続されていない場合は空.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_table_no_logging">ndb_table_no_logging</a></code>:
            この設定が有効であるときに作成された NDB
            テーブルはディスクにチェックポイントされません
            (テーブルスキーマファイルは作成されます)。
            NDBCLUSTER
            を使用してテーブルが作成または変更されたときに有効になる設定は、テーブルの存続期間中保持されます.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_table_temporary">ndb_table_temporary</a></code>:
            NDB
            テーブルはディスクで永続的ではありません:
            スキーマファイルは作成されず、テーブルは記録されません.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_trans_hint_count_session">Ndb_trans_hint_count_session</a></code>:
            このセッションで開始されたヒントを使用するトランザクションの数.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_use_copying_alter_table">ndb_use_copying_alter_table</a></code>:
            NDB Cluster で ALTER TABLE 操作のコピーを使用.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_use_exact_count">ndb_use_exact_count</a></code>:
            クエリーを計画する際に正確な行数を使用.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_use_transactions">ndb_use_transactions</a></code>:
            SELECT COUNT(*)
            クエリーの高速化を計画するときに、レコードカウントを使用するよう
            NDB に指示.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_version">ndb_version</a></code>:
            ビルドおよび NDB
            エンジンのバージョンを整数で表示します.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_version_string">ndb_version_string</a></code>:
            NDB
            エンジンのバージョンを含むビルド情報を
            ndb-x.y.z の形式で表示します.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndbcluster">ndbcluster</a></code>:
            NDB Cluster を有効化 (MySQL
            のこのバージョンがサポートする場合).
            無効化 <code class="option">--skip-ndbcluster</code>.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_ndbinfo">ndbinfo</a></code>:
            ndbinfo プラグインの有効化
            (サポートされている場合).
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndbinfo_database">ndbinfo_database</a></code>:
            NDB
            情報データベースに使用される名前。読み取り専用.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndbinfo_max_bytes">ndbinfo_max_bytes</a></code>:
            デバッグにのみ使用されます.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndbinfo_max_rows">ndbinfo_max_rows</a></code>:
            デバッグにのみ使用されます.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndbinfo_offline">ndbinfo_offline</a></code>:
            ndbinfo
            データベースをオフラインモードにする
            (テーブルまたはビューから行が返されない).
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndbinfo_show_hidden">ndbinfo_show_hidden</a></code>:
            mysql クライアントで ndbinfo
            内部ベーステーブルを表示するかどうか。デフォルトは
            OFF です.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndbinfo_table_prefix">ndbinfo_table_prefix</a></code>:
            ndbinfo
            内部ベーステーブルの命名に使用する接頭辞。読み取り専用.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndbinfo_version">ndbinfo_version</a></code>:
            ndbinfo エンジンバージョン;読み取り専用.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_server_id_bits">server_id_bits</a></code>:
            NDB API
            アプリケーションがアプリケーションデータをもっとも重要なビットに格納できるように、サーバーの識別に実際に使用される
            server_id
            内の最下位ビットの数。この値を累乗するには、server_id
            が 2 未満である必要があります.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#option_mysqld_skip-ndbcluster">skip-ndbcluster</a></code>:
            NDB Cluster
            ストレージエンジンを無効にします.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_slave_allow_batching">slave_allow_batching</a></code>:
            レプリカのバッチ更新のオンとオフを切り替えます.
          </p></li><li class="listitem"><p>
            <code class="literal"><a class="link" href="mysql-cluster.html#sysvar_transaction_allow_batching">transaction_allow_batching</a></code>:
            1
            つのトランザクション内でのステートメントのバッチ処理を許可します。
            使用するには AUTOCOMMIT を無効にします.
          </p></li></ul></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-cluster-config-file"></a>23.3.3 NDB Cluster 構成ファイル</h3></div></div></div><div class="toc"><dl class="toc"><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-config-example">23.3.3.1 NDB Cluster 構成: 基本例</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-config-starting">23.3.3.2 NDB Cluster の推奨開始構成</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-connection-strings">23.3.3.3 NDB Cluster 接続文字列</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-computer-definition">23.3.3.4 NDB Cluster でのコンピュータの定義</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-mgm-definition">23.3.3.5 NDB Cluster 管理サーバーの定義</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbd-definition">23.3.3.6 NDB Cluster データノードの定義</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-api-definition">23.3.3.7 NDB Cluster での SQL およびその他の API ノードの定義</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-system-definition">23.3.3.8 システムの定義</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-options-variables">23.3.3.9 NDB Cluster の MySQL Server オプションおよび変数</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-tcp-definition">23.3.3.10 NDB Cluster TCP/IP 接続</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-tcp-definition-direct">23.3.3.11 直接接続を使用した NDB Cluster TCP/IP 接続</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-shm-definition">23.3.3.12 NDB Cluster の共有メモリー接続</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-data-node-memory-management">23.3.3.13 データノードのメモリー管理</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-config-send-buffers">23.3.3.14 NDB Cluster 送信バッファーパラメータの構成</a></span></dt></dl></div><a class="indexterm" name="idm45563234294768"></a><a class="indexterm" name="idm45563234292656"></a><a class="indexterm" name="idm45563234290736"></a><p>
      NDB Cluster を構成するには、次の 2
      つのファイルを操作する必要があります:
    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          <code class="filename">my.cnf</code>: すべての NDB Cluster
          実行可能ファイルのオプションを指定します。
          このファイルは、(これまでの MySQL
          の使用経験からご存じのとおり)
          クラスタ内で実行されている個々の実行可能ファイルからアクセスできる必要があります。
        </p></li><li class="listitem"><p>
          <code class="filename">config.ini</code>: このファイル
          (<span class="firstterm">グローバル構成ファイル</span>とも呼ばれる)
          は NDB Cluster
          管理サーバーによって読み取り専用にされ、NDB
          Cluster
          管理サーバーはこれに含まれる情報をクラスタに参加しているすべてのプロセスに配布します。<code class="filename">config.ini</code>
          には、クラスタに含まれる各ノードの説明が含まれています。
          これには、データノードに関する構成パラメータと、クラスタ内のすべてのノード間の接続に関する構成パラメータが含まれます。
          このファイルに含まれる可能性があるセクションと各セクションに配置される構成パラメータの種類を簡単に確認するには、「<a class="link" href="mysql-cluster.html#mysql-cluster-config-ini-sections" title="config.ini ファイルのセクション"><code class="filename">config.ini</code>
          ファイルのセクション</a>」を参照してください。
        </p></li></ul></div><p><b>構成データのキャッシュ. </b>
        <code class="literal">NDB</code>
        では、<span class="firstterm">ステートフル構成</span>を使用します。
        管理サーバーは、再起動されるたびにグローバル構成ファイルを読み取るのではなく、最初の起動時に構成をキャッシュし、その後は次の条件のいずれかが
        true
        である場合にのみグローバル構成ファイルを読み取ります。
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><b>--initial
            オプションを使用すると管理サーバーが起動します. </b>
            <code class="option">--initial</code>
            を使用すると、グローバル構成ファイルが再度読み取られ、既存のキャッシュファイルが削除され、管理サーバーによって新しい構成キャッシュが作成されます。
          </p></li><li class="listitem"><p><b>--reload
            オプションを使用すると管理サーバーが起動します. </b>
            <code class="option">--reload</code>
            オプションを使用すると、管理サーバーはそのキャッシュをグローバル構成ファイルと比較します。
            これらが異なる場合は、管理サーバーによって新しい構成キャッシュが作成されます。既存の構成キャッシュは保持されますが、使用されません。
            管理サーバーキャッシュとグローバル構成ファイルに同じ構成データが含まれている場合、既存のキャッシュが使用され、新しいキャッシュは作成されません。
          </p></li><li class="listitem"><p><b>管理サーバーは --config-cache=FALSE
            を使用して起動されます. </b>
            これにより、<code class="option">--config-cache</code>(デフォルトで有効)
            が無効になり、管理サーバーが構成キャッシュを完全にバイパスするように強制するために使用できます。
            この場合、管理サーバーは存在する可能性がある構成ファイルを無視し、常に
            <code class="filename">config.ini</code>
            ファイルからその構成データを読み取ります。
          </p></li><li class="listitem"><p><b>構成キャッシュがみつかりません. </b>
            この場合、管理サーバーはグローバル構成ファイルを読み取り、そのファイルと同じ構成データを含むキャッシュを作成します。
          </p></li></ul></div><p><b>構成キャッシュファイル. </b>
        管理サーバーは、デフォルトで MySQL
        インストールディレクトリ内の
        <code class="filename">mysql-cluster</code>
        という名前のディレクトリに構成キャッシュファイルを作成します。
        (Unix システム上のソースから NDB Cluster
        を構築する場合、デフォルトの場所は<code class="filename">/usr/local/mysql-cluster</code>
        です。)
        これは、<code class="option">--configdir</code>
        オプションを指定して管理サーバーを起動すると、実行時にオーバーライドできます。
        構成キャッシュファイルは、<code class="filename">ndb_<em class="replaceable"><code>node_id</code></em>_config.bin.<em class="replaceable"><code>seq_id</code></em></code>
        というパターンで命名されるバイナリファイルです。<em class="replaceable"><code>node_id</code></em>
        は管理サーバーのクラスタ内のノード ID
        で、<em class="replaceable"><code>seq_id</code></em>
        はキャッシュの識別子です。
        キャッシュファイルには、作成された順に
        <em class="replaceable"><code>seq_id</code></em>
        を使用して連番が付けられます。
        管理サーバーは、<em class="replaceable"><code>seq_id</code></em>
        で特定される最新のキャッシュファイルを使用します。
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
        あとの構成キャッシュファイルを削除するか、<em class="replaceable"><code>seq_id</code></em>
        が大きくなるように前のキャッシュファイルの名前を変更すると、前の構成にロールバックできます。
        ただし、構成キャッシュファイルはバイナリ形式で書き込まれるため、その内容を手動で編集しないでください。
      </p></div><p>
      NDB Cluster 管理サーバーの
      <code class="option">--configdir</code>,
      <code class="option">--config-cache</code>,
      <code class="option">--initial</code> および
      <code class="option">--reload</code>
      オプションの詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="23.4.4 ndb_mgmd — NDB Cluster 管理サーバーデーモン">セクション23.4.4「ndb_mgmd — NDB Cluster 管理サーバーデーモン」</a>
      を参照してください。
    </p><p>
      NDB Cluster
      構成を継続的に改善し、このプロセスを簡略化しようとしています。
      下位互換性の維持に努めていますが、場合によっては互換性のない変更が行われる可能性があります。
      このような場合は、変更に下位互換性がない場合に
      NDB Cluster ユーザーに事前に知らせようとします。
      このような変更を発見し、それに関する情報が提供されていない場合は、<a class="xref" href="introduction.html#bug-reports" title="1.6 質問またはバグをレポートする方法">セクション1.6「質問またはバグをレポートする方法」</a>に示した手順を使用して
      MySQL バグデータベースに報告してください。
    </p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-config-example"></a>23.3.3.1 NDB Cluster 構成: 基本例</h4></div></div></div><a class="indexterm" name="idm45563234247200"></a><a class="indexterm" name="idm45563234245088"></a><a class="indexterm" name="idm45563234243168"></a><p>
        NDB Cluster
        をサポートするには、次の例に示すように
        <code class="filename">my.cnf</code>
        を更新するようにしてください。
        これらのパラメータを実行可能ファイルの起動時にコマンド行に指定することもできます。
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
          ここに示すオプションを、<code class="filename">config.ini</code>
          グローバル構成ファイルで使用されるものと混同しないようにしてください。
          グローバル構成オプションについては、このセクションで後述します。
        </p></div><pre class="programlisting"># my.cnf
# example additions to my.cnf for NDB Cluster
# (valid in MySQL 8.0)

# enable ndbcluster storage engine, and provide connection string for
# management server host (default port is 1186)
[mysqld]
ndbcluster
ndb-connectstring=ndb_mgmd.mysql.com


# provide connection string for management server host (default port: 1186)
[ndbd]
connect-string=ndb_mgmd.mysql.com

# provide connection string for management server host (default port: 1186)
[ndb_mgm]
connect-string=ndb_mgmd.mysql.com

# provide location of cluster configuration file
[ndb_mgmd]
config-file=/etc/config.ini
</pre><p>
        (接続文字列の詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-connection-strings" title="23.3.3.3 NDB Cluster 接続文字列">セクション23.3.3.3「NDB Cluster 接続文字列」</a>を参照してください。)
      </p><pre class="programlisting"># my.cnf
# example additions to my.cnf for NDB Cluster
# (works on all versions)

# enable ndbcluster storage engine, and provide connection string for management
# server host to the default port 1186
[mysqld]
ndbcluster
ndb-connectstring=ndb_mgmd.mysql.com:1186
</pre><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">重要</div><p>
          前に示したように、<code class="filename">my.cnf</code>
          ファイルの <code class="literal">[mysqld]</code> に
          <code class="literal">NDBCLUSTER</code> および
          <code class="literal">ndb-connectstring</code>
          パラメータを指定して <span class="command"><strong>mysqld</strong></span>
          プロセスを起動したあとは、クラスタを実際に起動しないと、<code class="literal">CREATE
          TABLE</code> または <code class="literal">ALTER
          TABLE</code>
          ステートメントを実行できません。
          そうしないと、これらのステートメントはエラーで失敗します。
          <span class="emphasis"><em>これは意図的なものです</em></span>。
        </p></div><p>
        クラスタの <code class="filename">my.cnf</code>
        ファイルでは、すべての実行可能ファイルによって読み取られ、使用される設定で別個の
        <code class="literal">[mysql_cluster]</code>
        セクションを使用することもできます。
      </p><pre class="programlisting"># cluster-specific settings
[mysql_cluster]
ndb-connectstring=ndb_mgmd.mysql.com:1186
</pre><p>
        <code class="filename">my.cnf</code>
        ファイルに設定できる追加の
        <code class="literal">NDB</code>
        変数については、<a class="xref" href="mysql-cluster.html#mysql-cluster-system-variables" title="23.3.3.9.2 NDB Cluster システム変数">セクション23.3.3.9.2「NDB Cluster システム変数」</a>を参照してください。
      </p><p>
        NDB Cluster
        のグローバル構成ファイルは、<code class="filename">config.ini</code>
        という命名規則に従っています
        (ただし、これは必須ではありません)。
        これは、必要に応じて <span class="command"><strong>ndb_mgmd</strong></span>
        が起動時に読み取るため、読み取りが可能な任意の場所に配置できます。
        構成の場所と名前は、コマンド行の
        <span class="command"><strong>ndb_mgmd</strong></span> で
        <code class="option">--config-file=<em class="replaceable"><code>path_name</code></em></code>
        を使用して指定します。
        このオプションにデフォルト値はなく、<span class="command"><strong>ndb_mgmd</strong></span>
        で構成キャッシュを使用する場合、このオプションは無視されます。
      </p><p>
        NDB Cluster のグローバル構成ファイルは INI
        形式を使用します。INI
        形式は、セクション見出し
        (角括弧で囲まれた部分)
        のあとに適切なパラメータ名と値が続くセクションで構成されます。
        標準 INI 形式との相違点の 1
        つは、パラメータ名と値をコロン
        (<code class="literal">:</code>) と等号 (<code class="literal">=</code>)
        で区切ることができることですが、等号をお薦めします。
        もう 1
        つの違いは、セクションがセクション名で一意に識別されないことです。
        代わりに、一意のセクション (同じタイプの 2
        つの異なるノードなど)
        はセクション内のパラメータとして指定された一意の
        ID で識別されます。
      </p><p>
        デフォルト値は、ほとんどのパラメータに定義されており、<code class="filename">config.ini</code>
        で指定することもできます。
        デフォルト値のセクションを作成するには、セクション名に
        <code class="literal">default</code> という単語を追加します。
        たとえば、<code class="literal">[ndbd]</code>
        セクションには特定のデータノードに適用されるパラメータが含まれていますが、<code class="literal">[ndbd
        default]</code>
        セクションにはすべてのデータノードに適用されるパラメータが含まれています。
        すべてのデータノードが同じデータメモリーサイズを使用するとします。
        これらすべてを構成するには、データメモリーサイズを指定する
        <code class="literal">DataMemory</code> 行を含む
        <code class="literal">[ndbd default]</code>
        セクションを作成します。
      </p><p>
        使用する場合は、構成ファイルの<code class="literal">[ndbd]</code>セクションの前に<code class="literal">[ndbd
        default]</code>セクションを配置する必要があります。
        これは、他のタイプの <code class="literal">default</code>
        セクションにも当てはまります。
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
          NDB Cluster
          の一部の旧リリースでは、<code class="literal">NoOfReplicas</code>
          のデフォルト値はありませんでした。これは常に<code class="literal">[ndbd
          default]</code>セクションで明示的に指定する必要がありました。
          現在、このパラメータのデフォルト値はほとんどの一般的な使用シナリオでの推奨設定である
          2
          になっていますが、今後もこのパラメータを明示的に設定することが推奨されます。
        </p></div><p>
        グローバル構成ファイルでは、クラスタに関与するコンピュータとノード、およびノードをどのコンピュータに配置するかを定義する必要があります。
        1 つの管理サーバー、2
        つのデータノード、および 2 つの MySQL
        サーバーで構成されるクラスタ用の簡単な構成ファイルの例をここに示します。
      </p><pre class="programlisting"># file "config.ini" - 2 data nodes and 2 SQL nodes
# This file is placed in the startup directory of ndb_mgmd (the
# management server)
# The first MySQL Server can be started from any host. The second
# can be started only on the host mysqld_5.mysql.com

[ndbd default]
NoOfReplicas= 2
DataDir= /var/lib/mysql-cluster

[ndb_mgmd]
Hostname= ndb_mgmd.mysql.com
DataDir= /var/lib/mysql-cluster

[ndbd]
HostName= ndbd_2.mysql.com

[ndbd]
HostName= ndbd_3.mysql.com

[mysqld]
[mysqld]
HostName= mysqld_5.mysql.com
</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
          前述の例は NDB Cluster
          に慣れるための最小限の開始構成として意図されており、本番設定では十分ではありません。
          完全な初期構成例については、<a class="xref" href="mysql-cluster.html#mysql-cluster-config-starting" title="23.3.3.2 NDB Cluster の推奨開始構成">セクション23.3.3.2「NDB Cluster の推奨開始構成」</a>を参照してください。
        </p></div><p>
        <code class="filename">config.ini</code>
        ファイルには、各ノードに固有のセクションがあります。
        たとえば、このクラスタには 2
        つのデータノードがあるため、前に示した構成ファイルにはこれらのノードを定義する
        2 つの <code class="literal">[ndbd]</code>
        セクションがあります。
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
          <code class="filename">config.ini</code>
          ファイルでは、セクション見出しと同じ行にコメントを配置しないでください。これを行うと、管理サーバーはこのような構成ファイルを解析できないため、起動しなくなります。
        </p></div><h5><a name="mysql-cluster-config-ini-sections"></a>config.ini ファイルのセクション</h5><p>
        次のリストで説明するように、<code class="filename">config.ini</code>
        構成ファイルでは 6
        つの異なるセクションを使用できます。
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">[computer]</code>:
            クラスタホストを定義します。
            これは、実行可能な NDB Cluster
            を構成するために必要ではありませんが、大きなクラスタを設定するときに便利に使用できます。
            詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-computer-definition" title="23.3.3.4 NDB Cluster でのコンピュータの定義">セクション23.3.3.4「NDB Cluster でのコンピュータの定義」</a>を参照してください。
          </p></li><li class="listitem"><p>
            <code class="literal">[ndbd]</code>: クラスタデータノード
            (<span class="command"><strong>ndbd</strong></span> プロセス) を定義します。
            詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndbd-definition" title="23.3.3.6 NDB Cluster データノードの定義">セクション23.3.3.6「NDB Cluster データノードの定義」</a>,を参照してください。
          </p></li><li class="listitem"><p>
            <code class="literal">[mysqld]</code>: クラスタの MySQL
            サーバーノード (SQL ノードや API
            ノードとも呼ばれる) を定義します。 SQL
            ノードの構成については、<a class="xref" href="mysql-cluster.html#mysql-cluster-api-definition" title="23.3.3.7 NDB Cluster での SQL およびその他の API ノードの定義">セクション23.3.3.7「NDB Cluster での SQL およびその他の API ノードの定義」</a>を参照してください。
          </p></li><li class="listitem"><p>
            <code class="literal">[mgm]</code> または
            <code class="literal">[ndb_mgmd]</code>:
            クラスタの管理サーバー (MGM)
            ノードを定義します。
            管理ノードの構成については、<a class="xref" href="mysql-cluster.html#mysql-cluster-mgm-definition" title="23.3.3.5 NDB Cluster 管理サーバーの定義">セクション23.3.3.5「NDB Cluster 管理サーバーの定義」</a>を参照してください。
          </p></li><li class="listitem"><p>
            <code class="literal">[tcp]</code>: TCP/IP
            がデフォルトのトランスポートプロトコルであるクラスタノード間の
            TCP/IP 接続を定義します。 通常、NDB Cluster
            はこれを自動的に処理するため、<code class="literal">[tcp]</code>または<code class="literal">[tcp
            default]</code>セクションを設定する必要はありませんが、状況によっては、クラスタによって提供されるデフォルトをオーバーライドする必要があります。
            使用可能な TCP/IP
            構成パラメータと使用方法については、<a class="xref" href="mysql-cluster.html#mysql-cluster-tcp-definition" title="23.3.3.10 NDB Cluster TCP/IP 接続">セクション23.3.3.10「NDB Cluster TCP/IP 接続」</a>を参照してください。
            (場合によっては、<a class="xref" href="mysql-cluster.html#mysql-cluster-tcp-definition-direct" title="23.3.3.11 直接接続を使用した NDB Cluster TCP/IP 接続">セクション23.3.3.11「直接接続を使用した NDB Cluster TCP/IP 接続」</a>も参考になる可能性があります。)
          </p></li><li class="listitem"><p>
            <code class="literal">[shm]</code>:
            ノード間の共有メモリー接続を定義します。
            これは、MySQL 8.0
            ではデフォルトで有効になっていますが、まだ実験的なものだと考えるようにしてください。
            SHM
            相互接続については、<a class="xref" href="mysql-cluster.html#mysql-cluster-shm-definition" title="23.3.3.12 NDB Cluster の共有メモリー接続">セクション23.3.3.12「NDB Cluster の共有メモリー接続」</a>を参照してください。
          </p></li><li class="listitem"><p>
            <code class="literal">[sci]</code>:
            クラスタデータノード間のスケーラブルコヒーラントインタフェース接続を定義します。
            NDB 8.0 ではサポートされていません。
          </p></li></ul></div><p>
        セクションごとに <code class="literal">default</code>
        値を定義できます。
        使用する場合、<code class="literal">default</code>
        セクションはそのタイプの他のセクションの前に配置する必要があります。
        たとえば、<code class="literal">[ndbd
        default]</code>セクションは、構成ファイルの<code class="literal">[ndbd]</code>セクションの前に表示される必要があります。
      </p><p>
        NDB Cluster パラメータ名は、MySQL Server
        <code class="filename">my.cnf</code> または
        <code class="filename">my.ini</code>
        ファイルで指定されていないかぎり、大文字と小文字が区別されません。
      </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-config-starting"></a>23.3.3.2 NDB Cluster の推奨開始構成</h4></div></div></div><p>
        NDB Cluster
        から最高のパフォーマンスを得るには、次のような多くの要因があります:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            NDB Cluster ソフトウェアバージョン
          </p></li><li class="listitem"><p>
            データノードおよび SQL ノードの数
          </p></li><li class="listitem"><p>
            ハードウェア
          </p></li><li class="listitem"><p>
            オペレーティングシステム
          </p></li><li class="listitem"><p>
            格納されるデータの量
          </p></li><li class="listitem"><p>
            クラスタ稼働時の負荷のサイズとタイプ
          </p></li></ul></div><p>
        したがって、最適な構成の取得は反復プロセスである可能性が高く、その結果は
        NDB Cluster
        デプロイメントごとに大きく異なる可能性があります。
        構成の変更は、クラスタが実行されているプラットフォーム、または
        NDB Cluster
        のデータを使用するアプリケーションで変更が行われたときにも示される可能性があります。
        これらの理由により、すべての使用シナリオに適した単一の構成を提示することは不可能です。
        ただし、このセクションでは推奨されるベース構成を示します。
      </p><p><b>初期の config.ini ファイル. </b>
          NDB Cluster 8.0
          を実行しているクラスタを構成するには、次の
          <code class="filename">config.ini</code>
          ファイルを開始することをお勧めします:
        </p><pre class="programlisting"># TCP PARAMETERS

[tcp default]
<code class="literal">SendBufferMemory</code>=2M
<code class="literal">ReceiveBufferMemory</code>=2M

# Increasing the sizes of these 2 buffers beyond the default values
# helps prevent bottlenecks due to slow disk I/O.

# MANAGEMENT NODE PARAMETERS

[ndb_mgmd default]
<code class="literal">DataDir</code>=<em class="replaceable"><code>path/to/management/server/data/directory</code></em>

# It is possible to use a different data directory for each management
# server, but for ease of administration it is preferable to be
# consistent.

[ndb_mgmd]
<code class="literal">HostName</code>=<em class="replaceable"><code>management-server-A-hostname</code></em>
# <code class="literal">NodeId</code>=<em class="replaceable"><code>management-server-A-nodeid</code></em>

[ndb_mgmd]
<code class="literal">HostName</code>=<em class="replaceable"><code>management-server-B-hostname</code></em>
# <code class="literal">NodeId</code>=<em class="replaceable"><code>management-server-B-nodeid</code></em>

# Using 2 management servers helps guarantee that there is always an
# arbitrator in the event of network partitioning, and so is
# recommended for high availability. Each management server must be
# identified by a HostName. You may for the sake of convenience specify
# a NodeId for any management server, although one is allocated
# for it automatically; if you do so, it must be in the range 1-255
# inclusive and must be unique among all IDs specified for cluster
# nodes.

# DATA NODE PARAMETERS

[ndbd default]
<code class="literal">NoOfReplicas</code>=2

# Using two fragment replicas is recommended to guarantee availability of data;
# using only one fragment replica does not provide any redundancy, which means
# that the failure of a single data node causes the entire cluster to
# shut down. As of NDB 8.0.19, it is also possible (but not required) to
# use more than two fragment replicas, although two fragment replicas are
# sufficient to provide high availability.

<code class="literal">LockPagesInMainMemory</code>=1

# On Linux and Solaris systems, setting this parameter locks data node
# processes into memory. Doing so prevents them from swapping to disk,
# which can severely degrade cluster performance.

<code class="literal">DataMemory</code>=3456M

# The value provided for DataMemory assumes 4 GB RAM
# per data node. However, for best results, you should first calculate
# the memory that would be used based on the data you actually plan to
# store (you may find the <a class="link" href="mysql-cluster.html#mysql-cluster-programs-ndb-size-pl" title="23.4.28 ndb_size.pl — NDBCLUSTER サイズ要件エスティメータ">ndb_size.pl</a> utility helpful in estimating
# this), then allow an extra 20% over the calculated values. Naturally,
# you should ensure that each data node host has at least as much
# physical memory as the sum of these two values.

# <code class="literal">ODirect</code>=1

# Enabling this parameter causes NDBCLUSTER to try using O_DIRECT
# writes for local checkpoints and redo logs; this can reduce load on
# CPUs. We recommend doing so when using NDB Cluster on systems running
# Linux kernel 2.6 or later.

<code class="literal">NoOfFragmentLogFiles</code>=300
<code class="literal">DataDir</code>=<em class="replaceable"><code>path/to/data/node/data/directory</code></em>
<code class="literal">MaxNoOfConcurrentOperations</code>=100000

<code class="literal">SchedulerSpinTimer</code>=400
<code class="literal">SchedulerExecutionTimer</code>=100
<code class="literal">RealTimeScheduler</code>=1
# Setting these parameters allows you to take advantage of real-time scheduling
# of NDB threads to achieve increased throughput when using <span class="command"><strong>ndbd</strong></span>. They
# are not needed when using <span class="command"><strong>ndbmtd</strong></span>; in particular, you should not set
# <code class="literal">RealTimeScheduler</code> for <span class="command"><strong>ndbmtd</strong></span> data nodes.

<code class="literal">TimeBetweenGlobalCheckpoints</code>=1000
<code class="literal">TimeBetweenEpochs</code>=200
<code class="literal">RedoBuffer</code>=32M

# <code class="literal">CompressedLCP</code>=1
# <code class="literal">CompressedBackup</code>=1
# Enabling CompressedLCP and CompressedBackup causes, respectively, local
checkpoint files and backup files to be compressed, which can result in a space
savings of up to 50% over noncompressed LCPs and backups.

# <code class="literal">MaxNoOfLocalScans</code>=64
<code class="literal">MaxNoOfTables</code>=1024
<code class="literal">MaxNoOfOrderedIndexes</code>=256

[ndbd]
<code class="literal">HostName</code>=<em class="replaceable"><code>data-node-A-hostname</code></em>
# <code class="literal">NodeId</code>=<em class="replaceable"><code>data-node-A-nodeid</code></em>

<code class="literal">LockExecuteThreadToCPU</code>=1
<code class="literal">LockMaintThreadsToCPU</code>=0
# On systems with multiple CPUs, these parameters can be used to lock NDBCLUSTER
# threads to specific CPUs

[ndbd]
<code class="literal">HostName</code>=<em class="replaceable"><code>data-node-B-hostname</code></em>
# <code class="literal">NodeId</code>=<em class="replaceable"><code>data-node-B-nodeid</code></em>

<code class="literal">LockExecuteThreadToCPU</code>=1
<code class="literal">LockMaintThreadsToCPU</code>=0

# You must have an [ndbd] section for every data node in the cluster;
# each of these sections must include a HostName. Each section may
# optionally include a NodeId for convenience, but in most cases, it is
# sufficient to allow the cluster to allocate node IDs dynamically. If
# you do specify the node ID for a data node, it must be in the range 1
# to 144 inclusive and must be unique among all IDs specified for
# cluster nodes. (Previous to NDB 8.0.18, this range was 1 to 48 inclusive.)

# SQL NODE / API NODE PARAMETERS

[mysqld]
# <code class="literal">HostName</code>=<em class="replaceable"><code>sql-node-A-hostname</code></em>
# <code class="literal">NodeId</code>=<em class="replaceable"><code>sql-node-A-nodeid</code></em>

[mysqld]

[mysqld]

# Each API or SQL node that connects to the cluster requires a [mysqld]
# or [api] section of its own. Each such section defines a connection
# <span class="quote">「<span class="quote">slot</span>」</span>; you should have at least as many of these sections in the
# config.ini file as the total number of API nodes and SQL nodes that
# you wish to have connected to the cluster at any given time. There is
# no performance or other penalty for having extra slots available in
# case you find later that you want or need more API or SQL nodes to
# connect to the cluster at the same time.
# If no HostName is specified for a given [mysqld] or [api] section,
# then <span class="emphasis"><em>any</em></span> API or SQL node may use that slot to connect to the
# cluster. You may wish to use an explicit HostName for one connection slot
# to guarantee that an API or SQL node from that host can always
# connect to the cluster. If you wish to prevent API or SQL nodes from
# connecting from other than a desired host or hosts, then use a
# HostName for every [mysqld] or [api] section in the config.ini file.
# You can if you wish define a node ID (NodeId parameter) for any API or
# SQL node, but this is not necessary; if you do so, it must be in the
# range 1 to 255 inclusive and must be unique among all IDs specified
# for cluster nodes.
</pre><p><b>推奨される SQL ノードの my.cnf オプション. </b>
          NDB Cluster SQL ノードとして機能する MySQL Servers
          は、常に <code class="option">--ndbcluster</code>
          および <code class="option">--ndb-connectstring</code>
          オプションを使用して、コマンド行または
          <code class="filename">my.cnf</code>
          で起動する必要があります。
          さらに、セットアップでほかのオプションを必要とする場合を除き、クラスタ内のすべての
          <span class="command"><strong>mysqld</strong></span>
          プロセスに次のオプションを設定してください。
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="option">--ndb-use-exact-count=0</code>
          </p></li><li class="listitem"><p>
            <code class="option">--ndb-index-stat-enable=0</code>
          </p></li><li class="listitem"><p>
            <code class="option">--ndb-force-send=1</code>
          </p></li><li class="listitem"><p>
            <code class="option">--optimizer-switch=engine_condition_pushdown=on</code>
          </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-connection-strings"></a>23.3.3.3 NDB Cluster 接続文字列</h4></div></div></div><a class="indexterm" name="idm45563234086048"></a><a class="indexterm" name="idm45563234083936"></a><p>
        NDB Cluster 管理サーバー (<span class="command"><strong>ndb_mgmd</strong></span>)
        を除き、NDB Cluster
        の一部である各ノードには、管理サーバーの場所を指す<span class="firstterm">接続文字列</span>が必要です。
        この接続文字列は、管理サーバーとの接続を確立するときに使用されるほか、クラスタ内でのノードの役割によっては、ほかのタスクを実行するときにも使用されます。
        接続文字列の構文は次のとおりです。
      </p><pre class="programlisting">[nodeid=<em class="replaceable"><code>node_id</code></em>, ]<em class="replaceable"><code>host-definition</code></em>[, <em class="replaceable"><code>host-definition</code></em>[, ...]]

<em class="replaceable"><code>host-definition</code></em>:
    <em class="replaceable"><code>host_name</code></em>[:<em class="replaceable"><code>port_number</code></em>]
</pre><p>
        <code class="literal">node_id</code> は、<code class="filename">config.ini</code>
        内のノードを識別する 1
        以上の整数です。<em class="replaceable"><code>host_name</code></em>
        は、有効なインターネット名または IP
        アドレスを表す文字列です。<em class="replaceable"><code>port_number</code></em>
        は、TCP/IP ポート番号を参照する整数です。
      </p><pre class="programlisting">example 1 (long):    "nodeid=2,myhost1:1100,myhost2:1100,198.51.100.3:1200"
example 2 (short):   "myhost1"
</pre><p>
        何も指定されなかった場合は、デフォルトの接続文字列値として
        <code class="literal">localhost:1186</code> が使用されます。
        接続文字列から <em class="replaceable"><code>port_num</code></em>
        が省略された場合、デフォルトポートは 1186
        です。 このポートは、この目的のために IANA
        によって割り当てられたものであるため、ネットワーク上で常に使用可能です
        (詳細は、<a class="ulink" href="http://www.iana.org/assignments/port-numbers" target="_top">http://www.iana.org/assignments/port-numbers</a>を参照してください)。
      </p><p>
        複数のホスト定義を列挙すると、複数の冗長管理サーバーを指定できます。
        NDB Cluster データまたは API
        ノードは、接続が正常に確立されるまで、指定された順序で各ホスト上の連続した管理サーバーへの接続を試みます。
      </p><p>
        接続文字列には、管理サーバーに接続する複数のネットワークインタフェースを持つノードで使用される
        1
        つ以上のバインドアドレスを指定することもできます。
        バインドアドレスは、ホスト名またはネットワークアドレスと、オプションのポート番号で構成されます。
        この拡張された接続文字列の構文をここに示します。
      </p><pre class="programlisting">[nodeid=<em class="replaceable"><code>node_id</code></em>, ]
    [bind-address=<em class="replaceable"><code>host-definition</code></em>, ]
    <em class="replaceable"><code>host-definition</code></em>[; bind-address=<em class="replaceable"><code>host-definition</code></em>]
    <em class="replaceable"><code>host-definition</code></em>[; bind-address=<em class="replaceable"><code>host-definition</code></em>]
    [, ...]]

<em class="replaceable"><code>host-definition</code></em>:
    <em class="replaceable"><code>host_name</code></em>[:<em class="replaceable"><code>port_number</code></em>]
</pre><p>
        接続文字列で管理ホストを指定する<span class="emphasis"><em>前に</em></span>
        1
        つのバインドアドレスを使用すると、そのアドレスは管理ホストのいずれかに接続するためのデフォルトとして使用されます
        (特定の管理サーバーにオーバーライドされた場合を除きます。例については、このセクションで後述します)。
        たとえば、次の接続文字列によって、このノードは接続先の管理サーバーに関係なく
        <code class="literal">198.51.100.242</code> を使用します。
      </p><pre class="programlisting">bind-address=198.51.100.242, poseidon:1186, perch:1186
</pre><p>
        管理ホストの定義の<span class="emphasis"><em>あとに</em></span>バインドアドレスを指定すると、そのアドレスはその管理ノードへの接続でのみ使用されます。
        次の接続文字列について考えます。
      </p><pre class="programlisting">poseidon:1186;bind-address=localhost, perch:1186;bind-address=198.51.100.242
</pre><p>
        この場合、ノードは <code class="literal">poseidon</code>
        という名前のホストで実行されている管理サーバーに接続するために
        <code class="literal">localhost</code>
        を使用し、<code class="literal">perch</code>
        という名前のホストで実行されている管理サーバーに接続するために
        <code class="literal">198.51.100.242</code> を使用します。
      </p><p>
        デフォルトのバインドアドレスを指定してから、1
        台以上の管理ホストにこのデフォルトをオーバーライドできます。
        次の例では、ホスト <code class="literal">poseidon</code>
        で実行されている管理サーバーに接続するために
        <code class="literal">localhost</code>
        が使用されます。<code class="literal">198.51.100.242</code>
        は、最初に
        (どの管理サーバーの定義よりも前に)
        指定されているため、デフォルトのバインドアドレスであり、ホスト
        <code class="literal">perch</code> および <code class="literal">orca</code>
        上の管理サーバーに接続するために使用されます。
      </p><pre class="programlisting">bind-address=198.51.100.242,poseidon:1186;bind-address=localhost,perch:1186,orca:2200
</pre><p>
        接続文字列を指定するには、いくつかの異なる方法があります。
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            各実行可能ファイルには、起動時に管理サーバーを指定できる固有のコマンド行オプションがあります。
            (各実行可能ファイルのドキュメントを参照してください。)
          </p></li><li class="listitem"><p>
            管理サーバーの <code class="filename">my.cnf</code>
            ファイルの <code class="literal">[mysql_cluster]</code>
            セクションに接続文字列を配置することで、クラスタ内のすべてのノードの接続文字列を同時に設定することもできます。
          </p></li><li class="listitem"><p>
            下位互換性のため、同じ構文を使用するオプションがほかに
            2 つ用意されています。
          </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
                <code class="envar">NDB_CONNECTSTRING</code>
                環境変数を設定して、接続文字列を含めます。
              </p></li><li class="listitem"><p>
                各実行可能ファイル用の接続文字列を
                <code class="filename">Ndb.cfg</code>
                という名前のテキストファイルに記述し、このファイルを実行可能ファイルの起動ディレクトリに配置します。
              </p></li></ol></div><p>
            ただし、これらは現在非推奨であり、新しいインストールに使用しないでください。
          </p></li></ul></div><p>
        推奨される接続文字列の指定方法は、各実行可能ファイルのコマンド行または
        <code class="filename">my.cnf</code> ファイルでの設定です。
      </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-computer-definition"></a>23.3.3.4 NDB Cluster でのコンピュータの定義</h4></div></div></div><a class="indexterm" name="idm45563234032272"></a><a class="indexterm" name="idm45563234030240"></a><p>
        <code class="literal">[computer]</code>
        セクションは、システム内の各ノードのホスト名を定義しないで済む方法を提供する以外は、基本的には重要ではありません。
        ここに示すすべてのパラメータは必須です。
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="ndbparam-computer-id"></a>
            <code class="literal">Id</code>
          </p><div class="informaltable"><a name="id-computer-table"></a><table frame="box" rules="all" summary="Id computer 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>string</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>[...]</td>
              </tr><tr>
                <th>範囲</th>
                <td>...</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-computer-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    IS (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            これは、構成ファイルに含まれるホストコンピュータを参照するために使用する一意の識別子です。
          </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">重要</div><p>
              コンピュータ ID
              は、管理、API、またはデータノードに使用するノード
              ID とは<span class="emphasis"><em>異なります</em></span>。 ノード
              ID の場合と異なり、<code class="filename">config.ini</code>
              ファイルの <code class="literal">[computer]</code>
              セクションでは、<code class="literal">Id</code>
              の代わりに <code class="literal">NodeId</code>
              を使用できません。
            </p></div></li><li class="listitem"><p><a name="ndbparam-computer-hostname"></a>
            <code class="literal">HostName</code>
          </p><div class="informaltable"><a name="hostname-computer-table"></a><table frame="box" rules="all" summary="HostName computer 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>name or IP address</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>[...]</td>
              </tr><tr>
                <th>範囲</th>
                <td>...</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-computer-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            これは、コンピュータのホスト名または IP
            アドレスです。
          </p></li></ul></div><p><a name="mysql-cluster-computer-definition-restart-types"></a><b>再起動のタイプ. </b>
          このセクションのパラメータの説明で使用される再起動タイプに関する情報を次のテーブルに示します:
        </p><div class="table"><a name="idm45563233983808"></a><p class="title"><b>表 23.8 NDB Cluster の再起動タイプ</b></p><div class="table-contents"><table><col style="width: 10%"><col style="width: 30%"><col style="width: 60%"><thead><tr>
            <th scope="col">シンボル</th>
            <th scope="col">再起動タイプ</th>
            <th scope="col">説明</th>
          </tr></thead><tbody><tr>
            <th scope="row">N</th>
            <td>ノード</td>
            <td>パラメータはローリング再起動を使用して更新できます
              (<a class="xref" href="mysql-cluster.html#mysql-cluster-rolling-restart" title="23.5.5 NDB Cluster のローリング再起動の実行">セクション23.5.5「NDB Cluster のローリング再起動の実行」</a>
              を参照)</td>
          </tr><tr>
            <th scope="row">S</th>
            <td>システム</td>
            <td>このパラメータの変更を有効にするには、すべてのクラスタノードを完全に停止してから再起動する必要があります</td>
          </tr><tr>
            <th scope="row">I</th>
            <td>Initial</td>
            <td><code class="option">--initial</code>
              オプションを使用してデータノードを再起動する必要があります</td>
          </tr></tbody></table></div></div><br class="table-break"></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-mgm-definition"></a>23.3.3.5 NDB Cluster 管理サーバーの定義</h4></div></div></div><a class="indexterm" name="idm45563233963232"></a><a class="indexterm" name="idm45563233961088"></a><p>
        <code class="literal">[ndb_mgmd]</code>
        セクションは、管理サーバーの動作を構成するために使用されます。
        複数の管理サーバーが採用されている場合は、それらのすべてに共通するパラメータを
        <code class="literal">[ndb_mgmd default]</code>
        セクションに指定できます。<code class="literal">[mgm]</code>
        と <code class="literal">[mgm default]</code>
        はこれらの古いエイリアスで、下位互換性に対応しています。
      </p><p>
        次のリストに示すパラメータはすべてオプションであり、省略した場合はデフォルト値が使用されます。
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
          <code class="literal">ExecuteOnComputer</code> も
          <code class="literal">HostName</code>
          パラメータも存在しない場合は、両方にデフォルト値の
          <code class="literal">localhost</code> が使用されます。
        </p></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="ndbparam-mgmd-id"></a>
            <code class="literal">Id</code>
          </p><a class="indexterm" name="idm45563233949280"></a><div class="informaltable"><a name="id-mgmd-table"></a><table frame="box" rules="all" summary="Id 管理ノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>unsigned</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>[...]</td>
              </tr><tr>
                <th>範囲</th>
                <td>1 - 255</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-mgm-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    IS (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            クラスタ内の各ノードは一意の ID
            を持っています。
            管理ノードの場合、これは 1-255 の
            (これらを含む) 範囲の整数値で表されます。
            この ID
            は、ノードをアドレス指定するためにすべての内部クラスタメッセージで使用されるため、ノードのタイプに関係なく
            NDB Cluster
            ノードごとに一意である必要があります。
          </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
              データノードの ID は、145
              未満にする必要があります。
              多数のデータノードを配備する予定の場合は、管理ノード
              (および API ノード) のノード ID を 144
              より大きい値に制限することをお勧めします。
              (NDB 8.0.17 以前では、データノード ID
              の最大値は 48 でした。)
            </p></div><p>
            <code class="literal">Id</code>
            パラメータを使った管理ノードの識別は、<code class="literal">NodeId</code>
            を優先するため非推奨になりました。
            <code class="literal">Id</code>
            は下位互換性のために引き続きサポートされていますが、警告が生成されるようになり、NDB
            Cluster
            の将来のバージョンで削除される可能性があります。
          </p></li><li class="listitem"><p><a name="ndbparam-mgmd-nodeid"></a>
            <code class="literal">NodeId</code>
          </p><a class="indexterm" name="idm45563233924784"></a><div class="informaltable"><a name="nodeid-mgmd-table"></a><table frame="box" rules="all" summary="NodeId 管理ノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>unsigned</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>[...]</td>
              </tr><tr>
                <th>範囲</th>
                <td>1 - 255</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-mgm-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    IS (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            クラスタ内の各ノードは一意の ID
            を持っています。 管理ノードでは、これは
            1-255 の (これらを含む)
            範囲の整数値で表されます。 この ID
            は、ノードをアドレス指定するためにすべての内部クラスタメッセージで使用されるため、ノードのタイプに関係なく
            NDB Cluster
            ノードごとに一意である必要があります。
          </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
              NDB 8.0.18 の時点では、データノード ID は 145
              未満である必要があります。 (以前は 49
              未満でした。)
              多数のデータノードを配備する予定の場合は、管理ノード
              (および API ノード) のノード ID を 144
              より大きい値に制限することをお勧めします。
            </p></div><p>
            <code class="literal">NodeId</code>
            は、管理ノードを識別時の使用が推奨されるパラメータ名です。
            古い <code class="literal">Id</code>
            は下位互換性のために引き続きサポートされますが、非推奨になり、使用時に警告が生成されるようになりました。将来の
            NDB Cluster
            リリースでも削除される可能性があります。
          </p></li><li class="listitem"><p><a name="ndbparam-mgmd-executeoncomputer"></a>
            <code class="literal">ExecuteOnComputer</code>
          </p><a class="indexterm" name="idm45563233900928"></a><div class="informaltable"><a name="executeoncomputer-mgmd-table"></a><table frame="box" rules="all" summary="ExecuteOnComputer 管理ノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>name</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>[...]</td>
              </tr><tr>
                <th>範囲</th>
                <td>...</td>
              </tr><tr>
                <th>非推奨</th>
                <td>Yes (in NDB 7.5)</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-mgm-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    S (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            これは、<code class="filename">config.ini</code> ファイルの
            <code class="literal">[computer]</code>
            セクションに定義されたいずれかのコンピュータに設定されている
            <code class="literal">Id</code> を参照します。
          </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">重要</div><p>
              このパラメータは非推奨であり、将来のリリースで削除される予定です。
              かわりに
              <code class="literal">HostName</code>
              パラメータを使用してください。
            </p></div></li><li class="listitem"><p><a name="ndbparam-mgmd-portnumber"></a>
            <code class="literal">PortNumber</code>
          </p><a class="indexterm" name="idm45563233875120"></a><div class="informaltable"><a name="portnumber-mgmd-table"></a><table frame="box" rules="all" summary="PortNumber 管理ノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>unsigned</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>1186</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 64K</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-mgm-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    S (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            これは、管理サーバーが構成要求と管理コマンドを待機するポートの番号です。
          </p></li><li class="listitem"><a name="ndbparam-mgmd-dedicatednode"></a><a class="indexterm" name="idm45563233856960"></a><p></p><p>
            このノードのノード ID
            は、明示的にリクエストする接続にのみ指定できます。
            ノード ID
            をリクエストする管理サーバーは、このノード
            ID を使用できません。
            このパラメータは、同じホストで複数の管理サーバーを実行していて、<code class="literal">HostName</code>
            でプロセスを区別するのに十分でない場合に使用できます。
            テストで使用するためのものです。
          </p></li><li class="listitem"><p><a name="ndbparam-mgmd-hostname"></a>
            <code class="literal">HostName</code>
          </p><a class="indexterm" name="idm45563233850208"></a><div class="informaltable"><a name="hostname-mgmd-table"></a><table frame="box" rules="all" summary="HostName 管理ノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>name or IP address</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>[...]</td>
              </tr><tr>
                <th>範囲</th>
                <td>...</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-mgm-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            このパラメータを指定すると、管理ノードを配置するコンピュータのホスト名が定義されます。
            <code class="literal">localhost</code>
            以外のホスト名を指定するには、このパラメータまたは
            <code class="literal">ExecuteOnComputer</code>
            のどちらかが必要です。
          </p></li><li class="listitem"><p><a name="ndbparam-mgmd-locationdomainid"></a>
            <code class="literal">LocationDomainId</code>
          </p><a class="indexterm" name="idm45563233828928"></a><div class="informaltable"><a name="locationdomainid-mgmd-table"></a><table frame="box" rules="all" summary="LocationDomainId 管理ノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>integer</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>0</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 16</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-mgm-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td></td>
              </tr></tbody></table></div><p>
            クラウド内の特定の<a class="ulink" href="https://docs.us-phoenix-1.oraclecloud.com/Content/General/Concepts/regions.htm" target="_top">「可用性ドメイン」</a>
            (可用性ゾーンとも呼ばれる)
            に管理ノードを割り当てます。
            どのノードがどの可用性ドメインにあるかを
            <code class="literal">NDB</code>
            に通知することで、次の方法でクラウド環境のパフォーマンスを向上させることができます:
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                リクエストされたデータが同じノードで見つからない場合、読取りは同じ可用性ドメイン内の別のノードに転送できます。
              </p></li><li class="listitem"><p>
                異なる可用性ドメイン内のノード間の通信では、それ以上の手動操作なしで
                <code class="literal">NDB</code> トランスポータ WAN
                サポートを使用することが保証されています。
              </p></li><li class="listitem"><p>
                トランスポータグループ番号は、SQL
                および他の API
                ノードが可能な場合は常に同じ可用性ドメイン内のローカルデータノードと通信するように、使用される可用性ドメインに基づくことができます。
              </p></li><li class="listitem"><p>
                アービトレータは、データノードが存在しない可用性ドメインから選択することも、そのような可用性ドメインが見つからない場合は
                3
                番目の可用性ドメインから選択することもできます。
              </p></li></ul></div><p>
            <code class="literal">LocationDomainId</code> は 0 以上 16
            以下の整数値を取り、0 がデフォルトです。0
            を使用することは、パラメータを未設定のままにすることと同じです。
          </p></li><li class="listitem"><p><a name="ndbparam-mgmd-logdestination"></a>
            <code class="literal">LogDestination</code>
          </p><a class="indexterm" name="idm45563233799888"></a><div class="informaltable"><a name="logdestination-mgmd-table"></a><table frame="box" rules="all" summary="LogDestination 管理ノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>{CONSOLE|SYSLOG|FILE}</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>FILE: filename=ndb_nodeid_cluster.log, maxsize=1000000, maxfiles=6</td>
              </tr><tr>
                <th>範囲</th>
                <td>...</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-mgm-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            このパラメータは、クラスタのロギング情報の送信先を指定します。
            これには
            <code class="literal">CONSOLE</code>、<code class="literal">SYSLOG</code>、<code class="literal">FILE</code>
            の 3
            つのオプションがあり、<code class="literal">FILE</code>
            がデフォルトです。
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <code class="literal">CONSOLE</code>
                では、<code class="literal">stdout</code>
                にログが出力されます。
              </p><pre class="programlisting">CONSOLE
</pre></li><li class="listitem"><p>
                <code class="literal">SYSLOG</code>
                では、<code class="literal">syslog</code>
                機能にログが送信されます。指定できる値は、<code class="literal">auth</code>、<code class="literal">authpriv</code>、<code class="literal">cron</code>、<code class="literal">daemon</code>、<code class="literal">ftp</code>、<code class="literal">kern</code>、<code class="literal">lpr</code>、<code class="literal">mail</code>、<code class="literal">news</code>、<code class="literal">syslog</code>、<code class="literal">user</code>、<code class="literal">uucp</code>、<code class="literal">local0</code>、<code class="literal">local1</code>、<code class="literal">local2</code>、<code class="literal">local3</code>、<code class="literal">local4</code>、<code class="literal">local5</code>、<code class="literal">local6</code>、<code class="literal">local7</code>
                のいずれかです。
              </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
                  すべてのオペレーティングシステムで必ずしもすべての機能がサポートされるとはかぎりません。
                </p></div><pre class="programlisting">SYSLOG:facility=syslog
</pre></li><li class="listitem"><p>
                <code class="literal">FILE</code>
                では、クラスタのログ出力が同じマシン上の通常のファイルにパイプされます。
                次の値を指定できます。
              </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: square; "><li class="listitem"><p>
                    <code class="literal">filename</code>:
                    ログファイルの名前。
                  </p><p>
                    このような場合に使用されるデフォルトのログファイル名は
                    <code class="filename">ndb_<em class="replaceable"><code>nodeid</code></em>_cluster.log</code>
                    です。
                  </p></li><li class="listitem"><p>
                    <code class="literal">maxsize</code>:
                    ロギングが新しいファイルにロールオーバーされる前のファイルの最大サイズ
                    (バイト単位)。
                    これが発生すると、古いログファイルの名前が変更され、ファイル名の末尾に
                    <em class="replaceable"><code>.N</code></em> が追加されます
                    (<em class="replaceable"><code>N</code></em>
                    はこの名前に対してまだ使用されていない次の番号です)。
                  </p></li><li class="listitem"><p>
                    <code class="literal">maxfiles</code>:
                    ログファイルの最大数。
                  </p></li></ul></div><pre class="programlisting">FILE:filename=cluster.log,maxsize=1000000,maxfiles=6
</pre><p>
                <code class="literal">FILE</code>
                パラメータのデフォルト値は、<code class="literal">FILE:filename=ndb_<em class="replaceable"><code>node_id</code></em>_cluster.log,maxsize=1000000,maxfiles=6</code>
                です (<em class="replaceable"><code>node_id</code></em>
                はノードの ID です)。
              </p></li></ul></div><p>
            ここに示すように、複数のログの保存先をセミコロンで区切って指定できます。
          </p><pre class="programlisting">CONSOLE;SYSLOG:facility=local0;FILE:filename=/var/log/mgmd
</pre></li><li class="listitem"><p><a name="ndbparam-mgmd-arbitrationrank"></a>
            <code class="literal">ArbitrationRank</code>
          </p><a class="indexterm" name="idm45563233738592"></a><div class="informaltable"><a name="arbitrationrank-mgmd-table"></a><table frame="box" rules="all" summary="ArbitrationRank 管理ノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>0-2</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>1</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 2</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-mgm-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            このパラメータは、アービトレータとして機能するノードを定義するために使用されます。
            アービトレータにできるのは、管理ノードと
            SQL ノードだけです。
            <code class="literal">ArbitrationRank</code>
            には次のいずれかの値を指定できます。
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <code class="literal">0</code>:
                ノードがアービトレータとして使用されることはありません。
              </p></li><li class="listitem"><p>
                <code class="literal">1</code>:
                ノードは高い優先度を持ちます。つまり、優先度の低いノードよりアービトレータとして優先されます。
              </p></li><li class="listitem"><p>
                <code class="literal">2</code>:
                優先度の高いノードがその目的に使用できない場合にのみアービトレータとして使用される低優先度ノードを示します。
              </p></li></ul></div><p>
            通常は、管理サーバーの
            <code class="literal">ArbitrationRank</code> を 1
            (管理ノードのデフォルト)
            に設定し、すべての SQL ノードを 0 (SQL
            ノードのデフォルト)
            に設定することにより、管理サーバーをアービトレータとして構成してください。
          </p><p>
            すべての管理および SQL ノードで
            <code class="literal">ArbitrationRank</code> を 0
            に設定するか、<code class="filename">config.ini</code>
            グローバル構成ファイルの <code class="literal">[ndbd
            default]</code> セクションに
            <code class="literal">Arbitration</code>
            パラメータを設定することで、アービトレーションを完全に無効化できます。
            <code class="literal">Arbitration</code>
            を設定すると、<code class="literal">ArbitrationRank</code>
            の設定はすべて無視されます。
          </p></li><li class="listitem"><p><a name="ndbparam-mgmd-arbitrationdelay"></a>
            <code class="literal">ArbitrationDelay</code>
          </p><a class="indexterm" name="idm45563233704816"></a><div class="informaltable"><a name="arbitrationdelay-mgmd-table"></a><table frame="box" rules="all" summary="ArbitrationDelay 管理ノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>milliseconds</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>0</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-mgm-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            アービトレーション要求に対する管理サーバーの応答をミリ秒数だけ遅らせるための整数値。
            デフォルトでは、この値は 0
            です。通常、これを変更する必要はありません。
          </p></li><li class="listitem"><p><a name="ndbparam-mgmd-datadir"></a>
            <code class="literal">DataDir</code>
          </p><a class="indexterm" name="idm45563233685408"></a><div class="informaltable"><a name="datadir-mgmd-table"></a><table frame="box" rules="all" summary="DataDir 管理ノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>path</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>.</td>
              </tr><tr>
                <th>範囲</th>
                <td>...</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-mgm-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            これは、管理サーバーからの出力ファイルが配置されるディレクトリを指定します。
            これらのファイルには、クラスタログファイル、プロセス出力ファイル、およびデーモンプロセス
            ID (PID) ファイルが含まれます。
            (ログファイルでは、<code class="literal">LogDestination</code>,
            の <code class="literal">FILE</code>
            パラメータをこのセクションで前述したように設定することで、この場所をオーバーライドできます。)
          </p><p>
            このパラメータのデフォルト値は、<span class="command"><strong>ndb_mgmd</strong></span>
            が配置されているディレクトリです。
          </p></li><li class="listitem"><p><a name="ndbparam-mgmd-portnumberstats"></a>
            <code class="literal">PortNumberStats</code>
          </p><a class="indexterm" name="idm45563233662480"></a><div class="informaltable"><a name="portnumberstats-mgmd-table"></a><table frame="box" rules="all" summary="PortNumberStats 管理ノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>unsigned</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>[...]</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 64K</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-mgm-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            このパラメータは、NDB Cluster
            管理サーバーから統計情報を取得するために使用されるポート番号を指定します。
            デフォルト値はありません。
          </p></li><li class="listitem"><p><a name="ndbparam-mgmd-wan"></a>
            <code class="literal">Wan</code>
          </p><a class="indexterm" name="idm45563233642848"></a><div class="informaltable"><a name="wan-mgmd-table"></a><table frame="box" rules="all" summary="wan 管理ノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>boolean</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>false</td>
              </tr><tr>
                <th>範囲</th>
                <td>true, false</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-mgm-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            WAN の TCP
            設定をデフォルトとして使用します。
          </p></li><li class="listitem"><p><a name="ndbparam-mgmd-heartbeatthreadpriority"></a>
            <code class="literal">HeartbeatThreadPriority</code>
          </p><a class="indexterm" name="idm45563233623776"></a><div class="informaltable"><a name="heartbeatthreadpriority-mgmd-table"></a><table frame="box" rules="all" summary="HeartbeatThreadPriority 管理ノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>string</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>[...]</td>
              </tr><tr>
                <th>範囲</th>
                <td>...</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-mgm-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td></td>
              </tr></tbody></table></div><p>
            管理および API
            ノードのハートビートスレッドのスケジューリングポリシーと優先度を設定します。
          </p><p>
            このパラメータを設定するための構文をここに示します。
          </p><pre class="programlisting">HeartbeatThreadPriority = <em class="replaceable"><code>policy</code></em>[, <em class="replaceable"><code>priority</code></em>]

<em class="replaceable"><code>policy</code></em>:
  {FIFO | RR}
</pre><p>
            このパラメータを設定するときは、ポリシーを指定する必要があります。
            これは、<code class="literal">FIFO</code> (先入れ先出し)
            または <code class="literal">RR</code> (ラウンドロビン)
            のいずれかです。
            オプションで、ポリシー値のあとに優先度
            (整数) を指定できます。
          </p></li><li class="listitem"><p><a name="ndbparam-mgmd-extrasendbuffermemory"></a>
            <code class="literal">ExtraSendBufferMemory</code>
          </p><a class="indexterm" name="idm45563233599424"></a><div class="informaltable"><a name="extrasendbuffermemory-mgmd-table"></a><table frame="box" rules="all" summary="ExtraSendBufferMemory 管理ノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>bytes</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>0</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 32G</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-mgm-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            このパラメータは、<code class="literal">TotalSendBufferMemory</code>、<code class="literal">SendBufferMemory</code>、またはその両方を使用して設定されたメモリーに加えて割り当てられるトランスポータ送信バッファーメモリーの量を指定します。
          </p></li><li class="listitem"><p><a name="ndbparam-mgmd-totalsendbuffermemory"></a>
            <code class="literal">TotalSendBufferMemory</code>
          </p><a class="indexterm" name="idm45563233577584"></a><div class="informaltable"><a name="totalsendbuffermemory-mgmd-table"></a><table frame="box" rules="all" summary="TotalSendBufferMemory 管理ノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>bytes</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>0</td>
              </tr><tr>
                <th>範囲</th>
                <td>256K - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-mgm-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            このパラメータは、すべての構成済みトランスポータ間で共有される送信バッファーメモリーの、このノードに割り当てられるメモリー合計量を決定するために使用されます。
          </p><p>
            このパラメータが設定されている場合、許可される最小値は
            256KB です。0
            はパラメータが設定されていないことを示します。
            詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-config-send-buffers" title="23.3.3.14 NDB Cluster 送信バッファーパラメータの構成">セクション23.3.3.14「NDB Cluster 送信バッファーパラメータの構成」</a>
            を参照してください。
          </p></li><li class="listitem"><p><a name="ndbparam-mgmd-heartbeatintervalmgmdmgmd"></a>
            <code class="literal">HeartbeatIntervalMgmdMgmd</code>
          </p><a class="indexterm" name="idm45563233555632"></a><div class="informaltable"><a name="heartbeatintervalmgmdmgmd-mgmd-table"></a><table frame="box" rules="all" summary="HeartbeatIntervalMgmdMgmd 管理ノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>milliseconds</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>1500</td>
              </tr><tr>
                <th>範囲</th>
                <td>100 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-mgm-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            別の管理ノードがこの管理ノードに接続しているかどうかを判定するために使用されるハートビートメッセージの間隔を指定します。
            管理ノードは、この間隔を 3
            回待ったあとで接続の切断を宣言します。このため、デフォルト設定の
            1500 ミリ秒では、管理ノードはおよそ 1600
            ミリ秒待ってからタイムアウトします。
          </p></li></ul></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
          管理ノードの構成を変更したあとは、新しい構成を有効にするためにクラスタのローリング再起動を実行する必要があります。
        </p><p>
          実行中の NDB Cluster
          に新しい管理サーバーを追加するには、既存の
          <code class="filename">config.ini</code>
          ファイルを変更したあとに、すべてのクラスタノードのローリング再起動も実行する必要があります。
          複数の管理ノードを使用するときに発生する問題の詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-limitations-multiple-nodes" title="23.1.7.10 複数の NDB Cluster ノードに関する制限事項">セクション23.1.7.10「複数の NDB Cluster ノードに関する制限事項」</a>を参照してください。
        </p></div><p><a name="mysql-cluster-mgm-definition-restart-types"></a><b>再起動のタイプ. </b>
          このセクションのパラメータの説明で使用される再起動タイプに関する情報を次のテーブルに示します:
        </p><div class="table"><a name="idm45563233531152"></a><p class="title"><b>表 23.9 NDB Cluster の再起動タイプ</b></p><div class="table-contents"><table><col style="width: 10%"><col style="width: 30%"><col style="width: 60%"><thead><tr>
            <th scope="col">シンボル</th>
            <th scope="col">再起動タイプ</th>
            <th scope="col">説明</th>
          </tr></thead><tbody><tr>
            <th scope="row">N</th>
            <td>ノード</td>
            <td>パラメータはローリング再起動を使用して更新できます
              (<a class="xref" href="mysql-cluster.html#mysql-cluster-rolling-restart" title="23.5.5 NDB Cluster のローリング再起動の実行">セクション23.5.5「NDB Cluster のローリング再起動の実行」</a>
              を参照)</td>
          </tr><tr>
            <th scope="row">S</th>
            <td>システム</td>
            <td>このパラメータの変更を有効にするには、すべてのクラスタノードを完全に停止してから再起動する必要があります</td>
          </tr><tr>
            <th scope="row">I</th>
            <td>Initial</td>
            <td><code class="option">--initial</code>
              オプションを使用してデータノードを再起動する必要があります</td>
          </tr></tbody></table></div></div><br class="table-break"></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-ndbd-definition"></a>23.3.3.6 NDB Cluster データノードの定義</h4></div></div></div><a class="indexterm" name="idm45563233510576"></a><a class="indexterm" name="idm45563233508544"></a><p>
        クラスタのデータノードの動作を構成するには、<code class="literal">[ndbd]</code>
        および <code class="literal">[ndbd default]</code>
        セクションを使用します。
      </p><p>
        データノードのプロセスとして
        <span class="command"><strong>ndbd</strong></span> バイナリと
        <span class="command"><strong>ndbmtd</strong></span>
        バイナリのどちらを使用する場合でも、セクション名としては常に
        <code class="literal">[ndbd]</code> と <code class="literal">[ndbd default]</code>
        が使用されます。
      </p><p>
        バッファーサイズ、プールサイズ、タイムアウトなどを制御する数多くのパラメータがあります。
        唯一の必須パラメータは、<code class="literal">ExecuteOnComputer</code>
        または <code class="literal">HostName</code>
        のいずれかです。これは、ローカルの
        <code class="literal">[ndbd]</code>
        セクションで定義する必要があります。
      </p><p>
        <code class="literal">NoOfReplicas</code>
        パラメータは、すべてのクラスタデータノードに共通であるため、<code class="literal">[ndbd
        default]</code> セクションに定義してください。
        <code class="literal">NoOfReplicas</code>
        を設定する必要は必ずしもありませんが、これを明示的に設定することをお勧めします。
      </p><p>
        ほとんどのデータノードパラメータは
        <code class="literal">[ndbd default]</code>
        セクションに設定します。 <code class="literal">[ndbd]</code>
        セクションでの変更が許可されるのは、ローカル値の設定を明示的に規定されているパラメータだけです。
        <code class="literal">HostName</code>、<code class="literal">NodeId</code>、および
        <code class="literal">ExecuteOnComputer</code> (存在する場合)
        は、<code class="filename">config.ini</code>
        のほかのセクションではなく、ローカルの
        <code class="literal">[ndbd]</code>
        で定義する<span class="emphasis"><em>必要があります</em></span>。
        つまり、これらのパラメータの設定は 1
        つのデータノードに固有のものです。
      </p><p>
        メモリー使用状況やバッファーサイズに影響を与えるパラメータでは、1024、1024
        * 1024、または 1024 * 1024 * 1024
        の単位を示すサフィクスとして
        <code class="literal">K</code>、<code class="literal">M</code>、または
        <code class="literal">G</code> を使用できます。
        (たとえば、<code class="literal">100K</code> は 100 * 1024 = 102400
        を意味します。)
      </p><p>
        MySQL Server <code class="filename">my.cnf</code> または
        <code class="filename">my.ini</code>
        ファイルで使用されている場合を除き、パラメータ名および値では大/小文字が区別されません。
      </p><p>
        「NDB Cluster
        ディスクデータ」テーブルに固有の構成パラメータの詳細は、このセクション
        (<a class="xref" href="mysql-cluster.html#mysql-cluster-ndbd-definition-disk-data-parameters" title="ディスクデータの構成パラメータ">ディスクデータの構成パラメータ</a>
        を参照) で後述します。
      </p><p>
        これらのパラメータはすべて、<span class="command"><strong>ndbmtd</strong></span>
        (<span class="command"><strong>ndbd</strong></span>
        のマルチスレッドバージョン)
        にも適用されます。 追加の 3
        つのデータノード構成パラメータ
        (<code class="literal">MaxNoOfExecutionThreads</code>、<code class="literal">ThreadConfig</code>、および
        <code class="literal">NoOfFragmentLogParts</code>)
        は、<span class="command"><strong>ndbmtd</strong></span>
        にのみ適用されます。これらを
        <span class="command"><strong>ndbd</strong></span>
        に使用しても、無効になります。
        詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndbd-definition-ndbmtd-parameters" title="マルチスレッドの構成パラメータ (ndbmtd)">マルチスレッドの構成パラメータ (ndbmtd)</a>を参照してください。
        <a class="xref" href="mysql-cluster.html#mysql-cluster-programs-ndbmtd" title="23.4.3 ndbmtd — NDB Cluster データノードデーモン (マルチスレッド)">セクション23.4.3「ndbmtd — NDB Cluster データノードデーモン (マルチスレッド)」</a>も参照してください。
      </p><p><a name="mysql-cluster-identifying-data-nodes"></a><b>データノードの識別. </b>
          <code class="literal">NodeId</code> または <code class="literal">Id</code>
          の値 (つまり、データノードの識別子)
          は、ノード起動時のコマンド行、または構成ファイルで割り当てることができます。
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="ndbparam-ndbd-nodeid"></a>
            <code class="literal">NodeId</code>
          </p><a class="indexterm" name="idm45563233465632"></a><div class="informaltable"><a name="nodeid-ndbd-table"></a><table frame="box" rules="all" summary="NodeId データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>unsigned</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>[...]</td>
              </tr><tr>
                <th>範囲</th>
                <td>1 - 48</td>
              </tr><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.18</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>unsigned</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>[...]</td>
              </tr><tr>
                <th>範囲</th>
                <td>1 - 144</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    IS (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            一意のノード ID
            は、クラスタのすべての内部メッセージでノードのアドレスとして使用されます。
            データノードでは、これは 1-144 の
            (これらを含む) 範囲の整数です。 (NDB 8.0.17
            以前では、これは 1 から 48 でした。)
            クラスタ内の各ノードは、一意の識別子を持っている必要があります。
          </p><p>
            <code class="literal">NodeId</code>
            は、データノードを識別するときに使用できる唯一のパラメータ名です。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-executeoncomputer"></a>
            <code class="literal">ExecuteOnComputer</code>
          </p><a class="indexterm" name="idm45563233435808"></a><div class="informaltable"><a name="executeoncomputer-ndbd-table"></a><table frame="box" rules="all" summary="ExecuteOnComputer データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>name</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>[...]</td>
              </tr><tr>
                <th>範囲</th>
                <td>...</td>
              </tr><tr>
                <th>非推奨</th>
                <td>Yes (in NDB 7.5)</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    S (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            これは、<code class="literal">[computer]</code>
            セクションに定義されたいずれかのコンピュータに設定されている
            <code class="literal">Id</code> を参照します。
          </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">重要</div><p>
              このパラメータは非推奨であり、将来のリリースで削除される予定です。
              かわりに
              <code class="literal">HostName</code>
              パラメータを使用してください。
            </p></div></li><li class="listitem"><a name="ndbparam-ndbd-dedicatednode"></a><a class="indexterm" name="idm45563233411840"></a><p></p><p>
            このノードのノード ID
            は、明示的にリクエストする接続にのみ指定できます。
            ノード ID
            をリクエストする管理サーバーは、このノード
            ID を使用できません。
            このパラメータは、同じホストで複数の管理サーバーを実行していて、<code class="literal">HostName</code>
            でプロセスを区別するのに十分でない場合に使用できます。
            テストで使用するためのものです。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-hostname"></a>
            <code class="literal">HostName</code>
          </p><a class="indexterm" name="idm45563233405088"></a><div class="informaltable"><a name="hostname-ndbd-table"></a><table frame="box" rules="all" summary="HostName データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>name or IP address</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>localhost</td>
              </tr><tr>
                <th>範囲</th>
                <td>...</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            このパラメータを指定すると、データノードを配置するコンピュータのホスト名が定義されます。
            <code class="literal">localhost</code>
            以外のホスト名を指定するには、このパラメータまたは
            <code class="literal">ExecuteOnComputer</code>
            のどちらかが必要です。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-serverport"></a>
            <code class="literal">ServerPort</code>
          </p><a class="indexterm" name="idm45563233383840"></a><div class="informaltable"><a name="serverport-ndbd-table"></a><table frame="box" rules="all" summary="ServerPort データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>unsigned</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>[...]</td>
              </tr><tr>
                <th>範囲</th>
                <td>1 - 64K</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    S (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            クラスタ内の各ノードは、ほかのノードに接続するためにポートを使用します。
            デフォルトでは、このポートは同じホストコンピュータ上の
            2
            つのノードで同じポート番号を受け取らないよう動的に割り当てられるため、通常はこのパラメータの値を指定する必要はありません。
          </p><p>
            ただし、データノートと API ノード (SQL
            ノードを含む)
            間の通信を許可するため、ファイアウォールで特定のポートを開く必要がある場合は、<code class="filename">config.ini</code>
            ファイルの <code class="literal">[ndbd]</code>
            セクションまたは
            (複数のデータノードに対してこれを行う必要がある場合は)
            <code class="literal">[ndbd default]</code>
            セクションでこのパラメータを必要なポートの番号に設定すると、SQL
            ノード、API
            ノード、またはその両方からの着信接続のためにその番号のポートを開くことができます。
          </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
              データノードから管理ノードへの接続は、<span class="command"><strong>ndb_mgmd</strong></span>
              管理ポート (管理サーバー
              <code class="literal">PortNumber</code>)
              を使用して行われるため、任意のデータノードからそのポートへの送信接続は常に許可されます。
            </p></div></li><li class="listitem"><p><a name="ndbparam-ndbd-tcpbind_inaddr_any"></a>
            <code class="literal">TcpBind_INADDR_ANY</code>
          </p><p>
            このパラメータを <code class="literal">TRUE</code> または
            <code class="literal">1</code>
            に設定すると、<code class="literal">IP_ADDR_ANY</code>
            がバインドされ、任意の場所から接続できるようになります
            (自動生成接続の場合)。 デフォルトは
            <code class="literal">FALSE</code> (<code class="literal">0</code>) です。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-nodegroup"></a>
            <code class="literal">NodeGroup</code>
          </p><a class="indexterm" name="idm45563233350800"></a><div class="informaltable"><a name="nodegroup-ndbd-table"></a><table frame="box" rules="all" summary="NodeGroup データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>unsigned</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>[...]</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 65536</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    IS (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            このパラメータを使用して、データノードを特定のノードグループに割り当てることができます。
            これはクラスタを最初に起動したときは読み取り専用であり、オンラインでデータノードを別のノードグループに再割り当てすることはできません。
            <code class="filename">config.ini</code> ファイルの
            <code class="literal">[ndbd default]</code>
            セクションでこのパラメータを使用することは、通常望ましくありません。また、ノードをノードグループに割り当てるときは、ノードグループに無効な数のノードが割り当てられないように注意する必要があります。
          </p><p>
            <code class="literal">NodeGroup</code>
            パラメータは主に、ローリング再起動を実行せずに、実行中の
            NDB Cluster
            に新しいノードグループを追加するために使用されます。
            そのためには、これを 65536 (最大値)
            に設定します。
            <code class="literal">NodeGroup</code>
            の値は、すべてのクラスタデータノードではなく、あとで起動され、新しいノードグループとしてクラスタに追加されるノードにのみ設定する必要があります。
            詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-online-add-node-example" title="23.5.7.3 NDB Cluster データノードのオンラインでの追加: 詳細な例">セクション23.5.7.3「NDB Cluster データノードのオンラインでの追加: 詳細な例」</a>を参照してください。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-locationdomainid"></a>
            <code class="literal">LocationDomainId</code>
          </p><a class="indexterm" name="idm45563233324464"></a><div class="informaltable"><a name="locationdomainid-ndbd-table"></a><table frame="box" rules="all" summary="LocationDomainId データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>integer</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>0</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 16</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td></td>
              </tr></tbody></table></div><p>
            クラウド内の特定の<a class="ulink" href="https://docs.us-phoenix-1.oraclecloud.com/Content/General/Concepts/regions.htm" target="_top">「可用性ドメイン」</a>
            (可用性ゾーンとも呼ばれる)
            にデータノードを割り当てます。
            どのノードがどの可用性ドメインにあるかを
            <code class="literal">NDB</code>
            に通知することで、次の方法でクラウド環境のパフォーマンスを向上させることができます:
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                リクエストされたデータが同じノードで見つからない場合、読取りは同じ可用性ドメイン内の別のノードに転送できます。
              </p></li><li class="listitem"><p>
                異なる可用性ドメイン内のノード間の通信では、それ以上の手動操作なしで
                <code class="literal">NDB</code> トランスポータ WAN
                サポートを使用することが保証されています。
              </p></li><li class="listitem"><p>
                トランスポータグループ番号は、SQL
                および他の API
                ノードが可能な場合は常に同じ可用性ドメイン内のローカルデータノードと通信するように、使用される可用性ドメインに基づくことができます。
              </p></li><li class="listitem"><p>
                アービトレータは、データノードが存在しない可用性ドメインから選択することも、そのような可用性ドメインが見つからない場合は
                3
                番目の可用性ドメインから選択することもできます。
              </p></li></ul></div><p>
            <code class="literal">LocationDomainId</code> は 0 以上 16
            以下の整数値を取り、0 がデフォルトです。0
            を使用することは、パラメータを未設定のままにすることと同じです。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-noofreplicas"></a>
            <code class="literal">NoOfReplicas</code>
          </p><a class="indexterm" name="idm45563233295408"></a><div class="informaltable"><a name="noofreplicas-ndbd-table"></a><table frame="box" rules="all" summary="NoOfReplicas データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>integer</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>2</td>
              </tr><tr>
                <th>範囲</th>
                <td>1 - 2</td>
              </tr><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.19</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>integer</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>2</td>
              </tr><tr>
                <th>範囲</th>
                <td>1 - 4</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    IS (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            このグローバルパラメータは、<code class="literal">[ndbd
            default]</code>セクションでのみ設定でき、クラスタに格納されている各テーブルのフラグメントレプリカの数を定義します。
            このパラメータは、ノードグループのサイズも指定します。
            ノードグループは、すべてが同じ情報を格納するノードのセットです。
          </p><p>
            ノードグループは暗黙的に形成されます。
            最初のノードグループはノード ID
            がもっとも小さいデータノードのセットで形成され、次のノードグループはノード
            ID
            が次に小さいデータノードのセットで形成されます
            (以下同様)。 例として、4
            つのデータノードがあり、<code class="literal">NoOfReplicas</code>
            が 2 に設定されているとします。 4
            つのデータノードのノード ID はそれぞれ
            2、3、4、および 5 です。 この場合、1
            つ目のノードグループはノード 2 および 3
            で形成され、2
            つ目のノードグループはノード 4 および 5
            で形成されます。 1
            つのハードウェアの障害によってクラスタ全体が機能停止するため、同じノードグループ内のノードが同じコンピュータに配置されないようにクラスタを構成することが重要です。
          </p><p>
            ノード ID
            が指定されていない場合、データノードの順序はノードグループの決定要素になります。
            明示的な割当てが行われたかどうかにかかわらず、管理クライアントの
            <code class="literal">SHOW</code>
            コマンドの出力に表示できます。
          </p><p>
            <code class="literal">NoOfReplicas</code> のデフォルト値は 2
            です。
            これはほとんどの本番環境で推奨される値であり、NDB
            8.0.18
            より前はサポートされていた最大値でした。
            NDB 8.0.19 以降では、このパラメータ値を 3
            または 4
            に設定すると、本番で完全にテストされ、サポートされます。
          </p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">警告</div><p>
              <code class="literal">NoOfReplicas</code> を 1
              に設定することは、すべてのクラスタデータのコピーが
              1
              つだけ存在することを意味します。この場合は、そのデータに格納されているデータの追加のコピーが存在しないため、1
              つのデータノードの喪失によってクラスタが機能停止します。
            </p></div><p>
            クラスタ内のデータノードの数は、このパラメータの値で均等に割り切れる必要があります。
            たとえば、データノードが 2 つある場合、2/3
            と 2/4
            の両方で小数値が生成されるため、<code class="literal">NoOfReplicas</code>
            は 1 または 2
            のいずれかである必要があります。4
            つのデータノードがある場合、<code class="literal">NoOfReplicas</code>
            は 1、2 または 4 である必要があります。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-datadir"></a>
            <code class="literal">DataDir</code>
          </p><a class="indexterm" name="idm45563233254272"></a><div class="informaltable"><a name="datadir-ndbd-table"></a><table frame="box" rules="all" summary="DataDir データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>path</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>.</td>
              </tr><tr>
                <th>範囲</th>
                <td>...</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    IN (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            このパラメータは、トレースファイル、ログファイル、PID
            ファイル、およびエラーログが配置されるディレクトリを指定します。
          </p><p>
            デフォルトはデータノードプロセスの作業ディレクトリです。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-filesystempath"></a>
            <code class="literal">FileSystemPath</code>
          </p><a class="indexterm" name="idm45563233234064"></a><div class="informaltable"><a name="filesystempath-ndbd-table"></a><table frame="box" rules="all" summary="FileSystemPath データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>path</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>DataDir</td>
              </tr><tr>
                <th>範囲</th>
                <td>...</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    IN (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            このパラメータは、メタデータ用に作成されるすべてのファイル、Redo
            ログ、Undo ログ
            (ディスクデータテーブル用)、およびデータファイルが配置されるディレクトリを指定します。
            デフォルトは、<code class="literal">DataDir</code>
            で指定されたディレクトリです。
          </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
              このディレクトリは、<span class="command"><strong>ndbd</strong></span>
              プロセスが開始される前に存在している必要があります。
            </p></div><p>
            NDB Cluster
            の推奨ディレクトリ階層には、ノードファイルシステムのディレクトリが作成される<code class="filename">/var/lib/mysql-cluster</code>
            が含まれています。
            このサブディレクトリの名前にはノード ID
            が含まれます。 たとえば、ノード ID が 2
            の場合、このサブディレクトリの名前は
            <code class="filename">ndb_2_fs</code> です。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-backupdatadir"></a>
            <code class="literal">BackupDataDir</code>
          </p><a class="indexterm" name="idm45563233208944"></a><div class="informaltable"><a name="backupdatadir-ndbd-table"></a><table frame="box" rules="all" summary="BackupDataDir データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>path</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>FileSystemPath</td>
              </tr><tr>
                <th>範囲</th>
                <td>...</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    IN (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            このパラメータは、バックアップが配置されるディレクトリを指定します。
          </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">重要</div><p>
              この値の末尾には常に
              '<code class="literal">/BACKUP</code>'
              という文字列が追加されます。
              たとえば、<code class="literal">BackupDataDir</code>
              の値を <code class="filename">/var/lib/cluster-data</code>
              に設定すると、すべてのバックアップが
              <code class="filename">/var/lib/cluster-data/BACKUP</code>
              の下に格納されます。
              これは、<span class="emphasis"><em>事実上の</em></span>デフォルトのバックアップ場所が
              <code class="literal">FileSystemPath</code>
              パラメータで指定された場所の下にある
              <code class="filename">BACKUP</code>
              という名前のディレクトリであることも意味しています。
            </p></div></li></ul></div><h5><a name="mysql-cluster-data-memory-index-memory-string-memory"></a>データメモリー、インデックスメモリー、および文字列メモリー</h5><p>
        <code class="literal">DataMemory</code> と
        <code class="literal">IndexMemory</code>
        は、実際のレコードとインデックスの格納に使用されるメモリーセグメントのサイズを指定する
        <code class="literal">[ndbd]</code> パラメータです。
        これらの値を設定する場合、<code class="literal">DataMemory</code>
        の使用方法を理解することが重要です。これは通常、クラスタによる実際の使用状況を反映するために更新する必要があるためです。
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
          <code class="literal">IndexMemory</code> は非推奨であり、NDB
          Cluster
          の将来のバージョンで削除される可能性があります。
          詳細は、次の説明を参照してください。
        </p></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="ndbparam-ndbd-datamemory"></a>
            <code class="literal">DataMemory</code>
          </p><a class="indexterm" name="idm45563233173936"></a><div class="informaltable"><a name="datamemory-ndbd-table"></a><table frame="box" rules="all" summary="DataMemory データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>bytes</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>98M</td>
              </tr><tr>
                <th>範囲</th>
                <td>1M - 1T</td>
              </tr><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.19</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>bytes</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>98M</td>
              </tr><tr>
                <th>範囲</th>
                <td>1M - 16T</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            このパラメータは、データベースレコードの格納に使用できるスペースの量
            (バイト単位) を定義します。
            この値によって指定される量の全体がメモリー内に割り当てられるため、それに対応できるだけの十分な物理メモリーがマシンに搭載されていることが非常に重要です。
          </p><p>
            <code class="literal">DataMemory</code>
            によって割り当てられたメモリーは、実際のレコードとインデックスの両方を格納するために使用されます。
            各レコードには 16
            バイトのオーバーヘッドがあります。各レコードは
            128 バイトのページオーバーヘッドを含む 32K
            バイトのページに格納されるため、レコードごとに追加の量が発生します
            (次を参照してください)。
            また、各レコードが 1
            つのページのみに格納されるため、ページごとに少量の無駄が発生します。
          </p><p>
            可変サイズのテーブル属性については、<code class="literal">DataMemory</code>
            から割り当てられた別個のデータページにデータが格納されます。
            可変長レコードは、可変サイズ部分を参照するための
            4
            バイトの追加オーバーヘッドを含む固定サイズ部分を使用します。
            可変サイズ部分には、2
            バイトのオーバーヘッドと属性あたり 2
            バイトが含まれます。
          </p><p>
            NDB 8.0.18 の時点では、最大レコードサイズは
            30000 バイトです。 以前は 14000
            バイトでした。
          </p><p>
            <code class="literal">DataMemory</code>
            に割り当てられたリソースは、すべてのデータおよびインデックスの格納に使用されます。
            (<code class="literal">IndexMemory</code>
            として構成されたメモリーは、<code class="literal">DataMemory</code>
            が共通リソースプールを形成するために使用するメモリーに自動的に追加されます。)
          </p><a class="indexterm" name="idm45563233138048"></a><a class="indexterm" name="idm45563233135872"></a><a class="indexterm" name="idm45563233134432"></a><a class="indexterm" name="idm45563233133200"></a><a class="indexterm" name="idm45563233131856"></a><p>
            現在、NDB Cluster
            はパーティションあたりのハッシュインデックスに最大
            512 MB を使用できます。つまり、<span class="command"><strong>ndb_mgm
            -e "ALL REPORT MEMORYUSAGE"</strong></span>がかなりの空き
            <code class="literal">DataMemory</code>
            を示していても、MySQL
            クライアントアプリケーションで<span class="errortext">「テーブルがいっぱいです」</span>エラーが発生する可能性があります。
            このため、データの負荷が高いノードでデータノードを再起動するときに問題が発生する場合もあります。
          </p><p>
            特定のテーブルのローカルデータマネージャごとのパーティション数を制御するには、テーブルの作成時に、LDM
            ごとにそれぞれ 1、2、3 または 4
            つのパーティションに対して、<code class="literal">NDB_TABLE</code>
            オプション <code class="literal">PARTITION_BALANCE</code> を
            <code class="literal">FOR_RA_BY_LDM</code>,
            <code class="literal">FOR_RA_BY_LDM_X_2</code>,
            <code class="literal">FOR_RA_BY_LDM_X_3</code> または
            <code class="literal">FOR_RA_BY_LDM_X_4</code>
            のいずれかの値に設定します
            (<a class="xref" href="sql-statements.html#create-table-ndb-table-comment-options" title="13.1.20.11 NDB_TABLE オプションの設定">セクション13.1.20.11「NDB_TABLE オプションの設定」</a>
            を参照)。
          </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
              以前のバージョンの「NDB
              Cluster」では、「NDB
              Cluster」テーブルに追加のパーティションを作成できるため、<code class="literal">CREATE
              TABLE</code> の <code class="literal">MAX_ROWS</code>
              オプションを使用してハッシュインデックスに使用可能なメモリーを増やすことができました。
              下位互換性のために引き続きサポートされていますが、この目的で
              <code class="literal">MAX_ROWS</code>
              を使用することは非推奨です。かわりに
              <code class="literal">PARTITION_BALANCE</code>
              を使用する必要があります。
            </p></div><p>
            <code class="literal">MinFreePct</code>
            構成パラメータを使用して、ノード再起動の問題を回避することもできます。
          </p><p>
            <code class="literal">DataMemory</code>
            によって割り当てられるメモリースペースは
            32K
            バイトのページで構成され、テーブルのフラグメントに割り当てられます。
            各テーブルは、通常、クラスタ内のデータノードと同じ数のフラグメントにパーティション化されます。
            このため、各ノードには
            <code class="literal">NoOfReplicas</code>
            での設定と同じ数のフラグメントがあります。
          </p><p>
            ページの割り当て後、テーブルを削除する以外の方法で空きページのプールに戻すことは、現在不可能です。
            (これは、特定のページに割り当てられた
            <code class="literal">DataMemory</code>
            ページをほかのテーブルで使用できないことも意味します。)
            データノードのリカバリを実行すると、すべてのレコードがほかの稼働しているノードから空のパーティションに挿入されるため、パーティションも圧縮されます。
          </p><a class="indexterm" name="idm45563233108560"></a><p>
            <code class="literal">DataMemory</code>
            メモリー領域には UNDO
            情報も含まれています:
            更新ごとに、変更されていないレコードのコピーが
            <code class="literal">DataMemory</code>
            に割り当てられます。
            順序付けされたテーブルインデックスにも各コピーへの参照が含まれています。
            一意のハッシュインデックスは、一意のインデックスカラムが更新されたときだけ更新されます。その場合は、コミット時にインデックステーブル内の新しいエントリが挿入され、古いエントリが削除されます。
            このため、クラスタを使用するアプリケーションによって実行される大規模なトランザクションを処理できるだけの十分なメモリーを割り当てる必要もあります。
            いずれにしても、次の理由から、少数の大規模なトランザクションを実行するよりも、多数の小規模なトランザクションを使用する方がメリットがあります。
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                大規模なトランザクションは小規模なトランザクションより高速に実行できません
              </p></li><li class="listitem"><p>
                大規模なトランザクションでは、トランザクション障害の発生時に消失して繰り返す必要がある操作の数が多くなります
              </p></li><li class="listitem"><p>
                大規模なトランザクションはより多くのメモリーを使用します
              </p></li></ul></div><p>
            NDB 8.0 での
            <code class="literal">DataMemory</code>
            のデフォルト値は 98MB です。 最小値は 1MB
            です。
            最大サイズはありませんが、実際には、制限に達したときにプロセスがスワップを開始しないように最大サイズを決定する必要があります。
            この制限は、マシン上の使用可能な物理 RAM
            量と、オペレーティングシステムが 1
            つのプロセスに振り向けることができるメモリー量によって決まります。32
            ビットオペレーティングシステムでは通常プロセスあたり
            2-4G バイトに制限されますが、64
            ビットオペレーティングシステムではより多くのメモリーを使用できます。
            このため、大規模なデータベースでは 64
            ビットオペレーティングシステムを使用することをお勧めします。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-indexmemory"></a>
            <code class="literal">IndexMemory</code>
          </p><a class="indexterm" name="idm45563233092704"></a><div class="informaltable"><a name="indexmemory-ndbd-table"></a><table frame="box" rules="all" summary="IndexMemory データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>bytes</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>0</td>
              </tr><tr>
                <th>範囲</th>
                <td>1M - 1T</td>
              </tr><tr>
                <th>非推奨</th>
                <td>Yes (in NDB 7.6)</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            <code class="literal">IndexMemory</code>
            パラメータは非推奨になりました
            (将来の削除の対象となります)。<code class="literal">IndexMemory</code>
            に割り当てられたメモリーは、かわりに
            <code class="literal">DataMemory</code>
            と同じプールに割り当てられます。これは、データおよびインデックスをメモリーに格納するために必要なすべてのリソースのみを担当します。
            NDB 8.0 では、クラスタ構成ファイルで
            <code class="literal">IndexMemory</code>
            を使用すると、管理サーバーから警告がトリガーされます。
          </p><p>
            ハッシュインデックスのサイズは、この式を使用して見積もることができます。
          </p><pre class="programlisting">  size  = ( (<em class="replaceable"><code>fragments</code></em> * 32K) + (<em class="replaceable"><code>rows</code></em> * 18) )
          * <em class="replaceable"><code>fragment_replicas</code></em>
</pre><p>
            <em class="replaceable"><code>fragments</code></em>
            はフラグメントの数、<em class="replaceable"><code>fragment_replicas</code></em>
            はフラグメントレプリカの数 (通常は
            2)、<em class="replaceable"><code>rows</code></em> は行数です。
            テーブルに 100 万行、8
            フラグメント、および 2
            フラグメントレプリカがある場合、予想されるインデックスメモリー使用量は次のように計算されます:
          </p><pre class="programlisting">  ((8 * 32K) + (1000000 * 18)) * 2 = ((8 * 32768) + (1000000 * 18)) * 2
  = (262144 + 18000000) * 2
  = 18262144 * 2 = 36524288 bytes = ~35MB
</pre><p>
            順序付けされたインデックスのインデックス統計
            (有効な場合)
            は、<code class="literal">mysql.ndb_index_stat_sample</code>
            テーブルに格納されます。
            このテーブルにはハッシュインデックスがあるため、これによってインデックスのメモリー使用量が追加されます。
            特定の順序付けされたインデックスの行数の上限は、次のように計算できます。
          </p><pre class="programlisting">  sample_size= key_size + ((key_attributes + 1) * 4)

  sample_rows = <code class="literal">IndexStatSaveSize</code>
                * ((0.01 * <code class="literal">IndexStatSaveScale</code> * log<sub>2</sub>(rows * sample_size)) + 1)
                / sample_size
</pre><p>
            前の式で、<em class="replaceable"><code>key_size</code></em>
            は順序付けされたインデックスキーのサイズ
            (バイト単位)、<em class="replaceable"><code>key_attributes</code></em>
            は順序付けされたインデックスキー内の属性の数、<em class="replaceable"><code>rows</code></em>
            はベーステーブルの行数です。
          </p><p>
            テーブル <code class="literal">t1</code> に、100
            万個の行と、2 つの 4 バイト整数に対する
            <code class="literal">ix1</code>
            という名前の順序付けされたインデックスがあるとします。
            また、<code class="literal">IndexStatSaveSize</code>
            と
            <code class="literal">IndexStatSaveScale</code>
            がこのデフォルト値 (それぞれ 32K および 100)
            に設定されているとします。 前の 2
            つの式を使用して、次のように計算できます。
          </p><pre class="programlisting">  sample_size = 8  + ((1 + 2) * 4) = 20 bytes

  sample_rows = 32K
                * ((0.01 * 100 * log<sub>2</sub>(1000000*20)) + 1)
                / 20
                = 32768 * ( (1 * ~16.811) +1) / 20
                = 32768 * ~17.811 / 20
                = ~29182 rows
</pre><p>
            予想されるインデックスのメモリー使用量は
            2 * 18 * 29182 = 約 1050550 バイトです。
          </p><p>
            NDB 8.0
            では、このパラメータの最小値とデフォルト値は
            0 (ゼロ) です。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-stringmemory"></a>
            <code class="literal">StringMemory</code>
          </p><a class="indexterm" name="idm45563233045200"></a><div class="informaltable"><a name="stringmemory-ndbd-table"></a><table frame="box" rules="all" summary="StringMemory データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>% or bytes</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>25</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    S (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            このパラメータは、テーブル名などの文字列用に割り当てられるメモリー量を決定するもので、<code class="filename">config.ini</code>
            ファイルの <code class="literal">[ndbd]</code> または
            <code class="literal">[ndbd default]</code>
            セクションに指定されます。 <code class="literal">0</code>
            から <code class="literal">100</code> までの (これらを含む)
            値は、デフォルトの最大値のパーセントとして解釈されます。デフォルトの最大値は、テーブルの数、テーブル名のサイズ、<code class="filename">.FRM</code>
            ファイルの最大サイズ、<code class="literal">MaxNoOfTriggers</code>、カラム名の最大サイズ、およびデフォルトの最大カラム値を含むいくつかの係数に基づいて計算されます。
          </p><p>
            <code class="literal">100</code>
            を超える値は、バイト数として解釈されます。
          </p><p>
            デフォルト値は 25
            (つまり、デフォルトの最大の 25%) です。
          </p><p>
            ほとんどの場合、デフォルト値で十分ですが、多数の
            <code class="literal">NDB</code> テーブル (1000 以上)
            がある場合は、エラー 773
            <span class="errortext">「文字列メモリー不足です。StringMemory
            構成パラメータを変更してください:
            永続エラー:
            スキーマエラー」</span>が発生する可能性があり、その場合はこの値を増やす必要があります。<code class="literal">25</code>
            (25%)
            は過剰ではないため、このエラーが最も極端な状況を除くすべての状況で繰り返されるのを防ぐ必要があります。
          </p></li></ul></div><p>
        次の例は、1
        つのテーブルでメモリーがどのように使用されるかを示しています。
        このテーブル定義について考えます。
      </p><pre class="programlisting">CREATE TABLE example (
  a INT NOT NULL,
  b INT NOT NULL,
  c INT NOT NULL,
  PRIMARY KEY(a),
  UNIQUE(b)
) ENGINE=NDBCLUSTER;
</pre><p>
        各レコードに、12 バイトのデータと 12
        バイトのオーバーヘッドがあります。 NULL
        可能カラムがない場合は、4
        バイトのオーバーヘッドを節約できます。
        さらに、カラム <code class="literal">a</code> および
        <code class="literal">b</code> に対して 2
        つの順序付けされたインデックスがあり、レコードごとにおよそ
        10 バイトが消費されます。
        ベーステーブルには主キーのハッシュインデックスがあり、レコードあたりおよそ
        29 バイトが使用されます。 <code class="literal">b</code>
        を主キーとし、<code class="literal">a</code>
        をカラムとする別のテーブルによって一意の制約が実装されています。
        この別のテーブルでは、8
        バイトのレコードデータと 12
        バイトのオーバーヘッドに加えて、<code class="literal">example</code>
        テーブル内のレコードあたり 29
        バイトのインデックスメモリーが追加で消費されます。
      </p><p>
        したがって、100
        万個のレコードに対して、主キーと一意の制約のハッシュインデックスを処理するには
        58M バイトのインデックスメモリーが必要です。
        さらに、ベーステーブルのレコード、一意のインデックステーブル、および
        2 つの順序付けされたインデックステーブルに
        64M バイトが必要です。
      </p><p>
        ハッシュインデックスがかなりのメモリー量を占有しますが、データへのアクセスは非常に高速になります。
        また、NDB Cluster
        で一意性制約を処理するためにも使用されます。
      </p><p>
        現在、唯一のパーティション化アルゴリズムはハッシュ化であり、順序付けされたインデックスは各ノードでローカルに使用されます。
        したがって、一般的なケースで順序付けされたインデックスを使用して一意制約を処理することはできません。
      </p><p>
        <code class="literal">IndexMemory</code> と
        <code class="literal">DataMemory</code>
        の両方で重要な点は、各ノードグループのすべてのデータメモリーとインデックスメモリーの合計がデータベースの合計サイズになることです。
        各ノードグループはレプリケートされた情報の格納に使用されるため、2
        つのフラグメントレプリカを持つ 4
        つのノードがある場合は、2
        つのノードグループがあります。
        したがって、使用可能なデータメモリーの合計はデータノードごとに
        2 * <code class="literal">DataMemory</code> です。
      </p><p>
        すべてのノードで
        <code class="literal">DataMemory</code> と
        <code class="literal">IndexMemory</code>
        を同じ値に設定することを強くお勧めします。
        データの分布はクラスタ内のすべてのノードで均等であるため、各ノードで使用できるスペースの最大量はクラスタ内でもっとも小さいノードの最大量と同じになります。
      </p><p>
        <code class="literal">DataMemory</code>
        は変更できますが、それを減らすとリスクが高くなる可能性があります。そうすると、メモリー領域が不足しているためにノードまたは
        NDB Cluster
        全体が再起動できなくなる可能性があります。
        これらの値を増やすことは問題ありませんが、このようなアップグレードはソフトウェアのアップグレードと同じ方法で行うことをお勧めします。つまり、最初に構成ファイルを更新し、次に管理サーバーを起動して、各データノードを順に再起動します。
      </p><p><a name="ndbparam-ndbd-minfreepct"></a><b>MinFreePct. </b>
          <a class="indexterm" name="idm45563232994736"></a>

          <code class="literal">DataMemory</code>
          を含むデータノードリソースの比率
          (デフォルトでは 5%)
          は、再起動の実行時にデータノードがメモリーを使い果たさないように予約されています。
          これは、<code class="literal">MinFreePct</code>
          データノード構成パラメータを使用して調整できます
          (デフォルトは 5)。
        </p><div class="informaltable"><a name="minfreepct-ndbd-table"></a><table frame="box" rules="all" summary="MinFreePct データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
            <th>バージョン (またはそれ以降)</th>
            <td>NDB 8.0.13</td>
          </tr><tr>
            <th>タイプまたは単位</th>
            <td>unsigned</td>
          </tr><tr>
            <th>デフォルト</th>
            <td>5</td>
          </tr><tr>
            <th>範囲</th>
            <td>0 - 100</td>
          </tr><tr>
            <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
            <td><p>
                N (NDB 8.0.13)
              </p></td>
          </tr></tbody></table></div><p>
        更新によって、使用されるインデックスメモリーの量は増えません。
        挿入はただちに有効になりますが、行の削除はトランザクションがコミットされるまで実際には行われません。
      </p><p><a name="mysql-cluster-transaction-parameters"></a><b>トランザクションパラメータ. </b>
          次に説明する <code class="literal">[ndbd]</code>
          のいくつかのパラメータは、システムで処理できる並列トランザクションの数とトランザクションのサイズに影響を与えるという点で重要です。
          <code class="literal">MaxNoOfConcurrentTransactions</code>
          は、ノード内で実行できる並列トランザクションの数を設定します。
          <code class="literal">MaxNoOfConcurrentOperations</code>
          は、同時に更新フェーズに入ったり、ロックしたりできるレコードの数を設定します。
        </p><p>
        これらのパラメータはどちらも (特に
        <code class="literal">MaxNoOfConcurrentOperations</code>
        は)、デフォルト値を使用せずに特定の値を設定するユーザーのターゲットになる可能性があります。
        デフォルト値は、小規模なトランザクションを使用するシステムで過大なメモリーが使用されないように設定されています。
      </p><p>
        <code class="literal">MaxDMLOperationsPerTransaction</code>
        は、特定のトランザクションで実行できる DML
        操作の最大数を設定します。
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="ndbparam-ndbd-maxnoofconcurrenttransactions"></a>
            <code class="literal">MaxNoOfConcurrentTransactions</code>
          </p><a class="indexterm" name="idm45563232962736"></a><div class="informaltable"><a name="maxnoofconcurrenttransactions-ndbd-table"></a><table frame="box" rules="all" summary="MaxNoOfConcurrentTransactions データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>integer</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>4096</td>
              </tr><tr>
                <th>範囲</th>
                <td>32 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th>非推奨</th>
                <td>NDB 8.0.19</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            各クラスタデータノードには、クラスタ内の個々のアクティブなトランザクションに対するトランザクションレコードが必要です。
            トランザクションを調整するタスクは、すべてのデータノードに分配されます。
            クラスタ内のトランザクションレコードの合計数は、特定のノード内のトランザクションの数にクラスタ内のノードの数を掛けた値です。
          </p><p>
            トランザクションレコードは、個々の MySQL
            サーバーに割り当てられます。 MySQL
            サーバーへの個々の接続には、少なくとも 1
            つのトランザクションレコードと、その接続でアクセスされるテーブルごとに追加のトランザクションオブジェクトが必要です。
            つまり、クラスタ内のトランザクション合計数の妥当な最小値を次のように表すことができます。
          </p><pre class="programlisting">TotalNoOfConcurrentTransactions =
    (maximum number of tables accessed in any single transaction + 1)
    * number of SQL nodes
</pre><p>
            クラスタを使用する 10 個の SQL
            ノードがあるとします。 10
            個のテーブルが関与する 1 回の結合には、11
            個のトランザクションレコードが必要です。トランザクション内にこのような結合が
            10 回ある場合、このトランザクションには
            MySQL サーバーあたり 10 * 11 = 110
            個のトランザクションレコード (または合計
            110 * 10 = 1100 個のトランザクションレコード)
            が必要です。
            各データノードは、TotalNoOfConcurrentTransactions /
            データノードの数を処理することが期待されます。
            4 つのデータノードを持つ NDB Cluster
            の場合、これは各データノードの
            <code class="literal">MaxNoOfConcurrentTransactions</code> を 1100 /
            4 = 275 に設定することを意味します。
            また、単一ノードグループがすべての同時トランザクションに対応できるようにすることで、障害リカバリを提供する必要があります。つまり、各データノード
            MaxNoOfConcurrentTransactions
            では、TotalNoOfConcurrentTransactions /
            ノードグループの数と等しいトランザクションの数を十分に処理できます。
            このクラスタにノードグループが 1
            つだけある場合は、<code class="literal">MaxNoOfConcurrentTransactions</code>
            を 1100
            (クラスタ全体の並列トランザクションの数と同じ)
            に設定するようにしてください。
          </p><p>
            また、各トランザクションに少なくとも 1
            つの操作が関与します。このため、<code class="literal">MaxNoOfConcurrentTransactions</code>
            に設定する値は常に
            <code class="literal">MaxNoOfConcurrentOperations</code>
            の値以下にします。
          </p><p>
            このパラメータは、すべてのクラスタデータノードで同じ値に設定する必要があります。
            これは、データノードの機能停止時に、残存するもっとも古いノードが機能停止したノードで実行されていたトランザクションのトランザクション状態を再作成するためです。
          </p><p>
            ローリング再起動を使用してこの値を変更できますが、実行中のクラスタ上のトラフィック量は、発生するトランザクションが新旧どちらか低い方のレベルを超えない程度にする必要があります。
          </p><p>
            デフォルト値は 4096 です。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-maxnoofconcurrentoperations"></a>
            <code class="literal">MaxNoOfConcurrentOperations</code>
          </p><a class="indexterm" name="idm45563232927888"></a><div class="informaltable"><a name="maxnoofconcurrentoperations-ndbd-table"></a><table frame="box" rules="all" summary="MaxNoOfConcurrentOperations データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>integer</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>32K</td>
              </tr><tr>
                <th>範囲</th>
                <td>32 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            このパラメータの値は、トランザクションのサイズと数に合わせて調整することをお勧めします。
            少数の操作とレコードしか関与しないトランザクションを実行する場合は、通常、このパラメータのデフォルト値で十分です。
            多数のレコードが関与する大規模なトランザクションを実行する場合は、通常、その値を増やす必要があります。
          </p><p>
            クラスタデータを更新する各トランザクションでは、トランザクションコーディネータと実際の更新が実行されるノードの両方でレコードが保持されます。
            これらのレコードには、ロールバック、ロックキュー、およびその他の目的に使用する
            Undo
            レコードを見つけるために必要な状態情報が含まれています。
          </p><p>
            このパラメータは、最低でも、トランザクションで同時に更新されるレコードの数をクラスタデータノードの数で割った値に設定するようにしてください。
            たとえば、4
            つのデータノードがあるクラスタで、トランザクションを使用して
            100
            万件の並列更新を処理することが予想される場合は、この値を
            1000000/4 = 250000 に設定します。
            障害からの回復力を提供できるように、このパラメータを、個々のデータノードでノードグループの負荷を処理できる十分な大きさの値に設定することをお勧めします。
            つまり、<code class="literal">並列操作の合計数/ノードグループの数</code>と同じ値に設定するようにしてください。
            (ノードグループが 1
            つだけの場合、これはクラスタ全体の並列操作の合計数と同じです。)
          </p><p>
            各トランザクションには常に少なくとも 1
            つの操作が関与しているため、<code class="literal">MaxNoOfConcurrentOperations</code>
            の値は常に
            <code class="literal">MaxNoOfConcurrentTransactions</code>
            の値以上にします。
          </p><p>
            ロックを設定する読み取りクエリーでも、操作レコードが作成されます。
            ノード間の分布が完全でない場合に対応できるように、個々のノード内にある程度の追加スペースが割り当てられます。
          </p><p>
            クエリーで一意のハッシュインデックスが使用されると、実際にはトランザクション内のレコードあたり
            2 つの操作レコードが使用されます。 1
            つ目のレコードはインデックステーブルの読み取りを表し、2
            つ目はベーステーブルに対する操作を扱います。
          </p><p>
            デフォルト値は 32768 です。
          </p><p>
            このパラメータは、実際には別個に構成できる
            2 つの値を扱います。 これらのうち 1
            つ目は、トランザクションコーディネータによって配置される操作レコードの数を指定します。
            2
            つ目の部分は、データベースにローカルに格納される操作レコードの数を指定します。
          </p><p>
            8
            ノードのクラスタで実行される非常に大規模なトランザクションでは、そのトランザクションに関与する読み取り、更新、および削除と同じ数の操作レコードがトランザクションコーディネータ内に必要です。
            ただし、これらの操作レコードは 8
            個のノードすべてに分散しています。
            このため、1
            つの非常に大規模なトランザクション用にシステムを構成する必要がある場合は、この
            2
            つの部分を別個に構成することをお勧めします。
            <code class="literal">MaxNoOfConcurrentOperations</code>
            は常に、ノードのトランザクションコーディネータ部分の操作レコードの数を計算するために使用されます。
          </p><p>
            操作レコードのメモリー要件を考慮することも重要です。
            これらは、レコードあたり約 1K
            バイトを消費します。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-maxnooflocaloperations"></a>
            <code class="literal">MaxNoOfLocalOperations</code>
          </p><a class="indexterm" name="idm45563232893968"></a><div class="informaltable"><a name="maxnooflocaloperations-ndbd-table"></a><table frame="box" rules="all" summary="MaxNoOfLocalOperations データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>integer</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>UNDEFINED</td>
              </tr><tr>
                <th>範囲</th>
                <td>32 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th>非推奨</th>
                <td>NDB 8.0.19</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            デフォルトでは、このパラメータは 1.1 *
            <code class="literal">MaxNoOfConcurrentOperations</code>
            として計算されます。
            これは、多くの同時トランザクションを含み、そのいずれもが大規模ではないシステムに適合します。
            一度に 1
            つの非常に大規模なトランザクションが実行され、多数のノードがある場合は、このパラメータを明示的に指定してデフォルトをオーバーライドすることをお勧めします。
          </p><p>
            このパラメータは NDB 8.0.19
            の時点では非推奨であり、将来の NDB Cluster
            リリースで削除される予定です。
            また、このパラメータは
            <code class="literal">TransactionMemory</code>
            パラメータと互換性がありません。クラスタ構成ファイル
            (<code class="filename">config.ini</code>)
            で両方のパラメータの値を設定しようとすると、管理サーバーは起動を拒否します。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-maxdmloperationspertransaction"></a>
            <code class="literal">MaxDMLOperationsPerTransaction</code>
          </p><a class="indexterm" name="idm45563232867680"></a><div class="informaltable"><a name="maxdmloperationspertransaction-ndbd-table"></a><table frame="box" rules="all" summary="MaxDMLOperationsPerTransaction データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>operations (DML)</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>4294967295</td>
              </tr><tr>
                <th>範囲</th>
                <td>32 - 4294967295</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            このパラメータは、トランザクションのサイズを制限します。
            これを超える数の DML
            操作が必要になった場合、トランザクションは中止されます。
            トランザクションあたりの最小操作数は 32
            ですが、<code class="literal">MaxDMLOperationsPerTransaction</code>
            を 0
            に設定すると、トランザクションあたりの
            DML
            操作の数に対する制限を無効にできます。
            最大 (およびデフォルト) は 4294967295 です。
          </p><p>
            このパラメータの値は、<code class="literal">MaxNoOfConcurrentOperations</code>
            に設定されている値を超えることはできません。
          </p></li></ul></div><p><a name="mysql-cluster-transaction-temporary-storage"></a><b>トランザクションの一時ストレージ. </b>
          次の一連の <code class="literal">[ndbd]</code>
          パラメータは、クラスタトランザクションの一部であるステートメントの実行時に一時ストレージを決定するために使用されます。
          このステートメントが完了し、クラスタがコミットまたはロールバックを待機しているときに、すべてのレコードが解放されます。
        </p><p>
        これらのパラメータのデフォルト値は、ほとんどの状況に適しています。
        ただし、多数の行または操作が関与するトランザクションをサポートする必要がある場合は値を増やして、システム内の並列性を高める必要があることがあります。一方、比較的小規模なトランザクションを必要とするアプリケーションでは、これらの値を減らしてメモリーを節約できます。
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="ndbparam-ndbd-maxnoofconcurrentindexoperations"></a>
            <code class="literal">MaxNoOfConcurrentIndexOperations</code>
          </p><a class="indexterm" name="idm45563232840032"></a><div class="informaltable"><a name="maxnoofconcurrentindexoperations-ndbd-table"></a><table frame="box" rules="all" summary="MaxNoOfConcurrentIndexOperations データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>integer</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>8K</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th>非推奨</th>
                <td>NDB 8.0.19</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            一意のハッシュインデックスを使用するクエリーでは、クエリーの実行フェーズで別の一時的な操作レコードのセットが使用されます。
            このパラメータは、そのレコードプールのサイズを設定します。
            このため、このレコードはクエリーの一部を実行している間だけ割り当てられます。
            この部分の実行が完了した直後にレコードは解放されます。
            中止とコミットを処理するために必要な状態では通常の操作レコードによって処理され、プールサイズは
            <code class="literal">MaxNoOfConcurrentOperations</code>
            パラメータで設定されます。
          </p><p>
            このパラメータのデフォルト値は 8192 です。
            一意のハッシュインデックスを使用して非常に高い並列性を実現させるまれなケースでのみ、この値を増やす必要があります。
            クラスタに高いレベルの並列性が必要ないことを
            DBA
            が確信している場合は、小さい値を使用してメモリーを節約できます。
          </p><p>
            このパラメータは NDB 8.0.19
            の時点では非推奨であり、将来の NDB Cluster
            リリースで削除される予定です。
            また、このパラメータは
            <code class="literal">TransactionMemory</code>
            パラメータと互換性がありません。クラスタ構成ファイル
            (<code class="filename">config.ini</code>)
            で両方のパラメータの値を設定しようとすると、管理サーバーは起動を拒否します。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-maxnooffiredtriggers"></a>
            <code class="literal">MaxNoOfFiredTriggers</code>
          </p><a class="indexterm" name="idm45563232811808"></a><div class="informaltable"><a name="maxnooffiredtriggers-ndbd-table"></a><table frame="box" rules="all" summary="MaxNoOfFiredTriggers データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>integer</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>4000</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th>非推奨</th>
                <td>NDB 8.0.19</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            <code class="literal">MaxNoOfFiredTriggers</code>
            のデフォルト値は 4000
            です。ほとんどの状況では、これで十分です。
            場合によっては、クラスタに並列性はそれほど必要ないと
            DBA
            が確信している場合は、値を減らすこともできます。
          </p><p>
            一意のハッシュインデックスに影響を与える操作が実行されたときに、レコードが作成されます。
            一意のハッシュインデックスを使用してテーブル内のレコードを挿入または削除したり、一意のハッシュインデックスの一部であるカラムを更新したりすると、インデックステーブルで挿入または削除が発生します。
            生成されたレコードは、このインデックステーブル操作を発生させた元の操作の完了を待機している間、インデックステーブル操作を表すために使用されます。
            この操作は短期間ですが、一意のハッシュインデックスのセットを含むベーステーブルに対して多数の並列書き込み操作が行われる状況では、レコードプール内に多数のレコードを必要とする可能性があります。
          </p><p>
            このパラメータは NDB 8.0.19
            の時点では非推奨であり、将来の NDB Cluster
            リリースで削除される予定です。
            また、このパラメータは
            <code class="literal">TransactionMemory</code>
            パラメータと互換性がありません。クラスタ構成ファイル
            (<code class="filename">config.ini</code>)
            で両方のパラメータの値を設定しようとすると、管理サーバーは起動を拒否します。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-transactionbuffermemory"></a>
            <code class="literal">TransactionBufferMemory</code>
          </p><a class="indexterm" name="idm45563232783520"></a><div class="informaltable"><a name="transactionbuffermemory-ndbd-table"></a><table frame="box" rules="all" summary="TransactionBufferMemory データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>bytes</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>1M</td>
              </tr><tr>
                <th>範囲</th>
                <td>1K - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            このパラメータの影響を受けるメモリーは、インデックステーブルの更新と一意のインデックスの読み取り時に発生した操作を追跡するために使用されます。
            このメモリーは、これらの操作のキーおよびカラムの情報を格納するために使用されます。
            このパラメータの値をデフォルトから変更する必要があるのは、非常にまれなケースだけです。
          </p><p>
            <code class="literal">TransactionBufferMemory</code>
            のデフォルト値は 1M バイトです。
          </p><p>
            通常の読み取りおよび書き込み操作でも同じようなバッファーが使用されますが、その使用期間はさらに短くなります。
            コンパイル時のパラメータ
            <code class="literal">ZATTRBUF_FILESIZE</code>
            (<code class="filename">ndb/src/kernel/blocks/Dbtc/Dbtc.hpp</code>
            にあります) は 4000 * 128 バイト (500K バイト)
            に設定されています。
            キー情報用の同様のバッファー
            <code class="literal">ZDATABUF_FILESIZE</code> (これも
            <code class="filename">Dbtc.hpp</code> にあります) には、4000
            * 16 = 62.5K
            バイトのバッファースペースが含まれています。
            <code class="literal">Dbtc</code>
            は、トランザクションのコーディネーションを扱うモジュールです。
          </p></li></ul></div><p><a name="mysql-cluster-transaction-resource-allocation"></a><b>トランザクションリソース割当てパラメータ. </b>
          次のリストのパラメータは、トランザクションコーディネータ
          (<code class="literal">DBTC</code>)
          でトランザクションリソースを割り当てるために使用されます。
          これらのいずれかをデフォルト (0)
          に設定したままにすると、対応するリソースの推定合計データノード使用量の
          25%
          のトランザクションメモリー専用になります。
          これらのパラメータに指定できる実際の最大値は、通常、データノードで使用可能なメモリー量によって制限されます。これらの値を設定しても、データノードに割り当てられるメモリーの合計量には影響しません。
          また、<code class="literal">MaxDMLOperationsPerTransaction</code>,
          <code class="literal">MaxNoOfConcurrentIndexOperations</code>,
          <code class="literal">MaxNoOfConcurrentOperations</code>,
          <code class="literal">MaxNoOfConcurrentScans</code>,
          <code class="literal">MaxNoOfConcurrentTransactions</code>,
          <code class="literal">MaxNoOfFiredTriggers</code>,
          <code class="literal">MaxNoOfLocalScans</code>
          または
          <code class="literal">TransactionBufferMemory</code>
          の設定に関係なく、データノード用に予約された内部レコードの数を制御することに注意する必要があります
          (<a class="xref" href="mysql-cluster.html#mysql-cluster-transaction-parameters" title="トランザクションパラメータ">トランザクションパラメータ</a>
          および
          <a class="xref" href="mysql-cluster.html#mysql-cluster-transaction-temporary-storage" title="トランザクションの一時ストレージ">トランザクションの一時ストレージ</a>
          を参照)。
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="ndbparam-ndbd-reservedconcurrentindexoperations"></a>
            <code class="literal">ReservedConcurrentIndexOperations</code>
          </p><a class="indexterm" name="idm45563232741584"></a><div class="informaltable"><a name="reservedconcurrentindexoperations-ndbd-table"></a><table frame="box" rules="all" summary="ReservedConcurrentIndexOperations データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.16</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>numeric</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>0</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th>追加</th>
                <td>NDB 8.0.16</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            1
            つのデータノード上に専用リソースを持つ同時インデックス操作の数。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-reservedconcurrentoperations"></a>
            <code class="literal">ReservedConcurrentOperations</code>
          </p><a class="indexterm" name="idm45563232719584"></a><div class="informaltable"><a name="reservedconcurrentoperations-ndbd-table"></a><table frame="box" rules="all" summary="ReservedConcurrentOperations データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.16</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>numeric</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>0</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th>追加</th>
                <td>NDB 8.0.16</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            単一のデータノード上のトランザクションコーディネータに専用のリソースを持つ同時操作の数。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-reservedconcurrentscans"></a>
            <code class="literal">ReservedConcurrentScans</code>
          </p><a class="indexterm" name="idm45563232697632"></a><div class="informaltable"><a name="reservedconcurrentscans-ndbd-table"></a><table frame="box" rules="all" summary="ReservedConcurrentScans データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.16</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>numeric</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>0</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th>追加</th>
                <td>NDB 8.0.16</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            1
            つのデータノード上に専用のリソースを持つ同時スキャンの数。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-reservedconcurrenttransactions"></a>
            <code class="literal">ReservedConcurrentTransactions</code>
          </p><a class="indexterm" name="idm45563232675696"></a><div class="informaltable"><a name="reservedconcurrenttransactions-ndbd-table"></a><table frame="box" rules="all" summary="ReservedConcurrentTransactions データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.16</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>numeric</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>0</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th>追加</th>
                <td>NDB 8.0.16</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            単一のデータノード上に専用リソースを持つ同時トランザクションの数。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-reservedfiredtriggers"></a>
            <code class="literal">ReservedFiredTriggers</code>
          </p><a class="indexterm" name="idm45563232654016"></a><div class="informaltable"><a name="reservedfiredtriggers-ndbd-table"></a><table frame="box" rules="all" summary="ReservedFiredTriggers データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.16</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>numeric</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>0</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th>追加</th>
                <td>NDB 8.0.16</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            単一の ndbd(DB)
            ノードに専用のリソースを持つトリガーの数。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-reservedlocalscans"></a>
            <code class="literal">ReservedLocalScans</code>
          </p><a class="indexterm" name="idm45563232632384"></a><div class="informaltable"><a name="reservedlocalscans-ndbd-table"></a><table frame="box" rules="all" summary="ReservedLocalScans データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.16</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>numeric</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>0</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th>追加</th>
                <td>NDB 8.0.16</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            1
            つのデータノード上に専用のリソースを持つ同時フラグメントスキャンの数。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-reservedtransactionbuffermemory"></a>
            <code class="literal">ReservedTransactionBufferMemory</code>
          </p><a class="indexterm" name="idm45563232610656"></a><div class="informaltable"><a name="reservedtransactionbuffermemory-ndbd-table"></a><table frame="box" rules="all" summary="ReservedTransactionBufferMemory データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.16</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>numeric</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>0</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th>追加</th>
                <td>NDB 8.0.16</td>
              </tr><tr>
                <th>非推奨</th>
                <td>NDB 8.0.19</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            各データノードに割り当てられたキーおよび属性データの動的バッファ領域
            (バイト単位)。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-transactionmemory"></a>
            <code class="literal">TransactionMemory</code>
          </p><a class="indexterm" name="idm45563232586720"></a><div class="informaltable"><a name="transactionmemory-ndbd-table"></a><table frame="box" rules="all" summary="TransactionMemory データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.19</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>bytes</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>0</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 16384G</td>
              </tr><tr>
                <th>追加</th>
                <td>NDB 8.0.19</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            このパラメータは、各データノードのトランザクションに割り当てられるメモリー
            (バイト単位) を決定します。
            トランザクションメモリーの設定は、次の 3
            つの方法のいずれかで処理できます:
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                多くの構成パラメータは、<code class="literal">TransactionMemory</code>
                と互換性がありません。
                これらのいずれかが設定されている場合、トランザクションメモリーは
                NDB 8.0.19 より前の状態で計算されます。
                これらのパラメータのいずれも
                <code class="literal">TransactionMemory</code>
                と同時に設定できないことに注意してください。設定しようとすると、管理サーバーを起動できません
                (<a class="xref" href="mysql-cluster.html#mysql-cluster-transactionmemory-incompatible" title="TransactionMemory と互換性のないパラメータ">TransactionMemory と互換性のないパラメータ</a>
                を参照)。
              </p></li><li class="listitem"><p>
                <code class="literal">TransactionMemory</code>
                が設定されている場合、この値はトランザクションメモリーの決定に使用されます。
              </p></li><li class="listitem"><p>
                互換性のないパラメータも
                <code class="literal">TransactionMemory</code>
                も設定されていない場合、トランザクションメモリーは
                <code class="literal">NDB</code> によって
                <code class="literal">DataMemory</code>
                構成パラメータの値の 10%
                に設定されます。
              </p></li></ul></div><p><a name="mysql-cluster-transactionmemory-incompatible"></a><b>TransactionMemory と互換性のないパラメータ. </b>
              次のパラメータは
              <code class="literal">TransactionMemory</code>
              と同時に使用できず、NDB 8.0.19
              の時点で非推奨になりました:
            </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <code class="literal">MaxNoOfConcurrentIndexOperations</code>
              </p></li><li class="listitem"><p>
                <code class="literal">MaxNoOfFiredTriggers</code>
              </p></li><li class="listitem"><p>
                <code class="literal">MaxNoOfLocalOperations</code>
              </p></li><li class="listitem"><p>
                <code class="literal">MaxNoOfLocalScans</code>
              </p></li></ul></div><p>
            <code class="literal">TransactionMemory</code>
            がクラスタ構成ファイル
            (<code class="filename">config.ini</code>)
            にも設定されている場合、リストされているパラメータのいずれかを明示的に設定すると、管理ノードは起動しません。
          </p><p>
            NDB Cluster
            データノードでのリソース割り当ての詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-data-node-memory-management" title="23.3.3.13 データノードのメモリー管理">セクション23.3.3.13「データノードのメモリー管理」</a>
            を参照してください。
          </p></li></ul></div><p><a name="mysql-cluster-scans-and-buffering"></a><b>スキャンとバッファリング. </b>
          (<code class="filename">ndb/src/kernel/blocks/Dblqh/Dblqh.hpp</code>
          内の) <code class="literal">Dblqh</code>
          モジュールには、読み取りと更新に影響を与える追加の
          <code class="literal">[ndbd]</code> パラメータがあります。
          これらには、デフォルトで 10000 * 128 バイト
          (1250K バイト) に設定される
          <code class="literal">ZATTRINBUF_FILESIZE</code>
          と、デフォルトで 10000 * 16 バイト (およそ 156K
          バイト) のバッファースペースに設定される
          <code class="literal">ZDATABUF_FILE_SIZE</code> が含まれます。
          これまでに、これらのコンパイル時制限のいずれかを増やすことを示すユーザーからの報告または弊社の大規模なテストの結果はありません。
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="ndbparam-ndbd-batchsizeperlocalscan"></a>
            <code class="literal">BatchSizePerLocalScan</code>
          </p><a class="indexterm" name="idm45563232533920"></a><div class="informaltable"><a name="batchsizeperlocalscan-ndbd-table"></a><table frame="box" rules="all" summary="BatchSizePerLocalScan データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>integer</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>256</td>
              </tr><tr>
                <th>範囲</th>
                <td>1 - 992</td>
              </tr><tr>
                <th>非推奨</th>
                <td>NDB 8.0.19</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            このパラメータは、並列スキャン操作を処理するために使用されるロックレコードの数を計算するために使用されます。
          </p><p>
            <code class="literal">BatchSizePerLocalScan</code> は、SQL
            ノードで定義される
            <code class="literal">BatchSize</code>
            と深い関係があります。
          </p><p>
            NDB 8.0.19 の時点では非推奨です。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-longmessagebuffer"></a>
            <code class="literal">LongMessageBuffer</code>
          </p><a class="indexterm" name="idm45563232509392"></a><div class="informaltable"><a name="longmessagebuffer-ndbd-table"></a><table frame="box" rules="all" summary="LongMessageBuffer データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>bytes</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>64M</td>
              </tr><tr>
                <th>範囲</th>
                <td>512K - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            これは、個々のノード内およびノード間でメッセージを渡すために使用される内部バッファーです。
            デフォルトは 64M バイトです。
          </p><p>
            ほとんどの場合、このパラメータをデフォルトから変更する必要はありません。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-maxfkbuildbatchsize"></a>
            <code class="literal">MaxFKBuildBatchSize</code>
          </p><a class="indexterm" name="idm45563232489040"></a><div class="informaltable"><a name="maxfkbuildbatchsize-ndbd-table"></a><table frame="box" rules="all" summary="MaxFKBuildBatchSize データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>integer</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>64</td>
              </tr><tr>
                <th>範囲</th>
                <td>16 - 512</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td></td>
              </tr></tbody></table></div><p>
            外部キーの作成に使用される最大スキャンバッチサイズ。
            このパラメータに設定された値を増やすと、進行中のトラフィックへの影響が大きくなるため、外部キービルドの構築が高速化される場合があります。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-maxnoofconcurrentscans"></a>
            <code class="literal">MaxNoOfConcurrentScans</code>
          </p><a class="indexterm" name="idm45563232469552"></a><div class="informaltable"><a name="maxnoofconcurrentscans-ndbd-table"></a><table frame="box" rules="all" summary="MaxNoOfConcurrentScans データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>integer</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>256</td>
              </tr><tr>
                <th>範囲</th>
                <td>2 - 500</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            このパラメータは、クラスタ内で実行できる並列スキャンの数を制御するために使用されます。
            各トランザクションコーディネータは、このパラメータで定義された数の並列スキャンを処理できます。
            各スキャンクエリーは、すべてのパーティションを並列でスキャンして実行されます。
            各パーティションスキャンでは、パーティションが配置されているノード内のスキャンレコードが使用されます。レコードの数は、このパラメータの値にノードの数を掛けた値です。
            クラスタは、クラスタ内のすべてのノードで同時に発生した
            <code class="literal">MaxNoOfConcurrentScans</code>
            個のスキャンを維持できます。
          </p><p>
            スキャンは、実際には 2
            つのケースで実行されます。 これらのうち 1
            つ目のケースは、クエリーを処理するためのハッシュまたは順序付けされたインデックスが存在しないときに発生します。この場合は、フルテーブルスキャンを実行するとクエリーが実行されます。
            2
            つ目のケースは、クエリーをサポートするハッシュインデックスが存在せず、順序付けされたインデックスが存在する場合に発生します。
            順序付けされたインデックスの使用は、並列の範囲スキャンの実行を意味します。
            この順序はローカルのパーティションでのみ維持されるため、すべてのパーティションでインデックススキャンを実行する必要があります。
          </p><p>
            <code class="literal">MaxNoOfConcurrentScans</code>
            のデフォルト値は 256 です。 最大値は 500
            です。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-maxnooflocalscans"></a>
            <code class="literal">MaxNoOfLocalScans</code>
          </p><a class="indexterm" name="idm45563232443808"></a><div class="informaltable"><a name="maxnooflocalscans-ndbd-table"></a><table frame="box" rules="all" summary="MaxNoOfLocalScans データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>integer</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>4 * MaxNoOfConcurrentScans * [# of data nodes] + 2</td>
              </tr><tr>
                <th>範囲</th>
                <td>32 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th>非推奨</th>
                <td>NDB 8.0.19</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            多くのスキャンが完全に並列化されていない場合の、ローカルスキャンレコードの数を指定します。
            ローカルスキャンレコードの数が指定されていない場合は、ここに示すように計算されます。
          </p><pre class="programlisting">4 * <code class="literal">MaxNoOfConcurrentScans</code> * [# data nodes] + 2
</pre><p>
            このパラメータは NDB 8.0.19
            の時点では非推奨であり、将来の NDB Cluster
            リリースで削除される予定です。
            また、このパラメータは
            <code class="literal">TransactionMemory</code>
            パラメータと互換性がありません。クラスタ構成ファイル
            (<code class="filename">config.ini</code>)
            で両方のパラメータの値を設定しようとすると、管理サーバーは起動を拒否します。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-maxparallelcopyinstances"></a>
            <code class="literal">MaxParallelCopyInstances</code>
          </p><a class="indexterm" name="idm45563232416832"></a><div class="informaltable"><a name="maxparallelcopyinstances-ndbd-table"></a><table frame="box" rules="all" summary="MaxParallelCopyInstances データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>integer</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>0</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 64</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td></td>
              </tr></tbody></table></div><p>
            このパラメータは、ノードの再起動またはシステムの再起動のコピーフェーズで使用されるパラレル化を設定します。現在起動中のノードが、最新のノードから変更されたレコードをコピーすることによって、現在のデータを持つノードと同期化されている場合です。
            このような場合、完全な並列性によって過負荷状態が発生する可能性があるため、<code class="literal">MaxParallelCopyInstances</code>
            ではそれを減らす手段が提供されます。
            このパラメータのデフォルト値は 0 です。
            この値は、有効な並列性が、ノードを更新するノードだけでなく、ノード内の
            LDM
            インスタンスの数と同じであることを意味します。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-maxparallelscansperfragment"></a>
            <code class="literal">MaxParallelScansPerFragment</code>
          </p><a class="indexterm" name="idm45563232395840"></a><div class="informaltable"><a name="maxparallelscansperfragment-ndbd-table"></a><table frame="box" rules="all" summary="MaxParallelScansPerFragment データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>bytes</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>256</td>
              </tr><tr>
                <th>範囲</th>
                <td>1 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            順次処理のキューイングが開始される前に許可される並列スキャン
            (<code class="literal">TUP</code>
            スキャンおよび
            <code class="literal">TUX</code> スキャン)
            の最大数を構成できます。
            これを増やすことにより、多数のスキャンを並列で実行するときに未使用の
            CPU
            を利用して、パフォーマンスを向上させることができます。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-maxreorgbuildbatchsize"></a>
            <code class="literal">MaxReorgBuildBatchSize</code>
          </p><a class="indexterm" name="idm45563232373696"></a><div class="informaltable"><a name="maxreorgbuildbatchsize-ndbd-table"></a><table frame="box" rules="all" summary="MaxReorgBuildBatchSize データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>integer</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>64</td>
              </tr><tr>
                <th>範囲</th>
                <td>16 - 512</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td></td>
              </tr></tbody></table></div><p>
            テーブルパーティションの再編成に使用される最大スキャンバッチサイズ。
            このパラメータに設定された値を増やすと、進行中のトラフィックへの影響が大きくなるため、再編成が高速化される場合があります。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-maxuibuildbatchsize"></a>
            <code class="literal">MaxUIBuildBatchSize</code>
          </p><a class="indexterm" name="idm45563232354192"></a><div class="informaltable"><a name="maxuibuildbatchsize-ndbd-table"></a><table frame="box" rules="all" summary="MaxUIBuildBatchSize データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>integer</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>64</td>
              </tr><tr>
                <th>範囲</th>
                <td>16 - 512</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td></td>
              </tr></tbody></table></div><p>
            一意キーの作成に使用される最大スキャンバッチサイズ。
            このパラメータに設定された値を増やすと、進行中のトラフィックへの影響が大きくなるため、このようなビルドが高速化される可能性があります。
          </p></li></ul></div><h5><a name="mysql-cluster-memory-allocation"></a>メモリー割り当て</h5><p><a name="ndbparam-ndbd-maxallocate"></a>
        <code class="literal">MaxAllocate</code>
      </p><a class="indexterm" name="idm45563232332864"></a><div class="informaltable"><a name="maxallocate-ndbd-table"></a><table frame="box" rules="all" summary="MaxAllocate データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
            <th>バージョン (またはそれ以降)</th>
            <td>NDB 8.0.13</td>
          </tr><tr>
            <th>タイプまたは単位</th>
            <td>unsigned</td>
          </tr><tr>
            <th>デフォルト</th>
            <td>32M</td>
          </tr><tr>
            <th>範囲</th>
            <td>1M - 1G</td>
          </tr><tr>
            <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
            <td><p>
                N (NDB 8.0.13)
              </p></td>
          </tr></tbody></table></div><p>
        これは、テーブル用のメモリーを割り当てるときに使用するメモリーユニットの最大サイズです。
        <code class="literal">NDB</code>
        で<span class="errortext">「メモリー不足」</span>エラーが発生したが、使用可能なすべてのメモリーがまだ使用されていないことをクラスタログまたは
        <code class="literal">DUMP 1000</code>
        の出力を調べることで明らかになる場合は、このパラメータの値
        (<code class="literal">MaxNoOfTables</code>
        またはその両方) を増やして、<code class="literal">NDB</code>
        で十分なメモリーを使用できるようにすることができます。
      </p><h5><a name="mysql-cluster-multiple-transporters"></a>複数のトランスポータ</h5><p>
        バージョン 8.0.20 以降、<code class="literal">NDB</code>
        はデータノードのペア間の通信に複数のトランスポータを割り当てます。
        このように割り当てられたトランスポータの数は、そのリリースで導入された
        <code class="literal">NodeGroupTransporters</code>
        パラメータに適切な値を設定することによって影響を受ける可能性があります。
      </p><p><a name="ndbparam-ndbd-nodegrouptransporters"></a>
        <code class="literal">NodeGroupTransporters</code>
      </p><a class="indexterm" name="idm45563232304784"></a><div class="informaltable"><a name="nodegrouptransporters-ndbd-table"></a><table frame="box" rules="all" summary="NodeGroupTransporters データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
            <th>バージョン (またはそれ以降)</th>
            <td>NDB 8.0.20</td>
          </tr><tr>
            <th>タイプまたは単位</th>
            <td>integer</td>
          </tr><tr>
            <th>デフォルト</th>
            <td>0</td>
          </tr><tr>
            <th>範囲</th>
            <td>0 - 32</td>
          </tr><tr>
            <th>追加</th>
            <td>NDB 8.0.20</td>
          </tr><tr>
            <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
            <td><p>
                N (NDB 8.0.13)
              </p></td>
          </tr></tbody></table></div><p>
        このパラメータは、同じノードグループ内のノード間で使用されるトランスポータの数を決定します。
        デフォルト値 (0)
        は、使用されるトランスポータの数がノード内の
        LDM の数と同じであることを意味します。
        ほとんどのユースケースではこれで十分です。したがって、この値をデフォルトから変更する必要はほとんどありません。
      </p><p>
        <code class="literal">NodeGroupTransporters</code> を LDM
        スレッドの数または TC スレッドの数
        (いずれか大きい方)
        より大きい値に設定すると、<code class="literal">NDB</code>
        はこれらの 2
        つのスレッドの最大数を使用します。
        つまり、これより大きい値は事実上無視されます。
      </p><h5><a name="mysql-cluster-hash-map-size"></a>ハッシュマップサイズ</h5><p><a name="ndbparam-ndbd-defaulthashmapsize"></a>
        <code class="literal">DefaultHashMapSize</code>
      </p><a class="indexterm" name="idm45563232278848"></a><div class="informaltable"><a name="defaulthashmapsize-ndbd-table"></a><table frame="box" rules="all" summary="DefaultHashMapSize データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
            <th>バージョン (またはそれ以降)</th>
            <td>NDB 8.0.13</td>
          </tr><tr>
            <th>タイプまたは単位</th>
            <td>LDM threads</td>
          </tr><tr>
            <th>デフォルト</th>
            <td>240</td>
          </tr><tr>
            <th>範囲</th>
            <td>0 - 3840</td>
          </tr><tr>
            <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
            <td><p>
                N (NDB 8.0.13)
              </p></td>
          </tr></tbody></table></div><p>
        このパラメータの元の使用目的は、アップグレードを容易にし、特にデフォルトのハッシュマップサイズが異なる非常に古いリリースとの間のダウングレードを容易にすることでした。
        NDB Cluster 7.3
        以降から新しいバージョンにアップグレードする場合、これは問題ではありません。
      </p><p>
        <code class="literal">DefaultHashMapSize</code> を 3840
        に設定してテーブルを作成または変更したあと、オンラインでこのパラメータを減らす方法は、現在サポートされていません。
      </p><p><a name="mysql-cluster-logging-and-checkpointing"></a><b>ロギングとチェックポイント. </b>
          次の <code class="literal">[ndbd]</code>
          パラメータは、ログとチェックポイントの動作を制御します。
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="ndbparam-ndbd-fragmentlogfilesize"></a>
            <code class="literal">FragmentLogFileSize</code>
          </p><a class="indexterm" name="idm45563232254704"></a><div class="informaltable"><a name="fragmentlogfilesize-ndbd-table"></a><table frame="box" rules="all" summary="FragmentLogFileSize データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>bytes</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>16M</td>
              </tr><tr>
                <th>範囲</th>
                <td>4M - 1G</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    IN (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            このパラメータを設定すると、Redo
            ログファイルのサイズを直接制御できます。
            これは、NDB Cluster
            が高負荷で動作しており、新しいフラグメントログファイルを開こうとする前にフラグメントログファイルを十分に迅速に閉じることができない
            (一度に開くことができるフラグメントログファイルは
            2
            つだけです)、フラグメントログファイルのサイズを増やすと、新しいフラグメントログファイルを開く前にクラスタの時間が長くなる可能性があります。
            このパラメータのデフォルト値は 16M です。
          </p><p>
            フラグメントログファイルの詳細は、<code class="literal">NoOfFragmentLogFiles</code>
            の説明を参照してください。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-initialnoofopenfiles"></a>
            <code class="literal">InitialNoOfOpenFiles</code>
          </p><a class="indexterm" name="idm45563232232304"></a><div class="informaltable"><a name="initialnoofopenfiles-ndbd-table"></a><table frame="box" rules="all" summary="InitialNoOfOpenFiles データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>files</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>27</td>
              </tr><tr>
                <th>範囲</th>
                <td>20 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            このパラメータは、開いたファイルに割り当てる初期の内部スレッド数を設定します。
          </p><p>
            デフォルト値は 27 です。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-initfragmentlogfiles"></a>
            <code class="literal">InitFragmentLogFiles</code>
          </p><a class="indexterm" name="idm45563232212288"></a><div class="informaltable"><a name="initfragmentlogfiles-ndbd-table"></a><table frame="box" rules="all" summary="InitFragmentLogFiles データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>[see values]</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>SPARSE</td>
              </tr><tr>
                <th>範囲</th>
                <td>SPARSE, FULL</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    IN (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            デフォルトでは、データノードの初期起動の実行時はフラグメントログファイルがまばらに作成されます。つまり、使用するオペレーティングシステムとファイルシステムによって、必ずしもすべてのバイトがディスクに書き込まれるわけではありません。
            ただし、このパラメータを使用すると、使用されているプラットフォームやファイルシステムのタイプに関係なく、この動作をオーバーライドしてすべてのバイトが強制的に書き込まれるように設定できます。
            <code class="literal">InitFragmentLogFiles</code>
            は 2 つの値のいずれかを取ります。
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <code class="literal">SPARSE</code>
                フラグメントログファイルがまばらに作成されます。
                これはデフォルト値です。
              </p></li><li class="listitem"><p>
                <code class="literal">FULL</code>。
                フラグメントログファイルのすべてのバイトが強制的にディスクに書き込まれます。
              </p></li></ul></div><p>
            オペレーティングシステムとファイルシステムによっては、<code class="literal">InitFragmentLogFiles=FULL</code>
            を設定することで、Redo
            ログへの書き込み時の I/O
            エラーを解消できる場合があります。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-enablepartiallcp"></a>
            <code class="literal">EnablePartialLcp</code>
          </p><a class="indexterm" name="idm45563232185136"></a><div class="informaltable"><a name="enablepartiallcp-ndbd-table"></a><table frame="box" rules="all" summary="EnablePartialLcp データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>boolean</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>true</td>
              </tr><tr>
                <th>範囲</th>
                <td>...</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            <code class="literal">true</code>
            の場合、部分的なローカルチェックポイントを有効にします:
            これは、各 LCP
            がデータベース全体の一部のみを記録し、最後の
            LCP
            以降に変更された行を含むレコードのみを記録することを意味します。変更された行がない場合、LCP
            は LCP
            制御ファイルのみを更新し、データファイルは更新しません。
          </p><p>
            <code class="literal">EnablePartialLcp</code> が無効
            (<code class="literal">false</code>) の場合、各 LCP
            は単一のファイルのみを使用し、完全チェックポイントを書き込みます。これには
            LCP
            に必要なディスク容量が最小限ですが、LCP
            ごとに書き込み負荷が増加します。
            デフォルト値は enabled (<code class="literal">true</code>)
            です。 部分 LCPS
            で使用される領域の割合は、<code class="literal">RecoveryWork</code>
            構成パラメータの設定によって変更できます。
          </p><p>
            LCP
            全体および一部に使用されるファイルおよびディレクトリの詳細は、<a class="ulink" href="https://dev.mysql.com/doc/ndb-internals/en/ndb-internals-ndbd-filesystemdir-files.html" target="_top">NDB Cluster Data Node File System Directory</a>
            を参照してください。
          </p><p>
            このパラメータを <code class="literal">false</code>
            に設定すると、適応 LCP
            制御メカニズムで使用されるディスク書込み速度の計算も無効になります。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-lcpscanprogresstimeout"></a>
            <code class="literal">LcpScanProgressTimeout</code>
          </p><a class="indexterm" name="idm45563232157088"></a><div class="informaltable"><a name="lcpscanprogresstimeout-ndbd-table"></a><table frame="box" rules="all" summary="LcpScanProgressTimeout データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>second</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>60</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.19</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>second</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>180</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            ローカルチェックポイントのフラグメントスキャンウォッチドッグは、ローカルチェックポイントの一部として実行されている各フラグメントスキャンが進行していないかどうか定期的にチェックし、特定の時間が経過しても進行しない場合はそのノードをシャットダウンします。
            この間隔は、LCP
            フラグメントスキャンウォッチドッグがノードを停止するまでにローカルチェックポイントを停止できる最大時間を設定する
            <code class="literal">LcpScanProgressTimeout</code>
            データノード構成パラメータを使用して設定できます。
          </p><p>
            デフォルト値は 60 秒です
            (以前のリリースと互換性があります)。
            このパラメータを 0 に設定すると、LCP
            のフラグメントスキャンウォッチドッグが完全に無効化されます。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-maxnoofopenfiles"></a>
            <code class="literal">MaxNoOfOpenFiles</code>
          </p><a class="indexterm" name="idm45563232126336"></a><div class="informaltable"><a name="maxnoofopenfiles-ndbd-table"></a><table frame="box" rules="all" summary="MaxNoOfOpenFiles データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>unsigned</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>0</td>
              </tr><tr>
                <th>範囲</th>
                <td>20 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            このパラメータは、開いたファイルに割り当てる内部スレッド数の上限を設定します。
            <span class="emphasis"><em>このパラメータの変更が必要な状況が発生した場合は、それをバグとして報告するようにしてください</em></span>。
          </p><p>
            デフォルト値は 0 です。
            ただし、このパラメータに設定できる最小値は
            20 です。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-maxnoofsavedmessages"></a>
            <code class="literal">MaxNoOfSavedMessages</code>
          </p><a class="indexterm" name="idm45563232105552"></a><div class="informaltable"><a name="maxnoofsavedmessages-ndbd-table"></a><table frame="box" rules="all" summary="MaxNoOfSavedMessages データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>integer</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>25</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            このパラメータは、エラーログに書き込まれるエラーの最大数と、既存のトレースファイルを上書きする前に保持されるトレースファイルの最大数を設定します。
            トレースファイルは、何らかの理由でノードがクラッシュしたときに生成されます。
          </p><p>
            デフォルトは 25 で、これらの最大値は 25
            個のエラーメッセージおよび 25
            個のトレースファイルに設定されます。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-maxlcpstartdelay"></a>
            <code class="literal">MaxLCPStartDelay</code>
          </p><a class="indexterm" name="idm45563232084912"></a><div class="informaltable"><a name="maxlcpstartdelay-ndbd-table"></a><table frame="box" rules="all" summary="MaxLCPStartDelay データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>seconds</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>0</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 600</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            データノードの並列リカバリでは、実際にはテーブルデータのみが並列でコピーされ、同期されます。ディクショナリ情報やチェックポイント情報などのメタデータの同期は順次に行われます。
            また、ディクショナリおよびチェックポイント情報のリカバリは、ローカルチェックポイントの実行と並列で実行できません。
            つまり、多くのデータノードを同時に起動したり再起動したりすると、データノードがローカルチェックポイントの実行中に待たされて、ノードのリカバリ時間が長くなる可能性があります。
          </p><p>
            より多くの (場合によってはすべての)
            データノードでメタデータの同期を完了できるように、ローカルチェックポイントの遅延を強制できます。各データノードでメタデータの同期が完了したあとは、ローカルチェックポイントの実行中でも、すべてのデータノードで並列にテーブルデータをリカバリできます。
            このような遅延を強制するには、<code class="literal">MaxLCPStartDelay</code>
            を設定します。これは、データノードでメタデータの同期が継続されている間にクラスタがローカルチェックポイントの開始を待機する秒数を決定します。
            このパラメータは、すべてのデータノードで同じになるように
            <code class="filename">config.ini</code> ファイルの
            <code class="literal">[ndbd default]</code>
            セクションに設定するようにしてください。
            最大値は 600、デフォルトは 0 です。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-nooffragmentlogfiles"></a>
            <code class="literal">NoOfFragmentLogFiles</code>
          </p><a class="indexterm" name="idm45563232059840"></a><div class="informaltable"><a name="nooffragmentlogfiles-ndbd-table"></a><table frame="box" rules="all" summary="NoOfFragmentLogFiles データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>integer</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>16</td>
              </tr><tr>
                <th>範囲</th>
                <td>3 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    IN (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            このパラメータは、ノードの Redo
            ログファイルの数 (つまり、Redo
            ロギングに割り当てられるスペースの量)
            を設定します。 Redo
            ログファイルはリング状に編成されるため、セット内の最初と最後のログファイル
            (それぞれ <span class="quote">「<span class="quote">head</span>」</span> および
            <span class="quote">「<span class="quote">tail</span>」</span> ログファイルとも呼ばれる)
            が交わらないことが非常に重要です。
            これらが互いに近寄りすぎると、新しいログレコードを追加する余裕がないため、ノードは更新を含むすべてのトランザクションを中止し始めます。
          </p><p>
            <code class="literal">REDO</code>
            ログレコードは、そのログレコードが挿入されてから、両方の必要なローカルチェックポイントが完了するまで削除されません。
            チェックポイントの頻度は、この章で別途説明する固有の構成パラメータセットによって決定されます。
          </p><p>
            デフォルトのパラメータ値は 16
            です。これは、デフォルトでは 16M
            バイトのファイル 4 個が 16 セット (合計 1024M
            バイト) あることを意味します。
            個々のログファイルのサイズは、<code class="literal">FragmentLogFileSize</code>
            パラメータを使用して構成できます。
            非常に多くの更新が必要なシナリオでは、Redo
            ログに対して十分なスペースを提供するため、<code class="literal">NoOfFragmentLogFiles</code>
            の値を 300
            以上に設定する必要がある場合があります。
          </p><p>
            チェックポイントが遅く、データベースへの書き込みが多いためにログファイルがいっぱいになって、リカバリに悪影響を与えずにログの末尾をカットできない場合は、すべての更新トランザクションが内部エラーコード
            410<code class="literal">「Out of log file space
            temporarily」</code>によって中止されます。
            この状態は、チェックポイントが完了してログの末尾を前に移動できるようになるまで続きます。
          </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">重要</div><p>
              このパラメータは<span class="quote">「<span class="quote">実行中に</span>」</span>変更できません。<code class="option">--initial</code>
              を使用してノードを再起動する必要があります。
              実行中のクラスタのすべてのデータノードでこの値を変更する必要がある場合は、(各データノードの起動時に
              <code class="option">--initial</code> を使用して)
              ノードのローリング再起動を使用します。
            </p></div></li><li class="listitem"><p><a name="ndbparam-ndbd-recoverywork"></a>
            <code class="literal">RecoveryWork</code>
          </p><a class="indexterm" name="idm45563232028288"></a><div class="informaltable"><a name="recoverywork-ndbd-table"></a><table frame="box" rules="all" summary="RecoveryWork データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>integer</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>60</td>
              </tr><tr>
                <th>範囲</th>
                <td>25 - 100</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            LCP
            ファイルの記憶域オーバーヘッドの割合。
            このパラメータは、<code class="literal">EnablePartialLcp</code>
            が true
            の場合、つまり部分的なローカルチェックポイントが有効な場合にのみ有効です。
            値が大きいほど、次のことを意味します:
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                LCP
                ごとに書き込まれるレコードが少なくなり、LCP
                はより多くの領域を使用
              </p></li><li class="listitem"><p>
                再起動中にさらに作業が必要
              </p></li></ul></div><p>
            <code class="literal">RecoveryWork</code>
            の値が小さいほど、次のことを意味します:
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                LCP
                ごとに書き込まれるレコードは増えますが、LCP
                で必要なディスク上の領域は少なくなります。
              </p></li><li class="listitem"><p>
                再起動中の作業が少なくなり、通常の操作中の作業が増えますが、再起動が速くなります
              </p></li></ul></div><p>
            たとえば、<code class="literal">RecoveryWork</code> を 60
            に設定すると、LCP
            の合計サイズは、チェックポイントするデータのサイズの約
            1 倍 0.6 = 1.6 倍になります。
            つまり、再起動のリストアフェーズでは、フルチェックポイントを使用する再起動時に実行される作業と比較して
            60% 多くの作業が必要になります。
            (これは、部分 LCP
            を使用している場合でも完全 LCP
            を使用している場合よりも再起動全体が高速になるように、再起動の他のフェーズで補正されるよりも多くあります。)
            redo
            ログをいっぱいにしないためには、チェックポイント中のデータ変更率の
            1 + (1 / <code class="literal">RecoveryWork</code>)
            回書き込む必要があります。したがって、<code class="literal">RecoveryWork</code>
            = 60,では、変更率の約 1 + (1 / 0.6) = 2.67
            回書き込む必要があります。
            つまり、変更が毎秒 10 MByte
            で書き込まれる場合、チェックポイントはおおよその
            26.7 MByte/秒で書き込む必要があります。
          </p><p>
            <code class="literal">RecoveryWork</code> = 40
            を設定すると、LCP の合計サイズの 1.4
            倍のみが必要になります
            (したがって、リストアフェーズにかかる時間は
            10 から 15% 短縮されます)。
            この場合、チェックポイント書込み率は変更率の
            3.5 倍です。
          </p><a class="indexterm" name="idm45563231996624"></a><p>
            NDB ソース配布には、LCP
            をシミュレートするためのテストプログラムが含まれています。<code class="filename">lcp_simulator.cc</code>
            は、<code class="filename">storage/ndb/src/kernel/blocks/backup/</code>にあります。
            Unix
            プラットフォームでコンパイルおよび実行するには、次に示すコマンドを実行します:
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>gcc lcp_simulator.cc</code></strong>
shell&gt; <strong class="userinput"><code>./a.out</code></strong>
</pre><p>
            このプログラムには <code class="filename">stdio.h</code>
            以外の依存関係はなく、NDB クラスタまたは
            MySQL サーバーへの接続は必要ありません。
            デフォルトでは、300 LCP
            (それぞれ挿入、更新、削除で構成される 100
            LCP の 3 つのセット) がシミュレートされ、各
            LCP の後に LCP のサイズがレポートされます。
            シミュレーションを変更するには、ソースで
            <code class="literal">recovery_work</code>、<code class="literal">insert_work</code>
            および <code class="literal">delete_work</code>
            の値を変更し、再コンパイルします。
            詳細は、プログラムのソースを参照してください。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-insertrecoverywork"></a>
            <code class="literal">InsertRecoveryWork</code>
          </p><a class="indexterm" name="idm45563231983952"></a><div class="informaltable"><a name="insertrecoverywork-ndbd-table"></a><table frame="box" rules="all" summary="InsertRecoveryWork データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>integer</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>40</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 70</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            挿入された行に使用される
            <code class="literal">RecoveryWork</code>
            の割合。
            値を大きくすると、ローカルチェックポイント中の書き込み数が増加し、LCP
            の合計サイズが減少します。
            値を小さくすると LCP
            中の書込み数が減りますが、LCP
            に使用される領域が増えるため、リカバリに時間がかかります。
            このパラメータは、<code class="literal">EnablePartialLcp</code>
            が true
            の場合、つまり部分的なローカルチェックポイントが有効な場合にのみ有効です。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-enableredocontrol"></a>
            <code class="literal">EnableRedoControl</code>
          </p><a class="indexterm" name="idm45563231961696"></a><div class="informaltable"><a name="enableredocontrol-ndbd-table"></a><table frame="box" rules="all" summary="EnableRedoControl データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>boolean</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>false</td>
              </tr><tr>
                <th>範囲</th>
                <td>...</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            redo
            ログの使用を制御するための適応チェックポイント処理速度を有効にします。
            無効にするには、<code class="literal">false</code>
            に設定します (デフォルト)。
            <code class="literal">EnablePartialLcp</code> を
            <code class="literal">false</code>
            に設定すると、適応計算も無効になります。
          </p><p>
            <code class="literal">EnableRedoControl</code>
            を有効にすると、LCP
            をディスクに書き込む速度に関して、データノードの柔軟性が向上します。
            具体的には、このパラメータを有効にすると、LCP
            が完了し、redo
            ログがより迅速にトリミングされるように、書込み率が高くなり、リカバリ時間とディスク領域要件が削減されます。
            この機能により、データノードは、Non-Volatile
            Memory Express (NVMe)
            を使用して、ソリッドステートドライブ (SSD)
            などの最新のソリッドステートストレージデバイスおよびプロトコルから使用可能なより高い速度の
            I/O
            およびより高い帯域幅をより効果的に使用できます。
          </p><p>
            従来のハードディスク (HDD)
            を使用するシステムなど、ソリッドステートテクノロジを採用するシステムに対して
            I/O
            または帯域幅が制約されているシステムに
            <code class="literal">NDB</code>
            がまだ広くデプロイされているため、このパラメータは現在
            <code class="literal">false</code> (無効)
            にデフォルト設定されています。
            このような設定では、<code class="literal">EnableRedoControl</code>
            メカニズムによって I/O
            サブシステムが飽和状態になり、データノードの入出力の待機時間が長くなる可能性があります。
            特に、これにより、制約付き IO
            サブシステムをデータノード LCP および redo
            ログファイルと共有しているテーブルスペースまたはログファイルグループを持つ「NDB
            ディスクデータ」テーブルで問題が発生する可能性があります。このような問題には、GCP
            停止エラーによるノードまたはクラスタの障害が含まれる可能性があります。
          </p></li></ul></div><p><a name="mysql-cluster-metadata-objects"></a><b>メタデータオブジェクト. </b>
          次の一連の <code class="literal">[ndbd]</code>
          パラメータは、インデックス、イベント、およびクラスタ間のレプリケーションで使用される属性、テーブル、インデックス、およびトリガーオブジェクトの最大数を定義するために使用されるメタデータオブジェクトのプールサイズを定義します。
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
          これらはクラスタに対する<span class="quote">「<span class="quote">「提案」</span>」</span>としてのみ機能し、指定されていないものは表示されているデフォルト値に戻ります。
        </p></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="ndbparam-ndbd-maxnoofattributes"></a>
            <code class="literal">MaxNoOfAttributes</code>
          </p><a class="indexterm" name="idm45563231926736"></a><div class="informaltable"><a name="maxnoofattributes-ndbd-table"></a><table frame="box" rules="all" summary="MaxNoOfAttributes データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>integer</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>1000</td>
              </tr><tr>
                <th>範囲</th>
                <td>32 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            このパラメータは、クラスタに定義できる属性の推奨最大数を設定します。<code class="literal">MaxNoOfTables</code>
            と同様、厳密な上限の役割を果たすためのものではありません。
          </p><p>
            (古い NDB Cluster
            リリースでは、このパラメータは特定の操作の強い制限として扱われることがありました。
            これにより、NDB Cluster
            レプリケーションでは、レプリケート可能な数より多くのテーブルを作成できる場合に問題が発生し、状況によっては可能なときに混乱することがあります
            (または不可能な場合によっては、<code class="literal">MaxNoOfAttributes</code>
            属性を複数作成することもあります)。)
          </p><p>
            デフォルト値は 1000
            です。指定可能な最小値は 32 です。
            最大値は 4294967039 です。
            すべてのメタデータがサーバー上で完全にレプリケートされるため、各属性はノードあたり
            200 バイト前後のストレージを消費します。
          </p><p>
            <code class="literal">MaxNoOfAttributes</code>
            を設定するときは、今後実行する可能性がある
            <code class="literal">ALTER TABLE</code>
            ステートメントを事前に用意することが重要です。
            これは、クラスタテーブルで
            <code class="literal">ALTER TABLE</code>
            の実行中に、元のテーブルに含まれる 3
            倍の数の属性が使用されるためであり、この数の
            2 倍を許可することをお勧めします。
            たとえば、属性
            (<em class="replaceable"><code>greatest_number_of_attributes</code></em>)
            の数が最大の「NDB Cluster」テーブルに 100
            個の属性がある場合、<code class="literal">MaxNoOfAttributes</code>
            の値の適切な開始点は <code class="literal">6 *
            <em class="replaceable"><code>greatest_number_of_attributes</code></em> =
            600</code> になります。
          </p><p>
            また、テーブルあたりの平均属性数を見積もり、それに
            <code class="literal">MaxNoOfTables</code>
            を掛けることもお勧めします。
            この値が前の段落で得られた値より大きい場合は、大きい値を使用するようにしてください。
          </p><p>
            必要なすべてのテーブルが問題なく作成できると仮定して、パラメータの構成後に実際に
            <code class="literal">ALTER TABLE</code>
            を試行し、この数が十分であることを確認するようにしてください。
            これが成功しなかった場合は、<code class="literal">MaxNoOfAttributes</code>
            をさらに
            <code class="literal">MaxNoOfTables</code>
            の数だけ増やして、再度テストしてください。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-maxnooftables"></a>
            <code class="literal">MaxNoOfTables</code>
          </p><a class="indexterm" name="idm45563231889696"></a><div class="informaltable"><a name="maxnooftables-ndbd-table"></a><table frame="box" rules="all" summary="MaxNoOfTables データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>integer</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>128</td>
              </tr><tr>
                <th>範囲</th>
                <td>8 - 20320</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            テーブルオブジェクトは、クラスタ内のテーブルごと、および一意のハッシュインデックスごとに割り当てられます。
            このパラメータは、クラスタ全体のテーブルオブジェクトの推奨最大数を設定します。<code class="literal">MaxNoOfAttributes</code>
            と同様、厳密な上限の役割を果たすためのものではありません。
          </p><p>
            (古い NDB Cluster
            リリースでは、このパラメータは特定の操作の強い制限として扱われることがありました。
            これにより、NDB Cluster
            レプリケーションで、レプリケート可能な数より多くのテーブルを作成できた場合に問題が発生し、状況によっては、<code class="literal">MaxNoOfTables</code>
            テーブルを複数作成するために可能な場合
            (または不可能な場合)
            に混乱することがありました。)
          </p><p>
            <code class="literal">BLOB</code>
            データ型を持つ各属性では、<code class="literal">BLOB</code>
            データの大部分を格納するために追加のテーブルが使用されます。
            テーブルの合計数を定義するときは、これらのテーブルも考慮に入れる必要があります。
          </p><p>
            このパラメータのデフォルト値は 128 です。
            最小値は 8、最大値は 20320 です。
            各テーブルオブジェクトは、ノードあたりおよそ
            20K バイトを消費します。
          </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
              <code class="literal">MaxNoOfTables</code>、<code class="literal">MaxNoOfOrderedIndexes</code>、および
              <code class="literal">MaxNoOfUniqueHashIndexes</code>
              の合計が <code class="literal">2<sup>32</sup> -
              2</code> (4294967294)
              を超えないようにする必要があります。
            </p></div></li><li class="listitem"><p><a name="ndbparam-ndbd-maxnooforderedindexes"></a>
            <code class="literal">MaxNoOfOrderedIndexes</code>
          </p><a class="indexterm" name="idm45563231857632"></a><div class="informaltable"><a name="maxnooforderedindexes-ndbd-table"></a><table frame="box" rules="all" summary="MaxNoOfOrderedIndexes データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>integer</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>128</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            クラスタ内の順序付けされたインデックスごとに、インデックスされた内容とそのストレージセグメントを記述するオブジェクトが割り当てられます。
            デフォルトでは、そのように定義された各インデックスによって、順序付けされたインデックスも定義されます。
            個々の一意のインデックスおよび主キーには、順序付けされたインデックスとハッシュインデックスの両方が含まれています。
            <code class="literal">MaxNoOfOrderedIndexes</code>
            は、システム内で一度に使用できる順序付けされたインデックスの合計数を設定します。
          </p><p>
            このパラメータのデフォルト値は 128 です。
            各インデックスオブジェクトは、ノードあたりおよそ
            10K バイトのデータを消費します。
          </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
              <code class="literal">MaxNoOfTables</code>、<code class="literal">MaxNoOfOrderedIndexes</code>、および
              <code class="literal">MaxNoOfUniqueHashIndexes</code>
              の合計が <code class="literal">2<sup>32</sup> -
              2</code> (4294967294)
              を超えないようにする必要があります。
            </p></div></li><li class="listitem"><p><a name="ndbparam-ndbd-maxnoofuniquehashindexes"></a>
            <code class="literal">MaxNoOfUniqueHashIndexes</code>
          </p><a class="indexterm" name="idm45563231830608"></a><div class="informaltable"><a name="maxnoofuniquehashindexes-ndbd-table"></a><table frame="box" rules="all" summary="MaxNoOfUniqueHashIndexes データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>integer</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>64</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            主キー以外の個々の一意のインデックスには、一意キーをインデックスされたテーブルの主キーにマップする専用のテーブルが割り当てられます。
            デフォルトでは、個々の一意のインデックスに対して順序付けされたインデックスも定義されます。
            これを禁止するには、一意のインデックスを定義するときに
            <code class="literal">USING HASH</code>
            オプションを指定する必要があります。
          </p><p>
            デフォルト値は 64 です。
            各インデックスは、ノードあたりおよそ 15K
            バイトを消費します。
          </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
              <code class="literal">MaxNoOfTables</code>、<code class="literal">MaxNoOfOrderedIndexes</code>、および
              <code class="literal">MaxNoOfUniqueHashIndexes</code>
              の合計が <code class="literal">2<sup>32</sup> -
              2</code> (4294967294)
              を超えないようにする必要があります。
            </p></div></li><li class="listitem"><p><a name="ndbparam-ndbd-maxnooftriggers"></a>
            <code class="literal">MaxNoOfTriggers</code>
          </p><a class="indexterm" name="idm45563231803968"></a><div class="informaltable"><a name="maxnooftriggers-ndbd-table"></a><table frame="box" rules="all" summary="MaxNoOfTriggers データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>integer</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>768</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            個々の一意のハッシュインデックスには、内部更新、挿入、および削除のトリガーが割り当てられます。
            (これは、一意のハッシュインデックスごとに
            3
            つのトリガーが作成されることを意味します。)
            ただし、<span class="emphasis"><em>順序付けされた</em></span>インデックスに必要なトリガーオブジェクトは
            1 つだけです。
            バックアップでも、クラスタ内の通常のテーブルごとに
            3
            つのトリガーオブジェクトが使用されます。
          </p><p>
            クラスタ間のレプリケーションでも、内部トリガーが使用されます。
          </p><p>
            このパラメータは、クラスタ内のトリガーオブジェクトの最大数を設定します。
          </p><p>
            デフォルト値は 768 です。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-maxnoofsubscriptions"></a>
            <code class="literal">MaxNoOfSubscriptions</code>
          </p><a class="indexterm" name="idm45563231781552"></a><div class="informaltable"><a name="maxnoofsubscriptions-ndbd-table"></a><table frame="box" rules="all" summary="MaxNoOfSubscriptions データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>unsigned</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>0</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            NDB Cluster 内の各 <code class="literal">NDB</code>
            テーブルには、NDB
            カーネルでのサブスクリプションが必要です。
            一部の NDB API
            アプリケーションでは、このパラメータの変更が必要または望ましい場合があります。
            ただし、SQL ノードとして機能する MySQL
            サーバーを通常どおりに使用する場合は、これを行う必要はありません。
          </p><p>
            <code class="literal">MaxNoOfSubscriptions</code>
            のデフォルト値は 0
            です。これは、<code class="literal">MaxNoOfTables</code>
            と等価として扱われます。
            各サブスクリプションは 108
            バイトを消費します。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-maxnoofsubscribers"></a>
            <code class="literal">MaxNoOfSubscribers</code>
          </p><a class="indexterm" name="idm45563231757952"></a><div class="informaltable"><a name="maxnoofsubscribers-ndbd-table"></a><table frame="box" rules="all" summary="MaxNoOfSubscribers データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>unsigned</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>0</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            このパラメータは NDB Cluster
            レプリケーションを使用している場合にのみ重要です。
            デフォルト値は 0 です。 NDB 8.0.25
            より前は、これは <code class="literal">2 *
            MaxNoOfTables</code>
            として扱われていました。NDB 8.0.25
            以降は、<code class="literal">2 * MaxNoOfTables + 2 * [number of API
            nodes]</code>として扱われます。 各 MySQL
            サーバー
            (レプリケーションソースとして機能するサーバーとレプリカとして機能するサーバー)
            には、<code class="literal">NDB</code>
            テーブルごとに 1
            つのサブスクリプションがあります。
            各サブスクライバは 16
            バイトのメモリーを使用します。
          </p><p>
            循環レプリケーション、マルチソースレプリケーションおよび
            2 台を超える MySQL
            サーバーを含むその他のレプリケーション設定を使用する場合は、このパラメータをレプリケーションに含まれる
            <span class="command"><strong>mysqld</strong></span>
            プロセスの数に増やす必要があります
            (多くの場合、これは常にクラスタの数と同じではありません)。
            たとえば、3 つの NDB Cluster
            を使用して循環レプリケーション設定があり、各クラスタに
            1 つの <span class="command"><strong>mysqld</strong></span>
            が接続されており、これらの各
            <span class="command"><strong>mysqld</strong></span>
            プロセスがソースおよびレプリカとして機能する場合は、<code class="literal">MaxNoOfSubscribers</code>
            を <code class="literal">3 * MaxNoOfTables</code>
            と同等に設定するようにしてください。
          </p><p>
            詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-replication" title="23.6 NDB Cluster レプリケーション">セクション23.6「NDB Cluster レプリケーション」</a>を参照してください。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-maxnoofconcurrentsuboperations"></a>
            <code class="literal">MaxNoOfConcurrentSubOperations</code>
          </p><a class="indexterm" name="idm45563231728112"></a><div class="informaltable"><a name="maxnoofconcurrentsuboperations-ndbd-table"></a><table frame="box" rules="all" summary="MaxNoOfConcurrentSubOperations データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>unsigned</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>256</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            このパラメータは、クラスタ内のすべての
            API
            ノードが一度に実行できる操作数の上限を設定します。
            通常の操作ではデフォルト値 (256)
            で十分ですが、API
            ノードが多数あり、それぞれが大量の操作を同時に実行しているシナリオでのみ、調整が必要になる可能性があります。
          </p></li></ul></div><p><a name="mysql-cluster-boolean-parameters"></a><b>ブールパラメータ. </b>
          データノードの動作は、ブール値を取る一連の
          <code class="literal">[ndbd]</code>
          パラメータにも影響されます。
          これらの各パラメータは、<code class="literal">TRUE</code>
          として指定する場合は <code class="literal">1</code> または
          <code class="literal">Y</code> に設定し、<code class="literal">FALSE</code>
          として指定する場合は <code class="literal">0</code> または
          <code class="literal">N</code> に設定します。
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="ndbparam-ndbd-compressedlcp"></a>
            <code class="literal">CompressedLCP</code>
          </p><a class="indexterm" name="idm45563231700416"></a><div class="informaltable"><a name="compressedlcp-ndbd-table"></a><table frame="box" rules="all" summary="CompressedLCP データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>boolean</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>false</td>
              </tr><tr>
                <th>範囲</th>
                <td>true, false</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            このパラメータを <code class="literal">1</code>
            に設定すると、ローカルチェックポイントが圧縮されます。
            使用される圧縮は <span class="command"><strong>gzip --fast</strong></span>
            と同等であり、データノードで非圧縮チェックポイントファイルの格納に必要なスペースの
            50% 以上を節約できます。 圧縮 LCP
            は、個々のデータノードまたは
            (<code class="filename">config.ini</code> ファイルの
            <code class="literal">[ndbd default]</code>
            セクションにこのパラメータを設定することで)
            すべてのデータノードで有効化できます。
          </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">重要</div><p>
              圧縮ローカルチェックポイントを、この機能をサポートしない
              MySQL
              バージョンを実行するクラスタにリストアすることはできません。
            </p></div><p>
            デフォルト値は <code class="literal">0</code> (無効)
            です。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-crashoncorruptedtuple"></a>
            <code class="literal">CrashOnCorruptedTuple</code>
          </p><a class="indexterm" name="idm45563231674672"></a><div class="informaltable"><a name="crashoncorruptedtuple-ndbd-table"></a><table frame="box" rules="all" summary="CrashOnCorruptedTuple データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>boolean</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>true</td>
              </tr><tr>
                <th>範囲</th>
                <td>true, false</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td></td>
              </tr></tbody></table></div><p>
            このパラメータを有効にすると
            (デフォルト)、破損したタプルが検出されるたびにデータノードが強制的にシャットダウンされます。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-diskless"></a>
            <code class="literal">Diskless</code>
          </p><a class="indexterm" name="idm45563231655408"></a><div class="informaltable"><a name="diskless-ndbd-table"></a><table frame="box" rules="all" summary="Diskless データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>true|false (1|0)</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>false</td>
              </tr><tr>
                <th>範囲</th>
                <td>true, false</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    IS (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            「NDB
            Cluster」テーブルを<span class="firstterm">ディスクレス</span>として指定できます。つまり、テーブルはディスクにチェックポイントされず、ロギングも行われません。
            このようなテーブルはメインメモリーにのみ存在します。
            ディスクレステーブルを使用すると、クラッシュ発生時にテーブルもテーブル内のレコードも失われます。
            ただし、ディスクレスモードで動作するときは、ディスクレスコンピュータで
            <span class="command"><strong>ndbd</strong></span> を実行できます。
          </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">重要</div><p>
              この機能を使用すると、クラスタ<span class="emphasis"><em>全体</em></span>がディスクレスモードで動作します。
            </p></div><p>
            この機能を有効にすると、クラスタのオンラインバックアップが無効になります。
            また、クラスタの部分的起動ができなくなります。
          </p><p>
            <code class="literal">Diskless</code>
            はデフォルトで無効になっています。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-latealloc"></a>
            <code class="literal">LateAlloc</code>
          </p><a class="indexterm" name="idm45563231629872"></a><div class="informaltable"><a name="latealloc-ndbd-table"></a><table frame="box" rules="all" summary="LateAlloc データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>numeric</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>1</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 1</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            管理サーバーへの接続が確立されたあとで、このデータノードのメモリーを割り当てます。
            デフォルトで有効。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-lockpagesinmainmemory"></a>
            <code class="literal">LockPagesInMainMemory</code>
          </p><a class="indexterm" name="idm45563231610304"></a><div class="informaltable"><a name="lockpagesinmainmemory-ndbd-table"></a><table frame="box" rules="all" summary="LockPagesInMainMemory データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>numeric</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>0</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 2</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            Solaris と Linux
            を含むいくつかのオペレーティングシステムでは、プロセスをメモリーにロックすると、ディスクへのスワップを回避できます。
            これを使用すると、クラスタのリアルタイム特性が保証されやすくなります。
          </p><p>
            このパラメータは、整数値
            <code class="literal">0</code>、<code class="literal">1</code>、または
            <code class="literal">2</code>
            のいずれかを取ります。これらの機能を次のリストに示します。
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <code class="literal">0</code>: ロックを無効にします。
                これはデフォルト値です。
              </p></li><li class="listitem"><p>
                <code class="literal">1</code>:
                プロセスのメモリーを割り当てたあとでロックを実行します。
              </p></li><li class="listitem"><p>
                <code class="literal">2</code>:
                プロセスのメモリーを割り当てる前にロックを実行します。
              </p></li></ul></div><p>
            権限のないユーザーがページをロックできるようにオペレーティングシステムが構成されていない場合は、このパラメータを利用するデータノードプロセスをシステムの
            root
            として実行する必要がある可能性があります。
            (<code class="literal">LockPagesInMainMemory</code>
            では、<code class="literal">mlockall</code>
            関数が使用されます。 Linux kernel 2.6.9
            以降では、権限のないユーザーが <code class="literal">max
            locked memory</code>
            の制限に従ってメモリーをロックできます。
            詳細は、<span class="command"><strong>ulimit -l</strong></span> および
            <a class="ulink" href="http://linux.die.net/man/2/mlock" target="_top">http://linux.die.net/man/2/mlock</a>
            を参照してください)。
          </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
              古い NDB Cluster
              リリースでは、このパラメータはブールでした。<code class="literal">0</code>
              または <code class="literal">false</code>
              がデフォルト設定で、ロックが無効になっています。<code class="literal">1</code>
              または <code class="literal">true</code>
              は、メモリーの割当て後にプロセスのロックを有効にしました。
              NDB Cluster 8.0 は、このパラメータの値として
              <code class="literal">true</code> または <code class="literal">false</code>
              をエラーとして扱います。
            </p></div><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">重要</div><p>
              <code class="literal">glibc</code> 2.10
              以降では、<code class="literal">glibc</code>
              が共有プールでのロック競合を減らすためにスレッド単位のアリーナを使用し、これによって実メモリーが消費されます。
              通常、データノードプロセスは起動後にメモリー割り当てを実行しないため、スレッド単位のアリーナを必要としません。
              (このアロケータの違いがパフォーマンスに重大な影響を与えることはありません。)
            </p><p>
              この <code class="literal">glibc</code> の動作は
              <code class="literal">MALLOC_ARENA_MAX</code>
              環境変数を使用して構成できるようになっていますが、<code class="literal">glibc</code>
              2.16
              より前では、このメカニズムのバグが原因でこの変数を
              8
              未満に設定できなかったため、無駄になったメモリーを再利用できませんでした。
              (Bug
              #15907219。この問題の詳細は、<a class="ulink" href="http://sourceware.org/bugzilla/show_bug.cgi?id=13137" target="_top">http://sourceware.org/bugzilla/show_bug.cgi?id=13137</a>
              も参照してください。)
            </p><p>
              この問題の考えられる回避策は、<code class="literal">LD_PRELOAD</code>
              環境変数を使用して <code class="literal">jemalloc</code>
              メモリー割り当てライブラリをプリロードし、<code class="literal">glibc</code>
              に付属するライブラリの代わりに使用することです。
            </p></div></li><li class="listitem"><p><a name="ndbparam-ndbd-odirect"></a>
            <code class="literal">ODirect</code>
          </p><a class="indexterm" name="idm45563231560960"></a><div class="informaltable"><a name="odirect-ndbd-table"></a><table frame="box" rules="all" summary="ODirect データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>boolean</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>false</td>
              </tr><tr>
                <th>範囲</th>
                <td>true, false</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            このパラメータを有効にすると、<code class="literal">NDB</code>
            が LCP、バックアップ、および Redo ログで
            <code class="literal">O_DIRECT</code>
            書き込みを試行し、多くの場合
            <span class="command"><strong>kswapd</strong></span> と CPU
            の使用率が低下します。 Linux で NDB Cluster
            を使用しているときに、2.6
            以降のカーネルを使用している場合は
            <code class="literal">ODirect</code>
            を有効にします。
          </p><p>
            <code class="literal">ODirect</code>
            はデフォルトで無効になっています。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-odirectsyncflag"></a>
            <code class="literal">ODirectSyncFlag</code>
          </p><a class="indexterm" name="idm45563231536016"></a><div class="informaltable"><a name="odirectsyncflag-ndbd-table"></a><table frame="box" rules="all" summary="ODirectSyncFlag データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>boolean</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>false</td>
              </tr><tr>
                <th>範囲</th>
                <td>true, false</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            このパラメータを有効にすると、完了した各ファイルシステム書込みが
            <code class="literal">fsync</code>
            へのコールとして処理されるように redo
            ログ書込みが実行されます。
            次のいずれかの条件が満たされている場合、このパラメータの設定は無視されます:
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <code class="literal">ODirect</code>
                が有効になっていません。
              </p></li><li class="listitem"><p>
                <code class="literal">InitFragmentLogFiles</code>
                は <code class="literal">SPARSE</code>
                に設定されています。
              </p></li></ul></div><p>
            デフォルトで無効になっています。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-restartonerrorinsert"></a>
            <code class="literal">RestartOnErrorInsert</code>
          </p><a class="indexterm" name="idm45563231509904"></a><div class="informaltable"><a name="restartonerrorinsert-ndbd-table"></a><table frame="box" rules="all" summary="RestartOnErrorInsert データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>error code</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>2</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 4</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            この機能は、コードの個々のブロックをテストの一部として実行する際に、エラーの挿入が可能なデバッグバージョンをビルドする場合にのみ利用できます。
          </p><p>
            この機能はデフォルトで無効になっています。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-stoponerror"></a>
            <code class="literal">StopOnError</code>
          </p><a class="indexterm" name="idm45563231489712"></a><div class="informaltable"><a name="stoponerror-ndbd-table"></a><table frame="box" rules="all" summary="StopOnError データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>boolean</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>1</td>
              </tr><tr>
                <th>範囲</th>
                <td>0, 1</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            このパラメータは、データノードプロセスでエラー状態が発生したときに、プロセスを終了するか、自動的に再起動するか指定します。
          </p><p>
            このパラメータのデフォルト値は 1
            です。これは、デフォルトでは、エラーによってデータノードのプロセスが停止することを意味します。
          </p><p>
            エラーが発生し、<code class="literal">StopOnError</code> が 0
            の場合は、データノードプロセスが再起動されます。
          </p><p>
            MySQL Cluster Manager のユーザーは、<code class="literal">StopOnError</code>
            が 1 の場合、これにより、MySQL Cluster Manager
            エージェントが独自の再起動およびリカバリを実行した後にデータノードを再起動できないことに注意する必要があります。
            詳しくは<a class="ulink" href="https://dev.mysql.com/doc/mysql-cluster-manager/1.4/en/mcm-using-start-stop-agent-linux.html" target="_top">Starting and Stopping the Agent on Linux</a>,をご覧ください。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-useshm"></a>
            <code class="literal">UseShm</code>
          </p><a class="indexterm" name="idm45563231465312"></a><div class="informaltable"><a name="useshm-ndbd-table"></a><table frame="box" rules="all" summary="UseShm データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>boolean</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>false</td>
              </tr><tr>
                <th>範囲</th>
                <td>true, false</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td></td>
              </tr></tbody></table></div><p>
            このデータノードと、このホストでも実行されている
            API
            ノードとの間の共有メモリー接続を有効にします。
            有効にするには 1 に設定します。
          </p></li></ul></div><h5><a name="mysql-cluster-timeouts-intervals-disk-paging"></a>タイムアウト、間隔、およびディスクページングの制御</h5><p>
        クラスタデータノード内のさまざまなアクション間のタイムアウトと間隔を指定する、いくつかの
        <code class="literal">[ndbd]</code> パラメータがあります。
        ほとんどのタイムアウト値はミリ秒単位で指定します。
        この例外については、該当する箇所で説明します。
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="ndbparam-ndbd-timebetweenwatchdogcheck"></a>
            <code class="literal">TimeBetweenWatchDogCheck</code>
          </p><a class="indexterm" name="idm45563231442368"></a><div class="informaltable"><a name="timebetweenwatchdogcheck-ndbd-table"></a><table frame="box" rules="all" summary="TimeBetweenWatchDogCheck データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>milliseconds</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>6000</td>
              </tr><tr>
                <th>範囲</th>
                <td>70 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            メインスレッドがある時点で無限ループに陥ることを防ぐため、<span class="quote">「<span class="quote">ウォッチドッグ</span>」</span>スレッドがメインスレッドをチェックします。
            このパラメータは、チェック間のミリ秒数を指定します。
            プロセスが 3
            回のチェック後も同じ状態の場合、ウォッチドッグスレッドはプロセスを強制終了します。
          </p><p>
            このパラメータは、実験のため、またはローカルの状態に合わせて簡単に変更できます。
            これをノード単位で指定することもできますが、指定することはほとんどありません。
          </p><p>
            デフォルトのタイムアウトは 6000 ミリ秒 (6
            秒) です。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-timebetweenwatchdogcheckinitial"></a>
            <code class="literal">TimeBetweenWatchDogCheckInitial</code>
          </p><a class="indexterm" name="idm45563231420112"></a><div class="informaltable"><a name="timebetweenwatchdogcheckinitial-ndbd-table"></a><table frame="box" rules="all" summary="TimeBetweenWatchDogCheckInitial データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>milliseconds</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>6000</td>
              </tr><tr>
                <th>範囲</th>
                <td>70 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            これは
            <code class="literal">TimeBetweenWatchDogCheck</code>
            パラメータと似ていますが、メモリーが割り当てられる最早開始フェーズで、<code class="literal">TimeBetweenWatchDogCheckInitial</code>
            がストレージノード内の実行チェック間の経過時間を制御する点が異なります。
          </p><p>
            デフォルトのタイムアウトは 6000 ミリ秒 (6
            秒) です。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-startpartialtimeout"></a>
            <code class="literal">StartPartialTimeout</code>
          </p><a class="indexterm" name="idm45563231397632"></a><div class="informaltable"><a name="startpartialtimeout-ndbd-table"></a><table frame="box" rules="all" summary="StartPartialTimeout データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>milliseconds</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>30000</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            このパラメータは、クラスタの初期化ルーチンが呼び出されるまでにクラスタがデータノードの起動を待つ時間を指定します。
            このタイムアウトは、可能なかぎり、クラスタの部分的起動を回避するために使用されます。
          </p><p>
            このパラメータは、クラスタの初期起動または初期再起動の実行時にオーバーライドされます。
          </p><p>
            デフォルト値は 30000 ミリ秒 (30 秒) です。0
            にするとタイムアウトが無効になり、すべてのノードが使用可能な場合にのみクラスタを起動できるようになります。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-startpartitionedtimeout"></a>
            <code class="literal">StartPartitionedTimeout</code>
          </p><a class="indexterm" name="idm45563231376160"></a><div class="informaltable"><a name="startpartitionedtimeout-ndbd-table"></a><table frame="box" rules="all" summary="StartPartitionedTimeout データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>milliseconds</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>0</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            <code class="literal">StartPartialTimeout</code>
            ミリ秒の待機後にクラスタが起動できる状態になっても、まだパーティション化された状態の可能性がある場合、クラスタはこのタイムアウトが経過するまで待機します。
            <code class="literal">StartPartitionedTimeout</code>
            が 0
            に設定されている場合、クラスタは無期限に待機します
            (2<sup>32</sup>−1 ミリ秒または約
            49.71 日)。
          </p><p>
            このパラメータは、クラスタの初期起動または初期再起動の実行時にオーバーライドされます。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-startfailuretimeout"></a>
            <code class="literal">StartFailureTimeout</code>
          </p><a class="indexterm" name="idm45563231353136"></a><div class="informaltable"><a name="startfailuretimeout-ndbd-table"></a><table frame="box" rules="all" summary="StartFailureTimeout データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>milliseconds</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>0</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            データノードでこのパラメータで指定された時間内に起動シーケンスが完了されなかった場合、ノードの起動は失敗します。
            このパラメータを 0 (デフォルト値)
            に設定すると、データノードのタイムアウトは適用されません。
          </p><p>
            このパラメータでは、0
            以外の値はミリ秒単位で測定されます。
            非常に多くのデータを含むデータノードでは、このパラメータを増やすようにしてください。
            たとえば、数ギガバイトのデータを含むデータノードの場合、ノードを再起動するのに
            10-15 分 (つまり、600000-1000000 ミリ秒)
            の時間が必要です。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-startnonodegrouptimeout"></a>
            <code class="literal">StartNoNodeGroupTimeout</code>
          </p><a class="indexterm" name="idm45563231332288"></a><div class="informaltable"><a name="startnonodegrouptimeout-ndbd-table"></a><table frame="box" rules="all" summary="StartNoNodeGroupTimeout データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>milliseconds</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>15000</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            <code class="literal">Nodegroup = 65536</code>
            でデータノードを構成すると、そのノードはどのノードグループにも割り当てられないものとみなされます。
            その場合、クラスタは
            <code class="literal">StartNoNodegroupTimeout</code>
            ミリ秒待機してから、そのようなノードを
            <code class="option">--nowait-nodes</code>
            オプションに渡されたリストに追加されたものとして扱い、起動します。
            デフォルト値は <code class="literal">15000</code> です
            (つまり、管理サーバーは 15 秒待機します)。
            このパラメータを <code class="literal">0</code>
            に設定すると、クラスタは無期限に待機します。
          </p><p>
            <code class="literal">StartNoNodegroupTimeout</code>
            はクラスタ内のすべてのデータノードで同じにする必要があります。そのため、これは個々のデータノードではなく、常に
            <code class="filename">config.ini</code> ファイルの
            <code class="literal">[ndbd default]</code>
            セクションに設定するようにしてください。
          </p><p>
            詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-online-add-node" title="23.5.7 NDB Cluster データノードのオンラインでの追加">セクション23.5.7「NDB Cluster データノードのオンラインでの追加」</a>を参照してください。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-heartbeatintervaldbdb"></a>
            <code class="literal">HeartbeatIntervalDbDb</code>
          </p><a class="indexterm" name="idm45563231303696"></a><div class="informaltable"><a name="heartbeatintervaldbdb-ndbd-table"></a><table frame="box" rules="all" summary="HeartbeatIntervalDbDb データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>milliseconds</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>5000</td>
              </tr><tr>
                <th>範囲</th>
                <td>10 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            障害の発生したノードを検出する主な方法の
            1 つは、ハートビートを使用することです。
            このパラメータは、ハートビート信号の送信回数と予想される受信回数を指定します。
            ハートビートは無効にできません。
          </p><p>
            行に 4
            つのハートビート間隔がない場合、ノードは
            dead と宣言されます。
            したがって、ハートビートメカニズムを使用して障害を検出する最大時間は、ハートビート間隔の
            5 倍です。
          </p><p>
            デフォルトのハートビート間隔は 5000 ミリ秒
            (5 秒) です。
            このパラメータを大幅に変更しないでください。また、ノード間の違いが大きくならないようにしてください。
            あるノードが 5000
            ミリ秒を使用し、それを監視しているノードが
            1000
            ミリ秒を使用している場合、明らかにノードは非常に迅速に
            dead と宣言されます。
            このパラメータはオンラインのソフトウェアアップグレード中に変更できますが、少しずつ増やしてください。
          </p><p>
            <a class="xref" href="mysql-cluster.html#mysql-cluster-network-latency-issues" title="ネットワーク通信と待機時間">ネットワーク通信と待機時間</a>
            および
            <code class="literal">ConnectCheckIntervalDelay</code>
            構成パラメータの説明も参照してください。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-heartbeatintervaldbapi"></a>
            <code class="literal">HeartbeatIntervalDbApi</code>
          </p><a class="indexterm" name="idm45563231278528"></a><div class="informaltable"><a name="heartbeatintervaldbapi-ndbd-table"></a><table frame="box" rules="all" summary="HeartbeatIntervalDbApi データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>milliseconds</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>1500</td>
              </tr><tr>
                <th>範囲</th>
                <td>100 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            各データノードは各 MySQL サーバー (SQL
            ノード)
            にハートビート信号を送信して、接続されたままであるか確認します。
            MySQL
            サーバーが時間内にハートビートを送信できなかった場合、<span class="quote">「<span class="quote">デッド</span>」</span>と宣言されます。その場合、進行中のすべてのトランザクションが完了し、リソースが解放されます。
            以前の MySQL
            インスタンスによって開始されたすべてのアクティビティーが完了するまで、SQL
            ノードは再接続できません。
            この判定に使用される 3
            ハートビートの条件は、<code class="literal">HeartbeatIntervalDbDb</code>
            で説明したものと同じです。
          </p><p>
            デフォルトの間隔は 1500 ミリ秒 (1.5 秒)
            です。
            個々のデータノードはほかのすべてのデータノードと関係なく接続中の
            MySQL
            サーバーを監視するため、この間隔は各データノードで異なることがあります。
          </p><p>
            詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-network-latency-issues" title="ネットワーク通信と待機時間">ネットワーク通信と待機時間</a>を参照してください。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-heartbeatorder"></a>
            <code class="literal">HeartbeatOrder</code>
          </p><a class="indexterm" name="idm45563231254048"></a><div class="informaltable"><a name="heartbeatorder-ndbd-table"></a><table frame="box" rules="all" summary="HeartbeatOrder データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>numeric</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>0</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 65535</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    S (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            データノードは、各データノードが直前のデータノードをモニターする循環的な方法で、相互にハートビートを送信します。
            ハートビートが特定のデータノードによって検出されなかった場合、このノードは循環の直前のデータノードを<span class="quote">「<span class="quote">デッド</span>」</span>
            (つまり、クラスタからアクセスできなくなった)
            と宣言します。
            データノードがデッドであるという判定はグローバルに行われます。つまり、データノードがデッドと宣言されると、そのノードはクラスタ内のすべてのノードからそのようにみなされます。
          </p><p>
            異なるホストに配置されたデータノード間のハートビートが
            (たとえば、非常に長いハートビート間隔や一時的な接続の問題によって)
            ほかのノードペア間のハートビートに比べて遅すぎるために、データノードがまだクラスタの一部として機能しているにもかかわらず、デッドと宣言される可能性があります。
          </p><p>
            このような状況では、データノード間のハートビートの転送順序が、特定のデータノードがデッドと宣言されるかどうかに影響している可能性があります。
            この宣言が不必要に発生すると、それがノードグループの損失を招き、さらにクラスタの障害につながる可能性があります。
          </p><p>
            次の表に示すように、2
            台のホストコンピュータ <code class="literal">host1</code>
            および <code class="literal">host2</code> で実行されている
            4 つのデータノード A、B、C、および D
            があり、これらのデータノードが 2
            つのノードグループを構成しているセットアップについて考えます。
          </p><div class="table"><a name="idm45563231230816"></a><p class="title"><b>表 23.10 2 台のホストコンピュータ host1、host2 で実行されている 4 つのデータノード A、B、C、D。各データノードは、2 つのノードグループのいずれかに属します。</b></p><div class="table-contents"><table><col style="width: 33%"><col style="width: 34%"><col style="width: 33%"><thead><tr>
                <th scope="col">ノードグループ</th>
                <th scope="col"><code class="literal">host1</code> で実行されているノード</th>
                <th scope="col"><code class="literal">host2</code> で実行されているノード</th>
              </tr></thead><tbody><tr>
                <th scope="row">ノードグループ 0:</th>
                <td>ノード A</td>
                <td>ノード B</td>
              </tr><tr>
                <th scope="row">ノードグループ 1:</th>
                <td>ノード C</td>
                <td>ノード D</td>
              </tr></tbody></table></div></div><br class="table-break"><p>
            ハートビートが A-&gt;B-&gt;C-&gt;D-&gt;A
            の順に転送されるとします。
            この場合、ホスト間のハートビートが失われると、ノード
            B がノード A をデッドと宣言し、ノード C が
            B をデッドと宣言します。
            この結果、ノードグループ 0
            が失われるため、クラスタが機能停止します。
            一方、転送の順序が A-&gt;B-&gt;D-&gt;C-&gt;A である
            (およびほかのすべての条件が前述のままである)
            場合は、ハートビートが失われると、ノート
            A および D
            がデッドと宣言されます。この場合、各ノードグループに
            1
            つずつノードが残っているため、クラスタは存続します。
          </p><p>
            <code class="literal">HeartbeatOrder</code>
            構成パラメータは、ユーザーがハートビートの転送順序を構成できるようにします。
            <code class="literal">HeartbeatOrder</code>
            のデフォルト値は 0
            です。すべてのデータノードでデフォルト値を使用できるようにすると、ハートビートの転送順序は
            <code class="literal">NDB</code> によって決定されます。
            このパラメータを使用する場合は、クラスタ内のすべてのデータノードで
            0 以外の値 (最大 65535)
            に設定する必要があります。また、この値は各データノードで一意である必要があります。これにより、ハートビートが
            <code class="literal">HeartbeatOrder</code>
            値の小さいノードから大きいノードに順に転送される
            (その後、<code class="literal">HeartbeatOrder</code>
            がもっとも大きいノードからもっとも小さいノードに転送され、循環が完結する)
            ようになります。
            値は連続している必要はありません。
            たとえば、前述のシナリオでハートビート転送順序
            A-&gt;B-&gt;D-&gt;C-&gt;A
            を強制するには、次に示すように
            <code class="literal">HeartbeatOrder</code>
            値を設定します:
          </p><div class="table"><a name="idm45563231204208"></a><p class="title"><b>表 23.11 A-&gt;B-&gt;D-&gt;C-&gt;A のハートビート遷移順序を強制する HeartbeatOrder 値。</b></p><div class="table-contents"><table><col style="width: 50%"><col style="width: 50%"><thead><tr>
                <th>ノード</th>
                <th><code class="literal">HeartbeatOrder</code> 値</th>
              </tr></thead><tbody><tr>
                <td>A</td>
                <td>10</td>
              </tr><tr>
                <td>B</td>
                <td>20</td>
              </tr><tr>
                <td>C</td>
                <td>30</td>
              </tr><tr>
                <td>D</td>
                <td>25</td>
              </tr></tbody></table></div></div><br class="table-break"><p>
            このパラメータを使用して実行中の NDB Cluster
            内のハートビート転送順序を変更するには、まずグローバル構成
            (<code class="filename">config.ini</code>)
            ファイル内のクラスタ内のデータノードごとに
            <code class="literal">HeartbeatOrder</code>
            を設定する必要があります。
            変更を有効にするには、次のいずれかを実行する必要があります。
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                クラスタ全体の完全なシャットダウンと再起動。
              </p></li><li class="listitem"><p>
                2 回連続のクラスタのローリング再起動。
                <span class="emphasis"><em>両方のローリング再起動で、すべてのノードが同じ順序で再起動される必要があります</em></span>。
              </p></li></ul></div><p>
            <code class="literal">DUMP 908</code>
            を使用すると、データノードログでこのパラメータの効果を観察できます。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-connectcheckintervaldelay"></a>
            <code class="literal">ConnectCheckIntervalDelay</code>
          </p><a class="indexterm" name="idm45563231180112"></a><div class="informaltable"><a name="connectcheckintervaldelay-ndbd-table"></a><table frame="box" rules="all" summary="ConnectCheckIntervalDelay データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>milliseconds</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>0</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            このパラメータは、データノードのいずれかがハートビートチェックに失敗したあと、最大
            <code class="literal">HeartbeatIntervalDbDb</code>
            ミリ秒の 5
            つの間隔でデータノード間の接続チェックを有効にします。
          </p><p>
            <code class="literal">ConnectCheckIntervalDelay</code>
            ミリ秒の間隔内でさらに応答に失敗したこのようなデータノードは疑わしいとみなされ、このような間隔が
            2 回続くとデッドとみなされます。
            これは、待機時間の既知の問題がある設定で役立ちます。
          </p><p>
            このパラメータのデフォルト値は 0 (無効)
            です。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-timebetweenlocalcheckpoints"></a>
            <code class="literal">TimeBetweenLocalCheckpoints</code>
          </p><a class="indexterm" name="idm45563231156864"></a><div class="informaltable"><a name="timebetweenlocalcheckpoints-ndbd-table"></a><table frame="box" rules="all" summary="TimeBetweenLocalCheckpoints データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>number of 4-byte words, as base-2 logarithm</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>20</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 31</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            このパラメータは、新しいローカルポイントを開始するまでの待機時間を指定しないという点で例外です。どちらかといえば、比較的少数の更新が行われるクラスタ内でローカルチェックポイントが実行されないようにするために使用されます。
            更新回数が多いほとんどのクラスタでは、直前のローカルチェックポイントが完了した直後に新しいローカルチェックポイントが開始される可能性があります。
          </p><p>
            前のローカルチェックポイントの開始以降に実行されたすべての書き込み操作のサイズが追加されます。
            このパラメータは、4 バイトワードの数の底
            2
            の対数として指定される点でも例外的です。したがって、デフォルト値の
            20 は 4M バイト (4 * 2<sup>20</sup>)
            の書き込み操作を意味し、21 は 8M
            バイトを意味し、最大値の 31 は 8G
            バイトの書き込み操作と同等です。
          </p><p>
            クラスタ内のすべての書き込み操作がまとめて追加されます。
            <code class="literal">TimeBetweenLocalCheckpoints</code>
            を 6
            以下に設定すると、クラスタのワークロードに関係なく、ローカルチェックポイントが一時停止せずに継続的に実行されます。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-timebetweenglobalcheckpoints"></a>
            <code class="literal">TimeBetweenGlobalCheckpoints</code>
          </p><a class="indexterm" name="idm45563231133072"></a><div class="informaltable"><a name="timebetweenglobalcheckpoints-ndbd-table"></a><table frame="box" rules="all" summary="TimeBetweenGlobalCheckpoints データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>milliseconds</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>2000</td>
              </tr><tr>
                <th>範囲</th>
                <td>20 - 32000</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            トランザクションがコミットされると、データがミラー化されているノードのメインメモリーでコミットされます。
            ただし、トランザクションログレコードはコミットの一部としてディスクにフラッシュされません。
            トランザクションを少なくとも 2
            台の自立的なホストマシン上で安全にコミットすることで、持続性に関する妥当な基準が満たされるはずだということがこの動作の根拠です。
          </p><p>
            また、最悪のケース
            (クラスタの完全なクラッシュ)
            も適切に処理されるようにすることが重要です。
            この実行を保証するために、特定の間隔以内に行われるすべてのトランザクションはグローバルチェックポイントに取り込まれます。これは、ディスクにフラッシュされたコミット済みのトランザクションとみなすことができます。
            つまり、トランザクションはコミットプロセスの一部としてグローバルチェックポイントグループに組み込まれます。
            その後、このグループのログレコードがディスクにフラッシュされると、トランザクションのグループ全体がクラスタ内のコンピュータ上のディスクに安全にコミットされます。
          </p><p>
            NDB 8.0.19
            以降では、この値を減らす「ディスクデータ」テーブルでソリッドステートディスク
            (特に NVMe を採用しているディスク)
            を使用する場合に推奨されます。
            このような場合は、<code class="literal">MaxDiskDataLatency</code>
            が適切なレベルに設定されていることも確認する必要があります。
          </p><p>
            このパラメータは、グローバルチェックポイント間の間隔を定義します。
            デフォルトは 2000 ミリ秒です。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-timebetweenglobalcheckpointstimeout"></a>
            <code class="literal">TimeBetweenGlobalCheckpointsTimeout</code>
          </p><a class="indexterm" name="idm45563231107888"></a><div class="informaltable"><a name="timebetweenglobalcheckpointstimeout-ndbd-table"></a><table frame="box" rules="all" summary="TimeBetweenGlobalCheckpointsTimeout データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>milliseconds</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>120000</td>
              </tr><tr>
                <th>範囲</th>
                <td>10 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            このパラメータは、グローバルチェックポイント間の最小タイムアウトを定義します。
            デフォルトは 120000 ミリ秒です。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-timebetweenepochs"></a>
            <code class="literal">TimeBetweenEpochs</code>
          </p><a class="indexterm" name="idm45563231088192"></a><div class="informaltable"><a name="timebetweenepochs-ndbd-table"></a><table frame="box" rules="all" summary="TimeBetweenEpochs データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>milliseconds</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>100</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 32000</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            このパラメータは、NDB Cluster
            レプリケーションの同期エポック間の間隔を定義します。
            デフォルト値は 100 ミリ秒です。
          </p><p>
            <code class="literal">TimeBetweenEpochs</code>
            は、NDB Cluster
            レプリケーションのパフォーマンスを向上させるために使用できる
            <span class="quote">「<span class="quote">micro-GCPs</span>」</span> の実装の一部です。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-timebetweenepochstimeout"></a>
            <code class="literal">TimeBetweenEpochsTimeout</code>
          </p><a class="indexterm" name="idm45563231066464"></a><div class="informaltable"><a name="timebetweenepochstimeout-ndbd-table"></a><table frame="box" rules="all" summary="TimeBetweenEpochsTimeout データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>milliseconds</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>0</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 256000</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            このパラメータは、NDB Cluster
            レプリケーションの同期エポックのタイムアウトを定義します。
            このパラメータで決定された時間内にノードがグローバルチェックポイントに参加できなかった場合、ノードはシャットダウンされます。
            デフォルト値は 0
            です。つまり、タイムアウトは無効になります。
          </p><p>
            <code class="literal">TimeBetweenEpochsTimeout</code>
            は、NDB Cluster
            レプリケーションのパフォーマンスを向上させるために使用できる
            <span class="quote">「<span class="quote">micro-GCPs</span>」</span> の実装の一部です。
          </p><p>
            GCP 保存に 1 分より長い時間がかかるか、GCP
            コミットに 10
            秒より長い時間がかかると、このパラメータの現在の値および警告がクラスタログに書き込まれます。
          </p><p>
            このパラメータを 0
            に設定すると、保存のタイムアウト、コミットのタイムアウト、またはその両方によって発生する
            GCP の停止を無効にします。
            このパラメータに指定できる最大値は 256000
            ミリ秒です。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-maxbufferedepochs"></a>
            <code class="literal">MaxBufferedEpochs</code>
          </p><a class="indexterm" name="idm45563231042480"></a><div class="informaltable"><a name="maxbufferedepochs-ndbd-table"></a><table frame="box" rules="all" summary="MaxBufferedEpochs データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>epochs</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>100</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 100000</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            サブスクライブするノードが遅延できる未処理のエポック数。
            この数を超えると、遅延するサブスクライバが切断されます。
          </p><p>
            ほとんどの通常の操作では、デフォルト値の
            100 で十分です。
            サブスクライブするノードの遅延によって切断が発生する場合、その原因は通常、プロセスまたはスレッドに関するネットワークまたはスケジューリングの問題です。
            (まれな状況ですが、<code class="literal">NDB</code>
            クライアントのバグによってこの問題が起きることもあります。)
            エポックが大きいときは、この値をデフォルトより小さく設定するのが望ましい場合もあります。
          </p><p>
            切断することで、クライアントの問題によってデータノードサービスが影響を受け、データをバッファリングするためのメモリーが不足し、最終的にシャットダウンすることはなくなります。
            代わりに、切断の結果として
            (たとえば、バイナリログのギャップイベントによって)
            クライアントが影響を受け、クライアントは強制的にプロセスを再接続または再起動します。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-maxbufferedepochbytes"></a>
            <code class="literal">MaxBufferedEpochBytes</code>
          </p><a class="indexterm" name="idm45563231019408"></a><div class="informaltable"><a name="maxbufferedepochbytes-ndbd-table"></a><table frame="box" rules="all" summary="MaxBufferedEpochBytes データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>bytes</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>26214400</td>
              </tr><tr>
                <th>範囲</th>
                <td>26214400 (0x01900000) - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            このノードがエポックをバッファリングするために割り当てるバイトの合計数。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-timebetweeninactivetransactionabortcheck"></a>
            <code class="literal">TimeBetweenInactiveTransactionAbortCheck</code>
          </p><a class="indexterm" name="idm45563230999856"></a><div class="informaltable"><a name="timebetweeninactivetransactionabortcheck-ndbd-table"></a><table frame="box" rules="all" summary="TimeBetweenInactiveTransactionAbortCheck データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>milliseconds</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>1000</td>
              </tr><tr>
                <th>範囲</th>
                <td>1000 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            タイムアウトの処理は、各トランザクションのタイマーをこのパラメータで指定された間隔ごとに
            1 回チェックして実行されます。
            したがって、このパラメータが 1000
            ミリ秒に設定されている場合、すべてのトランザクションのタイムアウトが毎秒
            1 回チェックされます。
          </p><p>
            デフォルト値は 1000 ミリ秒 (1 秒) です。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-transactioninactivetimeout"></a>
            <code class="literal">TransactionInactiveTimeout</code>
          </p><a class="indexterm" name="idm45563230979200"></a><div class="informaltable"><a name="transactioninactivetimeout-ndbd-table"></a><table frame="box" rules="all" summary="TransactionInactiveTimeout データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>milliseconds</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            このパラメータは、トランザクションが中止されるまでに、同じトランザクション内の操作間で経過が許容される最大時間を指定します。
          </p><p>
            このパラメータのデフォルトは
            <code class="literal">4G</code> です (最大も同じです)。
            トランザクションがロックを保持する期間が長すぎないようにする必要があるリアルタイムデータベースでは、このパラメータを比較的小さい値に設定するようにしてください。
            0
            に設定すると、アプリケーションはタイムアウトしません。
            単位はミリ秒です。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-transactiondeadlockdetectiontimeout"></a>
            <code class="literal">TransactionDeadlockDetectionTimeout</code>
          </p><a class="indexterm" name="idm45563230957584"></a><div class="informaltable"><a name="transactiondeadlockdetectiontimeout-ndbd-table"></a><table frame="box" rules="all" summary="TransactionDeadlockDetectionTimeout データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>milliseconds</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>1200</td>
              </tr><tr>
                <th>範囲</th>
                <td>50 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            ノードは、トランザクションを含むクエリーの実行時に、クラスタ内のほかのノードが応答するのを待機してから処理を続行します。
            このパラメータは、トランザクションがデータノード内での実行に費やすことができる時間、つまり、トランザクションに参加している各データノードがリクエストを実行するまでトランザクションコーディネータが待機する時間を設定します。
          </p><p>
            応答の失敗は、次のいずれかの理由で発生します。
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                ノードが<span class="quote">「<span class="quote">デッド</span>」</span>です
              </p></li><li class="listitem"><p>
                操作がロックキューに入りました
              </p></li><li class="listitem"><p>
                アクションの実行を要求したノードに非常に高い負荷がかかっている可能性があります。
              </p></li></ul></div><p>
            このタイムアウトパラメータは、トランザクションが中止されるまでにトランザクションコーディネータが別のノードによるクエリーの実行を待機する時間を指定するもので、ノード障害の処理とデッドロックの検出において重要です。
          </p><p>
            デフォルトのタイムアウト値は 1200 ミリ秒
            (1.2 秒) です。
          </p><p>
            このパラメータの最小は 50 ミリ秒です。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-disksyncsize"></a>
            <code class="literal">DiskSyncSize</code>
          </p><a class="indexterm" name="idm45563230931152"></a><div class="informaltable"><a name="disksyncsize-ndbd-table"></a><table frame="box" rules="all" summary="DiskSyncSize データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>bytes</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>4M</td>
              </tr><tr>
                <th>範囲</th>
                <td>32K - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            これは、ローカルチェックポイントファイルにデータをフラッシュするまでに格納される最大バイト数です。
            これは、パフォーマンスを大幅に低下させる可能性がある書き込みバッファリングを禁止するために行われます。
            このパラメータは、<code class="literal">TimeBetweenLocalCheckpoints</code>
            の代わりに使用するためのものでは<span class="emphasis"><em>ありません</em></span>。
          </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
              <code class="literal">ODirect</code>
              が有効になっている場合は、<code class="literal">DiskSyncSize</code>
              を設定する必要はありません。実際、そのような場合は、その値が無視されます。
            </p></div><p>
            デフォルト値は 4M (4 メガバイト) です。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-maxdiskwritespeed"></a>
            <code class="literal">MaxDiskWriteSpeed</code>
          </p><a class="indexterm" name="idm45563230906128"></a><div class="informaltable"><a name="maxdiskwritespeed-ndbd-table"></a><table frame="box" rules="all" summary="MaxDiskWriteSpeed データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>numeric</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>20M</td>
              </tr><tr>
                <th>範囲</th>
                <td>1M - 1024G</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    S (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            この NDB Cluster で
            (このデータノードまたはその他のデータノードによって)
            再起動が行われない場合の、ローカルチェックポイントおよびバックアップ操作によるディスクへの書き込みの最大速度
            (バイト/秒) を設定します。
          </p><p>
            このデータノードの再起動中に許可されるディスク書き込みの最大速度を設定するには、<code class="literal">MaxDiskWriteSpeedOwnRestart</code>
            を使用します。
            ほかのデータノードの再起動中に許可されるディスク書き込みの最大速度を設定するには、<code class="literal">MaxDiskWriteSpeedOtherNodeRestart</code>
            を使用します。 すべての LCP
            およびバックアップ操作によるディスク書き込みの最小速度を調整するには、<code class="literal">MinDiskWriteSpeed</code>
            を設定します。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-maxdiskwritespeedothernoderestart"></a>
            <code class="literal">MaxDiskWriteSpeedOtherNodeRestart</code>
          </p><a class="indexterm" name="idm45563230881808"></a><div class="informaltable"><a name="maxdiskwritespeedothernoderestart-ndbd-table"></a><table frame="box" rules="all" summary="MaxDiskWriteSpeedOtherNodeRestart データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>numeric</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>50M</td>
              </tr><tr>
                <th>範囲</th>
                <td>1M - 1024G</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    S (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            この NDB Cluster 内の 1
            つ以上のデータノードがこのノード以外で再起動されているときの、ローカルチェックポイントおよびバックアップ操作によるディスクへの書き込みの最大速度をバイト/秒単位で設定します。
          </p><p>
            このデータノードの再起動中に許可されるディスク書き込みの最大速度を設定するには、<code class="literal">MaxDiskWriteSpeedOwnRestart</code>
            を使用します。
            クラスタ内ではデータノードが再起動されていない場合に許可されるディスク書き込みの最大速度を設定するには、<code class="literal">MaxDiskWriteSpeed</code>
            を使用します。 すべての LCP
            およびバックアップ操作によるディスク書き込みの最小速度を調整するには、<code class="literal">MinDiskWriteSpeed</code>
            を設定します。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-maxdiskwritespeedownrestart"></a>
            <code class="literal">MaxDiskWriteSpeedOwnRestart</code>
          </p><a class="indexterm" name="idm45563230857376"></a><div class="informaltable"><a name="maxdiskwritespeedownrestart-ndbd-table"></a><table frame="box" rules="all" summary="MaxDiskWriteSpeedOwnRestart データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>numeric</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>200M</td>
              </tr><tr>
                <th>範囲</th>
                <td>1M - 1024G</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    S (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            このデータノードの再起動時の、ローカルチェックポイントおよびバックアップ操作によるディスク書き込みの最大速度
            (バイト/秒) を設定します。
          </p><p>
            ほかのデータノードの再起動中に許可されるディスク書き込みの最大速度を設定するには、<code class="literal">MaxDiskWriteSpeedOtherNodeRestart</code>
            を使用します。
            クラスタ内ではデータノードが再起動されていない場合に許可されるディスク書き込みの最大速度を設定するには、<code class="literal">MaxDiskWriteSpeed</code>
            を使用します。 すべての LCP
            およびバックアップ操作によるディスク書き込みの最小速度を調整するには、<code class="literal">MinDiskWriteSpeed</code>
            を設定します。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-mindiskwritespeed"></a>
            <code class="literal">MinDiskWriteSpeed</code>
          </p><a class="indexterm" name="idm45563230833200"></a><div class="informaltable"><a name="mindiskwritespeed-ndbd-table"></a><table frame="box" rules="all" summary="MinDiskWriteSpeed データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>numeric</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>10M</td>
              </tr><tr>
                <th>範囲</th>
                <td>1M - 1024G</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    S (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            ローカルチェックポイントおよびバックアップ操作によるディスク書き込みの最小速度
            (バイト/秒) を設定します。
          </p><p>
            さまざまな条件下で LCP
            およびバックアップに許可されるディスク書き込みの最大速度は、パラメータ
            <code class="literal">MaxDiskWriteSpeed</code>、<code class="literal">MaxDiskWriteSpeedOwnRestart</code>、および
            <code class="literal">MaxDiskWriteSpeedOtherNodeRestart</code>
            を使用して調整できます。
            詳細は、これらのパラメータの説明を参照してください。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-arbitrationtimeout"></a>
            <code class="literal">ArbitrationTimeout</code>
          </p><a class="indexterm" name="idm45563230809520"></a><div class="informaltable"><a name="arbitrationtimeout-ndbd-table"></a><table frame="box" rules="all" summary="ArbitrationTimeout データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>milliseconds</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>7500</td>
              </tr><tr>
                <th>範囲</th>
                <td>10 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            このパラメータは、データノードがアービトレーションメッセージに対するアービトレータからの応答を待機する時間を設定します。
            これを超えた場合は、ネットワークが切断されたとみなされます。
          </p><p>
            デフォルト値は 7500 ミリ秒 (7.5 秒) です。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-arbitration"></a>
            <code class="literal">Arbitration</code>
          </p><a class="indexterm" name="idm45563230789120"></a><div class="informaltable"><a name="arbitration-ndbd-table"></a><table frame="box" rules="all" summary="Arbitration データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>enumeration</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>Default</td>
              </tr><tr>
                <th>範囲</th>
                <td>Default, Disabled, WaitExternal</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            <code class="literal">Arbitration</code>
            パラメータを使用して、このパラメータに指定できる
            3
            つの値のいずれかに対応するアービトレーションスキームを選択できます。
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><b>デフォルト. </b>
                  この場合は、管理および API ノードの
                  <code class="literal">ArbitrationRank</code>
                  設定で指定されるとおりに、アービトレーションが正常に進行します。
                  これはデフォルト値です。
                </p></li><li class="listitem"><p><b>Disabled. </b>
                  <code class="filename">config.ini</code> ファイルの
                  <code class="literal">[ndbd default]</code> セクションに
                  <code class="literal">Arbitration = Disabled</code>
                  を設定すると、すべての管理および API
                  ノードで <code class="literal">ArbitrationRank</code> の 0
                  を設定した場合と同じ結果が得られます。
                  <code class="literal">Arbitration</code>
                  をこのように設定すると、<code class="literal">ArbitrationRank</code>
                  の設定はすべて無視されます。
                </p></li><li class="listitem"><p><b>WaitExternal. </b>
                  <code class="literal">Arbitration</code>
                  パラメータを使用して、クラスタが内部でアービトレーションを処理する代わりに
                  <code class="literal">ArbitrationTimeout</code>
                  で指定された時間が経過するまで外部のクラスタマネージャーアプリケーションによるアービトレーションの実行を待機する方法で、アービトレーションを構成することもできます。
                  これを行うには、<code class="filename">config.ini</code>
                  ファイルの <code class="literal">[ndbd default]</code>
                  セクションに <code class="literal">Arbitration =
                  WaitExternal</code> を設定します。
                  <code class="literal">WaitExternal</code>
                  の設定で最良の結果を得るためには、<code class="literal">ArbitrationTimeout</code>
                  を外部クラスタマネージャーがアービトレーションを実行するのに必要な間隔の
                  2 倍に設定することをお勧めします。
                </p></li></ul></div><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">重要</div><p>
              このパラメータは、クラスタ構成ファイルの
              <code class="literal">[ndbd default]</code>
              セクションでのみ使用するようにしてください。
              <code class="literal">Arbitration</code>
              を個々のデータノードで異なる値に設定すると、クラスタの動作は不特定になります。
            </p></div></li><li class="listitem"><p><a name="ndbparam-ndbd-restartsubscriberconnecttimeout"></a>
            <code class="literal">RestartSubscriberConnectTimeout</code>
          </p><a class="indexterm" name="idm45563230746368"></a><div class="informaltable"><a name="restartsubscriberconnecttimeout-ndbd-table"></a><table frame="box" rules="all" summary="RestartSubscriberConnectTimeout データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>ms</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>12000</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td></td>
              </tr></tbody></table></div><p>
            このパラメータは、サブスクライブしている
            API
            ノードの接続をデータノードが待機する時間を決定します。
            このタイムアウトに達すると、<span class="quote">「<span class="quote">「欠落」</span>」</span>
            API ノードはクラスタから切断されます。
            このタイムアウトを無効にするには、<code class="literal">RestartSubscriberConnectTimeout</code>
            を 0 に設定します。
          </p><p>
            このパラメータはミリ秒単位で指定されますが、タイムアウト自体は次に作成される秒単位に解決されます。
          </p></li></ul></div><p><a name="mysql-cluster-buffering-and-logging"></a><b>バッファリングとロギング. </b>
          上級ユーザーは、いくつかの
          <code class="literal">[ndbd]</code>
          構成パラメータを使用するとことで、ノードプロセスが使用するリソースをより細かく制御したり、必要に応じてさまざまなバッファーサイズを調整したりできます。
        </p><p>
        これらのバッファーは、ログレコードをディスクに書き込む際に、ファイルシステムに対するフロントエンドとして使用されます。
        ノードがディスクレスモードで実行されている場合は、<code class="literal">NDB</code>
        ストレージエンジンのファイルシステム抽象化レイヤーによってディスク書き込みが<span class="quote">「<span class="quote">偽装</span>」</span>されるため、ペナルティーなしでこれらのパラメータを最小値に設定できます。
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="ndbparam-ndbd-undoindexbuffer"></a>
            <code class="literal">UndoIndexBuffer</code>
          </p><a class="indexterm" name="idm45563230718672"></a><div class="informaltable"><a name="undoindexbuffer-ndbd-table"></a><table frame="box" rules="all" summary="UndoIndexBuffer データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>unsigned</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>2M</td>
              </tr><tr>
                <th>範囲</th>
                <td>1M - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            このパラメータでサイズが設定される Undo
            インデックスバッファーは、ローカルチェックポイント中に使用されます。
            <code class="literal">NDB</code>
            ストレージエンジンは、使用可能な Redo
            ログとともに、チェックポイントの一貫性に基づくリカバリスキームを使用します。
            システム全体の書き込みをブロックせずに一貫性のあるチェックポイントを作成するため、ローカルチェックポイントの実行中に
            Undo ロギングが行われます。 Undo
            ロギングは、一度に 1
            つのテーブルフラグメントに対してアクティブ化されます。
            この最適化が可能なのは、テーブルが完全にメインメモリーに格納されているためです。
          </p><p>
            Undo
            インデックスバッファーは、主キーのハッシュインデックスの更新で使用されます。
            挿入と削除では、ハッシュインデックスが再編成されます。NDB
            ストレージエンジンは、すべての物理的な変更をシステムの再起動時に取り消すことができるように、変更を
            1 つのインデックスページにマップする Undo
            ログレコードを書き込みます。
            また、ローカルチェックポイントの開始時に、各フラグメントのアクティブな挿入操作も記録します。
          </p><p>
            読み取りと更新では、ロックビットが設定され、ハッシュインデックスエントリのヘッダーが更新されます。
            これらの変更はページ書き込みアルゴリズムによって処理されるため、これらの操作に
            Undo ロギングは必要ありません。
          </p><p>
            このバッファーはデフォルトで 2M
            バイトです。 最小値は 1M
            バイトです。ほとんどのアプリケーションではこれで十分です。
            大規模なトランザクションや大規模な主キーとともに非常に大規模または多数の挿入および削除を実行するアプリケーションでは、このバッファーのサイズを増やす必要がある場合があります。
            このバッファーが小さすぎる場合、NDB
            ストレージエンジンは内部エラーコード
            677<code class="literal">「Index UNDO buffers
            overloaded」</code>を発行します。
          </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">重要</div><p>
              ローリング再起動中にこのパラメータの値を減らすのは安全ではありません。
            </p></div></li><li class="listitem"><p><a name="ndbparam-ndbd-undodatabuffer"></a>
            <code class="literal">UndoDataBuffer</code>
          </p><a class="indexterm" name="idm45563230690944"></a><div class="informaltable"><a name="undodatabuffer-ndbd-table"></a><table frame="box" rules="all" summary="UndoDataBuffer データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>unsigned</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>16M</td>
              </tr><tr>
                <th>範囲</th>
                <td>1M - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            このパラメータは、Undo
            データバッファーのサイズを設定します。Undo
            データバッファーは、Undo
            インデックスバッファーとほぼ同じ機能を実行しますが、インデックスメモリーではなくデータメモリーに関して使用されます。
            このバッファーは、フラグメントのローカルチェックポイントフェーズで挿入、削除、および更新のために使用されます。
          </p><p>
            Undo
            ログエントリは記録される操作が増えるにつれて大きくなる傾向があるため、このバッファーも対応するインデックスメモリーより大きくなります
            (デフォルト値は 16M バイトです)。
          </p><p>
            一部のアプリケーションでは、このメモリー量が不必要に大きい場合があります。
            そのような場合は、このサイズを最小の 1M
            バイトに減らすことができます。
          </p><p>
            ほとんどの場合、このバッファーのサイズを増やす必要はありません。
            そのような必要がある場合は、データベースの更新アクティビティーによって発生する負荷をディスクが実際に処理できているかどうかをチェックすることをお勧めします。
            このバッファーのサイズを増やしても、ディスクスペースの不足を解消することはできません。
          </p><p>
            このバッファーが小さすぎて過密状態になった場合、NDB
            ストレージエンジンは次の内部エラーコードを発行します:
            891 (<span class="errortext">Data UNDO buffers overloaded</span>)。
          </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">重要</div><p>
              ローリング再起動中にこのパラメータの値を減らすのは安全ではありません。
            </p></div></li><li class="listitem"><p><a name="ndbparam-ndbd-redobuffer"></a>
            <code class="literal">RedoBuffer</code>
          </p><a class="indexterm" name="idm45563230665840"></a><div class="informaltable"><a name="redobuffer-ndbd-table"></a><table frame="box" rules="all" summary="RedoBuffer データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>bytes</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>32M</td>
              </tr><tr>
                <th>範囲</th>
                <td>1M - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            更新アクティビティーも、すべて記録する必要があります。
            Redo
            ログにより、システムが再起動されるたびにこれらの更新を再現できるようになります。
            NDB のリカバリアルゴリズムは、Undo
            ログとともにデータの<span class="quote">「<span class="quote">ファジー</span>」</span>チェックポイントを使用し、Redo
            ログを適用してリストアポイントまでのすべての変更を再現します。
          </p><p>
            <code class="literal">RedoBuffer</code> は、Redo
            ログが書き込まれるバッファーのサイズを設定します。
            デフォルト値は 32M バイトです。最小値は 1M
            バイトです。
          </p><p>
            このバッファーが小さすぎる場合、<code class="literal">NDB</code>ストレージエンジンは内部エラーコード
            1221 (<span class="errortext">REDO log buffers
            overloaded</span>)を発行します。
            このため、クラスタ構成のオンライン変更の一部として
            <code class="literal">RedoBuffer</code>
            の値を減らそうとする場合は注意してください。
          </p><p>
            <span class="command"><strong>ndbmtd</strong></span> は、LDM
            スレッドごとに別個のバッファーを割り当てます
            (<code class="literal">ThreadConfig</code>
            を参照してください)。 たとえば、4 つの LDM
            スレッドがある場合、<span class="command"><strong>ndbmtd</strong></span>
            データノードには実際には 4
            つのバッファーがあり、それぞれに
            <code class="literal">RedoBuffer</code> バイト (合計で
            <code class="literal">4 * RedoBuffer</code> バイト)
            が割り当てられます。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-eventlogbuffersize"></a>
            <code class="literal">EventLogBufferSize</code>
          </p><a class="indexterm" name="idm45563230635856"></a><div class="informaltable"><a name="eventlogbuffersize-ndbd-table"></a><table frame="box" rules="all" summary="EventLogBufferSize データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>bytes</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>8192</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 64K</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    S (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            データノード内部の NDB
            ログイベントに使用される循環バッファーのサイズを制御します。
          </p></li></ul></div><p><a name="mysql-cluster-controlling-log-messages"></a><b>ログメッセージの制御. </b>
          クラスタの管理では、<code class="literal">stdout</code>
          に送信されるさまざまなイベントタイプのログメッセージ数を制御できることが非常に重要です。
          イベントカテゴリごとに、16
          個の設定可能なイベントレベル (番号 0-15)
          があります。
          特定のイベントカテゴリのイベントレポートをレベル
          15
          に設定すると、そのカテゴリのすべてのイベントレポートが
          <code class="literal">stdout</code> に送信されます。0
          に設定すると、そのカテゴリのイベントレポートは作成されません。
        </p><p>
        デフォルトでは、起動メッセージのみが
        <code class="literal">stdout</code>
        に送信され、残りのイベントレポートのレベルはデフォルトの
        0 に設定されます。
        これは、これらのメッセージが管理サーバーのクラスタログにも送信されるためです。
      </p><p>
        管理クライアントで同じようなレベルのセットを設定すると、クラスタログに記録するイベントのレベルを指定できます。
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="ndbparam-ndbd-loglevelstartup"></a>
            <code class="literal">LogLevelStartup</code>
          </p><a class="indexterm" name="idm45563230609280"></a><div class="informaltable"><a name="loglevelstartup-ndbd-table"></a><table frame="box" rules="all" summary="LogLevelStartup データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>integer</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>1</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 15</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            プロセスの起動中に生成されるイベントのレポートレベル。
          </p><p>
            デフォルトのレベルは 1 です。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-loglevelshutdown"></a>
            <code class="literal">LogLevelShutdown</code>
          </p><a class="indexterm" name="idm45563230589424"></a><div class="informaltable"><a name="loglevelshutdown-ndbd-table"></a><table frame="box" rules="all" summary="LogLevelShutdown データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>integer</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>0</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 15</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            ノードの正常なシャットダウンの一部として生成されるイベントのレポートレベル。
          </p><p>
            デフォルトのレベルは 0 です。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-loglevelstatistic"></a>
            <code class="literal">LogLevelStatistic</code>
          </p><a class="indexterm" name="idm45563230569440"></a><div class="informaltable"><a name="loglevelstatistic-ndbd-table"></a><table frame="box" rules="all" summary="LogLevelStatistic データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>integer</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>0</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 15</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            主キー読み取りの数、更新の数、挿入の数、バッファーの使用状況に関する情報などの統計イベントのレポートレベル。
          </p><p>
            デフォルトのレベルは 0 です。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-loglevelcheckpoint"></a>
            <code class="literal">LogLevelCheckpoint</code>
          </p><a class="indexterm" name="idm45563230549424"></a><div class="informaltable"><a name="loglevelcheckpoint-ndbd-table"></a><table frame="box" rules="all" summary="LogLevelCheckpoint データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>log level</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>0</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 15</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            ローカルおよびグローバルチェックポイントによって生成されるイベントのレポートレベル。
          </p><p>
            デフォルトのレベルは 0 です。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-loglevelnoderestart"></a>
            <code class="literal">LogLevelNodeRestart</code>
          </p><a class="indexterm" name="idm45563230529408"></a><div class="informaltable"><a name="loglevelnoderestart-ndbd-table"></a><table frame="box" rules="all" summary="LogLevelNodeRestart データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>integer</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>0</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 15</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            ノード再起動中に生成されるイベントのレポートレベル。
          </p><p>
            デフォルトのレベルは 0 です。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-loglevelconnection"></a>
            <code class="literal">LogLevelConnection</code>
          </p><a class="indexterm" name="idm45563230509488"></a><div class="informaltable"><a name="loglevelconnection-ndbd-table"></a><table frame="box" rules="all" summary="LogLevelConnection データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>integer</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>0</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 15</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            クラスタノード間の接続によって生成されるイベントのレポートレベル。
          </p><p>
            デフォルトのレベルは 0 です。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-loglevelerror"></a>
            <code class="literal">LogLevelError</code>
          </p><a class="indexterm" name="idm45563230489600"></a><div class="informaltable"><a name="loglevelerror-ndbd-table"></a><table frame="box" rules="all" summary="LogLevelError データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>integer</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>0</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 15</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            クラスタ全体のエラーおよび警告によって生成されるイベントのレポートレベル。
            これらのエラーは、ノードの障害の原因にはなりませんが、レポートする価値はあると考えられます。
          </p><p>
            デフォルトのレベルは 0 です。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-loglevelcongestion"></a>
            <code class="literal">LogLevelCongestion</code>
          </p><a class="indexterm" name="idm45563230469312"></a><div class="informaltable"><a name="loglevelcongestion-ndbd-table"></a><table frame="box" rules="all" summary="LogLevelCongestion データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>level</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>0</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 15</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            輻輳によって生成されるイベントのレポートレベル。
            これらのエラーは、ノードの障害の原因にはなりませんが、レポートする価値はあると考えられます。
          </p><p>
            デフォルトのレベルは 0 です。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-loglevelinfo"></a>
            <code class="literal">LogLevelInfo</code>
          </p><a class="indexterm" name="idm45563230449104"></a><div class="informaltable"><a name="loglevelinfo-ndbd-table"></a><table frame="box" rules="all" summary="LogLevelInfo データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>integer</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>0</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 15</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            クラスタの一般的な状態に関する情報として生成されるイベントのレポートレベル。
          </p><p>
            デフォルトのレベルは 0 です。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-memreportfrequency"></a>
            <code class="literal">MemReportFrequency</code>
          </p><a class="indexterm" name="idm45563230429152"></a><div class="informaltable"><a name="memreportfrequency-ndbd-table"></a><table frame="box" rules="all" summary="MemReportFrequency データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>unsigned</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>0</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            このパラメータは、データノードのメモリー使用状況レポートをクラスタログに記録する頻度を制御します。これは、レポート間の秒数を表す整数値です。
          </p><p>
            各データノードのデータメモリーとインデックスメモリーの使用量は、<code class="filename">config.ini</code>
            ファイルに設定されている
            <code class="literal">DataMemory</code>
            のパーセンテージと 32 KB
            ページの両方として記録されます。
            たとえば、<code class="literal">DataMemory</code>
            が 100M
            バイトであり、特定のデータノードがデータメモリーのストレージとして
            50M
            バイトを使用している場合、クラスタログの対応する行はこのようになります。
          </p><pre class="programlisting">2006-12-24 01:18:16 [MgmSrvr] INFO -- Node 2: Data usage is 50%(1280 32K pages of total 2560)
</pre><p>
            <code class="literal">MemReportFrequency</code>
            は必須のパラメータではありません。
            使用する場合は、<code class="filename">config.ini</code> の
            <code class="literal">[ndbd default]</code>
            セクションですべてのクラスタデータノード用に設定することも、構成ファイルの対応する
            <code class="literal">[ndbd]</code>
            セクションで個々のデータノード用に設定またはオーバーライドすることもできます。
            最小値 (デフォルト値も同じ) は 0
            です。この場合は、<a class="xref" href="mysql-cluster.html#mysql-cluster-log-events" title="23.5.3.2 NDB Cluster ログイベント">セクション23.5.3.2「NDB Cluster ログイベント」</a>の統計イベントの説明で指摘したように、メモリー使用量が特定の割合
            (80%、90%、および 100%)
            に達したときにのみ、メモリーのレポートが記録されます。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-startupstatusreportfrequency"></a>
            <code class="literal">StartupStatusReportFrequency</code>
          </p><a class="indexterm" name="idm45563230398560"></a><div class="informaltable"><a name="startupstatusreportfrequency-ndbd-table"></a><table frame="box" rules="all" summary="StartupStatusReportFrequency データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>seconds</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>0</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            <code class="option">--initial</code>
            を指定してデータノードを起動すると、起動フェーズ
            4
            (<a class="xref" href="mysql-cluster.html#mysql-cluster-start-phases" title="23.5.4 NDB Cluster 起動フェーズのサマリー">セクション23.5.4「NDB Cluster 起動フェーズのサマリー」</a>を参照してください)
            で Redo ログファイルが初期化されます。
            <code class="literal">NoOfFragmentLogFiles</code>、<code class="literal">FragmentLogFileSize</code>、またはその両方に非常に大きな値を設定すると、この初期化に長い時間がかかることがあります。<code class="literal">StartupStatusReportFrequency</code>
            構成パラメータを使用して、このプロセスの進行に関するレポートを定期的に記録するよう強制できます。
            この場合、ここに示すように、初期化されたファイルの数とスペースの量に関する進行状況がクラスタログにレポートされます。
          </p><pre class="programlisting">2009-06-20 16:39:23 [MgmSrvr] INFO -- Node 1: Local redo log file initialization status:
#Total files: 80, Completed: 60
#Total MBytes: 20480, Completed: 15557
2009-06-20 16:39:23 [MgmSrvr] INFO -- Node 2: Local redo log file initialization status:
#Total files: 80, Completed: 60
#Total MBytes: 20480, Completed: 15570
</pre><p>
            これらのレポートは、起動フェーズ 4 で
            <code class="literal">StartupStatusReportFrequency</code>
            秒ごとに記録されます。
            <code class="literal">StartupStatusReportFrequency</code>
            が 0 (デフォルト) の場合は、Redo
            ログファイルの初期化プロセスの開始時と完了時にのみ、レポートがクラスタログに書き込まれます。
          </p></li></ul></div><h5><a name="mysql-cluster-data-node-debugging-parameters"></a>データノードのデバッグパラメータ</h5><p>
        次のパラメータは、データノードのテストまたはデバッグ中に使用することを目的としており、本番では使用しません。
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="ndbparam-ndbd-dicttrace"></a>
            <code class="literal">DictTrace</code>
          </p><a class="indexterm" name="idm45563230367024"></a><div class="informaltable"><a name="dicttrace-ndbd-table"></a><table frame="box" rules="all" summary="DictTrace データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>bytes</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>undefined</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 100</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            <code class="literal">DictTrace</code>
            を使用してテーブルを作成および削除することで、生成されたイベントのトレースをロギングできます。
            このパラメータは、NDB
            のカーネルコードをデバッグする場合にのみ役立ちます。
            <code class="literal">DictTrace</code>
            は整数値を取ります。デフォルトは 0
            で、ロギングは実行されません。1
            はトレースロギングを有効にし、2 は追加の
            <code class="literal">DBDICT</code>
            デバッグ出力のロギングを有効にします。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-watchdogimmediatekill"></a>
            <code class="literal">WatchdogImmediateKill</code>
          </p><a class="indexterm" name="idm45563230344240"></a><div class="informaltable"><a name="watchdogimmediatekill-ndbd-table"></a><table frame="box" rules="all" summary="WatchDogImmediateKill データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>boolean</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>false</td>
              </tr><tr>
                <th>範囲</th>
                <td>true, false</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td></td>
              </tr></tbody></table></div><p>
            <code class="literal">WatchdogImmediateKill</code>
            データノード構成パラメータを有効にすると、ウォッチドッグの問題が発生するたびにスレッドがただちに強制終了されるようにできます。
            このパラメータは、デバッグまたはトラブルシューティング時にのみ使用し、実行が中止された瞬間の発生を正確にレポートするトレースファイルを取得します。
          </p></li></ul></div><p><a name="mysql-cluster-backup-parameters"></a><b>バックアップパラメータ. </b>
          このセクションで説明する <code class="literal">[ndbd]</code>
          パラメータは、オンラインバックアップの実行用に確保されるメモリーバッファーを定義します。
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="ndbparam-ndbd-backupdatabuffersize"></a>
            <code class="literal">BackupDataBufferSize</code>
          </p><a class="indexterm" name="idm45563230320800"></a><div class="informaltable"><a name="backupdatabuffersize-ndbd-table"></a><table frame="box" rules="all" summary="BackupDataBufferSize データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>bytes</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>16M</td>
              </tr><tr>
                <th>範囲</th>
                <td>512K - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th>非推奨</th>
                <td>Yes (in NDB 7.6)</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            バックアップの作成では、データをディスクに転送するために使用される
            2 つのバッファーがあります。
            バックアップデータバッファーは、ノードのテーブルをスキャンして記録されるデータを書き込むために使用されます。
            このバッファーへの書き込みが
            <code class="literal">BackupWriteSize</code>
            で指定されたレベルに達すると、ページがディスクに転送されます。
            バックアッププロセスでは、データをディスクにフラッシュしながら、スペースがなくなるまでこのバッファーに書き込み続けることができます。
            これが発生すると、バックアッププロセスでスキャンを一時停止し、ディスク書き込みがある程度完了してメモリーが解放され、スキャンを続行できるようになるまで待機します。
          </p><p>
            このパラメータのデフォルト値は 16M
            バイトです。 最小値は 512K です。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-backupdiskwritespeedpct"></a>
            <code class="literal">BackupDiskWriteSpeedPct</code>
          </p><a class="indexterm" name="idm45563230296512"></a><div class="informaltable"><a name="backupdiskwritespeedpct-ndbd-table"></a><table frame="box" rules="all" summary="BackupDiskWriteSpeedPct データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>percent</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>50</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 90</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            通常の操作中、データノードはローカルチェックポイントおよびバックアップに使用されるディスク書き込み速度を最大化しようとしますが、<code class="literal">MinDiskWriteSpeed</code>
            および
            <code class="literal">MaxDiskWriteSpeed</code>
            によって設定された範囲内に残ります。
            ディスク書き込みスロットルにより、各 LDM
            スレッドに合計予算の均等なシェアが与えられます。
            これにより、ディスク I/O
            予算を超えずにパラレル LCP
            を実行できます。 バックアップは 1 つの LDM
            スレッドによってのみ実行されるため、事実上、これによって予算の停止が発生し、バックアップ完了時間が長くなります。また、バックアップログバッファの充填率が達成可能な書込み率よりも高い場合に、変更率が十分に高くなってバックアップを完了できない場合です。
          </p><p>
            この問題に対処するには、LCP の LDM
            スレッド間で残りの予算を共有する前に予約されているノード最大書込みレート予算の割合として解釈される、0-90
            (含む) の範囲の値をとる
            <code class="literal">BackupDiskWriteSpeedPct</code>
            構成パラメータを使用します。
            バックアップを実行している LDM
            スレッドは、バックアップの書き込みレート予算全体と、ローカルチェックポイントの書き込みレート予算の
            (削減された) シェアを受け取ります。
          </p><p>
            このパラメータのデフォルト値は 50 (50%
            として解釈) です。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-backuplogbuffersize"></a>
            <code class="literal">BackupLogBufferSize</code>
          </p><a class="indexterm" name="idm45563230270400"></a><div class="informaltable"><a name="backuplogbuffersize-ndbd-table"></a><table frame="box" rules="all" summary="BackupLogBufferSize データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>bytes</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>16M</td>
              </tr><tr>
                <th>範囲</th>
                <td>2M - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            バックアップログバッファーはバックアップデータバッファーと同じような役割を果たしますが、バックアップの実行中に行われたテーブル書き込みのログを生成するために使用されます。
            これらのページの書き込みにはバックアップデータバッファーと同じ原則が適用されますが、バックアップログバッファーのスペースがなくなると、バックアップは失敗します。
            そのため、バックアップログバッファーのサイズは、バックアップ実行中の書き込みアクティビティーによって発生する負荷を処理するのに十分な大きさである必要があります。
            <a class="xref" href="mysql-cluster.html#mysql-cluster-backup-configuration" title="23.5.8.3 NDB Cluster バックアップの構成">セクション23.5.8.3「NDB Cluster バックアップの構成」</a>を参照してください。
          </p><p>
            ほとんどのアプリケーションでは、このパラメータのデフォルト値で十分です。
            実際、バックアップログバッファーがいっぱいになった場合より、ディスク書き込みの速度が不十分な場合の方が、バックアップが失敗する可能性は高くなります。
            ディスクサブシステムがアプリケーションから発生する書き込み負荷に合わせて構成されていない場合は、クラスタが必要な操作を実行できない可能性が高くなります。
          </p><p>
            ディスクやネットワーク接続よりもプロセッサがボトルネックになるような方法でクラスタノードを構成することをお勧めします。
          </p><p>
            このパラメータのデフォルト値は 16M
            バイトです。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-backupmemory"></a>
            <code class="literal">BackupMemory</code>
          </p><a class="indexterm" name="idm45563230246432"></a><div class="informaltable"><a name="backupmemory-ndbd-table"></a><table frame="box" rules="all" summary="BackupMemory データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>bytes</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>32M</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th>非推奨</th>
                <td>Yes (in NDB 7.4)</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            このパラメータは非推奨であり、NDB Cluster
            の将来のバージョンで削除される可能性があります。
            設定はすべて無視されます。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-backupreportfrequency"></a>
            <code class="literal">BackupReportFrequency</code>
          </p><a class="indexterm" name="idm45563230224656"></a><div class="informaltable"><a name="backupreportfrequency-ndbd-table"></a><table frame="box" rules="all" summary="BackupReportFrequency データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>seconds</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>0</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            このパラメータは、バックアップ中に管理クライアントでバックアップステータスレポートを発行する頻度と、そのようなレポートをクラスタログに書き込む頻度を制御します
            (クラスタイベントロギングで許可するように構成されている場合。<a class="xref" href="mysql-cluster.html#mysql-cluster-logging-and-checkpointing" title="ロギングとチェックポイント">ロギングとチェックポイント</a>を参照してください)。
            <code class="literal">BackupReportFrequency</code>
            は、バックアップステータスレポート間の時間
            (秒単位) を表します。
          </p><p>
            デフォルト値は 0 です。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-backupwritesize"></a>
            <code class="literal">BackupWriteSize</code>
          </p><a class="indexterm" name="idm45563230202208"></a><div class="informaltable"><a name="backupwritesize-ndbd-table"></a><table frame="box" rules="all" summary="BackupWriteSize データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>bytes</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>256K</td>
              </tr><tr>
                <th>範囲</th>
                <td>32K - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th>非推奨</th>
                <td>Yes (in NDB 7.6)</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            このパラメータは、バックアップログおよびバックアップデータバッファーによってディスクに書き込まれるメッセージのデフォルトサイズを指定します。
          </p><p>
            このパラメータのデフォルト値は 256K
            バイトです。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-backupmaxwritesize"></a>
            <code class="literal">BackupMaxWriteSize</code>
          </p><a class="indexterm" name="idm45563230179776"></a><div class="informaltable"><a name="backupmaxwritesize-ndbd-table"></a><table frame="box" rules="all" summary="BackupMaxWriteSize データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>bytes</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>1M</td>
              </tr><tr>
                <th>範囲</th>
                <td>256K - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th>非推奨</th>
                <td>Yes (in NDB 7.6)</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            このパラメータは、バックアップログおよびバックアップデータバッファーによってディスクに書き込まれるメッセージの最大サイズを指定します。
          </p><p>
            このパラメータのデフォルト値は 1M
            バイトです。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-compressedbackup"></a>
            <code class="literal">CompressedBackup</code>
          </p><a class="indexterm" name="idm45563230157392"></a><div class="informaltable"><a name="compressedbackup-ndbd-table"></a><table frame="box" rules="all" summary="CompressedBackup データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>boolean</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>false</td>
              </tr><tr>
                <th>範囲</th>
                <td>true, false</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            このパラメータを有効にすると、バックアップファイルが圧縮されます。
            使用される圧縮は <span class="command"><strong>gzip --fast</strong></span>
            と同等であり、データノードで非圧縮バックアップファイルの格納に必要なスペースの
            50% 以上を節約できます。
            圧縮バックアップは、個々のデータノードまたは
            (<code class="filename">config.ini</code> ファイルの
            <code class="literal">[ndbd default]</code>
            セクションにこのパラメータを設定することで)
            すべてのデータノードで有効化できます。
          </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">重要</div><p>
              圧縮バックアップを、この機能をサポートしない
              MySQL
              バージョンを実行するクラスタにリストアすることはできません。
            </p></div><p>
            デフォルト値は <code class="literal">0</code> (無効)
            です。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-requireencryptedbackup"></a>
            <code class="literal">RequireEncryptedBackup</code>
          </p><a class="indexterm" name="idm45563230132400"></a><div class="informaltable"><a name="requireencryptedbackup-ndbd-table"></a><table frame="box" rules="all" summary="RequireEncryptedBackup データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.22</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>integer</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>0</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 1</td>
              </tr><tr>
                <th>追加</th>
                <td>NDB 8.0.22</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            1
            に設定した場合、バックアップを暗号化する必要があります。
            このパラメータはデータノードごとに個別に設定できますが、<code class="filename">config.ini</code>
            グローバル構成ファイルの<code class="literal">[ndbd
            default]</code>セクションで設定することをお勧めします。
            暗号化バックアップの実行の詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-backup-using-management-client" title="23.5.8.2 NDB Cluster 管理クライアントを使用したバックアップの作成">セクション23.5.8.2「NDB Cluster 管理クライアントを使用したバックアップの作成」</a>
            を参照してください。
          </p><p>
            NDB 8.0.22 に追加されました。
          </p></li></ul></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
          バックアップファイルの場所は、<code class="literal">BackupDataDir</code>
          データノード構成パラメータによって決まります。
        </p></div><p><b>追加要件. </b>
          これらのパラメータを指定するときは、次の関係が有効である必要があります。
          そうしないと、データノードを起動できません。
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">BackupDataBufferSize &gt;= BackupWriteSize + 188K
            バイト</code>
          </p></li><li class="listitem"><p>
            <code class="literal">BackupLogBufferSize &gt;= BackupWriteSize + 16K
            バイト</code>
          </p></li><li class="listitem"><p>
            <code class="literal">BackupMaxWriteSize &gt;= BackupWriteSize</code>
          </p></li></ul></div><h5><a name="mysql-cluster-realtime-performance-parameters"></a>NDB Cluster のリアルタイムパフォーマンスパラメータ</h5><p>
        このセクションで説明する <code class="literal">[ndbd]</code>
        パラメータは、マルチプロセッサのデータノードホスト上の特定の
        CPU
        に対するスレッドのスケジューリングとロックで使用されます。
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
          これらのパラメータを使用するには、システムの
          root
          としてデータノードプロセスを実行する必要があります。
        </p></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="ndbparam-ndbd-buildindexthreads"></a>
            <code class="literal">BuildIndexThreads</code>
          </p><a class="indexterm" name="idm45563230094272"></a><div class="informaltable"><a name="buildindexthreads-ndbd-table"></a><table frame="box" rules="all" summary="BuildIndexThreads データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>numeric</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>128</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 128</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td></td>
              </tr></tbody></table></div><p>
            このパラメータは、システムまたはノードの起動中に順序付けされたインデックスの再構築時、および
            <span class="command"><strong>ndb_restore</strong></span>
            <code class="option">--rebuild-indexes</code>
            の実行時に作成するスレッドの数を指定します。
            これは、データノードごとにテーブルに複数のフラグメントがある場合
            (たとえば、<code class="literal">COMMENT="NDB_TABLE=PARTITION_BALANCE=FOR_RA_BY_LDM_X_2"</code>が
            <code class="literal">CREATE TABLE</code>
            とともに使用されている場合)
            にのみサポートされます。
          </p><p>
            このパラメータを 0 (デフォルト)
            に設定すると、順序付けられたインデックスのマルチスレッド作成が無効になります。
          </p><p>
            このパラメータは、<span class="command"><strong>ndbd</strong></span> または
            <span class="command"><strong>ndbmtd</strong></span>
            を使用するときにサポートされます。
          </p><p>
            <code class="literal">TwoPassInitialNodeRestartCopy</code>
            データノード構成パラメータを
            <code class="literal">TRUE</code>
            に設定することで、データノードの初期再起動時にマルチスレッドビルドを有効にできます。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-lockexecutethreadtocpu"></a>
            <code class="literal">LockExecuteThreadToCPU</code>
          </p><a class="indexterm" name="idm45563230065936"></a><div class="informaltable"><a name="lockexecutethreadtocpu-ndbd-table"></a><table frame="box" rules="all" summary="LockExecuteThreadToCPU データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>set of CPU IDs</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>0</td>
              </tr><tr>
                <th>範囲</th>
                <td>...</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            <span class="command"><strong>ndbd</strong></span>
            で使用する場合、このパラメータ
            (現在は文字列) は
            <code class="literal">NDBCLUSTER</code>
            の実行スレッドを処理するために割り当てられる
            CPU の ID を指定します。 <span class="command"><strong>ndbmtd</strong></span>
            で使用する場合、このパラメータの値は実行スレッドを処理するために割り当てられる
            CPU ID のカンマ区切りリストです。
            リスト内の各 CPU ID は、0-65535 の
            (これらを含む) 範囲の整数にします。
          </p><p>
            指定する ID
            の数は、<code class="literal">MaxNoOfExecutionThreads</code>
            によって指定される実行スレッドの数と一致するようにしてください。
            ただし、このパラメータを使用したときに、特定の順序でスレッドが
            CPU に割り当てられる保証はありません。
            <code class="literal">ThreadConfig</code>
            を使用すると、このようなより細かい制御が可能になります。
          </p><p>
            <code class="literal">LockExecuteThreadToCPU</code>
            にデフォルト値はありません。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-lockmaintthreadstocpu"></a>
            <code class="literal">LockMaintThreadsToCPU</code>
          </p><a class="indexterm" name="idm45563230038560"></a><div class="informaltable"><a name="lockmaintthreadstocpu-ndbd-table"></a><table frame="box" rules="all" summary="LockMaintThreadsToCPU データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>CPU ID</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>0</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 64K</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            このパラメータは、<code class="literal">NDBCLUSTER</code>
            の管理スレッドを処理するために割り当てられる
            CPU の ID を指定します。
          </p><p>
            このパラメータの値は、0-65535 の
            (これらを含む) 範囲の整数です。
            <span class="emphasis"><em>デフォルト値はありません</em></span>。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-numa"></a>
            <code class="literal">Numa</code>
          </p><a class="indexterm" name="idm45563230017024"></a><a class="indexterm" name="idm45563230015680"></a><div class="informaltable"><a name="numa-ndbd-table"></a><table frame="box" rules="all" summary="Numa データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>numeric</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>1</td>
              </tr><tr>
                <th>範囲</th>
                <td>...</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            このパラメータは、Non-Uniform Memory Access (NUMA)
            がオペレーティングシステムまたはデータノードプロセスのどちらによって制御されるかを決定します
            (データノードで <span class="command"><strong>ndbd</strong></span> と
            <span class="command"><strong>ndbmtd</strong></span> のどちらを使用するか)。
            デフォルトでは、<code class="literal">NDB</code>
            は、ホストオペレーティングシステムが NUMA
            サポートを提供する任意のデータノードでインターリーブ
            NUMA
            メモリー割当てポリシーを使用しようとします。
          </p><p>
            <code class="literal">Numa = 0</code>
            を設定することは、datanode
            プロセス自体がメモリー割当てのポリシーを設定しようとせず、この動作をオペレーティングシステムによって決定できることを意味します。これは、別の
            <span class="command"><strong>numactl</strong></span>
            ツールによってさらにガイドされる場合があります。
            つまり、<code class="literal">Numa = 0</code>
            ではシステムのデフォルト動作が生成されますが、これは
            <span class="command"><strong>numactl</strong></span>
            でカスタマイズできます。 多くの Linux
            システムでは、システムのデフォルトの動作は、ソケットローカルメモリーを割当て時に任意のプロセスに割り当てることです。
            これは、<span class="command"><strong>ndbmtd</strong></span>
            の使用時に問題になる可能性があります。これは、特にメインメモリー内のページをロックするときに、<span class="command"><strong>nbdmtd</strong></span>
            が起動時にすべてのメモリーを割り当てるため、不均衡になり、ソケットごとに異なるアクセス速度が与えられるためです。
          </p><p>
            <code class="literal">Numa = 1</code>
            を設定することは、データノードプロセスが
            <code class="literal">libnuma</code>
            を使用してインターリーブされたメモリー割り当てを要求することを意味します。
            (これは、<span class="command"><strong>numactl</strong></span>
            を使用して、オペレーティングシステムレベルで手動で実行することもできます。)
            インターリーブ割り当てを有効に使用すると、データノードプロセスは不均一なメモリーアクセスを無視するように指示されますが、高速なローカルメモリーを利用しようとすることはありません。代わりに、データノードプロセスは、低速なリモートメモリーによる不均衡を回避しようとします。
            インターリーブ割当てが望ましくない場合は、オペレーティングシステムレベルで目的の動作を決定できるように、<code class="literal">Numa</code>
            を 0 に設定します。
          </p><p>
            <code class="literal">Numa</code>
            構成パラメータは、<code class="filename">libnuma.so</code>
            が使用可能な Linux
            システムでのみサポートされます。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-realtimescheduler"></a>
            <code class="literal">RealtimeScheduler</code>
          </p><a class="indexterm" name="idm45563229978304"></a><div class="informaltable"><a name="realtimescheduler-ndbd-table"></a><table frame="box" rules="all" summary="RealtimeScheduler データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>boolean</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>false</td>
              </tr><tr>
                <th>範囲</th>
                <td>true, false</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            このパラメータを 1
            に設定すると、データノードスレッドのリアルタイムスケジューリングが有効になります。
          </p><p>
            デフォルトは 0 (スケジューリングが無効)
            です。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-schedulerexecutiontimer"></a>
            <code class="literal">SchedulerExecutionTimer</code>
          </p><a class="indexterm" name="idm45563229958112"></a><div class="informaltable"><a name="schedulerexecutiontimer-ndbd-table"></a><table frame="box" rules="all" summary="SchedulerExecutionTimer データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>µs</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>50</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 11000</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            このパラメータは、スレッドがスケジューラで実行されてから送信されるまでの時間
            (ミリ秒) を指定します。 これを 0
            に設定すると、応答時間が最小化されます。スループットを向上させるため、この値を増やすことができますが、その代償として応答時間は長くなります。
          </p><p>
            デフォルトは 50
            マイクロ秒です。弊社のテストでは、これによって高負荷のケースで実質的に要求を遅延させずにスループットが若干向上することがわかっています。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-schedulerresponsiveness"></a>
            <code class="literal">SchedulerResponsiveness</code>
          </p><a class="indexterm" name="idm45563229937360"></a><div class="informaltable"><a name="schedulerresponsiveness-ndbd-table"></a><table frame="box" rules="all" summary="SchedulerResponsiveness データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>integer</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>5</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 10</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td></td>
              </tr></tbody></table></div><p>
            速度とスループットのバランスを
            <code class="literal">NDB</code>
            スケジューラで設定します。
            このパラメータは、値が 0-10
            の範囲の整数を取ります。デフォルトは 5
            です。
            値を大きくすると、スループットと比較してレスポンス時間が向上します。
            値を小さくするとスループットが向上しますが、レスポンス時間は長くなります。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-schedulerspintimer"></a>
            <code class="literal">SchedulerSpinTimer</code>
          </p><a class="indexterm" name="idm45563229917040"></a><div class="informaltable"><a name="schedulerspintimer-ndbd-table"></a><table frame="box" rules="all" summary="SchedulerSpinTimer データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>µs</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>0</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 500</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            このパラメータは、スレッドがスケジューラで実行されてからスリープ状態になるまでの時間
            (ミリ秒) を指定します。
          </p><p>
            NDB 8.0.20
            以降では、<code class="literal">SpinMethod</code>
            が設定されている場合、このパラメータの設定は無視されます。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-spinmethod"></a>
            <code class="literal">SpinMethod</code>
          </p><a class="indexterm" name="idm45563229895760"></a><a class="indexterm" name="idm45563229894416"></a><a class="indexterm" name="idm45563229893072"></a><div class="informaltable"><a name="spinmethod-ndbd-table"></a><table frame="box" rules="all" summary="SpinMethod データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.20</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>enumeration</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>StaticSpinning</td>
              </tr><tr>
                <th>範囲</th>
                <td>CostBasedSpinning, LatencyOptimisedSpinning, DatabaseMachineSpinning,
                  StaticSpinning</td>
              </tr><tr>
                <th>追加</th>
                <td>NDB 8.0.20</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            このパラメータは、次のリストに示すように、スピンパラメータ値に事前設定された
            4
            つの値を使用して、データノード上の適応スピンを制御する単純なインタフェースを提供します:
          </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
                <code class="literal">StaticSpinning</code> (default) :
                <code class="literal">EnableAdaptiveSpinning</code> を
                <code class="literal">false</code>
                に、<code class="literal">SchedulerSpinTimer</code>
                を 0 に設定します。
                (この場合、<code class="literal">SetAllowedSpinOverhead</code>
                は関係ありません。)
              </p></li><li class="listitem"><p>
                <code class="literal">CostBasedSpinning</code> :
                <code class="literal">EnableAdaptiveSpinning</code> を
                <code class="literal">true</code>、<code class="literal">SchedulerSpinTimer</code>
                を 100、<code class="literal">SetAllowedSpinOverhead</code> を
                200 に設定します。
              </p></li><li class="listitem"><p>
                <code class="literal">LatencyOptimisedSpinning</code> :
                <code class="literal">EnableAdaptiveSpinning</code> を
                <code class="literal">true</code>、<code class="literal">SchedulerSpinTimer</code>
                を 200、<code class="literal">SetAllowedSpinOverhead</code> を
                1000 に設定します。
              </p></li><li class="listitem"><p>
                <code class="literal">DatabaseMachineSpinning</code> :
                <code class="literal">EnableAdaptiveSpinning</code> を
                <code class="literal">true</code>、<code class="literal">SchedulerSpinTimer</code>
                を 500、<code class="literal">SetAllowedSpinOverhead</code> を
                10000 に設定します。
                これは、スレッドが独自の CPU
                を所有する場合に使用することを目的としています。
              </p></li></ol></div><p>
            次のリストに、<code class="literal">SpinMethod</code>
            によって変更されるスピンパラメータを示します:
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <code class="literal">SchedulerSpinTimer</code>
                :
                これは、その名前のデータノード構成パラメータと同じです。
                <code class="literal">SpinMethod</code>
                によってこのパラメータに適用された設定は、<code class="filename">config.ini</code>
                ファイルに設定された値をオーバーライドします。
              </p></li><li class="listitem"><p>
                <code class="literal">EnableAdaptiveSpinning</code>:
                適応スピンを有効または無効にします。
                これを無効にすると、CPU
                リソースのチェックを行わずにスピンが実行されます。
                このパラメータはクラスタ構成ファイルで直接設定することはできず、ほとんどの状況では有効にする必要はありませんが、<code class="literal">DUMP
                104004 1</code>
                を使用して直接有効にするか、<span class="command"><strong>ndb_mgm</strong></span>
                管理クライアントで
                <code class="literal">DUMP 104004 0</code>
                を使用して無効にできます。
              </p></li><li class="listitem"><p>
                <code class="literal">SetAllowedSpinOverhead</code>:
                待機時間を取得できる CPU
                時間を設定します。
                このパラメータは、<code class="filename">config.ini</code>
                ファイルで直接設定できません。
                ほとんどの場合、SpinMethod
                によって適用される設定は十分ですが、直接変更する必要がある場合は、<code class="literal">DUMP
                104002 <em class="replaceable"><code>overhead</code></em></code>
                を使用して変更できます。ここで、<em class="replaceable"><code>overhead</code></em>
                は 0 から 10000
                の範囲の値です。詳細は、示された
                <code class="literal">DUMP</code>
                コマンドの説明を参照してください。
              </p></li></ul></div><p>
            PowerPC や一部の SPARC
            プラットフォームなど、使用可能なスピン命令がないプラットフォームでは、スピン時間はすべての状況で
            0 に設定され、<code class="literal">StaticSpinning</code>
            以外の <code class="literal">SpinMethod</code>
            の値は無視されます。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-twopassinitialnoderestartcopy"></a>
            <code class="literal">TwoPassInitialNodeRestartCopy</code>
          </p><a class="indexterm" name="idm45563229831056"></a><div class="informaltable"><a name="twopassinitialnoderestartcopy-ndbd-table"></a><table frame="box" rules="all" summary="TwoPassInitialNodeRestartCopy データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>boolean</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>true</td>
              </tr><tr>
                <th>範囲</th>
                <td>true, false</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            順序付けされたインデックスのマルチスレッド構築は、この構成パラメータを
            <code class="literal">true</code> (デフォルト値)
            に設定することで、データノードの初期再起動のために有効にできます。これにより、ノードの初期再起動時にデータの
            2 パスコピーが可能になります。
          </p><p>
            同時に
            <code class="literal">BuildIndexThreads</code>
            を 0 以外の値に設定する必要があります。
          </p></li></ul></div><p><a name="mysql-cluster-ndbd-definition-ndbmtd-parameters"></a><b>マルチスレッドの構成パラメータ (ndbmtd). </b>
          <span class="command"><strong>ndbmtd</strong></span>
          は、デフォルトではシングルスレッドプロセスとして動作するため、2
          つの方法のいずれかを使用して、複数のスレッドを使用するように構成する必要があります。どちらの場合も、<code class="filename">config.ini</code>
          ファイルに構成パラメータを設定する必要があります。
          1
          つ目の方法では、<code class="literal">MaxNoOfExecutionThreads</code>
          構成パラメータに適切な値を設定します。
          別の方法として、<code class="literal">ThreadConfig</code>
          を使用して <span class="command"><strong>ndbmtd</strong></span>
          マルチスレッドのより複雑なルールを設定できます。
          次のいくつかの段落では、これらのパラメータおよびマルチスレッドデータノードでのそれらの使用に関する情報を提供します。
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
          データノードで並列性を使用したバックアップでは、バックアップを取得する前に、クラスタ内のすべてのデータノードで複数の
          LDM が使用されている必要があります。
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-backup-parallel-data-nodes" title="23.5.8.5 並列データノードを使用した NDB バックアップの作成">セクション23.5.8.5「並列データノードを使用した NDB バックアップの作成」</a>
          および
          <a class="xref" href="mysql-cluster.html#ndb-restore-parallel-data-node-backup" title="23.4.23.3 パラレルで作成されたバックアップからのリストア">セクション23.4.23.3「パラレルで作成されたバックアップからのリストア」</a>
          を参照してください。
        </p></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="ndbparam-ndbmtd-automaticthreadconfig"></a>
            <code class="literal">AutomaticThreadConfig</code>
          </p><a class="indexterm" name="idm45563229797840"></a><div class="informaltable"><a name="automaticthreadconfig-ndbmtd-table"></a><table frame="box" rules="all" summary="AutomaticThreadConfig マルチスレッドデータノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.23</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>boolean</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>false</td>
              </tr><tr>
                <th>範囲</th>
                <td>true, false</td>
              </tr><tr>
                <th>追加</th>
                <td>NDB 8.0.23</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    IS (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            1
            に設定すると、<code class="literal">taskset</code>、<code class="literal">numactl</code>、仮想マシン、Docker
            など、特定のアプリケーションで使用可能な
            CPU
            の制限を考慮して、データノードで使用可能な
            CPU の数を自動的に使用可能にします (Windows
            プラットフォームでは、自動スレッド構成はオンラインのすべての
            CPU
            を使用します)。または、<code class="literal">NumCPUs</code>
            を必要な CPU の数 (最大
            1024、自動スレッド構成で処理可能な CPU
            の最大数) に設定できます。
            <code class="literal">ThreadConfig</code>
            および
            <code class="literal">MaxNoOfExecutionThreads</code>
            の設定は無視されます。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbmtd-classicfragmentation"></a>
            <code class="literal">ClassicFragmentation</code>
          </p><a class="indexterm" name="idm45563229770576"></a><a class="indexterm" name="idm45563229768544"></a><div class="informaltable"><a name="classicfragmentation-ndbmtd-table"></a><table frame="box" rules="all" summary="ClassicFragmentation マルチスレッドデータノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.23</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>boolean</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>true</td>
              </tr><tr>
                <th>範囲</th>
                <td>true, false</td>
              </tr><tr>
                <th>追加</th>
                <td>NDB 8.0.23</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            有効 (<code class="literal">true</code> に設定)
            にすると、<code class="literal">NDB</code> は LDM
            間でのテーブルの断片の柔軟な分散を使用します。
            つまり、ノードごとのデフォルトのパーティション数は、データノードごとの
            LDM スレッドの最小数ではなく
            <code class="literal">PartitionsPerNode</code>
            と等しくなり、各テーブルのパーティション数はデータノードの数の
            4 倍 (<code class="literal">PartitionsPerNode</code>
            のデフォルト) になります。
          </p><p>
            NDB 8.0.22
            以前へのダウングレードが発生することが予想されない新しいクラスタの場合は、クラスタを最初に設定するときに
            <code class="literal">ClassicFragmentation</code> を
            <code class="literal">false</code>
            に設定することをお勧めします。これにより、すべてのパーティションがすべての
            LDM 間で均等に分散されます。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbmtd-maxnoofexecutionthreads"></a>
            <code class="literal">MaxNoOfExecutionThreads</code>
          </p><a class="indexterm" name="idm45563229739952"></a><a class="indexterm" name="idm45563229738512"></a><a class="indexterm" name="idm45563229736464"></a><a class="indexterm" name="idm45563229734544"></a><div class="informaltable"><a name="maxnoofexecutionthreads-ndbmtd-table"></a><table frame="box" rules="all" summary="MaxNoOfExecutionThreads マルチスレッドデータノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>integer</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>2</td>
              </tr><tr>
                <th>範囲</th>
                <td>2 - 72</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    IS (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            このパラメータは、<span class="command"><strong>ndbmtd</strong></span>
            で使用される実行スレッドの数を最大 72
            まで直接制御します。
            このパラメータは、<code class="filename">config.ini</code>
            ファイルの <code class="literal">[ndbd]</code> または
            <code class="literal">[ndbd default]</code>
            セクションに設定しますが、<span class="command"><strong>ndbmtd</strong></span>
            専用であり、<span class="command"><strong>ndbd</strong></span>
            には適用されません。
          </p><p>
            <code class="literal">MaxNoOfExecutionThreads</code>
            を設定すると、ファイル
            <code class="filename">storage/ndb/src/kernel/vm/mt_thr_config.cpp</code>
            のマトリックスによって決定されるタイプごとのスレッド数が設定されます。
            このテーブルは、<code class="literal">MaxNoOfExecutionThreads</code>
            の可能な値に対するこれらのスレッド数を示しています。
          </p><div class="table"><a name="idm45563229708720"></a><p class="title"><b>表 23.12 スレッドタイプ別の MaxNoOfExecutionThreads 値および対応するスレッド数 (LQH、TC、送信、受信)。</b></p><div class="table-contents"><table><col style="width: 52%"><col style="width: 12%"><col style="width: 12%"><col style="width: 12%"><col style="width: 12%"><thead><tr>
                <th scope="col"><code class="literal">MaxNoOfExecutionThreads</code> の値</th>
                <th scope="col">LDM スレッド</th>
                <th scope="col">TC スレッド</th>
                <th scope="col">送信スレッド</th>
                <th scope="col">受信スレッド</th>
              </tr></thead><tbody><tr>
                <th scope="row">0 .. 3</th>
                <td>1</td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
              </tr><tr>
                <th scope="row">4 .. 6</th>
                <td>2</td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
              </tr><tr>
                <th scope="row">7 .. 8</th>
                <td>4</td>
                <td>0</td>
                <td>0</td>
                <td>1</td>
              </tr><tr>
                <th scope="row">9</th>
                <td>4</td>
                <td>2</td>
                <td>0</td>
                <td>1</td>
              </tr><tr>
                <th scope="row">10</th>
                <td>4</td>
                <td>2</td>
                <td>1</td>
                <td>1</td>
              </tr><tr>
                <th scope="row">11</th>
                <td>4</td>
                <td>3</td>
                <td>1</td>
                <td>1</td>
              </tr><tr>
                <th scope="row">12</th>
                <td>6</td>
                <td>2</td>
                <td>1</td>
                <td>1</td>
              </tr><tr>
                <th scope="row">13</th>
                <td>6</td>
                <td>3</td>
                <td>1</td>
                <td>1</td>
              </tr><tr>
                <th scope="row">14</th>
                <td>6</td>
                <td>3</td>
                <td>1</td>
                <td>2</td>
              </tr><tr>
                <th scope="row">15</th>
                <td>6</td>
                <td>3</td>
                <td>2</td>
                <td>2</td>
              </tr><tr>
                <th scope="row">16</th>
                <td>8</td>
                <td>3</td>
                <td>1</td>
                <td>2</td>
              </tr><tr>
                <th scope="row">17</th>
                <td>8</td>
                <td>4</td>
                <td>1</td>
                <td>2</td>
              </tr><tr>
                <th scope="row">18</th>
                <td>8</td>
                <td>4</td>
                <td>2</td>
                <td>2</td>
              </tr><tr>
                <th scope="row">19</th>
                <td>8</td>
                <td>5</td>
                <td>2</td>
                <td>2</td>
              </tr><tr>
                <th scope="row">20</th>
                <td>10</td>
                <td>4</td>
                <td>2</td>
                <td>2</td>
              </tr><tr>
                <th scope="row">21</th>
                <td>10</td>
                <td>5</td>
                <td>2</td>
                <td>2</td>
              </tr><tr>
                <th scope="row">22</th>
                <td>10</td>
                <td>5</td>
                <td>2</td>
                <td>3</td>
              </tr><tr>
                <th scope="row">23</th>
                <td>10</td>
                <td>6</td>
                <td>2</td>
                <td>3</td>
              </tr><tr>
                <th scope="row">24</th>
                <td>12</td>
                <td>5</td>
                <td>2</td>
                <td>3</td>
              </tr><tr>
                <th scope="row">25</th>
                <td>12</td>
                <td>6</td>
                <td>2</td>
                <td>3</td>
              </tr><tr>
                <th scope="row">26</th>
                <td>12</td>
                <td>6</td>
                <td>3</td>
                <td>3</td>
              </tr><tr>
                <th scope="row">27</th>
                <td>12</td>
                <td>7</td>
                <td>3</td>
                <td>3</td>
              </tr><tr>
                <th scope="row">28</th>
                <td>12</td>
                <td>7</td>
                <td>3</td>
                <td>4</td>
              </tr><tr>
                <th scope="row">29</th>
                <td>12</td>
                <td>8</td>
                <td>3</td>
                <td>4</td>
              </tr><tr>
                <th scope="row">30</th>
                <td>12</td>
                <td>8</td>
                <td>4</td>
                <td>4</td>
              </tr><tr>
                <th scope="row">31</th>
                <td>12</td>
                <td>9</td>
                <td>4</td>
                <td>4</td>
              </tr><tr>
                <th scope="row">32</th>
                <td>16</td>
                <td>8</td>
                <td>3</td>
                <td>3</td>
              </tr><tr>
                <th scope="row">33</th>
                <td>16</td>
                <td>8</td>
                <td>3</td>
                <td>4</td>
              </tr><tr>
                <th scope="row">34</th>
                <td>16</td>
                <td>8</td>
                <td>4</td>
                <td>4</td>
              </tr><tr>
                <th scope="row">35</th>
                <td>16</td>
                <td>9</td>
                <td>4</td>
                <td>4</td>
              </tr><tr>
                <th scope="row">36</th>
                <td>16</td>
                <td>10</td>
                <td>4</td>
                <td>4</td>
              </tr><tr>
                <th scope="row">37</th>
                <td>16</td>
                <td>10</td>
                <td>4</td>
                <td>5</td>
              </tr><tr>
                <th scope="row">38</th>
                <td>16</td>
                <td>11</td>
                <td>4</td>
                <td>5</td>
              </tr><tr>
                <th scope="row">39</th>
                <td>16</td>
                <td>11</td>
                <td>5</td>
                <td>5</td>
              </tr><tr>
                <th scope="row">40</th>
                <td>20</td>
                <td>10</td>
                <td>4</td>
                <td>4</td>
              </tr><tr>
                <th scope="row">41</th>
                <td>20</td>
                <td>10</td>
                <td>4</td>
                <td>5</td>
              </tr><tr>
                <th scope="row">42</th>
                <td>20</td>
                <td>11</td>
                <td>4</td>
                <td>5</td>
              </tr><tr>
                <th scope="row">43</th>
                <td>20</td>
                <td>11</td>
                <td>5</td>
                <td>5</td>
              </tr><tr>
                <th scope="row">44</th>
                <td>20</td>
                <td>12</td>
                <td>5</td>
                <td>5</td>
              </tr><tr>
                <th scope="row">45</th>
                <td>20</td>
                <td>12</td>
                <td>5</td>
                <td>6</td>
              </tr><tr>
                <th scope="row">46</th>
                <td>20</td>
                <td>13</td>
                <td>5</td>
                <td>6</td>
              </tr><tr>
                <th scope="row">47</th>
                <td>20</td>
                <td>13</td>
                <td>6</td>
                <td>6</td>
              </tr><tr>
                <th scope="row">48</th>
                <td>24</td>
                <td>12</td>
                <td>5</td>
                <td>5</td>
              </tr><tr>
                <th scope="row">49</th>
                <td>24</td>
                <td>12</td>
                <td>5</td>
                <td>6</td>
              </tr><tr>
                <th scope="row">50</th>
                <td>24</td>
                <td>13</td>
                <td>5</td>
                <td>6</td>
              </tr><tr>
                <th scope="row">51</th>
                <td>24</td>
                <td>13</td>
                <td>6</td>
                <td>6</td>
              </tr><tr>
                <th scope="row">52</th>
                <td>24</td>
                <td>14</td>
                <td>6</td>
                <td>6</td>
              </tr><tr>
                <th scope="row">53</th>
                <td>24</td>
                <td>14</td>
                <td>6</td>
                <td>7</td>
              </tr><tr>
                <th scope="row">54</th>
                <td>24</td>
                <td>15</td>
                <td>6</td>
                <td>7</td>
              </tr><tr>
                <th scope="row">55</th>
                <td>24</td>
                <td>15</td>
                <td>7</td>
                <td>7</td>
              </tr><tr>
                <th scope="row">56</th>
                <td>24</td>
                <td>16</td>
                <td>7</td>
                <td>7</td>
              </tr><tr>
                <th scope="row">57</th>
                <td>24</td>
                <td>16</td>
                <td>7</td>
                <td>8</td>
              </tr><tr>
                <th scope="row">58</th>
                <td>24</td>
                <td>17</td>
                <td>7</td>
                <td>8</td>
              </tr><tr>
                <th scope="row">59</th>
                <td>24</td>
                <td>17</td>
                <td>8</td>
                <td>8</td>
              </tr><tr>
                <th scope="row">60</th>
                <td>24</td>
                <td>18</td>
                <td>8</td>
                <td>8</td>
              </tr><tr>
                <th scope="row">61</th>
                <td>24</td>
                <td>18</td>
                <td>8</td>
                <td>9</td>
              </tr><tr>
                <th scope="row">62</th>
                <td>24</td>
                <td>19</td>
                <td>8</td>
                <td>9</td>
              </tr><tr>
                <th scope="row">63</th>
                <td>24</td>
                <td>19</td>
                <td>9</td>
                <td>9</td>
              </tr><tr>
                <th scope="row">64</th>
                <td>32</td>
                <td>16</td>
                <td>7</td>
                <td>7</td>
              </tr><tr>
                <th scope="row">65</th>
                <td>32</td>
                <td>16</td>
                <td>7</td>
                <td>8</td>
              </tr><tr>
                <th scope="row">66</th>
                <td>32</td>
                <td>17</td>
                <td>7</td>
                <td>8</td>
              </tr><tr>
                <th scope="row">67</th>
                <td>32</td>
                <td>17</td>
                <td>8</td>
                <td>8</td>
              </tr><tr>
                <th scope="row">68</th>
                <td>32</td>
                <td>18</td>
                <td>8</td>
                <td>8</td>
              </tr><tr>
                <th scope="row">69</th>
                <td>32</td>
                <td>18</td>
                <td>8</td>
                <td>9</td>
              </tr><tr>
                <th scope="row">70</th>
                <td>32</td>
                <td>19</td>
                <td>8</td>
                <td>9</td>
              </tr><tr>
                <th scope="row">71</th>
                <td>32</td>
                <td>20</td>
                <td>8</td>
                <td>9</td>
              </tr><tr>
                <th scope="row">72</th>
                <td>32</td>
                <td>20</td>
                <td>8</td>
                <td>10</td>
              </tr></tbody></table></div></div><br class="table-break"><p>
            SUMA (レプリケーション) スレッドは常に 1
            つです。
          </p><p>
            <code class="literal">NoOfFragmentLogParts</code>
            は、このパラメータの設定によって決定される、<span class="command"><strong>ndbmtd</strong></span>
            で使用される LDM
            スレッドの数と同じに設定する必要があります。
            この比率は 4:1
            以下にする必要があります。このような場合の構成は特に禁止されています。
          </p><p>
            LDM
            スレッドの数によって、明示的にパーティション化されていない
            <code class="literal">NDB</code>
            テーブルで使用されるパーティションの数も決まります。これは、LDM
            スレッドの数にクラスタ内のデータノードの数を掛けた数です。
            (<span class="command"><strong>ndbmtd</strong></span> ではなくデータノードで
            <span class="command"><strong>ndbd</strong></span>
            が使用されている場合、常に単一の LDM
            スレッドが存在します。この場合、自動的に作成されるパーティションの数はデータノードの数と同じになります。
            詳しくは<a class="xref" href="mysql-cluster.html#mysql-cluster-nodes-groups" title="23.1.2 NDB Cluster ノード、ノードグループ、フラグメントレプリカ、およびパーティション">セクション23.1.2「NDB Cluster ノード、ノードグループ、フラグメントレプリカ、およびパーティション」</a>,をご覧ください。
          </p><p>
            デフォルト数を超える LDM
            スレッドを使用している場合に「ディスクデータ」テーブルに大きなテーブルスペースを追加すると、ディスクページバッファが十分に大きくないと、リソースおよび
            CPU
            使用率に問題が発生する可能性があります。詳細は、<code class="literal">DiskPageBufferMemory</code>
            構成パラメータの説明を参照してください。
          </p><p>
            スレッドタイプについては、このセクションで後述します
            (<code class="literal">ThreadConfig</code>
            を参照してください)。
          </p><p>
            このパラメータを許容範囲外の値に設定すると、管理サーバーの起動が中止され、次のエラーが発生します:
            <span class="errortext">Error line <em class="replaceable"><code>number</code></em>:
            Illegal value <em class="replaceable"><code>value</code></em> for parameter
            MaxNoOfExecutionThreads</span>。
          </p><p>
            <code class="literal">MaxNoOfExecutionThreads</code> では、値 0
            または 1 は <code class="literal">NDB</code>
            の内部で 2 に切り上げられるため、2
            がこのパラメータのデフォルト値および最小値とみなされます。
          </p><p>
            <code class="literal">MaxNoOfExecutionThreads</code>
            は、通常、使用可能な CPU
            スレッド数と同じ値に設定し、各タイプのスレッド数を一般的なワークロードに合わせて割り当てることを目的としています。
            指定された CPU
            に特定のスレッドを割り当てるものではありません。
            提供された設定を変更することが望ましい場合や、スレッドを
            CPU
            にバインドする場合は、代わりに必要なタイプ、CPU、またはその両方に直接スレッドを割り当てることができる
            <code class="literal">ThreadConfig</code>
            を使用するようにしてください。
          </p><p>
            マルチスレッドデータノードプロセスは常に、少なくとも次のスレッドを生成します:
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                1 個のローカルクエリーハンドラ (LDM)
                スレッド
              </p></li><li class="listitem"><p>
                1 個の受信スレッド
              </p></li><li class="listitem"><p>
                1 個のサブスクリプションマネージャー
                (SUMA またはレプリケーション) スレッド
              </p></li></ul></div><p>
            <code class="literal">MaxNoOfExecutionThreads</code> 値が 8
            以下の場合、TC
            スレッドは作成されず、かわりに TC
            処理がメインスレッドによって実行されます。
          </p><p>
            LDM
            スレッドの数を変更するには、通常、このパラメータを使用して変更するか
            <code class="literal">ThreadConfig</code>
            を使用して変更するかに関係なく、システムの再起動が必要ですが、次の
            2
            つの条件が満たされている場合は、ノードの初期再起動
            (<span class="emphasis"><em>NI</em></span>)
            を使用して変更を有効にできます:
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                各 LDM スレッドは最大 8
                つのフラグメントを処理
              </p></li><li class="listitem"><p>
                テーブルフラグメントの合計数は、LDM
                スレッドの数の整数倍です。
              </p></li></ul></div><p>
            NDB 8.0 では、NDB Cluster
            の一部の古いバージョンであったため、このパラメータの変更を有効にするために初期再起動は必要ありません。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbmtd-nooffragmentlogparts"></a>
            <code class="literal">NoOfFragmentLogParts</code>
          </p><a class="indexterm" name="idm45563229330704"></a><a class="indexterm" name="idm45563229329360"></a><div class="informaltable"><a name="nooffragmentlogparts-ndbmtd-table"></a><table frame="box" rules="all" summary="NoOfFragmentLogParts マルチスレッドデータノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>numeric</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>4</td>
              </tr><tr>
                <th>範囲</th>
                <td>4, 6, 8, 10, 12, 16, 20, 24, 32</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    IN (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            この <span class="command"><strong>ndbmtd</strong></span> に属する Redo
            ログのログファイルグループの数を設定します。
            このパラメータの値は、<code class="literal">MaxNoOfExecutionThreads</code>
            の設定によって決定される、<span class="command"><strong>ndbmtd</strong></span>
            で使用される LDM
            スレッドの数と同じに設定する必要があります。
            LDM ごとに 4 つ以上の redo
            ログ部分を使用する構成は許可されていません。
          </p><p>
            詳細は、<code class="literal">MaxNoOfExecutionThreads</code>
            の説明を参照してください。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbmtd-numcpus"></a>
            <code class="literal">NumCPUs</code>
          </p><a class="indexterm" name="idm45563229304704"></a><div class="informaltable"><a name="numcpus-ndbmtd-table"></a><table frame="box" rules="all" summary="NumCPUs マルチスレッドデータノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.23</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>integer</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>0</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 1024</td>
              </tr><tr>
                <th>追加</th>
                <td>NDB 8.0.23</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    IS (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            自動スレッド構成では、この数の CPU
            のみが使用されます。
            <code class="literal">AutomaticThreadConfig</code>
            が有効になっていない場合は無効です。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbmtd-partitionspernode"></a>
            <code class="literal">PartitionsPerNode</code>
          </p><a class="indexterm" name="idm45563229281920"></a><div class="informaltable"><a name="partitionspernode-ndbmtd-table"></a><table frame="box" rules="all" summary="PartitionsPerNode マルチスレッドデータノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.23</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>integer</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>2</td>
              </tr><tr>
                <th>範囲</th>
                <td>1 - 32</td>
              </tr><tr>
                <th>追加</th>
                <td>NDB 8.0.23</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            新しい <code class="literal">NDB</code>
            テーブルの作成時に各ノードで使用されるパーティションの数を設定します。
            これにより、ローカルデータマネージャ (LDM)
            の数が増加した場合に、テーブルを過剰な数のパーティションに分割することを回避できます。
          </p><p>
            このパラメータは異なるデータノード上で異なる値に設定でき、そのための既知の問題はありませんが、グローバル
            <code class="filename">config.ini</code>
            ファイルの<code class="literal">[ndbd
            default]</code>セクションですべてのデータノードに対して一度だけ設定することをお勧めします。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbmtd-threadconfig"></a>
            <code class="literal">ThreadConfig</code>
          </p><a class="indexterm" name="idm45563229257072"></a><a class="indexterm" name="idm45563229255728"></a><div class="informaltable"><a name="threadconfig-ndbmtd-table"></a><table frame="box" rules="all" summary="ThreadConfig マルチスレッドデータノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>string</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>''</td>
              </tr><tr>
                <th>範囲</th>
                <td>...</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    IS (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            このパラメータは、<span class="command"><strong>ndbmtd</strong></span>
            で異なるタイプのスレッドを別の CPU
            に割り当てるために使用されます。
            この値は、次の構文を持つ形式の文字列です。
          </p><pre class="programlisting">ThreadConfig := <em class="replaceable"><code>entry</code></em>[,<em class="replaceable"><code>entry</code></em>[,...]]

<em class="replaceable"><code>entry</code></em> := <em class="replaceable"><code>type</code></em>={<em class="replaceable"><code>param</code></em>[,<em class="replaceable"><code>param</code></em>[,...]]}

<em class="replaceable"><code>type</code></em> (<span class="emphasis"><em>NDB 8.0.22 and earlier</em></span>) := ldm | main | recv | send | rep | io | tc | watchdog | idxbld

<em class="replaceable"><code>type</code></em> (<span class="emphasis"><em>NDB 8.0.23 and later</em></span>) := ldm | query | recover | main | recv | send | rep | io | tc | watchdog | idxbld

<em class="replaceable"><code>param</code></em> := count=<em class="replaceable"><code>number</code></em>
  | cpubind=<em class="replaceable"><code>cpu_list</code></em>
  | cpuset=<em class="replaceable"><code>cpu_list</code></em>
  | spintime=<em class="replaceable"><code>number</code></em>
  | realtime={0|1}
  | nosend={0|1}
  | thread_prio={0..10}
  | cpubind_exclusive=<em class="replaceable"><code>cpu_list</code></em>
  | cpuset_exclusive=<em class="replaceable"><code>cpu_list</code></em>
</pre><p>
            リストにパラメータが 1
            つしかない場合でも、パラメータのリストを囲む中カッコ
            (<code class="literal">{</code>...<code class="literal">}</code>)
            は必須です。
          </p><p>
            <em class="replaceable"><code>param</code></em> (パラメータ)
            は、次の情報のいずれかまたはすべてを指定します:
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                指定されたタイプ (<code class="literal">count</code>)
                のスレッド数。
              </p></li><li class="listitem"><p>
                特定のタイプのスレッドが非排他的にバインドされる
                CPU のセット。
                これは、<code class="literal">cpubind</code> または
                <code class="literal">cpuset</code>
                のいずれかによって決定されます。<code class="literal">cpubind</code>
                では、各スレッドがセット内の CPU に
                (非排他的に)
                バインドされます。<code class="literal">cpuset</code>
                では、各スレッドが指定された CPU
                のセットに (非排他的に)
                バインドされます。
              </p><p>
                Solaris
                では、かわりに、特定のタイプのスレッドが排他的にバインドされる
                CPU
                のセットを指定できます。<code class="literal">cpubind_exclusive</code>
                では、各スレッドがセット内の CPU
                に排他的にバインドされます。<code class="literal">cpuset_exclsuive</code>
                では、各スレッドが指定された CPU
                のセットに排他的にバインドされます。
              </p><p>
                単一の構成で指定できるのは、<code class="literal">cpubind</code>,
                <code class="literal">cpuset</code>,
                <code class="literal">cpubind_exclusive</code> または
                <code class="literal">cpuset_exclusive</code>
                のいずれかのみです。
              </p></li><li class="listitem"><p>
                <code class="literal">spintime</code>
                は、スリープする前にスレッドがスピンする待機時間をマイクロ秒単位で決定します。
              </p><p>
                <code class="literal">spintime</code>
                のデフォルト値は、<code class="literal">SchedulerSpinTimer</code>
                データノード構成パラメータの値です。
              </p><p>
                <code class="literal">spintime</code> は、I/O
                スレッド、ウォッチドッグまたはオフラインインデックス構築スレッドには適用されないため、これらのスレッドタイプには設定できません。
              </p></li><li class="listitem"><p>
                <code class="literal">realtime</code> は 0 または 1
                に設定できます。 1
                に設定すると、スレッドはリアルタイム優先度で実行されます。
                これは、<code class="literal">thread_prio</code>
                を設定できないことも意味します。
              </p><p>
                <code class="literal">realtime</code>
                パラメータは、デフォルトで
                <code class="literal">RealtimeScheduler</code>
                データノード構成パラメータの値に設定されます。
              </p><p>
                オフラインインデックス構築スレッドには
                <code class="literal">realtime</code> を設定できません。
              </p></li><li class="listitem"><p>
                <code class="literal">nosend</code> を 1
                に設定すると、<code class="literal">main</code>,
                <code class="literal">ldm</code>, <code class="literal">rep</code> または
                <code class="literal">tc</code>
                スレッドが送信スレッドを支援できなくなります。
                このパラメータはデフォルトでは 0
                で、他のタイプのスレッドでは使用できません。
              </p></li><li class="listitem"><p>
                <code class="literal">thread_prio</code> は、0 から 10
                の範囲で設定できるスレッド優先度レベルで、10
                は最大の優先度を表します。
                デフォルトは 5 です。
                このパラメータの正確な効果はプラットフォーム固有であり、このセクションの後半で説明します。
              </p><p>
                スレッド優先度レベルは、オフラインインデックス構築スレッドには設定できません。
              </p></li></ul></div><p><b>プラットフォーム別の thread_prio の設定および効果. </b>
              <code class="literal">thread_prio</code>
              の実装は、Linux/FreeBSD、Solaris および Windows
              で異なります。
              次のリストでは、これらの各プラットフォームへの影響について順に説明します:
            </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <span class="emphasis"><em>Linux および FreeBSD</em></span>:
                <code class="literal">thread_prio</code> を
                <code class="literal">nice</code>
                システムコールに提供される値にマップします。
                プロセスの有効性の値が低いほどプロセスの優先度が高くなるため、<code class="literal">thread_prio</code>
                を増やすと <code class="literal">nice</code>
                値が小さくなります。
              </p><div class="table"><a name="idm45563229184160"></a><p class="title"><b>表 23.13 Linux および FreeBSD での nice 値への thread_prio のマッピング</b></p><div class="table-contents"><table><col style="width: 50%"><col style="width: 50%"><thead><tr>
                    <th><code class="literal">thread_prio</code> 値</th>
                    <th><code class="literal">nice</code> 値</th>
                  </tr></thead><tbody><tr>
                    <td>0</td>
                    <td>19</td>
                  </tr><tr>
                    <td>1</td>
                    <td>16</td>
                  </tr><tr>
                    <td>2</td>
                    <td>12</td>
                  </tr><tr>
                    <td>3</td>
                    <td>8</td>
                  </tr><tr>
                    <td>4</td>
                    <td>4</td>
                  </tr><tr>
                    <td>5</td>
                    <td>0</td>
                  </tr><tr>
                    <td>6</td>
                    <td>-4</td>
                  </tr><tr>
                    <td>7</td>
                    <td>-8</td>
                  </tr><tr>
                    <td>8</td>
                    <td>-12</td>
                  </tr><tr>
                    <td>9</td>
                    <td>-16</td>
                  </tr><tr>
                    <td>10</td>
                    <td>-20</td>
                  </tr></tbody></table></div></div><br class="table-break"><p>
                一部のオペレーティングシステムでは、最大プロセスの有効性レベルが
                20
                になる場合がありますが、これはすべてのターゲットバージョンでサポートされているわけではありません。このため、設定可能な最大
                <code class="literal">nice</code> 値として 19
                を選択します。
              </p></li><li class="listitem"><p>
                <span class="emphasis"><em>Solaris</em></span> : Solaris で
                <code class="literal">thread_prio</code>
                を設定すると、次のテーブルに示すマッピングを使用して
                Solaris FX 優先度が設定されます:
              </p><div class="table"><a name="idm45563229149952"></a><p class="title"><b>表 23.14 Solaris での thread_prio から FX への優先度のマッピング</b></p><div class="table-contents"><table><col style="width: 50%"><col style="width: 50%"><thead><tr>
                    <th><code class="literal">thread_prio</code> 値</th>
                    <th>Solaris <code class="literal">FX</code> の優先度</th>
                  </tr></thead><tbody><tr>
                    <td>0</td>
                    <td>15</td>
                  </tr><tr>
                    <td>1</td>
                    <td>20</td>
                  </tr><tr>
                    <td>2</td>
                    <td>25</td>
                  </tr><tr>
                    <td>3</td>
                    <td>30</td>
                  </tr><tr>
                    <td>4</td>
                    <td>35</td>
                  </tr><tr>
                    <td>5</td>
                    <td>40</td>
                  </tr><tr>
                    <td>6</td>
                    <td>45</td>
                  </tr><tr>
                    <td>7</td>
                    <td>50</td>
                  </tr><tr>
                    <td>8</td>
                    <td>55</td>
                  </tr><tr>
                    <td>9</td>
                    <td>59</td>
                  </tr><tr>
                    <td>10</td>
                    <td>60</td>
                  </tr></tbody></table></div></div><br class="table-break"><p>
                <code class="literal">thread_prio</code> 設定 9 は、Solaris
                で特別な FX 優先度値 59
                にマップされます。これは、オペレーティングシステムが独自の
                CPU
                コアでスレッドを強制的に単独で実行しようとすることを意味します。
              </p></li><li class="listitem"><p>
                <span class="emphasis"><em>Windows</em></span>:
                <code class="literal">thread_prio</code> を、Windows API
                <code class="literal">SetThreadPriority()</code>
                関数に渡される Windows
                スレッド優先度値にマップします。
                このマッピングを次のテーブルに示します:
              </p><div class="table"><a name="idm45563229115216"></a><p class="title"><b>表 23.15 thread_prio から Windows スレッド優先度へのマッピング</b></p><div class="table-contents"><table><col style="width: 50%"><col style="width: 50%"><thead><tr>
                    <th><code class="literal">thread_prio</code> 値</th>
                    <th>Windows スレッドの優先順位</th>
                  </tr></thead><tbody><tr>
                    <td>0 - 1</td>
                    <td><code class="literal">THREAD_PRIORITY_LOWEST</code></td>
                  </tr><tr>
                    <td>2 - 3</td>
                    <td><code class="literal">THREAD_PRIORITY_BELOW_NORMAL</code></td>
                  </tr><tr>
                    <td>4 - 5</td>
                    <td><code class="literal">THREAD_PRIORITY_NORMAL</code></td>
                  </tr><tr>
                    <td>6 - 7</td>
                    <td><code class="literal">THREAD_PRIORITY_ABOVE_NORMAL</code></td>
                  </tr><tr>
                    <td>8 - 10</td>
                    <td><code class="literal">THREAD_PRIORITY_HIGHEST</code></td>
                  </tr></tbody></table></div></div><br class="table-break"></li></ul></div><p>
            <em class="replaceable"><code>type</code></em> 属性は、NDB
            のスレッドタイプを表します。
            次のリストに、サポートされるスレッドタイプと、それぞれに許可される
            <code class="literal">count</code> 値の範囲を示します:
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <code class="literal">ldm</code>:
                データを処理するローカルクエリーハンドラ
                (<code class="literal">DBLQH</code>
                カーネルブロック)。 使用される LDM
                スレッドの数が多いほど、データがより高度にパーティション化されます。
                各 LDM
                スレッドには、固有のデータおよびインデックスパーティションのセットと固有の
                Redo ログが保持されます。 NDB 8.0.23
                より前では、<code class="literal">ldm</code>
                の値セットは
                1、2、4、6、8、12、16、24、または 32
                のいずれかである必要があります。 In NDB
                8.0.23 and later, it is possible to set
                <code class="literal">ldm</code> to any value in the range 1 to
                332 inclusive; it also becomes possible to set it to 0,
                provided that <code class="literal">main</code>,
                <code class="literal">rep</code>, and <code class="literal">tc</code> are
                also 0, and that <code class="literal">recv</code> is set to 1;
                doing this causes <span class="command"><strong>ndbmtd</strong></span> to emulate
                <span class="command"><strong>ndbd</strong></span>.
              </p><p>
                LDM
                スレッドの数を変更するには、通常、クラスタ操作を有効かつ安全に行うためにシステムの再起動が必要です。この要件は、このセクションの後半で説明するように、特定の状況で緩和されます。
                これは、<code class="literal">MaxNoOfExecutionThreads</code>
                を使用して実行する場合にも当てはまります。
              </p><p>
                デフォルト数を超える LDM
                を使用している場合に「ディスクデータ」テーブルに大きなテーブルスペース
                (数百 GB 以上)
                を追加すると、<code class="literal">DiskPageBufferMemory</code>
                が十分に大きくないと、リソースおよび
                CPU
                の使用率に問題が発生する可能性があります。
              </p></li><li class="listitem"><p>
                <code class="literal">query</code> (NDB 8.0.23 で追加):
                クエリースレッドは LDM
                に関連付けられ、LDM
                グループを形成します。<code class="literal">READ
                COMMITTED</code>
                クエリーに対してのみ機能します。
                クエリースレッドの数は、LDM
                スレッドの数の 0、1、2 または 3
                倍に設定する必要があります。 これが
                <code class="literal">query</code>
                をゼロ以外の値に設定するか、<code class="literal">AutomaticThreadConfig</code>
                パラメータを有効にすることによってオーバーライドされないかぎり、クエリースレッドは使用されません。この場合、LDM
                は NDB 8.0.23
                の前と同じように動作します。
              </p><p>
                クエリースレッドもリカバリスレッドとして機能しますが
                (次の項目を参照)、その逆は当てはまりません。
              </p><p>
                クエリースレッドの数を変更するには、ノードの再起動が必要です。
              </p></li><li class="listitem"><p>
                <code class="literal">recover</code> (NDB 8.0.23 で追加):
                回復スレッドは、LCP
                の一部としてフラグメントからデータを復元します。
              </p><p>
                リカバリスレッドの数を変更するには、ノードの再起動が必要です。
              </p></li><li class="listitem"><p>
                <code class="literal">tc</code>:
                進行中のトランザクションの状態を含むトランザクションコーディネータスレッド
                (<code class="literal">DBTC</code>
                カーネルブロック)。 NDB 8.0.23
                以降では、TC スレッドの最大数は 128
                で、以前は 32 でした。
              </p><p>
                新しいトランザクションをそれぞれ 1
                つの新しい TC
                スレッドに適切に割り当てることができます。
                ほとんどの場合、この実行が保証されるには、2
                つの LDM スレッドに対して 1 つの TC
                スレッドで十分です。
                読み取りの数に比べて書き込みの数が少ないケースでは、4
                つの LQH スレッドあたり 1 つの TC
                スレッドがあればトランザクション状態を維持できる可能性があります。
                逆に、非常に多くの更新を実行するアプリケーションでは、LDM
                スレッドに対する TC スレッドの比率を 1
                に近づける (たとえば、4 つの LDM
                スレッドに対して TC スレッドを 3
                つにする) 必要がある場合があります。
              </p><p>
                <code class="literal">tc</code> を 0 に設定すると、TC
                処理がメインスレッドによって実行されます。
                ほとんどの場合、これは事実上 1
                に設定することと同じです。
              </p><p>
                Range: 0-64( <span class="emphasis"><em>NDB 8.0.22 以前</em></span>: 0 -
                32)
              </p></li><li class="listitem"><p>
                <code class="literal">main</code>:
                スキーマ管理を提供するデータディクショナリおよびトランザクションコーディネータ
                (<code class="literal">DBDIH</code> および
                <code class="literal">DBTC</code>
                カーネルブロック)。 NDB 8.0.23
                より前は、これは NDB 8.0.23
                から始まる単一の専用スレッドによって常に処理されていましたが、ゼロまたは
                2
                つのメインスレッドを指定することもできました。
              </p><p>
                範囲:
              </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: square; "><li class="listitem"><p>
                    <span class="emphasis"><em>NDB 8.0.22 以前</em></span>: 1 only.
                  </p><p>
                    <span class="emphasis"><em>NDB 8.0.23 以降</em></span>: 0-2。
                  </p><p>
                    <code class="literal">main</code> を 0
                    に、<code class="literal">rep</code> を 1
                    に設定すると、<code class="literal">main</code>
                    ブロックが <code class="literal">rep</code>
                    スレッドに配置されます。結合されたスレッドは、<code class="literal">ndbinfo.threads</code>
                    テーブルに <code class="literal">main_rep</code>
                    として表示されます。
                    これは事実上、<code class="literal">rep</code> を 1
                    に、<code class="literal">main</code> を 0
                    に設定することと同じです。
                  </p><p>
                    <code class="literal">main</code> と <code class="literal">rep</code>
                    の両方を 0(ゼロ)
                    に設定することもできます。この場合、両方のスレッドが最初の
                    <code class="literal">recv</code>
                    スレッドに配置され、結果として生成される結合スレッドの名前は
                    <code class="literal">threads</code>
                    テーブルで <code class="literal">main_rep_recv</code>
                    になります。
                  </p></li></ul></div></li><li class="listitem"><p>
                <code class="literal">recv</code>: 受信スレッド
                (<code class="literal">CMVMI</code>
                カーネルブロック)。
                各受信スレッドは、NDB Cluster
                内のほかのノードと通信するための 1
                つ以上のソケットを、ノードごとに 1
                つのソケットで処理します。 NDB Cluster
                は複数の受信スレッドをサポートします。このようなスレッドの最大数は
                16 です。
              </p><p>
                範囲:
              </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: square; "><li class="listitem"><p>
                    <span class="emphasis"><em>NDB 8.0.22 以前</em></span>: 1 - 16
                  </p></li><li class="listitem"><p>
                    <span class="emphasis"><em>NDB 8.0.23 以降</em></span>: 1 - 64
                  </p></li></ul></div></li><li class="listitem"><p>
                <code class="literal">send</code>: 送信スレッド
                (<code class="literal">CMVMI</code>
                カーネルブロック)。
                スループットを向上させるため、1 つ以上
                (最大 8 個)
                の独立した専用スレッドから送信を実行できます。
              </p><p>
                NDB 8.0.20
                以降では、マルチスレッド実装が変更されたため、多くの送信スレッドを使用すると、スケーラビリティーに悪影響を与える可能性があります。
              </p><p>
                以前は、すべてのスレッドが独自の送信を直接処理していました。これは、送信スレッドの数を
                0 に設定することで実行できます
                (<code class="literal">MaxNoOfExecutionThreads</code>
                が 10
                未満に設定されている場合にも発生します)。
                これを行うと、スループットに悪影響を及ぼす可能性がありますが、場合によっては待機時間が減る可能性もあります。
              </p><p>
                範囲:
              </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: square; "><li class="listitem"><p>
                    <span class="emphasis"><em>NDB 8.0.22 以前</em></span>: 0 - 16
                  </p></li><li class="listitem"><p>
                    <span class="emphasis"><em>NDB 8.0.23 以降</em></span>: 0 - 64
                  </p></li></ul></div></li><li class="listitem"><p>
                <code class="literal">rep</code>:
                レプリケーションスレッド
                (<code class="literal">SUMA</code>
                カーネルブロック)。 NDB 8.0.23
                より前では、非同期レプリケーション操作は常に単一の専用スレッドによって処理されます。
                NDB 8.0.23
                以降では、このスレッドをメインスレッドと組み合わせることができます
                (範囲情報を参照)。
              </p><p>
                範囲:
              </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: square; "><li class="listitem"><p>
                    <span class="emphasis"><em>NDB 8.0.22 以前</em></span>: 1 only.
                  </p></li><li class="listitem"><p>
                    <span class="emphasis"><em>NDB 8.0.23 以降</em></span>: 0-1。
                  </p><p>
                    <code class="literal">rep</code> を 0
                    に、<code class="literal">main</code> を 1
                    に設定すると、<code class="literal">rep</code>
                    ブロックが <code class="literal">main</code>
                    スレッドに配置されます。結合されたスレッドは、<code class="literal">ndbinfo.threads</code>
                    テーブルに <code class="literal">main_rep</code>
                    として表示されます。
                    これは事実上、<code class="literal">main</code> を 1
                    に、<code class="literal">rep</code> を 0
                    に設定することと同じです。
                  </p><p>
                    <code class="literal">main</code> と <code class="literal">rep</code>
                    の両方を 0(ゼロ)
                    に設定することもできます。この場合、両方のスレッドが最初の
                    <code class="literal">recv</code>
                    スレッドに配置され、結果として生成される結合スレッドの名前は
                    <code class="literal">threads</code>
                    テーブルで <code class="literal">main_rep_recv</code>
                    になります。
                  </p></li></ul></div></li><li class="listitem"><p>
                <code class="literal">io</code>:
                ファイルシステムおよびその他の操作。
                これらは、要求の厳しいタスクではなく、常に
                1 つの I/O
                専用スレッドでまとめて処理されます。
              </p><p>
                範囲: 1 のみ。
              </p></li><li class="listitem"><p>
                <code class="literal">watchdog</code>:
                このタイプに関連付けられたパラメータ設定は、実際には複数のスレッドに適用され、それぞれに特定の用途があります。
                これらのスレッドには、他のノードから接続設定を受信する
                <code class="literal">SocketServer</code>
                スレッド、他のノードへの接続を設定しようとする
                <code class="literal">SocketClient</code>
                スレッド、およびスレッドが進行中であることを確認するスレッドウォッチドッグスレッドが含まれます。
              </p><p>
                範囲: 1 のみ。
              </p></li><li class="listitem"><p>
                <code class="literal">idxbld</code>:
                オフラインインデックス構築スレッド。
                前述の永続的な他のスレッドタイプとは異なり、これらは、ノードまたはシステムの再起動時、または
                <span class="command"><strong>ndb_restore</strong></span>
                <code class="option">--rebuild-indexes</code>
                の実行時にのみ作成および使用される一時スレッドです。
                永続スレッドタイプにバインドされた CPU
                セットと重複する CPU
                セットにバインドできます。
              </p><p>
                <code class="literal">thread_prio</code>、<code class="literal">realtime</code>
                および <code class="literal">spintime</code>
                の値は、オフラインインデックス構築スレッドには設定できません。
                また、このタイプのスレッドでは、<code class="literal">count</code>
                は無視されます。
              </p><p>
                <code class="literal">idxbld</code>
                が指定されていない場合、デフォルトの動作は次のとおりです:
              </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: square; "><li class="listitem"><p>
                    オフラインインデックス構築スレッドは、I/O
                    スレッドもバインドされておらず、これらのスレッドが使用可能なコアを使用している場合はバインドされません。
                  </p></li><li class="listitem"><p>
                    I/O
                    スレッドがバインドされている場合、オフラインインデックス構築スレッドはバインドされたスレッドのセット全体にバインドされます。これは、これらのスレッドが実行する他のタスクがないためです。
                  </p></li></ul></div><p>
                Range: 0 - 1。
              </p></li></ul></div><p>
            <code class="literal">ThreadCOnfig</code>
            を変更するには通常、システムの初期再起動が必要ですが、この要件は特定の状況下で緩和できます:
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                変更後も LDM
                スレッドの数が以前と同じである場合は、変更を実装するために単純なノードの再起動
                (ローリング再起動または
                <span class="emphasis"><em>N</em></span>)
                以外は必要ありません。
              </p></li><li class="listitem"><p>
                それ以外の場合 (つまり、LDM
                スレッドの数が変更された場合)、次の 2
                つの条件が満たされていれば、ノードの初期再起動
                (<span class="emphasis"><em>NI</em></span>)
                を使用して変更を有効にできます:
              </p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p>
                    各 LDM スレッドは最大 8
                    つのフラグメントを処理
                  </p></li><li class="listitem"><p>
                    テーブルフラグメントの合計数は、LDM
                    スレッドの数の整数倍です。
                  </p></li></ol></div></li></ul></div><p>
            それ以外の場合は、このパラメータを変更するためにシステムの初期再起動が必要です。
          </p><p>
            <code class="literal">NDB</code>
            では、次の両方の基準によってスレッドタイプを区別できます:
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                スレッドが実行スレッドかどうか。
                <code class="literal">main</code>, <code class="literal">ldm</code>,
                <code class="literal">query</code> タイプ (NDB 8.0.23
                以降)、<code class="literal">recv</code>,
                <code class="literal">rep</code>,
                <code class="literal">tc</code>、および
                <code class="literal">send</code>
                は実行スレッドです。<code class="literal">io</code>、<code class="literal">recover</code>
                (NDB 8.0.23
                以降)、<code class="literal">watchdog</code>、および
                <code class="literal">idxbld</code>
                スレッドは実行スレッドとみなされません。
              </p></li><li class="listitem"><p>
                特定のタスクへのスレッドの割当てが永続的か一時的か。
                現在、<code class="literal">idxbld</code>
                以外のすべてのスレッドタイプは永続とみなされます。<code class="literal">idxbld</code>
                スレッドは一時スレッドとみなされます。
              </p></li></ul></div><p>
            簡単な例:
          </p><pre class="programlisting"># Example 1.

ThreadConfig=ldm={count=2,cpubind=1,2},main={cpubind=12},rep={cpubind=11}

# Example 2.

Threadconfig=main={cpubind=0},ldm={count=4,cpubind=1,2,5,6},io={cpubind=3}
</pre><p>
            通常、スレッドの使用法を構成するときは、データノードホストの
            1 つ以上の CPU
            をオペレーティングシステムおよびその他のタスク用に確保します。
            したがって、24 個の CPU
            を搭載したホストマシンでは、20 個の CPU
            スレッド (8 個の LDM スレッド、4 個の TC
            スレッド (LDM スレッドの半分)、3
            個の送信スレッド、3
            個の受信スレッド、およびスキーマ管理、非同期レプリケーション、I/O
            操作のそれぞれに 1 個のスレッド)
            を使用できます (ほかの用途のために 4
            個を残します)。
            (これは、<code class="literal">MaxNoOfExecutionThreads</code>
            を 20
            に設定したときに使用されるスレッドの分布とほぼ同じです。)
            次の <code class="literal">ThreadConfig</code>
            設定では、これらの割り当てを行い、さらにこれらのスレッドを特定の
            CPU にバインドしています。
          </p><pre class="programlisting">ThreadConfig=ldm{count=8,cpubind=1,2,3,4,5,6,7,8},main={cpubind=9},io={cpubind=9}, \
rep={cpubind=10},tc{count=4,cpubind=11,12,13,14},recv={count=3,cpubind=15,16,17}, \
send{count=3,cpubind=18,19,20}
</pre><p>
            ほとんどの場合、ここに示す例で行なったように、main
            (スキーマ管理) スレッドと I/O
            スレッドは同じ CPU にバインドできます。
          </p><p>
            次の例では、<code class="literal">cpuset</code> と
            <code class="literal">cpubind</code>
            の両方を使用して定義された CPU
            のグループ、およびスレッド優先順位付けの使用を組み込みます。
          </p><pre class="programlisting">ThreadConfig=ldm={count=4,cpuset=0-3,thread_prio=8,spintime=200}, \
ldm={count=4,cpubind=4-7,thread_prio=8,spintime=200}, \
tc={count=4,cpuset=8-9,thread_prio=6},send={count=2,thread_prio=10,cpubind=10-11}, \
main={count=1,cpubind=10},rep={count=1,cpubind=11}
</pre><p>
            この場合、2 つの LDM
            グループを作成します。最初の LDM
            グループは <code class="literal">cpubind</code> を使用し、2
            つ目の LDM グループは <code class="literal">cpuset</code>
            を使用します。<code class="literal">thread_prio</code> と
            <code class="literal">spintime</code>
            は、グループごとに同じ値に設定されます。
            これは、LDM スレッドの合計が 8
            つあることを意味します。
            (<code class="literal">NoOfFragmentLogParts</code>
            も 8
            に設定されていることを確認してください。)
            4 つの TC スレッドは 2 つの CPU
            のみを使用します。<code class="literal">cpuset</code>
            を使用して、グループ内のスレッドより少ない
            CPU を指定することは可能です。
            (これは、<code class="literal">cpubind</code>
            には当てはまりません。)
            送信スレッドは、<code class="literal">cpubind</code>
            を使用してこれらのスレッドを CPU 10 および
            11 にバインドする 2
            つのスレッドを使用します。
            メインスレッドおよびレポートスレッドは、これらの
            CPU を再利用できます。
          </p><p>
            この例では、オペレーティングシステムの機能および割込みで
            CPU 10、11、22 および 23
            を使用可能なままにして、ハイパースレッドを使用する
            24 CPU ホストに <code class="literal">ThreadConfig</code>
            および <code class="literal">NoOfFragmentLogParts</code>
            を設定する方法を示します:
          </p><pre class="programlisting">NoOfFragmentLogParts=10
ThreadConfig=ldm={count=10,cpubind=0-4,12-16,thread_prio=9,spintime=200}, \
tc={count=4,cpuset=6-7,18-19,thread_prio=8},send={count=1,cpuset=8}, \
recv={count=1,cpuset=20},main={count=1,cpuset=9,21},rep={count=1,cpuset=9,21}, \
io={count=1,cpuset=9,21,thread_prio=8},watchdog={count=1,cpuset=9,21,thread_prio=9}
</pre><p>
            次のいくつかの例には、<code class="literal">idxbld</code>
            の設定が含まれます。 これらのうち最初の 2
            つは、<code class="literal">idxbld</code> に定義された CPU
            セットが他の (永続的な)
            スレッドタイプに指定された CPU
            セットとオーバーラップする方法を示しています。最初に
            <code class="literal">cpuset</code> を使用し、次に
            <code class="literal">cpubind</code> を使用します:
          </p><pre class="programlisting">ThreadConfig=main,ldm={count=4,cpuset=1-4},tc={count=4,cpuset=5,6,7}, \
io={cpubind=8},idxbld={cpuset=1-8}

ThreadConfig=main,ldm={count=1,cpubind=1},idxbld={count=1,cpubind=1}
</pre><p>
            次の例では、I/O スレッドの CPU
            を指定しますが、インデックス構築スレッドの
            CPU は指定しません:
          </p><pre class="programlisting">ThreadConfig=main,ldm={count=4,cpuset=1-4},tc={count=4,cpuset=5,6,7}, \
io={cpubind=8}
</pre><p>
            <code class="literal">ThreadConfig</code> 設定では、1 から 8
            の番号が付けられた 8
            つのコアにスレッドがロックされるため、ここに示す設定と同等です:
          </p><pre class="programlisting">ThreadConfig=main,ldm={count=4,cpuset=1-4},tc={count=4,cpuset=5,6,7}, \
io={cpubind=8},idxbld={cpuset=1,2,3,4,5,6,7,8}
</pre><p>
            <code class="literal">ThreadConfig</code>
            を使用することで得られる高い安定性を生かすには、CPU
            が隔離されていて、割り込みを受けたり、オペレーティングシステムによってほかのタスクをスケジュールされたりしない必要があります。
            多くの Linux
            システムでは、<code class="filename">/etc/sysconfig/irqbalance</code>
            の <code class="literal">IRQBALANCE_BANNED_CPUS</code> を
            <code class="literal">0xFFFFF0</code>
            に設定し、<code class="filename">grub.conf</code> の
            <code class="literal">isolcpus</code>
            ブートオプションを使用することで、これを実現できます。
            具体的な情報については、オペレーティングシステムまたはプラットフォームのドキュメントを参照してください。
          </p></li></ul></div><p><a name="mysql-cluster-ndbd-definition-disk-data-parameters"></a><b>ディスクデータの構成パラメータ. </b>
          ディスクデータの動作に影響を与える構成パラメータには、次が含まれます。
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="ndbparam-ndbd-diskpagebufferentries"></a>
            <code class="literal">DiskPageBufferEntries</code>
          </p><a class="indexterm" name="idm45563228921696"></a><div class="informaltable"><a name="diskpagebufferentries-ndbd-table"></a><table frame="box" rules="all" summary="DiskPageBufferEntries データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>32K pages</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>10</td>
              </tr><tr>
                <th>範囲</th>
                <td>1 - 1000</td>
              </tr><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.19</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>bytes</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>64MB</td>
              </tr><tr>
                <th>範囲</th>
                <td>4MB - 16TB</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            これは、割り当てるページエントリ
            (ページ参照) の数です。
            これは、<code class="literal">DiskPageBufferMemory</code>
            で 32K ページの数として指定されます。
            ほとんどの場合、デフォルトで十分ですが、「ディスクデータ」テーブルで非常に大きなトランザクションに問題が発生した場合は、このパラメータの値を増やす必要があります。
            各ページエントリには約 100
            バイトが必要です。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-diskpagebuffermemory"></a>
            <code class="literal">DiskPageBufferMemory</code>
          </p><a class="indexterm" name="idm45563228891888"></a><div class="informaltable"><a name="diskpagebuffermemory-ndbd-table"></a><table frame="box" rules="all" summary="DiskPageBufferMemory データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>bytes</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>64M</td>
              </tr><tr>
                <th>範囲</th>
                <td>4M - 1T</td>
              </tr><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.19</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>bytes</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>64M</td>
              </tr><tr>
                <th>範囲</th>
                <td>4M - 16T</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            これは、ディスク上のページをキャッシュするために使用されるスペースの量を指定するもので、<code class="filename">config.ini</code>
            ファイルの <code class="literal">[ndbd]</code> または
            <code class="literal">[ndbd default]</code>
            セクションで設定されます。
          </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
              以前は、このパラメータは 32 KB
              のページ数として指定されていました。 NDB
              8.0.19
              以降では、バイト数として指定されます。
            </p></div><p>
            <code class="literal">ThreadConfig</code>
            (<code class="literal">{ldm=6...}</code> など)
            でデフォルト数を超える LDM
            スレッドを使用する場合に
            <code class="literal">DiskPageBufferMemory</code>
            の値が小さすぎると、大きな (500G などの)
            データファイルをディスクベースの
            <code class="literal">NDB</code>
            テーブルに追加しようとしたときに問題が発生することがあり、CPU
            コアのいずれかを占有している間、プロセスが無限に長くなる可能性があります。
          </p><p>
            これは、テーブルスペースへのデータファイルの追加の一環としてエクステントページが
            PGMAN
            ワーカースレッドでメモリーにロックされ、メタデータにすばやくアクセスできるためです。
            大きいファイルを追加する場合、このワーカーにはすべてのデータファイルメタデータに対して十分なメモリーがありません。
            このような場合は、<code class="literal">DiskPageBufferMemory</code>
            を増やすか、小さいテーブルスペースファイルを追加する必要があります。
            <code class="literal">DiskPageBufferEntries</code>
            の調整が必要になる場合もあります。
          </p><p>
            <code class="literal">ndbinfo.diskpagebuffer</code>
            テーブルをクエリーすると、不要なディスクシークを最小限に抑えるためにこのパラメータの値を増やすべきかどうか判定しやすくなります。
            詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndbinfo-diskpagebuffer" title="23.5.14.27 ndbinfo diskpagebuffer テーブル">セクション23.5.14.27「ndbinfo diskpagebuffer テーブル」</a>を参照してください。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-sharedglobalmemory"></a>
            <code class="literal">SharedGlobalMemory</code>
          </p><a class="indexterm" name="idm45563228849776"></a><div class="informaltable"><a name="sharedglobalmemory-ndbd-table"></a><table frame="box" rules="all" summary="SharedGlobalMemory データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>bytes</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>128M</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 64T</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            このパラメータは、テーブルスペース、ログファイルグループ、<code class="literal">Undo</code>
            ファイル、およびデータファイル用のログバッファー、ディスク操作
            (ページ要求や待機キューなど)、およびメタデータに使用されるメモリーの量を指定します。
            共有グローバルメモリープールは、<code class="literal">CREATE
            LOGFILE GROUP</code> および <code class="literal">ALTER
            LOGFILE GROUP</code>
            ステートメントで使用される
            <code class="literal">UNDO_BUFFER_SIZE</code>
            オプションのメモリー要件を満たすために使用されるメモリーも提供します。これには、<code class="literal">InitialLogFileGroup</code>
            データノード構成パラメータの設定によってこのオプションに暗黙的に指定されるデフォルト値も含まれます。
            <code class="literal">SharedGlobalMemory</code>
            は、<code class="filename">config.ini</code> 構成ファイルの
            <code class="literal">[ndbd]</code> または <code class="literal">[ndbd
            default]</code>
            セクションに設定でき、バイト単位で測定されます。
          </p><p>
            デフォルト値は <code class="literal">128M</code> です。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-diskiothreadpool"></a>
            <code class="literal">DiskIOThreadPool</code>
          </p><a class="indexterm" name="idm45563228820256"></a><a class="indexterm" name="idm45563228818912"></a><div class="informaltable"><a name="diskiothreadpool-ndbd-table"></a><table frame="box" rules="all" summary="DiskIOThreadPool データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>threads</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>2</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            このパラメータは、ディスクデータファイルへのアクセスに使用される未バインドスレッドの数を指定します。
            <code class="literal">DiskIOThreadPool</code>
            が導入される前は、ディスクデータファイルごとに
            1
            つのスレッドしか生成されなかったため、特に非常に大きいデータファイルを使用する場合に、パフォーマンスの問題が発生する可能性がありました。
            <code class="literal">DiskIOThreadPool</code>
            を使用すると、たとえば、並列で動作する複数のスレッドを使用して
            1
            つの大きなデータファイルにアクセスできます。
          </p><p>
            このパラメータは、ディスクデータ I/O
            スレッドにのみ適用されます。
          </p><p>
            このパラメータの最適な値は、使用しているハードウェアと構成によって異なり、次の要因を含みます。
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><b>ディスクデータファイルの物理的な分布. </b>
                  データファイル、Undo
                  ログファイル、およびデータノードファイルシステムを別々の物理ディスクに配置することで、パフォーマンスを向上させることができます。
                  これらのファイルセットの一部またはすべてでこれを行う場合は、<code class="literal">DiskIOThreadPool</code>
                  をより高く設定して、個別のスレッドで各ディスク上のファイルを処理できるようにすることができます。
                </p><p>
                NDB 8.0.19
                以降では、「ディスクデータ」ファイル用に別のディスクを使用する場合も
                <code class="literal">DiskDataUsingSameDisk</code>
                を無効にするようにしてください。これにより、「ディスクデータ」テーブルスペースのチェックポイントを実行できる速度が向上します。
              </p></li><li class="listitem"><p><b>ディスクのパフォーマンスとタイプ. </b>
                  ディスクデータファイルの処理用に提供できるスレッドの数は、ディスクの速度とスループットにも依存します。
                  ディスクの速度が速く、スループットが高いほど、より多くの
                  I/O スレッドを使用できます。
                  弊社のテスト結果では、従来のディスクよりソリッドステートディスクドライブの方が
                  (つまり
                  <code class="literal">DiskIOThreadPool</code>
                  の値が大きいほど)
                  はるかに多くのディスク I/O
                  スレッドを処理できることを示しています。
                </p><p>
                ソリッドステートディスクドライブ (特に
                NVMe を使用するディスクドライブ)
                を使用する場合は、<code class="literal">TimeBetweenGlobalCheckpoints</code>
                を減らすこともお薦めします。
                <a class="xref" href="mysql-cluster.html#mysql-cluster-ndbd-definition-disk-data-latency-parameters" title="ディスクデータ待機時間パラメータ">ディスクデータ待機時間パラメータ</a>も参照してください。
              </p></li></ul></div><p>
            このパラメータのデフォルト値は 2 です。
          </p></li><li class="listitem"><p><a name="mysql-cluster-ndbd-disk-data-filesystem-parameters"></a><b>ディスクデータのファイルシステムパラメータ. </b>
              次のリストのパラメータを使用すると、シンボリックリンクを使用しなくても
              NDB Cluster
              ディスクデータファイルを特定のディレクトリに配置できます。
            </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><a name="ndbparam-ndbd-filesystempathdd"></a>
                <code class="literal">FileSystemPathDD</code>
              </p><a class="indexterm" name="idm45563228778528"></a><div class="informaltable"><a name="filesystempathdd-ndbd-table"></a><table frame="box" rules="all" summary="FileSystemPathDD データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                    <th>バージョン (またはそれ以降)</th>
                    <td>NDB 8.0.13</td>
                  </tr><tr>
                    <th>タイプまたは単位</th>
                    <td>filename</td>
                  </tr><tr>
                    <th>デフォルト</th>
                    <td>FileSystemPath</td>
                  </tr><tr>
                    <th>範囲</th>
                    <td>...</td>
                  </tr><tr>
                    <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                    <td><p>
                        IN (NDB 8.0.13)
                      </p></td>
                  </tr></tbody></table></div><p>
                このパラメータが指定されている場合、NDB
                Cluster ディスクデータデータファイルと
                undo
                ログファイルは指定されたディレクトリに配置されます。
                データファイル、Undo
                ログファイル、またはその両方をオーバーライドするには、<code class="literal">FileSystemPathDataFiles</code>、<code class="literal">FileSystemPathUndoFiles</code>、またはその両方の値をこれらのパラメータの説明に従って指定します。
                データファイルでは <code class="literal">CREATE
                TABLESPACE</code> または
                <code class="literal">ALTER TABLESPACE</code>
                ステートメントの <code class="literal">ADD DATAFILE</code>
                句にパスを指定し、Undo ログファイルでは
                <code class="literal">CREATE LOGFILE GROUP</code>
                または <code class="literal">ALTER LOGFILE
                GROUP</code> ステートメントの <code class="literal">ADD
                UNDOFILE</code>
                句でパスを指定してオーバーライドすることもできます。
                <code class="literal">FileSystemPathDD</code>
                が指定されていない場合は、<code class="literal">FileSystemPath</code>
                が使用されます。
              </p><p>
                特定のデータノードで
                <code class="literal">FileSystemPathDD</code>
                ディレクトリが指定された場合
                (<code class="filename">config.ini</code> ファイルの
                <code class="literal">[ndbd default]</code>
                セクションでこのパラメータが指定された場合を含む)、<code class="option">--initial</code>
                を指定してデータノードを起動すると、ディレクトリ内のすべてのファイルが削除されます。
              </p></li><li class="listitem"><p><a name="ndbparam-ndbd-filesystempathdatafiles"></a>
                <code class="literal">FileSystemPathDataFiles</code>
              </p><a class="indexterm" name="idm45563228744336"></a><div class="informaltable"><a name="filesystempathdatafiles-ndbd-table"></a><table frame="box" rules="all" summary="FileSystemPathDataFiles データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                    <th>バージョン (またはそれ以降)</th>
                    <td>NDB 8.0.13</td>
                  </tr><tr>
                    <th>タイプまたは単位</th>
                    <td>filename</td>
                  </tr><tr>
                    <th>デフォルト</th>
                    <td>FileSystemPathDD</td>
                  </tr><tr>
                    <th>範囲</th>
                    <td>...</td>
                  </tr><tr>
                    <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                    <td><p>
                        IN (NDB 8.0.13)
                      </p></td>
                  </tr></tbody></table></div><p>
                このパラメータが指定されている場合、NDB
                Cluster
                ディスクデータファイルは指定されたディレクトリに配置されます。
                これは、<code class="literal">FileSystemPathDD</code>
                に設定された値をオーバーライドします。
                特定のデータファイルのパラメータをオーバーライドするには、そのデータファイルを作成するために使用される
                <code class="literal">CREATE TABLESPACE</code>
                または <code class="literal">ALTER
                TABLESPACE</code> ステートメントの
                <code class="literal">ADD DATAFILE</code>
                句でパスを指定します。
                <code class="literal">FileSystemPathDataFiles</code>
                が指定されていない場合は、<code class="literal">FileSystemPathDD</code>
                が使用されます
                (<code class="literal">FileSystemPathDD</code>
                も設定されていない場合は、<code class="literal">FileSystemPath</code>
                が使用されます)。
              </p><p>
                特定のデータノードで
                <code class="literal">FileSystemPathDataFiles</code>
                ディレクトリが指定された場合
                (<code class="filename">config.ini</code> ファイルの
                <code class="literal">[ndbd default]</code>
                セクションにこのパラメータが指定された場合を含む)、<code class="option">--initial</code>
                を指定してそのデータノードを起動すると、ディレクトリ内のすべてのファイルが削除されます。
              </p></li><li class="listitem"><p><a name="ndbparam-ndbd-filesystempathundofiles"></a>
                <code class="literal">FileSystemPathUndoFiles</code>
              </p><a class="indexterm" name="idm45563228711536"></a><div class="informaltable"><a name="filesystempathundofiles-ndbd-table"></a><table frame="box" rules="all" summary="FileSystemPathUndoFiles データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                    <th>バージョン (またはそれ以降)</th>
                    <td>NDB 8.0.13</td>
                  </tr><tr>
                    <th>タイプまたは単位</th>
                    <td>filename</td>
                  </tr><tr>
                    <th>デフォルト</th>
                    <td>FileSystemPathDD</td>
                  </tr><tr>
                    <th>範囲</th>
                    <td>...</td>
                  </tr><tr>
                    <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                    <td><p>
                        IN (NDB 8.0.13)
                      </p></td>
                  </tr></tbody></table></div><p>
                このパラメータが指定されている場合、NDB
                Cluster Disk Data undo
                ログファイルは指定されたディレクトリに配置されます。
                これは、<code class="literal">FileSystemPathDD</code>
                に設定された値をオーバーライドします。
                特定のデータファイルの作成に使用する
                <code class="literal">CREATE LOGFILE GROUP</code>
                ステートメントまたは
                <code class="literal">ALTER LOGFILE GROUP</code>
                ステートメントの <code class="literal">ADD UNDO</code>
                句にパスを指定することで、そのデータファイルのこのパラメータをオーバーライドできます。
                <code class="literal">FileSystemPathUndoFiles</code>
                が指定されていない場合は、<code class="literal">FileSystemPathDD</code>
                が使用されます
                (<code class="literal">FileSystemPathDD</code>
                も設定されていない場合は、<code class="literal">FileSystemPath</code>
                が使用されます)。
              </p><p>
                特定のデータノードで
                <code class="literal">FileSystemPathUndoFiles</code>
                ディレクトリが指定された場合
                (<code class="filename">config.ini</code> ファイルの
                <code class="literal">[ndbd default]</code>
                セクションにこのパラメータが指定された場合を含む)、<code class="option">--initial</code>
                を指定してそのデータノードを起動すると、ディレクトリ内のすべてのファイルが削除されます。
              </p></li></ul></div><p>
            詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-disk-data-objects" title="23.5.10.1 NDB Cluster ディスクデータオブジェクト">セクション23.5.10.1「NDB Cluster ディスクデータオブジェクト」</a>を参照してください。
          </p></li><li class="listitem"><p><a name="mysql-cluster-ndbd-disk-data-object-creation-parameters"></a><b>ディスクデータのオブジェクト作成パラメータ. </b>
              次の 2
              つのパラメータを使用すると、クラスタを最初に起動したときに、SQL
              ステートメントを使用せずにディスクデータのログファイルグループ、テーブルスペース、またはその両方を作成できます。
            </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><a name="ndbparam-ndbd-initiallogfilegroup"></a>
                <code class="literal">InitialLogFileGroup</code>
              </p><a class="indexterm" name="idm45563228674544"></a><div class="informaltable"><a name="initiallogfilegroup-ndbd-table"></a><table frame="box" rules="all" summary="InitialLogFileGroup データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                    <th>バージョン (またはそれ以降)</th>
                    <td>NDB 8.0.13</td>
                  </tr><tr>
                    <th>タイプまたは単位</th>
                    <td>string</td>
                  </tr><tr>
                    <th>デフォルト</th>
                    <td>[see documentation]</td>
                  </tr><tr>
                    <th>範囲</th>
                    <td>...</td>
                  </tr><tr>
                    <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                    <td><p>
                        S (NDB 8.0.13)
                      </p></td>
                  </tr></tbody></table></div><p>
                このパラメータを使用して、クラスタの初期起動の実行時に作成されるログファイルグループを指定できます。
                <code class="literal">InitialLogFileGroup</code>
                は、ここに示すように指定されます。
              </p><pre class="programlisting">InitialLogFileGroup = [name=<em class="replaceable"><code>name</code></em>;] [undo_buffer_size=<em class="replaceable"><code>size</code></em>;] <em class="replaceable"><code>file-specification-list</code></em>

<em class="replaceable"><code>file-specification-list</code></em>:
    <em class="replaceable"><code>file-specification</code></em>[; <em class="replaceable"><code>file-specification</code></em>[; ...]]

<em class="replaceable"><code>file-specification</code></em>:
    <em class="replaceable"><code>filename</code></em>:<em class="replaceable"><code>size</code></em>
</pre><p>
                ログファイルグループの
                <code class="literal">name</code>
                はオプションであり、デフォルト値は
                <code class="literal">DEFAULT-LG</code> です。
                <code class="literal">undo_buffer_size</code>
                もオプションです。省略した場合のデフォルト値は
                <code class="literal">64M</code> です。
                <em class="replaceable"><code>file-specification</code></em>
                は、それぞれ 1 つの Undo
                ログファイルに対応し、<em class="replaceable"><code>file-specification-list</code></em>
                に少なくとも 1
                つ指定する必要があります。 Undo
                ログファイルは、<code class="literal">FileSystemPath</code>、<code class="literal">FileSystemPathDD</code>、および
                <code class="literal">FileSystemPathUndoFiles</code>
                に設定された値に従って、<code class="literal">CREATE
                LOGFILE GROUP</code> または
                <code class="literal">ALTER LOGFILE GROUP</code>
                ステートメントの結果として作成された場合と同じように配置されます。
              </p><p>
                次について考えます。
              </p><pre class="programlisting">InitialLogFileGroup = name=LG1; undo_buffer_size=128M; undo1.log:250M; undo2.log:150M
</pre><p>
                これは、次の SQL
                ステートメントと同等です。
              </p><pre class="programlisting">CREATE LOGFILE GROUP LG1
    ADD UNDOFILE 'undo1.log'
    INITIAL_SIZE 250M
    UNDO_BUFFER_SIZE 128M
    ENGINE NDBCLUSTER;

ALTER LOGFILE GROUP LG1
    ADD UNDOFILE 'undo2.log'
    INITIAL_SIZE 150M
    ENGINE NDBCLUSTER;
</pre><p>
                このログファイルグループは、<code class="option">--initial</code>
                を指定してデータノードを起動したときに作成されます。
              </p><p>
                初期ログファイルグループのリソースは、<code class="literal">SharedGlobalMemory</code>
                の値で示されるリソースとともにグローバルメモリープールに追加されます。
              </p><p>
                このパラメータを使用する場合は、常に
                <code class="filename">config.ini</code> ファイルの
                <code class="literal">[ndbd default]</code>
                セクションに設定するようにしてください。
                異なるデータノードに異なる値が設定されている場合の
                NDB Cluster の動作は定義されません。
              </p></li><li class="listitem"><p><a name="ndbparam-ndbd-initialtablespace"></a>
                <code class="literal">InitialTablespace</code>
              </p><a class="indexterm" name="idm45563228629696"></a><div class="informaltable"><a name="initialtablespace-ndbd-table"></a><table frame="box" rules="all" summary="InitialTablespace データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                    <th>バージョン (またはそれ以降)</th>
                    <td>NDB 8.0.13</td>
                  </tr><tr>
                    <th>タイプまたは単位</th>
                    <td>string</td>
                  </tr><tr>
                    <th>デフォルト</th>
                    <td>[see documentation]</td>
                  </tr><tr>
                    <th>範囲</th>
                    <td>...</td>
                  </tr><tr>
                    <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                    <td><p>
                        S (NDB 8.0.13)
                      </p></td>
                  </tr></tbody></table></div><p>
                このパラメータを使用して、クラスタの初期起動時に作成される「NDB
                Cluster
                ディスクデータ」テーブルスペースを指定できます。
                <code class="literal">InitialTablespace</code>
                は、ここに示すように指定されます。
              </p><pre class="programlisting">InitialTablespace = [name=<em class="replaceable"><code>name</code></em>;] [extent_size=<em class="replaceable"><code>size</code></em>;] <em class="replaceable"><code>file-specification-list</code></em>
</pre><p>
                テーブルスペースの <code class="literal">name</code>
                はオプションであり、デフォルト値は
                <code class="literal">DEFAULT-TS</code> です。
                <code class="literal">extent_size</code>
                もオプションです。デフォルト値は
                <code class="literal">1M</code> です。
                <em class="replaceable"><code>file-specification-list</code></em>
                には、<code class="literal">InitialLogfileGroup</code>
                パラメータに示された同じ構文が使用されます。唯一の違いは、<code class="literal">InitialTablespace</code>
                で使用される
                <em class="replaceable"><code>file-specification</code></em>
                がそれぞれ 1
                つのデータファイルに対応することです。
                <em class="replaceable"><code>file-specification-list</code></em>
                には、少なくとも 1
                つを指定する必要があります。
                データファイルは、<code class="literal">FileSystemPath</code>、<code class="literal">FileSystemPathDD</code>、および
                <code class="literal">FileSystemPathDataFiles</code>
                に設定された値に従って、<code class="literal">CREATE
                TABLESPACE</code> または
                <code class="literal">ALTER TABLESPACE</code>
                ステートメントの結果として作成された場合と同じように配置されます。
              </p><p>
                たとえば、<code class="filename">config.ini</code>
                ファイルの<code class="literal">[ndbd
                default]</code>セクションで
                <code class="literal">InitialTablespace</code>
                を指定する次の行を考えてみます
                (<code class="literal">InitialLogfileGroup</code>
                の場合と同様に、異なるデータノードに異なる値が設定されている場合の
                NDB Cluster
                の動作として、このパラメータは常に<code class="literal">[ndbd
                default]</code>セクションで設定するようにしてください):
              </p><pre class="programlisting">InitialTablespace = name=TS1; extent_size=8M; data1.dat:2G; data2.dat:4G
</pre><p>
                これは、次の SQL
                ステートメントと同等です。
              </p><pre class="programlisting">CREATE TABLESPACE TS1
    ADD DATAFILE 'data1.dat'
    EXTENT_SIZE 8M
    INITIAL_SIZE 2G
    ENGINE NDBCLUSTER;

ALTER TABLESPACE TS1
    ADD DATAFILE 'data2.dat'
    INITIAL_SIZE 4G
    ENGINE NDBCLUSTER;
</pre><p>
                このテーブルスペースは、データノードが
                <code class="option">--initial</code>
                で起動されたときに作成され、その後に「NDB
                Cluster
                ディスクデータ」テーブルを作成するたびに使用できます。
              </p></li></ul></div></li><li class="listitem"><p><a name="mysql-cluster-ndbd-definition-disk-data-latency-parameters"></a><b>ディスクデータ待機時間パラメータ. </b>
              ここにリストされている 2
              つのパラメータを使用して、「NDB Cluster
              ディスクデータ」テーブルの待機時間の問題の処理を改善できます。
            </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><a name="ndbparam-ndbd-maxdiskdatalatency"></a>
                <code class="literal">MaxDiskDataLatency</code>
              </p><a class="indexterm" name="idm45563228581056"></a><div class="informaltable"><a name="maxdiskdatalatency-ndbd-table"></a><table frame="box" rules="all" summary="MaxDiskDataLatency データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                    <th>バージョン (またはそれ以降)</th>
                    <td>NDB 8.0.19</td>
                  </tr><tr>
                    <th>タイプまたは単位</th>
                    <td>ms</td>
                  </tr><tr>
                    <th>デフォルト</th>
                    <td>0</td>
                  </tr><tr>
                    <th>範囲</th>
                    <td>0 - 8000</td>
                  </tr><tr>
                    <th>追加</th>
                    <td>NDB 8.0.19</td>
                  </tr><tr>
                    <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                    <td><p>
                        N (NDB 8.0.13)
                      </p></td>
                  </tr></tbody></table></div><p>
                このパラメータは、ディスクアクセスの最大許容平均レイテンシ
                (最大 8000 ミリ秒) を制御します。
                この制限に達すると、ディスクデータ I/O
                サブシステムの圧力を下げるために、<code class="literal">NDB</code>
                はトランザクションの中断を開始します。
                <code class="literal">0</code>
                を使用して、待機時間チェックを無効にします。
              </p></li><li class="listitem"><p><a name="ndbparam-ndbd-diskdatausingsamedisk"></a>
                <code class="literal">DiskDataUsingSameDisk</code>
              </p><a class="indexterm" name="idm45563228557472"></a><div class="informaltable"><a name="diskdatausingsamedisk-ndbd-table"></a><table frame="box" rules="all" summary="DiskDataUsingSameDisk データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                    <th>バージョン (またはそれ以降)</th>
                    <td>NDB 8.0.19</td>
                  </tr><tr>
                    <th>タイプまたは単位</th>
                    <td>boolean</td>
                  </tr><tr>
                    <th>デフォルト</th>
                    <td>true</td>
                  </tr><tr>
                    <th>範囲</th>
                    <td>...</td>
                  </tr><tr>
                    <th>追加</th>
                    <td>NDB 8.0.19</td>
                  </tr><tr>
                    <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                    <td><p>
                        N (NDB 8.0.13)
                      </p></td>
                  </tr></tbody></table></div><p>
                「ディスクデータ」テーブルスペースで個別のディスクが使用されている場合は、このパラメータを
                <code class="literal">false</code> に設定します。
                これにより、ディスクの共有時に通常使用されるよりも高い速度でテーブルスペースへのチェックポイントを実行できます。
              </p><p>
                <code class="literal">DiskDataUsingSameDisk</code> が
                <code class="literal">true</code>
                の場合、<code class="literal">NDB</code>
                では、インメモリーチェックポイントの進行中は常にディスクデータチェックポイントの速度が低下するため、ディスク負荷を一定に保つことができます。
              </p></li></ul></div></li></ul></div><p><a name="mysql-cluster-ndbd-definition-gcp-stop-errors"></a><b>ディスクデータと GCP 停止エラー. </b>
          <span class="errortext">「GCP 停止が検出されたため、ノード
          <em class="replaceable"><code>nodeid</code></em>
          はこのノードを強制終了しました」</span>
          (エラー 2303)
          などの「ディスクデータ」テーブルの使用時に発生する

          <a class="indexterm" name="idm45563228530480"></a>

          <a class="indexterm" name="idm45563228528320"></a>

          エラーは、多くの場合<span class="quote">「<span class="quote">「GCP
          停止エラー」</span>」</span>と呼ばれます。
          このようなエラーは、Redo
          ログが十分な速さでディスクにフラッシュされていない場合に発生します。これは通常、ディスクの速度が低く、ディスクのスループットが十分でないことが原因です。
        </p><p>
        高速なディスクを使用し、ディスクデータファイルをデータノードファイルシステムとは別のディスクに配置することで、これらのエラーを回避しやすくなります。
        <code class="literal">TimeBetweenGlobalCheckpoints</code>
        の値を減らすと、グローバルチェックポイントごとに書き込まれるデータの量が減りやすくなるため、グローバルチェックポイントを書き込もうとしたときに
        Redo
        ログバッファーのオーバーフローをある程度回避できる可能性があります。ただし、この値を減らすと
        GCP
        を書き込むことができる時間も減るため、注意が必要です。
      </p><a class="indexterm" name="idm45563228523104"></a><a class="indexterm" name="idm45563228521760"></a><a class="indexterm" name="idm45563228520416"></a><p>
        前述の
        <code class="literal">DiskPageBufferMemory</code>
        について示した考慮事項に加えて、<code class="literal">DiskIOThreadPool</code>
        構成パラメータを正しく設定することも非常に重要です。<code class="literal">DiskIOThreadPool</code>
        の設定値が大きすぎると、GCP
        停止エラーが発生する可能性が非常に高くなります
        (Bug #37227)。
      </p><p>
        GCP
        の停止は、保存またはコミットのタイムアウトによって発生することがあります。<code class="literal">TimeBetweenEpochsTimeout</code>
        データノード構成パラメータは、コミットのタイムアウトを指定します。
        ただし、このパラメータを 0
        に設定することで、両方のタイプのタイムアウトを無効にできます。
      </p><p><b>送信バッファーメモリーの割り当てを構成するためのパラメータ. </b>
          送信バッファーメモリーは、すべてのトランスポータ間で共有されるメモリープールから動的に割り当てられます。これは、送信バッファーのサイズを必要に応じて調整できることを意味します。
          (以前は、クラスタ内のすべてのノードで NDB
          カーネルが固定サイズの送信バッファーを使用していました。これは、ノードの起動時に割り当てられ、ノードの実行中は変更できませんでした。)
          <code class="literal">TotalSendBufferMemory</code>
          および <code class="literal">OverLoadLimit</code>
          データノード構成パラメータを使用して、このメモリー割り当ての制限を設定できます。
          これらのパラメータ (および
          <code class="literal">SendBufferMemory</code>)
          の使用方法の詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-config-send-buffers" title="23.3.3.14 NDB Cluster 送信バッファーパラメータの構成">セクション23.3.3.14「NDB Cluster 送信バッファーパラメータの構成」</a>を参照してください。
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="ndbparam-ndbd-extrasendbuffermemory"></a>
            <code class="literal">ExtraSendBufferMemory</code>
          </p><a class="indexterm" name="idm45563228504448"></a><p>
            このパラメータは、<code class="literal">TotalSendBufferMemory</code>、<code class="literal">SendBufferMemory</code>、またはその両方を使用して設定されたメモリーに加えて割り当てられるトランスポータ送信バッファーメモリーの量を指定します。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-totalsendbuffermemory"></a>
            <code class="literal">TotalSendBufferMemory</code>
          </p><a class="indexterm" name="idm45563228497584"></a><p>
            このパラメータは、すべての構成済みトランスポータ間で共有される送信バッファーメモリーの、このノードに割り当てられるメモリー合計量を決定するために使用されます。
          </p><p>
            このパラメータが設定されている場合、許可される最小値は
            256KB です。0
            はパラメータが設定されていないことを示します。
            詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-config-send-buffers" title="23.3.3.14 NDB Cluster 送信バッファーパラメータの構成">セクション23.3.3.14「NDB Cluster 送信バッファーパラメータの構成」</a>
            を参照してください。
          </p></li></ul></div><p>
        <a class="xref" href="mysql-cluster.html#mysql-cluster-online-add-node" title="23.5.7 NDB Cluster データノードのオンラインでの追加">セクション23.5.7「NDB Cluster データノードのオンラインでの追加」</a>も参照してください。
      </p><p><a name="mysql-cluster-redo-over-commit-handling"></a><b>Redo ログのオーバーコミット処理. </b>
          Redo
          ログをディスクにフラッシュする時間が長すぎる場合の、データノードによる操作の処理を制御できます。
          これは、特定の Redo ログのフラッシュが
          <code class="literal">RedoOverCommitLimit</code>
          秒より長い時間をかけて
          <code class="literal">RedoOverCommitCounter</code>
          回を超える回数分行われ、保留中のトランザクションが中止されたときに発生します。
          これが発生すると、トランザクションを送信した
          API
          ノードは、コミットされるはずだった操作を
          (<code class="literal">DefaultOperationRedoProblemAction</code>
          の指定に従って)
          キューに配置して再試行するか、中止することで処理できます。
          API
          ノードでこのアクションが実行される前に超過が許されるタイムアウトと回数を設定するためのデータノード構成パラメータについて、次のリストで説明します。
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="ndbparam-ndbd-redoovercommitcounter"></a>
            <code class="literal">RedoOverCommitCounter</code>
          </p><a class="indexterm" name="idm45563228482704"></a><div class="informaltable"><a name="redoovercommitcounter-ndbd-table"></a><table frame="box" rules="all" summary="RedoOverCommitCounter データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>numeric</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>3</td>
              </tr><tr>
                <th>範囲</th>
                <td>1 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.19</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>numeric</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>3</td>
              </tr><tr>
                <th>範囲</th>
                <td>1 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            特定の Redo
            ログをディスクに書き込もうとしたときに
            <code class="literal">RedoOverCommitLimit</code>
            を超過した回数がこの回数を超えると、結果としてコミットされなかったトランザクションはすべて中止され、トランザクションの発生元である
            API
            ノードは、これらのトランザクションを構成する操作を
            <code class="literal">DefaultOperationRedoProblemAction</code>
            の値に従って
            (操作をキューに入れて再試行するか、中止して)
            処理します。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-redoovercommitlimit"></a>
            <code class="literal">RedoOverCommitLimit</code>
          </p><a class="indexterm" name="idm45563228450960"></a><div class="informaltable"><a name="redoovercommitlimit-ndbd-table"></a><table frame="box" rules="all" summary="RedoOverCommitLimit データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>seconds</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>20</td>
              </tr><tr>
                <th>範囲</th>
                <td>1 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.19</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>seconds</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>20</td>
              </tr><tr>
                <th>範囲</th>
                <td>1 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            このパラメータは、特定の Redo
            ログをディスクに書き込もうとしたときにタイムアウトするまでの上限
            (秒単位) を設定します。
            データノードがこの Redo
            ログをフラッシュしようとして
            <code class="literal">RedoOverCommitLimit</code>
            よりも長い時間がかかった回数が保存され、<code class="literal">RedoOverCommitCounter</code>
            と比較されます。フラッシュにかかる時間が長すぎた回数がこのパラメータの値より多くなったときは、フラッシュタイムアウトの結果としてコミットされなかったトランザクションがすべて中止されます。
            これが発生すると、トランザクションの発生元である
            API
            ノードは、これらのトランザクションを構成する操作を
            <code class="literal">DefaultOperationRedoProblemAction</code>
            の設定に従って
            (操作をキューに入れて再試行するか、中止することで)
            処理します。
          </p></li></ul></div><p><b>再起動試行の制御. </b>
          <code class="literal">MaxStartFailRetries</code>
          および
          <code class="literal">StartFailRetryDelay</code>
          データノード構成パラメータを使用すると、データノードによる起動失敗時の再起動試行を細かく制御できます。
        </p><p>
        <code class="literal">MaxStartFailRetries</code>
        は、データノードの起動を中止するまでに行われる再試行の合計数を制限します。<code class="literal">StartFailRetryDelay</code>
        は、再試行間の秒数を設定します。
        これらのパラメータをここに示します。
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="ndbparam-ndbd-startfailretrydelay"></a>
            <code class="literal">StartFailRetryDelay</code>
          </p><a class="indexterm" name="idm45563228411184"></a><div class="informaltable"><a name="startfailretrydelay-ndbd-table"></a><table frame="box" rules="all" summary="StartFailRetryDelay データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>unsigned</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>0</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            このパラメータを使用して、データノードによる起動失敗時の再試行間の秒数を設定します。
            デフォルトは 0 (遅延なし) です。
          </p><p>
            <code class="literal">StopOnError</code> が 0
            でない場合は、このパラメータと
            <code class="literal">MaxStartFailRetries</code>
            の両方が無視されます。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-maxstartfailretries"></a>
            <code class="literal">MaxStartFailRetries</code>
          </p><a class="indexterm" name="idm45563228388960"></a><div class="informaltable"><a name="maxstartfailretries-ndbd-table"></a><table frame="box" rules="all" summary="MaxStartFailRetries データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>unsigned</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>3</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            このパラメータを使用して、データノードによる起動失敗時の再試行回数を制限します。
            デフォルトは 3 回です。
          </p><p>
            <code class="literal">StopOnError</code> が 0
            でない場合は、このパラメータと
            <code class="literal">StartFailRetryDelay</code>
            の両方が無視されます。
          </p></li></ul></div><p><a name="mysql-cluster-ndbd-definition-index-statistics-parameters"></a><b>NDB インデックス統計のパラメータ. </b>
          <a class="indexterm" name="idm45563228367088"></a>

          次のリストのパラメータは NDB
          インデックス統計の生成に関連しています。
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="ndbparam-ndbd-indexstatautocreate"></a>
            <code class="literal">IndexStatAutoCreate</code>
          </p><a class="indexterm" name="idm45563228362176"></a><div class="informaltable"><a name="indexstatautocreate-ndbd-table"></a><table frame="box" rules="all" summary="IndexStatAutoCreate データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>integer</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>0</td>
              </tr><tr>
                <th>範囲</th>
                <td>0, 1</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td></td>
              </tr></tbody></table></div><p>
            インデックスの作成時に自動統計収集を有効
            (1 に設定) または無効 (0 に設定) にします。
            デフォルトで無効になっています。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-indexstatautoupdate"></a>
            <code class="literal">IndexStatAutoUpdate</code>
          </p><a class="indexterm" name="idm45563228342192"></a><div class="informaltable"><a name="indexstatautoupdate-ndbd-table"></a><table frame="box" rules="all" summary="IndexStatAutoUpdate データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>integer</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>0</td>
              </tr><tr>
                <th>範囲</th>
                <td>0, 1</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td></td>
              </tr></tbody></table></div><p>
            インデックスの変更の監視を有効化 (1
            に設定) または無効化 (0 に設定)
            し、これらの自動統計更新をトリガーします。
            更新をトリガーするために必要な変更の量およびレベルは、<code class="literal">IndexStatTriggerPct</code>
            および
            <code class="literal">IndexStatTriggerScale</code>
            オプションの設定によって決定されます。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-indexstatsavesize"></a>
            <code class="literal">IndexStatSaveSize</code>
          </p><a class="indexterm" name="idm45563228319936"></a><div class="informaltable"><a name="indexstatsavesize-ndbd-table"></a><table frame="box" rules="all" summary="IndexStatSaveSize データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>bytes</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>32768</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    IN (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            <code class="literal">NDB</code>
            システムテーブルおよび <span class="command"><strong>mysqld</strong></span>
            メモリーキャッシュに保存される特定のインデックスの統計に対して許容される最大スペース
            (バイト単位)。
          </p><p>
            サイズ制限に関係なく、常に少なくとも 1
            つのサンプルが生成されます。
            このサイズは、<code class="literal">IndexStatSaveScale</code>
            によってスケーリングされます。
          </p><p>
            大規模なインデックスでは、<code class="literal">IndexStatSaveSize</code>
            に指定されたサイズが
            <code class="literal">IndexStatTriggerPct</code> に 0.01
            を掛けた値によって調整されます。
            これにはさらに、インデックスサイズの 2
            を底とする対数が乗算されます。
            <code class="literal">IndexStatTriggerPct</code> を 0
            に設定すると、この調整が無効になります。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-indexstatsavescale"></a>
            <code class="literal">IndexStatSaveScale</code>
          </p><a class="indexterm" name="idm45563228292512"></a><div class="informaltable"><a name="indexstatsavescale-ndbd-table"></a><table frame="box" rules="all" summary="IndexStatSaveScale データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>percentage</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>100</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    IN (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            大規模なインデックスでは、<code class="literal">IndexStatSaveSize</code>
            に指定されたサイズが
            <code class="literal">IndexStatTriggerPct</code> に 0.01
            を掛けた値によって調整されます。
            これにはさらに、インデックスサイズの 2
            を底とする対数が乗算されます。
            <code class="literal">IndexStatTriggerPct</code> を 0
            に設定すると、この調整が無効になります。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-indexstattriggerpct"></a>
            <code class="literal">IndexStatTriggerPct</code>
          </p><a class="indexterm" name="idm45563228269424"></a><div class="informaltable"><a name="indexstattriggerpct-ndbd-table"></a><table frame="box" rules="all" summary="IndexStatTriggerPct データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>percentage</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>100</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    IN (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            インデックス統計更新をトリガーする更新内の変更割合。
            この値は、<code class="literal">IndexStatTriggerScale</code>
            によって調整されます。
            このトリガーを完全に無効にするには、<code class="literal">IndexStatTriggerPct</code>
            を 0 に設定します。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-indexstattriggerscale"></a>
            <code class="literal">IndexStatTriggerScale</code>
          </p><a class="indexterm" name="idm45563228247296"></a><div class="informaltable"><a name="indexstattriggerscale-ndbd-table"></a><table frame="box" rules="all" summary="IndexStatTriggerScale データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>percentage</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>100</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    IN (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            大規模なインデックスでは、この量に 0.01
            を掛けた値で
            <code class="literal">IndexStatTriggerPct</code>
            を調整します。 値 0
            で調整が無効になります。
          </p></li><li class="listitem"><p><a name="ndbparam-ndbd-indexstatupdatedelay"></a>
            <code class="literal">IndexStatUpdateDelay</code>
          </p><a class="indexterm" name="idm45563228225984"></a><div class="informaltable"><a name="indexstatupdatedelay-ndbd-table"></a><table frame="box" rules="all" summary="IndexStatUpdateDelay データノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>seconds</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>60</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-ndbd-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    IN (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            特定のインデックスの自動インデックス統計更新間の最小遅延
            (秒数)。 この変数を 0
            に設定すると、遅延が無効になります。
            デフォルトは 60 秒です。
          </p></li></ul></div><p><a name="mysql-cluster-ndbd-definition-restart-types"></a><b>再起動のタイプ. </b>
          このセクションのパラメータの説明で使用される再起動タイプに関する情報を次のテーブルに示します:
        </p><div class="table"><a name="idm45563228205456"></a><p class="title"><b>表 23.16 NDB Cluster の再起動タイプ</b></p><div class="table-contents"><table><col style="width: 10%"><col style="width: 30%"><col style="width: 60%"><thead><tr>
            <th scope="col">シンボル</th>
            <th scope="col">再起動タイプ</th>
            <th scope="col">説明</th>
          </tr></thead><tbody><tr>
            <th scope="row">N</th>
            <td>ノード</td>
            <td>パラメータはローリング再起動を使用して更新できます
              (<a class="xref" href="mysql-cluster.html#mysql-cluster-rolling-restart" title="23.5.5 NDB Cluster のローリング再起動の実行">セクション23.5.5「NDB Cluster のローリング再起動の実行」</a>
              を参照)</td>
          </tr><tr>
            <th scope="row">S</th>
            <td>システム</td>
            <td>このパラメータの変更を有効にするには、すべてのクラスタノードを完全に停止してから再起動する必要があります</td>
          </tr><tr>
            <th scope="row">I</th>
            <td>Initial</td>
            <td><code class="option">--initial</code>
              オプションを使用してデータノードを再起動する必要があります</td>
          </tr></tbody></table></div></div><br class="table-break"></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-api-definition"></a>23.3.3.7 NDB Cluster での SQL およびその他の API ノードの定義</h4></div></div></div><a class="indexterm" name="idm45563228184832"></a><a class="indexterm" name="idm45563228182800"></a><a class="indexterm" name="idm45563228180640"></a><p>
        <code class="filename">config.ini</code> ファイルの
        <code class="literal">[mysqld]</code> および <code class="literal">[api]</code>
        セクションでは、クラスタデータへのアクセスに使用される
        MySQL サーバー (SQL ノード)
        およびその他のアプリケーション (API ノード)
        が定義されます。
        示されているどのパラメータも必須ではありません。
        コンピュータ名またはホスト名が指定されていない場合は、任意のホストでこの
        SQL または API ノードを使用できます。
      </p><p>
        一般的には、<code class="literal">[mysqld]</code>
        セクションはクラスタへの SQL
        インタフェースを提供する MySQL
        サーバーを示すために使用され、<code class="literal">[api]</code>
        セクションはクラスタデータにアクセスする
        <span class="command"><strong>mysqld</strong></span>
        プロセス以外のアプリケーションのために使用されますが、この
        2 つの指定は実際には同義です。たとえば、SQL
        ノードとして機能する MySQL
        サーバーのパラメータを <code class="literal">[api]</code>
        セクションに指定できます。
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
          NDB Cluster の MySQL
          サーバーオプションについては、<a class="xref" href="mysql-cluster.html#mysql-cluster-program-options-mysqld" title="23.3.3.9.1 NDB Cluster の MySQL Server オプション">セクション23.3.3.9.1「NDB Cluster の MySQL Server オプション」</a>
          を参照してください。 NDB Cluster に関連する
          MySQL
          サーバーシステム変数については、<a class="xref" href="mysql-cluster.html#mysql-cluster-system-variables" title="23.3.3.9.2 NDB Cluster システム変数">セクション23.3.3.9.2「NDB Cluster システム変数」</a>
          を参照してください。
        </p></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="ndbparam-api-id"></a>
            <code class="literal">Id</code>
          </p><a class="indexterm" name="idm45563228166464"></a><div class="informaltable"><a name="id-api-table"></a><table frame="box" rules="all" summary="Id API ノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>unsigned</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>[...]</td>
              </tr><tr>
                <th>範囲</th>
                <td>1 - 255</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-api-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    IS (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            <code class="literal">Id</code>
            は、すべてのクラスタ内部メッセージ内でノードを識別するために使用される整数値です。
            許容される値の範囲は、1-255 (これらを含む)
            です。
            この値は、ノードのタイプに関係なく、クラスタ内の各ノードで一意である必要があります。
          </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
              NDB 8.0.18 以降では、データノード ID は 145
              未満である必要があります。
              多数のデータノードを配備する予定の場合は、API
              ノード (および管理ノード) のノード ID を
              144
              より大きい値に制限することをお勧めします。
              (NDB 8.0.18 より前では、データノード ID
              でサポートされる最大値は 48 でした。)
            </p></div><p>
            <code class="literal">NodeId</code> は、API
            ノードを識別するときに使用することが推奨されるパラメータ名です。
            (<code class="literal">Id</code>
            は、下位互換性に引き続き対応しますが、現在は非推奨であり、使用時に警告を生成します。
            また、これは今後削除される予定です。)
          </p></li><li class="listitem"><p><a name="ndbparam-api-connectionmap"></a>
            <code class="literal">ConnectionMap</code>
          </p><a class="indexterm" name="idm45563228142080"></a><div class="informaltable"><a name="connectionmap-api-table"></a><table frame="box" rules="all" summary="ConnectionMap API ノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>string</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>[...]</td>
              </tr><tr>
                <th>範囲</th>
                <td>...</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-api-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            接続するデータノードを指定します。
          </p></li><li class="listitem"><p><a name="ndbparam-api-nodeid"></a>
            <code class="literal">NodeId</code>
          </p><a class="indexterm" name="idm45563228123136"></a><div class="informaltable"><a name="nodeid-api-table"></a><table frame="box" rules="all" summary="NodeId API ノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>unsigned</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>[...]</td>
              </tr><tr>
                <th>範囲</th>
                <td>1 - 255</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-api-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    IS (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            <code class="literal">NodeId</code>
            は、すべてのクラスタ内部メッセージ内でノードを識別するために使用される整数値です。
            許容される値の範囲は、1-255 (これらを含む)
            です。
            この値は、ノードのタイプに関係なく、クラスタ内の各ノードで一意である必要があります。
          </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
              NDB 8.0.18 以降では、データノード ID は 145
              未満である必要があります。
              多数のデータノードを配備する予定の場合は、API
              ノード (および管理ノード) のノード ID を
              144
              より大きい値に制限することをお勧めします。
              (NDB 8.0.18 より前では、データノード ID
              でサポートされる最大値は 48 でした。)
            </p></div><p>
            <code class="literal">NodeId</code>
            は、管理ノードを識別するときに使用することが推奨されるパラメータ名です。
            エイリアス <code class="literal">Id</code> は、NDB Cluster
            の非常に古いバージョンでこの目的に使用され、下位互換性のために引き続きサポートされています。現在は非推奨になっており、使用時に警告が生成され、NDB
            Cluster
            の将来のリリースで削除される可能性があります。
          </p></li><li class="listitem"><p><a name="ndbparam-api-executeoncomputer"></a>
            <code class="literal">ExecuteOnComputer</code>
          </p><a class="indexterm" name="idm45563228098496"></a><div class="informaltable"><a name="executeoncomputer-api-table"></a><table frame="box" rules="all" summary="ExecuteOnComputer API ノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>name</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>[...]</td>
              </tr><tr>
                <th>範囲</th>
                <td>...</td>
              </tr><tr>
                <th>非推奨</th>
                <td>Yes (in NDB 7.5)</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-api-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    S (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            これは、構成ファイルの
            <code class="literal">[computer]</code>
            セクションに定義されたいずれかのコンピュータ
            (ホスト) に設定されている <code class="literal">Id</code>
            を参照します。
          </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">重要</div><p>
              このパラメータは非推奨であり、将来のリリースで削除される予定です。
              かわりに
              <code class="literal">HostName</code>
              パラメータを使用してください。
            </p></div></li><li class="listitem"><a name="ndbparam-api-dedicatednode"></a><a class="indexterm" name="idm45563228074368"></a><p></p><p>
            このノードのノード ID
            は、明示的にリクエストする接続にのみ指定できます。
            ノード ID
            をリクエストする管理サーバーは、このノード
            ID を使用できません。
            このパラメータは、同じホストで複数の管理サーバーを実行していて、<code class="literal">HostName</code>
            でプロセスを区別するのに十分でない場合に使用できます。
            テストで使用するためのものです。
          </p></li><li class="listitem"><p><a name="ndbparam-api-hostname"></a>
            <code class="literal">HostName</code>
          </p><a class="indexterm" name="idm45563228067568"></a><div class="informaltable"><a name="hostname-api-table"></a><table frame="box" rules="all" summary="HostName API ノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>name or IP address</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>[...]</td>
              </tr><tr>
                <th>範囲</th>
                <td>...</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-api-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            このパラメータを指定すると、SQL ノード (API
            ノード)
            が配置されるコンピュータのホスト名が定義されます。
            ホスト名を指定するには、このパラメータまたは
            <code class="literal">ExecuteOnComputer</code>
            のいずれかが必要です。
          </p><p>
            <code class="filename">config.ini</code> ファイルの特定の
            <code class="literal">[mysql]</code> または
            <code class="literal">[api]</code> セクションに
            <code class="literal">HostName</code> または
            <code class="literal">ExecuteOnComputer</code>
            が指定されていない場合、SQL または API
            ノードはネットワーク接続を確立できる任意のホストから対応する<span class="quote">「<span class="quote">スロット</span>」</span>を使用して管理サーバーホストマシンに接続できます。
            <span class="emphasis"><em>これは、ほかに指定されていない場合
            <code class="literal">localhost</code> が <code class="literal">HostName</code>
            として使用されるデータノードのデフォルトの動作とは異なります</em></span>。
          </p></li><li class="listitem"><p><a name="ndbparam-api-locationdomainid"></a>
            <code class="literal">LocationDomainId</code>
          </p><a class="indexterm" name="idm45563228039872"></a><div class="informaltable"><a name="locationdomainid-api-table"></a><table frame="box" rules="all" summary="LocationDomainId API ノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>integer</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>0</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 16</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-api-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td></td>
              </tr></tbody></table></div><p>
            クラウド内の特定の<a class="ulink" href="https://docs.us-phoenix-1.oraclecloud.com/Content/General/Concepts/regions.htm" target="_top">「可用性ドメイン」</a>
            (可用性ゾーンとも呼ばれる) に SQL
            またはその他の API ノードを割り当てます。
            どのノードがどの可用性ドメインにあるかを
            <code class="literal">NDB</code>
            に通知することで、次の方法でクラウド環境のパフォーマンスを向上させることができます:
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                リクエストされたデータが同じノードで見つからない場合、読取りは同じ可用性ドメイン内の別のノードに転送できます。
              </p></li><li class="listitem"><p>
                異なる可用性ドメイン内のノード間の通信では、それ以上の手動操作なしで
                <code class="literal">NDB</code> トランスポータ WAN
                サポートを使用することが保証されています。
              </p></li><li class="listitem"><p>
                トランスポータグループ番号は、SQL
                および他の API
                ノードが可能な場合は常に同じ可用性ドメイン内のローカルデータノードと通信するように、使用される可用性ドメインに基づくことができます。
              </p></li><li class="listitem"><p>
                アービトレータは、データノードが存在しない可用性ドメインから選択することも、そのような可用性ドメインが見つからない場合は
                3
                番目の可用性ドメインから選択することもできます。
              </p></li></ul></div><p>
            <code class="literal">LocationDomainId</code> は 0 以上 16
            以下の整数値を取り、0 がデフォルトです。0
            を使用することは、パラメータを未設定のままにすることと同じです。
          </p></li><li class="listitem"><p><a name="ndbparam-api-arbitrationrank"></a>
            <code class="literal">ArbitrationRank</code>
          </p><a class="indexterm" name="idm45563228011056"></a><div class="informaltable"><a name="arbitrationrank-api-table"></a><table frame="box" rules="all" summary="ArbitrationRank API ノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>0-2</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>0</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 2</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-api-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            このパラメータは、アービトレータとして機能できるノードを定義します。
            管理ノードと SQL
            ノードの両方がアービトレータになることができます。
            値 0
            は、指定されたノードがアービトレータとして使用されないことを意味します。値
            1
            は、ノードにアービトレータとしての高い優先度を与えます。値
            2 は低い優先度を与えます。
            通常の構成では、管理サーバーの
            <code class="literal">ArbitrationRank</code> が 1
            (管理ノードのデフォルト) に設定され、各
            SQL ノードでは 0 (SQL ノードのデフォルト)
            に設定されるため、管理サーバーがアービトレータとして使用されます。
          </p><p>
            すべての管理および SQL ノードで
            <code class="literal">ArbitrationRank</code> を 0
            に設定すると、アービトレーションを完全に無効化できます。
            このパラメーラをオーバーライドしてアービトレーションを制御することもできます。そのためには、<code class="filename">config.ini</code>
            グローバル構成ファイルの <code class="literal">[ndbd
            default]</code> セクションに
            <code class="literal">Arbitration</code>
            パラメータを設定します。
          </p></li><li class="listitem"><p><a name="ndbparam-api-arbitrationdelay"></a>
            <code class="literal">ArbitrationDelay</code>
          </p><a class="indexterm" name="idm45563227985872"></a><div class="informaltable"><a name="arbitrationdelay-api-table"></a><table frame="box" rules="all" summary="ArbitrationDelay API ノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>milliseconds</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>0</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-api-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            このパラメータを 0 (デフォルト)
            以外の値に設定すると、アービトレータによるアービトレーションリクエストへのレスポンスは、指定されたミリ秒数遅延されます。
            通常、この値を変更する必要はありません。
          </p></li><li class="listitem"><p><a name="ndbparam-api-batchbytesize"></a>
            <code class="literal">BatchByteSize</code>
          </p><a class="indexterm" name="idm45563227966048"></a><div class="informaltable"><a name="batchbytesize-api-table"></a><table frame="box" rules="all" summary="BatchByteSize API ノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>bytes</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>16K</td>
              </tr><tr>
                <th>範囲</th>
                <td>1K - 1M</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-api-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            フルテーブルスキャンまたはインデックスの範囲スキャンに変換されるクエリーでは、最良のパフォーマンスを得るため、適切にサイズ調整されたバッチでレコードをフェッチすることが重要です。
            レコード数
            (<code class="literal">BatchSize</code>)
            とバイト数 (<code class="literal">BatchByteSize</code>)
            の両方で、適切なサイズを設定できます。
            実際のバッチサイズは両方のパラメータによって制限されます。
          </p><p>
            このパラメータの設定方法によっては、クエリーの実行速度の変化率が
            40% を超える可能性があります。
          </p><p>
            このパラメータはバイト単位で測定されます。
            デフォルト値は 16K です。
          </p></li><li class="listitem"><p><a name="ndbparam-api-batchsize"></a>
            <code class="literal">BatchSize</code>
          </p><a class="indexterm" name="idm45563227942816"></a><div class="informaltable"><a name="batchsize-api-table"></a><table frame="box" rules="all" summary="BatchSize API ノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>records</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>256</td>
              </tr><tr>
                <th>範囲</th>
                <td>1 - 992</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-api-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            このパラメータはレコード数で測定され、デフォルトで
            256 に設定されます。 最大サイズは 992
            です。
          </p></li><li class="listitem"><p><a name="ndbparam-api-extrasendbuffermemory"></a>
            <code class="literal">ExtraSendBufferMemory</code>
          </p><a class="indexterm" name="idm45563227923312"></a><div class="informaltable"><a name="extrasendbuffermemory-api-table"></a><table frame="box" rules="all" summary="ExtraSendBufferMemory API ノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>bytes</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>0</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-api-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            このパラメータは、<code class="literal">TotalSendBufferMemory</code>、<code class="literal">SendBufferMemory</code>、またはその両方を使用して設定されたメモリーに加えて割り当てられるトランスポータ送信バッファーメモリーの量を指定します。
          </p></li><li class="listitem"><p><a name="ndbparam-api-heartbeatthreadpriority"></a>
            <code class="literal">HeartbeatThreadPriority</code>
          </p><a class="indexterm" name="idm45563227901168"></a><div class="informaltable"><a name="heartbeatthreadpriority-api-table"></a><table frame="box" rules="all" summary="HeartbeatThreadPriority API ノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>string</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>[...]</td>
              </tr><tr>
                <th>範囲</th>
                <td>...</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-api-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td></td>
              </tr></tbody></table></div><p>
            このパラメータを使用して、管理および API
            ノードのハートビートスレッドのスケジューリングポリシーと優先度を設定します。
            このパラメータを設定するための構文をここに示します。
          </p><pre class="programlisting">HeartbeatThreadPriority = <em class="replaceable"><code>policy</code></em>[, <em class="replaceable"><code>priority</code></em>]

<em class="replaceable"><code>policy</code></em>:
  {FIFO | RR}
</pre><p>
            このパラメータを設定するときは、ポリシーを指定する必要があります。
            これは、<code class="literal">FIFO</code> (先入れ先出し)
            または <code class="literal">RR</code> (ラウンドロビン)
            のいずれかです。
            このあとに、オプションで優先度 (整数)
            を指定できます。
          </p></li><li class="listitem"><p><a name="ndbparam-api-maxscanbatchsize"></a>
            <code class="literal">MaxScanBatchSize</code>
          </p><a class="indexterm" name="idm45563227876944"></a><div class="informaltable"><a name="maxscanbatchsize-api-table"></a><table frame="box" rules="all" summary="MaxScanBatchSize API ノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>bytes</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>256K</td>
              </tr><tr>
                <th>範囲</th>
                <td>32K - 16M</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-api-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            バッチサイズは、各データノードから送信される各バッチのサイズです。
            多数のノードから並列で受信される過大なデータ量から
            MySQL
            サーバーを保護するため、ほとんどのスキャンは並列で実行されます。このパラメータは、すべてのノードの合計バッチサイズに対する制限を設定します。
          </p><p>
            このパラメータのデフォルトの値は 256K
            バイトです。 最大サイズは 16M バイトです。
          </p></li><li class="listitem"><p><a name="ndbparam-api-totalsendbuffermemory"></a>
            <code class="literal">TotalSendBufferMemory</code>
          </p><a class="indexterm" name="idm45563227856672"></a><div class="informaltable"><a name="totalsendbuffermemory-api-table"></a><table frame="box" rules="all" summary="TotalSendBufferMemory API ノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>bytes</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>0</td>
              </tr><tr>
                <th>範囲</th>
                <td>256K - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-api-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            このパラメータは、すべての構成済みトランスポータ間で共有される送信バッファーメモリーの、このノードに割り当てられるメモリー合計量を決定するために使用されます。
          </p><p>
            このパラメータが設定されている場合、許可される最小値は
            256KB です。0
            はパラメータが設定されていないことを示します。
            詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-config-send-buffers" title="23.3.3.14 NDB Cluster 送信バッファーパラメータの構成">セクション23.3.3.14「NDB Cluster 送信バッファーパラメータの構成」</a>
            を参照してください。
          </p></li><li class="listitem"><p><a name="ndbparam-api-autoreconnect"></a>
            <code class="literal">AutoReconnect</code>
          </p><a class="indexterm" name="idm45563227834544"></a><div class="informaltable"><a name="autoreconnect-api-table"></a><table frame="box" rules="all" summary="AutoReconnect API ノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>boolean</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>false</td>
              </tr><tr>
                <th>範囲</th>
                <td>true, false</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-api-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            このパラメータは、デフォルトで
            <code class="literal">false</code> です。
            これによって、切断された API ノード (SQL
            ノードとして機能する MySQL サーバーを含む)
            が既存の接続を再使用しようとせずに、クラスタへの新しい接続を強制的に使用するようになります
            (接続を再使用すると、動的に割り当てられたノード
            ID
            を使用するときに問題が発生することがあるため)。
            (Bug #45921)
          </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
              このパラメータは、NDB API
              を使用してオーバーライドできます。
              詳細は、<a class="ulink" href="https://dev.mysql.com/doc/ndbapi/en/ndb-ndb-cluster-connection.html#ndb-ndb-cluster-connection-set-auto-reconnect" target="_top">Ndb_cluster_connection::set_auto_reconnect()</a>
              および
              <a class="ulink" href="https://dev.mysql.com/doc/ndbapi/en/ndb-ndb-cluster-connection.html#ndb-ndb-cluster-connection-get-auto-reconnect" target="_top">Ndb_cluster_connection::get_auto_reconnect()</a>
              を参照してください。
            </p></div></li><li class="listitem"><p><a name="ndbparam-api-defaultoperationredoproblemaction"></a>
            <code class="literal">DefaultOperationRedoProblemAction</code>
          </p><a class="indexterm" name="idm45563227810176"></a><div class="informaltable"><a name="defaultoperationredoproblemaction-api-table"></a><table frame="box" rules="all" summary="DefaultOperationRedoProblemAction API ノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>enumeration</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>QUEUE</td>
              </tr><tr>
                <th>範囲</th>
                <td>ABORT, QUEUE</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-api-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td></td>
              </tr></tbody></table></div><p>
            このパラメータは、(<code class="literal">RedoOverCommitLimit</code>
            および
            <code class="literal">RedoOverCommitCounter</code>
            とともに) Redo
            ログをディスクにフラッシュする時間が長すぎる場合にデータノードによる操作の処理を制御します。
            これは、特定の Redo ログのフラッシュが
            <code class="literal">RedoOverCommitLimit</code>
            秒より長い時間をかけて
            <code class="literal">RedoOverCommitCounter</code>
            回を超える回数分行われ、保留中のトランザクションが中止されたときに発生します。
          </p><p>
            この発生時は、ノードはここに示す
            <code class="literal">DefaultOperationRedoProblemAction</code>
            の値に応じた 2
            つの方法のいずれかで応答できます。
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <code class="literal">ABORT</code>:
                中止されたトランザクションに含まれる保留中の操作も中止されます。
              </p></li><li class="listitem"><p>
                <code class="literal">QUEUE</code>:
                中止されたトランザクションに含まれる保留中の操作がキューに入れられ、再試行されます。
                これはデフォルトです。 redo
                ログの領域が不足した場合、つまり
                <span class="errorname">P_TAIL_PROBLEM</span>
                エラーが発生した場合、保留中の操作は中断されます。
              </p></li></ul></div></li><li class="listitem"><p><a name="ndbparam-api-defaulthashmapsize"></a>
            <code class="literal">DefaultHashMapSize</code>
          </p><a class="indexterm" name="idm45563227779008"></a><div class="informaltable"><a name="defaulthashmapsize-api-table"></a><table frame="box" rules="all" summary="DefaultHashMapSize API ノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>buckets</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>3840</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 3840</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-api-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            <code class="literal">NDB</code>
            で使用されるテーブルハッシュマップのサイズは、このパラメータを使用して構成できます。
            <code class="literal">DefaultHashMapSize</code> には、3 つの値
            (0、240、3840) のいずれかを指定できます。
            これらの値とその効果について、次の表で説明します。
          </p><div class="table"><a name="idm45563227759744"></a><p class="title"><b>表 23.17 DefaultHashMapSize パラメータ値</b></p><div class="table-contents"><table><col style="width: 20%"><col style="width: 80%"><thead><tr>
                <th>値</th>
                <th>説明/効果</th>
              </tr></thead><tbody><tr>
                <td><code class="literal">0</code></td>
                <td>クラスタ内のすべてのデータおよび API
                  ノードの中で、このパラメータに設定されたもっとも小さい値を
                  (あれば) 使用します。どのデータまたは
                  API
                  ノードにも設定されていない場合は、デフォルト値を使用します。</td>
              </tr><tr>
                <td><code class="literal">240</code></td>
                <td>古いデフォルトハッシュマップサイズ</td>
              </tr><tr>
                <td><code class="literal">3840</code></td>
                <td>NDB 8.0
                  でデフォルトで使用されるハッシュマップサイズ</td>
              </tr></tbody></table></div></div><br class="table-break"><p>
            このパラメータの元の使用目的は、ハッシュマップのサイズが異なる古い
            NDB Cluster
            バージョンとの間のアップグレードおよびダウングレードを容易にすることでした。これは、この変更に後方互換性がないためです。
            NDB Cluster 8.0 へのアップグレードまたは NDB
            Cluster 8.0
            からのダウングレードでは、これは問題になりません。
          </p></li><li class="listitem"><p><a name="ndbparam-api-wan"></a>
            <code class="literal">Wan</code>
          </p><a class="indexterm" name="idm45563227742672"></a><div class="informaltable"><a name="wan-api-table"></a><table frame="box" rules="all" summary="wan API ノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>boolean</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>false</td>
              </tr><tr>
                <th>範囲</th>
                <td>true, false</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-api-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            WAN の TCP
            設定をデフォルトとして使用します。
          </p></li><li class="listitem"><p><a name="ndbparam-api-connectbackoffmaxtime"></a>
            <code class="literal">ConnectBackoffMaxTime</code>
          </p><a class="indexterm" name="idm45563227723328"></a><div class="informaltable"><a name="connectbackoffmaxtime-api-table"></a><table frame="box" rules="all" summary="ConnectBackoffMaxTime API ノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>integer</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>0</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-api-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            多数の未起動のデータノードがある NDB Cluster
            では、このパラメータの値を上げて、クラスタ内でまだ機能していないデータノードへの接続試行を回避したり、管理ノードへの高トラフィックを中程度にしたりできます。
            API
            ノードが新しいデータノードに接続されていない場合は、<code class="literal">StartConnectBackoffMaxTime</code>
            パラメータの値が適用されます。それ以外の場合は、<code class="literal">ConnectBackoffMaxTime</code>
            を使用して接続試行間の待機時間の長さ
            (ミリ秒) が決定されます。
          </p><p>
            このパラメータの経過時間を計算する際に、ノードの接続試行<span class="emphasis"><em>中</em></span>に経過する時間は考慮されません。
            タイムアウトは、100
            ミリ秒の遅延から始まり、約 100
            ミリ秒の分解能で適用されます。後続の試行のたびに、<code class="literal">ConnectBackoffMaxTime</code>
            ミリ秒 (最大 100000 ミリ秒 (100 秒))
            に達するまでこの期間の長さが倍加されます。
          </p><p>
            API
            ノードがデータノードに接続され、そのノードが
            (ハートビートメッセージで)
            ほかのデータノードに接続したことを報告すると、データノードに対する接続試行はこのパラメータの影響を受けなくなり、その後接続されるまで
            100 ミリ秒間隔で行われます。
            データノードが起動すると、これが発生したことを
            API ノードに通知するために
            <code class="literal">HeartbeatIntervalDbApi</code>
            を使用できます。
          </p></li><li class="listitem"><p><a name="ndbparam-api-startconnectbackoffmaxtime"></a>
            <code class="literal">StartConnectBackoffMaxTime</code>
          </p><a class="indexterm" name="idm45563227697088"></a><div class="informaltable"><a name="startconnectbackoffmaxtime-api-table"></a><table frame="box" rules="all" summary="StartConnectBackoffMaxTime API ノード 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>integer</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>0</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-api-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            多数の未起動のデータノードがある NDB Cluster
            では、このパラメータの値を上げて、クラスタ内でまだ機能していないデータノードへの接続試行を回避したり、管理ノードへの高トラフィックを中程度にしたりできます。
            API
            ノードが新しいデータノードに接続されていない場合は、<code class="literal">StartConnectBackoffMaxTime</code>
            パラメータの値が適用されます。それ以外の場合は、<code class="literal">ConnectBackoffMaxTime</code>
            を使用して接続試行間の待機時間の長さ
            (ミリ秒) が決定されます。
          </p><p>
            このパラメータの経過時間を計算する際に、ノードの接続試行<span class="emphasis"><em>中</em></span>に経過する時間は考慮されません。
            タイムアウトは、100
            ミリ秒の遅延から始まり、約 100
            ミリ秒の分解能で適用されます。後続の試行のたびに、<code class="literal">StartConnectBackoffMaxTime</code>
            ミリ秒 (最大 100000 ミリ秒 (100 秒))
            に達するまでこの期間の長さが倍加されます。
          </p><p>
            API
            ノードがデータノードに接続され、そのノードが
            (ハートビートメッセージで)
            ほかのデータノードに接続したことを報告すると、データノードに対する接続試行はこのパラメータの影響を受けなくなり、その後接続されるまで
            100 ミリ秒間隔で行われます。
            データノードが起動すると、これが発生したことを
            API ノードに通知するために
            <code class="literal">HeartbeatIntervalDbApi</code>
            を使用できます。
          </p></li></ul></div><p><a name="ndbparam-api-apiverbose"></a><b>API ノードのデバッグパラメータ. </b>
          <code class="literal">ApiVerbose</code>
          構成パラメータを使用して、特定の API
          ノードからのデバッグ出力を有効にできます。
          このパラメータは整数値を取ります。デフォルトは
          0
          で、このようなデバッグは無効になります。1
          ではクラスタログへのデバッグ出力が有効になり、2
          では <code class="literal">DBDICT</code>
          デバッグ出力も追加されます。 (Bug #20638450)
          <a class="ulink" href="https://dev.mysql.com/doc/ndb-internals/en/dump-command-1229.html" target="_top">DUMP 1229</a>
          も参照してください。
        </p><p>
        次に示すように、<span class="command"><strong>mysql</strong></span>
        クライアントで <code class="literal">SHOW STATUS</code>
        を使用して NDB Cluster SQL
        ノードとして実行されている MySQL
        サーバーから情報を取得することもできます:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW STATUS LIKE 'ndb%';</code></strong>
+-----------------------------+----------------+
| Variable_name               | Value          |
+-----------------------------+----------------+
| Ndb_cluster_node_id         | 5              |
| Ndb_config_from_host        | 198.51.100.112 |
| Ndb_config_from_port        | 1186           |
| Ndb_number_of_storage_nodes | 4              |
+-----------------------------+----------------+
4 rows in set (0.02 sec)
</pre><p>
        このステートメントの出力に表示されるステータス変数については、<a class="xref" href="mysql-cluster.html#mysql-cluster-status-variables" title="23.3.3.9.3 NDB Cluster ステータス変数">セクション23.3.3.9.3「NDB Cluster ステータス変数」</a>を参照してください。
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
          実行中の NDB Cluster の構成に新しい SQL または
          API
          ノードを追加するには、新しい<code class="literal">[mysqld]</code>または<code class="literal">[api]</code>セクションを
          <code class="filename">config.ini</code> ファイル
          (または、複数の管理サーバーを使用している場合はファイル)
          に追加したあとで、すべてのクラスタノードのローリング再起動を実行する必要があります。
          これは、新しい SQL または API
          ノードをクラスタに接続する前に実行する必要があります。
        </p><p>
          新しい SQL または API
          ノードがクラスタ構成内の以前に使用されていない
          API
          スロットを使用してクラスタに接続する場合、クラスタの再起動を実行する必要は<span class="emphasis"><em>ありません</em></span>。
        </p></div><p><a name="mysql-cluster-api-definition-restart-types"></a><b>再起動のタイプ. </b>
          このセクションのパラメータの説明で使用される再起動タイプに関する情報を次のテーブルに示します:
        </p><div class="table"><a name="idm45563227654432"></a><p class="title"><b>表 23.18 NDB Cluster の再起動タイプ</b></p><div class="table-contents"><table><col style="width: 10%"><col style="width: 30%"><col style="width: 60%"><thead><tr>
            <th scope="col">シンボル</th>
            <th scope="col">再起動タイプ</th>
            <th scope="col">説明</th>
          </tr></thead><tbody><tr>
            <th scope="row">N</th>
            <td>ノード</td>
            <td>パラメータはローリング再起動を使用して更新できます
              (<a class="xref" href="mysql-cluster.html#mysql-cluster-rolling-restart" title="23.5.5 NDB Cluster のローリング再起動の実行">セクション23.5.5「NDB Cluster のローリング再起動の実行」</a>
              を参照)</td>
          </tr><tr>
            <th scope="row">S</th>
            <td>システム</td>
            <td>このパラメータの変更を有効にするには、すべてのクラスタノードを完全に停止してから再起動する必要があります</td>
          </tr><tr>
            <th scope="row">I</th>
            <td>Initial</td>
            <td><code class="option">--initial</code>
              オプションを使用してデータノードを再起動する必要があります</td>
          </tr></tbody></table></div></div><br class="table-break"></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-system-definition"></a>23.3.3.8 システムの定義</h4></div></div></div><p>
        <code class="literal">[system]</code>セクションは、クラスタ全体に適用されるパラメータに使用されます。
        <code class="literal">Name</code>
        システムパラメータは MySQL Enterprise Monitor
        で使用され、<code class="literal">ConfigGenerationNumber</code>
        および
        <code class="literal">PrimaryMGMNode</code>
        は本番環境では使用されません。 NDB Cluster を
        MySQL Enterprise Monitor
        とともに使用する場合を除き、<code class="filename">config.ini</code>
        ファイルに<code class="literal">[system]</code>セクションを含める必要はありません。
      </p><p>
        これらのパラメータの詳細は、次のリストを参照してください:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="ndbparam-system-configgenerationnumber"></a>
            <a class="indexterm" name="idm45563227625808"></a>

            <code class="literal">ConfigGenerationNumber</code>
          </p><div class="informaltable"><a name="configgenerationnumber-system-table"></a><table frame="box" rules="all" summary="ConfigGenerationNumber system 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>unsigned</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>0</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-system-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            構成生成番号。
            このパラメータは現在使用されていません。
          </p></li><li class="listitem"><p><a name="ndbparam-system-name"></a>
            <a class="indexterm" name="idm45563227606192"></a>

            <code class="literal">Name</code>
          </p><div class="informaltable"><a name="name-system-table"></a><table frame="box" rules="all" summary="Name system 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>string</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>[...]</td>
              </tr><tr>
                <th>範囲</th>
                <td>...</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-system-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            クラスタの名前を設定します。
            このパラメータは、MySQL Enterprise Monitor
            を使用したデプロイメントに必要です。それ以外の場合は未使用です。
          </p><p>
            このパラメータの値を取得するには、<code class="literal">Ndb_system_name</code>
            ステータス変数を確認します。 NDB API
            アプリケーションでは、<code class="literal">get_system_name()</code>
            を使用して取得することもできます。
          </p></li><li class="listitem"><p><a name="ndbparam-system-primarymgmnode"></a>
            <a class="indexterm" name="idm45563227583648"></a>

            <code class="literal">PrimaryMGMNode</code>
          </p><div class="informaltable"><a name="primarymgmnode-system-table"></a><table frame="box" rules="all" summary="PrimaryMGMNode system 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>unsigned</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>0</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-system-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            プライマリ管理ノードのノード ID。
            このパラメータは現在使用されていません。
          </p></li></ul></div><p><a name="mysql-cluster-system-definition-restart-types"></a><b>再起動のタイプ. </b>
          このセクションのパラメータの説明で使用される再起動タイプに関する情報を次のテーブルに示します:
        </p><div class="table"><a name="idm45563227562992"></a><p class="title"><b>表 23.19 NDB Cluster の再起動タイプ</b></p><div class="table-contents"><table><col style="width: 10%"><col style="width: 30%"><col style="width: 60%"><thead><tr>
            <th scope="col">シンボル</th>
            <th scope="col">再起動タイプ</th>
            <th scope="col">説明</th>
          </tr></thead><tbody><tr>
            <th scope="row">N</th>
            <td>ノード</td>
            <td>パラメータはローリング再起動を使用して更新できます
              (<a class="xref" href="mysql-cluster.html#mysql-cluster-rolling-restart" title="23.5.5 NDB Cluster のローリング再起動の実行">セクション23.5.5「NDB Cluster のローリング再起動の実行」</a>
              を参照)</td>
          </tr><tr>
            <th scope="row">S</th>
            <td>システム</td>
            <td>このパラメータの変更を有効にするには、すべてのクラスタノードを完全に停止してから再起動する必要があります</td>
          </tr><tr>
            <th scope="row">I</th>
            <td>Initial</td>
            <td><code class="option">--initial</code>
              オプションを使用してデータノードを再起動する必要があります</td>
          </tr></tbody></table></div></div><br class="table-break"></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-options-variables"></a>23.3.3.9 NDB Cluster の MySQL Server オプションおよび変数</h4></div></div></div><div class="toc"><dl class="toc"><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-program-options-mysqld">23.3.3.9.1 NDB Cluster の MySQL Server オプション</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-system-variables">23.3.3.9.2 NDB Cluster システム変数</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-status-variables">23.3.3.9.3 NDB Cluster ステータス変数</a></span></dt></dl></div><a class="indexterm" name="idm45563227542336"></a><a class="indexterm" name="idm45563227540224"></a><p>
    このセクションでは、NDB Cluster に固有の MySQL サーバーオプション、サーバーおよびステータス変数について説明します。 これらの使用に関する一般的な情報、および NDB Cluster に固有でないその他のオプションと変数については、<a class="xref" href="server-administration.html#mysqld-server" title="5.1 MySQL Server">セクション5.1「MySQL Server」</a> を参照してください。 
  </p><p>
    クラスタ構成ファイル (通常は <code class="filename">config.ini</code> という名前) で使用される NDB Cluster 構成パラメータについては、<a class="xref" href="mysql-cluster.html#mysql-cluster-configuration" title="23.3 NDB Cluster の構成">セクション23.3「NDB Cluster の構成」</a> を参照してください。
  </p><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="mysql-cluster-program-options-mysqld"></a>23.3.3.9.1 NDB Cluster の MySQL Server オプション</h5></div></div></div><a class="indexterm" name="idm45563227532288"></a><a class="indexterm" name="idm45563227530144"></a><a class="indexterm" name="idm45563227528112"></a><a class="indexterm" name="idm45563227526128"></a><a class="indexterm" name="idm45563227523968"></a><p>
      このセクションでは、NDB Cluster に関連する <span class="command"><strong>mysqld</strong></span> サーバーオプションについて説明します。 NDB Cluster に固有ではない <span class="command"><strong>mysqld</strong></span> オプションについて、および <span class="command"><strong>mysqld</strong></span> でのオプションの使用に関する一般的な情報については、<a class="xref" href="server-administration.html#server-options" title="5.1.7 サーバーコマンドオプション">セクション5.1.7「サーバーコマンドオプション」</a> を参照してください。 
    </p><p>
      ほかの NDB Cluster プロセス (<span class="command"><strong>ndbd</strong></span>、<span class="command"><strong>ndb_mgmd</strong></span>、および <span class="command"><strong>ndb_mgm</strong></span>) で使用されるコマンド行オプションについては、<a class="xref" href="mysql-cluster.html#mysql-cluster-program-options-common" title="23.4.32 NDB Cluster プログラムに共通のオプション — NDB Cluster プログラムに共通のオプション">セクション23.4.32「NDB Cluster プログラムに共通のオプション — NDB Cluster プログラムに共通のオプション」</a> を参照してください。 <code class="literal">NDB</code> のユーティリティープログラム (<span class="command"><strong>ndb_desc</strong></span>、<span class="command"><strong>ndb_size.pl</strong></span>、<span class="command"><strong>ndb_show_tables</strong></span> など) で使用されるコマンド行オプションについては、<a class="xref" href="mysql-cluster.html#mysql-cluster-programs" title="23.4 NDB Cluster プログラム">セクション23.4「NDB Cluster プログラム」</a>を参照してください。 
    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="option_mysqld_ndbcluster"></a>
          <code class="option">--ndbcluster</code>
        </p><a class="indexterm" name="idm45563227508624"></a><a class="indexterm" name="idm45563227506480"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndbcluster"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--ndbcluster[=value]</code></td>
</tr><tr><th>無効化</th>
<td><code class="literal">skip-ndbcluster</code></td>
</tr><tr><th>型</th>
<td>列挙</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">ON</code></td>
</tr><tr><th>有効な値</th>
<td><p class="valid-value"><code class="literal">OFF</code></p><p class="valid-value"><code class="literal">FORCE</code></p></td>
</tr></tbody></table></div><p>
          NDB Cluster を使用するには、<code class="literal">NDBCLUSTER</code> ストレージエンジンが必要です。 <span class="command"><strong>mysqld</strong></span> バイナリに <code class="literal">NDBCLUSTER</code> ストレージエンジンのサポートが含まれている場合、このエンジンはデフォルトで無効になっています。 これを有効にするには、<code class="option">--ndbcluster</code> オプションを使用します。 エンジンを明示的に無効にするには、<code class="option">--skip-ndbcluster</code> を使用します。 
        </p><p>
          <code class="option">--initialize</code> も使用されている場合、<code class="option">--ndbcluster</code> オプションは無視されます (および <code class="literal">NDB</code> ストレージエンジンが有効になっていません)。 (このオプションを <code class="option">--initialize</code> とともに使用する必要はありません。) 
        </p></li><li class="listitem"><p><a name="option_mysqld_ndb-allow-copying-alter-table"></a>
          <code class="option">--ndb-allow-copying-alter-table=[ON|OFF]</code>
        </p><a class="indexterm" name="idm45563227478544"></a><a class="indexterm" name="idm45563227476288"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndb-allow-copying-alter-table"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--ndb-allow-copying-alter-table[={OFF|ON}]</code></td>
</tr><tr><th>システム変数</th>
<td><code class="literal">ndb_allow_copying_alter_table</code></td>
</tr><tr><th>スコープ</th>
<td>グローバル、セッション</td>
</tr><tr><th>動的</th>
<td>はい</td>
</tr><tr><th><code class="literal">SET_VAR</code> ヒントの適用</th>
<td>いいえ</td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">ON</code></td>
</tr></tbody></table></div><p>
          <code class="literal">ALTER TABLE</code> および他の DDL ステートメントで <code class="literal">NDB</code> テーブルのコピー操作を使用できるようにします。 これが発生しないようにするには、<code class="literal">OFF</code> に設定します。そうすると、クリティカルなアプリケーションのパフォーマンスが向上する可能性があります。 
        </p></li><li class="listitem"><p><a name="option_mysqld_ndb-batch-size"></a>
          <code class="option">--ndb-batch-size=<em class="replaceable"><code>#</code></em></code>
        </p><a class="indexterm" name="idm45563227449440"></a><a class="indexterm" name="idm45563227447280"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndb-batch-size"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--ndb-batch-size</code></td>
</tr><tr><th>システム変数</th>
<td><code class="literal">ndb_batch_size</code></td>
</tr><tr><th>スコープ</th>
<td>グローバル</td>
</tr><tr><th>動的</th>
<td>いいえ</td>
</tr><tr><th><code class="literal">SET_VAR</code> ヒントの適用</th>
<td>いいえ</td>
</tr><tr><th>型</th>
<td>Integer</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">32768</code></td>
</tr><tr><th>最小値</th>
<td><code class="literal">0</code></td>
</tr><tr><th>最大値</th>
<td><code class="literal">31536000</code></td>
</tr></tbody></table></div><p>
          これは、NDB のトランザクションバッチで使用されるサイズ (バイト単位) を設定します。
        </p></li><li class="listitem"><p><a name="option_mysqld_ndb-cluster-connection-pool"></a>
          <code class="option">--ndb-cluster-connection-pool=<em class="replaceable"><code>#</code></em></code>
        </p><a class="indexterm" name="idm45563227418288"></a><a class="indexterm" name="idm45563227416112"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndb-cluster-connection-pool"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--ndb-cluster-connection-pool</code></td>
</tr><tr><th>システム変数</th>
<td><code class="literal">ndb_cluster_connection_pool</code></td>
</tr><tr><th>システム変数</th>
<td><code class="literal">ndb_cluster_connection_pool</code></td>
</tr><tr><th>スコープ</th>
<td>グローバル</td>
</tr><tr><th>スコープ</th>
<td>グローバル</td>
</tr><tr><th>動的</th>
<td>いいえ</td>
</tr><tr><th>動的</th>
<td>いいえ</td>
</tr><tr><th><code class="literal">SET_VAR</code> ヒントの適用</th>
<td>いいえ</td>
</tr><tr><th><code class="literal">SET_VAR</code> ヒントの適用</th>
<td>いいえ</td>
</tr><tr><th>型</th>
<td>Integer</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">1</code></td>
</tr><tr><th>最小値</th>
<td><code class="literal">1</code></td>
</tr><tr><th>最大値</th>
<td><code class="literal">63</code></td>
</tr></tbody></table></div><p>
          このオプションを 1 (デフォルト) より大きい値に設定すると、<span class="command"><strong>mysqld</strong></span> プロセスはクラスタに対して複数の接続を使用し、実質的に複数の SQL ノードを模倣します。 各接続には、クラスタ構成 (<code class="filename">config.ini</code>) ファイル内に固有の <code class="literal">[api]</code> または <code class="literal">[mysqld]</code> セクションを必要とし、クラスタでサポートされる API 接続の最大数を参照してカウントされます。 
        </p><p>
          2 台のクラスタホストコンピュータがあり、実行している各 SQL ノードの <span class="command"><strong>mysqld</strong></span> プロセスが <code class="option">--ndb-cluster-connection-pool=4</code> を指定して起動されたとします。これは、これらの接続に使用できる API スロットがクラスタに (2 個ではなく) 8 個存在する必要があることを意味します。 これらすべての接続は、SQL ノードがクラスタに接続したときに設定され、ラウンドロビン方式でスレッドに割り当てられます。 
        </p><p>
          このオプションは、複数の CPU、複数のコア、またはその両方を搭載したホストマシンで <span class="command"><strong>mysqld</strong></span> を実行する場合にのみ有効です。 最良の結果を得るには、この値をホストマシンで使用できるコアの合計数より小さくします。 これより大きい値に設定すると、パフォーマンスが大幅に低下する可能性があります。 
        </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">重要</div><p>
            接続プールを使用する各 SQL ノードは複数の API ノードスロットを占有する (各スロットにはクラスタ内で固有のノード ID がある) ため、接続プールを採用する <span class="command"><strong>mysqld</strong></span> プロセスを起動するときは、クラスタ接続文字列の一部としてノード ID を使用<span class="emphasis"><em>しない</em></span>でください。
          </p><p>
            <code class="option">--ndb-cluster-connection-pool</code> を使用する際に接続文字列にノード ID を設定すると、SQL ノードのクラスタへの接続試行時に、ノード ID の割り当てエラーが発生します。
          </p></div></li><li class="listitem"><p><a name="option_mysqld_ndb-cluster-connection-pool-nodeids"></a>
          <code class="option">--ndb-cluster-connection-pool-nodeids=<em class="replaceable"><code>list</code></em></code>
        </p><a class="indexterm" name="idm45563227365952"></a><a class="indexterm" name="idm45563227363760"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndb-cluster-connection-pool-nodeids"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--ndb-cluster-connection-pool-nodeids</code></td>
</tr><tr><th>システム変数</th>
<td><code class="literal">ndb_cluster_connection_pool_nodeids</code></td>
</tr><tr><th>スコープ</th>
<td>グローバル</td>
</tr><tr><th>動的</th>
<td>いいえ</td>
</tr><tr><th><code class="literal">SET_VAR</code> ヒントの適用</th>
<td>いいえ</td>
</tr><tr><th>型</th>
<td>Set</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal"></code></td>
</tr></tbody></table></div><p>
          SQL ノードで使用されるクラスタに接続するためのノード ID のカンマ区切りリストを指定します。 このリストのノード数は、<code class="option">--ndb-cluster-connection-pool</code> オプションに設定された値と同じである必要があります。 
        </p></li><li class="listitem"><p><a name="option_mysqld_ndb-blob-read-batch-bytes"></a>
          <code class="option">--ndb-blob-read-batch-bytes=<em class="replaceable"><code>bytes</code></em></code>
        </p><a class="indexterm" name="idm45563227338816"></a><a class="indexterm" name="idm45563227336576"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndb-blob-read-batch-bytes"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--ndb-blob-read-batch-bytes</code></td>
</tr><tr><th>システム変数</th>
<td><code class="literal">ndb_blob_read_batch_bytes</code></td>
</tr><tr><th>スコープ</th>
<td>グローバル、セッション</td>
</tr><tr><th>動的</th>
<td>はい</td>
</tr><tr><th><code class="literal">SET_VAR</code> ヒントの適用</th>
<td>いいえ</td>
</tr><tr><th>型</th>
<td>Integer</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">65536</code></td>
</tr><tr><th>最小値</th>
<td><code class="literal">0</code></td>
</tr><tr><th>最大値</th>
<td><code class="literal">4294967295</code></td>
</tr></tbody></table></div><p>
          このオプションを使用すると、NDB Cluster アプリケーションで <code class="literal">BLOB</code> データ読み取りをバッチ処理するためのサイズ (バイト単位) を設定できます。 現在のトランザクション内で読み取られる <code class="literal">BLOB</code> データの量がこのバッチサイズを超えると、保留中のすべての <code class="literal">BLOB</code> 読み取り操作がただちに実行されます。 
        </p><p>
          このオプションの最大値は 4294967295 です。デフォルトは 65536 です。 0 に設定すると、<code class="literal">BLOB</code> 読み取りのバッチ化を無効にします。 
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
            NDB API アプリケーションでは、<code class="literal">setMaxPendingBlobReadBytes()</code> および <code class="literal">getMaxPendingBlobReadBytes()</code> メソッドを使用すると <code class="literal">BLOB</code> 書き込みのバッチ化を制御できます。
          </p></div></li><li class="listitem"><p><a name="option_mysqld_ndb-blob-write-batch-bytes"></a>
          <code class="option">--ndb-blob-write-batch-bytes=<em class="replaceable"><code>bytes</code></em></code>
        </p><a class="indexterm" name="idm45563227298144"></a><a class="indexterm" name="idm45563227295968"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndb-blob-write-batch-bytes"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--ndb-blob-write-batch-bytes</code></td>
</tr><tr><th>システム変数</th>
<td><code class="literal">ndb_blob_write_batch_bytes</code></td>
</tr><tr><th>スコープ</th>
<td>グローバル、セッション</td>
</tr><tr><th>動的</th>
<td>はい</td>
</tr><tr><th><code class="literal">SET_VAR</code> ヒントの適用</th>
<td>いいえ</td>
</tr><tr><th>型</th>
<td>Integer</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">65536</code></td>
</tr><tr><th>最小値</th>
<td><code class="literal">0</code></td>
</tr><tr><th>最大値</th>
<td><code class="literal">4294967295</code></td>
</tr></tbody></table></div><p>
          このオプションを使用すると、NDB Cluster アプリケーションで <code class="literal">BLOB</code> データ書き込みをバッチ処理するためのサイズ (バイト単位) を設定できます。 現在のトランザクション内で書き込まれる <code class="literal">BLOB</code> データの量がこのバッチサイズを超えると、保留中のすべての <code class="literal">BLOB</code> 書き込み操作がただちに実行されます。 
        </p><p>
          このオプションの最大値は 4294967295 です。デフォルトは 65536 です。 0 に設定すると、<code class="literal">BLOB</code> 書き込みのバッチ化を無効にします。 
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
            NDB API アプリケーションでは、<code class="literal">setMaxPendingBlobWriteBytes()</code> および <code class="literal">getMaxPendingBlobWriteBytes()</code> メソッドを使用すると <code class="literal">BLOB</code> 書き込みのバッチ化を制御できます。
          </p></div></li><li class="listitem"><p><a name="option_mysqld_ndb-connectstring"></a>
          <code class="option">--ndb-connectstring=<em class="replaceable"><code>connection_string</code></em></code>
        </p><a class="indexterm" name="idm45563227257600"></a><a class="indexterm" name="idm45563227255440"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndb-connectstring"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--ndb-connectstring</code></td>
</tr><tr><th>型</th>
<td>文字列</td>
</tr></tbody></table></div><p>
          このオプションは、<code class="literal">NDBCLUSTER</code> ストレージエンジンの使用時に、クラスタ構成データを配信する管理サーバーを指定します。 構文については、<a class="xref" href="mysql-cluster.html#mysql-cluster-connection-strings" title="23.3.3.3 NDB Cluster 接続文字列">セクション23.3.3.3「NDB Cluster 接続文字列」</a>を参照してください。 
        </p></li><li class="listitem"><p><a name="option_mysqld_ndb-default-column-format"></a>
          <code class="option">--ndb-default-column-format=[FIXED|DYNAMIC]</code>
        </p><a class="indexterm" name="idm45563227241696"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndb-default-column-format"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--ndb-default-column-format={FIXED|DYNAMIC}</code></td>
</tr><tr><th>システム変数</th>
<td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_default_column_format">ndb_default_column_format</a></code></td>
</tr><tr><th>スコープ</th>
<td>グローバル</td>
</tr><tr><th>動的</th>
<td>はい</td>
</tr><tr><th><code class="literal">SET_VAR</code> ヒントの適用</th>
<td>いいえ</td>
</tr><tr><th>型</th>
<td>列挙</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">FIXED</code></td>
</tr><tr><th>有効な値</th>
<td><p class="valid-value"><code class="literal">FIXED</code></p><p class="valid-value"><code class="literal">DYNAMIC</code></p></td>
</tr></tbody></table></div><p>
          新しいテーブルのデフォルトの <code class="literal">COLUMN_FORMAT</code> および <code class="literal">ROW_FORMAT</code> を設定します (<a class="xref" href="sql-statements.html#create-table" title="13.1.20 CREATE TABLE ステートメント">セクション13.1.20「CREATE TABLE ステートメント」</a> を参照)。 デフォルトは <code class="literal">FIXED</code> です。 
        </p></li><li class="listitem"><p><a name="option_mysqld_ndb-deferred-constraints"></a>
          <code class="option">--ndb-deferred-constraints=[0|1]</code>
        </p><a class="indexterm" name="idm45563227211600"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndb-deferred-constraints"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--ndb-deferred-constraints</code></td>
</tr><tr><th>システム変数</th>
<td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_deferred_constraints">ndb_deferred_constraints</a></code></td>
</tr><tr><th>スコープ</th>
<td>グローバル、セッション</td>
</tr><tr><th>動的</th>
<td>はい</td>
</tr><tr><th><code class="literal">SET_VAR</code> ヒントの適用</th>
<td>いいえ</td>
</tr><tr><th>型</th>
<td>Integer</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">0</code></td>
</tr><tr><th>最小値</th>
<td><code class="literal">0</code></td>
</tr><tr><th>最大値</th>
<td><code class="literal">1</code></td>
</tr></tbody></table></div><p>
          一意のインデックスに対する制約チェックがサポートされている場合に、チェックをコミット時まで遅延するかどうかを制御します。<code class="literal">0</code> がデフォルトです。
        </p><p>
          このオプションは通常、NDB Cluster または NDB Cluster レプリケーションの操作には必要なく、主にテストで使用することを目的としています。
        </p></li><li class="listitem"><p><a name="option_mysqld_ndb-schema-dist-timeout"></a>
          <code class="option">--ndb-schema-dist-timeout=#</code>
        </p><a class="indexterm" name="idm45563227181520"></a><a class="indexterm" name="idm45563227179296"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndb-schema-dist-timeout"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--ndb-schema-dist-timeout=#</code></td>
</tr><tr><th>導入</th>
<td>8.0.17-ndb-8.0.17</td>
</tr><tr><th>システム変数</th>
<td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_schema_dist_timeout">ndb_schema_dist_timeout</a></code></td>
</tr><tr><th>スコープ</th>
<td>グローバル</td>
</tr><tr><th>動的</th>
<td>いいえ</td>
</tr><tr><th><code class="literal">SET_VAR</code> ヒントの適用</th>
<td>いいえ</td>
</tr><tr><th>型</th>
<td>Integer</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">120</code></td>
</tr><tr><th>最小値</th>
<td><code class="literal">5</code></td>
</tr><tr><th>最大値</th>
<td><code class="literal">1200</code></td>
</tr><tr><th>単位</th>
<td><code class="literal">seconds</code></td>
</tr></tbody></table></div><p>
          この <span class="command"><strong>mysqld</strong></span> がスキーマ操作の完了を待機する最大時間 (秒) を指定します。この時間が経過すると、スキーマ操作はタイムアウトとしてマークされます。
        </p></li><li class="listitem"><p><a name="option_mysqld_ndb-distribution"></a>
          <code class="option">--ndb-distribution=[KEYHASH|LINHASH]</code>
        </p><a class="indexterm" name="idm45563227144752"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndb-distribution"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--ndb-distribution={KEYHASH|LINHASH}</code></td>
</tr><tr><th>システム変数</th>
<td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_distribution">ndb_distribution</a></code></td>
</tr><tr><th>スコープ</th>
<td>グローバル</td>
</tr><tr><th>動的</th>
<td>はい</td>
</tr><tr><th><code class="literal">SET_VAR</code> ヒントの適用</th>
<td>いいえ</td>
</tr><tr><th>型</th>
<td>列挙</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">KEYHASH</code></td>
</tr><tr><th>有効な値</th>
<td><p class="valid-value"><code class="literal">LINHASH</code></p><p class="valid-value"><code class="literal">KEYHASH</code></p></td>
</tr></tbody></table></div><p>
          <code class="literal">NDB</code> テーブルのデフォルトの分配方法を制御します。 <code class="literal">KEYHASH</code> (キーハッシュ) または <code class="literal">LINHASH</code> (線形ハッシュ) のいずれかに設定できます。 <code class="literal">KEYHASH</code> がデフォルトです。 
        </p></li><li class="listitem"><p><a name="option_mysqld_ndb-log-apply-status"></a>
          <code class="option">--ndb-log-apply-status</code>
        </p><a class="indexterm" name="idm45563227114240"></a><a class="indexterm" name="idm45563227112464"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndb-log-apply-status"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--ndb-log-apply-status[={OFF|ON}]</code></td>
</tr><tr><th>システム変数</th>
<td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_log_apply_status">ndb_log_apply_status</a></code></td>
</tr><tr><th>スコープ</th>
<td>グローバル</td>
</tr><tr><th>動的</th>
<td>いいえ</td>
</tr><tr><th><code class="literal">SET_VAR</code> ヒントの適用</th>
<td>いいえ</td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">OFF</code></td>
</tr></tbody></table></div><p>
          レプリカ <span class="command"><strong>mysqld</strong></span> は、即時ソースから受信した更新を、ソースのサーバー ID ではなく独自のサーバー ID を使用して、独自のバイナリログ内の <code class="literal">mysql.ndb_apply_status</code> テーブルに記録します。 循環レプリケーションまたはチェーンレプリケーション設定では、このような更新を、現在の <span class="command"><strong>mysqld</strong></span> のレプリカとして構成されている MySQL サーバーの <code class="literal">mysql.ndb_apply_status</code> テーブルに伝播できます。 
        </p><p>
          チェーンレプリケーション設定でこのオプションを使用すると、ダウンストリーム (レプリカ) クラスタは、すべてのアップストリームコンプリタ (ソース) に対して相対的な位置を認識できます。
        </p><p>
          循環レプリケーション設定では、このオプションを使用すると、<code class="literal">ndb_apply_status</code> テーブルへの変更によって回路全体が完了し、最終的に元の NDB Cluster に伝播されます。 これにより、レプリケーションソースとして機能するクラスタは、その変更 (エポック) が円の他のクラスタに適用された時期を確認することもできます。 
        </p><p>
          このオプションは、MySQL サーバーが <code class="option">--ndbcluster</code> オプションを使用して起動されていない場合は無効になります。
        </p></li><li class="listitem"><p><a name="option_mysqld_ndb-log-empty-epochs"></a>
          <code class="option">--ndb-log-empty-epochs=[ON|OFF]</code>
        </p><a class="indexterm" name="idm45563227080304"></a><a class="indexterm" name="idm45563227078528"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndb-log-empty-epochs"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--ndb-log-empty-epochs[={OFF|ON}]</code></td>
</tr><tr><th>システム変数</th>
<td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_log_empty_epochs">ndb_log_empty_epochs</a></code></td>
</tr><tr><th>スコープ</th>
<td>グローバル</td>
</tr><tr><th>動的</th>
<td>はい</td>
</tr><tr><th><code class="literal">SET_VAR</code> ヒントの適用</th>
<td>いいえ</td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">OFF</code></td>
</tr></tbody></table></div><p>
          <code class="literal">log_slave_updates</code> が有効な場合でも、<code class="literal">ndb_apply_status</code> および <code class="literal">ndb_binlog_index</code> テーブルに変更が書き込まれなかったエポックが発生します。
        </p><p>
          このオプションはデフォルトで無効になっています。 <code class="option">--ndb-log-empty-epochs</code> を無効にすると、変更がなかったエポックトランザクションがバイナリログに書き込まれなくなりますが、<code class="literal">ndb_binlog_index</code> には空のエポックの行も書き込まれます。 
        </p><p>
          <code class="option">--ndb-log-empty-epochs=1</code> では、バイナリログのサイズとは無関係に <code class="literal">ndb_binlog_index</code> テーブルのサイズが増加するため、ユーザーは、クラスタがアイドル状態であると予想される場合でも、このテーブルの増加を管理する準備をするようにしてください。
        </p></li><li class="listitem"><p><a name="option_mysqld_ndb-log-empty-update"></a>
          <code class="option">--ndb-log-empty-update=[ON|OFF]</code>
        </p><a class="indexterm" name="idm45563227047456"></a><a class="indexterm" name="idm45563227045680"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndb-log-empty-update"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--ndb-log-empty-update[={OFF|ON}]</code></td>
</tr><tr><th>システム変数</th>
<td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_log_empty_update">ndb_log_empty_update</a></code></td>
</tr><tr><th>スコープ</th>
<td>グローバル</td>
</tr><tr><th>動的</th>
<td>はい</td>
</tr><tr><th><code class="literal">SET_VAR</code> ヒントの適用</th>
<td>いいえ</td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">OFF</code></td>
</tr></tbody></table></div><p>
          <code class="literal">log_slave_updates</code> が有効な場合、変更を生成しなかった更新が <code class="literal">ndb_apply_status</code> および <code class="literal">ndb_binlog_index</code> テーブルに書き込まれます。
        </p><p>
          デフォルトでは、このオプションは無効 (<code class="literal">OFF</code>) です。 <code class="option">--ndb-log-empty-update</code> を無効にすると、変更のない更新はバイナリログに書き込まれません。 
        </p></li><li class="listitem"><p><a name="option_mysqld_ndb-log-exclusive-reads"></a>
          <code class="option">--ndb-log-exclusive-reads=[0|1]</code>
        </p><a class="indexterm" name="idm45563227017040"></a><a class="indexterm" name="idm45563227015264"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndb-log-exclusive-reads"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--ndb-log-exclusive-reads[={OFF|ON}]</code></td>
</tr><tr><th>システム変数</th>
<td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_log_exclusive_reads">ndb_log_exclusive_reads</a></code></td>
</tr><tr><th>スコープ</th>
<td>グローバル、セッション</td>
</tr><tr><th>動的</th>
<td>はい</td>
</tr><tr><th><code class="literal">SET_VAR</code> ヒントの適用</th>
<td>いいえ</td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">0</code></td>
</tr></tbody></table></div><p>
          このオプションを使用してサーバーを起動すると、主キーの読み取りが排他ロックで記録されるため、NDB Cluster レプリケーションの競合検出および読み取りの競合に基づく解決が可能になります。 <code class="literal">ndb_log_exclusive_reads</code> システム変数の値を 1 または 0 に設定すると、このロックを実行時に有効または無効にすることもできます。0 (ロックを無効化) がデフォルトです。 
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-replication-examples-read-conflicts" title="読み取り競合の検出と解決">読み取り競合の検出と解決</a>を参照してください。
        </p></li><li class="listitem"><p><a name="option_mysqld_ndb-log-fail-terminate"></a>
          <code class="option">--ndb-log-fail-terminate</code>
        </p><a class="indexterm" name="idm45563226987760"></a><a class="indexterm" name="idm45563226985984"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndb-log-fail-terminate"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--ndb-log-fail-terminate</code></td>
</tr><tr><th>導入</th>
<td>8.0.21-ndb-8.0.21</td>
</tr><tr><th>システム変数</th>
<td><code class="literal">ndb_log_fail_terminate</code></td>
</tr><tr><th>スコープ</th>
<td>グローバル</td>
</tr><tr><th>動的</th>
<td>いいえ</td>
</tr><tr><th><code class="literal">SET_VAR</code> ヒントの適用</th>
<td>いいえ</td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table></div><p>
          このオプションが指定され、見つかったすべての行イベントの完全なロギングが不可能な場合、<span class="command"><strong>mysqld</strong></span> プロセスは終了します。
        </p></li><li class="listitem"><p><a name="option_mysqld_ndb-log-orig"></a>
          <code class="option">--ndb-log-orig</code>
        </p><a class="indexterm" name="idm45563226959184"></a><a class="indexterm" name="idm45563226957408"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndb-log-orig"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--ndb-log-orig[={OFF|ON}]</code></td>
</tr><tr><th>システム変数</th>
<td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_log_orig">ndb_log_orig</a></code></td>
</tr><tr><th>スコープ</th>
<td>グローバル</td>
</tr><tr><th>動的</th>
<td>いいえ</td>
</tr><tr><th><code class="literal">SET_VAR</code> ヒントの適用</th>
<td>いいえ</td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">OFF</code></td>
</tr></tbody></table></div><p>
          発信元サーバーの ID とエポックを <code class="literal">ndb_binlog_index</code> テーブルに記録します。
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
            これにより、特定のエポックが、元のエポックごとに 1 つずつ、<code class="literal">ndb_binlog_index</code> に複数の行を持つことができます。
          </p></div><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-replication-schema" title="23.6.4 NDB Cluster レプリケーションスキーマおよびテーブル">セクション23.6.4「NDB Cluster レプリケーションスキーマおよびテーブル」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="option_mysqld_ndb-log-transaction-id"></a>
          <code class="option">--ndb-log-transaction-id</code>
        </p><a class="indexterm" name="idm45563226929456"></a><a class="indexterm" name="idm45563226927680"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndb-log-transaction-id"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--ndb-log-transaction-id[={OFF|ON}]</code></td>
</tr><tr><th>システム変数</th>
<td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_log_transaction_id">ndb_log_transaction_id</a></code></td>
</tr><tr><th>スコープ</th>
<td>グローバル</td>
</tr><tr><th>動的</th>
<td>いいえ</td>
</tr><tr><th><code class="literal">SET_VAR</code> ヒントの適用</th>
<td>いいえ</td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">OFF</code></td>
</tr></tbody></table></div><p>
          レプリカ <span class="command"><strong>mysqld</strong></span> が NDB トランザクション ID をバイナリログの各行に書き込みます。 デフォルト値は <code class="literal">FALSE</code> です。 
        </p><p>
          このオプションはメインラインの MySQL Server 8.0 ではサポートされません。 <code class="literal">NDB$EPOCH_TRANS()</code> 関数を使用して NDB Cluster レプリケーションの競合検出および解決を有効にする必要があります (<a class="xref" href="mysql-cluster.html#mysql-cluster-replication-ndb-epoch-trans" title="NDB$EPOCH_TRANS()">NDB$EPOCH_TRANS()</a> を参照)。 詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-replication-conflict-resolution" title="23.6.11 NDB Cluster レプリケーションの競合解決">セクション23.6.11「NDB Cluster レプリケーションの競合解決」</a>を参照してください。 
        </p><p>
          <code class="option">--ndb-log-transaction-id</code> を使用する場合は、非推奨の <code class="literal">log_bin_use_v1_row_events</code> システム変数 (デフォルトは <code class="literal">OFF</code>) を <code class="literal">ON</code> に設定しないでください。
        </p></li><li class="listitem"><p><a name="option_mysqld_ndb-log-update-minimal"></a>
          <code class="option">--ndb-log-update-minimal</code>
        </p><a class="indexterm" name="idm45563226895056"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndb-log-update-minimal"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--ndb-log-update-minimal[={OFF|ON}]</code></td>
</tr><tr><th>システム変数</th>
<td><code class="literal">ndb_log_update_minimal</code></td>
</tr><tr><th>スコープ</th>
<td>グローバル</td>
</tr><tr><th>動的</th>
<td>はい</td>
</tr><tr><th><code class="literal">SET_VAR</code> ヒントの適用</th>
<td>いいえ</td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">OFF</code></td>
</tr></tbody></table></div><p>
          ビフォアイメージに主キー値のみを書き込み、アフターイメージに変更されたカラムのみを書き込むことで、最小限の方法で更新を記録します。 これにより、<code class="literal">NDB</code> 以外のストレージエンジンにレプリケートする場合に互換性の問題が発生する可能性があります。 
        </p></li><li class="listitem"><p><a name="option_mysqld_ndb-mgmd-host"></a>
          <code class="option">--ndb-mgmd-host=<em class="replaceable"><code>host</code></em>[:<em class="replaceable"><code>port</code></em>]</code>
        </p><a class="indexterm" name="idm45563226870064"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndb-mgmd-host"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--ndb-mgmd-host=host_name[:port_num]</code></td>
</tr><tr><th>型</th>
<td>文字列</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">localhost:1186</code></td>
</tr></tbody></table></div><p>
          プログラムに接続される単一の管理サーバーのホストとポート番号の設定に使用できます。 プログラムの接続情報として複数の管理サーバーのノード ID または参照 (あるいはその両方) が必要な場合は、代わりに <code class="option">--ndb-connectstring</code> オプションを使用します。 
        </p></li><li class="listitem"><p><a name="option_mysqld_ndb-nodeid"></a>
          <code class="option">--ndb-nodeid=#</code>
        </p><a class="indexterm" name="idm45563226855408"></a><a class="indexterm" name="idm45563226853632"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndb-nodeid"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--ndb-nodeid=#</code></td>
</tr><tr><th>ステータス変数</th>
<td><code class="literal"><a class="link" href="mysql-cluster.html#statvar_Ndb_cluster_node_id">Ndb_cluster_node_id</a></code></td>
</tr><tr><th>スコープ</th>
<td>グローバル</td>
</tr><tr><th>動的</th>
<td>いいえ</td>
</tr><tr><th>型</th>
<td>Integer</td>
</tr><tr><th>最小値</th>
<td><code class="literal">1</code></td>
</tr><tr><th>最大値</th>
<td><code class="literal">255</code></td>
</tr><tr><th>最大値</th>
<td><code class="literal">63</code></td>
</tr></tbody></table></div><p>
          NDB Cluster でこの MySQL サーバーノード ID を設定します。
        </p><p>
          <code class="option">--ndb-nodeid</code> オプションは、<code class="option">--ndb-connectstring</code> で設定されたノード ID を (2 つのオプションの使用順序に関係なく) オーバーライドします。
        </p><p>
          また、<code class="option">--ndb-nodeid</code> を使用する場合は、<code class="filename">config.ini</code> の <code class="literal">[mysqld]</code> または <code class="literal">[api]</code> セクションに一致するノード ID が存在するか、このファイルに<span class="quote">「<span class="quote">オープンな</span>」</span> <code class="literal">[mysqld]</code> または <code class="literal">[api]</code> セクション (つまり、<code class="literal">NodeId</code> または <code class="literal">Id</code> パラメータが指定されていないセクション) が存在する必要があります。 これは、ノード ID が接続文字列の一部として指定されている場合にも当てはまります。 
        </p><p>
          ノード ID は、その指定方法に関係なく、<code class="literal">SHOW STATUS</code> の出力にグローバルステータス変数 <code class="literal">Ndb_cluster_node_id</code> の値として表示され、<code class="literal">SHOW ENGINE NDBCLUSTER STATUS</code> の出力の <code class="literal">connection</code> 行に <code class="literal">cluster_node_id</code> として表示されます。
        </p><p>
          NDB Cluster SQL ノードのノード ID の詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-api-definition" title="23.3.3.7 NDB Cluster での SQL およびその他の API ノードの定義">セクション23.3.3.7「NDB Cluster での SQL およびその他の API ノードの定義」</a> を参照してください。
        </p></li><li class="listitem"><p><a name="option_mysqld_ndbinfo"></a>
          <code class="option">--ndbinfo={ON|OFF|FORCE}</code>
        </p><a class="indexterm" name="idm45563226812112"></a><a class="indexterm" name="idm45563226809968"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndbinfo"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--ndbinfo[=value]</code> (≥ 8.0.13-ndb-8.0.13)</td>
</tr><tr><th>導入</th>
<td>8.0.13-ndb-8.0.13</td>
</tr><tr><th>型</th>
<td>列挙</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">ON</code></td>
</tr><tr><th>有効な値</th>
<td><p class="valid-value"><code class="literal">ON</code></p><p class="valid-value"><code class="literal">OFF</code></p><p class="valid-value"><code class="literal">FORCE</code></p></td>
</tr></tbody></table></div><p>
          <code class="literal">ndbinfo</code> 情報データベースのプラグインを有効にします。 デフォルトでは、<code class="literal">NDBCLUSTER</code> が有効になっている場合は常に ON です。 
        </p></li><li class="listitem"><p><a name="option_mysqld_ndb-optimization-delay"></a>
          <code class="option">--ndb-optimization-delay=<em class="replaceable"><code>milliseconds</code></em></code>
        </p><a class="indexterm" name="idm45563226786768"></a><a class="indexterm" name="idm45563226784544"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndb-optimization-delay"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--ndb-optimization-delay=#</code></td>
</tr><tr><th>システム変数</th>
<td><code class="literal">ndb_optimization_delay</code></td>
</tr><tr><th>スコープ</th>
<td>グローバル</td>
</tr><tr><th>動的</th>
<td>はい</td>
</tr><tr><th><code class="literal">SET_VAR</code> ヒントの適用</th>
<td>いいえ</td>
</tr><tr><th>型</th>
<td>Integer</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">10</code></td>
</tr><tr><th>最小値</th>
<td><code class="literal">0</code></td>
</tr><tr><th>最大値</th>
<td><code class="literal">100000</code></td>
</tr></tbody></table></div><p>
          <code class="literal">NDB</code> テーブルに対する <code class="literal">OPTIMIZE TABLE</code> ステートメントによる行セット間で待機するミリ秒数を設定します。 デフォルトは 10 です。 
        </p></li><li class="listitem"><p><a name="option_mysqld_ndb-transid-mysql-connection-map"></a>
          <code class="option">--ndb-transid-mysql-connection-map=<em class="replaceable"><code>state</code></em></code>
        </p><a class="indexterm" name="idm45563226753600"></a><a class="indexterm" name="idm45563226751408"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndb-transid-mysql-connection-map"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--ndb-transid-mysql-connection-map[=state]</code></td>
</tr><tr><th>型</th>
<td>列挙</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">ON</code></td>
</tr><tr><th>有効な値</th>
<td><p class="valid-value"><code class="literal">ON</code></p><p class="valid-value"><code class="literal">OFF</code></p><p class="valid-value"><code class="literal">FORCE</code></p></td>
</tr></tbody></table></div><p>
          <code class="literal">INFORMATION_SCHEMA</code> データベースの <code class="literal">ndb_transid_mysql_connection_map</code> テーブルを処理するプラグインを有効または無効にします。 <code class="literal">ON</code>、<code class="literal">OFF</code>、<code class="literal">FORCE</code> のいずれかの値を取ります。 <code class="literal">ON</code> (デフォルト) では、プラグインが有効になります。 <code class="literal">OFF</code> では、プラグインが無効になり、<code class="literal">ndb_transid_mysql_connection_map</code> にアクセスできなくなります。 <code class="literal">FORCE</code> では、プラグインのロードと起動に失敗した場合に MySQL Server が起動しなくなります。 
        </p><p>
          <code class="literal">ndb_transid_mysql_connection_map</code> テーブルプラグインが実行されているかどうかを確認するには、<code class="literal">SHOW PLUGINS</code> の出力をチェックします。
        </p></li><li class="listitem"><p><a name="option_mysqld_ndb-wait-connected"></a>
          <code class="option">--ndb-wait-connected=<em class="replaceable"><code>seconds</code></em></code>
        </p><a class="indexterm" name="idm45563226722288"></a><a class="indexterm" name="idm45563226720128"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndb-wait-connected"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--ndb-wait-connected=#</code></td>
</tr><tr><th>システム変数</th>
<td><code class="literal">ndb_wait_connected</code></td>
</tr><tr><th>スコープ</th>
<td>グローバル</td>
</tr><tr><th>動的</th>
<td>いいえ</td>
</tr><tr><th><code class="literal">SET_VAR</code> ヒントの適用</th>
<td>いいえ</td>
</tr><tr><th>型</th>
<td>Integer</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">30</code></td>
</tr><tr><th>最小値</th>
<td><code class="literal">0</code></td>
</tr><tr><th>最大値</th>
<td><code class="literal">31536000</code></td>
</tr></tbody></table></div><p>
          このオプションは、MySQL クライアント接続を受け入れる前に、NDB Cluster 管理およびデータノードへの接続が確立されるのを MySQL サーバーが待機する期間を設定します。 この時間は秒単位で指定します。 デフォルト値は <code class="literal">30</code> です。 
        </p></li><li class="listitem"><p><a name="option_mysqld_ndb-wait-setup"></a>
          <code class="option">--ndb-wait-setup=<em class="replaceable"><code>seconds</code></em></code>
        </p><a class="indexterm" name="idm45563226690208"></a><a class="indexterm" name="idm45563226688048"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndb-wait-setup"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--ndb-wait-setup=#</code></td>
</tr><tr><th>システム変数</th>
<td><code class="literal">ndb_wait_setup</code></td>
</tr><tr><th>スコープ</th>
<td>グローバル</td>
</tr><tr><th>動的</th>
<td>いいえ</td>
</tr><tr><th><code class="literal">SET_VAR</code> ヒントの適用</th>
<td>いいえ</td>
</tr><tr><th>型</th>
<td>Integer</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">30</code></td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">30</code></td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">15</code></td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">15</code></td>
</tr><tr><th>最小値</th>
<td><code class="literal">0</code></td>
</tr><tr><th>最大値</th>
<td><code class="literal">31536000</code></td>
</tr></tbody></table></div><p>
          この変数は、MySQL サーバーが <code class="literal">NDB</code> ストレージエンジンのセットアップが完了されるまで待機しタイムアウトして、<code class="literal">NDB</code> を使用不可として扱うまでの時間を示します。 この時間は秒単位で指定します。 デフォルト値は <code class="literal">30</code> です。 
        </p></li><li class="listitem"><p><a name="option_mysqld_skip-ndbcluster"></a>
          <code class="option">--skip-ndbcluster</code>
        </p><a class="indexterm" name="idm45563226649296"></a><a class="indexterm" name="idm45563226647136"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for skip-ndbcluster"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--skip-ndbcluster</code></td>
</tr></tbody></table></div><p>
          <code class="literal">NDBCLUSTER</code> ストレージエンジンを無効にします。 これは、<code class="literal">NDBCLUSTER</code> ストレージエンジンのサポート付きでビルドされたバイナリのデフォルトです。サーバーは、<code class="option">--ndbcluster</code> オプションが明示的に指定された場合にのみ、このストレージエンジン用にメモリーおよびその他のリソースを割り当てます。 例については、<a class="xref" href="mysql-cluster.html#mysql-cluster-quick" title="23.3.1 NDB Cluster のクイックテスト設定">セクション23.3.1「NDB Cluster のクイックテスト設定」</a>を参照してください。 
        </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="mysql-cluster-system-variables"></a>23.3.3.9.2 NDB Cluster システム変数</h5></div></div></div><p>
      このセクションでは、NDB Cluster および <code class="literal">NDB</code> ストレージエンジンに固有の MySQL サーバーシステム変数について詳しく説明します。 NDB Cluster に固有でないシステム変数については、<a class="xref" href="server-administration.html#server-system-variables" title="5.1.8 サーバーシステム変数">セクション5.1.8「サーバーシステム変数」</a> を参照してください。 システム変数の使用に関する一般情報は、<a class="xref" href="server-administration.html#using-system-variables" title="5.1.9 システム変数の使用">セクション5.1.9「システム変数の使用」</a>を参照してください。 
    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="sysvar_ndb_autoincrement_prefetch_sz"></a>
          <code class="literal">ndb_autoincrement_prefetch_sz</code>
        </p><a class="indexterm" name="idm45563226627840"></a><a class="indexterm" name="idm45563226626272"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndb_autoincrement_prefetch_sz"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--ndb-autoincrement-prefetch-sz=#</code></td>
</tr><tr><th>システム変数</th>
<td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_autoincrement_prefetch_sz">ndb_autoincrement_prefetch_sz</a></code></td>
</tr><tr><th>スコープ</th>
<td>グローバル、セッション</td>
</tr><tr><th>動的</th>
<td>はい</td>
</tr><tr><th><code class="literal">SET_VAR</code> ヒントの適用</th>
<td>いいえ</td>
</tr><tr><th>型</th>
<td>Integer</td>
</tr><tr><th>デフォルト値 (≥ 8.0.19-ndb-8.0.19)</th>
<td><code class="literal">512</code></td>
</tr><tr><th>デフォルト値 (≤ 8.0.18-ndb-8.0.18)</th>
<td><code class="literal">1</code></td>
</tr><tr><th>最小値</th>
<td><code class="literal">1</code></td>
</tr><tr><th>最大値</th>
<td><code class="literal">65536</code></td>
</tr></tbody></table></div><p>
          自動インクリメントカラムのギャップの可能性を指定します。 これを最小化するには、<code class="literal">1</code> に設定します。 最適化のために高い値に設定すると、挿入は高速になりますが、挿入のバッチで連続する自動インクリメント番号が使用される可能性は低くなります。 
        </p><p>
          この変数は、ステートメント間でフェッチされる <code class="literal">AUTO_INCREMENT</code> ID の数にのみ影響します。特定のステートメント内では、一度に少なくとも 32 個の ID が取得されます。
        </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">重要</div><p>
            この変数は、<code class="literal">INSERT ... SELECT</code> を使用して実行される挿入には影響しません。
          </p></div></li><li class="listitem"><p><a name="sysvar_ndb_cache_check_time"></a>
          <code class="literal">ndb_cache_check_time</code>
        </p><a class="indexterm" name="idm45563226589072"></a><a class="indexterm" name="idm45563226587520"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndb_cache_check_time"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--ndb-cache-check-time=#</code></td>
</tr><tr><th>非推奨</th>
<td>はい</td>
</tr><tr><th>システム変数</th>
<td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_cache_check_time">ndb_cache_check_time</a></code></td>
</tr><tr><th>スコープ</th>
<td>グローバル</td>
</tr><tr><th>動的</th>
<td>はい</td>
</tr><tr><th><code class="literal">SET_VAR</code> ヒントの適用</th>
<td>いいえ</td>
</tr><tr><th>型</th>
<td>Integer</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">0</code></td>
</tr></tbody></table></div><p>
          MySQL クエリーキャッシュによる NDB Cluster SQL ノードのチェック間に経過するミリ秒数。 これを 0 (デフォルトおよび最小値) に設定すると、クエリーキャッシュですべてのクエリーの妥当性がチェックされます。 
        </p><p>
          この変数の推奨最大値は 1000 です。これは、チェックが毎秒 1 回行われることを意味します。 より大きな値にすると、チェックが実行され、場合によっては異なる SQL ノードでの更新のために無効になる頻度が少なくなります。 これを 2000 より大きな値に設定することは、通常、望ましくありません。 
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
            クエリーキャッシュ <code class="literal">ndb_cache_check_time</code> は MySQL 5.7 で非推奨になりました。クエリーキャッシュは MySQL 8.0 で削除されました。
          </p></div></li><li class="listitem"><p><a name="sysvar_ndb_clear_apply_status"></a>
          <code class="literal">ndb_clear_apply_status</code>
        </p><a class="indexterm" name="idm45563226557232"></a><a class="indexterm" name="idm45563226555680"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndb_clear_apply_status"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--ndb-clear-apply-status[={OFF|ON}]</code></td>
</tr><tr><th>システム変数</th>
<td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_clear_apply_status">ndb_clear_apply_status</a></code></td>
</tr><tr><th>スコープ</th>
<td>グローバル</td>
</tr><tr><th>動的</th>
<td>はい</td>
</tr><tr><th><code class="literal">SET_VAR</code> ヒントの適用</th>
<td>いいえ</td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">ON</code></td>
</tr></tbody></table></div><p>
          デフォルトでは、<code class="literal">RESET SLAVE</code> を実行すると NDB Cluster レプリカはその <code class="literal">ndb_apply_status</code> テーブルからすべての行をパージします。 これを無効にするには、<code class="literal">ndb_clear_apply_status=OFF</code> を設定します。 
        </p></li><li class="listitem"><p><a name="sysvar_ndb_conflict_role"></a>
          <code class="literal">ndb_conflict_role</code>
        </p><a class="indexterm" name="idm45563226528336"></a><a class="indexterm" name="idm45563226526784"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndb_conflict_role"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--ndb-conflict-role=value</code></td>
</tr><tr><th>導入</th>
<td>8.0.23-ndb-8.0.23</td>
</tr><tr><th>システム変数</th>
<td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_conflict_role">ndb_conflict_role</a></code></td>
</tr><tr><th>スコープ</th>
<td>グローバル</td>
</tr><tr><th>動的</th>
<td>はい</td>
</tr><tr><th><code class="literal">SET_VAR</code> ヒントの適用</th>
<td>いいえ</td>
</tr><tr><th>型</th>
<td>列挙</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">NONE</code></td>
</tr><tr><th>有効な値</th>
<td><p class="valid-value"><code class="literal">NONE</code></p><p class="valid-value"><code class="literal">PRIMARY</code></p><p class="valid-value"><code class="literal">SECONDARY</code></p><p class="valid-value"><code class="literal">PASS</code></p></td>
</tr></tbody></table></div><p>
          循環 (<span class="quote">「<span class="quote">active-active</span>」</span>) レプリケーション設定でのこの SQL ノード (および NDB Cluster) の役割を決定します。<code class="literal">ndb_slave_conflict_role</code> には、<code class="literal">PRIMARY</code>, <code class="literal">SECONDARY</code>, <code class="literal">PASS</code> または <code class="literal">NULL</code> (デフォルト) のいずれかの値を指定できます。 <code class="literal">ndb_slave_conflict_role</code> を変更する前に、レプリカ SQL スレッドを停止する必要があります。 また、これを <code class="literal">PASS</code> と <code class="literal">PRIMARY</code> または <code class="literal">SECONDARY</code> のいずれかの間で直接変更することはできません。変更する場合は、SQL スレッドが停止していることを確認してから、先に <code class="literal">SET @@GLOBAL.ndb_slave_conflict_role = 'NONE'</code> を実行する必要があります。 
        </p><p>
          NDB 8.0.23 の時点で非推奨になった <code class="literal">ndb_slave_conflict_role</code> は、この変数に置き換えられます。
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-replication-conflict-resolution" title="23.6.11 NDB Cluster レプリケーションの競合解決">セクション23.6.11「NDB Cluster レプリケーションの競合解決」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="sysvar_ndb_data_node_neighbour"></a>
          <code class="literal">ndb_data_node_neighbour</code>
        </p><a class="indexterm" name="idm45563226482544"></a><a class="indexterm" name="idm45563226480992"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndb_data_node_neighbour"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--ndb-data-node-neighbour=#</code></td>
</tr><tr><th>システム変数</th>
<td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_data_node_neighbour">ndb_data_node_neighbour</a></code></td>
</tr><tr><th>スコープ</th>
<td>グローバル</td>
</tr><tr><th>動的</th>
<td>はい</td>
</tr><tr><th><code class="literal">SET_VAR</code> ヒントの適用</th>
<td>いいえ</td>
</tr><tr><th>型</th>
<td>Integer</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">0</code></td>
</tr><tr><th>最小値</th>
<td><code class="literal">0</code></td>
</tr><tr><th>最大値</th>
<td><code class="literal">255</code></td>
</tr></tbody></table></div><p>
          <span class="quote">「<span class="quote">nearest</span>」</span> データノードの ID を設定します。つまり、SQL または API ノードと同じホストで実行されているノードではなく、優先される非ローカルデータノードがトランザクションの実行に選択されます。 これは、完全にレプリケートされたテーブルにアクセスするときに、テーブルのローカルコピーが可能なかぎり常に使用されるように、このデータノード上でアクセスするために使用されます。 これは、トランザクションのヒントを提供するためにも使用できます。 
        </p><p>
          これにより、物理的に同じホスト上の他のノードよりも近く、ネットワークスループットが高いノードの場合に、データアクセス時間を改善できます。
        </p><p>
          詳細は、<a class="xref" href="sql-statements.html#create-table-ndb-table-comment-options" title="13.1.20.11 NDB_TABLE オプションの設定">セクション13.1.20.11「NDB_TABLE オプションの設定」</a> を参照してください。
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
            NDB API アプリケーションで使用するための同等の方法 <code class="literal">set_data_node_neighbour()</code> が提供されています。
          </p></div></li><li class="listitem"><p><a name="sysvar_ndb_dbg_check_shares"></a>
          <code class="literal">ndb_dbg_check_shares</code>
        </p><a class="indexterm" name="idm45563226445856"></a><a class="indexterm" name="idm45563226444304"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndb_dbg_check_shares"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--ndb-dbg-check-shares=#</code></td>
</tr><tr><th>導入</th>
<td>8.0.13-ndb-8.0.13</td>
</tr><tr><th>システム変数</th>
<td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_dbg_check_shares">ndb_dbg_check_shares</a></code></td>
</tr><tr><th>スコープ</th>
<td>グローバル、セッション</td>
</tr><tr><th>動的</th>
<td>はい</td>
</tr><tr><th><code class="literal">SET_VAR</code> ヒントの適用</th>
<td>いいえ</td>
</tr><tr><th>型</th>
<td>Integer</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">0</code></td>
</tr><tr><th>最小値</th>
<td><code class="literal">0</code></td>
</tr><tr><th>最大値</th>
<td><code class="literal">1</code></td>
</tr></tbody></table></div><p>
          1 に設定した場合は、リンガリングしているシェアがないことを確認します。 デバッグビルドでのみ使用できます。 
        </p><p>
          NDB 8.0.13 に追加されました。
        </p></li><li class="listitem"><p><a name="sysvar_ndb_default_column_format"></a>
          <code class="literal">ndb_default_column_format</code>
        </p><a class="indexterm" name="idm45563226412064"></a><a class="indexterm" name="idm45563226410496"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndb_default_column_format"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--ndb-default-column-format={FIXED|DYNAMIC}</code></td>
</tr><tr><th>システム変数</th>
<td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_default_column_format">ndb_default_column_format</a></code></td>
</tr><tr><th>スコープ</th>
<td>グローバル</td>
</tr><tr><th>動的</th>
<td>はい</td>
</tr><tr><th><code class="literal">SET_VAR</code> ヒントの適用</th>
<td>いいえ</td>
</tr><tr><th>型</th>
<td>列挙</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">FIXED</code></td>
</tr><tr><th>有効な値</th>
<td><p class="valid-value"><code class="literal">FIXED</code></p><p class="valid-value"><code class="literal">DYNAMIC</code></p></td>
</tr></tbody></table></div><p>
          新しいテーブルのデフォルトの <code class="literal">COLUMN_FORMAT</code> および <code class="literal">ROW_FORMAT</code> を設定します (<a class="xref" href="sql-statements.html#create-table" title="13.1.20 CREATE TABLE ステートメント">セクション13.1.20「CREATE TABLE ステートメント」</a> を参照)。 デフォルトは <code class="literal">FIXED</code> です。 
        </p></li><li class="listitem"><p><a name="sysvar_ndb_deferred_constraints"></a>
          <code class="literal">ndb_deferred_constraints</code>
        </p><a class="indexterm" name="idm45563226378992"></a><a class="indexterm" name="idm45563226377440"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndb_deferred_constraints"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--ndb-deferred-constraints=#</code></td>
</tr><tr><th>システム変数</th>
<td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_deferred_constraints">ndb_deferred_constraints</a></code></td>
</tr><tr><th>スコープ</th>
<td>グローバル、セッション</td>
</tr><tr><th>動的</th>
<td>はい</td>
</tr><tr><th><code class="literal">SET_VAR</code> ヒントの適用</th>
<td>いいえ</td>
</tr><tr><th>型</th>
<td>Integer</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">0</code></td>
</tr><tr><th>最小値</th>
<td><code class="literal">0</code></td>
</tr><tr><th>最大値</th>
<td><code class="literal">1</code></td>
</tr></tbody></table></div><p>
          制約チェックがサポートされる場合に、それを遅延するかどうかを制御します。<code class="literal">0</code> がデフォルトです。
        </p><p>
          この変数は通常、NDB Cluster または NDB Cluster レプリケーションの操作には必要なく、主にテストで使用することを目的としています。
        </p></li><li class="listitem"><p><a name="sysvar_ndb_distribution"></a>
          <code class="literal">ndb_distribution</code>
        </p><a class="indexterm" name="idm45563226346272"></a><a class="indexterm" name="idm45563226344736"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndb_distribution"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--ndb-distribution={KEYHASH|LINHASH}</code></td>
</tr><tr><th>システム変数</th>
<td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_distribution">ndb_distribution</a></code></td>
</tr><tr><th>スコープ</th>
<td>グローバル</td>
</tr><tr><th>動的</th>
<td>はい</td>
</tr><tr><th><code class="literal">SET_VAR</code> ヒントの適用</th>
<td>いいえ</td>
</tr><tr><th>型</th>
<td>列挙</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">KEYHASH</code></td>
</tr><tr><th>有効な値</th>
<td><p class="valid-value"><code class="literal">LINHASH</code></p><p class="valid-value"><code class="literal">KEYHASH</code></p></td>
</tr></tbody></table></div><p>
          <code class="literal">NDB</code> テーブルのデフォルトの分配方法を制御します。 <code class="literal">KEYHASH</code> (キーハッシュ) または <code class="literal">LINHASH</code> (線形ハッシュ) のいずれかに設定できます。 <code class="literal">KEYHASH</code> がデフォルトです。 
        </p></li><li class="listitem"><p><a name="sysvar_ndb_eventbuffer_free_percent"></a>
          <code class="literal">ndb_eventbuffer_free_percent</code>
        </p><a class="indexterm" name="idm45563226312976"></a><a class="indexterm" name="idm45563226311408"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndb_eventbuffer_free_percent"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--ndb-eventbuffer-free-percent=#</code></td>
</tr><tr><th>システム変数</th>
<td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_eventbuffer_free_percent">ndb_eventbuffer_free_percent</a></code></td>
</tr><tr><th>スコープ</th>
<td>グローバル</td>
</tr><tr><th>動的</th>
<td>はい</td>
</tr><tr><th><code class="literal">SET_VAR</code> ヒントの適用</th>
<td>いいえ</td>
</tr><tr><th>型</th>
<td>Integer</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">20</code></td>
</tr><tr><th>最小値</th>
<td><code class="literal">1</code></td>
</tr><tr><th>最大値</th>
<td><code class="literal">99</code></td>
</tr></tbody></table></div><p>
          イベントバッファ (ndb_eventbuffer_max_alloc) に割り当てられる最大メモリーの割合を設定します。この値は、最大値に達した後、再度バッファを開始する前にイベントバッファで使用可能である必要があります。
        </p></li><li class="listitem"><p><a name="sysvar_ndb_eventbuffer_max_alloc"></a>
          <code class="literal">ndb_eventbuffer_max_alloc</code>
        </p><a class="indexterm" name="idm45563226281392"></a><a class="indexterm" name="idm45563226279824"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndb_eventbuffer_max_alloc"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--ndb-eventbuffer-max-alloc=#</code></td>
</tr><tr><th>システム変数</th>
<td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_eventbuffer_max_alloc">ndb_eventbuffer_max_alloc</a></code></td>
</tr><tr><th>スコープ</th>
<td>グローバル</td>
</tr><tr><th>動的</th>
<td>はい</td>
</tr><tr><th><code class="literal">SET_VAR</code> ヒントの適用</th>
<td>いいえ</td>
</tr><tr><th>型</th>
<td>Integer</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">0</code></td>
</tr><tr><th>最小値</th>
<td><code class="literal">0</code></td>
</tr><tr><th>最大値</th>
<td><code class="literal">4294967295</code></td>
</tr></tbody></table></div><p>
          NDB API によるイベントのバッファリングに割り当てる可能な最大メモリー量 (バイト単位) を設定します。0 はデフォルトで、制限が適用されません。
        </p></li><li class="listitem"><p><a name="sysvar_ndb_extra_logging"></a>
          <code class="literal">ndb_extra_logging</code>
        </p><a class="indexterm" name="idm45563226249888"></a><a class="indexterm" name="idm45563226248336"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndb_extra_logging"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">ndb_extra_logging=#</code></td>
</tr><tr><th>システム変数</th>
<td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_extra_logging">ndb_extra_logging</a></code></td>
</tr><tr><th>スコープ</th>
<td>グローバル</td>
</tr><tr><th>動的</th>
<td>はい</td>
</tr><tr><th><code class="literal">SET_VAR</code> ヒントの適用</th>
<td>いいえ</td>
</tr><tr><th>型</th>
<td>Integer</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">1</code></td>
</tr></tbody></table></div><p>
          この変数は、<code class="literal">NDB</code> ストレージエンジンに固有の情報を MySQL エラーログに記録できるようにします。
        </p><p>
          この変数を 0 に設定すると、MySQL エラーログに書き込まれる <code class="literal">NDB</code> 固有の情報がトランザクション処理に関するものだけになります。 0 より大きく 10 より小さい値に設定すると、<code class="literal">NDB</code> のテーブルスキーマイベントと接続イベント、競合解決の使用中の有無、および <code class="literal">NDB</code> のその他のエラーと情報も記録されます。 値を 10 以上に設定すると、<code class="literal">NDB</code> の内部に関する情報 (クラスタノード間のデータ分配の進行状況など) も MySQL エラーログに書き込まれます。 デフォルトは 1 です。 
        </p></li><li class="listitem"><p><a name="sysvar_ndb_force_send"></a>
          <code class="literal">ndb_force_send</code>
        </p><a class="indexterm" name="idm45563226218272"></a><a class="indexterm" name="idm45563226216800"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndb_force_send"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--ndb-force-send[={OFF|ON}]</code></td>
</tr><tr><th>システム変数</th>
<td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_force_send">ndb_force_send</a></code></td>
</tr><tr><th>スコープ</th>
<td>グローバル、セッション</td>
</tr><tr><th>動的</th>
<td>はい</td>
</tr><tr><th><code class="literal">SET_VAR</code> ヒントの適用</th>
<td>いいえ</td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">ON</code></td>
</tr></tbody></table></div><p>
          ほかのスレッドを待機せずに、バッファーを <code class="literal">NDB</code> にただちに送信します。 デフォルトは <code class="literal">ON</code> です。 
        </p></li><li class="listitem"><p><a name="sysvar_ndb_fully_replicated"></a>
          <code class="literal">ndb_fully_replicated</code>
        </p><a class="indexterm" name="idm45563226190368"></a><a class="indexterm" name="idm45563226188816"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndb_fully_replicated"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--ndb-fully-replicated[={OFF|ON}]</code></td>
</tr><tr><th>システム変数</th>
<td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_fully_replicated">ndb_fully_replicated</a></code></td>
</tr><tr><th>スコープ</th>
<td>グローバル、セッション</td>
</tr><tr><th>動的</th>
<td>はい</td>
</tr><tr><th><code class="literal">SET_VAR</code> ヒントの適用</th>
<td>いいえ</td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">OFF</code></td>
</tr></tbody></table></div><p>
          新しい <code class="literal">NDB</code> テーブルを完全にレプリケートするかどうかを決定します。 この設定は、<code class="literal">CREATE TABLE</code> ステートメントまたは <code class="literal">ALTER TABLE</code> ステートメントで <code class="literal">COMMENT="NDB_TABLE=FULLY_REPLICATED=..."</code>を使用して、個々のテーブルに対してオーバーライドできます。構文およびその他の情報は、<a class="xref" href="sql-statements.html#create-table-ndb-table-comment-options" title="13.1.20.11 NDB_TABLE オプションの設定">セクション13.1.20.11「NDB_TABLE オプションの設定」</a> を参照してください。 
        </p></li><li class="listitem"><p><a name="sysvar_ndb_index_stat_enable"></a>
          <code class="literal">ndb_index_stat_enable</code>
        </p><a class="indexterm" name="idm45563226159664"></a><a class="indexterm" name="idm45563226158112"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndb_index_stat_enable"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--ndb-index-stat-enable[={OFF|ON}]</code></td>
</tr><tr><th>システム変数</th>
<td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_index_stat_enable">ndb_index_stat_enable</a></code></td>
</tr><tr><th>スコープ</th>
<td>グローバル、セッション</td>
</tr><tr><th>動的</th>
<td>はい</td>
</tr><tr><th><code class="literal">SET_VAR</code> ヒントの適用</th>
<td>いいえ</td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">ON</code></td>
</tr></tbody></table></div><p>
          クエリーの最適化で <code class="literal">NDB</code> インデックス統計を使用します。 デフォルトは <code class="literal">ON</code> です。 
        </p></li><li class="listitem"><p><a name="sysvar_ndb_index_stat_option"></a>
          <code class="literal">ndb_index_stat_option</code>
        </p><a class="indexterm" name="idm45563226131744"></a><a class="indexterm" name="idm45563226130192"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndb_index_stat_option"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--ndb-index-stat-option=value</code></td>
</tr><tr><th>システム変数</th>
<td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_index_stat_option">ndb_index_stat_option</a></code></td>
</tr><tr><th>スコープ</th>
<td>グローバル、セッション</td>
</tr><tr><th>動的</th>
<td>はい</td>
</tr><tr><th><code class="literal">SET_VAR</code> ヒントの適用</th>
<td>いいえ</td>
</tr><tr><th>型</th>
<td>文字列</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">loop_checkon=1000ms,loop_idle=1000ms,loop_busy=100ms,         update_batch=1,read_batch=4,idle_batch=32,check_batch=32,         check_delay=1m,delete_batch=8,clean_delay=0,error_batch=4,         error_delay=1m,evict_batch=8,evict_delay=1m,cache_limit=32M,         cache_lowpct=90</code></td>
</tr></tbody></table></div><p>
          この変数は、NDB インデックス統計の生成に関する調整オプションを提供するために使用されます。 リストはオプション名と値のカンマ区切りの名前と値のペアで構成され、このリストに空白文字を含めることはできません。 
        </p><p>
          <code class="literal">ndb_index_stat_option</code> の設定時に使用していなかったオプションは、デフォルト値から変更できません。 たとえば、<code class="literal">ndb_index_stat_option = 'loop_idle=1000ms,cache_limit=32M'</code> のように設定できます。 
        </p><p>
          時間値の末尾には、オプションで <code class="literal">h</code> (時間)、<code class="literal">m</code> (分) または <code class="literal">s</code> (秒) を付けることができます。 ミリ秒の値は、オプションで <code class="literal">ms</code> を使用して指定できます。ミリ秒の値は、<code class="literal">h</code>、<code class="literal">m</code> または <code class="literal">s</code> を使用して指定できません。) 整数値のサフィクスとして <code class="literal">K</code>、<code class="literal">M</code>、または <code class="literal">G</code> を使用できます。 
        </p><p>
          この変数を使用して設定できるオプションの名前を次の表に示します。 この表には、オプションの簡単な説明、デフォルト値、および (適用可能な場合は) 最小値と最大値も示します。 
        </p><div class="table"><a name="idm45563226095264"></a><p class="title"><b>表 23.20 ndb_index_stat_option のオプションと値</b></p><div class="table-contents"><table><col style="width: 25%"><col style="width: 25%"><col style="width: 25%"><col style="width: 25%"><thead><tr>
              <th scope="col">名前</th>
              <th scope="col">説明</th>
              <th scope="col">デフォルト/単位</th>
              <th scope="col">最小/最大</th>
            </tr></thead><tbody><tr>
              <th scope="row"><code class="literal">loop_enable</code></th>
              <td></td>
              <td>1000 ms</td>
              <td>0/4G</td>
            </tr><tr>
              <th scope="row"><code class="literal">loop_idle</code></th>
              <td>アイドル時のスリープ時間</td>
              <td>1000 ms</td>
              <td>0/4G</td>
            </tr><tr>
              <th scope="row"><code class="literal">loop_busy</code></th>
              <td>追加作業が待機しているときのスリープ時間</td>
              <td>100 ms</td>
              <td>0/4G</td>
            </tr><tr>
              <th scope="row"><code class="literal">update_batch</code></th>
              <td></td>
              <td>1</td>
              <td>0/4G</td>
            </tr><tr>
              <th scope="row"><code class="literal">read_batch</code></th>
              <td></td>
              <td>4</td>
              <td>1/4G</td>
            </tr><tr>
              <th scope="row"><code class="literal">idle_batch</code></th>
              <td></td>
              <td>32</td>
              <td>1/4G</td>
            </tr><tr>
              <th scope="row"><code class="literal">check_batch</code></th>
              <td></td>
              <td>8</td>
              <td>1/4G</td>
            </tr><tr>
              <th scope="row"><code class="literal">check_delay</code></th>
              <td>新しい統計をチェックする頻度</td>
              <td>10 m</td>
              <td>1/4G</td>
            </tr><tr>
              <th scope="row"><code class="literal">delete_batch</code></th>
              <td></td>
              <td>8</td>
              <td>0/4G</td>
            </tr><tr>
              <th scope="row"><code class="literal">clean_delay</code></th>
              <td></td>
              <td>1 m</td>
              <td>0/4G</td>
            </tr><tr>
              <th scope="row"><code class="literal">error_batch</code></th>
              <td></td>
              <td>4</td>
              <td>1/4G</td>
            </tr><tr>
              <th scope="row"><code class="literal">error_delay</code></th>
              <td></td>
              <td>1 m</td>
              <td>1/4G</td>
            </tr><tr>
              <th scope="row"><code class="literal">evict_batch</code></th>
              <td></td>
              <td>8</td>
              <td>1/4G</td>
            </tr><tr>
              <th scope="row"><code class="literal">evict_delay</code></th>
              <td>LRU キャッシュを削除します (読み取り時から)</td>
              <td>1 m</td>
              <td>0/4G</td>
            </tr><tr>
              <th scope="row"><code class="literal">cache_limit</code></th>
              <td>この <span class="command"><strong>mysqld</strong></span> がキャッシュされたインデックス統計のために使用するメモリーの最大量 (バイト単位)。これを超えたときにキャッシュをクリーンアップします。</td>
              <td>32 M</td>
              <td>0/4G</td>
            </tr><tr>
              <th scope="row"><code class="literal">cache_lowpct</code></th>
              <td></td>
              <td>90</td>
              <td>0/100</td>
            </tr><tr>
              <th scope="row"><code class="literal">zero_total</code></th>
              <td>これを 1 に設定すると、<code class="literal">ndb_index_stat_status</code> のすべての累積カウンタが 0 にリセットされます。 これを実行すると、このオプションの値も 0 にリセットされます。 </td>
              <td>0</td>
              <td>0/1</td>
            </tr></tbody></table></div></div><br class="table-break"></li><li class="listitem"><p><a name="sysvar_ndb_join_pushdown"></a>
          <code class="literal">ndb_join_pushdown</code>
        </p><a class="indexterm" name="idm45563226004768"></a><a class="indexterm" name="idm45563226003216"></a><a class="indexterm" name="idm45563226001328"></a><a class="indexterm" name="idm45563225999840"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndb_join_pushdown"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>システム変数</th>
<td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_join_pushdown">ndb_join_pushdown</a></code></td>
</tr><tr><th>スコープ</th>
<td>グローバル、セッション</td>
</tr><tr><th>動的</th>
<td>はい</td>
</tr><tr><th><code class="literal">SET_VAR</code> ヒントの適用</th>
<td>いいえ</td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">ON</code></td>
</tr></tbody></table></div><p>
          この変数は、<code class="literal">NDB</code> テーブル上の結合が NDB カーネル (データノード) にプッシュダウンされるかどうかを制御します。 以前は、SQL ノードによる <code class="literal">NDB</code> の複数アクセスにより結合が処理されていましたが、<code class="literal">ndb_join_pushdown</code> を有効にすると、プッシュ可能な結合のすべてがデータノードに送信されます。この場合、結合はデータノード間で分配され、データの複数のコピーに対して並列で実行され、単一のマージされた結果が <span class="command"><strong>mysqld</strong></span> に返されます。 これにより、このような結合を処理するために必要な SQL ノードとデータノード間のラウンドトリップの回数を大幅に減らすことができます。 
        </p><p>
          デフォルトでは、<code class="literal">ndb_join_pushdown</code> は有効になっています。
        </p><p><a name="ndb_join_pushdown-conditions"></a><b>NDB プッシュダウン結合の条件. </b>
            結合をプッシュ可能にするには、次の条件を満たす必要があります。
          </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
              比較できるのはカラムのみであり、結合されるすべてのカラムが<span class="emphasis"><em>完全に</em></span>同じデータ型を使用している必要があります。 つまり、<code class="literal">INT</code> カラムと <code class="literal">BIGINT</code> カラムの結合もプッシュダウンできません。 
            </p><p>
              以前は、<code class="literal">t1.a = t2.a + <em class="replaceable"><code>constant</code></em></code> などの式をプッシュダウンできませんでした。 この制限は NDB 8.0.18 以降で解除されています。 比較するカラムに対する操作の結果は、カラム自体と同じ型になる必要があります。 
            </p><p>
              NDB 8.0.18 以降では、同じテーブルのカラムを比較する式をプッシュダウンできます。 カラム (またはこれらのカラムに対する操作の結果) は、同じ符号、長さ、文字セットと照合順序、精度およびスケール (該当する場合) を含む、まったく同じタイプである必要があります。 
            </p></li><li class="listitem"><p>
              <code class="literal">BLOB</code> または <code class="literal">TEXT</code> カラムを参照するクエリーはサポートされません。
            </p></li><li class="listitem"><p>
              明示的なロックはサポートされません。ただし、<code class="literal">NDB</code> ストレージエンジンの特徴である暗黙的な行ベースのロックは適用されます。
            </p><p>
              これは、<code class="literal">FOR UPDATE</code> を使用する結合をプッシュダウンできないことを意味します。
            </p></li><li class="listitem"><p>
              結合をプッシュダウンするには、<code class="literal">ref</code>、<code class="literal">eq_ref</code>、または <code class="literal">const</code> アクセスメソッドのいずれか、またはこれらのメソッドの組み合わせを使用して結合の子テーブルにアクセスする必要があります。
            </p><p>
              外部結合された子テーブルは、<code class="literal">eq_ref</code> のみを使用してプッシュできます。
            </p><p>
              プッシュされた結合のルートが <code class="literal">eq_ref</code> または <code class="literal">const</code> である場合は、<code class="literal">eq_ref</code> によって結合された子テーブルのみを追加できます。 (<code class="literal">ref</code> によって結合されたテーブルは、プッシュされた結合の別のルートになる可能性があります。) 
            </p><p>
              クエリーオプティマイザで候補となる子テーブルに <code class="literal">Using join cache</code> を指定した場合は、そのテーブルは子としてプッシュできません。 ただし、プッシュされたテーブルの別のセットのルートになることはできます。 
            </p></li><li class="listitem"><p>
              <code class="literal">[LINEAR] HASH</code>、<code class="literal">LIST</code>、または <code class="literal">RANGE</code> によって明示的にパーティション化されたテーブルを参照する結合は、現在のところプッシュダウンできません。
            </p></li></ol></div><p>
          特定の結合をプッシュダウンできるかどうかを確認するには、それを <code class="literal">EXPLAIN</code> でチェックします。結合をプッシュダウンできる場合は、この例に示すように、出力の <code class="literal">Extra</code> カラムに <code class="literal">pushed join</code> への参照が表示されます。
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>EXPLAIN</code></strong>
    -&gt;     <strong class="userinput"><code>SELECT e.first_name, e.last_name, t.title, d.dept_name</code></strong>
    -&gt;         <strong class="userinput"><code>FROM employees e</code></strong>
    -&gt;         <strong class="userinput"><code>JOIN dept_emp de ON e.emp_no=de.emp_no</code></strong>
    -&gt;         <strong class="userinput"><code>JOIN departments d ON d.dept_no=de.dept_no</code></strong>
    -&gt;         <strong class="userinput"><code>JOIN titles t ON e.emp_no=t.emp_no\G</code></strong>
*************************** 1. row ***************************
           id: 1
  select_type: SIMPLE
        table: d
         type: ALL
possible_keys: PRIMARY
          key: NULL
      key_len: NULL
          ref: NULL
         rows: 9
        Extra: Parent of 4 pushed join@1
*************************** 2. row ***************************
           id: 1
  select_type: SIMPLE
        table: de
         type: ref
possible_keys: PRIMARY,emp_no,dept_no
          key: dept_no
      key_len: 4
          ref: employees.d.dept_no
         rows: 5305
        Extra: Child of 'd' in pushed join@1
*************************** 3. row ***************************
           id: 1
  select_type: SIMPLE
        table: e
         type: eq_ref
possible_keys: PRIMARY
          key: PRIMARY
      key_len: 4
          ref: employees.de.emp_no
         rows: 1
        Extra: Child of 'de' in pushed join@1
*************************** 4. row ***************************
           id: 1
  select_type: SIMPLE
        table: t
         type: ref
possible_keys: PRIMARY,emp_no
          key: emp_no
      key_len: 4
          ref: employees.de.emp_no
         rows: 19
        Extra: Child of 'e' in pushed join@1
4 rows in set (0.00 sec)
</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
            内部結合されたテーブルが <code class="literal">ref</code> によって結合され、<span class="emphasis"><em>かつ</em></span>その結果がソートされたインデックスによって順序付けまたはグループ化された場合、このインデックスはソートされた行を提供できず、ソートされた一時ファイルへの書き込みが強制されます。
          </p></div><p>
          プッシュされた結合の動作については、追加の情報源が 2 つあります。
        </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
              ステータス変数 <code class="literal">Ndb_pushed_queries_defined</code>、<code class="literal">Ndb_pushed_queries_dropped</code>、<code class="literal">Ndb_pushed_queries_executed</code>、および <code class="literal">Ndb_pushed_reads</code>。
            </p></li><li class="listitem"><p>
              <code class="literal">DBSPJ</code> カーネルブロックに属する <code class="literal">ndbinfo.counters</code> テーブル内のカウンタ。
            </p></li></ol></div></li><li class="listitem"><p><a name="sysvar_ndb_log_apply_status"></a>
          <code class="literal">ndb_log_apply_status</code>
        </p><a class="indexterm" name="idm45563225918368"></a><a class="indexterm" name="idm45563225916816"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndb_log_apply_status"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--ndb-log-apply-status[={OFF|ON}]</code></td>
</tr><tr><th>システム変数</th>
<td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_log_apply_status">ndb_log_apply_status</a></code></td>
</tr><tr><th>スコープ</th>
<td>グローバル</td>
</tr><tr><th>動的</th>
<td>いいえ</td>
</tr><tr><th><code class="literal">SET_VAR</code> ヒントの適用</th>
<td>いいえ</td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">OFF</code></td>
</tr></tbody></table></div><p>
          <code class="option">--ndb-log-apply-status</code> オプションを使用してサーバーが起動されたかどうかを示す読み取り専用の変数。
        </p></li><li class="listitem"><p><a name="sysvar_ndb_log_bin"></a>
          <code class="literal">ndb_log_bin</code>
        </p><a class="indexterm" name="idm45563225891408"></a><a class="indexterm" name="idm45563225889936"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndb_log_bin"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--ndb-log-bin[={OFF|ON}]</code></td>
</tr><tr><th>システム変数</th>
<td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_log_bin">ndb_log_bin</a></code></td>
</tr><tr><th>スコープ</th>
<td>グローバル、セッション</td>
</tr><tr><th>動的</th>
<td>はい</td>
</tr><tr><th><code class="literal">SET_VAR</code> ヒントの適用</th>
<td>いいえ</td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値 (≥ 8.0.16-ndb-8.0.16)</th>
<td><code class="literal">OFF</code></td>
</tr><tr><th>デフォルト値 (≤ 8.0.15-ndb-8.0.15)</th>
<td><code class="literal">ON</code></td>
</tr></tbody></table></div><p>
          <code class="literal">NDB</code> テーブルの更新がバイナリログに書き込まれるようになります。 <code class="literal">log_bin</code> を使用しているサーバーでバイナリロギングがまだ有効になっていない場合、この変数の設定は無効です。 NDB 8.0.16 以降では、<code class="literal">ndb_log_bin</code> のデフォルトは 0 (FALSE) です。 
        </p></li><li class="listitem"><p><a name="sysvar_ndb_log_binlog_index"></a>
          <code class="literal">ndb_log_binlog_index</code>
        </p><a class="indexterm" name="idm45563225860000"></a><a class="indexterm" name="idm45563225858448"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndb_log_binlog_index"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--ndb-log-binlog-index[={OFF|ON}]</code></td>
</tr><tr><th>システム変数</th>
<td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_log_binlog_index">ndb_log_binlog_index</a></code></td>
</tr><tr><th>スコープ</th>
<td>グローバル</td>
</tr><tr><th>動的</th>
<td>はい</td>
</tr><tr><th><code class="literal">SET_VAR</code> ヒントの適用</th>
<td>いいえ</td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">ON</code></td>
</tr></tbody></table></div><p>
          エポックとバイナリログ内の位置とのマッピングが <code class="literal">ndb_binlog_index</code> テーブルに挿入されるようになります。 サーバーのバイナリロギングがまだ <code class="literal">log_bin</code> を使用して有効になっていない場合は、この変数を設定しても無効になります。 (また、<code class="literal">ndb_log_bin</code> も無効にしないでください。) <code class="literal">ndb_log_binlog_index</code> のデフォルトは <code class="literal">1</code> (<code class="literal">ON</code>) です。通常、本番環境でこの値を変更する必要はありません。 
        </p></li><li class="listitem"><p><a name="sysvar_ndb_log_empty_epochs"></a>
          <code class="literal">ndb_log_empty_epochs</code>
        </p><a class="indexterm" name="idm45563225828320"></a><a class="indexterm" name="idm45563225826768"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndb_log_empty_epochs"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--ndb-log-empty-epochs[={OFF|ON}]</code></td>
</tr><tr><th>システム変数</th>
<td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_log_empty_epochs">ndb_log_empty_epochs</a></code></td>
</tr><tr><th>スコープ</th>
<td>グローバル</td>
</tr><tr><th>動的</th>
<td>はい</td>
</tr><tr><th><code class="literal">SET_VAR</code> ヒントの適用</th>
<td>いいえ</td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">OFF</code></td>
</tr></tbody></table></div><p>
          この変数を 0 に設定すると、変更がなかったエポックトランザクションがバイナリログに書き込まれなくなりますが、<code class="literal">ndb_binlog_index</code> には空のエポックの行も書き込まれます。
        </p></li><li class="listitem"><p><a name="sysvar_ndb_log_empty_update"></a>
          <code class="literal">ndb_log_empty_update</code>
        </p><a class="indexterm" name="idm45563225801152"></a><a class="indexterm" name="idm45563225799600"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndb_log_empty_update"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--ndb-log-empty-update[={OFF|ON}]</code></td>
</tr><tr><th>システム変数</th>
<td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_log_empty_update">ndb_log_empty_update</a></code></td>
</tr><tr><th>スコープ</th>
<td>グローバル</td>
</tr><tr><th>動的</th>
<td>はい</td>
</tr><tr><th><code class="literal">SET_VAR</code> ヒントの適用</th>
<td>いいえ</td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">OFF</code></td>
</tr></tbody></table></div><p>
          この変数が <code class="literal">ON</code> (<code class="literal">1</code>) に設定されている場合、<code class="literal">log_slave_updates</code> が有効になっていても、変更のない更新トランザクションはバイナリログに書き込まれます。
        </p></li><li class="listitem"><p><a name="sysvar_ndb_log_exclusive_reads"></a>
          <code class="literal">ndb_log_exclusive_reads</code>
        </p><a class="indexterm" name="idm45563225772400"></a><a class="indexterm" name="idm45563225770848"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndb_log_exclusive_reads"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--ndb-log-exclusive-reads[={OFF|ON}]</code></td>
</tr><tr><th>システム変数</th>
<td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_log_exclusive_reads">ndb_log_exclusive_reads</a></code></td>
</tr><tr><th>スコープ</th>
<td>グローバル、セッション</td>
</tr><tr><th>動的</th>
<td>はい</td>
</tr><tr><th><code class="literal">SET_VAR</code> ヒントの適用</th>
<td>いいえ</td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">0</code></td>
</tr></tbody></table></div><p>
          この変数は、主キーの読み取りを排他ロックで記録するかどうかを決定します。これにより、NDB Cluster レプリケーションの競合検出および読み取りの競合に基づく解決が可能になります。 このロックを有効にするには、<code class="literal">ndb_log_exclusive_reads</code> の値を 1 に設定します。0 (このようなロックを無効にする) がデフォルトです。 
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-replication-examples-read-conflicts" title="読み取り競合の検出と解決">読み取り競合の検出と解決</a>を参照してください。
        </p></li><li class="listitem"><p><a name="sysvar_ndb_log_orig"></a>
          <code class="literal">ndb_log_orig</code>
        </p><a class="indexterm" name="idm45563225743712"></a><a class="indexterm" name="idm45563225742192"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndb_log_orig"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--ndb-log-orig[={OFF|ON}]</code></td>
</tr><tr><th>システム変数</th>
<td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_log_orig">ndb_log_orig</a></code></td>
</tr><tr><th>スコープ</th>
<td>グローバル</td>
</tr><tr><th>動的</th>
<td>いいえ</td>
</tr><tr><th><code class="literal">SET_VAR</code> ヒントの適用</th>
<td>いいえ</td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">OFF</code></td>
</tr></tbody></table></div><p>
          発信元サーバーの ID とエポックが <code class="literal">ndb_binlog_index</code> テーブルに記録されるかどうかを示します。 <code class="option">--ndb-log-orig</code> サーバーオプションを使用して設定します。 
        </p></li><li class="listitem"><p><a name="sysvar_ndb_log_transaction_id"></a>
          <code class="literal">ndb_log_transaction_id</code>
        </p><a class="indexterm" name="idm45563225715872"></a><a class="indexterm" name="idm45563225714320"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndb_log_transaction_id"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>システム変数</th>
<td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_log_transaction_id">ndb_log_transaction_id</a></code></td>
</tr><tr><th>スコープ</th>
<td>グローバル</td>
</tr><tr><th>動的</th>
<td>いいえ</td>
</tr><tr><th><code class="literal">SET_VAR</code> ヒントの適用</th>
<td>いいえ</td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">OFF</code></td>
</tr></tbody></table></div><p>
          この読み取り専用のブールシステム変数は、レプリカ <span class="command"><strong>mysqld</strong></span> が NDB トランザクション ID をバイナリログに書き込むかどうかを示します (<code class="literal">NDB$EPOCH_TRANS()</code> 競合検出で <span class="quote">「<span class="quote">active-active</span>」</span> NDB Cluster レプリケーションを使用するために必要です)。 この設定を変更するには、<code class="option">--ndb-log-transaction-id</code> オプションを使用します。 
        </p><p>
          メインラインの MySQL Server 8.0 では <code class="literal">ndb_log_transaction_id</code> はサポートされません。
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-replication-conflict-resolution" title="23.6.11 NDB Cluster レプリケーションの競合解決">セクション23.6.11「NDB Cluster レプリケーションの競合解決」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="sysvar_ndb_metadata_check"></a>
          <code class="literal">ndb_metadata_check</code>
        </p><a class="indexterm" name="idm45563225686208"></a><a class="indexterm" name="idm45563225684656"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndb_metadata_check"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--ndb-metadata-check[={OFF|ON}]</code></td>
</tr><tr><th>導入</th>
<td>8.0.16-ndb-8.0.16</td>
</tr><tr><th>システム変数</th>
<td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_metadata_check">ndb_metadata_check</a></code></td>
</tr><tr><th>スコープ</th>
<td>グローバル</td>
</tr><tr><th>動的</th>
<td>はい</td>
</tr><tr><th><code class="literal">SET_VAR</code> ヒントの適用</th>
<td>いいえ</td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">ON</code></td>
</tr></tbody></table></div><p>
          NDB 8.0.16 以降、<code class="literal">NDB</code> はバックグラウンドスレッドを使用して、MySQL データディクショナリと比較して <code class="literal">ndb_metadata_check_interval</code> 秒ごとにメタデータの変更をチェックします。 このメタデータ変更検出スレッドは、<code class="literal">ndb_metadata_check</code> を <code class="literal">OFF</code> に設定することで無効にできます。 スレッドはデフォルトで有効になっています。 
        </p></li><li class="listitem"><p><a name="sysvar_ndb_metadata_check_interval"></a>
          <code class="literal">ndb_metadata_check_interval</code>
        </p><a class="indexterm" name="idm45563225654304"></a><a class="indexterm" name="idm45563225652736"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndb_metadata_check_interval"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--ndb-metadata-check-interval=#</code></td>
</tr><tr><th>導入</th>
<td>8.0.16-ndb-8.0.16</td>
</tr><tr><th>システム変数</th>
<td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_metadata_check_interval">ndb_metadata_check_interval</a></code></td>
</tr><tr><th>スコープ</th>
<td>グローバル</td>
</tr><tr><th>動的</th>
<td>はい</td>
</tr><tr><th><code class="literal">SET_VAR</code> ヒントの適用</th>
<td>いいえ</td>
</tr><tr><th>型</th>
<td>Integer</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">60</code></td>
</tr><tr><th>最小値</th>
<td><code class="literal">0</code></td>
</tr><tr><th>最大値</th>
<td><code class="literal">31536000</code></td>
</tr><tr><th>単位</th>
<td><code class="literal">seconds</code></td>
</tr></tbody></table></div><p>
          NDB 8.0.16 以降では、NDB はメタデータ変更検出スレッドをバックグラウンドで実行して、NDB ディクショナリが MySQL データディクショナリに関していつ変更されたかを判断します。 デフォルトでは、このようなチェックの間隔は 60 秒です。これは、<code class="literal">ndb_metadata_check_interval</code> の値を設定することで調整できます。 スレッドを有効または無効にするには、<code class="literal">ndb_metadata_check</code> を使用します。 
        </p></li><li class="listitem"><p><a name="sysvar_ndb_metadata_sync"></a>
          <code class="literal">ndb_metadata_sync</code>
        </p><a class="indexterm" name="idm45563225616128"></a><a class="indexterm" name="idm45563225614576"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndb_metadata_sync"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>導入</th>
<td>8.0.19-ndb-8.0.19</td>
</tr><tr><th>システム変数</th>
<td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_metadata_sync">ndb_metadata_sync</a></code></td>
</tr><tr><th>スコープ</th>
<td>グローバル</td>
</tr><tr><th>動的</th>
<td>はい</td>
</tr><tr><th><code class="literal">SET_VAR</code> ヒントの適用</th>
<td>いいえ</td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">false</code></td>
</tr></tbody></table></div><p>
          この変数を設定すると、変更モニタースレッドは <code class="literal">ndb_metadata_check</code> または <code class="literal">ndb_metadata_check_interval</code> に設定された値をオーバーライドし、連続した変更検出の期間を入力します。 スレッドは、検出する変更がなくなったことを確認すると、バイナリロギングスレッドが検出されたすべてのオブジェクトの同期を終了するまで停止します。その後、<code class="literal">ndb_metadata_sync</code> は <code class="literal">false</code> に設定され、変更モニタースレッドは <code class="literal">ndb_metadata_check</code> および <code class="literal">ndb_metadata_check_interval</code> の設定によって決定された動作に戻ります。 
        </p><p>
          NDB 8.0.22 以降では、この変数を <code class="literal">true</code> に設定すると、除外されたオブジェクトのリストがクリアされ、<code class="literal">false</code> に設定すると、再試行されるオブジェクトのリストがクリアされます。
        </p></li><li class="listitem"><p><a name="sysvar_ndb_optimized_node_selection"></a>
          <code class="literal">ndb_optimized_node_selection</code>
        </p><a class="indexterm" name="idm45563225582304"></a><a class="indexterm" name="idm45563225580736"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndb_optimized_node_selection"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--ndb-optimized-node-selection=#</code></td>
</tr><tr><th>システム変数</th>
<td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_optimized_node_selection">ndb_optimized_node_selection</a></code></td>
</tr><tr><th>スコープ</th>
<td>グローバル</td>
</tr><tr><th>動的</th>
<td>いいえ</td>
</tr><tr><th><code class="literal">SET_VAR</code> ヒントの適用</th>
<td>いいえ</td>
</tr><tr><th>型</th>
<td>Integer</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">3</code></td>
</tr><tr><th>最小値</th>
<td><code class="literal">0</code></td>
</tr><tr><th>最大値</th>
<td><code class="literal">3</code></td>
</tr></tbody></table></div><p>
          最適化されたノードの選択には、ここの示す 2 つの形式があります。
        </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
              SQL ノードは、<span class="firstterm">近接性</span>を使用してトランザクションコーディネータを指定します。つまり、その SQL ノードから<span class="quote">「<span class="quote">もっとも近い</span>」</span>データノードがトランザクションコーディネータとして選択されます。 この目的のために、SQL ノードとの共有メモリー接続を持つデータノードは、SQL ノードへの <span class="quote">「<span class="quote">closest</span>」</span> とみなされます。次に近い (近接度が低い順に): <code class="literal">localhost</code> への TCP 接続に続いて、<code class="literal">localhost</code> 以外のホストからの TCP 接続。 
            </p></li><li class="listitem"><p>
              SQL スレッドは、<span class="firstterm">分布の認識</span>を使用してデータノードを選択します。 つまり、特定のトランザクションの最初のステートメントによってアクセスされるクラスタパーティションを収容するデータノードが、トランザクション全体のトランザクションコーディネータとして使用されます。 (これは、トランザクションの最初のステートメントが 1 つのクラスタパーティションにしかアクセスしない場合にのみ有効です。) 
            </p></li></ol></div><p>
          このオプションは、<code class="literal">0</code>、<code class="literal">1</code>、<code class="literal">2</code>、または <code class="literal">3</code> のいずれかの整数値を取ります。<code class="literal">3</code> がデフォルトです。 これらの値は、ノード選択に次のように影響します。 
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              <code class="literal">0</code>: ノード選択は最適化されません。 SQL スレッドが次のデータノードに進む前に、各データノードがトランザクションコーディネータとして 8 回ずつ採用されます。 
            </p></li><li class="listitem"><p>
              <code class="literal">1</code>: SQL ノードへの近接性を使用してトランザクションコーディネータが指定されます。
            </p></li><li class="listitem"><p>
              <code class="literal">2</code>: 分布の認識を使用してトランザクションコーディネータが選択されます。 ただし、トランザクションの最初のステートメントが複数のクラスタパーティションにアクセスする場合は、SQL ノードはこのオプションを <code class="literal">0</code> に設定したときに見られるラウンドロビンの動作に戻ります。 
            </p></li><li class="listitem"><p>
              <code class="literal">3</code>: トランザクションコーディネータを指定するために分布の認識を使用できる場合は、それが使用されます。そうでない場合は、近接性を使用してトランザクションコーディネータが選択されます。 (これはデフォルトの動作です。) 
            </p></li></ul></div><p>
          近接度は次のように決定されます:
        </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
              <code class="literal">Group</code> パラメータに設定された値で開始します (デフォルトは 55)。
            </p></li><li class="listitem"><p>
              同じホストを他の API ノードと共有する API ノードの場合は、値を 1 減らします。 <code class="literal">Group</code> のデフォルト値を想定すると、API ノードと同じホスト上のデータノードの実効値は 54 で、リモートデータノード 55 の実効値です。 
            </p></li><li class="listitem"><p>
              <code class="literal">ndb_data_node_neighbour</code> を設定すると、有効な <code class="literal">Group</code> 値がさらに 50 減少し、このノードは最も近いノードとみなされます。 これは、すべてのデータノードが API ノードをホストするホスト以外のホスト上にあり、それらのいずれかを API ノード専用にすることが望ましい場合にのみ必要です。 通常は、前述のデフォルトの調整で十分です。 
            </p></li></ol></div><p>
          これによりクラスタ接続の状態が変更されるため、安定化されるまで各スレッドからの新しいトランザクションの選択アルゴリズムが中断される可能性があるため、<code class="literal">ndb_data_node_neighbour</code> で頻繁に変更することはお薦めしません。
        </p></li><li class="listitem"><p><a name="sysvar_ndb_read_backup"></a>
          <code class="literal">ndb_read_backup</code>
        </p><a class="indexterm" name="idm45563225519648"></a><a class="indexterm" name="idm45563225518112"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndb_read_backup"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--ndb-read-backup[={OFF|ON}]</code></td>
</tr><tr><th>システム変数</th>
<td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_read_backup">ndb_read_backup</a></code></td>
</tr><tr><th>スコープ</th>
<td>グローバル</td>
</tr><tr><th>動的</th>
<td>はい</td>
</tr><tr><th><code class="literal">SET_VAR</code> ヒントの適用</th>
<td>いいえ</td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値 (≥ 8.0.19-ndb-8.0.19)</th>
<td><code class="literal">ON</code></td>
</tr><tr><th>デフォルト値 (≤ 8.0.18-ndb-8.0.18)</th>
<td><code class="literal">OFF</code></td>
</tr></tbody></table></div><p>
          その後作成される <code class="literal">NDB</code> テーブルのフラグメントレプリカからの読取りを有効にします。これにより、テーブルの読取りパフォーマンスが比較的低い書込みコストで大幅に向上します。
        </p><p>
          個々のテーブルのフラグメントレプリカからの読取りを有効または無効にするには、<code class="literal">CREATE TABLE</code> または <code class="literal">ALTER TABLE</code> ステートメントで、それに応じてテーブルの <code class="literal">NDB_TABLE</code> オプション <code class="literal">READ_BACKUP</code> を設定します。詳細は、<a class="xref" href="sql-statements.html#create-table-ndb-table-comment-options" title="13.1.20.11 NDB_TABLE オプションの設定">セクション13.1.20.11「NDB_TABLE オプションの設定」</a> を参照してください。
        </p></li><li class="listitem"><p><a name="sysvar_ndb_recv_thread_activation_threshold"></a>
          <code class="literal">ndb_recv_thread_activation_threshold</code>
        </p><a class="indexterm" name="idm45563225484816"></a><a class="indexterm" name="idm45563225483216"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndb_recv_thread_activation_threshold"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--ndb-recv-thread-activation-threshold=#</code></td>
</tr><tr><th>システム変数</th>
<td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_recv_thread_activation_threshold">ndb_recv_thread_activation_threshold</a></code></td>
</tr><tr><th>スコープ</th>
<td>グローバル</td>
</tr><tr><th>動的</th>
<td>はい</td>
</tr><tr><th><code class="literal">SET_VAR</code> ヒントの適用</th>
<td>いいえ</td>
</tr><tr><th>型</th>
<td>Integer</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">8</code></td>
</tr><tr><th>最小値</th>
<td><code class="literal">0 (MIN_ACTIVATION_THRESHOLD)</code></td>
</tr><tr><th>最大値</th>
<td><code class="literal">16 (MAX_ACTIVATION_THRESHOLD)</code></td>
</tr></tbody></table></div><p>
          現在アクティブなスレッドがこの数に達すると、受信スレッドがクラスタ接続のポーリングを引き継ぎます。
        </p><p>
          この変数のスコープはグローバルです。 起動時に設定することもできます。 
        </p></li><li class="listitem"><p><a name="sysvar_ndb_recv_thread_cpu_mask"></a>
          <code class="literal">ndb_recv_thread_cpu_mask</code>
        </p><a class="indexterm" name="idm45563225452720"></a><a class="indexterm" name="idm45563225451168"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndb_recv_thread_cpu_mask"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--ndb-recv-thread-cpu-mask=mask</code></td>
</tr><tr><th>システム変数</th>
<td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_recv_thread_cpu_mask">ndb_recv_thread_cpu_mask</a></code></td>
</tr><tr><th>スコープ</th>
<td>グローバル</td>
</tr><tr><th>動的</th>
<td>はい</td>
</tr><tr><th><code class="literal">SET_VAR</code> ヒントの適用</th>
<td>いいえ</td>
</tr><tr><th>型</th>
<td>ビットマップ</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">[empty]</code></td>
</tr></tbody></table></div><p>
          受信者スレッドを特定の CPU にロックするための CPU マスク。 これは 16 進数ビットマスクとして指定されます。 たとえば、<code class="literal">0x33</code> は、受信側スレッドごとに 1 つの CPU が使用されることを意味します。 空の文字列がデフォルトです。<code class="literal">ndb_recv_thread_cpu_mask</code> をこの値に設定すると、以前に設定された受信者スレッドのロックがすべて削除されます。 
        </p><p>
          この変数のスコープはグローバルです。 起動時に設定することもできます。 
        </p></li><li class="listitem"><p><a name="sysvar_ndb_report_thresh_binlog_epoch_slip"></a>
          <code class="literal">ndb_report_thresh_binlog_epoch_slip</code>
        </p><a class="indexterm" name="idm45563225423488"></a><a class="indexterm" name="idm45563225421888"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndb_report_thresh_binlog_epoch_slip"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--ndb-report-thresh-binlog-epoch-slip=#</code></td>
</tr><tr><th>システム変数</th>
<td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_report_thresh_binlog_epoch_slip">ndb_report_thresh_binlog_epoch_slip</a></code></td>
</tr><tr><th>スコープ</th>
<td>グローバル</td>
</tr><tr><th>動的</th>
<td>はい</td>
</tr><tr><th><code class="literal">SET_VAR</code> ヒントの適用</th>
<td>いいえ</td>
</tr><tr><th>型</th>
<td>Integer</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">10</code></td>
</tr><tr><th>最小値</th>
<td><code class="literal">0</code></td>
</tr><tr><th>最大値</th>
<td><code class="literal">256</code></td>
</tr></tbody></table></div><p>
          これは、イベントバッファに完全にバッファされたが、binlog インジェクタスレッドによってまだ消費されていないエポックの数のしきい値を表します。 このスリッピング (ラグ) の程度を超えると、理由として <code class="literal">BUFFERED_EPOCHS_OVER_THRESHOLD</code> が提供されたイベントバッファステータスメッセージがレポートされます (<a class="xref" href="mysql-cluster.html#mysql-cluster-logs-event-buffer" title="23.5.2.3 クラスタログでのイベントバッファのレポート">セクション23.5.2.3「クラスタログでのイベントバッファのレポート」</a> を参照)。 データノードからエポックが受信され、イベントバッファーに完全にバッファリングされると、スリップが増加します。エポックが binlog インジェクタスレッドによって消費されると、スリップは減少します。 空のエポックはバッファリングされてキューに入れられるため、NDB API の <code class="literal">Ndb::setEventBufferQueueEmptyEpoch()</code> メソッドを使用してこれが有効になっている場合にのみ、この計算に含められます。 
        </p></li><li class="listitem"><p><a name="sysvar_ndb_report_thresh_binlog_mem_usage"></a>
          <code class="literal">ndb_report_thresh_binlog_mem_usage</code>
        </p><a class="indexterm" name="idm45563225388160"></a><a class="indexterm" name="idm45563225386560"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndb_report_thresh_binlog_mem_usage"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--ndb-report-thresh-binlog-mem-usage=#</code></td>
</tr><tr><th>システム変数</th>
<td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_report_thresh_binlog_mem_usage">ndb_report_thresh_binlog_mem_usage</a></code></td>
</tr><tr><th>スコープ</th>
<td>グローバル</td>
</tr><tr><th>動的</th>
<td>はい</td>
</tr><tr><th><code class="literal">SET_VAR</code> ヒントの適用</th>
<td>いいえ</td>
</tr><tr><th>型</th>
<td>Integer</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">10</code></td>
</tr><tr><th>最小値</th>
<td><code class="literal">0</code></td>
</tr><tr><th>最大値</th>
<td><code class="literal">10</code></td>
</tr></tbody></table></div><p>
          これは、バイナリログのステータスを報告するまでに残存する空きメモリーの割合に対するしきい値です。 たとえば、<code class="literal">10</code> (デフォルト) の値は、データノードからバイナリログデータを受信するために使用可能なメモリーの量が 10% を下回ると、ステータスメッセージがクラスタログに送信されることを意味します。 
        </p></li><li class="listitem"><p><a name="sysvar_ndb_row_checksum"></a>
          <code class="literal">ndb_row_checksum</code>
        </p><a class="indexterm" name="idm45563225355664"></a><a class="indexterm" name="idm45563225354128"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndb_row_checksum"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>システム変数</th>
<td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_row_checksum">ndb_row_checksum</a></code></td>
</tr><tr><th>スコープ</th>
<td>グローバル、セッション</td>
</tr><tr><th>動的</th>
<td>はい</td>
</tr><tr><th><code class="literal">SET_VAR</code> ヒントの適用</th>
<td>いいえ</td>
</tr><tr><th>型</th>
<td>Integer</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">1</code></td>
</tr><tr><th>最小値</th>
<td><code class="literal">0</code></td>
</tr><tr><th>最大値</th>
<td><code class="literal">1</code></td>
</tr></tbody></table></div><p>
          従来、<code class="literal">NDB</code> では、パフォーマンスを犠牲にしてハードウェアの問題をチェックする行チェックサムを含むテーブルが作成されていました。 <code class="literal">ndb_row_checksum</code> を 0 に設定すると、行チェックサムは新規または変更されたテーブルには使用されず、すべてのタイプのクエリーのパフォーマンスに大きく影響します。 この変数はデフォルトで 1 に設定され、下位互換性のある動作を提供します。 
        </p></li><li class="listitem"><p><a name="sysvar_ndb_schema_dist_lock_wait_timeout"></a>
          <code class="literal">ndb_schema_dist_lock_wait_timeout</code>
        </p><a class="indexterm" name="idm45563225324768"></a><a class="indexterm" name="idm45563225323168"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndb_schema_dist_lock_wait_timeout"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--ndb-schema-dist-lock-wait-timeout=value</code></td>
</tr><tr><th>導入</th>
<td>8.0.18-ndb-8.0.18</td>
</tr><tr><th>システム変数</th>
<td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_schema_dist_lock_wait_timeout">ndb_schema_dist_lock_wait_timeout</a></code></td>
</tr><tr><th>スコープ</th>
<td>グローバル</td>
</tr><tr><th>動的</th>
<td>はい</td>
</tr><tr><th><code class="literal">SET_VAR</code> ヒントの適用</th>
<td>いいえ</td>
</tr><tr><th>型</th>
<td>Integer</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">30</code></td>
</tr><tr><th>最小値</th>
<td><code class="literal">0</code></td>
</tr><tr><th>最大値</th>
<td><code class="literal">1200</code></td>
</tr><tr><th>単位</th>
<td><code class="literal">seconds</code></td>
</tr></tbody></table></div><p>
          DDL ステートメントの変更を反映するようにローカルデータディクショナリを変更するために各 SQL ノードで取得されたメタデータロックのスキーマ分散中に待機する秒数。 この時間が経過すると、特定の SQL ノードデータディクショナリが変更で更新されなかったことを示す警告が返されます。 これにより、バイナリロギングスレッドがスキーマ操作の処理中に過剰な時間待機することを回避できます。 
        </p></li><li class="listitem"><p><a name="sysvar_ndb_schema_dist_timeout"></a>
          <code class="literal">ndb_schema_dist_timeout</code>
        </p><a class="indexterm" name="idm45563225288560"></a><a class="indexterm" name="idm45563225287008"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndb_schema_dist_timeout"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--ndb-schema-dist-timeout=value</code></td>
</tr><tr><th>導入</th>
<td>8.0.16-ndb-8.0.16</td>
</tr><tr><th>システム変数</th>
<td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_schema_dist_timeout">ndb_schema_dist_timeout</a></code></td>
</tr><tr><th>スコープ</th>
<td>グローバル</td>
</tr><tr><th>動的</th>
<td>いいえ</td>
</tr><tr><th><code class="literal">SET_VAR</code> ヒントの適用</th>
<td>いいえ</td>
</tr><tr><th>型</th>
<td>Integer</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">120</code></td>
</tr><tr><th>最小値</th>
<td><code class="literal">5</code></td>
</tr><tr><th>最大値</th>
<td><code class="literal">1200</code></td>
</tr><tr><th>単位</th>
<td><code class="literal">seconds</code></td>
</tr></tbody></table></div><p>
          スキーマ分散中にタイムアウトを検出するまで待機する秒数。 これは、他の SQL ノードで過剰なアクティビティが発生しているか、この時点で必要なリソースを取得できない可能性があることを示します。 
        </p></li><li class="listitem"><p><a name="sysvar_ndb_schema_dist_upgrade_allowed"></a>
          <code class="literal">ndb_schema_dist_upgrade_allowed</code>
        </p><a class="indexterm" name="idm45563225252576"></a><a class="indexterm" name="idm45563225250992"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndb_schema_dist_upgrade_allowed"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--ndb-schema-dist-upgrade-allowed=value</code></td>
</tr><tr><th>導入</th>
<td>8.0.17-ndb-8.0.17</td>
</tr><tr><th>システム変数</th>
<td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_schema_dist_upgrade_allowed">ndb_schema_dist_upgrade_allowed</a></code></td>
</tr><tr><th>スコープ</th>
<td>グローバル</td>
</tr><tr><th>動的</th>
<td>いいえ</td>
</tr><tr><th><code class="literal">SET_VAR</code> ヒントの適用</th>
<td>いいえ</td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">true</code></td>
</tr></tbody></table></div><p>
          <code class="literal">NDB</code> への接続時にスキーマ分散テーブルのアップグレードを許可します。 true (デフォルト) の場合、この変更はすべての SQL ノードが同じバージョンの NDB Cluster ソフトウェアにアップグレードされるまで延期されます。 
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
            スキーマ分散のパフォーマンスは、アップグレードが実行されるまで多少低下する可能性があります。
          </p></div></li><li class="listitem"><p><a name="sysvar_ndb_show_foreign_key_mock_tables"></a>
          <code class="literal">ndb_show_foreign_key_mock_tables</code>
        </p><a class="indexterm" name="idm45563225222032"></a><a class="indexterm" name="idm45563225220448"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndb_show_foreign_key_mock_tables"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--ndb-show-foreign-key-mock-tables[={OFF|ON}]</code></td>
</tr><tr><th>システム変数</th>
<td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_show_foreign_key_mock_tables">ndb_show_foreign_key_mock_tables</a></code></td>
</tr><tr><th>スコープ</th>
<td>グローバル</td>
</tr><tr><th>動的</th>
<td>はい</td>
</tr><tr><th><code class="literal">SET_VAR</code> ヒントの適用</th>
<td>いいえ</td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">OFF</code></td>
</tr></tbody></table></div><p>
          <code class="literal">NDB</code> が <code class="literal">foreign_key_checks=0</code> のサポートに使用するモックテーブルを示します。 これを有効にすると、テーブルを作成および削除するときに追加の警告が表示されます。 このテーブルの実際の (内部の) 名前は、<code class="literal">SHOW CREATE TABLE</code> の出力に表示されます。 
        </p></li><li class="listitem"><p><a name="sysvar_ndb_slave_conflict_role"></a>
          <code class="literal">ndb_slave_conflict_role</code>
        </p><a class="indexterm" name="idm45563225192592"></a><a class="indexterm" name="idm45563225191040"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndb_slave_conflict_role"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--ndb-slave-conflict-role=value</code></td>
</tr><tr><th>非推奨</th>
<td>8.0.23-ndb-8.0.23</td>
</tr><tr><th>システム変数</th>
<td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_slave_conflict_role">ndb_slave_conflict_role</a></code></td>
</tr><tr><th>スコープ</th>
<td>グローバル</td>
</tr><tr><th>動的</th>
<td>はい</td>
</tr><tr><th><code class="literal">SET_VAR</code> ヒントの適用</th>
<td>いいえ</td>
</tr><tr><th>型</th>
<td>列挙</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">NONE</code></td>
</tr><tr><th>有効な値</th>
<td><p class="valid-value"><code class="literal">NONE</code></p><p class="valid-value"><code class="literal">PRIMARY</code></p><p class="valid-value"><code class="literal">SECONDARY</code></p><p class="valid-value"><code class="literal">PASS</code></p></td>
</tr></tbody></table></div><p>
          NDB 8.0.23 では非推奨であり、将来のリリースで削除される可能性があります。 かわりに <code class="literal">ndb_conflict_role</code> を使用してください。 
        </p></li><li class="listitem"><p><a name="sysvar_ndb_table_no_logging"></a>
          <code class="literal">ndb_table_no_logging</code>
        </p><a class="indexterm" name="idm45563225157408"></a><a class="indexterm" name="idm45563225155856"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndb_table_no_logging"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>システム変数</th>
<td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_table_no_logging">ndb_table_no_logging</a></code></td>
</tr><tr><th>スコープ</th>
<td>セッション</td>
</tr><tr><th>動的</th>
<td>はい</td>
</tr><tr><th><code class="literal">SET_VAR</code> ヒントの適用</th>
<td>いいえ</td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">OFF</code></td>
</tr></tbody></table></div><p>
          この変数を <code class="literal">ON</code> または <code class="literal">1</code> に設定すると、<code class="literal">NDB</code> テーブルのチェックポイントがディスクに対して実行されなくなります。 より具体的には、この設定は <code class="literal">ndb_table_no_logging</code> が有効になっているときに <code class="literal">ENGINE NDB</code> を使用して作成または変更されたテーブルに適用され、あとで <code class="literal">ndb_table_no_logging</code> が変更された場合でも、テーブルの存続期間にわたって適用され続けます。 ここに示すように、テーブル <code class="literal">A</code>、<code class="literal">B</code>、<code class="literal">C</code>、および <code class="literal">D</code> を作成 (および変更) して、<code class="literal">ndb_table_no_logging</code> の設定も変更したとします。 
        </p><pre class="programlisting">SET @@ndb_table_no_logging = 1;

CREATE TABLE A ... ENGINE NDB;

CREATE TABLE B ... ENGINE MYISAM;
CREATE TABLE C ... ENGINE MYISAM;

ALTER TABLE B ENGINE NDB;

SET @@ndb_table_no_logging = 0;

CREATE TABLE D ... ENGINE NDB;
ALTER TABLE C ENGINE NDB;

SET @@ndb_table_no_logging = 1;
</pre><p>
          前の一連のイベントのあと、テーブル <code class="literal">A</code> と <code class="literal">B</code> のチェックポイントは実行されません (<code class="literal">A</code> は <code class="literal">ENGINE NDB</code> を使用して作成され、B は <code class="literal">NDB</code> を使用するように変更されましたが、どちらも <code class="literal">ndb_table_no_logging</code> の有効時に行われたため)。 ただし、テーブル <code class="literal">C</code> と <code class="literal">D</code> は記録されます (<code class="literal">C</code> は <code class="literal">NDB</code> を使用するように変更され、<code class="literal">D</code> は <code class="literal">ENGINE NDB</code> を使用して作成されましたが、どちらも <code class="literal">ndb_table_no_logging</code> の無効時に行われたため)。 <code class="literal">ndb_table_no_logging</code> を <code class="literal">1</code> または <code class="literal">ON</code> に再度設定しても、テーブル <code class="literal">C</code> または <code class="literal">D</code> のチェックポイントは実行<span class="emphasis"><em>されません</em></span>。 
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
            <code class="literal">ndb_table_no_logging</code> は、<code class="literal">NDB</code> テーブルスキーマファイルの作成では無効になります。これをサポートするには、代わりに <code class="literal">ndb_table_temporary</code> を使用してください。
          </p></div></li><li class="listitem"><p><a name="sysvar_ndb_table_temporary"></a>
          <code class="literal">ndb_table_temporary</code>
        </p><a class="indexterm" name="idm45563225103808"></a><a class="indexterm" name="idm45563225102256"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndb_table_temporary"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>システム変数</th>
<td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_table_temporary">ndb_table_temporary</a></code></td>
</tr><tr><th>スコープ</th>
<td>セッション</td>
</tr><tr><th>動的</th>
<td>はい</td>
</tr><tr><th><code class="literal">SET_VAR</code> ヒントの適用</th>
<td>いいえ</td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">OFF</code></td>
</tr></tbody></table></div><p>
          この変数を <code class="literal">ON</code> または <code class="literal">1</code> に設定すると、<code class="literal">NDB</code> テーブルがディスクに書き込まれなくなります。これは、テーブルスキーマファイルが作成されず、テーブルが記録されないことを意味します。
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
            現在、この変数を設定しても効果はありません。 これは既知の問題です。Bug #34036 を参照してください。 
          </p></div></li><li class="listitem"><p><a name="sysvar_ndb_use_copying_alter_table"></a>
          <code class="literal">ndb_use_copying_alter_table</code>
        </p><a class="indexterm" name="idm45563225076336"></a><a class="indexterm" name="idm45563225074768"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndb_use_copying_alter_table"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>システム変数</th>
<td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_use_copying_alter_table">ndb_use_copying_alter_table</a></code></td>
</tr><tr><th>スコープ</th>
<td>グローバル、セッション</td>
</tr><tr><th>動的</th>
<td>いいえ</td>
</tr><tr><th><code class="literal">SET_VAR</code> ヒントの適用</th>
<td>いいえ</td>
</tr></tbody></table></div><p>
          オンラインの <code class="literal">ALTER TABLE</code> 操作で問題が発生したときに、<code class="literal">NDB</code> によりテーブルのコピーが強制的に使用されます。 デフォルト値は <code class="literal">OFF</code> です。 
        </p></li><li class="listitem"><p><a name="sysvar_ndb_use_exact_count"></a>
          <code class="literal">ndb_use_exact_count</code>
        </p><a class="indexterm" name="idm45563225054112"></a><a class="indexterm" name="idm45563225052560"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndb_use_exact_count"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>システム変数</th>
<td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_use_exact_count">ndb_use_exact_count</a></code></td>
</tr><tr><th>スコープ</th>
<td>グローバル、セッション</td>
</tr><tr><th>動的</th>
<td>はい</td>
</tr><tr><th><code class="literal">SET_VAR</code> ヒントの適用</th>
<td>いいえ</td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">OFF</code></td>
</tr></tbody></table></div><p>
          <code class="literal">SELECT COUNT(*)</code> クエリーでこのタイプのクエリーの高速化を計画するときに、<code class="literal">NDB</code> によりレコードのカウントが強制的に使用されます。 デフォルト値は <code class="literal">OFF</code> で、クエリー全体が高速化されます。 
        </p></li><li class="listitem"><p><a name="sysvar_ndb_use_transactions"></a>
          <code class="literal">ndb_use_transactions</code>
        </p><a class="indexterm" name="idm45563225027728"></a><a class="indexterm" name="idm45563225026176"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndb_use_transactions"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--ndb-use-transactions[={OFF|ON}]</code></td>
</tr><tr><th>システム変数</th>
<td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_use_transactions">ndb_use_transactions</a></code></td>
</tr><tr><th>スコープ</th>
<td>グローバル、セッション</td>
</tr><tr><th>動的</th>
<td>はい</td>
</tr><tr><th><code class="literal">SET_VAR</code> ヒントの適用</th>
<td>いいえ</td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">ON</code></td>
</tr></tbody></table></div><p>
          <code class="literal">NDB</code> のトランザクションサポートを無効にするには、この変数の値を <code class="literal">OFF</code> に設定します (推奨されません)。 デフォルトは <code class="literal">ON</code> です。 
        </p></li><li class="listitem"><p><a name="sysvar_ndb_version"></a>
          <code class="literal">ndb_version</code>
        </p><a class="indexterm" name="idm45563224999136"></a><a class="indexterm" name="idm45563224997616"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndb_version"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>システム変数</th>
<td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_version">ndb_version</a></code></td>
</tr><tr><th>スコープ</th>
<td>グローバル</td>
</tr><tr><th>動的</th>
<td>いいえ</td>
</tr><tr><th><code class="literal">SET_VAR</code> ヒントの適用</th>
<td>いいえ</td>
</tr><tr><th>型</th>
<td>文字列</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal"></code></td>
</tr></tbody></table></div><p>
          <code class="literal">NDB</code> エンジンのバージョン (合成整数として)。
        </p></li><li class="listitem"><p><a name="sysvar_ndb_version_string"></a>
          <code class="literal">ndb_version_string</code>
        </p><a class="indexterm" name="idm45563224974896"></a><a class="indexterm" name="idm45563224973344"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndb_version_string"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>システム変数</th>
<td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndb_version_string">ndb_version_string</a></code></td>
</tr><tr><th>スコープ</th>
<td>グローバル</td>
</tr><tr><th>動的</th>
<td>いいえ</td>
</tr><tr><th><code class="literal">SET_VAR</code> ヒントの適用</th>
<td>いいえ</td>
</tr><tr><th>型</th>
<td>文字列</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal"></code></td>
</tr></tbody></table></div><p>
          <code class="literal">NDB</code> エンジンのバージョン (<code class="literal">ndb-<em class="replaceable"><code>x.y.z</code></em></code> 形式)。
        </p></li><li class="listitem"><p><a name="sysvar_server_id_bits"></a>
          <code class="literal">server_id_bits</code>
        </p><a class="indexterm" name="idm45563224949696"></a><a class="indexterm" name="idm45563224948224"></a><a class="indexterm" name="idm45563224946288"></a><a class="indexterm" name="idm45563224944768"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for server_id_bits"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--server-id-bits=#</code></td>
</tr><tr><th>システム変数</th>
<td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_server_id_bits">server_id_bits</a></code></td>
</tr><tr><th>スコープ</th>
<td>グローバル</td>
</tr><tr><th>動的</th>
<td>いいえ</td>
</tr><tr><th><code class="literal">SET_VAR</code> ヒントの適用</th>
<td>いいえ</td>
</tr><tr><th>型</th>
<td>Integer</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">32</code></td>
</tr><tr><th>最小値</th>
<td><code class="literal">7</code></td>
</tr><tr><th>最大値</th>
<td><code class="literal">32</code></td>
</tr></tbody></table></div><p>
          この変数は、実際にサーバーを識別する 32-bit <code class="literal">server_id</code> 内の最下位ビットの数を示します。 サーバーが実際には 32 ビット未満で識別されることを示すと、NDB API Event API を使用して <code class="literal">OperationOptions</code> 構造の <code class="literal">AnyValue</code> 内でアプリケーションによって生成されたユーザーデータを格納するなど、残りのビットの一部をほかの目的に使用できます (NDB Cluster は <code class="literal">AnyValue</code> を使用してサーバー ID を格納します)。 
        </p><p>
          サーバーは、レプリケーションループの検出などで <code class="literal">server_id</code> から有効なサーバー ID を抽出するときに、残りのビットを無視します。 <code class="literal">server_id_bits</code> 変数は、サーバー ID に基づいてイベントを無視するかどうかを決定する際に、I/O および SQL スレッド内の <code class="literal">server_id</code> の無関係なビットをマスクアウトするために使用されます。 
        </p><p>
          このデータは、独自の <code class="literal">server_id_bits</code> 変数を 32 (デフォルト) に設定して実行すると、<span class="command"><strong>mysqlbinlog</strong></span> によってバイナリログから読み取ることができます。
        </p><p>
          <code class="literal">server_id</code> の値が <code class="literal">server_id_bits</code> の累乗に対して 2 以上の場合、<span class="command"><strong>mysqld</strong></span> は起動を拒否します。
        </p><p>
          このシステム変数は NDB Cluster でのみサポートされます。 標準の MySQL 8.0 Server ではサポートされません。 
        </p></li><li class="listitem"><p><a name="sysvar_slave_allow_batching"></a>
          <code class="literal">slave_allow_batching</code>
        </p><a class="indexterm" name="idm45563224900528"></a><a class="indexterm" name="idm45563224898976"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for slave_allow_batching"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--slave-allow-batching[={OFF|ON}]</code></td>
</tr><tr><th>システム変数</th>
<td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_slave_allow_batching">slave_allow_batching</a></code></td>
</tr><tr><th>スコープ</th>
<td>グローバル</td>
</tr><tr><th>動的</th>
<td>はい</td>
</tr><tr><th><code class="literal">SET_VAR</code> ヒントの適用</th>
<td>いいえ</td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">OFF</code></td>
</tr></tbody></table></div><p>
          NDB Cluster レプリカでバッチ更新が有効になっているかどうか。
        </p><p>
          この変数の設定は、<code class="literal">NDB</code> ストレージエンジンでレプリケーションを使用する場合にのみ有効です。MySQL Server 8.0 では存在しますが、何も行いません。 詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-replication-starting" title="23.6.6 NDB Cluster レプリケーションの開始 (シングルレプリケーションチャネル)">セクション23.6.6「NDB Cluster レプリケーションの開始 (シングルレプリケーションチャネル)」</a>を参照してください。 
        </p></li><li class="listitem"><p><a name="sysvar_transaction_allow_batching"></a>
          <code class="literal">transaction_allow_batching</code>
        </p><a class="indexterm" name="idm45563224871856"></a><a class="indexterm" name="idm45563224870240"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for transaction_allow_batching"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>システム変数</th>
<td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_transaction_allow_batching">transaction_allow_batching</a></code></td>
</tr><tr><th>スコープ</th>
<td>セッション</td>
</tr><tr><th>動的</th>
<td>はい</td>
</tr><tr><th><code class="literal">SET_VAR</code> ヒントの適用</th>
<td>いいえ</td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">OFF</code></td>
</tr></tbody></table></div><p>
          この変数を <code class="literal">1</code> または <code class="literal">ON</code> に設定すると、同じトランザクション内のステートメントのバッチ化が有効になります。 この変数を使用するには、先に <code class="literal">autocommit</code> を <code class="literal">0</code> または <code class="literal">OFF</code> に設定して無効にする必要があります。これを実行しない場合、<code class="literal">transaction_allow_batching</code> を設定しても無効になります。 
        </p><p>
          この変数は、有効にすると<span class="quote">「<span class="quote">以前の</span>」</span>イメージから読み取りが行われる可能性があるため、書き込みのみを実行するトランザクションで使用するのが安全です。 <code class="literal">SELECT</code> を発行する前に、(必要に応じて明示的な <code class="literal">COMMIT</code> を使用して) 保留中のトランザクションをすべて確実にコミットするようにしてください。 
        </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">重要</div><p>
            特定のステートメントの効果が同じトランザクション内の前のステートメントの結果に依存する可能性がある場合は、<code class="literal">transaction_allow_batching</code> を使用しないでください。
          </p></div><p>
          この変数は現在 NDB Cluster でのみサポートされています。
        </p></li></ul></div><p>
      次のリストのシステム変数は、すべて <code class="literal">ndbinfo</code> 情報データベースに関連するものです。
    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="sysvar_ndbinfo_database"></a>
          <code class="literal">ndbinfo_database</code>
        </p><a class="indexterm" name="idm45563224834544"></a><a class="indexterm" name="idm45563224833008"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndbinfo_database"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>システム変数</th>
<td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndbinfo_database">ndbinfo_database</a></code></td>
</tr><tr><th>スコープ</th>
<td>グローバル</td>
</tr><tr><th>動的</th>
<td>いいえ</td>
</tr><tr><th><code class="literal">SET_VAR</code> ヒントの適用</th>
<td>いいえ</td>
</tr><tr><th>型</th>
<td>文字列</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">ndbinfo</code></td>
</tr></tbody></table></div><p>
          <code class="literal">NDB</code> 情報データベースに使用される名前を示します。デフォルトは <code class="literal">ndbinfo</code> です。 これは、コンパイル時に値が決定される読取り専用変数です。 
        </p></li><li class="listitem"><p><a name="sysvar_ndbinfo_max_bytes"></a>
          <code class="literal">ndbinfo_max_bytes</code>
        </p><a class="indexterm" name="idm45563224809168"></a><a class="indexterm" name="idm45563224807616"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndbinfo_max_bytes"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--ndbinfo-max-bytes=#</code></td>
</tr><tr><th>システム変数</th>
<td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndbinfo_max_bytes">ndbinfo_max_bytes</a></code></td>
</tr><tr><th>スコープ</th>
<td>グローバル、セッション</td>
</tr><tr><th>動的</th>
<td>はい</td>
</tr><tr><th><code class="literal">SET_VAR</code> ヒントの適用</th>
<td>いいえ</td>
</tr><tr><th>型</th>
<td>Integer</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">0</code></td>
</tr></tbody></table></div><p>
          テストとデバッグでのみ使用されます。
        </p></li><li class="listitem"><p><a name="sysvar_ndbinfo_max_rows"></a>
          <code class="literal">ndbinfo_max_rows</code>
        </p><a class="indexterm" name="idm45563224783040"></a><a class="indexterm" name="idm45563224781504"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndbinfo_max_rows"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--ndbinfo-max-rows=#</code></td>
</tr><tr><th>システム変数</th>
<td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndbinfo_max_rows">ndbinfo_max_rows</a></code></td>
</tr><tr><th>スコープ</th>
<td>グローバル、セッション</td>
</tr><tr><th>動的</th>
<td>はい</td>
</tr><tr><th><code class="literal">SET_VAR</code> ヒントの適用</th>
<td>いいえ</td>
</tr><tr><th>型</th>
<td>Integer</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">10</code></td>
</tr></tbody></table></div><p>
          テストとデバッグでのみ使用されます。
        </p></li><li class="listitem"><p><a name="sysvar_ndbinfo_offline"></a>
          <code class="literal">ndbinfo_offline</code>
        </p><a class="indexterm" name="idm45563224756912"></a><a class="indexterm" name="idm45563224755376"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndbinfo_offline"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>システム変数</th>
<td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndbinfo_offline">ndbinfo_offline</a></code></td>
</tr><tr><th>スコープ</th>
<td>グローバル</td>
</tr><tr><th>動的</th>
<td>はい</td>
</tr><tr><th><code class="literal">SET_VAR</code> ヒントの適用</th>
<td>いいえ</td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">OFF</code></td>
</tr></tbody></table></div><p>
          <code class="literal">ndbinfo</code> データベースをオフラインモードにします。オフラインモードでは、テーブルやビューが実際には存在しない場合や、存在するが <code class="literal">NDB</code> での定義が異なる場合でも、テーブルやビューを開くことができます。 このようなテーブル (またはビュー) からは、行は返されません。 
        </p></li><li class="listitem"><p><a name="sysvar_ndbinfo_show_hidden"></a>
          <code class="literal">ndbinfo_show_hidden</code>
        </p><a class="indexterm" name="idm45563224730688"></a><a class="indexterm" name="idm45563224729136"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndbinfo_show_hidden"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--ndbinfo-show-hidden[={OFF|ON}]</code></td>
</tr><tr><th>システム変数</th>
<td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndbinfo_show_hidden">ndbinfo_show_hidden</a></code></td>
</tr><tr><th>スコープ</th>
<td>グローバル、セッション</td>
</tr><tr><th>動的</th>
<td>はい</td>
</tr><tr><th><code class="literal">SET_VAR</code> ヒントの適用</th>
<td>いいえ</td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">OFF</code></td>
</tr><tr><th>有効な値</th>
<td><p class="valid-value"><code class="literal">ON</code></p><p class="valid-value"><code class="literal">OFF</code></p></td>
</tr></tbody></table></div><p>
          <code class="literal">ndbinfo</code> データベースのベースとなる内部テーブルが <code class="literal">mysql</code> クライアントに表示されるかどうか。 デフォルトは <code class="literal">OFF</code> です。 
        </p></li><li class="listitem"><p><a name="sysvar_ndbinfo_table_prefix"></a>
          <code class="literal">ndbinfo_table_prefix</code>
        </p><a class="indexterm" name="idm45563224698208"></a><a class="indexterm" name="idm45563224696656"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndbinfo_table_prefix"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>システム変数</th>
<td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndbinfo_table_prefix">ndbinfo_table_prefix</a></code></td>
</tr><tr><th>スコープ</th>
<td>グローバル</td>
</tr><tr><th>動的</th>
<td>いいえ</td>
</tr><tr><th><code class="literal">SET_VAR</code> ヒントの適用</th>
<td>いいえ</td>
</tr><tr><th>型</th>
<td>文字列</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">ndb$</code></td>
</tr></tbody></table></div><p>
          ndbinfo データベースのベーステーブル (<code class="literal">ndbinfo_show_hidden</code> を設定して公開されないかぎり、通常は非表示です) の名前に使用されるプリフィクス。 これは読取り専用変数で、デフォルト値は <code class="literal">ndb$</code> です。接頭辞自体はコンパイル時に決定されます。 
        </p></li><li class="listitem"><p><a name="sysvar_ndbinfo_version"></a>
          <code class="literal">ndbinfo_version</code>
        </p><a class="indexterm" name="idm45563224672288"></a><a class="indexterm" name="idm45563224670752"></a><a class="indexterm" name="idm45563224668864"></a><a class="indexterm" name="idm45563224667328"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndbinfo_version"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>システム変数</th>
<td><code class="literal"><a class="link" href="mysql-cluster.html#sysvar_ndbinfo_version">ndbinfo_version</a></code></td>
</tr><tr><th>スコープ</th>
<td>グローバル</td>
</tr><tr><th>動的</th>
<td>いいえ</td>
</tr><tr><th><code class="literal">SET_VAR</code> ヒントの適用</th>
<td>いいえ</td>
</tr><tr><th>型</th>
<td>文字列</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal"></code></td>
</tr></tbody></table></div><p>
          使用中の <code class="literal">ndbinfo</code> エンジンのバージョンを示します (読み取り専用)。
        </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="mysql-cluster-status-variables"></a>23.3.3.9.3 NDB Cluster ステータス変数</h5></div></div></div><a class="indexterm" name="idm45563224644832"></a><a class="indexterm" name="idm45563224642832"></a><p>
      このセクションでは、NDB Cluster および <code class="literal">NDB</code> ストレージエンジンに関連する MySQL サーバーのステータス変数について詳しく説明します。 NDB Cluster に固有でないステータス変数、およびステータス変数の使用に関する一般的な情報については、<a class="xref" href="server-administration.html#server-status-variables" title="5.1.10 サーバーステータス変数">セクション5.1.10「サーバーステータス変数」</a> を参照してください。 
    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="statvar_Handler_discover"></a>
          <code class="literal">Handler_discover</code>
        </p><a class="indexterm" name="idm45563224635728"></a><a class="indexterm" name="idm45563224634176"></a><p>
          MySQL サーバーは、<code class="literal">NDBCLUSTER</code> ストレージエンジンに対して特定の名前を持つテーブルの情報を問い合わせることができます。 これは検出と呼ばれます。 <code class="literal">Handler_discover</code> は、このメカニズムを使用してテーブルが検出された回数を示します。 
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_adaptive_send_deferred_count"></a>
          <code class="literal">Ndb_api_adaptive_send_deferred_count</code>
        </p><a class="indexterm" name="idm45563224627056"></a><a class="indexterm" name="idm45563224625456"></a><p>
          実際に送信されなかった適応送信コールの数。
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_adaptive_send_deferred_count_session"></a>
          <code class="literal">Ndb_api_adaptive_send_deferred_count_session</code>
        </p><a class="indexterm" name="idm45563224619392"></a><a class="indexterm" name="idm45563224617760"></a><p>
          実際に送信されなかった適応送信コールの数。
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_adaptive_send_deferred_count_replica"></a>
          <code class="literal">Ndb_api_adaptive_send_deferred_count_replica</code>
        </p><a class="indexterm" name="idm45563224611776"></a><a class="indexterm" name="idm45563224610144"></a><p>
          このレプリカによって実際に送信されなかった適応送信コールの数。
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_adaptive_send_deferred_count_slave"></a>
          <code class="literal">Ndb_api_adaptive_send_deferred_count_slave</code>
        </p><a class="indexterm" name="idm45563224604096"></a><a class="indexterm" name="idm45563224602480"></a><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
            NDB 8.0.23 では非推奨です。代わりに <code class="literal">Ndb_api_adaptive_send_deferred_count_replica</code> を使用してください。
          </p></div><p>
          このレプリカによって実際に送信されなかった適応送信コールの数。
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_adaptive_send_forced_count"></a>
          <code class="literal">Ndb_api_adaptive_send_forced_count</code>
        </p><a class="indexterm" name="idm45563224594384"></a><a class="indexterm" name="idm45563224592784"></a><p>
          この MySQL Server (SQL ノード) によって送信された強制送信を使用した適応送信コールの数。
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_adaptive_send_forced_count_session"></a>
          <code class="literal">Ndb_api_adaptive_send_forced_count_session</code>
        </p><a class="indexterm" name="idm45563224586768"></a><a class="indexterm" name="idm45563224585152"></a><p>
          このクライアントセッションで送信された強制送信を使用した適応送信コールの数。
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_adaptive_send_forced_count_replica"></a>
          <code class="literal">Ndb_api_adaptive_send_forced_count_replica</code>
        </p><a class="indexterm" name="idm45563224579056"></a><a class="indexterm" name="idm45563224577440"></a><p>
          このレプリカによって送信された強制送信を使用する適応送信コールの数。
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_adaptive_send_forced_count_slave"></a>
          <code class="literal">Ndb_api_adaptive_send_forced_count_slave</code>
        </p><a class="indexterm" name="idm45563224571376"></a><a class="indexterm" name="idm45563224569760"></a><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
            NDB 8.0.23 では非推奨です。代わりに <code class="literal">Ndb_api_adaptive_send_forced_count_replica</code> を使用してください。
          </p></div><p>
          このレプリカによって送信された強制送信を使用する適応送信コールの数。
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_adaptive_send_unforced_count"></a>
          <code class="literal">Ndb_api_adaptive_send_unforced_count</code>
        </p><a class="indexterm" name="idm45563224561712"></a><a class="indexterm" name="idm45563224560112"></a><p>
          この MySQL サーバー (SQL ノード) によって強制送信されていない適応送信コールの数。
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_adaptive_send_unforced_count_session"></a>
          <code class="literal">Ndb_api_adaptive_send_unforced_count_session</code>
        </p><a class="indexterm" name="idm45563224554112"></a><a class="indexterm" name="idm45563224552496"></a><p>
          このクライアントセッションで強制送信が送信されていない適応送信コールの数。
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_adaptive_send_unforced_count_replica"></a>
          <code class="literal">Ndb_api_adaptive_send_unforced_count_replica</code>
        </p><a class="indexterm" name="idm45563224546416"></a><a class="indexterm" name="idm45563224544784"></a><p>
          このレプリカによって強制送信されていない適応送信コールの数。
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_adaptive_send_unforced_count_slave"></a>
          <code class="literal">Ndb_api_adaptive_send_unforced_count_slave</code>
        </p><a class="indexterm" name="idm45563224538736"></a><a class="indexterm" name="idm45563224537120"></a><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
            NDB 8.0.23 では非推奨です。代わりに <code class="literal">Ndb_api_adaptive_send_unforced_count_replica</code> を使用してください。
          </p></div><p>
          このレプリカによって強制送信されていない適応送信コールの数。
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_bytes_sent_count_session"></a>
          <code class="literal">Ndb_api_bytes_sent_count_session</code>
        </p><a class="indexterm" name="idm45563224529024"></a><a class="indexterm" name="idm45563224527424"></a><p>
          このクライアントセッションでデータノードに送信されたデータ量 (バイト単位)。
        </p><p>
          この変数は、<code class="literal">SHOW GLOBAL STATUS</code> または <code class="literal">SHOW SESSION STATUS</code> を使用して読み取ることができますが、現在のセッションにのみ関連しており、この <span class="command"><strong>mysqld</strong></span> のほかのクライアントには影響しません。
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_bytes_sent_count_replica"></a>
          <code class="literal">Ndb_api_bytes_sent_count_replica</code>
        </p><a class="indexterm" name="idm45563224517344"></a><a class="indexterm" name="idm45563224515744"></a><p>
          このレプリカによってデータノードに送信されたデータの量 (バイト単位)。
        </p><p>
          この変数は、<code class="literal">SHOW GLOBAL STATUS</code> または <code class="literal">SHOW SESSION STATUS</code> を使用して読み取ることができますが、スコープは実質的にグローバルです。 この MySQL サーバーがレプリカとして機能しない場合、または NDB テーブルを使用しない場合、この値は常に 0 です。 
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_bytes_sent_count_slave"></a>
          <code class="literal">Ndb_api_bytes_sent_count_slave</code>
        </p><a class="indexterm" name="idm45563224506304"></a><a class="indexterm" name="idm45563224504704"></a><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
            NDB 8.0.23 では非推奨です。代わりに <code class="literal">Ndb_api_bytes_sent_count_replica</code> を使用してください。
          </p></div><p>
          このレプリカによってデータノードに送信されたデータの量 (バイト単位)。
        </p><p>
          この変数は、<code class="literal">SHOW GLOBAL STATUS</code> または <code class="literal">SHOW SESSION STATUS</code> を使用して読み取ることができますが、スコープは実質的にグローバルです。 この MySQL サーバーがレプリカとして機能しない場合、または NDB テーブルを使用しない場合、この値は常に 0 です。 
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_bytes_sent_count"></a>
          <code class="literal">Ndb_api_bytes_sent_count</code>
        </p><a class="indexterm" name="idm45563224493216"></a><a class="indexterm" name="idm45563224491648"></a><p>
          この MySQL サーバー (SQL ノード) によってデータノードに送信されたデータ量 (バイト単位)。
        </p><p>
          この変数は、<code class="literal">SHOW GLOBAL STATUS</code> または <code class="literal">SHOW SESSION STATUS</code> を使用して読み取ることができますが、スコープは実質的にグローバルです。
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_bytes_received_count_session"></a>
          <code class="literal">Ndb_api_bytes_received_count_session</code>
        </p><a class="indexterm" name="idm45563224482320"></a><a class="indexterm" name="idm45563224480720"></a><p>
          このクライアントセッションでデータノードから受信されたデータ量 (バイト単位)。
        </p><p>
          この変数は、<code class="literal">SHOW GLOBAL STATUS</code> または <code class="literal">SHOW SESSION STATUS</code> を使用して読み取ることができますが、現在のセッションにのみ関連しており、この <span class="command"><strong>mysqld</strong></span> のほかのクライアントには影響しません。
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_bytes_received_count_replica"></a>
          <code class="literal">Ndb_api_bytes_received_count_replica</code>
        </p><a class="indexterm" name="idm45563224470624"></a><a class="indexterm" name="idm45563224469024"></a><p>
          このレプリカによってデータノードから受信されたデータの量 (バイト単位)。
        </p><p>
          この変数は、<code class="literal">SHOW GLOBAL STATUS</code> または <code class="literal">SHOW SESSION STATUS</code> を使用して読み取ることができますが、スコープは実質的にグローバルです。 この MySQL サーバーがレプリカとして機能しない場合、または NDB テーブルを使用しない場合、この値は常に 0 です。 
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_bytes_received_count_slave"></a>
          <code class="literal">Ndb_api_bytes_received_count_slave</code>
        </p><a class="indexterm" name="idm45563224459472"></a><a class="indexterm" name="idm45563224457872"></a><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
            NDB 8.0.23 では非推奨です。代わりに <code class="literal">Ndb_api_bytes_received_count_replica</code> を使用してください。
          </p></div><p>
          このレプリカによってデータノードから受信されたデータの量 (バイト単位)。
        </p><p>
          この変数は、<code class="literal">SHOW GLOBAL STATUS</code> または <code class="literal">SHOW SESSION STATUS</code> を使用して読み取ることができますが、スコープは実質的にグローバルです。 この MySQL サーバーがレプリカとして機能しない場合、または NDB テーブルを使用しない場合、この値は常に 0 です。 
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_bytes_received_count"></a>
          <code class="literal">Ndb_api_bytes_received_count</code>
        </p><a class="indexterm" name="idm45563224446432"></a><a class="indexterm" name="idm45563224444848"></a><p>
          この MySQL サーバー (SQL ノード) によってデータノードから受信されたデータ量 (バイト単位)。
        </p><p>
          この変数は、<code class="literal">SHOW GLOBAL STATUS</code> または <code class="literal">SHOW SESSION STATUS</code> を使用して読み取ることができますが、スコープは実質的にグローバルです。
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_event_data_count_injector"></a>
          <code class="literal">Ndb_api_event_data_count_injector</code>
        </p><a class="indexterm" name="idm45563224435520"></a><a class="indexterm" name="idm45563224433920"></a><p>
          NDB binlog インジェクタスレッドによって受信された行変更イベントの数。
        </p><p>
          この変数は、<code class="literal">SHOW GLOBAL STATUS</code> または <code class="literal">SHOW SESSION STATUS</code> を使用して読み取ることができますが、スコープは実質的にグローバルです。
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_event_data_count"></a>
          <code class="literal">Ndb_api_event_data_count</code>
        </p><a class="indexterm" name="idm45563224424800"></a><a class="indexterm" name="idm45563224423232"></a><p>
          この MySQL サーバー (SQL ノード) によって受信された行変更イベントの数。
        </p><p>
          この変数は、<code class="literal">SHOW GLOBAL STATUS</code> または <code class="literal">SHOW SESSION STATUS</code> を使用して読み取ることができますが、スコープは実質的にグローバルです。
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_event_nondata_count_injector"></a>
          <code class="literal">Ndb_api_event_nondata_count_injector</code>
        </p><a class="indexterm" name="idm45563224413952"></a><a class="indexterm" name="idm45563224412352"></a><p>
          NDB バイナリログインジェクタスレッドによって受信された、行変更イベント以外のイベントの数。
        </p><p>
          この変数は、<code class="literal">SHOW GLOBAL STATUS</code> または <code class="literal">SHOW SESSION STATUS</code> を使用して読み取ることができますが、スコープは実質的にグローバルです。
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_event_nondata_count"></a>
          <code class="literal">Ndb_api_event_nondata_count</code>
        </p><a class="indexterm" name="idm45563224403168"></a><a class="indexterm" name="idm45563224401600"></a><p>
          この MySQL サーバー (SQL ノード) によって受信された、行変更イベント以外のイベントの数。
        </p><p>
          この変数は、<code class="literal">SHOW GLOBAL STATUS</code> または <code class="literal">SHOW SESSION STATUS</code> を使用して読み取ることができますが、スコープは実質的にグローバルです。
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_event_bytes_count_injector"></a>
          <code class="literal">Ndb_api_event_bytes_count_injector</code>
        </p><a class="indexterm" name="idm45563224392272"></a><a class="indexterm" name="idm45563224390672"></a><p>
          NDB binlog インジェクタスレッドによって受信されたイベントのバイト数。
        </p><p>
          この変数は、<code class="literal">SHOW GLOBAL STATUS</code> または <code class="literal">SHOW SESSION STATUS</code> を使用して読み取ることができますが、スコープは実質的にグローバルです。
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_event_bytes_count"></a>
          <code class="literal">Ndb_api_event_bytes_count</code>
        </p><a class="indexterm" name="idm45563224381616"></a><a class="indexterm" name="idm45563224380048"></a><p>
          この MySQL サーバー (SQL ノード) によって受信されたイベントのバイト数。
        </p><p>
          この変数は、<code class="literal">SHOW GLOBAL STATUS</code> または <code class="literal">SHOW SESSION STATUS</code> を使用して読み取ることができますが、スコープは実質的にグローバルです。
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_pk_op_count_session"></a>
          <code class="literal">Ndb_api_pk_op_count_session</code>
        </p><a class="indexterm" name="idm45563224370864"></a><a class="indexterm" name="idm45563224369296"></a><p>
          このクライアントセッションで、主キーに基づいた、または主キーを使用した操作の数。 これには、BLOB テーブルに対する操作、暗黙的なロック解除操作、自動インクリメント操作、およびユーザーの管理下にある主キー操作が含まれます。 
        </p><p>
          この変数は、<code class="literal">SHOW GLOBAL STATUS</code> または <code class="literal">SHOW SESSION STATUS</code> を使用して読み取ることができますが、現在のセッションにのみ関連しており、この <span class="command"><strong>mysqld</strong></span> のほかのクライアントには影響しません。
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_pk_op_count_replica"></a>
          <code class="literal">Ndb_api_pk_op_count_replica</code>
        </p><a class="indexterm" name="idm45563224358880"></a><a class="indexterm" name="idm45563224357312"></a><p>
          主キーに基づいた、または主キーを使用した、このレプリカによる操作の数。 これには、BLOB テーブルに対する操作、暗黙的なロック解除操作、自動インクリメント操作、およびユーザーの管理下にある主キー操作が含まれます。 
        </p><p>
          この変数は、<code class="literal">SHOW GLOBAL STATUS</code> または <code class="literal">SHOW SESSION STATUS</code> を使用して読み取ることができますが、スコープは実質的にグローバルです。 この MySQL サーバーがレプリカとして機能しない場合、または NDB テーブルを使用しない場合、この値は常に 0 です。 
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_pk_op_count_slave"></a>
          <code class="literal">Ndb_api_pk_op_count_slave</code>
        </p><a class="indexterm" name="idm45563224347424"></a><a class="indexterm" name="idm45563224345856"></a><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
            NDB 8.0.23 では非推奨です。代わりに <code class="literal">Ndb_api_pk_op_count_replica</code> を使用してください。
          </p></div><p>
          主キーに基づいた、または主キーを使用した、このレプリカによる操作の数。 これには、BLOB テーブルに対する操作、暗黙的なロック解除操作、自動インクリメント操作、およびユーザーの管理下にある主キー操作が含まれます。 
        </p><p>
          この変数は、<code class="literal">SHOW GLOBAL STATUS</code> または <code class="literal">SHOW SESSION STATUS</code> を使用して読み取ることができますが、スコープは実質的にグローバルです。 この MySQL サーバーがレプリカとして機能しない場合、または NDB テーブルを使用しない場合、この値は常に 0 です。 
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_pk_op_count"></a>
          <code class="literal">Ndb_api_pk_op_count</code>
        </p><a class="indexterm" name="idm45563224333952"></a><a class="indexterm" name="idm45563224332400"></a><p>
          この MySQL サーバー (SQL ノード) による、主キーに基づいた、または主キーを使用した操作の数。 これには、BLOB テーブルに対する操作、暗黙的なロック解除操作、自動インクリメント操作、およびユーザーの管理下にある主キー操作が含まれます。 
        </p><p>
          この変数は、<code class="literal">SHOW GLOBAL STATUS</code> または <code class="literal">SHOW SESSION STATUS</code> を使用して読み取ることができますが、スコープは実質的にグローバルです。
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_pruned_scan_count_session"></a>
          <code class="literal">Ndb_api_pruned_scan_count_session</code>
        </p><a class="indexterm" name="idm45563224322816"></a><a class="indexterm" name="idm45563224321216"></a><p>
          このクライアントセッションで単一のパーティションにプルーニングされたスキャンの回数。
        </p><p>
          この変数は、<code class="literal">SHOW GLOBAL STATUS</code> または <code class="literal">SHOW SESSION STATUS</code> を使用して読み取ることができますが、現在のセッションにのみ関連しており、この <span class="command"><strong>mysqld</strong></span> のほかのクライアントには影響しません。
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_pruned_scan_count_replica"></a>
          <code class="literal">Ndb_api_pruned_scan_count_replica</code>
        </p><a class="indexterm" name="idm45563224311104"></a><a class="indexterm" name="idm45563224309504"></a><p>
          単一のパーティションにプルーニングされた、このレプリカによるスキャンの数。
        </p><p>
          この変数は、<code class="literal">SHOW GLOBAL STATUS</code> または <code class="literal">SHOW SESSION STATUS</code> を使用して読み取ることができますが、スコープは実質的にグローバルです。 この MySQL サーバーがレプリカとして機能しない場合、または NDB テーブルを使用しない場合、この値は常に 0 です。 
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_pruned_scan_count_slave"></a>
          <code class="literal">Ndb_api_pruned_scan_count_slave</code>
        </p><a class="indexterm" name="idm45563224300048"></a><a class="indexterm" name="idm45563224298448"></a><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
            NDB 8.0.23 では非推奨です。代わりに <code class="literal">Ndb_api_pruned_scan_count_replica</code> を使用してください。
          </p></div><p>
          単一のパーティションにプルーニングされた、このレプリカによるスキャンの数。
        </p><p>
          この変数は、<code class="literal">SHOW GLOBAL STATUS</code> または <code class="literal">SHOW SESSION STATUS</code> を使用して読み取ることができますが、スコープは実質的にグローバルです。 この MySQL サーバーがレプリカとして機能しない場合、または NDB テーブルを使用しない場合、この値は常に 0 です。 
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_pruned_scan_count"></a>
          <code class="literal">Ndb_api_pruned_scan_count</code>
        </p><a class="indexterm" name="idm45563224286944"></a><a class="indexterm" name="idm45563224285376"></a><p>
          この MySQL サーバー (SQL ノード) によって単一のパーティションにプルーニングされたスキャンの回数。
        </p><p>
          この変数は、<code class="literal">SHOW GLOBAL STATUS</code> または <code class="literal">SHOW SESSION STATUS</code> を使用して読み取ることができますが、スコープは実質的にグローバルです。
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_range_scan_count_session"></a>
          <code class="literal">Ndb_api_range_scan_count_session</code>
        </p><a class="indexterm" name="idm45563224276016"></a><a class="indexterm" name="idm45563224274416"></a><p>
          このクライアントセッションで開始された範囲スキャンの回数。
        </p><p>
          この変数は、<code class="literal">SHOW GLOBAL STATUS</code> または <code class="literal">SHOW SESSION STATUS</code> を使用して読み取ることができますが、現在のセッションにのみ関連しており、この <span class="command"><strong>mysqld</strong></span> のほかのクライアントには影響しません。
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_range_scan_count_replica"></a>
          <code class="literal">Ndb_api_range_scan_count_replica</code>
        </p><a class="indexterm" name="idm45563224264384"></a><a class="indexterm" name="idm45563224262784"></a><p>
          このレプリカによって開始されたレンジスキャンの数。
        </p><p>
          この変数は、<code class="literal">SHOW GLOBAL STATUS</code> または <code class="literal">SHOW SESSION STATUS</code> を使用して読み取ることができますが、スコープは実質的にグローバルです。 この MySQL サーバーがレプリカとして機能しない場合、または NDB テーブルを使用しない場合、この値は常に 0 です。 
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_range_scan_count_slave"></a>
          <code class="literal">Ndb_api_range_scan_count_slave</code>
        </p><a class="indexterm" name="idm45563224253392"></a><a class="indexterm" name="idm45563224251792"></a><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
            NDB 8.0.23 では非推奨です。代わりに <code class="literal">Ndb_api_range_scan_count_replica</code> を使用してください。
          </p></div><p>
          このレプリカによって開始されたレンジスキャンの数。
        </p><p>
          この変数は、<code class="literal">SHOW GLOBAL STATUS</code> または <code class="literal">SHOW SESSION STATUS</code> を使用して読み取ることができますが、スコープは実質的にグローバルです。 この MySQL サーバーがレプリカとして機能しない場合、または NDB テーブルを使用しない場合、この値は常に 0 です。 
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_range_scan_count"></a>
          <code class="literal">Ndb_api_range_scan_count</code>
        </p><a class="indexterm" name="idm45563224240352"></a><a class="indexterm" name="idm45563224238784"></a><p>
          この MySQL サーバー (SQL ノード) によって開始された範囲スキャンの回数。
        </p><p>
          この変数は、<code class="literal">SHOW GLOBAL STATUS</code> または <code class="literal">SHOW SESSION STATUS</code> を使用して読み取ることができますが、スコープは実質的にグローバルです。
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_read_row_count_session"></a>
          <code class="literal">Ndb_api_read_row_count_session</code>
        </p><a class="indexterm" name="idm45563224229600"></a><a class="indexterm" name="idm45563224228000"></a><p>
          このクライアントセッションで読み取られた行の合計数。 これには、このクライアントセッションで作成された主キー、一意キー、またはスキャン操作によって読み取られたすべての行が含まれます。 
        </p><p>
          この変数は、<code class="literal">SHOW GLOBAL STATUS</code> または <code class="literal">SHOW SESSION STATUS</code> を使用して読み取ることができますが、現在のセッションにのみ関連しており、この <span class="command"><strong>mysqld</strong></span> のほかのクライアントには影響しません。
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_read_row_count_replica"></a>
          <code class="literal">Ndb_api_read_row_count_replica</code>
        </p><a class="indexterm" name="idm45563224217616"></a><a class="indexterm" name="idm45563224216016"></a><p>
          このレプリカによって読み取られた行の合計数。 これには、このレプリカによって作成された主キー、一意キーまたはスキャン操作によって読み取られたすべての行が含まれます。 
        </p><p>
          この変数は、<code class="literal">SHOW GLOBAL STATUS</code> または <code class="literal">SHOW SESSION STATUS</code> を使用して読み取ることができますが、スコープは実質的にグローバルです。 この MySQL サーバーがレプリカとして機能しない場合、または NDB テーブルを使用しない場合、この値は常に 0 です。 
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_read_row_count_slave"></a>
          <code class="literal">Ndb_api_read_row_count_slave</code>
        </p><a class="indexterm" name="idm45563224206224"></a><a class="indexterm" name="idm45563224204640"></a><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
            NDB 8.0.23 では非推奨です。代わりに <code class="literal">Ndb_api_read_row_count_replica</code> を使用してください。
          </p></div><p>
          このレプリカによって読み取られた行の合計数。 これには、このレプリカによって作成された主キー、一意キーまたはスキャン操作によって読み取られたすべての行が含まれます。 
        </p><p>
          この変数は、<code class="literal">SHOW GLOBAL STATUS</code> または <code class="literal">SHOW SESSION STATUS</code> を使用して読み取ることができますが、スコープは実質的にグローバルです。 この MySQL サーバーがレプリカとして機能しない場合、または NDB テーブルを使用しない場合、この値は常に 0 です。 
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_read_row_count"></a>
          <code class="literal">Ndb_api_read_row_count</code>
        </p><a class="indexterm" name="idm45563224192832"></a><a class="indexterm" name="idm45563224191264"></a><p>
          この MySQL サーバー (SQL ノード) によって読み取られた行の合計数。 これには、この MySQL Server (SQL ノード) によって作成された主キー、一意キー、またはスキャン操作によって読み取られたすべての行が含まれます。 
        </p><p>
          <code class="literal">SELECT</code> <code class="literal">COUNT(*)</code> クエリーによって読み取られる行に関しては、この値が完全に正確でない場合があることに注意してください。この場合、MySQL サーバーは実際に<code class="literal">[<em class="replaceable"><code>table fragment ID</code></em>]:[<em class="replaceable"><code>number of rows in fragment</code></em>]</code>形式で疑似行を読み取り、テーブル内のすべてのフラグメントのフラグメント当たりの行数を合計して、すべての行の推定数を導出します。 <code class="literal">Ndb_api_read_row_count</code> では、テーブルの実際の行数ではなく、この見積りが使用されます。 
        </p><p>
          この変数は、<code class="literal">SHOW GLOBAL STATUS</code> または <code class="literal">SHOW SESSION STATUS</code> を使用して読み取ることができますが、スコープは実質的にグローバルです。
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_scan_batch_count_session"></a>
          <code class="literal">Ndb_api_scan_batch_count_session</code>
        </p><a class="indexterm" name="idm45563224176336"></a><a class="indexterm" name="idm45563224174736"></a><p>
          このクライアントセッションで受信された行のバッチ数。1 バッチは、単一のフラグメントから得られた 1 セットのスキャン結果として定義されます。
        </p><p>
          この変数は、<code class="literal">SHOW GLOBAL STATUS</code> または <code class="literal">SHOW SESSION STATUS</code> を使用して読み取ることができますが、現在のセッションにのみ関連しており、この <span class="command"><strong>mysqld</strong></span> のほかのクライアントには影響しません。
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_scan_batch_count_replica"></a>
          <code class="literal">Ndb_api_scan_batch_count_replica</code>
        </p><a class="indexterm" name="idm45563224164464"></a><a class="indexterm" name="idm45563224162864"></a><p>
          このレプリカによって受信された行のバッチ数。1 バッチは、単一フラグメントからのスキャン結果の 1 セットとして定義されます。
        </p><p>
          この変数は、<code class="literal">SHOW GLOBAL STATUS</code> または <code class="literal">SHOW SESSION STATUS</code> を使用して読み取ることができますが、スコープは実質的にグローバルです。 この MySQL サーバーがレプリカとして機能しない場合、または NDB テーブルを使用しない場合、この値は常に 0 です。 
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_scan_batch_count_slave"></a>
          <code class="literal">Ndb_api_scan_batch_count_slave</code>
        </p><a class="indexterm" name="idm45563224153264"></a><a class="indexterm" name="idm45563224151664"></a><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
            NDB 8.0.23 では非推奨です。代わりに <code class="literal">Ndb_api_scan_batch_count_replica</code> を使用してください。
          </p></div><p>
          このレプリカによって受信された行のバッチ数。1 バッチは、単一フラグメントからのスキャン結果の 1 セットとして定義されます。
        </p><p>
          この変数は、<code class="literal">SHOW GLOBAL STATUS</code> または <code class="literal">SHOW SESSION STATUS</code> を使用して読み取ることができますが、スコープは実質的にグローバルです。 この MySQL サーバーがレプリカとして機能しない場合、または NDB テーブルを使用しない場合、この値は常に 0 です。 
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_scan_batch_count"></a>
          <code class="literal">Ndb_api_scan_batch_count</code>
        </p><a class="indexterm" name="idm45563224140016"></a><a class="indexterm" name="idm45563224138448"></a><p>
          この MySQL Server (SQL ノード) によって受信された行のバッチ数。1 バッチは、単一のフラグメントから得られた 1 セットのスキャン結果として定義されます。
        </p><p>
          この変数は、<code class="literal">SHOW GLOBAL STATUS</code> または <code class="literal">SHOW SESSION STATUS</code> を使用して読み取ることができますが、スコープは実質的にグローバルです。
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_table_scan_count_session"></a>
          <code class="literal">Ndb_api_table_scan_count_session</code>
        </p><a class="indexterm" name="idm45563224128944"></a><a class="indexterm" name="idm45563224127344"></a><p>
          このクライアントセッションで開始された、内部テーブルのスキャンを含むテーブルスキャンの回数。
        </p><p>
          この変数は、<code class="literal">SHOW GLOBAL STATUS</code> または <code class="literal">SHOW SESSION STATUS</code> を使用して読み取ることができますが、現在のセッションにのみ関連しており、この <span class="command"><strong>mysqld</strong></span> のほかのクライアントには影響しません。
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_table_scan_count_replica"></a>
          <code class="literal">Ndb_api_table_scan_count_replica</code>
        </p><a class="indexterm" name="idm45563224117200"></a><a class="indexterm" name="idm45563224115600"></a><p>
          このレプリカによって開始されたテーブルスキャンの数 (内部テーブルのスキャンを含む)。
        </p><p>
          この変数は、<code class="literal">SHOW GLOBAL STATUS</code> または <code class="literal">SHOW SESSION STATUS</code> を使用して読み取ることができますが、スコープは実質的にグローバルです。 この MySQL サーバーがレプリカとして機能しない場合、または NDB テーブルを使用しない場合、この値は常に 0 です。 
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_table_scan_count_slave"></a>
          <code class="literal">Ndb_api_table_scan_count_slave</code>
        </p><a class="indexterm" name="idm45563224106112"></a><a class="indexterm" name="idm45563224104512"></a><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
            NDB 8.0.23 では非推奨です。代わりに <code class="literal">Ndb_api_table_scan_count_replica</code> を使用してください。
          </p></div><p>
          このレプリカによって開始されたテーブルスキャンの数 (内部テーブルのスキャンを含む)。
        </p><p>
          この変数は、<code class="literal">SHOW GLOBAL STATUS</code> または <code class="literal">SHOW SESSION STATUS</code> を使用して読み取ることができますが、スコープは実質的にグローバルです。 この MySQL サーバーがレプリカとして機能しない場合、または NDB テーブルを使用しない場合、この値は常に 0 です。 
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_table_scan_count"></a>
          <code class="literal">Ndb_api_table_scan_count</code>
        </p><a class="indexterm" name="idm45563224092976"></a><a class="indexterm" name="idm45563224091408"></a><p>
          この MySQL サーバー (SQL ノード) によって開始された、内部テーブルのスキャンを含むテーブルスキャンの回数。
        </p><p>
          この変数は、<code class="literal">SHOW GLOBAL STATUS</code> または <code class="literal">SHOW SESSION STATUS</code> を使用して読み取ることができますが、スコープは実質的にグローバルです。
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_trans_abort_count_session"></a>
          <code class="literal">Ndb_api_trans_abort_count_session</code>
        </p><a class="indexterm" name="idm45563224082032"></a><a class="indexterm" name="idm45563224080432"></a><p>
          このクライアントセッションで中止されたトランザクションの数。
        </p><p>
          この変数は、<code class="literal">SHOW GLOBAL STATUS</code> または <code class="literal">SHOW SESSION STATUS</code> を使用して読み取ることができますが、現在のセッションにのみ関連しており、この <span class="command"><strong>mysqld</strong></span> のほかのクライアントには影響しません。
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_trans_abort_count_replica"></a>
          <code class="literal">Ndb_api_trans_abort_count_replica</code>
        </p><a class="indexterm" name="idm45563224070384"></a><a class="indexterm" name="idm45563224068784"></a><p>
          このレプリカによって中断されたトランザクションの数。
        </p><p>
          この変数は、<code class="literal">SHOW GLOBAL STATUS</code> または <code class="literal">SHOW SESSION STATUS</code> を使用して読み取ることができますが、スコープは実質的にグローバルです。 この MySQL サーバーがレプリカとして機能しない場合、または NDB テーブルを使用しない場合、この値は常に 0 です。 
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_trans_abort_count_slave"></a>
          <code class="literal">Ndb_api_trans_abort_count_slave</code>
        </p><a class="indexterm" name="idm45563224059392"></a><a class="indexterm" name="idm45563224057792"></a><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
            NDB 8.0.23 では非推奨です。代わりに <code class="literal">Ndb_api_trans_abort_count_replica</code> を使用してください。
          </p></div><p>
          このレプリカによって中断されたトランザクションの数。
        </p><p>
          この変数は、<code class="literal">SHOW GLOBAL STATUS</code> または <code class="literal">SHOW SESSION STATUS</code> を使用して読み取ることができますが、スコープは実質的にグローバルです。 この MySQL サーバーがレプリカとして機能しない場合、または NDB テーブルを使用しない場合、この値は常に 0 です。 
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_trans_abort_count"></a>
          <code class="literal">Ndb_api_trans_abort_count</code>
        </p><a class="indexterm" name="idm45563224046352"></a><a class="indexterm" name="idm45563224044784"></a><p>
          この MySQL サーバー (SQL ノード) により中止されたトランザクションの数。
        </p><p>
          この変数は、<code class="literal">SHOW GLOBAL STATUS</code> または <code class="literal">SHOW SESSION STATUS</code> を使用して読み取ることができますが、スコープは実質的にグローバルです。
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_trans_close_count_session"></a>
          <code class="literal">Ndb_api_trans_close_count_session</code>
        </p><a class="indexterm" name="idm45563224035504"></a><a class="indexterm" name="idm45563224033904"></a><p>
          このクライアントセッションで閉じられたトランザクションの数。 一部のトランザクションがロールバックされている場合があるため、この値は <code class="literal">Ndb_api_trans_commit_count_session</code> と <code class="literal">Ndb_api_trans_abort_count_session</code> の合計より大きくなることがあります。 
        </p><p>
          この変数は、<code class="literal">SHOW GLOBAL STATUS</code> または <code class="literal">SHOW SESSION STATUS</code> を使用して読み取ることができますが、現在のセッションにのみ関連しており、この <span class="command"><strong>mysqld</strong></span> のほかのクライアントには影響しません。
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_trans_close_count_replica"></a>
          <code class="literal">Ndb_api_trans_close_count_replica</code>
        </p><a class="indexterm" name="idm45563224021536"></a><a class="indexterm" name="idm45563224019936"></a><p>
          このレプリカによってクローズされたトランザクションの数。 一部のトランザクションはロールバックされている可能性があるため、この値は <code class="literal">Ndb_api_trans_commit_count_replica</code> と <code class="literal">Ndb_api_trans_abort_count_replica</code> の合計より大きい場合があります。 
        </p><p>
          この変数は、<code class="literal">SHOW GLOBAL STATUS</code> または <code class="literal">SHOW SESSION STATUS</code> を使用して読み取ることができますが、スコープは実質的にグローバルです。 この MySQL サーバーがレプリカとして機能しない場合、または NDB テーブルを使用しない場合、この値は常に 0 です。 
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_trans_close_count_slave"></a>
          <code class="literal">Ndb_api_trans_close_count_slave</code>
        </p><a class="indexterm" name="idm45563224008208"></a><a class="indexterm" name="idm45563224006608"></a><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
            NDB 8.0.23 では非推奨です。代わりに <code class="literal">Ndb_api_trans_close_count_replica</code> を使用してください。
          </p></div><p>
          このレプリカによってクローズされたトランザクションの数。 一部のトランザクションはロールバックされている可能性があるため、この値は <code class="literal">Ndb_api_trans_commit_count_replica</code> と <code class="literal">Ndb_api_trans_abort_count_replica</code> の合計より大きい場合があります。 
        </p><p>
          この変数は、<code class="literal">SHOW GLOBAL STATUS</code> または <code class="literal">SHOW SESSION STATUS</code> を使用して読み取ることができますが、スコープは実質的にグローバルです。 この MySQL サーバーがレプリカとして機能しない場合、または NDB テーブルを使用しない場合、この値は常に 0 です。 
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_trans_close_count"></a>
          <code class="literal">Ndb_api_trans_close_count</code>
        </p><a class="indexterm" name="idm45563223992832"></a><a class="indexterm" name="idm45563223991264"></a><p>
          この MySQL サーバー (SQL ノード) により閉じられたトランザクションの数。 一部のトランザクションがロールバックされている場合があるため、この値は <code class="literal">Ndb_api_trans_commit_count</code> と <code class="literal">Ndb_api_trans_abort_count</code> の合計より大きくなることがあります。 
        </p><p>
          この変数は、<code class="literal">SHOW GLOBAL STATUS</code> または <code class="literal">SHOW SESSION STATUS</code> を使用して読み取ることができますが、スコープは実質的にグローバルです。
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_trans_commit_count_session"></a>
          <code class="literal">Ndb_api_trans_commit_count_session</code>
        </p><a class="indexterm" name="idm45563223979664"></a><a class="indexterm" name="idm45563223978064"></a><p>
          このクライアントセッションでコミットされたトランザクションの数。
        </p><p>
          この変数は、<code class="literal">SHOW GLOBAL STATUS</code> または <code class="literal">SHOW SESSION STATUS</code> を使用して読み取ることができますが、現在のセッションにのみ関連しており、この <span class="command"><strong>mysqld</strong></span> のほかのクライアントには影響しません。
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_trans_commit_count_replica"></a>
          <code class="literal">Ndb_api_trans_commit_count_replica</code>
        </p><a class="indexterm" name="idm45563223968000"></a><a class="indexterm" name="idm45563223966400"></a><p>
          このレプリカによってコミットされたトランザクションの数。
        </p><p>
          この変数は、<code class="literal">SHOW GLOBAL STATUS</code> または <code class="literal">SHOW SESSION STATUS</code> を使用して読み取ることができますが、スコープは実質的にグローバルです。 この MySQL サーバーがレプリカとして機能しない場合、または NDB テーブルを使用しない場合、この値は常に 0 です。 
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_trans_commit_count_slave"></a>
          <code class="literal">Ndb_api_trans_commit_count_slave</code>
        </p><a class="indexterm" name="idm45563223956896"></a><a class="indexterm" name="idm45563223955296"></a><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
            NDB 8.0.23 では非推奨です。代わりに <code class="literal">Ndb_api_trans_commit_count_replica</code> を使用してください。
          </p></div><p>
          このレプリカによってコミットされたトランザクションの数。
        </p><p>
          この変数は、<code class="literal">SHOW GLOBAL STATUS</code> または <code class="literal">SHOW SESSION STATUS</code> を使用して読み取ることができますが、スコープは実質的にグローバルです。 この MySQL サーバーがレプリカとして機能しない場合、または NDB テーブルを使用しない場合、この値は常に 0 です。 
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_trans_commit_count"></a>
          <code class="literal">Ndb_api_trans_commit_count</code>
        </p><a class="indexterm" name="idm45563223943904"></a><a class="indexterm" name="idm45563223942336"></a><p>
          この MySQL サーバー (SQL ノード) によりコミットされたトランザクションの数。
        </p><p>
          この変数は、<code class="literal">SHOW GLOBAL STATUS</code> または <code class="literal">SHOW SESSION STATUS</code> を使用して読み取ることができますが、スコープは実質的にグローバルです。
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_trans_local_read_row_count_session"></a>
          <code class="literal">Ndb_api_trans_local_read_row_count_session</code>
        </p><a class="indexterm" name="idm45563223933088"></a><a class="indexterm" name="idm45563223931472"></a><p>
          このクライアントセッションで読み取られた行の合計数。 これには、このクライアントセッションで作成された主キー、一意キー、またはスキャン操作によって読み取られたすべての行が含まれます。 
        </p><p>
          この変数は、<code class="literal">SHOW GLOBAL STATUS</code> または <code class="literal">SHOW SESSION STATUS</code> を使用して読み取ることができますが、現在のセッションにのみ関連しており、この <span class="command"><strong>mysqld</strong></span> のほかのクライアントには影響しません。
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_trans_local_read_row_count_replica"></a>
          <code class="literal">Ndb_api_trans_local_read_row_count_replica</code>
        </p><a class="indexterm" name="idm45563223921008"></a><a class="indexterm" name="idm45563223919392"></a><p>
          このレプリカによって読み取られた行の合計数。 これには、このレプリカによって作成された主キー、一意キーまたはスキャン操作によって読み取られたすべての行が含まれます。 
        </p><p>
          この変数は、<code class="literal">SHOW GLOBAL STATUS</code> または <code class="literal">SHOW SESSION STATUS</code> を使用して読み取ることができますが、スコープは実質的にグローバルです。 この MySQL サーバーがレプリカとして機能しない場合、または NDB テーブルを使用しない場合、この値は常に 0 です。 
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_trans_local_read_row_count_slave"></a>
          <code class="literal">Ndb_api_trans_local_read_row_count_slave</code>
        </p><a class="indexterm" name="idm45563223909520"></a><a class="indexterm" name="idm45563223907904"></a><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
            NDB 8.0.23 では非推奨です。代わりに <code class="literal">Ndb_api_trans_local_read_row_count_replica</code> を使用してください。
          </p></div><p>
          このレプリカによって読み取られた行の合計数。 これには、このレプリカによって作成された主キー、一意キーまたはスキャン操作によって読み取られたすべての行が含まれます。 
        </p><p>
          この変数は、<code class="literal">SHOW GLOBAL STATUS</code> または <code class="literal">SHOW SESSION STATUS</code> を使用して読み取ることができますが、スコープは実質的にグローバルです。 この MySQL サーバーがレプリカとして機能しない場合、または NDB テーブルを使用しない場合、この値は常に 0 です。 
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_trans_local_read_row_count"></a>
          <code class="literal">Ndb_api_trans_local_read_row_count</code>
        </p><a class="indexterm" name="idm45563223895984"></a><a class="indexterm" name="idm45563223894384"></a><p>
          この MySQL サーバー (SQL ノード) によって読み取られた行の合計数。 これには、この MySQL Server (SQL ノード) によって作成された主キー、一意キー、またはスキャン操作によって読み取られたすべての行が含まれます。 
        </p><p>
          この変数は、<code class="literal">SHOW GLOBAL STATUS</code> または <code class="literal">SHOW SESSION STATUS</code> を使用して読み取ることができますが、スコープは実質的にグローバルです。
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_trans_start_count_session"></a>
          <code class="literal">Ndb_api_trans_start_count_session</code>
        </p><a class="indexterm" name="idm45563223884784"></a><a class="indexterm" name="idm45563223883184"></a><p>
          このクライアントセッションで開始されたトランザクションの数。
        </p><p>
          この変数は、<code class="literal">SHOW GLOBAL STATUS</code> または <code class="literal">SHOW SESSION STATUS</code> を使用して読み取ることができますが、現在のセッションにのみ関連しており、この <span class="command"><strong>mysqld</strong></span> のほかのクライアントには影響しません。
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_trans_start_count_replica"></a>
          <code class="literal">Ndb_api_trans_start_count_replica</code>
        </p><a class="indexterm" name="idm45563223873136"></a><a class="indexterm" name="idm45563223871536"></a><p>
          このレプリカによって開始されたトランザクションの数。
        </p><p>
          この変数は、<code class="literal">SHOW GLOBAL STATUS</code> または <code class="literal">SHOW SESSION STATUS</code> を使用して読み取ることができますが、スコープは実質的にグローバルです。 この MySQL サーバーがレプリカとして機能しない場合、または NDB テーブルを使用しない場合、この値は常に 0 です。 
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_trans_start_count_slave"></a>
          <code class="literal">Ndb_api_trans_start_count_slave</code>
        </p><a class="indexterm" name="idm45563223862144"></a><a class="indexterm" name="idm45563223860544"></a><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
            NDB 8.0.23 では非推奨です。代わりに <code class="literal">Ndb_api_trans_start_count_replica</code> を使用してください。
          </p></div><p>
          このレプリカによって開始されたトランザクションの数。
        </p><p>
          この変数は、<code class="literal">SHOW GLOBAL STATUS</code> または <code class="literal">SHOW SESSION STATUS</code> を使用して読み取ることができますが、スコープは実質的にグローバルです。 この MySQL サーバーがレプリカとして機能しない場合、または NDB テーブルを使用しない場合、この値は常に 0 です。 
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_trans_start_count"></a>
          <code class="literal">Ndb_api_trans_start_count</code>
        </p><a class="indexterm" name="idm45563223849104"></a><a class="indexterm" name="idm45563223847536"></a><p>
          この MySQL サーバー (SQL ノード) により開始されたトランザクションの数。
        </p><p>
          この変数は、<code class="literal">SHOW GLOBAL STATUS</code> または <code class="literal">SHOW SESSION STATUS</code> を使用して読み取ることができますが、スコープは実質的にグローバルです。
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_uk_op_count_session"></a>
          <code class="literal">Ndb_api_uk_op_count_session</code>
        </p><a class="indexterm" name="idm45563223838352"></a><a class="indexterm" name="idm45563223836784"></a><p>
          このクライアントセッションで、一意キーに基づいた、または一意キーを使用した操作の数。
        </p><p>
          この変数は、<code class="literal">SHOW GLOBAL STATUS</code> または <code class="literal">SHOW SESSION STATUS</code> を使用して読み取ることができますが、現在のセッションにのみ関連しており、この <span class="command"><strong>mysqld</strong></span> のほかのクライアントには影響しません。
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_uk_op_count_replica"></a>
          <code class="literal">Ndb_api_uk_op_count_replica</code>
        </p><a class="indexterm" name="idm45563223826704"></a><a class="indexterm" name="idm45563223825136"></a><p>
          一意キーに基づいた、または一意キーを使用した、このレプリカによる操作の数。
        </p><p>
          この変数は、<code class="literal">SHOW GLOBAL STATUS</code> または <code class="literal">SHOW SESSION STATUS</code> を使用して読み取ることができますが、スコープは実質的にグローバルです。 この MySQL サーバーがレプリカとして機能しない場合、または NDB テーブルを使用しない場合、この値は常に 0 です。 
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_uk_op_count_slave"></a>
          <code class="literal">Ndb_api_uk_op_count_slave</code>
        </p><a class="indexterm" name="idm45563223815616"></a><a class="indexterm" name="idm45563223814048"></a><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
            NDB 8.0.23 では非推奨です。代わりに <code class="literal">Ndb_api_uk_op_count_replica</code> を使用してください。
          </p></div><p>
          一意キーに基づいた、または一意キーを使用した、このレプリカによる操作の数。
        </p><p>
          この変数は、<code class="literal">SHOW GLOBAL STATUS</code> または <code class="literal">SHOW SESSION STATUS</code> を使用して読み取ることができますが、スコープは実質的にグローバルです。 この MySQL サーバーがレプリカとして機能しない場合、または NDB テーブルを使用しない場合、この値は常に 0 です。 
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_uk_op_count"></a>
          <code class="literal">Ndb_api_uk_op_count</code>
        </p><a class="indexterm" name="idm45563223802512"></a><a class="indexterm" name="idm45563223800960"></a><p>
          この MySQL サーバー (SQL ノード) による、一意キーに基づいた、または一意キーを使用した操作の数。
        </p><p>
          この変数は、<code class="literal">SHOW GLOBAL STATUS</code> または <code class="literal">SHOW SESSION STATUS</code> を使用して読み取ることができますが、スコープは実質的にグローバルです。
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_wait_exec_complete_count_session"></a>
          <code class="literal">Ndb_api_wait_exec_complete_count_session</code>
        </p><a class="indexterm" name="idm45563223791744"></a><a class="indexterm" name="idm45563223790128"></a><p>
          このクライアントセッションで、操作の実行が完了するのを待機する間にスレッドがブロックされた回数。 これには、すべての <code class="literal">execute()</code> コールと、クライアントに表示されない BLOB および自動増分操作に対する暗黙的な実行が含まれます。 
        </p><p>
          この変数は、<code class="literal">SHOW GLOBAL STATUS</code> または <code class="literal">SHOW SESSION STATUS</code> を使用して読み取ることができますが、現在のセッションにのみ関連しており、この <span class="command"><strong>mysqld</strong></span> のほかのクライアントには影響しません。
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_wait_exec_complete_count_replica"></a>
          <code class="literal">Ndb_api_wait_exec_complete_count_replica</code>
        </p><a class="indexterm" name="idm45563223778608"></a><a class="indexterm" name="idm45563223776992"></a><p>
          操作の実行が完了するのを待機している間に、このレプリカによってスレッドがブロックされた回数。 これには、すべての <code class="literal">execute()</code> コールと、クライアントに表示されない BLOB および自動増分操作に対する暗黙的な実行が含まれます。 
        </p><p>
          この変数は、<code class="literal">SHOW GLOBAL STATUS</code> または <code class="literal">SHOW SESSION STATUS</code> を使用して読み取ることができますが、スコープは実質的にグローバルです。 この MySQL サーバーがレプリカとして機能しない場合、または NDB テーブルを使用しない場合、この値は常に 0 です。 
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_wait_exec_complete_count_slave"></a>
          <code class="literal">Ndb_api_wait_exec_complete_count_slave</code>
        </p><a class="indexterm" name="idm45563223765968"></a><a class="indexterm" name="idm45563223764352"></a><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
            NDB 8.0.23 では非推奨です。代わりに <code class="literal">Ndb_api_wait_exec_complete_count_replica</code> を使用してください。
          </p></div><p>
          操作の実行が完了するのを待機している間に、このレプリカによってスレッドがブロックされた回数。 これには、すべての <code class="literal">execute()</code> コールと、クライアントに表示されない BLOB および自動増分操作に対する暗黙的な実行が含まれます。 
        </p><p>
          この変数は、<code class="literal">SHOW GLOBAL STATUS</code> または <code class="literal">SHOW SESSION STATUS</code> を使用して読み取ることができますが、スコープは実質的にグローバルです。 この MySQL サーバーがレプリカとして機能しない場合、または NDB テーブルを使用しない場合、この値は常に 0 です。 
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_wait_exec_complete_count"></a>
          <code class="literal">Ndb_api_wait_exec_complete_count</code>
        </p><a class="indexterm" name="idm45563223751424"></a><a class="indexterm" name="idm45563223749824"></a><p>
          操作の実行が完了するまで待機する間に、この MySQL Server (SQL ノード) によってスレッドがブロックされた回数。 これには、すべての <code class="literal">execute()</code> コールと、クライアントに表示されない BLOB および自動増分操作に対する暗黙的な実行が含まれます。 
        </p><p>
          この変数は、<code class="literal">SHOW GLOBAL STATUS</code> または <code class="literal">SHOW SESSION STATUS</code> を使用して読み取ることができますが、スコープは実質的にグローバルです。
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_wait_meta_request_count_session"></a>
          <code class="literal">Ndb_api_wait_meta_request_count_session</code>
        </p><a class="indexterm" name="idm45563223739184"></a><a class="indexterm" name="idm45563223737568"></a><p>
          このクライアントセッションで、メタデータベースの信号 (DDL 要求、新しいエポック、トランザクションレコードの占有など) を待機する間にスレッドがブロックされた回数。
        </p><p>
          この変数は、<code class="literal">SHOW GLOBAL STATUS</code> または <code class="literal">SHOW SESSION STATUS</code> を使用して読み取ることができますが、現在のセッションにのみ関連しており、この <span class="command"><strong>mysqld</strong></span> のほかのクライアントには影響しません。
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_wait_meta_request_count_replica"></a>
          <code class="literal">Ndb_api_wait_meta_request_count_replica</code>
        </p><a class="indexterm" name="idm45563223727232"></a><a class="indexterm" name="idm45563223725616"></a><p>
          DDL リクエスト、新しいエポック、トランザクションレコードの清算など、メタデータベースのシグナルを待機しているこのレプリカによってスレッドがブロックされた回数。
        </p><p>
          この変数は、<code class="literal">SHOW GLOBAL STATUS</code> または <code class="literal">SHOW SESSION STATUS</code> を使用して読み取ることができますが、スコープは実質的にグローバルです。 この MySQL サーバーがレプリカとして機能しない場合、または NDB テーブルを使用しない場合、この値は常に 0 です。 
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_wait_meta_request_count_slave"></a>
          <code class="literal">Ndb_api_wait_meta_request_count_slave</code>
        </p><a class="indexterm" name="idm45563223715808"></a><a class="indexterm" name="idm45563223714208"></a><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
            NDB 8.0.23 では非推奨です。代わりに <code class="literal">Ndb_api_wait_meta_request_count_replica</code> を使用してください。
          </p></div><p>
          DDL リクエスト、新しいエポック、トランザクションレコードの清算など、メタデータベースのシグナルを待機しているこのレプリカによってスレッドがブロックされた回数。
        </p><p>
          この変数は、<code class="literal">SHOW GLOBAL STATUS</code> または <code class="literal">SHOW SESSION STATUS</code> を使用して読み取ることができますが、スコープは実質的にグローバルです。 この MySQL サーバーがレプリカとして機能しない場合、または NDB テーブルを使用しない場合、この値は常に 0 です。 
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_wait_meta_request_count"></a>
          <code class="literal">Ndb_api_wait_meta_request_count</code>
        </p><a class="indexterm" name="idm45563223702512"></a><a class="indexterm" name="idm45563223700912"></a><p>
          メタデータベースの信号 (DDL 要求、新しいエポック、トランザクションレコードの占有など) を待機する間に、この MySQL Server (SQL ノード) によってスレッドがブロックされた回数。
        </p><p>
          この変数は、<code class="literal">SHOW GLOBAL STATUS</code> または <code class="literal">SHOW SESSION STATUS</code> を使用して読み取ることができますが、スコープは実質的にグローバルです。
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_wait_nanos_count_session"></a>
          <code class="literal">Ndb_api_wait_nanos_count_session</code>
        </p><a class="indexterm" name="idm45563223691408"></a><a class="indexterm" name="idm45563223689808"></a><p>
          このクライアントセッションで、データノードから送信される任意のタイプの信号の待機に費やされた合計時間 (ナノ秒)。
        </p><p>
          この変数は、<code class="literal">SHOW GLOBAL STATUS</code> または <code class="literal">SHOW SESSION STATUS</code> を使用して読み取ることができますが、現在のセッションにのみ関連しており、この <span class="command"><strong>mysqld</strong></span> のほかのクライアントには影響しません。
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_wait_nanos_count_replica"></a>
          <code class="literal">Ndb_api_wait_nanos_count_replica</code>
        </p><a class="indexterm" name="idm45563223679616"></a><a class="indexterm" name="idm45563223678016"></a><p>
          このレプリカがデータノードからの任意のタイプのシグナルを待機するために費やした合計時間 (ナノ秒)。
        </p><p>
          この変数は、<code class="literal">SHOW GLOBAL STATUS</code> または <code class="literal">SHOW SESSION STATUS</code> を使用して読み取ることができますが、スコープは実質的にグローバルです。 この MySQL サーバーがレプリカとして機能しない場合、または NDB テーブルを使用しない場合、この値は常に 0 です。 
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_wait_nanos_count_slave"></a>
          <code class="literal">Ndb_api_wait_nanos_count_slave</code>
        </p><a class="indexterm" name="idm45563223668480"></a><a class="indexterm" name="idm45563223666880"></a><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
            NDB 8.0.23 では非推奨です。代わりに <code class="literal">Ndb_api_wait_nanos_count_replica</code> を使用してください。
          </p></div><p>
          このレプリカがデータノードからの任意のタイプのシグナルを待機するために費やした合計時間 (ナノ秒)。
        </p><p>
          この変数は、<code class="literal">SHOW GLOBAL STATUS</code> または <code class="literal">SHOW SESSION STATUS</code> を使用して読み取ることができますが、スコープは実質的にグローバルです。 この MySQL サーバーがレプリカとして機能しない場合、または NDB テーブルを使用しない場合、この値は常に 0 です。 
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_wait_nanos_count"></a>
          <code class="literal">Ndb_api_wait_nanos_count</code>
        </p><a class="indexterm" name="idm45563223655296"></a><a class="indexterm" name="idm45563223653728"></a><p>
          この MySQL Server (SQL ノード) によって、データノードから送信される任意のタイプの信号の待機に費やされた合計時間 (ナノ秒)。
        </p><p>
          この変数は、<code class="literal">SHOW GLOBAL STATUS</code> または <code class="literal">SHOW SESSION STATUS</code> を使用して読み取ることができますが、スコープは実質的にグローバルです。
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_wait_scan_result_count_session"></a>
          <code class="literal">Ndb_api_wait_scan_result_count_session</code>
        </p><a class="indexterm" name="idm45563223644304"></a><a class="indexterm" name="idm45563223642688"></a><p>
          このクライアントセッションで、スキャンベースの信号を待機する間 (追加のスキャン結果を待機するときや、スキャンが閉じるまで待機するときなど) にスレッドがブロックされた回数。
        </p><p>
          この変数は、<code class="literal">SHOW GLOBAL STATUS</code> または <code class="literal">SHOW SESSION STATUS</code> を使用して読み取ることができますが、現在のセッションにのみ関連しており、この <span class="command"><strong>mysqld</strong></span> のほかのクライアントには影響しません。
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_wait_scan_result_count_replica"></a>
          <code class="literal">Ndb_api_wait_scan_result_count_replica</code>
        </p><a class="indexterm" name="idm45563223632320"></a><a class="indexterm" name="idm45563223630704"></a><p>
          スキャンベースのシグナルを待機している間、またはスキャンの終了を待機しているときなどに、このレプリカによってスレッドがブロックされた回数。
        </p><p>
          この変数は、<code class="literal">SHOW GLOBAL STATUS</code> または <code class="literal">SHOW SESSION STATUS</code> を使用して読み取ることができますが、スコープは実質的にグローバルです。 この MySQL サーバーがレプリカとして機能しない場合、または NDB テーブルを使用しない場合、この値は常に 0 です。 
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_wait_scan_result_count_slave"></a>
          <code class="literal">Ndb_api_wait_scan_result_count_slave</code>
        </p><a class="indexterm" name="idm45563223621024"></a><a class="indexterm" name="idm45563223619424"></a><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
            NDB 8.0.23 では非推奨です。代わりに <code class="literal">Ndb_api_wait_scan_result_count_replica</code> を使用してください。
          </p></div><p>
          スキャンベースのシグナルを待機している間、またはスキャンの終了を待機しているときなどに、このレプリカによってスレッドがブロックされた回数。
        </p><p>
          この変数は、<code class="literal">SHOW GLOBAL STATUS</code> または <code class="literal">SHOW SESSION STATUS</code> を使用して読み取ることができますが、スコープは実質的にグローバルです。 この MySQL サーバーがレプリカとして機能しない場合、または NDB テーブルを使用しない場合、この値は常に 0 です。 
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_api_wait_scan_result_count"></a>
          <code class="literal">Ndb_api_wait_scan_result_count</code>
        </p><a class="indexterm" name="idm45563223607792"></a><a class="indexterm" name="idm45563223606192"></a><p>
          スキャンベースの信号を待機する間 (追加のスキャン結果を待機するときや、スキャンが閉じるまで待機するときなど) に、この MySQL Server (SQL ノード) によってスレッドがブロックされた回数。
        </p><p>
          この変数は、<code class="literal">SHOW GLOBAL STATUS</code> または <code class="literal">SHOW SESSION STATUS</code> を使用して読み取ることができますが、スコープは実質的にグローバルです。
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_cluster_node_id"></a>
          <code class="literal">Ndb_cluster_node_id</code>
        </p><a class="indexterm" name="idm45563223596656"></a><a class="indexterm" name="idm45563223595104"></a><p>
          サーバーが NDB Cluster ノードとして機能している場合、この変数の値はクラスタ内のそのノード ID です。
        </p><p>
          サーバーが NDB Cluster の一部でない場合、この変数の値は 0 です。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_config_from_host"></a>
          <code class="literal">Ndb_config_from_host</code>
        </p><a class="indexterm" name="idm45563223589696"></a><a class="indexterm" name="idm45563223588144"></a><p>
          サーバーが NDB Cluster の一部である場合、この変数の値は、その構成データを取得するクラスタ管理サーバーのホスト名または IP アドレスです。
        </p><p>
          サーバーが NDB Cluster の一部でない場合、この変数の値は空の文字列になります。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_config_from_port"></a>
          <code class="literal">Ndb_config_from_port</code>
        </p><a class="indexterm" name="idm45563223582528"></a><a class="indexterm" name="idm45563223580976"></a><p>
          サーバーが NDB Cluster の一部である場合、この変数の値は、サーバーが構成データを取得するクラスタ管理サーバーに接続されているポートの番号です。
        </p><p>
          サーバーが NDB Cluster の一部でない場合、この変数の値は 0 です。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_config_generation"></a>
          <code class="literal">Ndb_config_generation</code>
        </p><a class="indexterm" name="idm45563223575376"></a><a class="indexterm" name="idm45563223573824"></a><p>
          クラスタの現在の構成の世代番号を表示します。 これは、この SQL ノードが最後にクラスタに接続してからクラスタの構成が変更されたかどうかを判断するインジケータとして使用できます。 
        </p></li><li class="listitem"><p><a name="statvar_Ndb_conflict_fn_max_del_win"></a>
          <code class="literal">Ndb_conflict_fn_max_del_win</code>
        </p><a class="indexterm" name="idm45563223568720"></a><a class="indexterm" name="idm45563223567152"></a><p>
          この <span class="command"><strong>mysqld</strong></span> が最後に起動されてから、<code class="literal">NDB$MAX_DELETE_WIN()</code> を使用した NDB Cluster レプリケーション競合解決のために現在の SQL ノードで行が拒否された回数を示します。
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-replication-conflict-resolution" title="23.6.11 NDB Cluster レプリケーションの競合解決">セクション23.6.11「NDB Cluster レプリケーションの競合解決」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_conflict_fn_max"></a>
          <code class="literal">Ndb_conflict_fn_max</code>
        </p><a class="indexterm" name="idm45563223559504"></a><a class="indexterm" name="idm45563223557952"></a><p>
          NDB Cluster レプリケーション競合解決で使用されるこの変数は、この <span class="command"><strong>mysqld</strong></span> が最後に起動されてから、<span class="quote">「<span class="quote">「最大のタイムスタンプ優先」</span>」</span>競合解決のために現在の SQL ノードに行が適用されなかった回数を示します。
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-replication-conflict-resolution" title="23.6.11 NDB Cluster レプリケーションの競合解決">セクション23.6.11「NDB Cluster レプリケーションの競合解決」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_conflict_fn_old"></a>
          <code class="literal">Ndb_conflict_fn_old</code>
        </p><a class="indexterm" name="idm45563223550656"></a><a class="indexterm" name="idm45563223549104"></a><p>
          NDB Cluster レプリケーション競合解決で使用されるこの変数は、前回の再起動以降に、特定の <span class="command"><strong>mysqld</strong></span> で<span class="quote">「<span class="quote">「同じタイムスタンプを優先」</span>」</span>競合解決の結果として行が適用されなかった回数を示します。
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-replication-conflict-resolution" title="23.6.11 NDB Cluster レプリケーションの競合解決">セクション23.6.11「NDB Cluster レプリケーションの競合解決」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_conflict_fn_epoch"></a>
          <code class="literal">Ndb_conflict_fn_epoch</code>
        </p><a class="indexterm" name="idm45563223541824"></a><a class="indexterm" name="idm45563223540272"></a><p>
          NDB Cluster レプリケーション競合解決で使用されるこの変数は、前回の再起動以降に、特定の <span class="command"><strong>mysqld</strong></span> で <code class="literal">NDB$EPOCH()</code> 競合解決を使用して競合が検出された行数を示します。
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-replication-conflict-resolution" title="23.6.11 NDB Cluster レプリケーションの競合解決">セクション23.6.11「NDB Cluster レプリケーションの競合解決」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_conflict_fn_epoch2"></a>
          <code class="literal">Ndb_conflict_fn_epoch2</code>
        </p><a class="indexterm" name="idm45563223532672"></a><a class="indexterm" name="idm45563223531104"></a><p>
          <code class="literal">NDB$EPOCH2()</code> を使用しているときに、前回の再起動以降にプライマリとして指定されたソースで NDB Cluster レプリケーション競合解決で競合が検出された行数を表示します。
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-replication-ndb-epoch2" title="NDB$EPOCH2()">NDB$EPOCH2()</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_conflict_fn_epoch_trans"></a>
          <code class="literal">Ndb_conflict_fn_epoch_trans</code>
        </p><a class="indexterm" name="idm45563223524128"></a><a class="indexterm" name="idm45563223522560"></a><p>
          NDB Cluster レプリケーション競合解決で使用されるこの変数は、前回の再起動以降に、特定の <span class="command"><strong>mysqld</strong></span> で <code class="literal">NDB$EPOCH_TRANS()</code> 競合解決を使用して競合が検出された行数を示します。
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-replication-conflict-resolution" title="23.6.11 NDB Cluster レプリケーションの競合解決">セクション23.6.11「NDB Cluster レプリケーションの競合解決」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_conflict_fn_epoch2_trans"></a>
          <code class="literal">Ndb_conflict_fn_epoch2_trans</code>
        </p><a class="indexterm" name="idm45563223514912"></a><a class="indexterm" name="idm45563223513328"></a><p>
          NDB Cluster レプリケーション競合解決で使用されるこの変数は、前回の再起動以降に、特定の <span class="command"><strong>mysqld</strong></span> で <code class="literal">NDB$EPOCH_TRANS2()</code> 競合解決を使用して競合が検出された行数を示します。
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-replication-ndb-epoch2-trans" title="NDB$EPOCH2_TRANS()">NDB$EPOCH2_TRANS()</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_conflict_last_conflict_epoch"></a>
          <code class="literal">Ndb_conflict_last_conflict_epoch</code>
        </p><a class="indexterm" name="idm45563223505408"></a><a class="indexterm" name="idm45563223503808"></a><p>
          このレプリカで競合が検出された最新のエポック。 この値は <code class="literal">Ndb_replica_max_replicated_epoch</code> と比較できます。<code class="literal">Ndb_replica_max_replicated_epoch</code> が <code class="literal">Ndb_conflict_last_conflict_epoch</code> より大きい場合、競合はまだ検出されていません。 
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-replication-conflict-resolution" title="23.6.11 NDB Cluster レプリケーションの競合解決">セクション23.6.11「NDB Cluster レプリケーションの競合解決」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_conflict_reflected_op_discard_count"></a>
          <code class="literal">Ndb_conflict_reflected_op_discard_count</code>
        </p><a class="indexterm" name="idm45563223495152"></a><a class="indexterm" name="idm45563223493536"></a><p>
          NDB Cluster レプリケーション競合解決を使用している場合、これは、実行中にエラーが発生したためにセカンダリに適用されなかった反映された操作の数です。
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-replication-conflict-resolution" title="23.6.11 NDB Cluster レプリケーションの競合解決">セクション23.6.11「NDB Cluster レプリケーションの競合解決」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_conflict_reflected_op_prepare_count"></a>
          <code class="literal">Ndb_conflict_reflected_op_prepare_count</code>
        </p><a class="indexterm" name="idm45563223487264"></a><a class="indexterm" name="idm45563223485648"></a><p>
          NDB Cluster レプリケーションで競合解決を使用する場合、このステータス変数には、定義されている (つまり、セカンダリで実行するために準備されている) 反映された操作の数が含まれます。
        </p><p>
          <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-conflict-resolution" title="23.6.11 NDB Cluster レプリケーションの競合解決">セクション23.6.11「NDB Cluster レプリケーションの競合解決」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_conflict_refresh_op_count"></a>
          <code class="literal">Ndb_conflict_refresh_op_count</code>
        </p><a class="indexterm" name="idm45563223479440"></a><a class="indexterm" name="idm45563223477856"></a><p>
          NDB Cluster レプリケーションで競合解決を使用する場合、これにより、セカンダリで実行するために準備されているリフレッシュ操作の数がわかります。
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-replication-conflict-resolution" title="23.6.11 NDB Cluster レプリケーションの競合解決">セクション23.6.11「NDB Cluster レプリケーションの競合解決」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_conflict_last_stable_epoch"></a>
          <code class="literal">Ndb_conflict_last_stable_epoch</code>
        </p><a class="indexterm" name="idm45563223471632"></a><a class="indexterm" name="idm45563223470032"></a><p>
          トランザクション競合関数によって競合状態であることが検出された行数
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-replication-conflict-resolution" title="23.6.11 NDB Cluster レプリケーションの競合解決">セクション23.6.11「NDB Cluster レプリケーションの競合解決」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_conflict_trans_row_conflict_count"></a>
          <code class="literal">Ndb_conflict_trans_row_conflict_count</code>
        </p><a class="indexterm" name="idm45563223463920"></a><a class="indexterm" name="idm45563223462320"></a><p>
          NDB Cluster レプリケーション競合解決で使用されるこのステータス変数は、前回の再起動以降に、特定の <span class="command"><strong>mysqld</strong></span> 上のトランザクション競合関数によって直接競合していることが検出された行の数を示します。
        </p><p>
          現在、NDB Cluster でサポートされているトランザクション競合検出関数は NDB$EPOCH_TRANS() のみであるため、このステータス変数は事実上 <code class="literal">Ndb_conflict_fn_epoch_trans</code> と同じです。
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-replication-conflict-resolution" title="23.6.11 NDB Cluster レプリケーションの競合解決">セクション23.6.11「NDB Cluster レプリケーションの競合解決」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_conflict_trans_row_reject_count"></a>
          <code class="literal">Ndb_conflict_trans_row_reject_count</code>
        </p><a class="indexterm" name="idm45563223453392"></a><a class="indexterm" name="idm45563223451792"></a><p>
          NDB Cluster レプリケーション競合解決で使用されるこのステータス変数は、トランザクション競合検出関数によって競合していると判断されたために再割り当てされた行の合計数を示します。 これには、<code class="literal">Ndb_conflict_trans_row_conflict_count</code> だけでなく、競合するトランザクションに含まれる行や依存する行も含まれます。 
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-replication-conflict-resolution" title="23.6.11 NDB Cluster レプリケーションの競合解決">セクション23.6.11「NDB Cluster レプリケーションの競合解決」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_conflict_trans_reject_count"></a>
          <code class="literal">Ndb_conflict_trans_reject_count</code>
        </p><a class="indexterm" name="idm45563223444288"></a><a class="indexterm" name="idm45563223442688"></a><p>
          NDB Cluster レプリケーション競合解決で使用されるこのステータス変数は、トランザクション競合検出関数によって競合していることが検出されたトランザクションの数を示します。
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-replication-conflict-resolution" title="23.6.11 NDB Cluster レプリケーションの競合解決">セクション23.6.11「NDB Cluster レプリケーションの競合解決」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_conflict_trans_detect_iter_count"></a>
          <code class="literal">Ndb_conflict_trans_detect_iter_count</code>
        </p><a class="indexterm" name="idm45563223436288"></a><a class="indexterm" name="idm45563223434688"></a><p>
          NDB Cluster レプリケーション競合解決で使用され、エポックトランザクションのコミットに必要な内部反復の数を示します。 <code class="literal">Ndb_conflict_trans_conflict_commit_count</code> より (わずかに) 大きいか、等しい値にしてください。 
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-replication-conflict-resolution" title="23.6.11 NDB Cluster レプリケーションの競合解決">セクション23.6.11「NDB Cluster レプリケーションの競合解決」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_conflict_trans_conflict_commit_count"></a>
          <code class="literal">Ndb_conflict_trans_conflict_commit_count</code>
        </p><a class="indexterm" name="idm45563223427392"></a><a class="indexterm" name="idm45563223425776"></a><p>
          NDB Cluster レプリケーションの競合解決で使用され、トランザクションの競合処理が必要になったあとにコミットされたエポックトランザクションの数を示します。
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-replication-conflict-resolution" title="23.6.11 NDB Cluster レプリケーションの競合解決">セクション23.6.11「NDB Cluster レプリケーションの競合解決」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_epoch_delete_delete_count"></a>
          <code class="literal">Ndb_epoch_delete_delete_count</code>
        </p><a class="indexterm" name="idm45563223419488"></a><a class="indexterm" name="idm45563223417904"></a><p>
          delete-delete 競合検出を使用する場合、これは、削除操作が適用されるが、示された行が存在しない、検出された delete-delete 競合の数です。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_execute_count"></a>
          <code class="literal">Ndb_execute_count</code>
        </p><a class="indexterm" name="idm45563223412880"></a><a class="indexterm" name="idm45563223411328"></a><p>
          操作によって行われた <code class="literal">NDB</code> カーネルへのラウンドトリップの回数を示します。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_last_commit_epoch_server"></a>
          <code class="literal">Ndb_last_commit_epoch_server</code>
        </p><a class="indexterm" name="idm45563223405680"></a><a class="indexterm" name="idm45563223404096"></a><p>
          <code class="literal">NDB</code> によって最後にコミットされたエポック。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_last_commit_epoch_session"></a>
          <code class="literal">Ndb_last_commit_epoch_session</code>
        </p><a class="indexterm" name="idm45563223398736"></a><a class="indexterm" name="idm45563223397152"></a><p>
          この <code class="literal">NDB</code> クライアントによって最後にコミットされたエポック。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_metadata_detected_count"></a>
          <code class="literal">Ndb_metadata_detected_count</code>
        </p><a class="indexterm" name="idm45563223391696"></a><a class="indexterm" name="idm45563223390128"></a><p>
          このサーバーが最後に起動されてから NDB メタデータ変更検出スレッドが MySQL データディクショナリに関する変更を検出した回数。
        </p><p>
          NDB 8.0.16 に追加されました。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_metadata_excluded_count"></a>
          <code class="literal">Ndb_metadata_excluded_count</code>
        </p><a class="indexterm" name="idm45563223384640"></a><a class="indexterm" name="idm45563223383072"></a><a class="indexterm" name="idm45563223381104"></a><a class="indexterm" name="idm45563223379488"></a><p>
          NDB binlog スレッドが最後に再起動されてから、この SQL ノードで同期できなかったメタデータオブジェクトの数。
        </p><p>
          オブジェクトを除外すると、ユーザーが不一致を手動で修正するまで、自動同期化の対象とはみなされません。 これを行うには、<code class="literal">SHOW CREATE TABLE <em class="replaceable"><code>table</code></em></code>、<code class="literal">SELECT * FROM <em class="replaceable"><code>table</code></em></code> などのステートメント、またはテーブル検出をトリガーするその他のステートメントでテーブルを使用します。 
        </p><p>
          NDB 8.0.18 に追加されました。 NDB 8.0.22 より前では、この変数は <code class="literal">Ndb_metadata_blacklist_size</code> という名前でした。 
        </p></li><li class="listitem"><p><a name="statvar_Ndb_metadata_synced_count"></a>
          <code class="literal">Ndb_metadata_synced_count</code>
        </p><a class="indexterm" name="idm45563223370096"></a><a class="indexterm" name="idm45563223368528"></a><p>
          この SQL ノードが最後に再起動されてから同期された NDB メタデータオブジェクトの数。
        </p><p>
          NDB 8.0.18 に追加されました。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_number_of_data_nodes"></a>
          <code class="literal">Ndb_number_of_data_nodes</code>
        </p><a class="indexterm" name="idm45563223363168"></a><a class="indexterm" name="idm45563223361600"></a><p>
          サーバーが NDB Cluster の一部である場合、この変数の値はクラスタ内のデータノードの数です。
        </p><p>
          サーバーが NDB Cluster の一部でない場合、この変数の値は 0 です。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_pushed_queries_defined"></a>
          <code class="literal">Ndb_pushed_queries_defined</code>
        </p><a class="indexterm" name="idm45563223356112"></a><a class="indexterm" name="idm45563223354544"></a><p>
          データノードでの分散処理のために NDB カーネルにプッシュダウンされた結合の合計数。
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
            プッシュダウン可能な <code class="literal">EXPLAIN</code> を使用してテストされた結合は、この数値に寄与します。
          </p></div></li><li class="listitem"><p><a name="statvar_Ndb_pushed_queries_dropped"></a>
          <code class="literal">Ndb_pushed_queries_dropped</code>
        </p><a class="indexterm" name="idm45563223347664"></a><a class="indexterm" name="idm45563223346096"></a><p>
          NDB カーネルにプッシュダウンされ、処理できなかった結合の数。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_pushed_queries_executed"></a>
          <code class="literal">Ndb_pushed_queries_executed</code>
        </p><a class="indexterm" name="idm45563223341296"></a><a class="indexterm" name="idm45563223339728"></a><p>
          <code class="literal">NDB</code> に正常にプッシュダウンされ、実行された結合の数。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_pushed_reads"></a>
          <code class="literal">Ndb_pushed_reads</code>
        </p><a class="indexterm" name="idm45563223334064"></a><a class="indexterm" name="idm45563223332512"></a><p>
          プッシュダウンされた結合によって NDB カーネルから <span class="command"><strong>mysqld</strong></span> に返された行の数。
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
            <code class="literal">NDB</code> にプッシュダウンできる結合で <code class="literal">EXPLAIN</code> を実行しても、この数値には追加されません。
          </p></div></li><li class="listitem"><p><a name="statvar_Ndb_pruned_scan_count"></a>
          <code class="literal">Ndb_pruned_scan_count</code>
        </p><a class="indexterm" name="idm45563223324144"></a><a class="indexterm" name="idm45563223322592"></a><p>
          この変数は、NDB Cluster が最後に起動されてから、<code class="literal">NDBCLUSTER</code> がパーティションプルーニングを使用できるようになった <code class="literal">NDBCLUSTER</code> によって実行されたスキャンの数を保持します。
        </p><p>
          この変数を <code class="literal">Ndb_scan_count</code> とともに使用すると、単一のテーブルパーティションにスキャンをプルーニングするサーバーの機能を最大化して、単一のデータノードのみを含むスキーマ設計で役立ちます。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_replica_max_replicated_epoch"></a>
          <code class="literal">Ndb_replica_max_replicated_epoch</code>
        </p><a class="indexterm" name="idm45563223313712"></a><a class="indexterm" name="idm45563223312112"></a><p>
          このレプリカで最後にコミットされたエポック。 この値は <code class="literal">Ndb_conflict_last_conflict_epoch</code> と比較できます。<code class="literal">Ndb_replica_max_replicated_epoch</code> がこの値より大きい場合、競合はまだ検出されていません。 
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-replication-conflict-resolution" title="23.6.11 NDB Cluster レプリケーションの競合解決">セクション23.6.11「NDB Cluster レプリケーションの競合解決」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_scan_count"></a>
          <code class="literal">Ndb_scan_count</code>
        </p><a class="indexterm" name="idm45563223304320"></a><a class="indexterm" name="idm45563223302768"></a><p>
          この変数は、NDB Cluster が最後に起動されてから <code class="literal">NDBCLUSTER</code> によって実行されたスキャンの合計数を保持します。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_slave_max_replicated_epoch"></a>
          <code class="literal">Ndb_slave_max_replicated_epoch</code>
        </p><a class="indexterm" name="idm45563223296976"></a><a class="indexterm" name="idm45563223295376"></a><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
            NDB 8.0.23 では非推奨です。代わりに <code class="literal">Ndb_slave_max_replicated_epoch</code> を使用してください。
          </p></div><p>
          このレプリカで最後にコミットされたエポック。 この値は <code class="literal">Ndb_conflict_last_conflict_epoch</code> と比較できます。<code class="literal">Ndb_slave_max_replicated_epoch</code> がこの値より大きい場合、競合はまだ検出されていません。 
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-replication-conflict-resolution" title="23.6.11 NDB Cluster レプリケーションの競合解決">セクション23.6.11「NDB Cluster レプリケーションの競合解決」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="statvar_Ndb_system_name"></a>
          <code class="literal">Ndb_system_name</code>
        </p><a class="indexterm" name="idm45563223285536"></a><a class="indexterm" name="idm45563223283984"></a><p>
          この MySQL Server が NDB クラスタに接続されている場合、この読み取り専用変数はクラスタシステム名を示します。 それ以外の場合、値は空の文字列です。 
        </p></li><li class="listitem"><p><a name="statvar_Ndb_trans_hint_count_session"></a>
          <code class="literal">Ndb_trans_hint_count_session</code>
        </p><a class="indexterm" name="idm45563223278992"></a><a class="indexterm" name="idm45563223277408"></a><p>
          現在のセッションで開始されたヒントを使用したトランザクションの数。 <code class="literal">Ndb_api_trans_start_count_session</code> と比較して、ヒントを使用できるすべての NDB トランザクションの比率を取得します。 NDB 8.0.17 に追加されました。 
        </p></li></ul></div></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-tcp-definition"></a>23.3.3.10 NDB Cluster TCP/IP 接続</h4></div></div></div><p>
        TCP/IP は NDB Cluster
        内のノード間のすべての接続のデフォルトのトランスポートメカニズムです。
        通常、TCP/IP
        接続を定義する必要はありません。NDB Cluster
        は、すべてのデータノード、管理ノード、および
        SQL または API
        ノードに対してこのような接続を自動的に設定します。
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
          このルールの例外については、<a class="xref" href="mysql-cluster.html#mysql-cluster-tcp-definition-direct" title="23.3.3.11 直接接続を使用した NDB Cluster TCP/IP 接続">セクション23.3.3.11「直接接続を使用した NDB Cluster TCP/IP 接続」</a>を参照してください。
        </p></div><p>
        デフォルトの接続パラメータをオーバーライドするには、<code class="filename">config.ini</code>
        ファイルで 1 つ以上の <code class="literal">[tcp]</code>
        セクションを使用して接続を定義する必要があります。
        各<code class="literal">[tcp]</code>セクションでは、2 つの NDB
        Cluster ノード間の TCP/IP
        接続を明示的に定義し、少なくともパラメータ
        <code class="literal">NodeId1</code> と
        <code class="literal">NodeId2</code>、およびオーバーライドする接続パラメータを含める必要があります。
      </p><p>
        これらのパラメータのデフォルト値を
        <code class="literal">[tcp default]</code>
        セクションに設定して変更することもできます。
      </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">重要</div><p>
          <code class="filename">config.ini</code> ファイル内の
          <code class="literal">[tcp]</code>
          セクションは、<span class="emphasis"><em>最後に</em></span>
          (ファイル内のほかのすべてのセクションのあとで)
          指定するようにしてください。
          ただし、<code class="literal">[tcp default]</code>
          セクションについては、これは必須ではありません。
          この要件は、NDB Cluster 管理サーバーが
          <code class="filename">config.ini</code>
          ファイルを読み取る方法に関する既知の問題です。
        </p></div><p>
        <code class="filename">config.ini</code> ファイルの
        <code class="literal">[tcp]</code> および <code class="literal">[tcp
        default]</code>
        セクションに設定できる接続パラメータをここに示します。
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="ndbparam-tcp-allowunresolvedhostnames"></a>
            <code class="literal">AllowUnresolvedHostNames</code>
          </p><a class="indexterm" name="idm45563223252784"></a><div class="informaltable"><a name="allowunresolvedhostnames-tcp-table"></a><table frame="box" rules="all" summary="AllowUnresolvedHostNames TCP 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.22</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>boolean</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>false</td>
              </tr><tr>
                <th>範囲</th>
                <td>true, false</td>
              </tr><tr>
                <th>追加</th>
                <td>NDB 8.0.22</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-tcp-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            デフォルトでは、接続の試行中に管理ノードがホスト名の解決に失敗すると、致命的エラーが発生します。
            この動作は、グローバル構成ファイル
            (通常は <code class="filename">config.ini</code> という名前)
            の<code class="literal">[tcp default]</code>セクションで
            <code class="literal">AllowUnresolvedHostNames</code> を
            <code class="literal">true</code>
            に設定することでオーバーライドできます。この場合、ホスト名の解決の失敗は警告として扱われ、<span class="command"><strong>ndb_mgmd</strong></span>
            の起動は中断されずに続行されます。
          </p></li><li class="listitem"><p><a name="ndbparam-tcp-checksum"></a>
            <code class="literal">Checksum</code>
          </p><a class="indexterm" name="idm45563223226880"></a><div class="informaltable"><a name="checksum-tcp-table"></a><table frame="box" rules="all" summary="Checksum TCP 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>boolean</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>false</td>
              </tr><tr>
                <th>範囲</th>
                <td>true, false</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-tcp-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            このパラメータはブールパラメータです
            (<code class="literal">Y</code> または <code class="literal">1</code>
            に設定すると有効になり、<code class="literal">N</code>
            または <code class="literal">0</code>
            に設定すると無効になります)。
            デフォルトでは無効になっています。
            有効にすると、送信バッファーに配置される前にすべてのメッセージのチェックサムが計算されます。
            この機能によって、メッセージが送信バッファーでの待機中に
            (またはトランスポートメカニズムによって)
            破損していないことが確認されます。
          </p></li><li class="listitem"><p><a name="ndbparam-tcp-group"></a>
            <code class="literal">グループ</code>
          </p><p>
            <code class="literal">ndb_optimized_node_selection</code>
            が有効になっている場合、接続先のノードを選択するためにノードの近接性が使用されることがあります。
            このパラメータは、<span class="quote">「<span class="quote">closer</span>」</span>
            として解釈される下限値に設定することで、近接性に影響を与えるために使用できます。
            詳細は、システム変数の説明を参照してください。
          </p></li><li class="listitem"><p><a name="ndbparam-tcp-hostname1"></a>
            <code class="literal">HostName1</code>
          </p><a class="indexterm" name="idm45563223199792"></a><div class="informaltable"><a name="hostname1-tcp-table"></a><table frame="box" rules="all" summary="HostName1 TCP 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>name or IP address</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>[...]</td>
              </tr><tr>
                <th>範囲</th>
                <td>...</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-tcp-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            <code class="literal">HostName1</code> および
            <code class="literal">HostName2</code>
            パラメータを使用すると、2
            つのノード間の特定の TCP
            接続で使用する特定のネットワークインタフェースを指定できます。
            これらのパラメータに使用する値は、ホスト名または
            IP アドレスです。
          </p></li><li class="listitem"><p><a name="ndbparam-tcp-hostname2"></a>
            <code class="literal">HostName2</code>
          </p><a class="indexterm" name="idm45563223178576"></a><div class="informaltable"><a name="hostname2-tcp-table"></a><table frame="box" rules="all" summary="HostName1 TCP 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>name or IP address</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>[...]</td>
              </tr><tr>
                <th>範囲</th>
                <td>...</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-tcp-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            <code class="literal">HostName1</code> および
            <code class="literal">HostName2</code>
            パラメータを使用すると、2
            つのノード間の特定の TCP
            接続で使用する特定のネットワークインタフェースを指定できます。
            これらのパラメータに使用する値は、ホスト名または
            IP アドレスです。
          </p></li><li class="listitem"><p><a name="ndbparam-tcp-nodeid1"></a>
            <code class="literal">NodeId1</code>
          </p><a class="indexterm" name="idm45563223157408"></a><div class="informaltable"><a name="nodeid1-tcp-table"></a><table frame="box" rules="all" summary="NodeId1 TCP 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>numeric</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>[none]</td>
              </tr><tr>
                <th>範囲</th>
                <td>1 - 255</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-tcp-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            2
            つのノード間の接続を識別するには、構成ファイルの
            <code class="literal">[tcp]</code> セクションに
            <code class="literal">NodeId1</code> および
            <code class="literal">NodeId2</code>
            の値としてノード ID
            を指定する必要があります。
            これらは、各ノードに対する一意の
            <code class="literal">Id</code>
            値であり、<a class="xref" href="mysql-cluster.html#mysql-cluster-api-definition" title="23.3.3.7 NDB Cluster での SQL およびその他の API ノードの定義">セクション23.3.3.7「NDB Cluster での SQL およびその他の API ノードの定義」</a>で説明しているものと同じです。
          </p></li><li class="listitem"><p><a name="ndbparam-tcp-nodeid2"></a>
            <code class="literal">NodeId2</code>
          </p><a class="indexterm" name="idm45563223133952"></a><div class="informaltable"><a name="nodeid2-tcp-table"></a><table frame="box" rules="all" summary="NodeId2 TCP 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>numeric</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>[none]</td>
              </tr><tr>
                <th>範囲</th>
                <td>1 - 255</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-tcp-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            2
            つのノード間の接続を識別するには、構成ファイルの
            <code class="literal">[tcp]</code> セクションに
            <code class="literal">NodeId1</code> および
            <code class="literal">NodeId2</code> の値としてノード ID
            を指定する必要があります。
            これらは、各ノードに対する一意の
            <code class="literal">Id</code>
            値であり、<a class="xref" href="mysql-cluster.html#mysql-cluster-api-definition" title="23.3.3.7 NDB Cluster での SQL およびその他の API ノードの定義">セクション23.3.3.7「NDB Cluster での SQL およびその他の API ノードの定義」</a>で説明しているものと同じです。
          </p></li><li class="listitem"><p><a name="ndbparam-tcp-overloadlimit"></a>
            <code class="literal">OverloadLimit</code>
          </p><a class="indexterm" name="idm45563223110544"></a><div class="informaltable"><a name="overloadlimit-tcp-table"></a><table frame="box" rules="all" summary="OverloadLimit TCP 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>bytes</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>0</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-tcp-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            送信バッファーにこれより多くの未送信バイトがあるときは、接続が過負荷状態であるとみなされます。
          </p><p>
            このパラメータを使用すると、接続を過負荷状態であるとみなす前に送信バッファーに存在する未送信データ量を決定できます。
            詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-config-send-buffers" title="23.3.3.14 NDB Cluster 送信バッファーパラメータの構成">セクション23.3.3.14「NDB Cluster 送信バッファーパラメータの構成」</a>を参照してください。
          </p></li><li class="listitem"><p><a name="ndbparam-tcp-presendchecksum"></a>
            <code class="literal">PreSendChecksum</code>
          </p><a class="indexterm" name="idm45563223089488"></a><div class="informaltable"><a name="presendchecksum-tcp-table"></a><table frame="box" rules="all" summary="PreSendChecksum TCP 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>boolean</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>false</td>
              </tr><tr>
                <th>範囲</th>
                <td>true, false</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-tcp-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td></td>
              </tr></tbody></table></div><p>
            このパラメータと
            <code class="literal">Checksum</code>
            の両方が有効になっている場合は、送信前チェックサムチェックを実行し、ノード間のすべての
            TCP シグナルでエラーをチェックします。
            <code class="literal">Checksum</code>
            も有効になっていない場合は、何の効果もありません。
          </p></li><li class="listitem"><p><a name="ndbparam-tcp-receivebuffermemory"></a>
            <code class="literal">ReceiveBufferMemory</code>
          </p><a class="indexterm" name="idm45563223068192"></a><div class="informaltable"><a name="receivebuffermemory-tcp-table"></a><table frame="box" rules="all" summary="ReceiveBufferMemory TCP 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>bytes</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>2M</td>
              </tr><tr>
                <th>範囲</th>
                <td>16K - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-tcp-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            TCP/IP
            ソケットからデータを受信するときに使用するバッファーのサイズを指定します。
          </p><p>
            このパラメータのデフォルト値は 2M
            バイトです。 指定可能な最小値は 16K
            バイトです。理論的な最大は 4G
            バイトです。
          </p></li><li class="listitem"><p><a name="ndbparam-tcp-sendbuffermemory"></a>
            <code class="literal">SendBufferMemory</code>
          </p><a class="indexterm" name="idm45563223047840"></a><div class="informaltable"><a name="sendbuffermemory-tcp-table"></a><table frame="box" rules="all" summary="SendBufferMemory TCP 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>unsigned</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>2M</td>
              </tr><tr>
                <th>範囲</th>
                <td>256K - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-tcp-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            TCP
            トランスポータは、オペレーティングシステムに対する送信呼び出しを実行する前に、バッファーを使用してすべてのメッセージを格納します。
            このバッファーが 64K
            バイトに達すると、その内容が送信されます。これは、一連のメッセージが実行されたときにも送信されます。
            一時的な過負荷状態に対応するため、より大きな送信バッファーを定義することもできます。
          </p><p>
            このパラメータが明示的に設定されている場合は、メモリーが各トランスポータ専用でなくなります。代わりに、使用された値によって、(使用可能なメモリーの合計、つまり
            <code class="literal">TotalSendBufferMemory</code> のうち)
            単一のトランスポータが使用できるメモリー量に関する厳密な制限が示されます。
            NDB Cluster
            での動的トランスポータ送信バッファーメモリー割り当ての構成の詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-config-send-buffers" title="23.3.3.14 NDB Cluster 送信バッファーパラメータの構成">セクション23.3.3.14「NDB Cluster 送信バッファーパラメータの構成」</a>
            を参照してください。
          </p><p>
            送信バッファーのデフォルトサイズは 2M
            バイトです。これは、ほとんどの状況で推奨されるサイズです。
            最小サイズは 64K
            バイトです。理論的な最大は 4G
            バイトです。
          </p></li><li class="listitem"><p><a name="ndbparam-tcp-sendsignalid"></a>
            <code class="literal">SendSignalId</code>
          </p><a class="indexterm" name="idm45563223024304"></a><div class="informaltable"><a name="sendsignalid-tcp-table"></a><table frame="box" rules="all" summary="SendSignalId TCP 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>boolean</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>false (debug builds: true)</td>
              </tr><tr>
                <th>範囲</th>
                <td>true, false</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-tcp-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            配信されたメッセージデータグラムを再トレースできるようにするには、各メッセージを識別する必要があります。
            このパラメータを <code class="literal">Y</code>
            に設定すると、メッセージ ID
            がネットワーク経由で転送されます。
            この機能は、製品ビルドではデフォルトで無効になっており、<code class="literal">-debug</code>
            ビルドで有効になります。
          </p></li><li class="listitem"><p><a name="ndbparam-tcp-tcpbind_inaddr_any"></a>
            <code class="literal">TcpBind_INADDR_ANY</code>
          </p><p>
            このパラメータを <code class="literal">TRUE</code> または
            <code class="literal">1</code>
            に設定すると、<code class="literal">IP_ADDR_ANY</code>
            がバインドされ、任意の場所から接続できるようになります
            (自動生成接続の場合)。 デフォルトは
            <code class="literal">FALSE</code> (<code class="literal">0</code>) です。
          </p></li><li class="listitem"><p><a name="ndbparam-tcp-tcpspintime"></a>
            <code class="literal">TcpSpinTime</code>
          </p><a class="indexterm" name="idm45563222996432"></a><div class="informaltable"><a name="tcpspintime-tcp-table"></a><table frame="box" rules="all" summary="TcpSpinTime TCP 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.20</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>µsec</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>0</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 2000</td>
              </tr><tr>
                <th>追加</th>
                <td>NDB 8.0.20</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-tcp-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            TCP
            トランスポータのスピンを制御します。有効にしないで、ゼロ以外の値に設定します。
            これは、接続のデータノード側と管理側または
            SQL ノード側の両方で機能します。
          </p></li><li class="listitem"><p><a name="ndbparam-tcp-tcp_maxseg_size"></a>
            <code class="literal">TCP_MAXSEG_SIZE</code>
          </p><a class="indexterm" name="idm45563222974528"></a><div class="informaltable"><a name="tcp_maxseg_size-tcp-table"></a><table frame="box" rules="all" summary="TCP_MAXSEG_SIZE TCP 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>unsigned</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>0</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 2G</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-tcp-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            TCP
            トランスポータの初期化時に設定されるメモリーのサイズを決定します。
            ほとんどの一般的な使用ケースでは、デフォルトが推奨されます。
          </p></li><li class="listitem"><p><a name="ndbparam-tcp-tcp_rcv_buf_size"></a>
            <code class="literal">TCP_RCV_BUF_SIZE</code>
          </p><a class="indexterm" name="idm45563222954880"></a><div class="informaltable"><a name="tcp_rcv_buf_size-tcp-table"></a><table frame="box" rules="all" summary="TCP_RCV_BUF_SIZE TCP 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>unsigned</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>0</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 2G</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-tcp-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            TCP
            トランスポータの初期化時に設定される受信バッファーのサイズを指定します。
            デフォルト値および最小値は 0
            で、オペレーティングシステムまたはプラットフォームでこの値を設定できます。
            ほとんどの一般的な使用ケースでは、デフォルトが推奨されます。
          </p></li><li class="listitem"><p><a name="ndbparam-tcp-tcp_snd_buf_size"></a>
            <code class="literal">TCP_SND_BUF_SIZE</code>
          </p><a class="indexterm" name="idm45563222935056"></a><div class="informaltable"><a name="tcp_snd_buf_size-tcp-table"></a><table frame="box" rules="all" summary="TCP_SND_BUF_SIZE TCP 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>unsigned</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>0</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 2G</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-tcp-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            TCP
            トランスポータの初期化時に設定される送信バッファーのサイズを指定します。
            デフォルト値および最小値は 0
            で、オペレーティングシステムまたはプラットフォームでこの値を設定できます。
            ほとんどの一般的な使用ケースでは、デフォルトが推奨されます。
          </p></li></ul></div><p><a name="mysql-cluster-tcp-definition-restart-types"></a><b>再起動のタイプ. </b>
          このセクションのパラメータの説明で使用される再起動タイプに関する情報を次のテーブルに示します:
        </p><div class="table"><a name="idm45563222915200"></a><p class="title"><b>表 23.21 NDB Cluster の再起動タイプ</b></p><div class="table-contents"><table><col style="width: 10%"><col style="width: 30%"><col style="width: 60%"><thead><tr>
            <th scope="col">シンボル</th>
            <th scope="col">再起動タイプ</th>
            <th scope="col">説明</th>
          </tr></thead><tbody><tr>
            <th scope="row">N</th>
            <td>ノード</td>
            <td>パラメータはローリング再起動を使用して更新できます
              (<a class="xref" href="mysql-cluster.html#mysql-cluster-rolling-restart" title="23.5.5 NDB Cluster のローリング再起動の実行">セクション23.5.5「NDB Cluster のローリング再起動の実行」</a>
              を参照)</td>
          </tr><tr>
            <th scope="row">S</th>
            <td>システム</td>
            <td>このパラメータの変更を有効にするには、すべてのクラスタノードを完全に停止してから再起動する必要があります</td>
          </tr><tr>
            <th scope="row">I</th>
            <td>Initial</td>
            <td><code class="option">--initial</code>
              オプションを使用してデータノードを再起動する必要があります</td>
          </tr></tbody></table></div></div><br class="table-break"></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-tcp-definition-direct"></a>23.3.3.11 直接接続を使用した NDB Cluster TCP/IP 接続</h4></div></div></div><a class="indexterm" name="idm45563222894656"></a><a class="indexterm" name="idm45563222892528"></a><a class="indexterm" name="idm45563222889920"></a><p>
        データノード間の直接接続を使用するクラスタをセットアップするには、クラスタの
        <code class="filename">config.ini</code> ファイルの
        <code class="literal">[tcp]</code>
        セクションに、そのように接続されるデータノードのクロスオーバー
        IP
        アドレスを明示的に指定する必要があります。
      </p><p>
        次の例では、少なくとも 4 台
        (管理サーバー、SQL ノード、および 2
        つのデータノード用に 1 台ずつ)
        のホストを含むクラスタについて考えます。
        クラスタ全体が LAN の <code class="literal">172.23.72.*</code>
        サブネットに配置されています。
        次に示すように、通常のネットワーク接続に加えて、2
        つのデータノードが標準のクロスオーバーケーブルにより直接接続されており、<code class="literal">1.1.0.*</code>
        アドレス範囲内の IP
        アドレスを使用して相互に直接通信します。
      </p><pre class="programlisting"># Management Server
[ndb_mgmd]
Id=1
HostName=172.23.72.20

# SQL Node
[mysqld]
Id=2
HostName=172.23.72.21

# Data Nodes
[ndbd]
Id=3
HostName=172.23.72.22

[ndbd]
Id=4
HostName=172.23.72.23

# TCP/IP Connections
[tcp]
NodeId1=3
NodeId2=4
HostName1=1.1.0.1
HostName2=1.1.0.2
</pre><p>
        <code class="literal">HostName1</code> および
        <code class="literal">HostName2</code>
        パラメータは、直接接続を指定するときにのみ使用されます。
      </p><p>
        データノード間の直接 TCP
        接続を使用すると、データノードがスイッチ、ハブ、ルーターなどの
        Ethernet
        デバイスをバイパスできるようになり、クラスタの待機時間が減るため、クラスタ全体の効率が向上する可能性があります。
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
          2
          つ以上のデータノードでこの方法で直接接続を最大限に活用するには、各データノードと同じノードグループ内の他のすべてのデータノードとの間に直接接続が必要です。
        </p></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-shm-definition"></a>23.3.3.12 NDB Cluster の共有メモリー接続</h4></div></div></div><a class="indexterm" name="idm45563222874784"></a><a class="indexterm" name="idm45563222872656"></a><a class="indexterm" name="idm45563222870848"></a><a class="indexterm" name="idm45563222868768"></a><p>
        NDB クラスタノード間の通信は通常、TCP/IP
        を使用して処理されます。 共有メモリー (SHM)
        トランスポータは、ソケット上ではなくメモリー内に書き込むことによってシグナルが送信されるという事実によって区別されます。
        共有メモリートランスポータ (SHM)
        は、同じホスト上で API ノード (通常は SQL
        ノード)
        とデータノードを同時に実行するときに TCP
        接続に必要なオーバーヘッドの最大 20%
        を軽減することで、パフォーマンスを向上させることができます。
        共有メモリー接続は、次の 2
        つの方法のいずれかで有効にできます:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">UseShm</code>
            データノード構成パラメータを
            <code class="literal">1</code> に設定し、データノードには
            <code class="literal">HostName</code>、API
            ノードには
            <code class="literal">HostName</code>
            を同じ値に設定します。
          </p></li><li class="listitem"><p>
            クラスタ構成ファイルの<code class="literal">[shm]</code>セクションを使用することで、それぞれに
            <code class="literal">NodeId1</code> および
            <code class="literal">NodeId2</code>
            の設定が含まれます。
            このメソッドの詳細は、このセクションの後半で説明します。
          </p></li></ul></div><p>
        クラスタが、ノード ID 1
        を持つデータノードと、10.0.0.1
        の同じホストコンピュータ上にノード ID 51
        を持つ SQL ノードを実行しているとします。
        これら 2 つのノード間の SHM
        接続を有効にするには、次のエントリがクラスタ構成ファイルに含まれていることを確認する必要があります:
      </p><pre class="programlisting">[ndbd]
NodeId=1
HostName=10.0.0.1
UseShm=1

[mysqld]
NodeId=51
HostName=10.0.0.1
</pre><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">重要</div><p>
          ここで示した 2
          つのエントリは、クラスタで必要な他のエントリおよびパラメータ設定に追加されています。
          より完全な例は、このセクションの後半で示します。
        </p></div><p>
        SHM
        接続を使用するデータノードを起動する前に、そのようなデータノードをホストする各コンピュータ上のオペレーティングシステムに、共有メモリーセグメントに十分なメモリーが割り当てられていることも確認する必要があります。
        詳細は、ご使用のオペレーティングプラットフォームのドキュメントを参照してください。
        複数のホストがそれぞれデータノードと API
        ノードを実行している設定では、構成ファイルの<code class="literal">[ndbd
        default]</code>セクションで <code class="literal">UseShm</code>
        を設定することによって、このようなすべてのホストで共有メモリーを有効にできます。
        これをこのセクションの後半の例に示します。
      </p><p>
        厳密には必要ありませんが、クラスタ構成
        (<code class="filename">config.ini</code>) ファイルの<code class="literal">[shm
        default]</code>セクションで次のパラメータのいずれかまたは複数を設定することで、クラスタ内のすべての
        SHM 接続のチューニングを実行できます:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">ShmSize</code> :
            共有メモリーサイズ
          </p></li><li class="listitem"><p>
            <code class="literal">ShmSpinTime</code> :
            スリープ前にスピンする時間 (秒)
          </p></li><li class="listitem"><p>
            <code class="literal">SendBufferMemory</code> :
            このノードから送信されたシグナルのバッファサイズ
            (バイト単位)。
          </p></li><li class="listitem"><p>
            <code class="literal">SendSignalId</code> :
            トランスポータを介して送信される各シグナルにシグナル
            ID が含まれていることを示します。
          </p></li><li class="listitem"><p>
            <code class="literal">Checksum</code> :
            トランスポータを介して送信される各シグナルにチェックサムが含まれることを示します。
          </p></li><li class="listitem"><p>
            <code class="literal">PreSendChecksum</code> :
            チェックサムのチェックはシグナルの送信前に行われます。これが機能するにはチェックサムも有効にする必要があります
          </p></li></ul></div><p>
        この例は、NDB Cluster 内の複数のホストに SHM
        接続が定義されている単純な設定を示しています。ここにリストされている
        3
        台のコンピュータをホスト名別に使用し、示されているノードタイプをホストします:
      </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
            <code class="literal">10.0.0.0</code>: 管理サーバー
          </p></li><li class="listitem"><p>
            <code class="literal">10.0.0.1</code>: データノードと SQL
            ノード
          </p></li><li class="listitem"><p>
            <code class="literal">10.0.0.2</code>: データノードと SQL
            ノード
          </p></li></ol></div><p>
        このシナリオでは、各データノードは TCP
        トランスポータを使用して管理サーバーとほかのデータノードの両方と通信します。各
        SQL
        ノードは共有メモリートランスポータを使用してローカルのデータノードと通信し、TCP
        トランスポータを使用してリモートデータノードと通信します。
        この設定を反映する基本構成は、次に示す内容の
        config.ini ファイルによって有効になります:
      </p><pre class="programlisting">[ndbd default]
DataDir=<em class="replaceable"><code>/path/to/datadir</code></em>
UseShm=1

[shm default]
ShmSize=8M
ShmSpintime=200
SendBufferMemory=4M

[tcp default]
SendBufferMemory=8M

[ndb_mgmd]
NodeId=49
Hostname=10.0.0.0
DataDir=<em class="replaceable"><code>/path/to/datadir</code></em>

[ndbd]
NodeId=1
Hostname=10.0.0.1
DataDir=<em class="replaceable"><code>/path/to/datadir</code></em>

[ndbd]
NodeId=2
Hostname=10.0.0.2
DataDir=<em class="replaceable"><code>/path/to/datadir</code></em>

[mysqld]
NodeId=51
Hostname=10.0.0.1

[mysqld]
NodeId=52
Hostname=10.0.0.2

[api]
[api]
</pre><p>
        すべての共有メモリートランスポータに影響するパラメータは、<code class="literal">[shm
        default]</code>セクションで設定されます。これらは、1
        つ以上の<code class="literal">[shm]</code>セクションで接続ごとにオーバーライドできます。
        このような各セクションは、<code class="literal">NodeId1</code>
        および <code class="literal">NodeId2</code>
        を使用して特定の SHM
        接続に関連付ける必要があります。これらのパラメータに必要な値は、トランスポータによって接続された
        2 つのノードのノード ID です。
        <code class="literal">HostName1</code> および
        <code class="literal">HostName2</code>
        を使用してホスト名でノードを識別することもできますが、これらのパラメータは必須ではありません。
      </p><p>
        ホスト名が設定されていない API ノードは、TCP
        トランスポータを使用して、起動されたホストから独立したデータノードと通信します。構成ファイルの<code class="literal">[tcp
        default]</code>セクションで設定されたパラメータと値は、クラスタ内のすべての
        TCP トランスポータに適用されます。
      </p><p>
        最適なパフォーマンスを得るために、SHM
        トランスポータ
        (<code class="literal">ShmSpinTime</code>
        パラメータ)
        のスピン時間を定義できます。これは、<code class="literal">NDB</code>
        のデータノード受信側スレッドとポーリング所有者
        (受信スレッドまたはユーザースレッド)
        の両方に影響します。
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="ndbparam-shm-checksum"></a>
            <code class="literal">Checksum</code>
          </p><a class="indexterm" name="idm45563222809808"></a><div class="informaltable"><a name="checksum-shm-table"></a><table frame="box" rules="all" summary="Checksum 共有メモリー 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>boolean</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>true</td>
              </tr><tr>
                <th>範囲</th>
                <td>true, false</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-shm-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            このパラメータはブール
            (<code class="literal">Y</code>/<code class="literal">N</code>)
            パラメータであり、デフォルトで無効になっています。
            有効にすると、送信バッファーに配置される前にすべてのメッセージのチェックサムが計算されます。
          </p><p>
            この機能によって、送信バッファーで待機中のメッセージの破損が回避されます。
            これは、トランスポート時のデータ破損に対するチェックとしても機能します。
          </p></li><li class="listitem"><p><a name="ndbparam-shm-group"></a>
            <code class="literal">グループ</code>
          </p><a class="indexterm" name="idm45563222787856"></a><div class="informaltable"><a name="group-shm-table"></a><table frame="box" rules="all" summary="Group 共有メモリー 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>unsigned</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>35</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 200</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-shm-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            グループの近接度を決定します。小さい値は近いと解釈されます。
            ほとんどの場合、デフォルト値で十分です。
          </p></li><li class="listitem"><p><a name="ndbparam-shm-hostname1"></a>
            <code class="literal">HostName1</code>
          </p><a class="indexterm" name="idm45563222768560"></a><div class="informaltable"><a name="hostname1-shm-table"></a><table frame="box" rules="all" summary="HostName1 共有メモリー 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>name or IP address</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>[...]</td>
              </tr><tr>
                <th>範囲</th>
                <td>...</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-shm-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            <code class="literal">HostName1</code> および
            <code class="literal">HostName2</code>
            パラメータを使用すると、2
            つのノード間の特定の SHM
            接続で使用する特定のネットワークインタフェースを指定できます。
            これらのパラメータに使用する値は、ホスト名または
            IP アドレスです。
          </p></li><li class="listitem"><p><a name="ndbparam-shm-hostname2"></a>
            <code class="literal">HostName2</code>
          </p><a class="indexterm" name="idm45563222747328"></a><div class="informaltable"><a name="hostname2-shm-table"></a><table frame="box" rules="all" summary="HostName1 共有メモリー 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>name or IP address</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>[...]</td>
              </tr><tr>
                <th>範囲</th>
                <td>...</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-shm-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            <code class="literal">HostName1</code> および
            <code class="literal">HostName2</code>
            パラメータを使用すると、2
            つのノード間の特定の SHM
            接続で使用する特定のネットワークインタフェースを指定できます。
            これらのパラメータに使用する値は、ホスト名または
            IP アドレスです。
          </p></li><li class="listitem"><p><a name="ndbparam-shm-nodeid1"></a>
            <code class="literal">NodeId1</code>
          </p><a class="indexterm" name="idm45563222726144"></a><a class="indexterm" name="idm45563222724800"></a><div class="informaltable"><a name="nodeid1-shm-table"></a><table frame="box" rules="all" summary="NodeId1 共有メモリー 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>numeric</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>[none]</td>
              </tr><tr>
                <th>範囲</th>
                <td>1 - 255</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-shm-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            2
            つのノード間の接続を識別するには、各ノードのノード識別子を
            <code class="literal">NodeId1</code> および
            <code class="literal">NodeId2</code>
            として指定する必要があります。
          </p></li><li class="listitem"><p><a name="ndbparam-shm-nodeid2"></a>
            <code class="literal">NodeId2</code>
          </p><a class="indexterm" name="idm45563222703088"></a><a class="indexterm" name="idm45563222701744"></a><div class="informaltable"><a name="nodeid2-shm-table"></a><table frame="box" rules="all" summary="NodeId2 共有メモリー 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>numeric</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>[none]</td>
              </tr><tr>
                <th>範囲</th>
                <td>1 - 255</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-shm-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            2
            つのノード間の接続を識別するには、各ノードのノード識別子を
            <code class="literal">NodeId1</code> および
            <code class="literal">NodeId2</code>
            として指定する必要があります。
          </p></li><li class="listitem"><p><a name="ndbparam-shm-nodeidserver"></a>
            <code class="literal">NodeIdServer</code>
          </p><a class="indexterm" name="idm45563222679952"></a><div class="informaltable"><a name="nodeidserver-shm-table"></a><table frame="box" rules="all" summary="NodeIdServer 共有メモリー 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>numeric</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>[none]</td>
              </tr><tr>
                <th>範囲</th>
                <td>1 - 63</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-shm-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            共有メモリー接続のサーバー側を識別します。
            デフォルトでは、これはデータノードのノード
            ID です。
          </p></li><li class="listitem"><p><a name="ndbparam-shm-overloadlimit"></a>
            <code class="literal">OverloadLimit</code>
          </p><a class="indexterm" name="idm45563222660656"></a><div class="informaltable"><a name="overloadlimit-shm-table"></a><table frame="box" rules="all" summary="OverloadLimit 共有メモリー 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>bytes</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>0</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-shm-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            送信バッファーにこれより多くの未送信バイトがあるときは、接続が過負荷状態であるとみなされます。
            詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-config-send-buffers" title="23.3.3.14 NDB Cluster 送信バッファーパラメータの構成">セクション23.3.3.14「NDB Cluster 送信バッファーパラメータの構成」</a>および<a class="xref" href="mysql-cluster.html#mysql-cluster-ndbinfo-transporters" title="23.5.14.55 ndbinfo transporters テーブル">セクション23.5.14.55「ndbinfo transporters テーブル」</a>を参照してください。
          </p></li><li class="listitem"><p><a name="ndbparam-shm-presendchecksum"></a>
            <code class="literal">PreSendChecksum</code>
          </p><a class="indexterm" name="idm45563222639632"></a><div class="informaltable"><a name="presendchecksum-shm-table"></a><table frame="box" rules="all" summary="PreSendChecksum 共有メモリー 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>boolean</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>false</td>
              </tr><tr>
                <th>範囲</th>
                <td>true, false</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-shm-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td></td>
              </tr></tbody></table></div><p>
            このパラメータと
            <code class="literal">Checksum</code>
            の両方が有効になっている場合は、送信前チェックサムチェックを実行し、ノード間のすべての
            SHM
            シグナルにエラーがないかどうかを確認します。
            <code class="literal">Checksum</code>
            も有効になっていない場合は、何の効果もありません。
          </p></li><li class="listitem"><p><a name="ndbparam-shm-sendbuffermemory"></a>
            <code class="literal">SendBufferMemory</code>
          </p><a class="indexterm" name="idm45563222618272"></a><div class="informaltable"><a name="sendbuffermemory-shm-table"></a><table frame="box" rules="all" summary="SendBufferMemory 共有メモリー 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>integer</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>2M</td>
              </tr><tr>
                <th>範囲</th>
                <td>256K - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-shm-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            共有メモリー接続を使用してこのノードから送信されたシグナルの共有メモリーバッファのサイズ
            (バイト)。
          </p></li><li class="listitem"><p><a name="ndbparam-shm-sendsignalid"></a>
            <code class="literal">SendSignalId</code>
          </p><a class="indexterm" name="idm45563222599040"></a><div class="informaltable"><a name="sendsignalid-shm-table"></a><table frame="box" rules="all" summary="SendSignalId 共有メモリー 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>boolean</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>false</td>
              </tr><tr>
                <th>範囲</th>
                <td>true, false</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-shm-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            配信されたメッセージの経路をたどるには、各メッセージに一意の識別子を設定する必要があります。
            このパラメータを <code class="literal">Y</code>
            に設定すると、メッセージ ID
            もネットワーク経由で転送されるようになります。
            この機能は、製品ビルドではデフォルトで無効になっており、<code class="literal">-debug</code>
            ビルドで有効になります。
          </p></li><li class="listitem"><p><a name="ndbparam-shm-shmkey"></a>
            <code class="literal">ShmKey</code>
          </p><a class="indexterm" name="idm45563222577584"></a><div class="informaltable"><a name="shmkey-shm-table"></a><table frame="box" rules="all" summary="ShmKey 共有メモリー 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>unsigned</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>0</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-shm-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            共有メモリーセグメントを設定するときは、整数で表されるノード
            ID
            を使用して、通信に使用する共有メモリーセグメントを一意に識別します。
            デフォルト値はありません。
            <code class="literal">UseShm</code>
            が有効な場合、共有メモリーキーは
            <code class="literal">NDB</code>
            によって自動的に計算されます。
          </p></li><li class="listitem"><p><a name="ndbparam-shm-shmsize"></a>
            <code class="literal">ShmSize</code>
          </p><a class="indexterm" name="idm45563222555984"></a><div class="informaltable"><a name="shmsize-shm-table"></a><table frame="box" rules="all" summary="ShmSize 共有メモリー 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>bytes</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>4M</td>
              </tr><tr>
                <th>範囲</th>
                <td>64K - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-shm-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            各 SHM
            接続には、送信側と読み取り側でノード間のメッセージを配置する共有メモリーセグメントがあります。
            このセグメントのサイズは
            <code class="literal">ShmSize</code>
            で定義されます。 デフォルトの値は 4M
            バイトです。
          </p></li><li class="listitem"><p><a name="ndbparam-shm-shmspintime"></a>
            <code class="literal">ShmSpinTime</code>
          </p><a class="indexterm" name="idm45563222535104"></a><div class="informaltable"><a name="shmspintime-shm-table"></a><table frame="box" rules="all" summary="ShmSpinTime 共有メモリー 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>integer</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>0</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 2000</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-shm-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td></td>
              </tr></tbody></table></div><p>
            受信時にスリープ前に待機する時間
            (マイクロ秒)。
          </p></li><li class="listitem"><p><a name="ndbparam-shm-signum"></a>
            <code class="literal">SigNum</code>
          </p><a class="indexterm" name="idm45563222516144"></a><div class="informaltable"><a name="signum-shm-table"></a><table frame="box" rules="all" summary="Signum 共有メモリー 構成パラメータのタイプと値の情報"><col style="width: 50%"><col style="width: 50%"><tbody><tr>
                <th>バージョン (またはそれ以降)</th>
                <td>NDB 8.0.13</td>
              </tr><tr>
                <th>タイプまたは単位</th>
                <td>unsigned</td>
              </tr><tr>
                <th>デフォルト</th>
                <td>[...]</td>
              </tr><tr>
                <th>範囲</th>
                <td>0 - 4294967039 (0xFFFFFEFF)</td>
              </tr><tr>
                <th>非推奨</th>
                <td>Yes (in NDB 7.6)</td>
              </tr><tr>
                <th><a class="link" href="mysql-cluster.html#mysql-cluster-shm-definition-restart-types" title="再起動のタイプ">再起動タイプ</a></th>
                <td><p>
                    N (NDB 8.0.13)
                  </p></td>
              </tr></tbody></table></div><p>
            このパラメータは以前はオペレーティングシステムのシグナル番号をオーバーライドするために使用されていました。NDB
            8.0
            では使用されなくなり、その設定は無視されます。
          </p></li></ul></div><p><a name="mysql-cluster-shm-definition-restart-types"></a><b>再起動のタイプ. </b>
          このセクションのパラメータの説明で使用される再起動タイプに関する情報を次のテーブルに示します:
        </p><div class="table"><a name="idm45563222494048"></a><p class="title"><b>表 23.22 NDB Cluster の再起動タイプ</b></p><div class="table-contents"><table><col style="width: 10%"><col style="width: 30%"><col style="width: 60%"><thead><tr>
            <th scope="col">シンボル</th>
            <th scope="col">再起動タイプ</th>
            <th scope="col">説明</th>
          </tr></thead><tbody><tr>
            <th scope="row">N</th>
            <td>ノード</td>
            <td>パラメータはローリング再起動を使用して更新できます
              (<a class="xref" href="mysql-cluster.html#mysql-cluster-rolling-restart" title="23.5.5 NDB Cluster のローリング再起動の実行">セクション23.5.5「NDB Cluster のローリング再起動の実行」</a>
              を参照)</td>
          </tr><tr>
            <th scope="row">S</th>
            <td>システム</td>
            <td>このパラメータの変更を有効にするには、すべてのクラスタノードを完全に停止してから再起動する必要があります</td>
          </tr><tr>
            <th scope="row">I</th>
            <td>Initial</td>
            <td><code class="option">--initial</code>
              オプションを使用してデータノードを再起動する必要があります</td>
          </tr></tbody></table></div></div><br class="table-break"></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-data-node-memory-management"></a>23.3.3.13 データノードのメモリー管理</h4></div></div></div><p>
        データノードのすべてのメモリー割り当ては、ノードの起動時に実行されます。
        これにより、スワップメモリーを使用せずにデータノードを安定した方法で実行できるため、<code class="literal">NDB</code>
        を待機時間に依存する (リアルタイム)
        アプリケーションに使用できます。
        データノードの起動時には、次のタイプのメモリーが割り当てられます:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            データメモリー
          </p></li><li class="listitem"><p>
            共有グローバルメモリー
          </p></li><li class="listitem"><p>
            redo ログバッファ
          </p></li><li class="listitem"><p>
            ジョブバッファ
          </p></li><li class="listitem"><p>
            バッファの送信
          </p></li><li class="listitem"><p>
            ディスクデータレコードのページキャッシュ
          </p></li><li class="listitem"><p>
            スキーマトランザクションメモリー
          </p></li><li class="listitem"><p>
            トランザクションメモリー
          </p></li><li class="listitem"><p>
            undo ログバッファ
          </p></li><li class="listitem"><p>
            クエリーメモリー
          </p></li><li class="listitem"><p>
            ブロックオブジェクト
          </p></li><li class="listitem"><p>
            スキーマメモリー
          </p></li><li class="listitem"><p>
            ブロックデータ構造
          </p></li><li class="listitem"><p>
            ロング信号メモリ
          </p></li><li class="listitem"><p>
            共有メモリー通信バッファ
          </p></li></ul></div><p>
        ほとんどのデータノードのメモリーを規制する
        <code class="literal">NDB</code>
        メモリーマネージャーは、次のメモリーリソースを処理します:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            データメモリー
            (<code class="literal">DataMemory</code>)
          </p></li><li class="listitem"><p>
            redo ログバッファ
            (<code class="literal">RedoBuffer</code>)
          </p></li><li class="listitem"><p>
            ジョブバッファ
          </p></li><li class="listitem"><p>
            バッファの送信
            (<code class="literal">SendBufferMemory</code>,
            <code class="literal">TotalSendBufferMemory</code>,
            <code class="literal">ExtraSendBufferMemory</code>,
            <code class="literal">ReservedSendBufferMemory</code>)
          </p></li><li class="listitem"><p>
            ディスクデータレコードページキャッシュ
            (<code class="literal">DiskPageBufferMemory</code>、<code class="literal">DiskPageBufferEntries</code>)
          </p></li><li class="listitem"><p>
            トランザクションメモリー
            (<code class="literal">TransactionMemory</code>)
          </p></li><li class="listitem"><p>
            クエリーメモリー
          </p></li><li class="listitem"><p>
            ディスクアクセスレコード
          </p></li><li class="listitem"><p>
            ファイルバッファ
          </p></li></ul></div><p>
        これらの各リソースは、予約済メモリー領域と最大メモリー領域を使用して設定されます。
        予約済メモリー領域は、予約されているリソースでのみ使用でき、他のリソースと共有することはできません。特定のリソースは、そのリソースに許可されている最大メモリーを超えることはできません。
        最大メモリーがないリソースは、メモリーマネージャのすべての共有メモリーを使用するように拡張できます。
      </p><p>
        これらのリソースのグローバル共有メモリーのサイズは、<code class="literal">SharedGlobalMemory</code>
        構成パラメータによって制御されます
        (デフォルト) : 128 MB).
      </p><p>
        データメモリーは常に予約され、共有メモリーからメモリーを取得することはありません。
        これは、最大 16384 GB の
        <code class="literal">DataMemory</code>
        構成パラメータを使用して制御されます。
        <code class="literal">DataMemory</code>
        では、ハッシュインデックス (行当たり約 15
        バイト)、順序付けされたインデックス
        (インデックス当たり 10-12 バイト)
        および行ヘッダー (行当たり 16-32 バイト)
        を含むレコードが格納されます。
      </p><p>
        redo
        ログバッファも予約済メモリーのみを使用します。これは、LDM
        スレッドごとの redo
        ログバッファのサイズを設定する
        <code class="literal">RedoBuffer</code>
        構成パラメータによって制御されます。
        つまり、実際に使用されるメモリー量は、このパラメータの値にデータノード内の
        LDM スレッドの数を乗算した値になります。
      </p><p>
        ジョブバッファは予約済メモリーのみを使用します。このメモリーのサイズは、様々なタイプのスレッド数に基づいて
        <code class="literal">NDB</code>
        によって計算されます。
      </p><p>
        送信バッファーには予約された部分がありますが、共有グローバルメモリーの
        25% を追加で割り当てることもできます。
        送信バッファーの予約サイズは、次の 2
        つの手順で計算されます:
      </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
            <code class="literal">TotalSendBufferMemory</code>
            構成パラメータの値 (デフォルト値なし)
            またはデータノードへのすべての個々の接続で使用される個々の送信バッファーの合計を使用します。
            データノードは、ほかのすべてのデータノード、すべての
            API
            ノード、およびすべての管理ノードに接続されます。
            つまり、2 つのデータノード、2
            つの管理ノード、および 10 個の API
            ノードを持つクラスタでは、各データノードに
            13 個のノード接続があります。
            データノード接続の
            <code class="literal">SendBufferMemory</code>
            のデフォルト値は 2 MByte
            であるため、これは合計 26 MB になります。
          </p></li><li class="listitem"><p>
            送信バッファの予約済サイズの合計を取得するには、<code class="literal">ExtraSendBufferMemory</code>
            構成パラメータの値 (ある場合)
            (デフォルト値は
            0)。が前のステップで取得した値に追加されます。
          </p></li></ol></div><p>
        つまり、<code class="literal">TotalSendBufferMemory</code>
        が設定されている場合、送信バッファサイズは
        <code class="literal">TotalSendBufferMemory + ExtraSendBufferMemory</code>
        です。それ以外の場合、送信バッファのサイズは
        <code class="literal">([<em class="replaceable"><code>number of node
        connections</code></em>] * SendBufferMemory) +
        ExtraSendBufferMemory</code> と等しくなります。
      </p><p>
        ディスクデータレコードのページキャッシュは予約済リソースのみを使用します。このリソースのサイズは、<code class="literal">DiskPageBufferMemory</code>
        構成パラメータ (デフォルトは 64 MB)
        によって制御されます。 32 KB
        のディスクページエントリのメモリーも割り当てられます。これらの数は、<code class="literal">DiskPageBufferEntries</code>
        構成パラメータ (デフォルトは 10)
        によって決まります。
      </p><p>
        トランザクションメモリーには、<code class="literal">NDB</code>
        によって計算される予約部分があるか、NDB 8.0.19
        で導入された
        <code class="literal">TransactionMemory</code>
        構成パラメータを使用して明示的に設定されています
        (以前のリリースでは、この値は常に
        <code class="literal">NDB</code>
        によって計算されていました)。トランザクションメモリーでは、無制限の量の共有グローバルメモリーを使用することもできます。
        トランザクションメモリーは、トランザクション、スキャン、ロック、スキャンバッファおよびトリガー操作を処理するすべての操作リソースに使用されます。
        また、次のコミットによってデータメモリーに書き込まれる前に、テーブルの行も更新時に保持されます。
      </p><p>
        NDB 8.0.16
        以前では、操作レコードは、サイズが多数の構成パラメータによって制御されていた専用リソースを使用していました。
        NDB 8.0.17
        以降、これらはすべて共通トランザクションメモリーリソースから割り当てられ、グローバル共有メモリーのリソースを使用することもできます。
        NDB 8.0.19
        以降では、このリソースのサイズは単一の
        <code class="literal">TransactionMemory</code>
        構成パラメータを使用して制御できます。
      </p><p>
        undo
        ログバッファの予約済メモリーは、<code class="literal">InitialLogFileGroup</code>
        構成パラメータを使用して設定できます。 undo
        ログバッファが <code class="literal">CREATE LOGFILE
        GROUP</code> SQL
        ステートメントの一部として作成された場合、メモリーはトランザクションメモリーから取得されます。
      </p><p>
        ディスクデータリソースのメタデータに関連する多くのリソースには予約された部分もなく、共有グローバルメモリーのみが使用されます。
        したがって、共有グローバル共有メモリーは、送信バッファ、トランザクションメモリー間で共有されます。


        ディスクデータのメタデータ。
      </p><p>
        <code class="literal">TransactionMemory</code>
        が設定されていない場合、次のパラメータに基づいて計算されます:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">MaxNoOfConcurrentOperations</code>
          </p></li><li class="listitem"><p>
            <code class="literal">MaxNoOfConcurrentTransactions</code>
          </p></li><li class="listitem"><p>
            <code class="literal">MaxNoOfFiredTriggers</code>
          </p></li><li class="listitem"><p>
            <code class="literal">MaxNoOfLocalOperations</code>
          </p></li><li class="listitem"><p>
            <code class="literal">MaxNoOfConcurrentIndexOperations</code>
          </p></li><li class="listitem"><p>
            <code class="literal">MaxNoOfConcurrentScans</code>
          </p></li><li class="listitem"><p>
            <code class="literal">MaxNoOfLocalScans</code>
          </p></li><li class="listitem"><p>
            <code class="literal">BatchSizePerLocalScan</code>
          </p></li><li class="listitem"><p>
            <code class="literal">TransactionBufferMemory</code>
          </p></li></ul></div><p>
        <code class="literal">TransactionMemory</code>
        が明示的に設定されている場合、リストされている構成パラメータはメモリーサイズの計算に使用されません。
        また、パラメータ
        <code class="literal">MaxNoOfConcurrentIndexOperations</code>,
        <code class="literal">MaxNoOfFiredTriggers</code>,
        <code class="literal">MaxNoOfLocalOperations</code>
        および
        <code class="literal">MaxNoOfLocalScans</code> は
        <code class="literal">TransactionMemory</code>
        と互換性がなく、同時に設定することはできません。<code class="literal">TransactionMemory</code>
        が設定され、これら 4
        つのパラメータのいずれかが
        <code class="filename">config.ini</code>
        構成ファイルにも設定されている場合、管理サーバーは起動できません。
        これらの 4 つのパラメータは NDB 8.0.19
        で非推奨になりました。MySQL NDB Cluster
        の将来のリリースから削除される予定です。
      </p><p>
        トランザクションメモリーリソースに多数のメモリープールが含まれています。
        各メモリープールはオブジェクトタイプを表し、オブジェクトのセットを含みます。各プールには、起動時にプールに割り当てられた予約部分が含まれます。この予約済メモリーは共有グローバルメモリーに戻されません。
        予約済レコードは、高速取得のための単一レベルのみを持つデータ構造を使用して検出されます。つまり、各プール内の多数のレコードを予約する必要があります。
        各プール内の予約済レコードの数は、パフォーマンスおよび予約済メモリーの割当てにある程度影響しますが、通常、予約済サイズを明示的に設定するには、非常に高度なユースケースでのみ必要です。
      </p><p>
        プールの予約部分のサイズは、次の構成パラメータを設定することで制御できます:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">ReservedConcurrentIndexOperations</code>
          </p></li><li class="listitem"><p>
            <code class="literal">ReservedFiredTriggers</code>
          </p></li><li class="listitem"><p>
            <code class="literal">ReservedConcurrentOperations</code>
          </p></li><li class="listitem"><p>
            <code class="literal">ReservedLocalScans</code>
          </p></li><li class="listitem"><p>
            <code class="literal">ReservedConcurrentTransactions</code>
          </p></li><li class="listitem"><p>
            <code class="literal">ReservedConcurrentScans</code>
          </p></li><li class="listitem"><p>
            <code class="literal">ReservedTransactionBufferMemory</code>
          </p></li></ul></div><p>
        前述のパラメータが設定されていない場合、予約済の設定はトランザクションメモリーの
        25% です。
        予約レコードの数はデータノードごとです。これらのレコードは、各ノード上のそれらを処理するスレッド
        (LDM および TC スレッド) 間で分割されます。
        ほとんどの場合、<code class="literal">TransactionMemory</code>
        のみを設定し、プール内のレコード数をその値で制御できるようにするだけで十分です。
      </p><p>
        <code class="literal">MaxNoOfConcurrentScans</code>
        は、各 TC
        スレッドでアクティブにできる同時スキャンの数を制限します。
        これは、クラスタの過負荷から保護するために重要です。
      </p><p>
        <code class="literal">MaxNoOfConcurrentOperations</code>
        では、トランザクションの更新時に一度にアクティブにできる操作の数が制限されます。
        (単純読取りは、このパラメータの影響を受けません。)
        この数を制限する必要があるのは、ノード障害処理用にメモリーを事前に割り当てる必要があり、ノード障害が発生した場合に
        1 つの TC
        スレッドでアクティブな操作の最大数を処理するためにリソースを使用できる必要があるためです。
        すべてのノードで
        <code class="literal">MaxNoOfConcurrentOperations</code>
        を同じ数に設定する必要があります
        (これは、<code class="filename">config.ini</code>
        グローバル構成ファイルの<code class="literal">[ndbd
        default]</code>セクションで値を一度設定することで最も簡単に実行できます)。
        ローリング再起動を使用して値を増やすことはできますが
        (<a class="xref" href="mysql-cluster.html#mysql-cluster-rolling-restart" title="23.5.5 NDB Cluster のローリング再起動の実行">セクション23.5.5「NDB Cluster のローリング再起動の実行」</a>
        を参照)、ローリング再起動中にノード障害が発生する可能性があるため、この方法で値を減らすことは安全とはみなされません。
      </p><p>
        NDB Cluster
        内の単一トランザクションのサイズは、<code class="filename">MaxDMLOperationsPerTransaction</code>
        パラメータを使用して制限できます。
        これが設定されていない場合、TC
        スレッド当たりの同時操作の合計数が制限されるため、あるトランザクションのサイズは
        <code class="literal">MaxNoOfConcurrentOperations</code>
        によって制限されます。
      </p><p>
        スキーマメモリーサイズは、次の一連の構成パラメータによって制御されます:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">MaxNoOfSubscriptions</code>
          </p></li><li class="listitem"><p>
            <code class="literal">MaxNoOfSubscribers</code>
          </p></li><li class="listitem"><p>
            <code class="literal">MaxNoOfConcurrentSubOperations</code>
          </p></li><li class="listitem"><p>
            <code class="literal">MaxNoOfAttributes</code>
          </p></li><li class="listitem"><p>
            <code class="literal">MaxNoOfTables</code>
          </p></li><li class="listitem"><p>
            <code class="literal">MaxNoOfOrderedIndexes</code>
          </p></li><li class="listitem"><p>
            <code class="literal">MaxNoOfUniqueHashIndexes</code>
          </p></li><li class="listitem"><p>
            <code class="literal">MaxNoOfTriggers</code>
          </p></li></ul></div><p>
        各テーブルおよび各パーティション
        (およびそのフラグメントレプリカ)
        のパーティション数はスキーマメモリーで表す必要があるため、ノードの数と
        LDM
        スレッドの数もスキーマメモリーのサイズに大きく影響します。
      </p><p>
        また、他の多数のレコードが起動時に割り当てられます。
        これらは比較的小さいです。
        各スレッドの各ブロックには、メモリーを使用するブロックオブジェクトが含まれます。
        このメモリーサイズは、通常、ほかのデータノードメモリー構造に比べて非常に小さくなります。
      </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-config-send-buffers"></a>23.3.3.14 NDB Cluster 送信バッファーパラメータの構成</h4></div></div></div><p>
        <code class="literal">NDB</code>
        カーネルは、すべてのトランスポータが共有するプールからメモリーが動的に割り当てられる統合送信バッファーを採用します。
        これにより、送信バッファーのサイズを必要に応じて調整できます。
        統合された送信バッファーの構成は、次のパラメータを設定すると実現できます。
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><b>TotalSendBufferMemory. </b>
              このパラメータは、すべてのタイプの NDB
              Cluster
              ノードに対して設定できます。つまり、<code class="filename">config.ini</code>
              ファイルの<code class="literal">[ndbd]</code>、<code class="literal">[mgm]</code>、および<code class="literal">[api]</code>
              (または<code class="literal">[mysql]</code>)
              セクションで設定できます。
              これは、各ノードによって割り当てられ、すべての構成済みトランスポータ間での使用に設定されるメモリーの合計量
              (バイト単位) を表します。
              設定する場合、その最小は 256K
              バイト、最大は 4294967039 です。
            </p><p>
            既存の構成との下位互換性を確保するため、このパラメータのデフォルト値は、すべての構成済みトランスポータの最大送信バッファーサイズの合計にトランスポータあたり
            32K バイト (1 ページ)
            を加えた値になっています。
            最大は、次の表に示すように、トランスポータのタイプによって異なります。
          </p><div class="table"><a name="idm45563222319424"></a><p class="title"><b>表 23.23 最大送信バッファサイズのトランスポータタイプ</b></p><div class="table-contents"><table><col style="width: 30%"><col style="width: 70%"><thead><tr>
                <th>トランスポータ</th>
                <th>最大送信バッファーサイズ (バイト)</th>
              </tr></thead><tbody><tr>
                <td>TCP</td>
                <td><code class="literal">SendBufferMemory</code> (デフォルト
                  = 2M)</td>
              </tr><tr>
                <td>SHM</td>
                <td>20K</td>
              </tr></tbody></table></div></div><br class="table-break"><p>
            これにより、NDB Cluster 6.3
            以前の場合とほぼ同じ方法で、同じ量のメモリーを使用して既存の構成を機能させ、各トランスポータで使用可能なバッファースペースを送信できます。
            ただし、特定のトランスポータで使用されていないメモリーは、ほかのトランスポータでも使用できません。
          </p></li><li class="listitem"><p><b>OverloadLimit. </b>
              このパラメータは、<code class="literal">config.ini</code>
              ファイルの <code class="literal">[tcp]</code>
              セクションで使用され、接続が過負荷状態であるとみなされる前に送信バッファーに存在する未送信データの量
              (バイト単位) を表します。
              このような過負荷状態が発生すると、過負荷の接続に影響を与えるトランザクションが失敗し、過負荷のステータスが終了するまで次のエラーが発生します:
              NDB API エラー 1218 (<span class="errortext">Send Buffers overloaded
              in NDB kernel</span>)。 デフォルト値は 0
              です。その場合、特定の接続に対する実質的な過負荷の制限は
              <code class="literal">SendBufferMemory * 0.8</code>
              として計算されます。
              このパラメータの最大値は 4G です。
            </p></li><li class="listitem"><p><b>SendBufferMemory. </b>
              この値は、単一のトランスポータが
              <code class="literal">TotalSendBufferMemory</code>
              で指定されたプール全体から使用できるメモリー量に対する厳密な制限を表します。
              ただし、すべての構成済みトランスポータの
              <code class="literal">SendBufferMemory</code>
              の合計は、特定のノードに対して設定された
              <code class="literal">TotalSendBufferMemory</code>
              より大きくなることがあります。
              多数のノードが使用されているときは、すべてのトランスポータがメモリーの最大量を同時に必要としないかぎり、このような方法でメモリーが節約されます。
            </p></li></ul></div><p>
        <code class="literal">ndbinfo.transporters</code>
        テーブルを使用して、送信バッファのメモリー使用量を監視し、パフォーマンスに悪影響を与える可能性のある低速および過負荷状態を検出できます。
      </p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-cluster-interconnects"></a>23.3.4 NDB Cluster での高速インターコネクトの使用</h3></div></div></div><a class="indexterm" name="idm45563222293168"></a><a class="indexterm" name="idm45563222291040"></a><p>
      1996 年に <code class="literal">NDBCLUSTER</code>
      の設計の開始前に、並列データベースの構築で発生する主な問題の
      1
      つがネットワーク内のノード間の通信であることは認識されていました。
      このため、<code class="literal">NDBCLUSTER</code>
      は当初から複数の異なるデータトランスポートメカニズムを使用できるように設計されました。
      このマニュアルでは、このメカニズムに対し<span class="firstterm">トランスポータ</span>という用語を使用します。
    </p><p>
      NDB Cluster コードベースには、4
      つの異なるトランスポータが用意されています:
    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          <a class="xref" href="mysql-cluster.html#mysql-cluster-tcp-definition" title="23.3.3.10 NDB Cluster TCP/IP 接続">セクション23.3.3.10「NDB Cluster TCP/IP 接続」</a>で説明している
          <span class="emphasis"><em>100M ビット/秒またはギガビット Ethernet
          を使用した TCP/IP</em></span>。
        </p></li><li class="listitem"><p>
          <span class="emphasis"><em>ダイレクト (マシン間)
          TCP/IP</em></span>。このトランスポータは前の項目で示したものと同じ
          TCP/IP
          プロトコルを使用しますが、ハードウェアを異なる方法でセットアップする必要があり、構成方法も異なります。
          このため、NDB Cluster
          用の個別のトランスポートメカニズムとみなされます。
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-tcp-definition-direct" title="23.3.3.11 直接接続を使用した NDB Cluster TCP/IP 接続">セクション23.3.3.11「直接接続を使用した NDB Cluster TCP/IP 接続」</a>,を参照してください。
        </p></li><li class="listitem"><p>
          <span class="emphasis"><em>共有メモリー (SHM)</em></span>。 SHM
          の詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-shm-definition" title="23.3.3.12 NDB Cluster の共有メモリー接続">セクション23.3.3.12「NDB Cluster の共有メモリー接続」</a>を参照してください。
        </p></li><li class="listitem"><p>
          <a class="indexterm" name="idm45563222276880"></a>

          <a class="indexterm" name="idm45563222275392"></a>

          <span class="emphasis"><em>スケーラブルコヒーレントインタフェース
          (SCI)</em></span>。
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
            NDB Cluster で SCI
            トランスポータを使用するには、NDB 8.0
            で使用できない特殊なハードウェア、ソフトウェア、および
            MySQL バイナリが必要です。
          </p></div></li></ul></div><p>
      ほとんどのユーザーは現在、広く普及していることから、TCP/IP
      over Ethernet を採用しています。 TCP/IP は、NDB Cluster
      で使用するための最適なトランスポータでもあります。
    </p><p>
      使用されるトランスポータに関係なく、<code class="literal">NDB</code>
      は、すべてのタイプのデータ転送に利点があるため、できるだけ大きなチャンクを使用してデータノードプロセスとの通信を確実に実行しようとします。
    </p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-cluster-programs"></a>23.4 NDB Cluster プログラム</h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndbd">23.4.1 ndbd — NDB Cluster データノードデーモン</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndbinfo-select-all">23.4.2 ndbinfo_select_all — ndbinfo テーブルからの選択</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndbmtd">23.4.3 ndbmtd — NDB Cluster データノードデーモン (マルチスレッド)</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd">23.4.4 ndb_mgmd — NDB Cluster 管理サーバーデーモン</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-mgm">23.4.5 ndb_mgm — NDB Cluster 管理クライアント</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-blob-tool">23.4.6 ndb_blob_tool — NDB Cluster テーブルの BLOB および TEXT カラムのチェックおよび修復</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-config">23.4.7 ndb_config — NDB Cluster 構成情報の抽出</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-delete-all">23.4.8 ndb_delete_all — NDB テーブルからのすべての行の削除</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-desc">23.4.9 ndb_desc — NDB テーブルの表示</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-drop-index">23.4.10 ndb_drop_index — NDB テーブルからのインデックスの削除</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-drop-table">23.4.11 ndb_drop_table — NDB テーブルの削除</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-error-reporter">23.4.12 ndb_error_reporter — NDB エラーレポートユーティリティー</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-import">23.4.13 ndb_import — NDB への CSV データのインポート</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-index-stat">23.4.14 ndb_index_stat — NDB インデックス統計ユーティリティー</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-move-data">23.4.15 ndb_move_data — NDB データコピーユーティリティー</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-perror">23.4.16 ndb_perror — NDB エラーメッセージ情報の取得</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-print-backup-file">23.4.17 ndb_print_backup_file — NDB バックアップファイルの内容の出力</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-print-file">23.4.18 ndb_print_file — NDB ディスクデータファイル内容の出力</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-print-frag-file">23.4.19 ndb_print_frag_file — NDB フラグメントリストファイルの内容の出力</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-print-schema-file">23.4.20 ndb_print_schema_file — NDB スキーマファイル内容の出力</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-print-sys-file">23.4.21 ndb_print_sys_file — NDB システムファイル内容の出力</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-redo-log-reader">23.4.22 ndb_redo_log_reader — クラスタ redo ログの内容の確認および印刷</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-restore">23.4.23 ndb_restore — NDB Cluster バックアップの復元</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-select-all">23.4.24 ndb_select_all — NDB テーブルの行の出力</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-select-count">23.4.25 ndb_select_count — NDB テーブルの行数の出力</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-setup-py">23.4.26 ndb_setup.py — NDB Cluster 用ブラウザベースの Auto-Installer の起動 (非推奨)</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-show-tables">23.4.27 ndb_show_tables — NDB テーブルのリストの表示</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-size-pl">23.4.28 ndb_size.pl — NDBCLUSTER サイズ要件エスティメータ</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-top">23.4.29 ndb_top — NDB スレッドの CPU 使用率情報の表示</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndb-waiter">23.4.30 ndb_waiter — NDB Cluster が特定のステータスに達するまで待機</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-programs-ndbxfrm">23.4.31 ndbxfrm — NDB Cluster によって作成されたファイルの圧縮、圧縮解除、暗号化、および復号化</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-program-options-common">23.4.32 NDB Cluster プログラムに共通のオプション — NDB Cluster プログラムに共通のオプション</a></span></dt></dl></div><a class="indexterm" name="idm45563222265424"></a><a class="indexterm" name="idm45563222263280"></a><a class="indexterm" name="idm45563222261904"></a><a class="indexterm" name="idm45563222260496"></a><a class="indexterm" name="idm45563222259104"></a><a class="indexterm" name="idm45563222257680"></a><a class="indexterm" name="idm45563222256288"></a><a class="indexterm" name="idm45563222255056"></a><a class="indexterm" name="idm45563222253712"></a><a class="indexterm" name="idm45563222252368"></a><a class="indexterm" name="idm45563222251024"></a><a class="indexterm" name="idm45563222249680"></a><a class="indexterm" name="idm45563222248336"></a><a class="indexterm" name="idm45563222246992"></a><a class="indexterm" name="idm45563222245648"></a><a class="indexterm" name="idm45563222244304"></a><a class="indexterm" name="idm45563222242960"></a><a class="indexterm" name="idm45563222241616"></a><a class="indexterm" name="idm45563222240272"></a><a class="indexterm" name="idm45563222238928"></a><a class="indexterm" name="idm45563222237584"></a><a class="indexterm" name="idm45563222236240"></a><a class="indexterm" name="idm45563222234896"></a><a class="indexterm" name="idm45563222233552"></a><a class="indexterm" name="idm45563222232208"></a><a class="indexterm" name="idm45563222230864"></a><a class="indexterm" name="idm45563222229520"></a><a class="indexterm" name="idm45563222228176"></a><a class="indexterm" name="idm45563222226832"></a><a class="indexterm" name="idm45563222225488"></a><a class="indexterm" name="idm45563222224144"></a><a class="indexterm" name="idm45563222222800"></a><a class="indexterm" name="idm45563222221456"></a><a class="indexterm" name="idm45563222220112"></a><a class="indexterm" name="idm45563222218768"></a><a class="indexterm" name="idm45563222217424"></a><p>
    NDB Cluster
    を使用および管理するには、この章で説明するいくつかの特殊なプログラムが必要です。
    NDB Cluster
    内のこれらのプログラムの目的、プログラムの使用方法、および各プログラムで使用可能な起動オプションについて説明します。
  </p><p>
    これらのプログラムには、NDB Cluster
    データ、管理、および SQL ノードプロセス
    (<span class="command"><strong>ndbd</strong></span>, <span class="command"><strong>ndbmtd</strong></span>,
    <span class="command"><strong>ndb_mgmd</strong></span> および <span class="command"><strong>mysqld</strong></span>)
    と管理クライアント (<span class="command"><strong>ndb_mgm</strong></span>)
    が含まれます。
  </p><p>
    NDB Cluster Auto-Installer
    の起動に使用されるプログラム
    <span class="command"><strong>ndb_setup.py</strong></span> (現在は非推奨)
    に関する情報もこのセクションに含まれています。
    <a class="xref" href="mysql-cluster.html#mysql-cluster-programs-ndb-setup-py" title="23.4.26 ndb_setup.py — NDB Cluster 用ブラウザベースの Auto-Installer の起動 (非推奨)">セクション23.4.26「ndb_setup.py — NDB Cluster 用ブラウザベースの Auto-Installer の起動 (非推奨)」</a>
    にはコマンドラインクライアントに関する情報のみが含まれていることに注意してください。このプログラムによって生成された
    GUI インストーラを使用して NDB Cluster
    を構成および配備する方法については、<a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-install-auto.html" target="_top">The NDB Cluster Auto-Installer (NDB 7.5) (No longer supported)</a>
    を参照してください。
  </p><p>
    NDB Cluster プロセスとしての <span class="command"><strong>mysqld</strong></span>
    の使用については、<a class="xref" href="mysql-cluster.html#mysql-cluster-mysqld" title="23.5.9 NDB Cluster での MySQL Server の使用">セクション23.5.9「NDB Cluster での MySQL Server の使用」</a>
    を参照してください。
  </p><p>
    NDB Cluster ディストリビューションには、その他の
    <code class="literal">NDB</code>
    ユーティリティー、診断、およびサンプルプログラムが含まれています。
    これらには、<span class="command"><strong>ndb_restore</strong></span>、<span class="command"><strong>ndb_show_tables</strong></span>、および
    <span class="command"><strong>ndb_config</strong></span> が含まれます。
    これらのプログラムについてもこのセクションで説明します。
  </p><p>
    このセクションの最後の部分には、さまざまな NDB
    Cluster
    プログラムに共通のオプションのテーブルが含まれています。
  </p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-cluster-programs-ndbd"></a>23.4.1 ndbd — NDB Cluster データノードデーモン</h3></div></div></div><a class="indexterm" name="idm45563222198864"></a><a class="indexterm" name="idm45563222197648"></a><a class="indexterm" name="idm45563222195744"></a><a class="indexterm" name="idm45563222193728"></a><a class="indexterm" name="idm45563222192528"></a><p>
        <span class="command"><strong>ndbd</strong></span> は、NDB Cluster
        ストレージエンジンを使用してテーブル内のすべてのデータを処理するために使用されるプロセスです。
        これは、分散型トランザクションの処理、ノードのリカバリ、ディスクでのチェックポイントの実行、オンラインバックアップ、および関連するタスクをデータノードが行うことができるようにするプロセスです。
      </p><p>
        NDB Cluster では、一連の <span class="command"><strong>ndbd</strong></span>
        プロセスが連携してデータを処理します。
        これらのプロセスは、同じコンピュータ
        (ホスト)
        上または別個のコンピュータ上で実行できます。
        データノードと Cluster
        ホストの通信は詳細に構成できます。
      </p><a class="indexterm" name="idm45563222187264"></a><a class="indexterm" name="idm45563222185120"></a><a class="indexterm" name="idm45563222183088"></a><a class="indexterm" name="idm45563222181104"></a><p>
        次のテーブルに、NDB Cluster
        データノードプログラム <span class="command"><strong>ndbd</strong></span>
        に固有のコマンドオプションを示します。
        追加説明が表のあとにあります。 ほとんどの
        NDB Cluster プログラム (<span class="command"><strong>ndbd</strong></span> を含む)
        に共通のオプションについては、<a class="xref" href="mysql-cluster.html#mysql-cluster-program-options-common" title="23.4.32 NDB Cluster プログラムに共通のオプション — NDB Cluster プログラムに共通のオプション">セクション23.4.32「NDB Cluster プログラムに共通のオプション — NDB Cluster プログラムに共通のオプション」</a>
        を参照してください。
      </p><div class="table"><a name="mysql-cluster-ndbd-options-table"></a><p class="title"><b>表 23.24 プログラムで使用されるコマンドライン・オプション ndbd</b></p><div class="table-contents"><table frame="box" rules="all"><col style="width: 33%"><col style="width: 34%"><col style="width: 33%"><thead><tr>
            <th scope="col">形式</th>
            <th scope="col">説明</th>
            <th scope="col">追加、非推奨、または削除された</th>
          </tr></thead><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndbd_bind-address">--bind-address=name</a>
                </code>
              </p></th>
            <td>ローカルバインドアドレス</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndbd_connect-delay">--connect-delay=#</a>
                </code>
              </p></th>
            <td>管理サーバーへの接続を試行する間隔 (秒)。0
              は試行の間待機しないことを意味</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndbd_connect-retries">--connect-retries=#</a>
                </code>
              </p></th>
            <td>中止する前に接続を再試行する回数を設定します。0
              は 1
              回の試行のみを意味し、再試行は行われません</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndbd_connect-retry-delay">--connect-retry-delay=#</a>
                </code>
              </p></th>
            <td>管理サーバーへの接続を試行する間隔 (秒)。0
              は試行の間待機しないことを意味</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndbd_daemon">--daemon</a></code>,
              </p><p>
                <code class="option"> <a class="link" href="mysql-cluster.html#option_ndbd_daemon">-d</a>
                </code>
              </p></th>
            <td>ndbd をデーモンとして開始します
              (デフォルト)。オーバーライドするには
              --nodaemon を指定します</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndbd_foreground">--foreground</a>
                </code>
              </p></th>
            <td>ndbd
              をフォアグラウンドで実行します。デバッグのために提供されています
              (--nodaemon の意味を含みます)</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndbd_initial">--initial</a>
                </code>
              </p></th>
            <td>ndbd の初期起動
              (ファイルシステムのクリーンアップを含む)
              を実行します。このオプションを使用する前にドキュメントを参照してください</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndbd_initial-start">--initial-start</a>
                </code>
              </p></th>
            <td>部分的な初期起動を実行します (--nowait-nodes
              が必要です)</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndbd_install">--install[=name]</a>
                </code>
              </p></th>
            <td>データノードプロセスを Windows
              サービスとしてインストールするために使用します。他のプラットフォームには適用されません</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndbd_logbuffer-size">--logbuffer-size=#</a>
                </code>
              </p></th>
            <td>ログバッファのサイズを制御します。多くのログメッセージを生成してデバッグする場合に使用します。通常の操作にはデフォルトで十分です</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndbd_nodaemon">--nodaemon</a>
                </code>
              </p></th>
            <td>ndbd
              をデーモンとして開始しません。テストのために提供されています</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndbd_nostart">--nostart</a></code>,
              </p><p>
                <code class="option"> <a class="link" href="mysql-cluster.html#option_ndbd_nostart">-n</a>
                </code>
              </p></th>
            <td>ndbd をすぐに起動しないでください。ndbd
              はコマンドが ndb_mgm から起動するまで待機</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndbd_nowait-nodes">--nowait-nodes=list</a>
                </code>
              </p></th>
            <td>これらのデータノードが起動するまで待機しないでください
              (ノード ID
              のコンマ区切りリストを取ります)。--ndb-nodeid
              が必要です</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndbd_remove">--remove[=name]</a>
                </code>
              </p></th>
            <td>以前に Windows
              サービスとしてインストールされたデータノードプロセスを削除するために使用します。他のプラットフォームには適用されません</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndbd_verbose">--verbose</a></code>,
              </p><p>
                <code class="option"> <a class="link" href="mysql-cluster.html#option_ndbd_verbose">-v</a>
                </code>
              </p></th>
            <td>追加のデバッグ情報をノードログに書き込みます</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody></table></div></div><br class="table-break"><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
          これらのオプションはすべて、このプログラム
          (<span class="command"><strong>ndbmtd</strong></span>)
          のマルチスレッドバージョンにも適用され、このセクションで後者が発生した場合は常に、<span class="quote">「<span class="quote"><span class="command"><strong>ndbd</strong></span></span>」</span>
          のかわりに <span class="quote">「<span class="quote"><span class="command"><strong>ndbmtd</strong></span></span>」</span>
          を使用できます。
        </p></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="option_ndbd_bind-address"></a>
            <code class="option">--bind-address</code>
          </p><div class="informaltable"><table frame="box" rules="all" summary="Properties for bind-address"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--bind-address=name</code></td>
</tr><tr><th>型</th>
<td>文字列</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal"></code></td>
</tr></tbody></table></div><p>
            <span class="command"><strong>ndbd</strong></span>
            が特定のネットワークインタフェース
            (ホスト名または IP アドレス)
            にバインドされます。
            このオプションにはデフォルト値はありません。
          </p></li><li class="listitem"><p><a name="option_ndbd_connect-delay"></a>
            <code class="option">--connect-delay=<em class="replaceable"><code>#</code></em></code>
          </p><a class="indexterm" name="idm45563222060240"></a><a class="indexterm" name="idm45563222058192"></a><a class="indexterm" name="idm45563222055984"></a><a class="indexterm" name="idm45563222054000"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for connect-delay"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--connect-delay=#</code></td>
</tr><tr><th>非推奨</th>
<td>はい</td>
</tr><tr><th>型</th>
<td>数値</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">5</code></td>
</tr><tr><th>最小値</th>
<td><code class="literal">0</code></td>
</tr><tr><th>最大値</th>
<td><code class="literal">3600</code></td>
</tr></tbody></table></div><p>
            起動時に管理サーバーへの接続を試行する間隔を決定します
            (試行回数は
            <code class="option">--connect-retries</code>
            オプションによって制御されます)。
            デフォルトは 5 秒です。
          </p><p>
            このオプションは非推奨であり、NDB Cluster
            の将来のリリースで削除される可能性があります。
            かわりに
            <code class="option">--connect-retry-delay</code>
            を使用してください。
          </p></li><li class="listitem"><p><a name="option_ndbd_connect-retries"></a>
            <code class="option">--connect-retries=<em class="replaceable"><code>#</code></em></code>
          </p><a class="indexterm" name="idm45563222029840"></a><a class="indexterm" name="idm45563222027792"></a><a class="indexterm" name="idm45563222025584"></a><a class="indexterm" name="idm45563222023600"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for connect-retries"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--connect-retries=#</code></td>
</tr><tr><th>型</th>
<td>数値</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">12</code></td>
</tr><tr><th>最小値</th>
<td><code class="literal">0</code></td>
</tr><tr><th>最大値</th>
<td><code class="literal">65535</code></td>
</tr></tbody></table></div><p>
            中止する前に接続を再試行する回数を設定します。0
            は 1
            回の試行のみを意味し、再試行は行われません。
            デフォルトは 12 回の試行です。
            試行間の待機時間は、<code class="option">--connect-retry-delay</code>
            オプションによって制御されます。
          </p></li><li class="listitem"><p><a name="option_ndbd_connect-retry-delay"></a>
            <code class="option">--connect-retry-delay=<em class="replaceable"><code>#</code></em></code>
          </p><a class="indexterm" name="idm45563222002896"></a><a class="indexterm" name="idm45563222000848"></a><a class="indexterm" name="idm45563221998640"></a><a class="indexterm" name="idm45563221996656"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for connect-retry-delay"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--connect-retry-delay=#</code></td>
</tr><tr><th>型</th>
<td>数値</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">5</code></td>
</tr><tr><th>最小値</th>
<td><code class="literal">0</code></td>
</tr><tr><th>最大値</th>
<td><code class="literal">4294967295</code></td>
</tr></tbody></table></div><p>
            起動時に管理サーバーへの各接続試行の間に待機する時間を決定します
            (試行の間の時間は
            <code class="option">--connect-retries</code>
            オプションによって制御されます)。
            デフォルトは 5 秒です。
          </p><p>
            このオプションは
            <code class="option">--connect-delay</code>
            オプションの代わりに使用され、現在は非推奨であり、NDB
            Cluster
            の将来のリリースで削除される可能性があります。
          </p></li><li class="listitem"><p><a name="option_ndbd_daemon"></a>
            <code class="option">--daemon</code>、<code class="option">-d</code>
          </p><div class="informaltable"><table frame="box" rules="all" summary="Properties for daemon"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--daemon</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">TRUE</code></td>
</tr></tbody></table></div><p>
            <span class="command"><strong>ndbd</strong></span> または <span class="command"><strong>ndbmtd</strong></span>
            にデーモンプロセスとして実行するように指示します。
            これはデフォルトの動作です。<code class="option">--nodaemon</code>
            を使用すると、プロセスがデーモンとして実行されなくなります。
          </p><p>
            Windows プラットフォームで <span class="command"><strong>ndbd</strong></span>
            または <span class="command"><strong>ndbmtd</strong></span>
            を実行している場合、このオプションは効果がありません。
          </p></li><li class="listitem"><p><a name="option_ndbd_foreground"></a>
            <code class="option">--foreground</code>
          </p><div class="informaltable"><table frame="box" rules="all" summary="Properties for foreground"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--foreground</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table></div><p>
            主にデバッグのために、<span class="command"><strong>ndbd</strong></span>
            または <span class="command"><strong>ndbmtd</strong></span>
            がフォアグラウンドプロセスとして実行されます。
            このオプションは
            <code class="option">--nodaemon</code>
            オプションの意味を含みます。
          </p><p>
            Windows プラットフォームで <span class="command"><strong>ndbd</strong></span>
            または <span class="command"><strong>ndbmtd</strong></span>
            を実行している場合、このオプションは効果がありません。
          </p></li><li class="listitem"><p><a name="option_ndbd_initial"></a>
            <code class="option">--initial</code>
          </p><a class="indexterm" name="idm45563221940752"></a><a class="indexterm" name="idm45563221938704"></a><a class="indexterm" name="idm45563221936544"></a><a class="indexterm" name="idm45563221934608"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for initial"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--initial</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table></div><p>
            <span class="command"><strong>ndbd</strong></span>
            に初期起動を実行するように指示します。
            初期起動によって、以前の <span class="command"><strong>ndbd</strong></span>
            のインスタンスでリカバリのために作成されたファイルが消去されます。
            また、リカバリログファイルが再作成されます。
            一部のオペレーティングシステムでは、このプロセスにかなりの時間がかかる場合があります。
          </p><p>
            <code class="option">--initial</code>
            の起動は、非常に特殊な状況下で
            <span class="command"><strong>ndbd</strong></span>
            プロセスを起動するときに<span class="emphasis"><em>のみ</em></span>を使用します。これは、このオプションによって
            NDB Cluster
            ファイルシステムからすべてのファイルが削除され、すべての
            redo ログファイルが再作成されるためです。
            それらの状況を次に示します。
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                ファイルの内容が変更されたソフトウェアアップグレードを実行する場合。
              </p></li><li class="listitem"><p>
                新しいバージョンの <span class="command"><strong>ndbd</strong></span>
                でノードを再起動する場合。
              </p></li><li class="listitem"><p>
                何かの理由でノードまたはシステムの再起動が繰り返し失敗する場合の最後の手段として。
                この場合、データファイルが破壊されるため、このノードはデータのリストアに使用できなくなります。
              </p></li></ul></div><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">警告</div><p>
              最終的なデータ損失の可能性を回避するために、<code class="option">--initial</code>
              オプションを <code class="literal">StopOnError = 0</code>
              とともに使用しないことをお薦めします。
              かわりに、クラスタの起動後にのみ
              <code class="filename">config.ini</code> で
              <code class="literal">StopOnError</code> を 0
              に設定し、データノードを通常どおり
              (<code class="option">--initial</code> オプションなしで)
              再起動します。
              この問題の詳細は、<code class="literal">StopOnError</code>
              パラメータの説明を参照してください。
              (Bug #24945638)
            </p></div><p>
            このオプションを使用すると、<code class="literal">StartPartialTimeout</code>
            および
            <code class="literal">StartPartitionedTimeout</code>
            構成パラメータの効果がなくなります。
          </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">重要</div><p>
              このオプションは、影響を受けるノードによってすでに作成されているバックアップファイルには影響しません。
            </p><p>
              NDB 8.0.21 より前では、<code class="option">--initial</code>
              オプションもディスクデータファイルに影響を与えませんでした。
              NDB 8.0.21
              以降では、このオプションを使用してクラスタの初期再起動を実行すると、「ディスクデータ」テーブルスペースに関連付けられているすべてのデータファイルと、このデータノードに以前存在していたログファイルシステムに関連付けられているすべての
              Undo ログファイルが削除されます
              (<a class="xref" href="mysql-cluster.html#mysql-cluster-disk-data" title="23.5.10 NDB Cluster ディスクデータテーブル">セクション23.5.10「NDB Cluster ディスクデータテーブル」</a> を参照)。
            </p><p>
              このオプションは、すでに実行されているデータノードから起動
              (または再起動)
              しているデータノードによるデータの回復にも影響しません
              (初期再起動の一環として
              <code class="option">--initial</code>
              でも起動された場合を除く)。
              このデータの回復は自動的に行われ、正常に実行されている
              NDB Cluster
              でのユーザーの介入は必要ありません。
            </p></div><p>
            クラスタを最初に起動するとき
            (つまり、データノードファイルが作成される前)
            にこのオプションを使用することはできますが、そうする必要は<span class="emphasis"><em>ありません</em></span>。
          </p></li><li class="listitem"><p><a name="option_ndbd_initial-start"></a>
            <code class="option">--initial-start</code>
          </p><a class="indexterm" name="idm45563221895248"></a><a class="indexterm" name="idm45563221893200"></a><a class="indexterm" name="idm45563221890992"></a><a class="indexterm" name="idm45563221889008"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for initial-start"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--initial-start</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table></div><p>
            このオプションは、クラスタを部分的に初期起動するときに使用します。
            各ノードは、このオプションおよび
            <code class="option">--nowait-nodes</code>
            を指定して起動してください。
          </p><p>
            データノードの ID が 2、3、4、および 5
            である 4 ノードクラスタがあり、ノード
            2、4、および 5 のみを使用して
            (つまり、ノード 3 を除外して)
            部分的に初期起動を実行するとします。
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>ndbd --ndb-nodeid=2 --nowait-nodes=3 --initial-start</code></strong>
shell&gt; <strong class="userinput"><code>ndbd --ndb-nodeid=4 --nowait-nodes=3 --initial-start</code></strong>
shell&gt; <strong class="userinput"><code>ndbd --ndb-nodeid=5 --nowait-nodes=3 --initial-start</code></strong>
</pre><p>
            このオプションを使用する場合は、<code class="option">--ndb-nodeid</code>
            オプションを指定して起動するデータノードのノード
            ID も指定する必要があります。
          </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">重要</div><p>
              複数の管理サーバーで構成されたクラスタをすべての管理サーバーがオンラインでなくても起動できるようにするために使用できる
              <span class="command"><strong>ndb_mgmd</strong></span> の
              <code class="option">--nowait-nodes</code>
              オプションとこのオプションを混同しないでください。
            </p></div></li><li class="listitem"><p><a name="option_ndbd_install"></a>
            <code class="option">--install[=<em class="replaceable"><code>name</code></em>]</code>
          </p><a class="indexterm" name="idm45563221864672"></a><a class="indexterm" name="idm45563221862608"></a><a class="indexterm" name="idm45563221860432"></a><a class="indexterm" name="idm45563221858480"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for install"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--install[=name]</code></td>
</tr><tr><th>プラットフォーム固有</th>
<td>Windows</td>
</tr><tr><th>型</th>
<td>文字列</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">ndbd</code></td>
</tr></tbody></table></div><p>
            <span class="command"><strong>ndbd</strong></span> が Windows
            サービスとしてインストールされます。
            必要に応じて、サービス名を指定できます。設定しない場合、サービス名は
            <code class="literal">ndbd</code>
            にデフォルト設定されます。 ほかの
            <span class="command"><strong>ndbd</strong></span> プログラムオプションは
            <code class="filename">my.ini</code> または
            <code class="filename">my.cnf</code>
            構成ファイルに指定することが推奨されますが、<code class="option">--install</code>
            と一緒に使用できます。
            ただし、そのような場合、Windows
            サービスのインストールが成功するには、<code class="option">--install</code>
            オプションを最初に指定してから、ほかのオプションを指定する必要があります。
          </p><p>
            一般的に、このオプションを
            <code class="option">--initial</code>
            オプションと一緒に使用することはお勧めしません。それにより、サービスが停止および開始されるたびにデータノードファイルシステムが消去および再作成されるためです。
            データノードの起動に影響するほかの
            <span class="command"><strong>ndbd</strong></span> オプション
            (<code class="option">--initial-start</code>、<code class="option">--nostart</code>、および
            <code class="option">--nowait-nodes</code> を含む) を
            <code class="option">--install</code>
            と一緒に使用する場合は、それを行うことを十分に理解し、起こり得る結果に対して十分に準備していることをしっかりと確認してください。
          </p><p>
            <code class="option">--install</code>
            オプションは、Windows
            以外のプラットフォームでは効果がありません。
          </p></li><li class="listitem"><p><a name="option_ndbd_logbuffer-size"></a>
            <code class="option">--logbuffer-size=<em class="replaceable"><code>#</code></em></code>
          </p><a class="indexterm" name="idm45563221828816"></a><a class="indexterm" name="idm45563221826768"></a><a class="indexterm" name="idm45563221824560"></a><a class="indexterm" name="idm45563221822576"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for logbuffer-size"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--logbuffer-size=#</code></td>
</tr><tr><th>型</th>
<td>Integer</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">32768</code></td>
</tr><tr><th>最小値</th>
<td><code class="literal">2048</code></td>
</tr><tr><th>最大値</th>
<td><code class="literal">4294967295</code></td>
</tr></tbody></table></div><p>
            データノードのログバッファーのサイズを設定します。
            大量の追加ロギングを使用してデバッグする場合、ログメッセージが多すぎると、ログバッファの領域が不足する可能性があります。この場合、一部のログメッセージが失われる可能性があります。
            これは、通常の操作中には発生しません。
          </p></li><li class="listitem"><p><a name="option_ndbd_nodaemon"></a>
            <code class="option">--nodaemon</code>
          </p><div class="informaltable"><table frame="box" rules="all" summary="Properties for nodaemon"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--nodaemon</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table></div><p>
            <span class="command"><strong>ndbd</strong></span> または <span class="command"><strong>ndbmtd</strong></span>
            がデーモンプロセスとして実行されなくなります。
            このオプションは
            <code class="option">--daemon</code>
            オプションをオーバーライドします。
            これは、バイナリをデバッグするときに、出力を画面にリダイレクトする場合に便利です。
          </p><p>
            Windows での <span class="command"><strong>ndbd</strong></span> および
            <span class="command"><strong>ndbmtd</strong></span>
            のデフォルト動作はフォアグラウンドでの実行であり、Windows
            プラットフォームではこのオプションは効果がなく、必要ありません。
          </p></li><li class="listitem"><p><a name="option_ndbd_nostart"></a>
            <code class="option">--nostart</code>, <code class="option">-n</code>
          </p><a class="indexterm" name="idm45563221785376"></a><a class="indexterm" name="idm45563221783312"></a><a class="indexterm" name="idm45563221781136"></a><a class="indexterm" name="idm45563221779200"></a><a class="indexterm" name="idm45563221777040"></a><a class="indexterm" name="idm45563221775088"></a><a class="indexterm" name="idm45563221772912"></a><a class="indexterm" name="idm45563221770976"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for nostart"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--nostart</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table></div><p>
            <span class="command"><strong>ndbd</strong></span>
            に自動的に起動しないように指示します。
            このオプションを使用すると、<span class="command"><strong>ndbd</strong></span>
            は管理サーバーに接続してそこから構成データを取得し、通信オブジェクトを初期化します。
            ただし、管理サーバーによってそうするように明示的に要求されるまで、実行エンジンを実際に起動しません。
            これは、管理クライアントで適切な
            <code class="literal">START</code>
            コマンドを発行することによって実現されます
            (<a class="xref" href="mysql-cluster.html#mysql-cluster-mgm-client-commands" title="23.5.1 NDB Cluster 管理クライアントのコマンド">セクション23.5.1「NDB Cluster 管理クライアントのコマンド」</a>を参照してください)。
          </p></li><li class="listitem"><p><a name="option_ndbd_nowait-nodes"></a>
            <code class="option">--nowait-nodes=<em class="replaceable"><code>node_id_1</code></em>[,
            <em class="replaceable"><code>node_id_2</code></em>[, ...]]</code>
          </p><a class="indexterm" name="idm45563221751776"></a><a class="indexterm" name="idm45563221749728"></a><a class="indexterm" name="idm45563221747520"></a><a class="indexterm" name="idm45563221745536"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for nowait-nodes"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--nowait-nodes=list</code></td>
</tr><tr><th>型</th>
<td>文字列</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal"></code></td>
</tr></tbody></table></div><p>
            このオプションは、起動前にクラスタが待機しないデータノードのリストを取ります。
          </p><p>
            これは、パーティション化された状態のクラスタを起動するために使用できます。
            たとえば、4
            ノードクラスタで実行されているデータノード
            (ノード 2、3、4、および 5)
            の半分のデータノードのみでクラスタを起動するには、<code class="option">--nowait-nodes=3,5</code>
            を指定して各 <span class="command"><strong>ndbd</strong></span>
            プロセスを開始します。
            この場合、クラスタはノード 2 およびノード
            4 が接続するとすぐに起動し、ノード 3
            およびノード 5 が接続するのを
            (接続していない場合)
            <code class="literal">StartPartitionedTimeout</code>
            ミリ秒間待機<span class="emphasis"><em>しません</em></span>。
          </p><p>
            前の例と同じクラスタを 1 つの
            <span class="command"><strong>ndbd</strong></span> を除外して起動する場合
            (たとえば、ノード 3
            のホストマシンでハードウェアの障害が発生している場合)
            は、<code class="option">--nowait-nodes=3</code>
            を指定してノード 2、4、および 5 を
            起動します。 その後、ノード 2、4 および 5
            が接続されるとすぐにクラスタが起動し、ノード
            3 が起動するのを待機しません。
          </p></li><li class="listitem"><p><a name="option_ndbd_remove"></a>
            <code class="option">--remove[=<em class="replaceable"><code>name</code></em>]</code>
          </p><a class="indexterm" name="idm45563221723680"></a><a class="indexterm" name="idm45563221721616"></a><a class="indexterm" name="idm45563221719440"></a><a class="indexterm" name="idm45563221717488"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for remove"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--remove[=name]</code></td>
</tr><tr><th>プラットフォーム固有</th>
<td>Windows</td>
</tr><tr><th>型</th>
<td>文字列</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">ndbd</code></td>
</tr></tbody></table></div><p>
            以前に Windows
            サービスとしてインストールされた
            <span class="command"><strong>ndbd</strong></span> プロセスを削除します。
            必要に応じて、アンインストールするサービスの名前を指定できます。設定しない場合、サービス名は
            <code class="literal">ndbd</code>
            にデフォルト設定されます。
          </p><p>
            <code class="option">--remove</code>
            オプションは、Windows
            以外のプラットフォームでは効果がありません。
          </p></li><li class="listitem"><p><a name="option_ndbd_verbose"></a>
            <code class="option">--verbose</code>, <code class="option">-v</code>
          </p><a class="indexterm" name="idm45563221697472"></a><a class="indexterm" name="idm45563221695408"></a><a class="indexterm" name="idm45563221693232"></a><a class="indexterm" name="idm45563221691280"></a><p>
            追加のデバッグ出力がノードログに書き込まれます。
          </p><p>
            <code class="literal">NODELOG DEBUG ON</code>
            および <code class="literal">NODELOG DEBUG
            OFF</code>
            を使用して、データノードの実行中にこの追加ロギングを有効または無効にすることもできます。
          </p></li></ul></div><a class="indexterm" name="idm45563221685648"></a><a class="indexterm" name="idm45563221683504"></a><p>
        <span class="command"><strong>ndbd</strong></span> は、<code class="filename">config.ini</code>
        構成ファイルの
        <code class="literal">DataDir</code>
        で指定されているディレクトリに配置される一連のログファイルを生成します。
      </p><p>
        これらのログファイルを次に示します。<em class="replaceable"><code>node_id</code></em>
        は、ノードの一意の識別子です。
        たとえば、<code class="filename">ndb_2_error.log</code> はノード
        ID が <code class="literal">2</code>
        のデータノードによって生成されたエラーログです。
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <a class="indexterm" name="idm45563221675616"></a>

            <a class="indexterm" name="idm45563221673472"></a>

            <code class="filename">ndb_<em class="replaceable"><code>node_id</code></em>_error.log</code>
            は、参照先の <span class="command"><strong>ndbd</strong></span>
            プロセスで発生したすべてのクラッシュのレコードを含むファイルです。
            このファイルの各レコードには、簡単なエラー文字列、およびこのクラッシュのトレースファイルへの参照が含まれています。
            このファイルの一般的なエントリを次に示します。
          </p><pre class="programlisting">Date/Time: Saturday 30 July 2004 - 00:20:01
Type of error: error
Message: Internal program error (failed ndbrequire)
Fault ID: 2341
Problem data: DbtupFixAlloc.cpp
Object of reference: DBTUP (Line: 173)
ProgramName: NDB Kernel
ProcessID: 14909
TraceFile: ndb_2_trace.log.2
***EOM***
</pre><p>
            データノードプロセスが予期せずに停止されたときに生成される可能性がある
            <span class="command"><strong>ndbd</strong></span>
            の終了コードおよびメッセージのリストは、<a class="ulink" href="https://dev.mysql.com/doc/ndb-internals/en/ndb-node-error-messages.html" target="_top">Data Node Error Messages</a>にあります。
          </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">重要</div><p>
              <span class="emphasis"><em>このエラーログファイルの最後のエントリが最新のエントリであるとはかぎりません</em></span>
              (その可能性もあまりありません)。
              このエラーログのエントリは、時系列順で一覧<span class="emphasis"><em>されず</em></span>、<code class="filename">ndb_<em class="replaceable"><code>node_id</code></em>_trace.log.next</code>
              ファイル (次を参照してください)
              で決定されるトレースファイルの順序に対応しています。
              エラーログのエントリは、このように循環的に上書きされ、順次的ではありません。
            </p></div></li><li class="listitem"><p>
            <a class="indexterm" name="idm45563221661584"></a>

            <a class="indexterm" name="idm45563221659408"></a>

            <code class="filename">ndb_<em class="replaceable"><code>node_id</code></em>_trace.log.<em class="replaceable"><code>trace_id</code></em></code>
            は、エラーが発生する直前に発生した内容を正確に記述したトレースファイルです。
            この情報は、NDB Cluster
            開発チームによる分析に役立ちます。
          </p><p>
            古いファイルが上書きされる前に作成されるこれらのトレースファイルの数を構成できます。<em class="replaceable"><code>trace_id</code></em>
            は、連続するトレースファイルごとに増分される数値です。
          </p></li><li class="listitem"><p>
            <code class="filename">ndb_<em class="replaceable"><code>node_id</code></em>_trace.log.next</code>
            は、割り当てられる次のトレースファイル番号を追跡するファイルです。
          </p></li><li class="listitem"><p>
            <code class="filename">ndb_<em class="replaceable"><code>node_id</code></em>_out.log</code>
            は、<span class="command"><strong>ndbd</strong></span>
            プロセスによるデータ出力が含まれているファイルです。
            このファイルは、<span class="command"><strong>ndbd</strong></span>
            がデーモンとして開始された
            (デフォルトの動作)
            場合にのみ作成されます。
          </p></li><li class="listitem"><p>
            <code class="filename">ndb_<em class="replaceable"><code>node_id</code></em>.pid</code>
            には、<span class="command"><strong>ndbd</strong></span>
            プロセスがデーモンとして開始された場合のプロセス
            ID が含まれています。
            これは、同じ識別子でノードが起動されるのを防ぐためのロックファイルとしても機能します。
          </p></li><li class="listitem"><p>
            <code class="filename">ndb_<em class="replaceable"><code>node_id</code></em>_signal.log</code>
            は、<span class="command"><strong>ndbd</strong></span>
            のデバッグバージョンでのみ使用されるファイルであり、<span class="command"><strong>ndbd</strong></span>
            プロセスのそれらのデータのすべての受信、送信、および内部メッセージをトレースできます。
          </p></li></ul></div><p>
        NFS
        を使用してマウントしたディレクトリは使用しないことをお勧めします。一部の環境では、プロセスが終了しても
        <code class="filename">.pid</code>
        ファイルに対するロックが有効なままとなる問題が発生することがあるためです。
      </p><p>
        <span class="command"><strong>ndbd</strong></span>
        を開始する場合、管理サーバーのホスト名およびそれが待機するポートも指定する必要があることがあります。
        必要に応じて、プロセスが使用するノード ID
        を指定することもできます。
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>ndbd --connect-string="nodeid=2;host=ndb_mgmd.mysql.com:1186"</code></strong>
</pre><p>
        これについての詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-connection-strings" title="23.3.3.3 NDB Cluster 接続文字列">セクション23.3.3.3「NDB Cluster 接続文字列」</a>を参照してください。<a class="xref" href="mysql-cluster.html#mysql-cluster-program-options-common" title="23.4.32 NDB Cluster プログラムに共通のオプション — NDB Cluster プログラムに共通のオプション">セクション23.4.32「NDB Cluster プログラムに共通のオプション — NDB Cluster プログラムに共通のオプション」</a>では、<span class="command"><strong>ndbd</strong></span>
        で使用できるその他のコマンド行オプションについて説明しています。
        データノード構成パラメータについては、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndbd-definition" title="23.3.3.6 NDB Cluster データノードの定義">セクション23.3.3.6「NDB Cluster データノードの定義」</a>を参照してください。
      </p><p>
        <span class="command"><strong>ndbd</strong></span> が開始されると、実際には 2
        つのプロセスが開始されます。
        最初のプロセスは<span class="quote">「<span class="quote">エンジェルプロセス</span>」</span>と呼ばれ、その唯一の役割は実行プロセスが完了したときにそれを検出し、<span class="command"><strong>ndbd</strong></span>
        プロセスを再起動することです
        (そのように構成されている場合)。
        このため、UNIX の <span class="command"><strong>kill</strong></span>
        コマンドを使用して <span class="command"><strong>ndbd</strong></span>
        を強制終了しようとする場合は、両方のプロセスを強制終了する必要があります
        (エンジェルプロセスが最初)。
        <span class="command"><strong>ndbd</strong></span>
        プロセスを終了させるための推奨される方法は、管理クライアントを使用してそこからプロセスを停止することです。
      </p><p>
        実行プロセスは、データの読み取り、書き込み、スキャン、およびほかのすべてのアクティビティーに
        1 つのスレッドを使用します。
        数千の同時アクションを容易に処理できるように、このスレッドは非同期に実装されます。
        また、監視スレッドは実行スレッドが無限ループでハングアップしないように管理します。
        スレッドのプールによってファイル I/O
        が処理され、各スレッドは 1
        つのオープンファイルを処理できます。
        スレッドは <span class="command"><strong>ndbd</strong></span>
        プロセスのトランスポーターによるトランスポーター接続に使用することもできます。
        多数の操作 (更新を含む)
        を実行するマルチプロセッサーシステムの場合、<span class="command"><strong>ndbd</strong></span>
        プロセスは最大 2 つの CPU を使用できます
        (許可されている場合)。
      </p><p>
        多数の CPU
        を持つマシンの場合は、異なるノードグループに属する複数の
        <span class="command"><strong>ndbd</strong></span>
        プロセスを使用できます。ただし、そのような構成はまだ実験的と見なされ、MySQL
        8.0
        の本番設定ではサポートされません。
        <a class="xref" href="mysql-cluster.html#mysql-cluster-limitations" title="23.1.7 NDB Cluster の既知の制限事項">セクション23.1.7「NDB Cluster の既知の制限事項」</a>を参照してください。
      </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-cluster-programs-ndbinfo-select-all"></a>23.4.2 ndbinfo_select_all — ndbinfo テーブルからの選択</h3></div></div></div><a class="indexterm" name="idm45563221619152"></a><a class="indexterm" name="idm45563221617936"></a><p>
        <span class="command"><strong>ndbinfo_select_all</strong></span>
        は、<code class="literal">ndbinfo</code>
        データベースの 1
        つ以上のテーブルからすべての行およびカラムを選択するクライアントプログラムです
      </p><p>
        <span class="command"><strong>mysql</strong></span>
        クライアントで使用可能なすべての
        <code class="literal">ndbinfo</code>
        テーブルをこのプログラムで読み取ることができるわけではありません。
        また、<span class="command"><strong>ndbinfo_select_all</strong></span>
        では、<code class="literal">tables</code> および
        <code class="literal">columns</code>
        メタデータテーブルなど、SQL
        を使用してアクセスできない
        <code class="literal">ndbinfo</code>
        内部の一部のテーブルに関する情報を表示できます。
      </p><p>
        <span class="command"><strong>ndbinfo_select_all</strong></span> を使用して 1
        つ以上の <code class="literal">ndbinfo</code>
        テーブルから選択するには、プログラムを呼び出すときに次のようにテーブル名を指定する必要があります。
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>ndbinfo_select_all <em class="replaceable"><code>table_name1</code></em>  [<em class="replaceable"><code>table_name2</code></em>] [...]</code></strong>
</pre><p>
        例:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>ndbinfo_select_all logbuffers logspaces</code></strong>
== logbuffers ==
node_id log_type        log_id  log_part        total   used    high
5       0       0       0       33554432        262144  0
6       0       0       0       33554432        262144  0
7       0       0       0       33554432        262144  0
8       0       0       0       33554432        262144  0
== logspaces ==
node_id log_type        log_id  log_part        total   used    high
5       0       0       0       268435456       0       0
5       0       0       1       268435456       0       0
5       0       0       2       268435456       0       0
5       0       0       3       268435456       0       0
6       0       0       0       268435456       0       0
6       0       0       1       268435456       0       0
6       0       0       2       268435456       0       0
6       0       0       3       268435456       0       0
7       0       0       0       268435456       0       0
7       0       0       1       268435456       0       0
7       0       0       2       268435456       0       0
7       0       0       3       268435456       0       0
8       0       0       0       268435456       0       0
8       0       0       1       268435456       0       0
8       0       0       2       268435456       0       0
8       0       0       3       268435456       0       0
shell&gt;
</pre><a class="indexterm" name="idm45563221598480"></a><p>
        次の表には、<span class="command"><strong>ndbinfo_select_all</strong></span>
        に固有のオプションが含まれています。
        追加説明が表のあとにあります。 ほとんどの
        NDB Cluster プログラム
        (<span class="command"><strong>ndbinfo_select_all</strong></span> を含む)
        に共通のオプションについては、<a class="xref" href="mysql-cluster.html#mysql-cluster-program-options-common" title="23.4.32 NDB Cluster プログラムに共通のオプション — NDB Cluster プログラムに共通のオプション">セクション23.4.32「NDB Cluster プログラムに共通のオプション — NDB Cluster プログラムに共通のオプション」</a>
        を参照してください。
      </p><div class="table"><a name="mysql-cluster-ndbinfo_select_all-options-table"></a><p class="title"><b>表 23.25 プログラムで使用されるコマンドライン・オプション ndbinfo_select_all</b></p><div class="table-contents"><table frame="box" rules="all"><col style="width: 33%"><col style="width: 34%"><col style="width: 33%"><thead><tr>
            <th scope="col">形式</th>
            <th scope="col">説明</th>
            <th scope="col">追加、非推奨、または削除された</th>
          </tr></thead><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndbinfo_select_all_delay">--delay=#</a>
                </code>
              </p></th>
            <td>ループ間の遅延を秒単位で設定</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndbinfo_select_all_loops">--loops=#</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndbinfo_select_all_loops">-l</a>
                </code>
              </p></th>
            <td>選択を実行する回数の設定</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_select_all_database">--database=db_name</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_select_all_database">-d</a>
                </code>
              </p></th>
            <td>テーブルが存在するデータベースの名前</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_select_all_parallelism">--parallelism=#</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_select_all_parallelism">-p</a>
                </code>
              </p></th>
            <td>並列度の設定</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody></table></div></div><br class="table-break"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="option_ndbinfo_select_all_delay"></a>
            <code class="option">--delay=<code class="literal">seconds</code></code>
          </p><a class="indexterm" name="idm45563221556768"></a><a class="indexterm" name="idm45563221554704"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for delay"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--delay=#</code></td>
</tr><tr><th>型</th>
<td>数値</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">5</code></td>
</tr><tr><th>最小値</th>
<td><code class="literal">0</code></td>
</tr><tr><th>最大値</th>
<td><code class="literal">MAX_INT</code></td>
</tr></tbody></table></div><p>
            このオプションは、ループの各実行の間に待機する秒数を設定します。
            <code class="option">--loops</code> に 0
            または 1
            が設定されている場合は効果がありません。
          </p></li><li class="listitem"><p><a name="option_ndbinfo_select_all_loops"></a>
            <code class="option">--loops=<code class="literal">number</code></code>,
            <code class="option">-l <em class="replaceable"><code>number</code></em></code>
          </p><a class="indexterm" name="idm45563221533328"></a><a class="indexterm" name="idm45563221531264"></a><a class="indexterm" name="idm45563221529088"></a><a class="indexterm" name="idm45563221527152"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for loops"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--loops=#</code></td>
</tr><tr><th>型</th>
<td>数値</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">1</code></td>
</tr><tr><th>最小値</th>
<td><code class="literal">0</code></td>
</tr><tr><th>最大値</th>
<td><code class="literal">MAX_INT</code></td>
</tr></tbody></table></div><p>
            このオプションは選択を実行する回数を設定します。
            各ループの時間間隔を設定するには、<code class="option">--delay</code>
            を使用します。
          </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-cluster-programs-ndbmtd"></a>23.4.3 ndbmtd — NDB Cluster データノードデーモン (マルチスレッド)</h3></div></div></div><a class="indexterm" name="idm45563221507232"></a><a class="indexterm" name="idm45563221506016"></a><a class="indexterm" name="idm45563221504112"></a><a class="indexterm" name="idm45563221502096"></a><a class="indexterm" name="idm45563221500896"></a><p>
        <span class="command"><strong>ndbmtd</strong></span>
        はマルチスレッドバージョンの
        <span class="command"><strong>ndbd</strong></span>
        であり、<code class="literal">NDBCLUSTER</code>
        ストレージエンジンを使用してテーブル内のすべてのデータを処理するために使用されるプロセスです。<span class="command"><strong>ndbmtd</strong></span>
        は、複数の CPU
        コアを持つホストコンピュータでの使用を目的としています。
        特に明記されていないかぎり、<span class="command"><strong>ndbmtd</strong></span>
        は <span class="command"><strong>ndbd</strong></span>
        と同じ方法で機能するため、このセクションでは、<span class="command"><strong>ndbmtd</strong></span>
        が <span class="command"><strong>ndbd</strong></span>
        と異なる方法に集中しており、シングルスレッドバージョンとマルチスレッドバージョンの両方のデータノードプロセスに適用される
        NDB Cluster
        データノードの実行に関する追加情報については、<a class="xref" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="23.4.1 ndbd — NDB Cluster データノードデーモン">セクション23.4.1「ndbd — NDB Cluster データノードデーモン」</a>
        に問い合わせてください。
      </p><p>
        <span class="command"><strong>ndbd</strong></span>
        で使用されるコマンド行オプションおよび構成パラメータは、<span class="command"><strong>ndbmtd</strong></span>
        にも当てはまります。
        これらのオプションおよびパラメータについては、それぞれ<a class="xref" href="mysql-cluster.html#mysql-cluster-programs-ndbd" title="23.4.1 ndbd — NDB Cluster データノードデーモン">セクション23.4.1「ndbd — NDB Cluster データノードデーモン」</a>および<a class="xref" href="mysql-cluster.html#mysql-cluster-ndbd-definition" title="23.3.3.6 NDB Cluster データノードの定義">セクション23.3.3.6「NDB Cluster データノードの定義」</a>を参照してください。
      </p><p>
        また、<span class="command"><strong>ndbmtd</strong></span> は <span class="command"><strong>ndbd</strong></span>
        とファイルシステム互換です。
        言い換えると、<span class="command"><strong>ndbd</strong></span>
        を実行しているデータノードを停止し、バイナリを
        <span class="command"><strong>ndbmtd</strong></span>
        に置き換えて、データ損失なしに再起動できます
        (ただし、<span class="command"><strong>ndbmtd</strong></span>
        をマルチスレッド方式で実行する場合は、ノードを再起動する前に、<code class="literal">MaxNoOfExecutionThreads</code>
        が適切な値に設定されていることを確認する必要があります。)
        同様に、ノードを停止し、マルチスレッドバイナリのかわりに
        <span class="command"><strong>ndbd</strong></span>
        を起動するだけで、<span class="command"><strong>ndbmtd</strong></span>
        バイナリを <span class="command"><strong>ndbd</strong></span>
        に置き換えることができます。 これらの 2
        つを切り替えるときに、<code class="option">--initial</code>
        を使用してデータノードバイナリを開始する必要はありません。
      </p><p>
        <span class="command"><strong>ndbmtd</strong></span>
        を使用した場合は、<span class="command"><strong>ndbd</strong></span>
        を使用した場合と 2
        つの重要な点で異なります。
      </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
            <span class="command"><strong>ndbmtd</strong></span>
            はデフォルトではシングルスレッドモードで実行されるため
            (つまり、<span class="command"><strong>ndbd</strong></span>
            のように動作します)、マルチスレッドを使用するように構成する必要があります。
            これを行うには、<code class="filename">config.ini</code>
            ファイルの
            <code class="literal">MaxNoOfExecutionThreads</code>
            構成パラメータまたは
            <code class="literal">ThreadConfig</code>
            構成パラメータに適切な値を設定します。
            <code class="literal">MaxNoOfExecutionThreads</code>
            は簡単に使用できますが、<code class="literal">ThreadConfig</code>
            にはより柔軟性があります。
            これらの構成パラメータおよびその使用方法については、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndbd-definition-ndbmtd-parameters" title="マルチスレッドの構成パラメータ (ndbmtd)">マルチスレッドの構成パラメータ (ndbmtd)</a>を参照してください。
          </p></li><li class="listitem"><p>
            トレースファイルは <span class="command"><strong>ndbmtd</strong></span>
            プロセスで重大なエラーが発生したときに生成されますが、<span class="command"><strong>ndbd</strong></span>
            で障害が発生したときにこれらが生成される仕組みとは若干異なります。
            これらの相違については、次のいくつかの段落で説明します。
          </p></li></ol></div><a class="indexterm" name="idm45563221463120"></a><a class="indexterm" name="idm45563221460944"></a><a class="indexterm" name="idm45563221458992"></a><a class="indexterm" name="idm45563221456848"></a><a class="indexterm" name="idm45563221454896"></a><p>
        <span class="command"><strong>ndbd</strong></span> と同様に、<span class="command"><strong>ndbmtd</strong></span>
        は <code class="filename">config.ini</code> 構成ファイルの
        <code class="literal">DataDir</code>
        で指定されたディレクトリに配置される一連のログファイルを生成します。
        トレースファイルを除き、これらは
        <span class="command"><strong>ndbd</strong></span>
        で生成されるものと同様に生成され、同じ名前が付けられます。
      </p><p>
        重大なエラーが発生した場合、<span class="command"><strong>ndbmtd</strong></span>
        はエラーが発生する直前に発生した事象を示すトレースファイルを生成します。
        これらのファイルはデータノード
        <code class="literal">DataDir</code> にあり、NDB
        Cluster
        開発およびサポートチームによる問題の分析に役立ちます。
        各 <span class="command"><strong>ndbmtd</strong></span> スレッドに対して 1
        つのトレースファイルが生成されます。
        これらのファイルの名前には次のパターンがあります。
      </p><pre class="programlisting"><code class="filename">ndb_<em class="replaceable"><code>node_id</code></em>_trace.log.<em class="replaceable"><code>trace_id</code></em>_t<em class="replaceable"><code>thread_id</code></em></code>,
</pre><p>
        このパターンで、<em class="replaceable"><code>node_id</code></em>
        はクラスタ内のデータノード一意のノード ID
        を表し、<em class="replaceable"><code>trace_id</code></em>
        はトレースシーケンス番号であり、<em class="replaceable"><code>thread_id</code></em>
        はスレッド ID です。 たとえば、NDB Cluster
        データノードとして実行されている
        <span class="command"><strong>ndbmtd</strong></span> プロセスがノード ID 3
        を持ち、<code class="literal">MaxNoOfExecutionThreads</code>
        が 4 である場合、4
        つのトレースファイルがデータノードデータディレクトリに生成されます。
        このノードで障害が発生したのがはじめてであった場合、これらのファイルには
        <code class="filename">ndb_3_trace.log.1_t1</code>、<code class="filename">ndb_3_trace.log.1_t2</code>、<code class="filename">ndb_3_trace.log.1_t3</code>、および
        <code class="filename">ndb_3_trace.log.1_t4</code>
        と名前が付けられます。
        内部的には、これらのトレースファイルは
        <span class="command"><strong>ndbd</strong></span>
        トレースファイルと同じ形式です。
      </p><p>
        データノードプロセスが予期せずに停止されたときに生成される
        <span class="command"><strong>ndbd</strong></span>
        の終了コードおよびメッセージは、<span class="command"><strong>ndbmtd</strong></span>
        でも使用されます。
        これらのリストについては、<a class="ulink" href="https://dev.mysql.com/doc/ndb-internals/en/ndb-node-error-messages.html" target="_top">Data Node Error Messages</a>を参照してください。
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
          <span class="command"><strong>ndbd</strong></span> と <span class="command"><strong>ndbmtd</strong></span>
          は、同じ NDB Cluster
          内の異なるデータノードで同時に使用できます。
          ただし、そのような構成は十分にテストされていないため、現時点で本番設定でこれを行うことはお勧めできません。
        </p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-cluster-programs-ndb-mgmd"></a>23.4.4 ndb_mgmd — NDB Cluster 管理サーバーデーモン</h3></div></div></div><a class="indexterm" name="idm45563221425632"></a><a class="indexterm" name="idm45563221424288"></a><a class="indexterm" name="idm45563221422352"></a><a class="indexterm" name="idm45563221420448"></a><a class="indexterm" name="idm45563221418784"></a><p>
        管理サーバーは、クラスタ構成ファイルを読み取り、この情報を要求したクラスタ内のすべてのノードにそれを配布するプロセスです。
        また、これはクラスタのアクティビティーに関するログを管理します。
        管理クライアントは、管理サーバーに接続してクラスタのステータスをチェックできます。
      </p><a class="indexterm" name="idm45563221416112"></a><a class="indexterm" name="idm45563221413968"></a><a class="indexterm" name="idm45563221411936"></a><a class="indexterm" name="idm45563221409952"></a><p>
        次のテーブルには、NDB Cluster
        管理サーバープログラム <span class="command"><strong>ndb_mgmd</strong></span>
        に固有のオプションが含まれています。
        追加説明が表のあとにあります。 ほとんどの
        NDB Cluster プログラム (<span class="command"><strong>ndb_mgmd</strong></span>
        を含む)
        に共通のオプションについては、<a class="xref" href="mysql-cluster.html#mysql-cluster-program-options-common" title="23.4.32 NDB Cluster プログラムに共通のオプション — NDB Cluster プログラムに共通のオプション">セクション23.4.32「NDB Cluster プログラムに共通のオプション — NDB Cluster プログラムに共通のオプション」</a>
        を参照してください。
      </p><div class="table"><a name="mysql-cluster-ndb_mgmd-options-table"></a><p class="title"><b>表 23.26 プログラムで使用されるコマンドライン・オプション ndb_mgmd</b></p><div class="table-contents"><table frame="box" rules="all"><col style="width: 33%"><col style="width: 34%"><col style="width: 33%"><thead><tr>
            <th scope="col">形式</th>
            <th scope="col">説明</th>
            <th scope="col">追加、非推奨、または削除された</th>
          </tr></thead><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_mgmd_bind-address">--bind-address=host</a>
                </code>
              </p></th>
            <td>ローカルバインドアドレス</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_mgmd_cluster-config-suffix">--cluster-config-suffix=name</a>
                </code>
              </p></th>
            <td>my.cnf ファイルの cluster_config
              セクションの読取り時にデフォルトのグループサフィクスをオーバーライドします。テストで使用されます</td>
            <td><p>
                追加: NDB 8.0.24
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_mgmd_config-cache">--config-cache[=TRUE|FALSE]</a>
                </code>
              </p></th>
            <td>管理サーバー構成キャッシュを有効にします。デフォルトは
              true です</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_mgmd_config-file">--config-file=file</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_mgmd_config-file">-f</a>
                </code>
              </p></th>
            <td>クラスタ構成ファイルを指定します。構成キャッシュが存在する場合は、--reload
              または --initial も指定してオーバーライド</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_mgmd_configdir">--configdir=directory</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_mgmd_configdir">--config-dir=directory</a>
                </code>
              </p></th>
            <td>クラスタ管理サーバー構成キャッシュディレクトリの指定</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_mgmd_daemon">--daemon</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_mgmd_daemon">-d</a>
                </code>
              </p></th>
            <td>ndb_mgmd をデーモンモードで実行します (デフォルト)</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_mgmd_initial">--initial</a>
                </code>
              </p></th>
            <td>構成キャッシュをバイパスして、管理サーバーが構成ファイルから構成データをリロード</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_mgmd_install">--install[=name]</a>
                </code>
              </p></th>
            <td>管理サーバープロセスを Windows
              サービスとしてインストールするために使用されます。他のプラットフォームには適用されません</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_mgmd_interactive">--interactive</a>
                </code>
              </p></th>
            <td>ndb_mgmd をインタラクティブモードで実行します
              (本番では正式にサポートされていません。テストのためのみです)</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_mgmd_log-name">--log-name=name</a>
                </code>
              </p></th>
            <td>このノードに適用されるクラスタログメッセージの書込み時に使用する名前</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_mgmd_mycnf">--mycnf</a>
                </code>
              </p></th>
            <td>my.cnf
              ファイルからクラスタ構成データを読み取ります</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_mgmd_no-nodeid-checks">--no-nodeid-checks</a>
                </code>
              </p></th>
            <td>ノード ID チェックを指定しないでください</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_mgmd_nodaemon">--nodaemon</a>
                </code>
              </p></th>
            <td>ndb_mgmd をデーモンとして実行しません</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_mgmd_nowait-nodes">--nowait-nodes=list</a>
                </code>
              </p></th>
            <td>この管理サーバーの起動時に指定された管理ノードを待機しません。--ndb-nodeid
              オプションが必要です</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_mgmd_print-full-config">--print-full-config</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_mgmd_print-full-config">-P</a>
                </code>
              </p></th>
            <td>すべての構成を出力して終了します</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_mgmd_reload">--reload</a>
                </code>
              </p></th>
            <td>管理サーバーが構成ファイルを構成キャッシュと比較</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_mgmd_remove">--remove[=name]</a>
                </code>
              </p></th>
            <td>以前に Windows
              サービスとしてインストールされた管理サーバープロセスを削除するために使用します。オプションで、削除するサービスの名前を指定します。他のプラットフォームには適用されません</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_mgmd_verbose">--verbose</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_mgmd_verbose">-v</a>
                </code>
              </p></th>
            <td>ログへの追加情報の書込み</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody></table></div></div><br class="table-break"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="option_ndb_mgmd_bind-address"></a>
            <code class="option">--bind-address=<em class="replaceable"><code>host</code></em></code>
          </p><a class="indexterm" name="idm45563221286800"></a><a class="indexterm" name="idm45563221284752"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for bind-address"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--bind-address=host</code></td>
</tr><tr><th>型</th>
<td>文字列</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">[none]</code></td>
</tr></tbody></table></div><p>
            管理サーバーを特定のネットワークインタフェース
            (ホスト名または IP アドレス)
            にバインドします。
            このオプションにはデフォルト値はありません。
          </p></li><li class="listitem"><p><a name="option_ndb_mgmd_cluster-config-suffix"></a>
            <code class="option">cluster-config-suffix</code>
          </p><a class="indexterm" name="idm45563221270016"></a><a class="indexterm" name="idm45563221267952"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for cluster-config-suffix"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--cluster-config-suffix=name</code></td>
</tr><tr><th>導入</th>
<td>8.0.24-ndb-8.0.24</td>
</tr><tr><th>型</th>
<td>文字列</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">[none]</code></td>
</tr></tbody></table></div><p>
            <code class="filename">my.cnf</code>
            でクラスタ構成セクションを読み取るときに、デフォルトのグループサフィクスをオーバーライドします。テストで使用されます。
          </p></li><li class="listitem"><p><a name="option_ndb_mgmd_config-cache"></a>
            <code class="option">--config-cache</code>
          </p><a class="indexterm" name="idm45563221250640"></a><a class="indexterm" name="idm45563221248592"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for config-cache"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--config-cache[=TRUE|FALSE]</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">TRUE</code></td>
</tr></tbody></table></div><p>
            このオプション (デフォルト値は
            <code class="literal">1</code> (または
            <code class="literal">TRUE</code>、<code class="literal">ON</code>))
            は、管理サーバーが起動するたびに
            <code class="filename">config.ini</code>
            から構成が読み取られるように
            (<a class="xref" href="mysql-cluster.html#mysql-cluster-config-file" title="23.3.3 NDB Cluster 構成ファイル">セクション23.3.3「NDB Cluster 構成ファイル」</a>を参照してください)
            その構成キャッシュを無効にするために使用できます。
            これを行うには、次のいずれかのオプションを指定して
            <span class="command"><strong>ndb_mgmd</strong></span>
            プロセスを開始します。
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <code class="option">--config-cache=0</code>
              </p></li><li class="listitem"><p>
                <code class="option">--config-cache=FALSE</code>
              </p></li><li class="listitem"><p>
                <code class="option">--config-cache=OFF</code>
              </p></li><li class="listitem"><p><a name="option_ndb_mgmd_skip_config-cache"></a>
                <code class="option">--skip-config-cache</code>
              </p></li></ul></div><p>
            一覧したいずれかのオプションの使用が有効となるのは、管理サーバーが開始されたときに格納されている構成がない場合のみです。
            管理サーバーが構成キャッシュファイルを見つけると、<code class="option">--config-cache</code>
            オプションまたは
            <code class="option">--skip-config-cache</code>
            オプションは無視されます。
            このため、構成キャッシュを無効にするには、管理サーバーを<span class="emphasis"><em>最初に</em></span>起動するときにこのオプションを使用してください。
            それ以外の場合、つまり、構成キャッシュが<span class="emphasis"><em>すでに</em></span>作成されている管理サーバーの構成キャッシュを無効にする場合は、管理サーバーを停止して、既存の構成キャッシュファイルを手動で削除してから、<code class="option">--skip-config-cache</code>
            を指定して (または <code class="option">--config-cache</code>
            に 0、<code class="literal">OFF</code>、または
            <code class="literal">FALSE</code> を設定して)
            管理サーバーを再起動する必要があります。
          </p><p>
            構成キャッシュファイルは通常、インストールディレクトリの下の
            <code class="filename">mysql-cluster</code>
            という名前のディレクトリに作成されます
            (<code class="option">--configdir</code>
            オプションを使用してこの場所がオーバーライドされていない場合)。
            管理サーバーが構成データを更新するたびに、新しいキャッシュファイルが生成されます。
            このファイルは、次の形式を使用して作成順に連続した名前が付けられます。
          </p><pre class="programlisting">ndb_<em class="replaceable"><code>node-id</code></em>_config.bin.<em class="replaceable"><code>seq-number</code></em>
</pre><p>
            <em class="replaceable"><code>node-id</code></em>
            は管理サーバーのノード ID
            であり、<em class="replaceable"><code>seq-number</code></em> は 1
            から始まるシーケンス番号です。
            たとえば、管理サーバーのノード ID が 5
            の場合、最初の 3
            つの構成キャッシュファイルが作成されるときに
            <code class="filename">ndb_5_config.bin.1</code>、<code class="filename">ndb_5_config.bin.2</code>、および
            <code class="filename">ndb_5_config.bin.3</code>
            という名前が付けられます。
          </p><p>
            実際にキャッシュを無効にせずに、構成キャッシュをパージまたはリロードする場合は、<code class="option">--skip-config-cache</code>
            オプションの代わりに
            <code class="option">--reload</code>
            オプションまたは
            <code class="option">--initial</code>
            オプションのいずれかを指定して
            <span class="command"><strong>ndb_mgmd</strong></span> を開始してください。
          </p><p>
            構成キャッシュを再度有効にするには、構成キャッシュを無効にするために前に使用した
            <code class="option">--config-cache</code> オプションまたは
            <code class="option">--skip-config-cache</code>
            オプションを指定せずに管理サーバーを再起動します。
          </p><p>
            <code class="option">--skip-config-cache</code>
            が使用された場合、<span class="command"><strong>ndb_mgmd</strong></span>
            は構成ディレクトリ
            (<code class="option">--configdir</code>)
            をチェックせずに作成しようとします。 (Bug
            #13428853)
          </p></li><li class="listitem"><p><a name="option_ndb_mgmd_config-file"></a>
            <code class="option">--config-file=<em class="replaceable"><code>filename</code></em></code>,
            <code class="option">-f <em class="replaceable"><code>filename</code></em></code>
          </p><a class="indexterm" name="idm45563221199968"></a><a class="indexterm" name="idm45563221197936"></a><a class="indexterm" name="idm45563221195744"></a><a class="indexterm" name="idm45563221193808"></a><a class="indexterm" name="idm45563221191648"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for config-file"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--config-file=file</code></td>
</tr><tr><th>型</th>
<td>ファイル名</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">[none]</code></td>
</tr></tbody></table></div><p>
            構成ファイルとして使用すべきファイルを管理サーバーに指示します。
            デフォルトでは、管理サーバーは
            <span class="command"><strong>ndb_mgmd</strong></span>
            実行可能ファイルと同じディレクトリで
            <code class="filename">config.ini</code>
            という名前のファイルを探します。それ以外の場合は、ファイル名および場所を明示的に指定する必要があります。
          </p><p>
            このオプションにはデフォルト値はなく、<code class="option">--reload</code>
            または <code class="option">--initial</code>
            オプションを指定して <span class="command"><strong>ndb_mgmd</strong></span>
            が起動されたか、管理サーバーが構成キャッシュを見つけることができなかったために、管理サーバーが構成ファイルを読み取るように強制された場合を除き、無視されます。
            このオプションは、<code class="option">--config-cache=OFF</code>
            を指定して <span class="command"><strong>ndb_mgmd</strong></span>
            が開始された場合にも読み取られます。
            詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-config-file" title="23.3.3 NDB Cluster 構成ファイル">セクション23.3.3「NDB Cluster 構成ファイル」</a>を参照してください。
          </p></li><li class="listitem"><p><a name="option_ndb_mgmd_configdir"></a>
            <code class="option">--configdir=<em class="replaceable"><code>dir_name</code></em></code>
          </p><a class="indexterm" name="idm45563221169840"></a><a class="indexterm" name="idm45563221167808"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for configdir"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><p class="valid-value"><code class="literal">--configdir=directory</code></p><p class="valid-value"><code class="literal">--config-dir=directory</code></p></td>
</tr><tr><th>型</th>
<td>ファイル名</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">$INSTALLDIR/mysql-cluster</code></td>
</tr></tbody></table></div><p>
            クラスタ管理サーバーの構成キャッシュディレクトリを指定します。<code class="option">--config-dir</code>
            はこのオプションのエイリアスです。
          </p></li><li class="listitem"><p><a name="option_ndb_mgmd_daemon"></a>
            <code class="option">--daemon</code>、<code class="option">-d</code>
          </p><a class="indexterm" name="idm45563221151120"></a><a class="indexterm" name="idm45563221149056"></a><a class="indexterm" name="idm45563221146880"></a><a class="indexterm" name="idm45563221144944"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for daemon"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--daemon</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">TRUE</code></td>
</tr></tbody></table></div><p>
            <span class="command"><strong>ndb_mgmd</strong></span>
            にデーモンプロセスとして開始するように指示します。
            これはデフォルトの動作です。
          </p><p>
            このオプションは <span class="command"><strong>ndb_mgmd</strong></span> を
            Windows
            プラットフォームで実行している場合は効果がありません。
          </p></li><li class="listitem"><p><a name="option_ndb_mgmd_initial"></a>
            <code class="option">--initial</code>
          </p><a class="indexterm" name="idm45563221128448"></a><a class="indexterm" name="idm45563221126400"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for initial"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--initial</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table></div><p>
            構成データは、管理サーバーが開始されるたびにクラスタグローバル構成ファイルから読み取られるのではなく、内部的にキャッシュされます
            (<a class="xref" href="mysql-cluster.html#mysql-cluster-config-file" title="23.3.3 NDB Cluster 構成ファイル">セクション23.3.3「NDB Cluster 構成ファイル」</a>を参照してください)。
            <code class="option">--initial</code>
            オプションを使用するとこの動作がオーバーライドされ、管理サーバーが既存のキャッシュファイルを削除し、クラスタ構成ファイルから構成データを再度読み取り、新しいキャッシュを作成するように強制されます。
          </p><p>
            これは、2 つの点で
            <code class="option">--reload</code>
            オプションと異なります。
            まず、<code class="option">--reload</code>
            を指定すると、サーバーが構成ファイルをキャッシュと照合し、ファイルの内容がキャッシュと異なる場合にのみデータをリロードすることが強制されます。
            2 番目に、<code class="option">--reload</code>
            は既存のキャッシュファイルを削除しません。
          </p><p>
            <code class="option">--initial</code> を指定して
            <span class="command"><strong>ndb_mgmd</strong></span>
            が呼び出されたけれどもグローバル構成ファイルが見つからない場合、管理サーバーは起動できません。
          </p><p>
            管理サーバーは起動時に、同じ NDB Cluster
            内の別の管理サーバーをチェックし、ほかの管理サーバー構成データを使用しようとします。
            この動作は、複数の管理ノードを持つ NDB
            Cluster
            のローリング再起動を実行するときに影響を及ぼします。
            詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-rolling-restart" title="23.5.5 NDB Cluster のローリング再起動の実行">セクション23.5.5「NDB Cluster のローリング再起動の実行」</a>を参照してください。
          </p><p>
            <code class="option">--config-file</code>
            オプションとともに使用すると、キャッシュは構成ファイルが実際に見つかった場合にのみクリアされます。
          </p></li><li class="listitem"><p><a name="option_ndb_mgmd_install"></a>
            <code class="option">--install[=<em class="replaceable"><code>name</code></em>]</code>
          </p><a class="indexterm" name="idm45563221101632"></a><a class="indexterm" name="idm45563221099616"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for install"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--install[=name]</code></td>
</tr><tr><th>プラットフォーム固有</th>
<td>Windows</td>
</tr><tr><th>型</th>
<td>文字列</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">ndb_mgmd</code></td>
</tr></tbody></table></div><p>
            <span class="command"><strong>ndb_mgmd</strong></span> が Windows
            サービスとしてインストールされます。
            必要に応じて、サービスの名前を指定できます。設定しない場合、サービス名は
            <code class="literal">ndb_mgmd</code>
            にデフォルト設定されます。 その他の
            <span class="command"><strong>ndb_mgmd</strong></span>
            プログラムオプションは
            <code class="filename">my.ini</code> または
            <code class="filename">my.cnf</code>
            構成ファイルに指定することが推奨されますが、<code class="option">--install</code>
            と一緒に使用できます。
            ただし、そのような場合、Windows
            サービスのインストールが成功するには、<code class="option">--install</code>
            オプションを最初に指定してから、ほかのオプションを指定する必要があります。
          </p><p>
            このオプションを
            <code class="option">--initial</code>
            オプションと一緒に使用することは一般的にお勧めしません。サービスが停止および開始されるたびに構成キャッシュが消去されて再作成されるためです。
            管理サーバーの起動に影響するほかの
            <span class="command"><strong>ndb_mgmd</strong></span>
            オプションを使用する場合にも注意すべきであり、それを行うことを十分に理解し、起こり得る結果に対して十分に準備していることをしっかりと確認してください。
          </p><p>
            <code class="option">--install</code>
            オプションは、Windows
            以外のプラットフォームでは効果がありません。
          </p></li><li class="listitem"><p><a name="option_ndb_mgmd_interactive"></a>
            <code class="option">--interactive</code>
          </p><a class="indexterm" name="idm45563221072592"></a><a class="indexterm" name="idm45563221070576"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for interactive"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--interactive</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table></div><p>
            <span class="command"><strong>ndb_mgmd</strong></span>
            をインタラクティブモードで開始します。つまり、管理サーバーが実行されるとすぐに
            <span class="command"><strong>ndb_mgm</strong></span>
            クライアントセッションが開始されます。
            このオプションは、ほかの NDB Cluster
            ノードを起動しません。
          </p></li><li class="listitem"><p><a name="option_ndb_mgmd_log-name"></a>
            <code class="option">--log-name=<em class="replaceable"><code>name</code></em></code>
          </p><a class="indexterm" name="idm45563221054048"></a><a class="indexterm" name="idm45563221052016"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for log-name"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--log-name=name</code></td>
</tr><tr><th>型</th>
<td>文字列</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">MgmtSrvr</code></td>
</tr></tbody></table></div><p>
            クラスタログでこのノードに使用される名前を指定します。
          </p></li><li class="listitem"><p><a name="option_ndb_mgmd_mycnf"></a>
            <code class="option">--mycnf</code>
          </p><a class="indexterm" name="idm45563221037712"></a><a class="indexterm" name="idm45563221035536"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for mycnf"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--mycnf</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table></div><p>
            <code class="filename">my.cnf</code>
            ファイルから構成データを読み取ります。
          </p></li><li class="listitem"><p><a name="option_ndb_mgmd_no-nodeid-checks"></a>
            <code class="option">--no-nodeid-checks</code>
          </p><a class="indexterm" name="idm45563221020640"></a><a class="indexterm" name="idm45563221018592"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for no-nodeid-checks"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--no-nodeid-checks</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table></div><p>
            ノード ID のチェックを実行しません。
          </p></li><li class="listitem"><p><a name="option_ndb_mgmd_nodaemon"></a>
            <code class="option">--nodaemon</code>
          </p><a class="indexterm" name="idm45563221004224"></a><a class="indexterm" name="idm45563221002192"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for nodaemon"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--nodaemon</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table></div><p>
            <span class="command"><strong>ndb_mgmd</strong></span>
            にデーモンプロセスとして開始しないように指示します。
          </p><p>
            Windows での <span class="command"><strong>ndb_mgmd</strong></span>
            のデフォルト動作はフォアグラウンドでの実行であるため、Windows
            プラットフォームではこのオプションは必要ありません。
          </p></li><li class="listitem"><p><a name="option_ndb_mgmd_nowait-nodes"></a>
            <code class="option">--nowait-nodes</code>
          </p><a class="indexterm" name="idm45563220985616"></a><a class="indexterm" name="idm45563220983568"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for nowait-nodes"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--nowait-nodes=list</code></td>
</tr><tr><th>型</th>
<td>数値</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">[none]</code></td>
</tr><tr><th>最小値</th>
<td><code class="literal">1</code></td>
</tr><tr><th>最大値</th>
<td><code class="literal">255</code></td>
</tr></tbody></table></div><p>
            NDB Cluster を 2
            つの管理ノードで起動する場合、各管理サーバーは通常、ほかの
            <span class="command"><strong>ndb_mgmd</strong></span>
            も動作しているかどうか、およびほかの管理サーバー構成がそれ自体と同じかどうかを確認します。
            ただし、クラスタを 1
            つの管理ノードのみで起動すること
            (およびおそらく別の <span class="command"><strong>ndb_mgmd</strong></span>
            をあとで起動することを許可すること)
            が望ましい場合があります。
            このオプションを指定すると、このオプションに渡されたノード
            ID
            を持つ別の管理ノードを管理ノードがチェックせず、起動された管理ノードのみを使用するように構成されているかのようにクラスタが起動することを許可します。
          </p><p>
            説明のために、<code class="filename">config.ini</code>
            ファイルに次の部分があるとします
            (ここでは、この例に関連しないほとんどの構成パラメータを省略しています)。
          </p><pre class="programlisting">[ndbd]
NodeId = 1
HostName = 198.51.100.101

[ndbd]
NodeId = 2
HostName = 198.51.100.102

[ndbd]
NodeId = 3
HostName = 198.51.100.103

[ndbd]
NodeId = 4
HostName = 198.51.100.104

[ndb_mgmd]
NodeId = 10
HostName = 198.51.100.150

[ndb_mgmd]
NodeId = 11
HostName = 198.51.100.151

[api]
NodeId = 20
HostName = 198.51.100.200

[api]
NodeId = 21
HostName = 198.51.100.201
</pre><p>
            ノード ID が <code class="literal">10</code> で、IP
            アドレスが 198.51.100.150
            のホストで動作する管理サーバーのみを使用して、このクラスタを起動するとします。
            (たとえば、別の管理サーバーを実行する予定のホストコンピュータがハードウェア障害のために一時的に使用できず、それが修復されるのを待っていると想定してください)。
            このようにクラスタを起動するには、198.51.100.150
            のマシンのコマンド行を使用して、次のコマンドを入力します。
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>ndb_mgmd --ndb-nodeid=10 --nowait-nodes=11</code></strong>
</pre><p>
            前の例に示されているように、<code class="option">--nowait-nodes</code>
            を使用する場合は、<code class="option">--ndb-nodeid</code>
            オプションも使用して、この
            <span class="command"><strong>ndb_mgmd</strong></span> プロセスのノード ID
            を指定する必要があります。
          </p><p>
            その後、クラスタの各データノードを通常の方法で起動できます。
            最初の管理サーバーに加えて、あとでデータノードを再起動せずに
            2
            番目の管理サーバーを起動して使用する場合は、両方の管理サーバーを参照する接続文字列を次のように指定して、各データノードを起動する必要があります。
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>ndbd -c 198.51.100.150,198.51.100.151</code></strong>
</pre><p>
            このクラスタに接続された NDB Cluster SQL
            ノードとして起動する <span class="command"><strong>mysqld</strong></span>
            プロセスで使用される接続文字列についても同様です。
            詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-connection-strings" title="23.3.3.3 NDB Cluster 接続文字列">セクション23.3.3.3「NDB Cluster 接続文字列」</a>を参照してください。
          </p><p>
            <span class="command"><strong>ndb_mgmd</strong></span>
            とともに使用すると、このオプションは別の管理ノードに関してのみ管理ノードの動作に影響します。
            <span class="command"><strong>ndbd</strong></span> または <span class="command"><strong>ndbmtd</strong></span>
            (全量より少ない数のデータノードでクラスタを起動できる)
            に使用される
            <code class="option">--nowait-nodes</code>
            オプションと混同しないでください。このオプションをデータノードに使用した場合は、ほかのデータノードに関係する動作にのみ影響します。
          </p><p>
            複数の管理ノード ID
            は、カンマ区切りリストとしてこのオプションに渡すことができます。
            各ノード ID は、1 から 255
            までである必要があります。
            実際には、同じ NDB Cluster
            に複数の管理サーバーを使用する
            (または必要な場合)
            ことはほとんどありません。ほとんどの場合、このオプションに渡す必要があるのは、クラスタの起動時に使用しない単一の管理サーバーの単一ノード
            ID のみです。
          </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
              <span class="quote">「<span class="quote">欠けている</span>」</span>管理サーバーをあとで起動する場合は、クラスタですでに使用されている管理サーバーと構成が一致している必要があります。
              そうしないと、既存の管理サーバーによって実行される構成チェックで失敗して起動されません。
            </p></div></li><li class="listitem"><p><a name="option_ndb_mgmd_print-full-config"></a>
            <code class="option">--print-full-config</code>, <code class="option">-P</code>
          </p><a class="indexterm" name="idm45563220938512"></a><a class="indexterm" name="idm45563220936464"></a><a class="indexterm" name="idm45563220934256"></a><a class="indexterm" name="idm45563220932320"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for print-full-config"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--print-full-config</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table></div><p>
            クラスタの構成に関する詳細情報を表示します。
            このオプションをコマンド行に指定すると、<span class="command"><strong>ndb_mgmd</strong></span>
            プロセスはクラスタ設定に関する情報
            (クラスタ構成セクションの詳細なリスト、およびパラメータとその値を含む)
            を出力します。
            通常、<code class="option">--config-file</code>
            (<code class="option">-f</code>)
            オプションと一緒に使用します。
          </p></li><li class="listitem"><p><a name="option_ndb_mgmd_reload"></a>
            <code class="option">--reload</code>
          </p><a class="indexterm" name="idm45563220915488"></a><a class="indexterm" name="idm45563220913424"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for reload"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--reload</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table></div><p>
            NDB Cluster
            構成データは、管理サーバーが起動されるたびにクラスタグローバル構成ファイルから読み取られるのではなく、内部的に格納されます
            (<a class="xref" href="mysql-cluster.html#mysql-cluster-config-file" title="23.3.3 NDB Cluster 構成ファイル">セクション23.3.3「NDB Cluster 構成ファイル」</a> を参照)。
            このオプションを使用すると、管理サーバーが内部データストアをクラスタ構成ファイルと照合し、構成ファイルがキャッシュと一致しないことが判明した場合は、構成をリロードすることを強制します。
            既存の構成キャッシュファイルは維持されますが使用されません。
          </p><p>
            これは、2 つの点で
            <code class="option">--initial</code>
            オプションと異なります。
            最初に、<code class="option">--initial</code>
            ではすべてのキャッシュファイルが削除されます。
            2 番目に、<code class="option">--initial</code>
            は、グローバル構成ファイルを再度読み取って新しいキャッシュを作成することを管理サーバーに強制します。
          </p><p>
            管理サーバーがグローバル構成ファイルを見つけられない場合、<code class="option">--reload</code>
            オプションは無視されます。
          </p><p>
            <code class="option">--reload</code>
            を使用する場合、管理サーバーはグローバル構成ファイルを読み取ろうとする前に、クラスタ内のデータノードおよびその他の管理サーバーと通信できる必要があります。通信できない場合、管理サーバーは起動に失敗します。
            これは、ノードの新しい IP
            アドレスやファイアウォール構成の変更など、ネットワーク環境の変更が原因で発生する可能性があります。
            このような場合は、かわりに
            <code class="option">--initial</code>
            を使用して、既存のキャッシュ済構成を強制的に破棄し、ファイルからリロードする必要があります。
            詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-rolling-restart" title="23.5.5 NDB Cluster のローリング再起動の実行">セクション23.5.5「NDB Cluster のローリング再起動の実行」</a>,を参照してください。
          </p></li><li class="listitem"><p><a name="option_ndb_mgmd_remove"></a>
            <code class="option">--remove{=name]</code>
          </p><a class="indexterm" name="idm45563220890304"></a><a class="indexterm" name="idm45563220888240"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for remove"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--remove[=name]</code></td>
</tr><tr><th>プラットフォーム固有</th>
<td>Windows</td>
</tr><tr><th>型</th>
<td>文字列</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">ndb_mgmd</code></td>
</tr></tbody></table></div><p>
            Windows
            サービスとしてインストールされている管理サーバープロセスを削除します。オプションで、削除するサービスの名前を指定します。
            Windows
            プラットフォームにのみ適用されます。
          </p></li><li class="listitem"><p><a name="option_ndb_mgmd_verbose"></a>
            <code class="option">--verbose</code>, <code class="option">-v</code>
          </p><a class="indexterm" name="idm45563220871136"></a><a class="indexterm" name="idm45563220869072"></a><a class="indexterm" name="idm45563220866896"></a><a class="indexterm" name="idm45563220864960"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for verbose"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--verbose</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table></div><p>
            Windows
            サービスとしてインストールされている管理サーバープロセスを削除します。オプションで、削除するサービスの名前を指定します。
            Windows
            プラットフォームにのみ適用されます。
          </p></li></ul></div><p>
        管理サーバーを起動するときに、接続文字列を必ず指定する必要があるわけではありません。
        ただし、複数の管理サーバーを使用している場合は、接続文字列を指定して、クラスタ内の各ノードにノード
        ID を明示的に指定してください。
      </p><p>
        接続文字列の使用方法については、<a class="xref" href="mysql-cluster.html#mysql-cluster-connection-strings" title="23.3.3.3 NDB Cluster 接続文字列">セクション23.3.3.3「NDB Cluster 接続文字列」</a>を参照してください。<a class="xref" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgmd" title="23.4.4 ndb_mgmd — NDB Cluster 管理サーバーデーモン">セクション23.4.4「ndb_mgmd — NDB Cluster 管理サーバーデーモン」</a>では、<span class="command"><strong>ndb_mgmd</strong></span>
        のその他のオプションについて説明しています。
      </p><p>
        次のファイルは、起動ディレクトリにある
        <span class="command"><strong>ndb_mgmd</strong></span>
        によって作成または使用され、<code class="filename">config.ini</code>
        構成ファイルに指定されている
        <code class="literal">DataDir</code>
        に配置されます。
        次のリストでは、<em class="replaceable"><code>node_id</code></em>
        は一意のノード識別子です。
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <a class="indexterm" name="idm45563220843168"></a>

            <a class="indexterm" name="idm45563220841136"></a>

            <a class="indexterm" name="idm45563220839680"></a>

            <code class="filename">config.ini</code>
            は、クラスタ全体の構成ファイルです。
            このファイルはユーザーが作成し、管理サーバーによって読み取られます。<a class="xref" href="mysql-cluster.html#mysql-cluster-configuration" title="23.3 NDB Cluster の構成">セクション23.3「NDB Cluster の構成」</a>では、このファイルをセットアップする方法について説明しています。
          </p></li><li class="listitem"><p>
            <code class="filename">ndb_<em class="replaceable"><code>node_id</code></em>_cluster.log</code>
            はクラスタイベントログファイルです。
            そのようなイベントの例としては、チェックポイントの開始と完了、ノードの起動イベント、ノードの障害、およびメモリー使用率のレベルが含まれます。
            クラスタイベントの完全なリストおよびその説明は、<a class="xref" href="mysql-cluster.html#mysql-cluster-management" title="23.5 NDB Cluster の管理">セクション23.5「NDB Cluster の管理」</a>にあります。
          </p><p>
            デフォルトでは、クラスタログのサイズが
            100 万バイトに達すると、ファイルの名前が
            <code class="filename">ndb_<em class="replaceable"><code>node_id</code></em>_cluster.log.<em class="replaceable"><code>seq_id</code></em></code>
            に変更されます。ここで、<em class="replaceable"><code>seq_id</code></em>
            はクラスタログファイルの順序番号です。
            (たとえば、シーケンス番号 1、2、3
            を持つファイルがすでに存在する場合、次のログファイルは番号
            <code class="literal">4</code>
            を使用して名前が付けられます)。
            <code class="literal">LogDestination</code>
            構成パラメータを使用して、ファイルのサイズと数、およびクラスタログのその他の特性を変更できます。
          </p></li><li class="listitem"><p>
            <code class="filename">ndb_<em class="replaceable"><code>node_id</code></em>_out.log</code>
            は、管理サーバーがデーモンとして実行されているときに、<code class="literal">stdout</code>
            および <code class="literal">stderr</code>
            のために使用されるファイルです。
          </p></li><li class="listitem"><p>
            <code class="filename">ndb_<em class="replaceable"><code>node_id</code></em>.pid</code>
            は、管理サーバーをデーモンとして実行しているときに使用されるプロセス
            ID ファイルです。
          </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-cluster-programs-ndb-mgm"></a>23.4.5 ndb_mgm — NDB Cluster 管理クライアント</h3></div></div></div><a class="indexterm" name="idm45563220820224"></a><a class="indexterm" name="idm45563220819008"></a><a class="indexterm" name="idm45563220817104"></a><a class="indexterm" name="idm45563220815104"></a><a class="indexterm" name="idm45563220813408"></a><a class="indexterm" name="idm45563220811920"></a><a class="indexterm" name="idm45563220809904"></a><p>
        <span class="command"><strong>ndb_mgm</strong></span>
        管理クライアントプロセスは、クラスタを実行するために実際には必要ありません。
        その価値は、クラスタのステータスをチェックしたり、バックアップを開始したり、その他の管理機能を実行したりするための一連のコマンドを提供することにあります。
        管理クライアントは C API
        を使用して管理サーバーにアクセスします。
        上級ユーザーは、この API
        を使用して専用の管理プロセスをプログラムし、<span class="command"><strong>ndb_mgm</strong></span>
        によって実行されるタスクと同様のことを実行することもできます。
      </p><p>
        管理クライアントを開始するには、管理サーバーのホスト名およびポート番号を指定する必要があります。
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>ndb_mgm [<em class="replaceable"><code>host_name</code></em> [<em class="replaceable"><code>port_num</code></em>]]</code></strong>
</pre><p>
        例:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>ndb_mgm ndb_mgmd.mysql.com 1186</code></strong>
</pre><p>
        デフォルトのホスト名およびポート番号は、それぞれ
        <code class="literal">localhost</code> および 1186 です。
      </p><a class="indexterm" name="idm45563220799328"></a><a class="indexterm" name="idm45563220797184"></a><a class="indexterm" name="idm45563220795152"></a><a class="indexterm" name="idm45563220793168"></a><p>
        次のテーブルに、NDB Cluster
        管理クライアントプログラム
        <span class="command"><strong>ndb_mgm</strong></span>
        に固有のオプションを示します。
        追加説明が表のあとにあります。 ほとんどの
        NDB Cluster プログラム (<span class="command"><strong>ndb_mgm</strong></span>
        を含む)
        に共通のオプションについては、<a class="xref" href="mysql-cluster.html#mysql-cluster-program-options-common" title="23.4.32 NDB Cluster プログラムに共通のオプション — NDB Cluster プログラムに共通のオプション">セクション23.4.32「NDB Cluster プログラムに共通のオプション — NDB Cluster プログラムに共通のオプション」</a>
        を参照してください。
      </p><div class="table"><a name="mysql-cluster-ndb_mgm-options-table"></a><p class="title"><b>表 23.27 プログラムで使用されるコマンドライン・オプション ndb_mgm</b></p><div class="table-contents"><table frame="box" rules="all"><col style="width: 33%"><col style="width: 34%"><col style="width: 33%"><thead><tr>
            <th scope="col">形式</th>
            <th scope="col">説明</th>
            <th scope="col">追加、非推奨、または削除された</th>
          </tr></thead><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_mgm_connect-retries">--connect-retries=#</a>
                </code>
              </p></th>
            <td>中止する前に接続を再試行する回数を設定します。0
              は 1
              回の試行のみを意味し、再試行は行われません</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_mgm_try-reconnect">--try-reconnect=#</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_mgm_try-reconnect">-t</a>
                </code>
              </p></th>
            <td>切断する前に接続を再試行する回数を設定します。--connect-retries
              のシノニムです</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_mgm_execute">--execute=name</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_mgm_execute">-e</a>
                </code>
              </p></th>
            <td>コマンドを実行して終了します</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody></table></div></div><br class="table-break"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="option_ndb_mgm_connect-retries"></a>
            <code class="option">--connect-retries=<em class="replaceable"><code>#</code></em></code>
          </p><a class="indexterm" name="idm45563220758240"></a><a class="indexterm" name="idm45563220756192"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for connect-retries"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--connect-retries=#</code></td>
</tr><tr><th>型</th>
<td>数値</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">3</code></td>
</tr><tr><th>最小値</th>
<td><code class="literal">0</code></td>
</tr><tr><th>最大値</th>
<td><code class="literal">4294967295</code></td>
</tr></tbody></table></div><p>
            このオプションは、最初に接続を再試行してから中止するまでの回数を指定します
            (クライアントは常に接続を 1
            回以上試行します)。
            試行ごとの待機時間は、<code class="option">--connect-retry-delay</code>
            を使用して設定されます。
          </p><p>
            このオプションは、非推奨になった
            <code class="option">--try-reconnect</code>
            オプションと同義です。
          </p><p>
            このオプションのデフォルトは、他の
            <code class="literal">NDB</code>
            プログラムで使用する場合のデフォルトとは異なります。
            詳しくは<a class="xref" href="mysql-cluster.html#mysql-cluster-program-options-common" title="23.4.32 NDB Cluster プログラムに共通のオプション — NDB Cluster プログラムに共通のオプション">セクション23.4.32「NDB Cluster プログラムに共通のオプション — NDB Cluster プログラムに共通のオプション」</a>,をご覧ください。
          </p></li><li class="listitem"><p><a name="option_ndb_mgm_execute"></a>
            <code class="option">--execute=<code class="literal">command</code></code>,
            <code class="option">-e <code class="literal">command</code></code>
          </p><a class="indexterm" name="idm45563220730688"></a><a class="indexterm" name="idm45563220728688"></a><a class="indexterm" name="idm45563220726528"></a><a class="indexterm" name="idm45563220724592"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for execute"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--execute=name</code></td>
</tr></tbody></table></div><p>
            このオプションを使用すると、NDB Cluster
            管理クライアントにシステムシェルからコマンドを送信できます。
            たとえば、次のコマンドはいずれも管理クライアントで
            <code class="literal">SHOW</code>
            を実行することと同等です。
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>ndb_mgm -e "SHOW"</code></strong>

shell&gt; <strong class="userinput"><code>ndb_mgm --execute="SHOW"</code></strong>
</pre><p>
            これは <code class="option">--execute</code> または
            <code class="option">-e</code> オプションが
            <span class="command"><strong>mysql</strong></span>
            コマンド行クライアントで動作する仕組みに似ています。
            <a class="xref" href="programs.html#command-line-options" title="4.2.2.1 コマンド行でのオプションの使用">セクション4.2.2.1「コマンド行でのオプションの使用」</a>を参照してください。
          </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
              このオプションを使用して渡される管理クライアントコマンドにスペース文字が含まれている場合は、コマンドを引用符で囲む<span class="emphasis"><em>必要があります</em></span>。
              一重引用符または二重引用符を使用できます。
              管理クライアントコマンドにスペース文字が含まれていない場合は、引用符を使用しなくてもかまいません。
            </p></div></li><li class="listitem"><p><a name="option_ndb_mgm_try-reconnect"></a>
            <code class="option">--try-reconnect=<em class="replaceable"><code>number</code></em></code>
          </p><div class="informaltable"><table frame="box" rules="all" summary="Properties for try-reconnect"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--try-reconnect=#</code></td>
</tr><tr><th>非推奨</th>
<td>はい</td>
</tr><tr><th>型</th>
<td>数値</td>
</tr><tr><th>型</th>
<td>Integer</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">12</code></td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">3</code></td>
</tr><tr><th>最小値</th>
<td><code class="literal">0</code></td>
</tr><tr><th>最大値</th>
<td><code class="literal">4294967295</code></td>
</tr></tbody></table></div><p>
            管理サーバーへの接続が切断された場合、ノードは
            5 秒ごとに再接続を試みます
            (成功するまで)。
            このオプションを使用することで、接続を中止して代わりにエラーを報告する前に接続を試行する回数を
            <em class="replaceable"><code>number</code></em>
            回に制限できます。
          </p><p>
            このオプションは非推奨であり、将来のリリースで削除される可能性があります。
            かわりに
            <code class="option">--connect-retries</code>
            を使用してください。
          </p></li></ul></div><p>
        <span class="command"><strong>ndb_mgm</strong></span>
        の使用方法に関する追加情報については、<a class="xref" href="mysql-cluster.html#mysql-cluster-mgm-client-commands" title="23.5.1 NDB Cluster 管理クライアントのコマンド">セクション23.5.1「NDB Cluster 管理クライアントのコマンド」</a>を参照してください。
      </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-cluster-programs-ndb-blob-tool"></a>23.4.6 ndb_blob_tool — NDB Cluster テーブルの BLOB および TEXT カラムのチェックおよび修復</h3></div></div></div><a class="indexterm" name="idm45563220677536"></a><p>
        このツールは、孤立した BLOB
        カラムパーツをチェックして
        <code class="literal">NDB</code>
        テーブルから削除するため、および孤立したパーツを一覧したファイルを生成するために使用できます。
        これは、<code class="literal">BLOB</code> または
        <code class="literal">TEXT</code>
        カラムが含まれている破損または損傷した
        <code class="literal">NDB</code>
        テーブルを診断および修復する場合に役に立つことがあります。
      </p><p>
        <span class="command"><strong>ndb_blob_tool</strong></span>
        の基本的な構文を次に示します。
      </p><pre class="programlisting">ndb_blob_tool [<em class="replaceable"><code>options</code></em>] <em class="replaceable"><code>table</code></em> [<em class="replaceable"><code>column</code></em>, ...]
</pre><p>
        <code class="option">--help</code>
        オプションを使用する場合を除き、1
        つ以上のオプション
        (<code class="option">--check-orphans</code>、<code class="option">--delete-orphans</code>、または
        <code class="option">--dump-file</code>)
        を含めることによって、実行するアクションを指定する必要があります。
        これらのオプションを指定すると、<span class="command"><strong>ndb_blob_tool</strong></span>
        がそれぞれ孤立した BLOB
        パーツをチェックしたり、孤立した BLOB
        パーツを削除したり、孤立した BLOB
        パーツを一覧するダンプファイルを生成したりします。これについての詳細は、このセクションで後述します。
      </p><p>
        <span class="command"><strong>ndb_blob_tool</strong></span>
        を呼び出すときは、テーブルの名前も指定する必要があります。
        また、必要に応じて、テーブル名の後ろに、(カンマで区切った)
        そのテーブルの 1 つ以上の
        <code class="literal">BLOB</code> または
        <code class="literal">TEXT</code>
        カラムの名前を続けることができます。
        カラムをリストしない場合、このツールはテーブルのすべての
        <code class="literal">BLOB</code> および
        <code class="literal">TEXT</code>
        カラムを処理します。
        データベースを指定する必要がある場合は、<code class="option">--database</code>
        (<code class="option">-d</code>) オプションを使用します。
      </p><p>
        <code class="option">--verbose</code>
        オプションは、ツールの進行状況に関する追加の情報を出力します。
      </p><p>
        次の表には、<span class="command"><strong>ndb_blob_tool</strong></span>
        に固有のオプションが含まれています。
        追加説明が表のあとにあります。 ほとんどの
        NDB Cluster プログラム (<span class="command"><strong>ndb_blob_tool</strong></span>
        を含む)
        に共通のオプションについては、<a class="xref" href="mysql-cluster.html#mysql-cluster-program-options-common" title="23.4.32 NDB Cluster プログラムに共通のオプション — NDB Cluster プログラムに共通のオプション">セクション23.4.32「NDB Cluster プログラムに共通のオプション — NDB Cluster プログラムに共通のオプション」</a>
        を参照してください。
      </p><div class="table"><a name="mysql-cluster-ndb_blob_tool-options-table"></a><p class="title"><b>表 23.28 プログラムで使用されるコマンドライン・オプション ndb_blob_tool</b></p><div class="table-contents"><table frame="box" rules="all"><col style="width: 33%"><col style="width: 34%"><col style="width: 33%"><thead><tr>
            <th scope="col">形式</th>
            <th scope="col">説明</th>
            <th scope="col">追加、非推奨、または削除された</th>
          </tr></thead><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_blob_tool_add-missing">--add-missing</a>
                </code>
              </p></th>
            <td>欠落しているものを実行するダミー BLOB
              パーツを書き込みます</td>
            <td><p>
                追加: NDB 8.0.20
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_blob_tool_check-missing">--check-missing</a>
                </code>
              </p></th>
            <td>インラインパーツを持つがパーツテーブルに 1
              つまたは複数のパーツがない BLOB
              をチェック</td>
            <td><p>
                追加: NDB 8.0.20
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_blob_tool_check-orphans">--check-orphans</a>
                </code>
              </p></th>
            <td>対応するインラインパーツがない BLOB
              パーツをチェック</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_blob_tool_database">--database=db_name</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_blob_tool_database">-d</a>
                </code>
              </p></th>
            <td>テーブルを探すデータベース</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_blob_tool_delete-orphans">--delete-orphans</a>
                </code>
              </p></th>
            <td>対応するインラインパーツがない BLOB パーツの削除</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_blob_tool_dump-file">--dump-file=file</a>
                </code>
              </p></th>
            <td>指定したファイルに孤立したキーを書き込みます</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_blob_tool_verbose">--verbose</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_blob_tool_verbose">-v</a>
                </code>
              </p></th>
            <td>冗長出力</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody></table></div></div><br class="table-break"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="option_ndb_blob_tool_add-missing"></a>
            <code class="option">--add-missing</code>
          </p><a class="indexterm" name="idm45563220599664"></a><a class="indexterm" name="idm45563220597520"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for add-missing"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--add-missing</code></td>
</tr><tr><th>導入</th>
<td>8.0.20-ndb-8.0.20</td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table></div><p>
            対応する BLOB 部分がない「NDB
            Cluster」テーブルのインライン部分ごとに、空白で構成される必要な長さのダミー
            BLOB 部分を記述します。
          </p></li><li class="listitem"><p><a name="option_ndb_blob_tool_check-missing"></a>
            <code class="option">--check-missing</code>
          </p><a class="indexterm" name="idm45563220580928"></a><a class="indexterm" name="idm45563220578768"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for check-missing"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--check-missing</code></td>
</tr><tr><th>導入</th>
<td>8.0.20-ndb-8.0.20</td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table></div><p>
            対応する BLOB 部分がない「NDB
            Cluster」テーブルのインライン部分を確認します。
          </p></li><li class="listitem"><p><a name="option_ndb_blob_tool_check-orphans"></a>
            <code class="option">--check-orphans</code>
          </p><a class="indexterm" name="idm45563220562336"></a><a class="indexterm" name="idm45563220560176"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for check-orphans"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--check-orphans</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table></div><p>
            対応するインライン部分がない「NDB
            Cluster」テーブルの BLOB 部分を確認します。
          </p></li><li class="listitem"><p><a name="option_ndb_blob_tool_database"></a>
            <code class="option">--database=<em class="replaceable"><code>db_name</code></em></code>,
            <code class="option">-d</code>
          </p><a class="indexterm" name="idm45563220545088"></a><a class="indexterm" name="idm45563220542960"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for database"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--database=db_name</code></td>
</tr><tr><th>型</th>
<td>文字列</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">[none]</code></td>
</tr></tbody></table></div><p>
            テーブルを探すデータベースを指定します。
          </p></li><li class="listitem"><p><a name="option_ndb_blob_tool_delete-orphans"></a>
            <code class="option">--delete-orphans</code>
          </p><a class="indexterm" name="idm45563220528736"></a><a class="indexterm" name="idm45563220526576"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for delete-orphans"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--delete-orphans</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table></div><p>
            対応するインライン部分がない BLOB
            部分を「NDB
            Cluster」テーブルから削除します。
          </p></li><li class="listitem"><p><a name="option_ndb_blob_tool_dump-file"></a>
            <code class="option">--dump-file=<em class="replaceable"><code>file</code></em></code>
          </p><a class="indexterm" name="idm45563220511872"></a><a class="indexterm" name="idm45563220509728"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for dump-file"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--dump-file=file</code></td>
</tr><tr><th>型</th>
<td>ファイル名</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">[none]</code></td>
</tr></tbody></table></div><p>
            孤立した BLOB カラムパーツのリストを
            <em class="replaceable"><code>file</code></em> に書き込みます。
            ファイルに書き込まれる情報には、各孤立した
            BLOB パーツのテーブルキーおよび BLOB
            パーツ番号が含まれます。
          </p></li><li class="listitem"><p><a name="option_ndb_blob_tool_verbose"></a>
            <code class="option">--verbose</code>
          </p><a class="indexterm" name="idm45563220494608"></a><a class="indexterm" name="idm45563220492432"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for verbose"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--verbose</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table></div><p>
            進行状況に関する追加情報をツールの出力に書き込みます。
          </p></li></ul></div><h4><a name="idm45563220479504"></a>例</h4><p>
        最初に、次に示す <code class="literal">CREATE
        TABLE</code>
        ステートメントを使用して、<code class="literal">test</code>
        データベースに <code class="literal">NDB</code>
        テーブルを作成します。
      </p><pre class="programlisting">USE test;

CREATE TABLE btest (
    c0 BIGINT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
    c1 TEXT,
    c2 BLOB
)   ENGINE=NDB;
</pre><p>
        その後、これに似た一連のステートメントを使用して、このテーブルにいくつかの行を挿入します。
      </p><pre class="programlisting">INSERT INTO btest VALUES (NULL, 'x', REPEAT('x', 1000));
</pre><p>
        このテーブルに対して
        <code class="option">--check-orphans</code>
        を指定して <span class="command"><strong>ndb_blob_tool</strong></span>
        を実行すると、次の出力が生成されます。
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>ndb_blob_tool --check-orphans --verbose -d test btest</code></strong>
connected
processing 2 blobs
processing blob #0 c1 NDB$BLOB_19_1
NDB$BLOB_19_1: nextResult: res=1
total parts: 0
orphan parts: 0
processing blob #1 c2 NDB$BLOB_19_2
NDB$BLOB_19_2: nextResult: res=0
NDB$BLOB_19_2: nextResult: res=0
NDB$BLOB_19_2: nextResult: res=0
NDB$BLOB_19_2: nextResult: res=0
NDB$BLOB_19_2: nextResult: res=0
NDB$BLOB_19_2: nextResult: res=0
NDB$BLOB_19_2: nextResult: res=0
NDB$BLOB_19_2: nextResult: res=0
NDB$BLOB_19_2: nextResult: res=0
NDB$BLOB_19_2: nextResult: res=0
NDB$BLOB_19_2: nextResult: res=1
total parts: 10
orphan parts: 0
disconnected

NDBT_ProgramExit: 0 - OK
</pre><p>
        <code class="literal">c1</code> は <code class="literal">TEXT</code>
        カラムですが、カラム <code class="literal">c1</code>
        に関連付けられている <code class="literal">NDB</code> BLOB
        カラムパーツはないことをこのツールは報告しています。
        これは、<code class="literal">NDB</code>
        テーブルでは、<code class="literal">BLOB</code>
        または <code class="literal">TEXT</code>
        カラム値の最初の 256
        バイトのみがインラインで格納され、それを超過する部分
        (ある場合)
        のみが別個に格納されるためです。したがって、これらのタイプのいずれかのカラムに
        256 バイトを超える値がない場合、このカラムの
        <code class="literal">BLOB</code> カラムパーツは
        <code class="literal">NDB</code> によって作成されません。
        詳細は、<a class="xref" href="data-types.html#storage-requirements" title="11.7 データ型のストレージ要件">セクション11.7「データ型のストレージ要件」</a>を参照してください。
      </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-cluster-programs-ndb-config"></a>23.4.7 ndb_config — NDB Cluster 構成情報の抽出</h3></div></div></div><a class="indexterm" name="idm45563220458464"></a><p>
        このツールは、複数のソースのいずれかからデータノード、SQL
        ノード、および API
        ノードの現在の構成情報を抽出: NDB Cluster
        管理ノード、またはその
        <code class="filename">config.ini</code> または
        <code class="filename">my.cnf</code> ファイル。
        デフォルトでは、管理ノードが構成データのソースです。デフォルトをオーバーライドするには、<code class="option">--config-file</code>
        オプションまたは
        <code class="option">--mycnf</code>
        オプションを指定して ndb_config を実行します。
        <code class="option">--config_from_node=<em class="replaceable"><code>node_id</code></em></code>
        にノード ID
        を指定することによって、データノードをソースとして使用することもできます。
      </p><p>
        <span class="command"><strong>ndb_config</strong></span>
        は、使用できるすべての構成パラメータ、およびそれらのデフォルト値、最大値、最小値、その他の情報のオフラインダンプを生成することもできます。
        このダンプはテキスト形式または XML
        形式で生成できます。詳細は、このセクションで後述する
        <code class="option">--configinfo</code> および
        <code class="option">--xml</code>
        オプションの説明を参照してください)。
      </p><p>
        <code class="option">--nodes</code>、<code class="option">--system</code>、または
        <code class="option">--connections</code>
        のいずれかのオプションを使用すると、結果をセクション
        (<code class="literal">DB</code>、<code class="literal">SYSTEM</code>、または
        <code class="literal">CONNECTIONS</code>)
        によってフィルタリングできます。
      </p><p>
        次の表には、<span class="command"><strong>ndb_config</strong></span>
        に固有のオプションが含まれています。
        追加説明が表のあとにあります。 ほとんどの
        NDB Cluster プログラム (<span class="command"><strong>ndb_config</strong></span>
        を含む)
        に共通のオプションについては、<a class="xref" href="mysql-cluster.html#mysql-cluster-program-options-common" title="23.4.32 NDB Cluster プログラムに共通のオプション — NDB Cluster プログラムに共通のオプション">セクション23.4.32「NDB Cluster プログラムに共通のオプション — NDB Cluster プログラムに共通のオプション」</a>
        を参照してください。
      </p><div class="table"><a name="mysql-cluster-ndb_config-options-table"></a><p class="title"><b>表 23.29 プログラムで使用されるコマンドライン・オプション ndb_config</b></p><div class="table-contents"><table frame="box" rules="all"><col style="width: 33%"><col style="width: 34%"><col style="width: 33%"><thead><tr>
            <th scope="col">形式</th>
            <th scope="col">説明</th>
            <th scope="col">追加、非推奨、または削除された</th>
          </tr></thead><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_config_cluster-config-suffix">--cluster-config-suffix=name</a>
                </code>
              </p></th>
            <td>my.cnf ファイルの cluster_config
              セクションの読取り時にデフォルトのグループサフィクスをオーバーライドします。テストで使用されます</td>
            <td><p>
                追加: NDB 8.0.24
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_config_config-file">--config-file=file_name</a>
                </code>
              </p></th>
            <td>config.ini ファイルへのパスを設定します</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_config_config_from_node">--config-from-node=#</a>
                </code>
              </p></th>
            <td>この ID を持つノードから構成データを取得します
              (データノードである必要があります)</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_config_configinfo">--configinfo</a>
                </code>
              </p></th>
            <td>すべての NDB
              構成パラメータに関する情報をデフォルト値、最大値、および最小値とともにテキスト形式でダンプします。
              XML 出力を取得するには、--xml
              とともに使用します</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_config_connections">--connections</a>
                </code>
              </p></th>
            <td>接続情報 ([tcp]、[tcp default]、[sci]、[sci
              default]、[shm]、またはクラスタ構成ファイルの[shm
              default]セクション) のみを出力します。
              --system または --nodes
              とともには使用できません</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_config_diff-default">--diff-default</a>
                </code>
              </p></th>
            <td>デフォルト以外の値を持つ構成パラメータのみ出力</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_config_fields">--fields=string</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_config_fields">-f</a>
                </code>
              </p></th>
            <td>フィールド区切り文字</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_config_host">--host=name</a>
                </code>
              </p></th>
            <td>ホストを指定します</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_config_mycnf">--mycnf</a>
                </code>
              </p></th>
            <td>my.cnf ファイルから構成データを読み取ります</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_config_nodeid">--nodeid</a>
                </code>
              </p></th>
            <td>この ID のノードの構成を取得します</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_config_nodes">--nodes</a>
                </code>
              </p></th>
            <td>ノード情報 ([ndbd]またはクラスタ構成ファイルの[ndbd
              default]セクション) のみを出力します。
              --system または --connections
              とともには使用できません</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_common_ndb-connectstring">-c</a>
                </code>
              </p></th>
            <td>--ndb-connectstring の短縮形</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_config_query">--query=string</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_config_query">-q</a>
                </code>
              </p></th>
            <td>1 つ以上のクエリーオプション (属性)</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_config_query-all">--query-all</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_config_query-all">-a</a>
                </code>
              </p></th>
            <td>すべてのパラメータと値を単一のカンマ区切り文字列にダンプ</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_config_rows">--rows=string</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_config_rows">-r</a>
                </code>
              </p></th>
            <td>行区切り文字</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_config_system">--system</a>
                </code>
              </p></th>
            <td>「SYSTEM の印刷」セクション情報のみ (ndb_config
              --configinfo の出力を参照)。 --nodes または
              --connections とともには使用できません</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_config_type">--type=name</a>
                </code>
              </p></th>
            <td>ノードタイプを指定します</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_config_xml">--configinfo
                --xml</a> </code>
              </p></th>
            <td>すべての NDB
              構成パラメータのダンプをデフォルト値、最大値、および最小値とともに
              XML 形式で取得するには、--configinfo に -xml
              を使用します</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody></table></div></div><br class="table-break"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="option_ndb_config_cluster-config-suffix"></a>
            <code class="option">cluster-config-suffix</code>
          </p><a class="indexterm" name="idm45563220324112"></a><a class="indexterm" name="idm45563220322048"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for cluster-config-suffix"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--cluster-config-suffix=name</code></td>
</tr><tr><th>導入</th>
<td>8.0.24-ndb-8.0.24</td>
</tr><tr><th>型</th>
<td>文字列</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">[none]</code></td>
</tr></tbody></table></div><p>
            <code class="filename">my.cnf</code>
            でクラスタ構成セクションを読み取るときに、デフォルトのグループサフィクスをオーバーライドします。テストで使用されます。
          </p></li><li class="listitem"><p><a name="option_ndb_config_configinfo"></a>
            <code class="option">--configinfo</code>
          </p><a class="indexterm" name="idm45563220304672"></a><a class="indexterm" name="idm45563220302528"></a><p>
            <code class="option">--configinfo</code>
            オプションを指定すると、<span class="command"><strong>ndb_config</strong></span>
            は、<span class="command"><strong>ndb_config</strong></span> が属する NDB Cluster
            配布でサポートされている各 NDB Cluster
            構成パラメータのリストをダンプします。次の情報が含まれます:
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                各パラメータの目的、効果、および使用方法の簡単な説明
              </p></li><li class="listitem"><p>
                パラメータを使用できる
                <code class="filename">config.ini</code>
                ファイルのセクション
              </p></li><li class="listitem"><p>
                パラメータのデータ型または単位
              </p></li><li class="listitem"><p>
                該当する場合、パラメータのデフォルト値、最小値、および最大値
              </p></li><li class="listitem"><p>
                NDB Cluster
                のリリースバージョンとビルド情報
              </p></li></ul></div><p>
            デフォルトでは、この出力はテキスト形式です。
            この出力の一部を次に示します。
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>ndb_config --configinfo</code></strong>

****** SYSTEM ******

Name (String)
Name of system (NDB Cluster)
MANDATORY

PrimaryMGMNode (Non-negative Integer)
Node id of Primary ndb_mgmd(MGM) node
Default: 0 (Min: 0, Max: 4294967039)

ConfigGenerationNumber (Non-negative Integer)
Configuration generation number
Default: 0 (Min: 0, Max: 4294967039)

****** DB ******

MaxNoOfSubscriptions (Non-negative Integer)
Max no of subscriptions (default 0 == MaxNoOfTables)
Default: 0 (Min: 0, Max: 4294967039)

MaxNoOfSubscribers (Non-negative Integer)
Max no of subscribers (default 0 == 2 * MaxNoOfTables)
Default: 0 (Min: 0, Max: 4294967039)

…
</pre><p>
            このオプションを
            <code class="option">--xml</code>
            オプションとともに使用して、XML
            形式で出力を取得します。
          </p></li><li class="listitem"><p><a name="option_ndb_config_config-file"></a>
            <code class="option">--config-file=<em class="replaceable"><code>path-to-file</code></em></code>
          </p><a class="indexterm" name="idm45563220284704"></a><a class="indexterm" name="idm45563220282560"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for config-file"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--config-file=file_name</code></td>
</tr><tr><th>型</th>
<td>ファイル名</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal"></code></td>
</tr></tbody></table></div><p>
            管理サーバーの構成ファイル
            (<code class="filename">config.ini</code>)
            へのパスを指定します。
            これには相対パスまたは絶対パスを指定できます。
            <span class="command"><strong>ndb_config</strong></span>
            が呼び出されるホストと別のホストに管理ノードがある場合は、絶対パスを使用する必要があります。
          </p></li><li class="listitem"><p><a name="option_ndb_config_config_from_node"></a>
            <code class="option">--config_from_node=#</code>
          </p><a class="indexterm" name="idm45563220266496"></a><a class="indexterm" name="idm45563220264336"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for config_from_node"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--config-from-node=#</code></td>
</tr><tr><th>型</th>
<td>数値</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">none</code></td>
</tr><tr><th>最小値</th>
<td><code class="literal">1</code></td>
</tr><tr><th>最大値</th>
<td><code class="literal">48</code></td>
</tr></tbody></table></div><p>
            この ID
            を持つデータノードからクラスタの構成データを取得します。
          </p><p>
            この ID
            を持つノードがデータノードではない場合、<span class="command"><strong>ndb_config</strong></span>
            はエラーで失敗します
            (代わりに、管理ノードから構成データを取得するには、単純にこのオプションを省略します)。
          </p></li><li class="listitem"><p><a name="option_ndb_config_connections"></a>
            <code class="option">--connections</code>
          </p><a class="indexterm" name="idm45563220243472"></a><a class="indexterm" name="idm45563220241328"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for connections"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--connections</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table></div><p>
            <code class="literal">CONNECTIONS</code> 情報のみ
            (クラスタ構成ファイルの<code class="literal">[tcp]</code>,
            <code class="literal">[tcp default]</code>,
            <code class="literal">[shm]</code>または<code class="literal">[shm
            default]</code>セクションにあるパラメータに関する情報)
            を出力するように <span class="command"><strong>ndb_config</strong></span>
            に指示します
            (詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-tcp-definition" title="23.3.3.10 NDB Cluster TCP/IP 接続">セクション23.3.3.10「NDB Cluster TCP/IP 接続」</a>
            および <a class="xref" href="mysql-cluster.html#mysql-cluster-shm-definition" title="23.3.3.12 NDB Cluster の共有メモリー接続">セクション23.3.3.12「NDB Cluster の共有メモリー接続」</a>
            を参照)。
          </p><p>
            このオプションは、<code class="option">--nodes</code>
            および <code class="option">--system</code>
            と相互に排他的です。これらの 3
            つのオプションのいずれかのみを使用できます。
          </p></li><li class="listitem"><p><a name="option_ndb_config_diff-default"></a>
            <code class="option">--diff-default</code>
          </p><a class="indexterm" name="idm45563220218912"></a><a class="indexterm" name="idm45563220216752"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for diff-default"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--diff-default</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table></div><p>
            デフォルト以外の値を持つ構成パラメータのみを出力します。
          </p></li><li class="listitem"><p><a name="option_ndb_config_fields"></a>
            <code class="option">--fields=<em class="replaceable"><code>delimiter</code></em></code>,
            <code class="option">-f</code> <em class="replaceable"><code>delimiter</code></em>
          </p><a class="indexterm" name="idm45563220201312"></a><a class="indexterm" name="idm45563220199184"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for fields"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--fields=string</code></td>
</tr><tr><th>型</th>
<td>文字列</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal"></code></td>
</tr></tbody></table></div><p>
            結果のフィールドを区切るために使用される
            <em class="replaceable"><code>delimiter</code></em>
            文字列を指定します。 デフォルトは
            <code class="literal">,</code> (カンマ) です。
          </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
              <em class="replaceable"><code>delimiter</code></em>
              にスペースまたはエスケープ (改行文字の
              <code class="literal">\n</code> など)
              が含まれている場合は、引用符で囲む必要があります。
            </p></div></li><li class="listitem"><p><a name="option_ndb_config_host"></a>
            <code class="option">--host=<em class="replaceable"><code>hostname</code></em></code>
          </p><a class="indexterm" name="idm45563220181328"></a><a class="indexterm" name="idm45563220179152"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for host"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--host=name</code></td>
</tr><tr><th>型</th>
<td>文字列</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal"></code></td>
</tr></tbody></table></div><p>
            構成情報を取得するノードのホスト名を指定します。
          </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
              ホスト名 <code class="literal">localhost</code> は通常、IP
              アドレス <code class="literal">127.0.0.1</code>
              に解決されますが、これはすべてのオペレーティングプラットフォームおよび構成でそうなるとはかぎりません。
              これは、<code class="filename">config.ini</code> に
              <code class="literal">localhost</code>
              が使用されて、<code class="literal">localhost</code>
              が別のアドレスに解決される
              (たとえば、一部のバージョンの SUSE Linux
              では、これは <code class="literal">127.0.0.2</code> です)
              別のホストで <span class="command"><strong>ndb_config</strong></span>
              が実行されている場合、<span class="command"><strong>ndb_config
              <code class="option">--host=localhost</code></strong></span>
              が失敗することがあることを意味します。
              一般に、最良の結果を得るには、ホストに関連するすべての
              NDB Cluster 構成値に数値の IP
              アドレスを使用するか、すべての NDB Cluster
              ホストが同じ方法で <code class="literal">localhost</code>
              を処理することを確認するようにしてください。
            </p></div></li><li class="listitem"><p><a name="option_ndb_config_mycnf"></a>
            <code class="option">--mycnf</code>
          </p><a class="indexterm" name="idm45563220155776"></a><a class="indexterm" name="idm45563220153600"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for mycnf"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--mycnf</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table></div><p>
            <code class="filename">my.cnf</code>
            ファイルから構成データを読み取ります。
          </p></li><li class="listitem"><p><a name="option_ndb_config_ndb-connectstring"></a>
            <code class="option">--ndb-connectstring=<em class="replaceable"><code>connection_string</code></em></code>,
            <code class="option">-c
            <em class="replaceable"><code>connection_string</code></em></code>
          </p><a class="indexterm" name="idm45563220137632"></a><a class="indexterm" name="idm45563220135472"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndb-connectstring"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><p class="valid-value"><code class="literal">--ndb-connectstring=connectstring</code></p><p class="valid-value"><code class="literal">--connect-string=connectstring</code></p></td>
</tr><tr><th>型</th>
<td>文字列</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">localhost:1186</code></td>
</tr></tbody></table></div><p>
            管理サーバーに接続するために使用する接続文字列を指定します。
            この接続文字列の形式は、<a class="xref" href="mysql-cluster.html#mysql-cluster-connection-strings" title="23.3.3.3 NDB Cluster 接続文字列">セクション23.3.3.3「NDB Cluster 接続文字列」</a>で説明したものと同じであり、デフォルトは
            <code class="literal">localhost:1186</code> です。
          </p></li><li class="listitem"><p><a name="option_ndb_config_nodeid"></a>
            <code class="option">--nodeid=<em class="replaceable"><code>node_id</code></em></code>
          </p><a class="indexterm" name="idm45563220117872"></a><a class="indexterm" name="idm45563220115696"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndb-nodeid"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--ndb-nodeid=#</code></td>
</tr><tr><th>型</th>
<td>数値</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">0</code></td>
</tr></tbody></table></div><p>
            構成情報を取得するノードのノード ID
            を指定します。
          </p></li><li class="listitem"><p><a name="option_ndb_config_nodes"></a>
            <code class="option">--nodes</code>
          </p><a class="indexterm" name="idm45563220101568"></a><a class="indexterm" name="idm45563220099392"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for nodes"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--nodes</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table></div><p>
            クラスタ構成ファイルの<code class="literal">[ndbd]</code>または<code class="literal">[ndbd
            default]</code>セクションで定義されたパラメータにのみ関連する情報を出力するように
            <span class="command"><strong>ndb_config</strong></span> に指示します
            (<a class="xref" href="mysql-cluster.html#mysql-cluster-ndbd-definition" title="23.3.3.6 NDB Cluster データノードの定義">セクション23.3.3.6「NDB Cluster データノードの定義」</a>
            を参照)。
          </p><p>
            このオプションは、<code class="option">--connections</code>
            および <code class="option">--system</code>
            と相互に排他的です。これらの 3
            つのオプションのいずれかのみを使用できます。
          </p></li><li class="listitem"><p><a name="option_ndb_config_query"></a>
            <code class="option">--query=<em class="replaceable"><code>query-options</code></em></code>,
            <code class="option">-q</code> <em class="replaceable"><code>query-options</code></em>
          </p><a class="indexterm" name="idm45563220078848"></a><a class="indexterm" name="idm45563220076720"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for query"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--query=string</code></td>
</tr><tr><th>型</th>
<td>文字列</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal"></code></td>
</tr></tbody></table></div><p>
            これは、<span class="firstterm">クエリーオプション</span>のカンマ区切りのリストです。つまり、1
            つ以上の返されるノード属性のリストです。
            これには、<code class="literal">nodeid</code> (ノード
            ID)、タイプ
            (ノードタイプ、<code class="literal">ndbd</code>、<code class="literal">mysqld</code>
            または <code class="literal">ndb_mgmd</code>)
            および値を取得する構成パラメータが含まれます。
          </p><p>
            たとえば、<code class="option">--query=nodeid,type,datamemory,datadir</code>
            は各ノードのノード
            ID、ノードタイプ、<code class="literal">DataMemory</code>
            および <code class="literal">DataDir</code>
            を返します。
          </p><a class="indexterm" name="idm45563220057232"></a><a class="indexterm" name="idm45563220055056"></a><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
              指定したパラメータが特定のタイプのノードに当てはまらない場合、対応する値には空の文字列が返されます。
              詳細はこのセクションで後述する例を参照してください。
            </p></div></li><li class="listitem"><p><a name="option_ndb_config_query-all"></a>
            <code class="option">--query-all</code>, <code class="option">-a</code>
          </p><a class="indexterm" name="idm45563220049696"></a><a class="indexterm" name="idm45563220047552"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for query-all"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--query-all</code></td>
</tr><tr><th>型</th>
<td>文字列</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal"></code></td>
</tr></tbody></table></div><p>
            すべてのクエリーオプション (ノード属性)
            のカンマ区切りリストを返します。このリストは単一の文字列であることに注意してください。
          </p></li><li class="listitem"><p><a name="option_ndb_config_rows"></a>
            <code class="option">--rows=<em class="replaceable"><code>separator</code></em></code>,
            <code class="option">-r</code> <em class="replaceable"><code>separator</code></em>
          </p><a class="indexterm" name="idm45563220032144"></a><a class="indexterm" name="idm45563220029968"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for rows"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--rows=string</code></td>
</tr><tr><th>型</th>
<td>文字列</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal"></code></td>
</tr></tbody></table></div><p>
            結果の行を区切るために使用される
            <em class="replaceable"><code>separator</code></em>
            文字列を指定します。
            デフォルトはスペース文字です。
          </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
              <em class="replaceable"><code>separator</code></em>
              にスペースまたはエスケープ (改行文字の
              <code class="literal">\n</code> など)
              が含まれている場合は、引用符で囲む必要があります。
            </p></div></li><li class="listitem"><p><a name="option_ndb_config_system"></a>
            <code class="option">--system</code>
          </p><a class="indexterm" name="idm45563220013008"></a><a class="indexterm" name="idm45563220010880"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for system"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--system</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table></div><p>
            <code class="literal">SYSTEM</code>
            の情報のみを出力するように
            <span class="command"><strong>ndb_config</strong></span> に通知します。
            これは、実行時に変更できないシステム変数で構成されているため、クラスタ構成ファイルに対応するセクションはありません。
            これらは、<span class="command"><strong>ndb_config</strong></span>
            <code class="option">--configinfo</code>
            の出力に表示されます (<code class="literal">****** SYSTEM
            ******</code> という接頭辞が付いています)。
          </p><p>
            このオプションは、<code class="option">--nodes</code>
            および <code class="option">--connections</code>
            と相互に排他的です。これらの 3
            つのオプションのいずれかのみを使用できます。
          </p></li><li class="listitem"><p><a name="option_ndb_config_type"></a>
            <code class="option">--type=<em class="replaceable"><code>node_type</code></em></code>
          </p><a class="indexterm" name="idm45563219990080"></a><a class="indexterm" name="idm45563219987904"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for type"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--type=name</code></td>
</tr><tr><th>型</th>
<td>列挙</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">[none]</code></td>
</tr><tr><th>有効な値</th>
<td><p class="valid-value"><code class="literal">ndbd</code></p><p class="valid-value"><code class="literal">mysqld</code></p><p class="valid-value"><code class="literal">ndb_mgmd</code></p></td>
</tr></tbody></table></div><p>
            指定した <em class="replaceable"><code>node_type</code></em>
            のノード
            (<code class="literal">ndbd</code>、<code class="literal">mysqld</code>、または
            <code class="literal">ndb_mgmd</code>)
            に該当する構成値のみが返されるように、結果をフィルタリングします。
          </p></li><li class="listitem"><p><a name="option_ndb_config_usage"></a>
            <code class="option">--usage</code>、<code class="option">--help</code> または
            <code class="option">-?</code>
          </p><a class="indexterm" name="idm45563219965248"></a><a class="indexterm" name="idm45563219963072"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for help"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><p class="valid-value"><code class="literal">--help</code></p><p class="valid-value"><code class="literal">--usage</code></p></td>
</tr></tbody></table></div><p>
            <span class="command"><strong>ndb_config</strong></span>
            が使用可能なオプションのリストを出力してから終了します。
          </p></li><li class="listitem"><p><a name="option_ndb_config_version"></a>
            <code class="option">--version</code>, <code class="option">-V</code>
          </p><a class="indexterm" name="idm45563219950816"></a><a class="indexterm" name="idm45563219948688"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for version"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--version</code></td>
</tr></tbody></table></div><p>
            <span class="command"><strong>ndb_config</strong></span>
            がバージョン情報文字列を出力してから終了します。
          </p></li><li class="listitem"><p><a name="option_ndb_config_xml"></a>
            <code class="option">--configinfo</code> <code class="option">--xml</code>
          </p><a class="indexterm" name="idm45563219937920"></a><a class="indexterm" name="idm45563219935760"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for xml"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--configinfo --xml</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">false</code></td>
</tr></tbody></table></div><p>
            このオプションを追加して、<span class="command"><strong>ndb_config</strong></span>
            <code class="option">--configinfo</code> が XML
            として出力を提供するようにします。
            このような出力の一部を次の例に示します:
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>ndb_config --configinfo --xml</code></strong>

&lt;configvariables protocolversion="1" ndbversionstring="5.7.33-ndb-7.5.21"
                    ndbversion="460032" ndbversionmajor="7" ndbversionminor="5"
                    ndbversionbuild="0"&gt;
  &lt;section name="SYSTEM"&gt;
    &lt;param name="Name" comment="Name of system (NDB Cluster)" type="string"
              mandatory="true"/&gt;
    &lt;param name="PrimaryMGMNode" comment="Node id of Primary ndb_mgmd(MGM) node"
              type="unsigned" default="0" min="0" max="4294967039"/&gt;
    &lt;param name="ConfigGenerationNumber" comment="Configuration generation number"
              type="unsigned" default="0" min="0" max="4294967039"/&gt;
  &lt;/section&gt;
  &lt;section name="MYSQLD" primarykeys="NodeId"&gt;
    &lt;param name="wan" comment="Use WAN TCP setting as default" type="bool"
              default="false"/&gt;
    &lt;param name="HostName" comment="Name of computer for this node"
              type="string" default=""/&gt;
    &lt;param name="Id" comment="NodeId" type="unsigned" mandatory="true"
              min="1" max="255" deprecated="true"/&gt;
    &lt;param name="NodeId" comment="Number identifying application node (mysqld(API))"
              type="unsigned" mandatory="true" min="1" max="255"/&gt;
    &lt;param name="ExecuteOnComputer" comment="HostName" type="string"
              deprecated="true"/&gt;

    …

  &lt;/section&gt;

  …

&lt;/configvariables&gt;
</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
              通常、<span class="command"><strong>ndb_config</strong></span>
              <code class="option">--configinfo</code> <code class="option">--xml</code>
              によって生成される XML 出力では 1 行に 1
              要素の形式が使用されますが、上記の例および次の例では読みやすくするために空白を追加しています。
              ほとんどの XML
              プロセッサでは通常の処理として不要な空白が無視されるか、無視するように指示できるため、これによってこの出力を使用するアプリケーションに違いは生じないはずです。
            </p></div><p>
            この XML
            出力は、特定のパラメータが変更されたときに、<code class="option">--initial</code>
            オプションを使用してデータノードを再起動する必要があることも示しています。
            これは、対応する <code class="literal">&lt;param&gt;</code>
            要素に <code class="literal">initial="true"</code>
            属性が表示されることによって示されます。
            また、再起動タイプ (<code class="literal">system</code>
            または <code class="literal">node</code>)
            も示されます。これは、特定のパラメータでシステムの再起動が要求される場合に、対応する
            <code class="literal">&lt;param&gt;</code> 要素に
            <code class="literal">restart="system"</code>
            属性が表示されることによって示されます。
            たとえば、<code class="literal">Diskless</code>
            パラメータの値セットを変更すると、次に示されているようにシステムの初期再起動が必要となります
            (<code class="literal">restart</code> 属性および
            <code class="literal">initial</code>
            属性が見やすいように強調表示されています)。
          </p><pre class="programlisting">&lt;param name="Diskless" comment="Run wo/ disk" type="bool" default="false"
          <span class="emphasis"><em>restart="system" initial="true"</em></span>/&gt;
</pre><p>
            現在、初期再起動が必要ないパラメータに対応する
            <code class="literal">&lt;param&gt;</code> 要素の XML
            出力には、<code class="literal">initial</code>
            属性は表示されません。言い換えると、<code class="literal">initial="false"</code>
            がデフォルトであり、属性が表示されていない場合は値
            <code class="literal">false</code> を想定してください。
            同様に、デフォルトの再起動タイプは
            <code class="literal">node</code>
            (つまり、クラスタのオンラインまたは<span class="quote">「<span class="quote">ローリング</span>」</span>再起動)
            ですが、<code class="literal">restart</code>
            属性は再起動タイプが <code class="literal">system</code>
            (すべてのクラスタノードを同時にシャットダウンしてから再起動する必要があることを意味します)
            である場合にのみ表示されます。
          </p><p>
            非推奨のパラメータは、次に示すように、<code class="literal">deprecated</code>
            属性によって XML 出力に示されます:
          </p><pre class="programlisting">&lt;param name="NoOfDiskPagesToDiskAfterRestartACC" comment="DiskCheckpointSpeed"
       type="unsigned" default="20" min="1" max="4294967039" <span class="emphasis"><em>deprecated="true"</em></span>/&gt;
</pre><p>
            このような場合、<code class="literal">comment</code>
            は、非推奨のパラメータよりも優先される 1
            つ以上のパラメータを参照します。
            <code class="literal">initial</code>
            と同様に、<code class="literal">deprecated</code>
            属性は、パラメータが
            <code class="literal">deprecated="true"</code>で非推奨の場合にのみ示され、非推奨ではないパラメータにはまったく表示されません。
            (Bug #21127135)
          </p><p>
            NDB 7.5.0
            以降では、次に示すように、必要なパラメータは
            <code class="literal">mandatory="true"</code>で示されます:
          </p><pre class="programlisting">&lt;param name="NodeId"
          comment="Number identifying application node (mysqld(API))"
          type="unsigned" <span class="emphasis"><em>mandatory="true"</em></span> min="1" max="255"/&gt;
</pre><p>
            <code class="literal">initial</code> または
            <code class="literal">deprecated</code>
            属性は、初期再起動が必要なパラメータまたは非推奨のパラメータに対してのみ表示されるのとほぼ同じ方法で、<code class="literal">mandatory</code>
            属性は、指定されたパラメータが実際に必要な場合にのみ含まれます。
          </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">重要</div><p>
              <code class="option">--xml</code> オプションは
              <code class="option">--configinfo</code>
              オプションを指定した場合にのみ使用できます。
              <code class="option">--configinfo</code> を指定せずに
              <code class="option">--xml</code>
              を使用すると、エラーで失敗します。
            </p></div><p>
            このプログラムで現在の構成データを取得するために使用されるオプションとは異なり、<code class="option">--configinfo</code>
            および <code class="option">--xml</code>
            は、<span class="command"><strong>ndb_config</strong></span> のコンパイル時に
            NDB Cluster
            ソースから取得された情報を使用します。
            このため、これらのオプションでは、実行中の
            NDB Cluster
            への接続や、<code class="filename">config.ini</code> または
            <code class="filename">my.cnf</code>
            ファイルへのアクセスは必要ありません。
          </p></li></ul></div><p>
        他の <span class="command"><strong>ndb_config</strong></span> オプション
        (<code class="option">--query</code>、<code class="option">--type</code>
        など) と <code class="option">--configinfo</code>
        (<code class="option">--xml</code>
        オプションの有無にかかわらず)
        の組合せはサポートされていません。
        現在、そうしようとすると通常、<code class="option">--configinfo</code>
        または <code class="option">--xml</code>
        以外のすべてのオプションが単に無視されます。
        <span class="emphasis"><em>ただし、この動作は保証されず、今後変更されることがあります</em></span>。
        また、<span class="command"><strong>ndb_config</strong></span> を
        <code class="option">--configinfo</code>
        オプションとともに使用した場合、NDB Cluster
        にアクセスしたり、ファイルを読み取ったりしないため、<code class="option">--ndb-connectstring</code>
        や <code class="option">--config-file</code> with
        <code class="option">--configinfo</code>
        などの追加オプションを指定しようとしても目的はありません。
      </p><h4><a name="idm45563219866608"></a>例</h4><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
            クラスタのノード ID
            および各ノードのタイプを取得するには、次のようにします。
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>./ndb_config --query=nodeid,type --fields=':' --rows='\n'</code></strong>
1:ndbd
2:ndbd
3:ndbd
4:ndbd
5:ndb_mgmd
6:mysqld
7:mysqld
8:mysqld
9:mysqld
</pre><p>
            この例では、<code class="option">--fields</code>
            オプションを使用して ID
            および各ノードのタイプをコロン
            (<code class="literal">:</code>)
            で区切り、<code class="option">--rows</code>
            オプションを使用して各ノードの値を新しい行に出力しています。
          </p></li><li class="listitem"><p>
            データノード、SQL ノード、および API
            ノードが管理サーバーに接続するために使用できる接続文字列を生成するには、次のようにします。
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>./ndb_config --config-file=usr/local/mysql/cluster-data/config.ini \
--query=hostname,portnumber --fields=: --rows=, --type=ndb_mgmd</code></strong>
198.51.100.179:1186
</pre></li><li class="listitem"><p>
            このように <span class="command"><strong>ndb_config</strong></span>
            を起動すると、(<code class="option">--type</code>
            オプションを使用して)
            データノードのみがチェックされ、各ノード
            ID とホスト名の値、およびその
            <code class="literal">DataMemory</code> と
            <code class="literal">DataDir</code>
            パラメータに設定された値が表示されます:
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>./ndb_config --type=ndbd --query=nodeid,host,datamemory,datadir -f ' : ' -r '\n'</code></strong>
1 : 198.51.100.193 : 83886080 : /usr/local/mysql/cluster-data
2 : 198.51.100.112 : 83886080 : /usr/local/mysql/cluster-data
3 : 198.51.100.176 : 83886080 : /usr/local/mysql/cluster-data
4 : 198.51.100.119 : 83886080 : /usr/local/mysql/cluster-data
</pre><p>
            この例では、短いオプションの
            <code class="option">-f</code> および <code class="option">-r</code>
            を使用してフィールドデリミタと行セパレータをそれぞれ設定し、短いオプションの
            <code class="option">-q</code>
            を使用して取得するパラメータのリストを渡しています。
          </p></li><li class="listitem"><p>
            特定の 1
            つのホスト以外のホストを結果から除外するには、<code class="option">--host</code>
            オプションを使用します。
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>./ndb_config --host=198.51.100.176 -f : -r '\n' -q id,type</code></strong>
3:ndbd
5:ndb_mgmd
</pre><p>
            また、この例では、短い形式 <code class="option">-q</code>
            を使用して、問い合わせる属性を指定しています。
          </p><p>
            同様に、<code class="option">--nodeid</code>
            オプションを使用して、特定の ID
            を持つノードに結果を制限できます。
          </p></li></ol></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-cluster-programs-ndb-delete-all"></a>23.4.8 ndb_delete_all — NDB テーブルからのすべての行の削除</h3></div></div></div><a class="indexterm" name="idm45563219839616"></a><p>
        <span class="command"><strong>ndb_delete_all</strong></span> は、指定された
        <code class="literal">NDB</code>
        テーブルからすべての行を削除します。
        これは、<code class="literal">DELETE</code> または
        <code class="literal">TRUNCATE TABLE</code>
        よりも速いことがあります。
      </p><h4><a name="idm45563219833824"></a>使用法</h4><pre class="programlisting">ndb_delete_all -c <em class="replaceable"><code>connection_string</code></em> <em class="replaceable"><code>tbl_name</code></em> -d <em class="replaceable"><code>db_name</code></em>
</pre><p>
        これは、<em class="replaceable"><code>db_name</code></em>
        という名前のデータベースの
        <em class="replaceable"><code>tbl_name</code></em>
        という名前のテーブルからすべての行を削除しています。
        MySQL で <code class="literal">TRUNCATE
        <em class="replaceable"><code>db_name</code></em>.<em class="replaceable"><code>tbl_name</code></em></code>
        を実行することとまったく同じです。
      </p><p>
        次の表には、<span class="command"><strong>ndb_delete_all</strong></span>
        に固有のオプションが含まれています。
        追加説明が表のあとにあります。 ほとんどの
        NDB Cluster プログラム (<span class="command"><strong>ndb_delete_all</strong></span>
        を含む)
        に共通のオプションについては、<a class="xref" href="mysql-cluster.html#mysql-cluster-program-options-common" title="23.4.32 NDB Cluster プログラムに共通のオプション — NDB Cluster プログラムに共通のオプション">セクション23.4.32「NDB Cluster プログラムに共通のオプション — NDB Cluster プログラムに共通のオプション」</a>
        を参照してください。
      </p><div class="table"><a name="mysql-cluster-ndb_delete_all-options-table"></a><p class="title"><b>表 23.30 プログラムで使用されるコマンドライン・オプション ndb_delete_all</b></p><div class="table-contents"><table frame="box" rules="all"><col style="width: 33%"><col style="width: 34%"><col style="width: 33%"><thead><tr>
            <th scope="col">形式</th>
            <th scope="col">説明</th>
            <th scope="col">追加、非推奨、または削除された</th>
          </tr></thead><tbody><tr>
            <th scope="row"><p>
                <code class="option">--database=dbname</code>,
              </p><p>
                <code class="option">-d</code>
              </p></th>
            <td>テーブルを探すデータベースの名前</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_delete_all_transactional">--transactional</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_delete_all_transactional">-t</a>
                </code>
              </p></th>
            <td>単一トランザクションで削除を実行します
              (操作の数が足りなくなることがあります)</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">--tupscan</code>
              </p></th>
            <td>TUP スキャンを実行します</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">--diskscan</code>
              </p></th>
            <td>ディスクスキャンを実行します</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody></table></div></div><br class="table-break"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="option_ndb_delete_all_transactional"></a>
            <code class="option">--transactional</code>, <code class="option">-t</code>
          </p><a class="indexterm" name="idm45563219792896"></a><a class="indexterm" name="idm45563219790768"></a><p>
            このオプションを使用すると、削除操作が単一のトランザクションとして実行されます。
          </p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">警告</div><p>
              非常に大きいテーブルの場合は、このオプションを使用すると、クラスタで使用できる操作の数を超えることがあります。
            </p></div></li></ul></div><p>
        NDB 8.0.18
        より前では、このプログラムは、<code class="literal">NDBT</code>
        テストライブラリへの不要な依存関係のため、実行の完了時に
        <code class="literal">NDBT_ProgramExit -
        <em class="replaceable"><code>status</code></em></code>
        を出力しました。
        この依存関係は削除され、余分な出力がなくなりました。
      </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-cluster-programs-ndb-desc"></a>23.4.9 ndb_desc — NDB テーブルの表示</h3></div></div></div><a class="indexterm" name="idm45563219782736"></a><p>
        <span class="command"><strong>ndb_desc</strong></span> は、1 つ以上の
        <code class="literal">NDB</code>
        テーブルの詳細な説明を出力します。
      </p><h4><a name="idm45563219779088"></a>使用法</h4><pre class="programlisting">ndb_desc -c <em class="replaceable"><code>connection_string</code></em> <em class="replaceable"><code>tbl_name</code></em> -d <em class="replaceable"><code>db_name</code></em> [<em class="replaceable"><code>options</code></em>]

ndb_desc -c <em class="replaceable"><code>connection_string</code></em> <em class="replaceable"><code>index_name</code></em> -d <em class="replaceable"><code>db_name</code></em> -t <em class="replaceable"><code>tbl_name</code></em>
</pre><p>
        <span class="command"><strong>ndb_desc</strong></span>
        で使用できるその他のオプションは、このセクションの後半で説明します。
      </p><h4><a name="idm45563219772656"></a>出力例</h4><p>
        MySQL
        テーブル作成およびレコード挿入ステートメント:
      </p><pre class="programlisting">USE test;

CREATE TABLE fish (
    id INT NOT NULL AUTO_INCREMENT,
    name VARCHAR(20) NOT NULL,
    length_mm INT NOT NULL,
    weight_gm INT NOT NULL,

    PRIMARY KEY pk (id),
    UNIQUE KEY uk (name)
) ENGINE=NDB;

INSERT INTO fish VALUES
    (NULL, 'guppy', 35, 2), (NULL, 'tuna', 2500, 150000),
    (NULL, 'shark', 3000, 110000), (NULL, 'manta ray', 1500, 50000),
    (NULL, 'grouper', 900, 125000), (NULL ,'puffer', 250, 2500);
</pre><p>
        <span class="command"><strong>ndb_desc</strong></span> の出力:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>./ndb_desc -c localhost fish -d test -p</code></strong>
-- fish --
Version: 2
Fragment type: HashMapPartition
K Value: 6
Min load factor: 78
Max load factor: 80
Temporary table: no
Number of attributes: 4
Number of primary keys: 1
Length of frm data: 337
Max Rows: 0
Row Checksum: 1
Row GCI: 1
SingleUserMode: 0
ForceVarPart: 1
PartitionCount: 2
FragmentCount: 2
PartitionBalance: FOR_RP_BY_LDM
ExtraRowGciBits: 0
ExtraRowAuthorBits: 0
TableStatus: Retrieved
Table options:
HashMap: DEFAULT-HASHMAP-3840-2
-- Attributes --
id Int PRIMARY KEY DISTRIBUTION KEY AT=FIXED ST=MEMORY AUTO_INCR
name Varchar(20;latin1_swedish_ci) NOT NULL AT=SHORT_VAR ST=MEMORY DYNAMIC
length_mm Int NOT NULL AT=FIXED ST=MEMORY DYNAMIC
weight_gm Int NOT NULL AT=FIXED ST=MEMORY DYNAMIC
-- Indexes --
PRIMARY KEY(id) - UniqueHashIndex
PRIMARY(id) - OrderedIndex
uk(name) - OrderedIndex
uk$unique(name) - UniqueHashIndex
-- Per partition info --
Partition       Row count       Commit count    Frag fixed memory       Frag varsized memory    Extent_space    Free extent_space
0               2               2               32768                   32768                   0               0
1               4               4               32768                   32768                   0               0


NDBT_ProgramExit: 0 - OK
</pre><p>
        複数のテーブルに関する情報は、テーブル名をスペースで区切って
        <span class="command"><strong>ndb_desc</strong></span> を 1
        回呼び出すことによって取得できます。
        すべてのテーブルは同じデータベースにある必要があります。
      </p><p>
        <code class="option">--table</code> (短い形式)
        を使用して、特定のインデックスに関する追加情報を取得できます:
        <code class="option">-t</code>)
        オプションで、次に示すように、インデックスの名前を
        <span class="command"><strong>ndb_desc</strong></span>
        の最初の引数として指定します:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>./ndb_desc uk -d test -t fish</code></strong>
-- uk --
Version: 2
Base table: fish
Number of attributes: 1
Logging: 0
Index type: OrderedIndex
Index status: Retrieved
-- Attributes --
name Varchar(20;latin1_swedish_ci) NOT NULL AT=SHORT_VAR ST=MEMORY
-- IndexTable 10/uk --
Version: 2
Fragment type: FragUndefined
K Value: 6
Min load factor: 78
Max load factor: 80
Temporary table: yes
Number of attributes: 2
Number of primary keys: 1
Length of frm data: 0
Max Rows: 0
Row Checksum: 1
Row GCI: 1
SingleUserMode: 2
ForceVarPart: 0
PartitionCount: 2
FragmentCount: 2
FragmentCountType: ONE_PER_LDM_PER_NODE
ExtraRowGciBits: 0
ExtraRowAuthorBits: 0
TableStatus: Retrieved
Table options:
-- Attributes --
name Varchar(20;latin1_swedish_ci) NOT NULL AT=SHORT_VAR ST=MEMORY
NDB$TNODE Unsigned [64] PRIMARY KEY DISTRIBUTION KEY AT=FIXED ST=MEMORY
-- Indexes --
PRIMARY KEY(NDB$TNODE) - UniqueHashIndex

NDBT_ProgramExit: 0 - OK
</pre><p>
        このようにインデックスを指定すると、<code class="option">--extra-partition-info</code>
        および <code class="option">--extra-node-info</code>
        オプションは効果がありません。
      </p><p>
        出力の <code class="literal">Version</code>
        カラムには、テーブルのスキーマオブジェクトバージョンが表示されます。
        この値の解釈については、<a class="ulink" href="https://dev.mysql.com/doc/ndb-internals/en/ndb-internals-schema-object-versions.html" target="_top">NDB Schema Object Versions</a>を参照してください。
      </p><p>
        <code class="literal">CREATE TABLE</code> および
        <code class="literal">ALTER TABLE</code>
        ステートメントに埋め込まれた
        <code class="literal">NDB_TABLE</code>
        コメントを使用して設定できるテーブルプロパティの
        3 つは、<span class="command"><strong>ndb_desc</strong></span>
        出力にも表示されます。
        <code class="literal">FRAGMENT_COUNT_TYPE</code> テーブルは、常に
        <code class="literal">FragmentCountType</code>
        カラムに表示されます。 <code class="literal">READ_ONLY</code>
        および <code class="literal">FULLY_REPLICATED</code> は、1
        に設定されている場合、<code class="literal">Table
        options</code> カラムに表示されます。
        これは、<span class="command"><strong>mysql</strong></span> クライアントで次の
        <code class="literal">ALTER TABLE</code>
        ステートメントを実行した後に確認できます:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>ALTER TABLE fish COMMENT='NDB_TABLE=READ_ONLY=1,FULLY_REPLICATED=1';</code></strong>
1 row in set, 1 warning (0.00 sec)

mysql&gt; <strong class="userinput"><code>SHOW WARNINGS\G</code></strong>
+---------+------+---------------------------------------------------------------------------------------------------------+
| Level   | Code | Message                                                                                                 |
+---------+------+---------------------------------------------------------------------------------------------------------+
| Warning | 1296 | Got error 4503 'Table property is FRAGMENT_COUNT_TYPE=ONE_PER_LDM_PER_NODE but not in comment' from NDB |
+---------+------+---------------------------------------------------------------------------------------------------------+
1 row in set (0.00 sec)
</pre><p>
        <code class="literal">READ_ONLY=1</code>
        では、テーブルフラグメント数タイプが
        <code class="literal">ONE_PER_LDM_PER_NODE_GROUP</code> である
        (またはこれに設定されている)
        必要があるため、警告が発行されます。このような場合、<code class="literal">NDB</code>
        ではこれが自動的に設定されます。
        <code class="literal">SHOW CREATE TABLE</code>
        を使用して、<code class="literal">ALTER TABLE</code>
        ステートメントが目的の効果を持つことを確認できます:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW CREATE TABLE fish\G</code></strong>
*************************** 1. row ***************************
       Table: fish
Create Table: CREATE TABLE `fish` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(20) NOT NULL,
  `length_mm` int(11) NOT NULL,
  `weight_gm` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `uk` (`name`)
) ENGINE=ndbcluster DEFAULT CHARSET=latin1
COMMENT='NDB_TABLE=READ_BACKUP=1,FULLY_REPLICATED=1'
1 row in set (0.01 sec)
</pre><p>
        <code class="literal">FRAGMENT_COUNT_TYPE</code>
        は明示的に設定されなかったため、その値は
        <code class="literal">SHOW CREATE TABLE</code>
        によって出力されるコメントテキストには表示されません。ただし、<span class="command"><strong>ndb_desc</strong></span>
        では、この属性の更新された値が表示されます。
        <code class="literal">Table options</code>
        カラムには、有効になったばかりのバイナリプロパティが表示されます。
        これは、次に示す出力に表示されます
        (強調表示されたテキスト):
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>./ndb_desc -c localhost fish -d test -p</code></strong>
-- fish --
Version: 4
Fragment type: HashMapPartition
K Value: 6
Min load factor: 78
Max load factor: 80
Temporary table: no
Number of attributes: 4
Number of primary keys: 1
Length of frm data: 380
Max Rows: 0
Row Checksum: 1
Row GCI: 1
SingleUserMode: 0
ForceVarPart: 1
PartitionCount: 1
FragmentCount: 1
<span class="emphasis"><em>FragmentCountType: ONE_PER_LDM_PER_NODE_GROUP</em></span>
ExtraRowGciBits: 0
ExtraRowAuthorBits: 0
TableStatus: Retrieved
<span class="emphasis"><em>Table options: readbackup, fullyreplicated</em></span>
HashMap: DEFAULT-HASHMAP-3840-1
-- Attributes --
id Int PRIMARY KEY DISTRIBUTION KEY AT=FIXED ST=MEMORY AUTO_INCR
name Varchar(20;latin1_swedish_ci) NOT NULL AT=SHORT_VAR ST=MEMORY DYNAMIC
length_mm Int NOT NULL AT=FIXED ST=MEMORY DYNAMIC
weight_gm Int NOT NULL AT=FIXED ST=MEMORY DYNAMIC
-- Indexes --
PRIMARY KEY(id) - UniqueHashIndex
PRIMARY(id) - OrderedIndex
uk(name) - OrderedIndex
uk$unique(name) - UniqueHashIndex
-- Per partition info --
Partition       Row count       Commit count    Frag fixed memory       Frag varsized memory    Extent_space    Free extent_space

NDBT_ProgramExit: 0 - OK
</pre><p>
        これらのテーブルプロパティの詳細は、<a class="xref" href="sql-statements.html#create-table-ndb-table-comment-options" title="13.1.20.11 NDB_TABLE オプションの設定">セクション13.1.20.11「NDB_TABLE オプションの設定」</a>
        を参照してください。
      </p><p>
        <code class="literal">Extent_space</code> および <code class="literal">Free
        extent_space</code>
        カラムは、ディスクにカラムがある
        <code class="literal">NDB</code>
        テーブルにのみ関係しています。インメモリーカラムのみを持つテーブルの場合、これらのカラムには常に値
        <code class="literal">0</code> が表示されます。
      </p><p>
        これらの使用方法を説明するために、前の例を変更します。
        最初に、必要なディスクデータオブジェクトを次のように作成する必要があります。
      </p><pre class="programlisting">CREATE LOGFILE GROUP lg_1
    ADD UNDOFILE 'undo_1.log'
    INITIAL_SIZE 16M
    UNDO_BUFFER_SIZE 2M
    ENGINE NDB;

ALTER LOGFILE GROUP lg_1
    ADD UNDOFILE 'undo_2.log'
    INITIAL_SIZE 12M
    ENGINE NDB;

CREATE TABLESPACE ts_1
    ADD DATAFILE 'data_1.dat'
    USE LOGFILE GROUP lg_1
    INITIAL_SIZE 32M
    ENGINE NDB;

ALTER TABLESPACE ts_1
    ADD DATAFILE 'data_2.dat'
    INITIAL_SIZE 48M
    ENGINE NDB;
</pre><p>
        (上記のステートメントおよびそれらによって作成されるオブジェクトについては、<a class="xref" href="mysql-cluster.html#mysql-cluster-disk-data-objects" title="23.5.10.1 NDB Cluster ディスクデータオブジェクト">セクション23.5.10.1「NDB Cluster ディスクデータオブジェクト」</a>、<a class="xref" href="sql-statements.html#create-logfile-group" title="13.1.16 CREATE LOGFILE GROUP ステートメント">セクション13.1.16「CREATE LOGFILE GROUP ステートメント」</a>、および<a class="xref" href="sql-statements.html#create-tablespace" title="13.1.21 CREATE TABLESPACE ステートメント">セクション13.1.21「CREATE TABLESPACE ステートメント」</a>を参照してください。)
      </p><p>
        カラムの 2 をディスクに格納するバージョンの
        <code class="literal">fish</code>
        テーブルを作成して移入できるようになりました
        (前のバージョンのテーブルが存在する場合はそれを最初に削除します)。
      </p><pre class="programlisting">DROP TABLE IF EXISTS fish;

CREATE TABLE fish (
    id INT NOT NULL AUTO_INCREMENT,
    name VARCHAR(20) NOT NULL,
    length_mm INT NOT NULL,
    weight_gm INT NOT NULL,

    PRIMARY KEY pk (id),
    UNIQUE KEY uk (name)
) TABLESPACE ts_1 STORAGE DISK
ENGINE=NDB;

INSERT INTO fish VALUES
    (NULL, 'guppy', 35, 2), (NULL, 'tuna', 2500, 150000),
    (NULL, 'shark', 3000, 110000), (NULL, 'manta ray', 1500, 50000),
    (NULL, 'grouper', 900, 125000), (NULL ,'puffer', 250, 2500);
</pre><p>
        <span class="command"><strong>ndb_desc</strong></span>
        をこのバージョンのテーブルに対して実行すると、次の出力が表示されます。
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>./ndb_desc -c localhost fish -d test -p</code></strong>
-- fish --
Version: 1
Fragment type: HashMapPartition
K Value: 6
Min load factor: 78
Max load factor: 80
Temporary table: no
Number of attributes: 4
Number of primary keys: 1
Length of frm data: 1001
Max Rows: 0
Row Checksum: 1
Row GCI: 1
SingleUserMode: 0
ForceVarPart: 1
PartitionCount: 2
FragmentCount: 2
PartitionBalance: FOR_RP_BY_LDM
ExtraRowGciBits: 0
ExtraRowAuthorBits: 0
TableStatus: Retrieved
Table options: readbackup
HashMap: DEFAULT-HASHMAP-3840-2
Tablespace id: 16
Tablespace: ts_1
-- Attributes --
id Int PRIMARY KEY DISTRIBUTION KEY AT=FIXED ST=MEMORY AUTO_INCR
name Varchar(80;utf8mb4_0900_ai_ci) NOT NULL AT=SHORT_VAR ST=MEMORY
length_mm Int NOT NULL AT=FIXED ST=DISK
weight_gm Int NOT NULL AT=FIXED ST=DISK
-- Indexes --
PRIMARY KEY(id) - UniqueHashIndex
PRIMARY(id) - OrderedIndex
uk(name) - OrderedIndex
uk$unique(name) - UniqueHashIndex
-- Per partition info --
Partition       Row count       Commit count    Frag fixed memory       Frag varsized memory    Extent_space    Free extent_space
0               2               2               32768                   32768                   1048576         1044440
1               4               4               32768                   32768                   1048576         1044400


NDBT_ProgramExit: 0 - OK
</pre><p>
        これは、テーブルスペースからこのテーブルの各パーティションに
        1048576 バイトが割り当てられ、そのうちの 1044440
        バイトが追加の格納のための空き領域であることを意味します。
        言い換えると、このテーブルのディスクベースのカラムのデータを格納するために、現在パーティションごとに
        1048576 - 1044440 = 4136 バイトが使用されています。
        <code class="literal">Free extent_space</code>
        として表示されるバイト数は、<code class="literal">fish</code>
        テーブルのディスク上カラムデータを格納するためにのみ使用できます。このため、<code class="literal">INFORMATION_SCHEMA.FILES</code>
        テーブルから選択したときに表示されません。
      </p><p>
        NDB 8.0.21
        以降の「ディスクデータ」テーブルでは、<code class="literal">Tablespace
        id</code> および <code class="literal">Tablespace</code>
        が表示されます。
      </p><p>
        完全にレプリケートされたテーブルの場合、<span class="command"><strong>ndb_desc</strong></span>
        ではプライマリパーティションフラグメントのレプリカを保持しているノードのみが表示され、コピーフラグメントレプリカ
        (のみ) を持つノードは無視されます。
        このような情報は、<span class="command"><strong>mysql</strong></span>
        クライアントを使用して、<code class="literal">ndbinfo</code>
        データベースの
        <code class="literal">table_distribution_status</code>,
        <code class="literal">table_fragments</code>,
        <code class="literal">table_info</code>
        テーブルおよび
        <code class="literal">table_replicas</code>
        テーブルから取得できます。
      </p><p>
        次の表には、<span class="command"><strong>ndb_desc</strong></span>
        に固有のオプションが含まれています。
        追加説明が表のあとにあります。 ほとんどの
        NDB Cluster プログラム (<span class="command"><strong>ndb_desc</strong></span>
        を含む)
        に共通のオプションについては、<a class="xref" href="mysql-cluster.html#mysql-cluster-program-options-common" title="23.4.32 NDB Cluster プログラムに共通のオプション — NDB Cluster プログラムに共通のオプション">セクション23.4.32「NDB Cluster プログラムに共通のオプション — NDB Cluster プログラムに共通のオプション」</a>
        を参照してください。
      </p><div class="table"><a name="mysql-cluster-ndb_desc-options-table"></a><p class="title"><b>表 23.31 プログラムで使用されるコマンドライン・オプション ndb_desc</b></p><div class="table-contents"><table frame="box" rules="all"><col style="width: 33%"><col style="width: 34%"><col style="width: 33%"><thead><tr>
            <th scope="col">形式</th>
            <th scope="col">説明</th>
            <th scope="col">追加、非推奨、または削除された</th>
          </tr></thead><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_desc_auto-inc">--auto-inc</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_desc_auto-inc">-a</a>
                </code>
              </p></th>
            <td>テーブルに次の値がある場合、AUTO_INCREMENT oolumn
              の次の値を表示</td>
            <td><p>
                追加: NDB 8.0.21
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_desc_blob-info">--blob-info</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_desc_blob-info">-b</a>
                </code>
              </p></th>
            <td>BLOB
              テーブルのパーティション情報を出力に含めます。
              -p オプションも使用する必要があります</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_desc_context">--context</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_desc_context">-x</a>
                </code>
              </p></th>
            <td>データベース、スキーマ、名前、内部 ID
              などのテーブルの追加情報を表示</td>
            <td><p>
                追加: NDB 8.0.21
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_desc_database">--database=dbname</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_desc_database">-d</a>
                </code>
              </p></th>
            <td>テーブルが含まれているデータベースの名前</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_desc_extra-node-info">--extra-node-info</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_desc_extra-node-info">-n</a>
                </code>
              </p></th>
            <td>パーティションとデータノードのマッピングを出力に含めます。
              -p オプションも使用する必要があります</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_desc_extra-partition-info">--extra-partition-info</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_desc_extra-partition-info">-p</a>
                </code>
              </p></th>
            <td>パーティションに関する情報を表示します</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_desc_retries">--retries=#</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_desc_retries">-r</a>
                </code>
              </p></th>
            <td>接続を再試行する回数 (1 秒おき)</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_desc_table">--table=tbl_name</a></code>,
              </p><p>
                <code class="option"> <a class="link" href="mysql-cluster.html#option_ndb_desc_table">-t</a>
                </code>
              </p></th>
            <td>インデックスを探すテーブルを指定します。
              このオプションを使用すると、-p および -n
              は効果がなくなり、無視されます</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_desc_unqualified">--unqualified</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_desc_unqualified">-u</a>
                </code>
              </p></th>
            <td>修飾されていないテーブル名を使用します</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody></table></div></div><br class="table-break"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="option_ndb_desc_auto-inc"></a>
            <code class="option">--auto-inc</code>, <code class="option">-a</code>
          </p><a class="indexterm" name="idm45563219622288"></a><a class="indexterm" name="idm45563219620144"></a><p>
            テーブルの <code class="literal">AUTO_INCREMENT</code>
            カラムに次の値がある場合は表示します。
          </p></li><li class="listitem"><p><a name="option_ndb_desc_blob-info"></a>
            <code class="option">--blob-info</code>, <code class="option">-b</code>
          </p><a class="indexterm" name="idm45563219614768"></a><a class="indexterm" name="idm45563219612624"></a><p>
            従属する <code class="literal">BLOB</code> および
            <code class="literal">TEXT</code>
            カラムに関する情報を含めます。
          </p><p>
            このオプションを使用する場合は、<code class="option">--extra-partition-info</code>
            (<code class="option">-p</code>)
            オプションも使用する必要があります。
          </p></li><li class="listitem"><p><a name="option_ndb_desc_context"></a>
            <code class="option">--context</code>, <code class="option">-x</code>
          </p><a class="indexterm" name="idm45563219604256"></a><a class="indexterm" name="idm45563219602080"></a><p>
            スキーマ、データベース名、テーブル名、テーブルの内部
            ID
            など、テーブルの追加のコンテキスト情報を表示します。
          </p></li><li class="listitem"><p><a name="option_ndb_desc_database"></a>
            <code class="option">--database=<em class="replaceable"><code>db_name</code></em></code>,
            <code class="option">-d</code>
          </p><a class="indexterm" name="idm45563219596912"></a><a class="indexterm" name="idm45563219594784"></a><p>
            テーブルが見つかるはずのデータベースを指定します。
          </p></li><li class="listitem"><p><a name="option_ndb_desc_extra-node-info"></a>
            <code class="option">--extra-node-info</code>, <code class="option">-n</code>
          </p><a class="indexterm" name="idm45563219590160"></a><a class="indexterm" name="idm45563219588000"></a><p>
            テーブルパーティションおよびそれらが存在するデータノードのマッピングに関する情報を含めます。
            この情報は、配布認識メカニズムを検証し、NDB
            Cluster
            に格納されているデータへのより効率的なアプリケーションアクセスをサポートするのに役立ちます。
          </p><p>
            このオプションを使用する場合は、<code class="option">--extra-partition-info</code>
            (<code class="option">-p</code>)
            オプションも使用する必要があります。
          </p></li><li class="listitem"><p><a name="option_ndb_desc_extra-partition-info"></a>
            <code class="option">--extra-partition-info</code>, <code class="option">-p</code>
          </p><a class="indexterm" name="idm45563219581104"></a><a class="indexterm" name="idm45563219578928"></a><p>
            テーブルのパーティションに関する追加情報を出力します。
          </p></li><li class="listitem"><p><a name="option_ndb_desc_retries"></a>
            <code class="option">--retries=<em class="replaceable"><code>#</code></em></code>,
            <code class="option">-r</code>
          </p><a class="indexterm" name="idm45563219574032"></a><a class="indexterm" name="idm45563219571856"></a><p>
            接続を停止する前に、この回数だけ接続を試みます。
            接続の試行は 1 秒おきに実行されます。
          </p></li><li class="listitem"><p><a name="option_ndb_desc_table"></a>
            <code class="option">--table=<em class="replaceable"><code>tbl_name</code></em></code>,
            <code class="option">-t</code>
          </p><a class="indexterm" name="idm45563219566864"></a><a class="indexterm" name="idm45563219564688"></a><p>
            インデックスを探すテーブルを指定します。
          </p></li><li class="listitem"><p><a name="option_ndb_desc_unqualified"></a>
            <code class="option">--unqualified</code>, <code class="option">-u</code>
          </p><a class="indexterm" name="idm45563219560080"></a><a class="indexterm" name="idm45563219557952"></a><p>
            修飾されていないテーブル名を使用します。
          </p></li></ul></div><p>
        出力にリストされているテーブルインデックスは、ID
        順に並べられています。
      </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-cluster-programs-ndb-drop-index"></a>23.4.10 ndb_drop_index — NDB テーブルからのインデックスの削除</h3></div></div></div><a class="indexterm" name="idm45563219553152"></a><p>
        <span class="command"><strong>ndb_drop_index</strong></span>
        は、指定されたインデックスを
        <code class="literal">NDB</code>
        テーブルから削除します。
        <span class="emphasis"><em>このユーティリティーは、NDB API
        アプリケーションを記述するための例としてのみ使用することをお勧めします。</em></span>詳細は、このセクションで後述する「警告」を参照してください。
      </p><h4><a name="idm45563219548784"></a>使用法</h4><pre class="programlisting">ndb_drop_index -c <em class="replaceable"><code>connection_string</code></em> <em class="replaceable"><code>table_name</code></em> <em class="replaceable"><code>index</code></em> -d <em class="replaceable"><code>db_name</code></em>
</pre><p>
        上記のステートメントは、<em class="replaceable"><code>database</code></em>
        の <em class="replaceable"><code>table</code></em> から
        <em class="replaceable"><code>index</code></em>
        という名前のインデックスを削除します。
      </p><p>
        次の表には、<span class="command"><strong>ndb_drop_index</strong></span>
        に固有のオプションが含まれています。
        追加説明が表のあとにあります。 ほとんどの
        NDB Cluster プログラム (<span class="command"><strong>ndb_drop_index</strong></span>
        を含む)
        に共通のオプションについては、<a class="xref" href="mysql-cluster.html#mysql-cluster-program-options-common" title="23.4.32 NDB Cluster プログラムに共通のオプション — NDB Cluster プログラムに共通のオプション">セクション23.4.32「NDB Cluster プログラムに共通のオプション — NDB Cluster プログラムに共通のオプション」</a>
        を参照してください。
      </p><div class="table"><a name="mysql-cluster-ndb_drop_index-options-table"></a><p class="title"><b>表 23.32 プログラムで使用されるコマンドライン・オプション ndb_drop_index</b></p><div class="table-contents"><table frame="box" rules="all"><col style="width: 33%"><col style="width: 34%"><col style="width: 33%"><thead><tr>
            <th scope="col">形式</th>
            <th scope="col">説明</th>
            <th scope="col">追加、非推奨、または削除された</th>
          </tr></thead><tbody><tr>
            <th scope="row"><p>
                <code class="option">--database=dbname</code>,
              </p><p>
                <code class="option">-d</code>
              </p></th>
            <td>テーブルが見つかったデータベースの名前</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody></table></div></div><br class="table-break"><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">警告</div><p>
          <span class="emphasis"><em>NDB API を使用して Cluster
          テーブルインデックスに操作を実行しても、MySQL
          は認識できず、MySQL
          サーバーはそのテーブルを使用できません</em></span>。
          このプログラムを使用してインデックスを削除し、SQL
          ノードからテーブルにアクセスしようとすると、次のようなエラーが発生します。
        </p></div><pre class="programlisting">shell&gt; <strong class="userinput"><code>./ndb_drop_index -c localhost dogs ix -d ctest1</code></strong>
Dropping index dogs/idx...OK

NDBT_ProgramExit: 0 - OK

shell&gt; <strong class="userinput"><code>./mysql -u jon -p ctest1</code></strong>
Enter password: *******
Reading table information for completion of table and column names
You can turn off this feature to get a quicker startup with -A

Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 7 to server version: 5.7.33-ndb-7.5.21

Type 'help;' or '\h' for help. Type '\c' to clear the buffer.

mysql&gt; <strong class="userinput"><code>SHOW TABLES;</code></strong>
+------------------+
| Tables_in_ctest1 |
+------------------+
| a                |
| bt1              |
| bt2              |
| dogs             |
| employees        |
| fish             |
+------------------+
6 rows in set (0.00 sec)

mysql&gt; <strong class="userinput"><code>SELECT * FROM dogs;</code></strong>
<span class="errortext">ERROR 1296 (HY000): Got error 4243 'Index not found' from NDBCLUSTER</span>
</pre><p>
        そのような場合、MySQL
        でテーブルをふたたび使用できるようにする<span class="emphasis"><em>唯一</em></span>の方法は、テーブルを削除して再作成することです。
        テーブルを削除するには、SQL ステートメント
        <code class="literal">DROP TABLE</code> または
        <span class="command"><strong>ndb_drop_table</strong></span> ユーティリティー
        (<a class="xref" href="mysql-cluster.html#mysql-cluster-programs-ndb-drop-table" title="23.4.11 ndb_drop_table — NDB テーブルの削除">セクション23.4.11「ndb_drop_table — NDB テーブルの削除」</a>を参照してください)
        を使用できます。
      </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-cluster-programs-ndb-drop-table"></a>23.4.11 ndb_drop_table — NDB テーブルの削除</h3></div></div></div><a class="indexterm" name="idm45563219514240"></a><p>
        <span class="command"><strong>ndb_drop_table</strong></span> は指定された
        <code class="literal">NDB</code> テーブルを削除します
        (<code class="literal">NDB</code>
        以外のストレージエンジンで作成されたテーブルに対してこれを使用しようとすると、次のエラーで失敗します:
        <span class="errortext">723: No such table exists</span>。)
        この操作は非常に速く、<code class="literal">NDB</code>
        テーブルに対して MySQL の <code class="literal">DROP
        TABLE</code>
        ステートメントを使用するよりも格段に速いことがあります。
      </p><h4><a name="idm45563219506752"></a>使用法</h4><pre class="programlisting">ndb_drop_table -c <em class="replaceable"><code>connection_string</code></em> <em class="replaceable"><code>tbl_name</code></em> -d <em class="replaceable"><code>db_name</code></em>
</pre><p>
        次の表には、<span class="command"><strong>ndb_drop_table</strong></span>
        に固有のオプションが含まれています。
        追加説明が表のあとにあります。 ほとんどの
        NDB Cluster プログラム (<span class="command"><strong>ndb_drop_table</strong></span>
        を含む)
        に共通のオプションについては、<a class="xref" href="mysql-cluster.html#mysql-cluster-program-options-common" title="23.4.32 NDB Cluster プログラムに共通のオプション — NDB Cluster プログラムに共通のオプション">セクション23.4.32「NDB Cluster プログラムに共通のオプション — NDB Cluster プログラムに共通のオプション」</a>
        を参照してください。
      </p><div class="table"><a name="mysql-cluster-ndb_drop_table-options-table"></a><p class="title"><b>表 23.33 プログラムで使用されるコマンドライン・オプション ndb_drop_table</b></p><div class="table-contents"><table frame="box" rules="all"><col style="width: 33%"><col style="width: 34%"><col style="width: 33%"><thead><tr>
            <th scope="col">形式</th>
            <th scope="col">説明</th>
            <th scope="col">追加、非推奨、または削除された</th>
          </tr></thead><tbody><tr>
            <th scope="row"><p>
                <code class="option">--database=dbname</code>,
              </p><p>
                <code class="option">-d</code>
              </p></th>
            <td>テーブルが見つかったデータベースの名前</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody></table></div></div><br class="table-break"><p>
        NDB 8.0.17
        より前は、このユーティリティーを使用して削除された
        <code class="literal">NDB</code> テーブルは MySQL
        データディクショナリに保持されていましたが、<span class="command"><strong>mysql</strong></span>
        クライアントで <code class="literal">DROP TABLE</code>
        を使用して削除できませんでした。 NDB 8.0.17
        以降では、このような<span class="quote">「<span class="quote">「孤立」</span>」</span>テーブルは
        <code class="literal">DROP TABLE</code>
        を使用して削除できます。 (Bug #29125206、Bug
        #93672)
      </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-cluster-programs-ndb-error-reporter"></a>23.4.12 ndb_error_reporter — NDB エラーレポートユーティリティー</h3></div></div></div><a class="indexterm" name="idm45563219481232"></a><a class="indexterm" name="idm45563219480016"></a><p>
        <span class="command"><strong>ndb_error_reporter</strong></span>
        は、クラスタのバグまたはその他の問題の診断に使用できるデータノードおよび管理ノードログファイルからアーカイブを作成します。
        <span class="emphasis"><em>NDB Cluster
        のバグのレポートを提出するときは、このユーティリティーを使用することを強くお勧めします</em></span>。
      </p><p>
        次のテーブルに、NDB Cluster プログラム
        <span class="command"><strong>ndb_error_reporter</strong></span>
        に固有のコマンドオプションを示します。
        追加説明が表のあとにあります。 ほとんどの
        NDB Cluster プログラム
        (<span class="command"><strong>ndb_error_reporter</strong></span> を含む)
        に共通のオプションについては、<a class="xref" href="mysql-cluster.html#mysql-cluster-program-options-common" title="23.4.32 NDB Cluster プログラムに共通のオプション — NDB Cluster プログラムに共通のオプション">セクション23.4.32「NDB Cluster プログラムに共通のオプション — NDB Cluster プログラムに共通のオプション」</a>
        を参照してください。
      </p><div class="table"><a name="mysql-cluster-ndb_error_reporter-options-table"></a><p class="title"><b>表 23.34 プログラムで使用されるコマンドライン・オプション ndb_error_reporter</b></p><div class="table-contents"><table frame="box" rules="all"><col style="width: 33%"><col style="width: 34%"><col style="width: 33%"><thead><tr>
            <th scope="col">形式</th>
            <th scope="col">説明</th>
            <th scope="col">追加、非推奨、または削除された</th>
          </tr></thead><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_error_reporter_connection-timeout">--connection-timeout=timeout</a>
                </code>
              </p></th>
            <td>ノードへの接続時にタイムアウトするまで待機する秒数</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_error_reporter_dry-scp">--dry-scp</a>
                </code>
              </p></th>
            <td>リモートホストで scp
              を無効にします。テストのためのみに使用します</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_error_reporter_fs">--fs</a>
                </code>
              </p></th>
            <td>エラーレポートにファイルシステムデータを含めます。大量のディスク領域が使用されることがあります</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_error_reporter_skip-nodegroup">--skip-nodegroup=nodegroup_id</a>
                </code>
              </p></th>
            <td>この ID
              のノードグループ内のすべてのノードをスキップします</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody></table></div></div><br class="table-break"><h4><a name="idm45563219440768"></a>使用法</h4><pre class="programlisting">ndb_error_reporter <em class="replaceable"><code>path/to/config-file</code></em> [<em class="replaceable"><code>username</code></em>] [<em class="replaceable"><code>options</code></em>]
</pre><p>
        このユーティリティーは管理ノードホストで使用することが意図されており、管理ホスト構成ファイル
        (通常、<code class="filename">config.ini</code> という名前です)
        へのパスが必要となります。
        必要に応じて、データノードログファイルをコピーするために、SSH
        を使用してクラスタのデータノードにアクセスできるユーザーの名前を指定できます。<span class="command"><strong>ndb_error_reporter</strong></span>
        は、実行されたディレクトリと同じディレクトリに作成されるアーカイブにそれらのすべてのファイルを含めます。
        アーカイブの名前は
        <code class="filename">ndb_error_report_<em class="replaceable"><code>YYYYMMDDhhmmss</code></em>.tar.bz2</code>
        で、<em class="replaceable"><code>YYYYMMDDhhmmss</code></em>
        は日時文字列です。
      </p><p>
        <a class="indexterm" name="idm45563219432880"></a>

        <span class="command"><strong>ndb_error_reporter</strong></span>
        は次に一覧されているオプションも受け入れます。
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="option_ndb_error_reporter_connection-timeout"></a>
            <code class="option">--connection-timeout=<em class="replaceable"><code>timeout</code></em></code>
          </p><a class="indexterm" name="idm45563219427744"></a><a class="indexterm" name="idm45563219425648"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for connection-timeout"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--connection-timeout=timeout</code></td>
</tr><tr><th>型</th>
<td>Integer</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">0</code></td>
</tr></tbody></table></div><p>
            ノードに接続を試みるときに、タイムアウトする前にこの秒数だけ待機します。
          </p></li><li class="listitem"><p><a name="option_ndb_error_reporter_dry-scp"></a>
            <code class="option">--dry-scp</code>
          </p><a class="indexterm" name="idm45563219411248"></a><a class="indexterm" name="idm45563219409184"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for dry-scp"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--dry-scp</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">TRUE</code></td>
</tr></tbody></table></div><p>
            リモートホストからの scp を使用せずに
            <span class="command"><strong>ndb_error_reporter</strong></span> を実行します。
            テストにのみ使用されます。
          </p></li><li class="listitem"><p><a name="option_ndb_error_reporter_fs"></a>
            <code class="option">--fs</code>
          </p><a class="indexterm" name="idm45563219394032"></a><a class="indexterm" name="idm45563219391984"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for fs"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--fs</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table></div><p>
            データノードファイルシステムを管理ホストにコピーし、それらをアーカイブに含めます。
          </p><p>
            データノードファイルシステムは圧縮されていても非常に大きいことがあるため、特にそうするように要請された場合を除き、このオプションを使用して作成したアーカイブをオラクルに送信<span class="emphasis"><em>しない</em></span>でください。
          </p></li><li class="listitem"><p><a name="option_ndb_error_reporter_skip-nodegroup"></a>
            <code class="option">--skip-nodegroup=<em class="replaceable"><code>nodegroup_id</code></em></code>
          </p><a class="indexterm" name="idm45563219375856"></a><a class="indexterm" name="idm45563219373760"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for connection-timeout"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--connection-timeout=timeout</code></td>
</tr><tr><th>型</th>
<td>Integer</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">0</code></td>
</tr></tbody></table></div><p>
            指定したノードグループ ID
            を持つノードグループに属するすべてのノードをスキップします。
          </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-cluster-programs-ndb-import"></a>23.4.13 ndb_import — NDB への CSV データのインポート</h3></div></div></div><a class="indexterm" name="idm45563219359424"></a><p>
        <span class="command"><strong>ndb_import</strong></span> は NDB API
        を使用して、<span class="command"><strong>mysqldump</strong></span>
        <code class="option">--tab</code>
        によって生成された CSV 形式のデータなどを
        <code class="literal">NDB</code>
        に直接インポートします。<span class="command"><strong>ndb_import</strong></span>
        が機能するには NDB 管理サーバー
        (<span class="command"><strong>ndb_mgmd</strong></span>)
        への接続が必要です。MySQL Server
        への接続は必要ありません。
      </p><h4><a name="idm45563219352736"></a>使用法</h4><pre class="programlisting">ndb_import <em class="replaceable"><code>db_name</code></em> <em class="replaceable"><code>file_name</code></em> <em class="replaceable"><code>options</code></em>
</pre><p>
        <span class="command"><strong>ndb_import</strong></span> には、2
        つの引数が必要です。<em class="replaceable"><code>db_name</code></em>
        は、データのインポート先のテーブルが見つかったデータベースの名前です。<em class="replaceable"><code>file_name</code></em>
        は、データの読取り元の CSV
        ファイルの名前です。現在のディレクトリにない場合は、このファイルへのパスを含める必要があります。
        ファイルの名前はテーブルの名前と一致する必要があります。ファイル拡張子がある場合は考慮されません。
        <span class="command"><strong>ndb_import</strong></span>
        でサポートされているオプションには、フィールドセパレータ、エスケープおよび行終了記号を指定するオプションが含まれます。これらのオプションについては、このセクションの後半で説明します。<span class="command"><strong>ndb_import</strong></span>
        は NDB Cluster
        管理サーバーに接続できる必要があります。このため、クラスタ
        <code class="filename">config.ini</code>
        ファイルに未使用の<code class="literal">[api]</code>スロットが存在する必要があります。
      </p><p>
        <code class="literal">InnoDB</code>
        などの別のストレージエンジンを使用する既存のテーブルを
        <code class="literal">NDB</code>
        テーブルとして複製するには、<span class="command"><strong>mysql</strong></span>
        クライアントを使用して
        <code class="literal">SELECT INTO
        OUTFILE</code>
        ステートメントを実行し、既存のテーブルを CSV
        ファイルにエクスポートしてから
        <code class="literal">CREATE TABLE
        LIKE</code>
        ステートメントを実行して、既存のテーブルと同じ構造を持つ新しいテーブルを作成し、新しいテーブルで
        <code class="literal">ALTER TABLE ...
        ENGINE=NDB</code>
        を実行します。その後、システムシェルから
        <span class="command"><strong>ndb_import</strong></span> を呼び出して、新しい
        <code class="literal">NDB</code>
        テーブルにデータをロードします。
        たとえば、<code class="literal">myinnodb</code>
        というデータベース内の
        <code class="literal">myinnodb_table</code> という名前の既存の
        <code class="literal">InnoDB</code>
        テーブルを、次に示すように <code class="literal">myndb</code>
        という名前のデータベース内の
        <code class="literal">myndb_table</code> という名前の
        <code class="literal">NDB</code>
        テーブルにエクスポートできます
        (適切な権限を持つ MySQL
        ユーザーとしてすでにログインしていることを前提としています):
      </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
            <span class="command"><strong>mysql</strong></span>
            クライアントで、次のようにします:
          </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>USE myinnodb;</code></strong>

mysql&gt; <strong class="userinput"><code>SELECT * INTO OUTFILE '/tmp/myndb_table.csv'</code></strong>
     &gt;  <strong class="userinput"><code>FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '"' ESCAPED BY '\\'</code></strong>
     &gt;  <strong class="userinput"><code>LINES TERMINATED BY '\n'</code></strong>
     &gt;  <strong class="userinput"><code>FROM myinnodbtable;</code></strong>

mysql&gt; <strong class="userinput"><code>CREATE DATABASE myndb;</code></strong>

mysql&gt; <strong class="userinput"><code>USE myndb;</code></strong>

mysql&gt; <strong class="userinput"><code>CREATE TABLE myndb_table LIKE myinnodb.myinnodb_table;</code></strong>

mysql&gt; <strong class="userinput"><code>ALTER TABLE myndb_table ENGINE=NDB;</code></strong>

mysql&gt; <strong class="userinput"><code>EXIT;</code></strong>
Bye
shell&gt;
</pre><p>
            ターゲットデータベースおよびテーブルが作成されると、実行中の
            <span class="command"><strong>mysqld</strong></span> は不要になります。
            必要に応じて、続行する前に <span class="command"><strong>mysqladmin
            shutdown</strong></span>
            または別の方法を使用して停止できます。
          </p></li><li class="listitem"><p>
            システムシェルで、次の手順を実行します:
          </p><pre class="programlisting"># if you are not already in the MySQL bin directory:
shell&gt; <strong class="userinput"><code>cd <em class="replaceable"><code>path-to-mysql-bin-dir</code></em></code></strong>

shell&gt; <strong class="userinput"><code>ndb_import myndb /tmp/myndb_table.csv --fields-optionally-enclosed-by='"' \</code></strong>
    <strong class="userinput"><code>--fields-terminated-by="," --fields-escaped-by='\\'</code></strong>
</pre><p>
            出力は次のようになります:
          </p><pre class="programlisting">job-1 import myndb.myndb_table from /tmp/myndb_table.csv
job-1 [running] import myndb.myndb_table from /tmp/myndb_table.csv
job-1 [success] import myndb.myndb_table from /tmp/myndb_table.csv
job-1 imported 19984 rows in 0h0m9s at 2277 rows/s
jobs summary: defined: 1 run: 1 with success: 1 with failure: 0
shell&gt;
</pre></li></ol></div><p>
        次のテーブルに、<span class="command"><strong>ndb_import</strong></span>
        に固有のオプションを示します。
        追加説明が表のあとにあります。 ほとんどの
        NDB Cluster プログラム (<span class="command"><strong>ndb_import</strong></span>
        を含む)
        に共通のオプションについては、<a class="xref" href="mysql-cluster.html#mysql-cluster-program-options-common" title="23.4.32 NDB Cluster プログラムに共通のオプション — NDB Cluster プログラムに共通のオプション">セクション23.4.32「NDB Cluster プログラムに共通のオプション — NDB Cluster プログラムに共通のオプション」</a>
        を参照してください。
      </p><div class="table"><a name="mysql-cluster-ndb_import-options-table"></a><p class="title"><b>表 23.35 プログラムで使用されるコマンドライン・オプション ndb_import</b></p><div class="table-contents"><table frame="box" rules="all"><col style="width: 33%"><col style="width: 34%"><col style="width: 33%"><thead><tr>
            <th scope="col">形式</th>
            <th scope="col">説明</th>
            <th scope="col">追加、非推奨、または削除された</th>
          </tr></thead><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_import_abort-on-error">--abort-on-error</a>
                </code>
              </p></th>
            <td>致命的なエラー時にコアをダンプします。デバッグに使用されます</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_import_ai-increment">--ai-increment=#</a>
                </code>
              </p></th>
            <td>PK
              が非表示のテーブルの場合は、自動増分を指定します。
              mysqld を参照</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_import_ai-offset">--ai-offset=#</a>
                </code>
              </p></th>
            <td>PK
              が非表示のテーブルの場合は、自動増分オフセットを指定します。
              mysqld を参照</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_import_ai-prefetch-sz">--ai-prefetch-sz=#</a>
                </code>
              </p></th>
            <td>PK
              が非表示のテーブルの場合は、プリフェッチされる自動インクリメント値の数を指定します。
              mysqld を参照</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_import_connections">--connections=#</a>
                </code>
              </p></th>
            <td>作成するクラスタ接続の数</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_import_continue">--continue</a>
                </code>
              </p></th>
            <td>ジョブが失敗した場合は、次のジョブに進みます</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_import_db-workers">--db-workers=#</a>
                </code>
              </p></th>
            <td>データベース操作を実行しているスレッド数
              (データノード当たり)</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_import_errins-type">--errins-type=name</a>
                </code>
              </p></th>
            <td>テスト用の挿入タイプでエラーが発生しました。使用可能なすべての値を取得するには\"list\"を使用</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_import_errins-delay">--errins-delay=#</a>
                </code>
              </p></th>
            <td>エラー挿入遅延
              (ミリ秒)。ランダムな変動が追加されます</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_import_fields-enclosed-by">--fields-enclosed-by=char</a>
                </code>
              </p></th>
            <td>LOAD DATA ステートメントの「FIELDS ENCLOSED
              BY」オプションと同じです。 CSV
              入力の場合、これは
              --fields-optionally-enclosed-by の使用と同じです</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_import_fields-escaped-by">--fields-escaped-by=name</a>
                </code>
              </p></th>
            <td>LOAD DATA ステートメントの「FIELDS ESCAPED
              BY」オプションと同じ</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_import_fields-optionally-enclosed-by">--fields-optionally-enclosed-by=char</a>
                </code>
              </p></th>
            <td>LOAD DATA ステートメントの「FIELDS OPTIONALLY ENCLOSED
              BY」オプションと同じ</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_import_fields-terminated-by">--fields-terminated-by=char</a>
                </code>
              </p></th>
            <td>LOAD DATA ステートメントの「FIELDS TERMINATED
              BY」オプションと同じ</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_import_idlesleep">--idlesleep=#</a>
                </code>
              </p></th>
            <td>これ以上の処理を待機するスリープ時間 (ミリ秒)</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_import_idlespin">--idlespin=#</a>
                </code>
              </p></th>
            <td>アイドル状態になる前に再試行する回数</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_import_ignore-lines">--ignore-lines=#</a>
                </code>
              </p></th>
            <td>入力ファイルの最初の#行を無視します。
              データ以外のヘッダーをスキップするために使用</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_import_input-type">--input-type=name</a>
                </code>
              </p></th>
            <td>入力タイプ: random または csv</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_import_input-workers">--input-workers=#</a>
                </code>
              </p></th>
            <td>入力を処理するスレッドの数。 --input-type が csv
              の場合は 2 以上である必要があります</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_import_keep-state">--keep-state</a>
                </code>
              </p></th>
            <td>状態ファイル (空でない *.rej ファイルを除く)
              は、通常、ジョブの完了時に削除されます。
              このオプションを使用すると、かわりにすべての状態ファイルが保持されます</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_import_lines-terminated-by">--lines-terminated-by=name</a>
                </code>
              </p></th>
            <td>LOAD DATA ステートメントの「LINES TERMINATED
              BY」オプションと同じ</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_import_max-rows">--max-rows=#</a>
                </code>
              </p></th>
            <td>この数の入力データ行のみをインポートします。デフォルトは
              0 で、すべての行がインポートされます</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_import_monitor">--monitor=#</a>
                </code>
              </p></th>
            <td>何かが変更された場合
              (ステータス、拒否された行、一時エラー)、実行中のジョブのステータスを定期的に印刷します。
              値 0 は無効になります。 値 1
              は、表示された変更をすべて出力します。
              値を大きくすると、事前定義された制限までステータス出力が指数関数的に減少</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_import_no-asynch">--no-asynch</a>
                </code>
              </p></th>
            <td>単一トランザクションでのバッチとしてのデータベース操作の実行</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_import_no-hint">--no-hint</a>
                </code>
              </p></th>
            <td>分散キーヒントを使用してデータノード (TC)
              を選択しない</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_import_opbatch">--opbatch=#</a>
                </code>
              </p></th>
            <td>db 実行バッチは、NDB
              カーネルに送信される一連のトランザクションおよび操作です。
              このオプションは、db 実行バッチ内の NDB
              操作 (blob 操作を含む) を制限します。
              したがって、非同期トランザクションの数も制限されます。
              値 0 は無効です</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_import_opbytes">--opbytes=#</a>
                </code>
              </p></th>
            <td>実行バッチのバイト数の制限 (デフォルトは 0 =
              制限なし)</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_import_output-type">--output-type=name</a>
                </code>
              </p></th>
            <td>出力タイプ: ndb はデフォルトで、null
              がテストに使用されます</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_import_output-workers">--output-workers=#</a>
                </code>
              </p></th>
            <td>出力またはリレーデータベース操作を処理するスレッドの数</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_import_pagesize">--pagesize=#</a>
                </code>
              </p></th>
            <td>I/O バッファを指定されたサイズに整列</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_import_pagecnt">--pagecnt=#</a>
                </code>
              </p></th>
            <td>ページサイズの倍数としての I/O バッファのサイズ。
              CSV
              入力ワーカーがダブルサイズのバッファを割り当てます</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_import_polltimeout">--polltimeout=#</a>
                </code>
              </p></th>
            <td>完了した非同期トランザクションのポーリング当たりのタイムアウト。ポーリングは、すべてのポーリングが完了するか、エラーが発生するまで続行されます</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_import_rejects">--rejects=#</a>
                </code>
              </p></th>
            <td>データロードで拒否される行 (永続エラーのある行)
              の数を制限します。 デフォルトは 0
              で、拒否された行によって致命的エラーが発生することを意味します。
              制限を超える行も *.rej に追加されます</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_import_resume">--resume</a>
                </code>
              </p></th>
            <td>ジョブが中断された場合
              (一時エラー、ユーザー割込み)、まだ処理されていない行で再開</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_import_rowbatch">--rowbatch=#</a>
                </code>
              </p></th>
            <td>行キューの行を制限します (デフォルトは 0 =
              無制限)。--input-type がランダムの場合は 1
              以上にする必要があります</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_import_rowbytes">--rowbytes=#</a>
                </code>
              </p></th>
            <td>行キュー内のバイト数の制限 (0 = 制限なし)</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_import_state-dir">--state-dir=name</a>
                </code>
              </p></th>
            <td>状態ファイルを書き込む場所。デフォルトは currect
              ディレクトリです</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_import_stats">--stats</a>
                </code>
              </p></th>
            <td>パフォーマンス関連のオプションおよび内部統計を
              *.sto および *.stt ファイルに保存します。
              これらのファイルは、--keep-state
              が使用されていない場合でも正常終了時に保持されます</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_import_tempdelay">--tempdelay=#</a>
                </code>
              </p></th>
            <td>一時エラー間でスリープするミリ秒数</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_import_temperrors">--temperrors=#</a>
                </code>
              </p></th>
            <td>実行バッチごとに、一時エラーが原因でトランザクションが失敗できる回数。0
              は、一時エラーが致命的であることを意味します。
              このようなエラーによって .rej
              ファイルに行が書き込まれることはありません</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_import_verbose">--verbose</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_import_verbose">-v</a>
                </code>
              </p></th>
            <td>詳細出力の有効化</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody></table></div></div><br class="table-break"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="option_ndb_import_abort-on-error"></a>
            <code class="option">--abort-on-error</code>
          </p><a class="indexterm" name="idm45563219065920"></a><a class="indexterm" name="idm45563219063760"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for abort-on-error"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--abort-on-error</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table></div><p>
            致命的エラー時にコアをダンプします。デバッグにのみ使用されます。
          </p></li><li class="listitem"><p><a name="option_ndb_import_ai-increment"></a>
            <code class="option">--ai-increment</code>=<em class="replaceable"><code>#</code></em>
          </p><a class="indexterm" name="idm45563219049040"></a><a class="indexterm" name="idm45563219046880"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ai-increment"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--ai-increment=#</code></td>
</tr><tr><th>型</th>
<td>Integer</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">1</code></td>
</tr><tr><th>最小値</th>
<td><code class="literal">1</code></td>
</tr><tr><th>最大値</th>
<td><code class="literal">4294967295</code></td>
</tr></tbody></table></div><p>
            非表示の主キーを持つテーブルの場合は、<code class="literal">auto_increment_increment</code>
            システム変数が MySQL Server
            で行うように、自動増分を指定します。
          </p></li><li class="listitem"><p><a name="option_ndb_import_ai-offset"></a>
            <code class="option">--ai-offset</code>=<em class="replaceable"><code>#</code></em>
          </p><a class="indexterm" name="idm45563219026176"></a><a class="indexterm" name="idm45563219024000"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ai-offset"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--ai-offset=#</code></td>
</tr><tr><th>型</th>
<td>Integer</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">1</code></td>
</tr><tr><th>最小値</th>
<td><code class="literal">1</code></td>
</tr><tr><th>最大値</th>
<td><code class="literal">4294967295</code></td>
</tr></tbody></table></div><p>
            非表示の主キーを持つテーブルの場合は、自動増分オフセットを指定します。
            <code class="literal">auto_increment_offset</code>
            システム変数に似ています。
          </p></li><li class="listitem"><p><a name="option_ndb_import_ai-prefetch-sz"></a>
            <code class="option">--ai-prefetch-sz</code>=<em class="replaceable"><code>#</code></em>
          </p><a class="indexterm" name="idm45563219003408"></a><a class="indexterm" name="idm45563219001248"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ai-prefetch-sz"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--ai-prefetch-sz=#</code></td>
</tr><tr><th>型</th>
<td>Integer</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">1024</code></td>
</tr><tr><th>最小値</th>
<td><code class="literal">1</code></td>
</tr><tr><th>最大値</th>
<td><code class="literal">4294967295</code></td>
</tr></tbody></table></div><p>
            非表示の主キーを持つテーブルの場合は、プリフェッチされる自動増分値の数を指定します。
            MySQL Server での
            <code class="literal">ndb_autoincrement_prefetch_sz</code>
            システム変数と同様に動作します。
          </p></li><li class="listitem"><p><a name="option_ndb_import_connections"></a>
            <code class="option">--connections</code>=<em class="replaceable"><code>#</code></em>
          </p><a class="indexterm" name="idm45563218980400"></a><a class="indexterm" name="idm45563218978256"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for connections"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--connections=#</code></td>
</tr><tr><th>型</th>
<td>Integer</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">1</code></td>
</tr><tr><th>最小値</th>
<td><code class="literal">1</code></td>
</tr><tr><th>最大値</th>
<td><code class="literal">4294967295</code></td>
</tr></tbody></table></div><p>
            作成するクラスタ接続の数。
          </p></li><li class="listitem"><p><a name="option_ndb_import_continue"></a>
            <code class="option">--continue</code>
          </p><a class="indexterm" name="idm45563218959216"></a><a class="indexterm" name="idm45563218957072"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for continue"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--continue</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table></div><p>
            ジョブが失敗した場合は、次のジョブに進みます。
          </p></li><li class="listitem"><p><a name="option_ndb_import_db-workers"></a>
            <code class="option">--db-workers</code>=<em class="replaceable"><code>#</code></em>
          </p><a class="indexterm" name="idm45563218942496"></a><a class="indexterm" name="idm45563218940352"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for db-workers"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--db-workers=#</code></td>
</tr><tr><th>型</th>
<td>Integer</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">4</code></td>
</tr><tr><th>最小値</th>
<td><code class="literal">1</code></td>
</tr><tr><th>最大値</th>
<td><code class="literal">4294967295</code></td>
</tr></tbody></table></div><p>
            データベース操作を実行しているスレッド数
            (データノード当たり)。
          </p></li><li class="listitem"><p><a name="option_ndb_import_errins-type"></a>
            <code class="option">--errins-type</code>=<em class="replaceable"><code>name</code></em>
          </p><a class="indexterm" name="idm45563218920768"></a><a class="indexterm" name="idm45563218918624"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for errins-type"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--errins-type=name</code></td>
</tr><tr><th>型</th>
<td>列挙</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">[none]</code></td>
</tr><tr><th>有効な値</th>
<td><p class="valid-value"><code class="literal">stopjob</code></p><p class="valid-value"><code class="literal">stopall</code></p><p class="valid-value"><code class="literal">sighup</code></p><p class="valid-value"><code class="literal">sigint</code></p><p class="valid-value"><code class="literal">list</code></p></td>
</tr></tbody></table></div><p>
            挿入タイプでエラーが発生しました。使用可能なすべての値を取得するには、<em class="replaceable"><code>name</code></em>
            値として <code class="literal">list</code> を使用します。
            このオプションは、テスト目的でのみ使用されます。
          </p></li><li class="listitem"><p><a name="option_ndb_import_errins-delay"></a>
            <code class="option">--errins-delay</code>=<em class="replaceable"><code>#</code></em>
          </p><a class="indexterm" name="idm45563218895808"></a><a class="indexterm" name="idm45563218893648"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for errins-delay"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--errins-delay=#</code></td>
</tr><tr><th>型</th>
<td>Integer</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">1000</code></td>
</tr><tr><th>最小値</th>
<td><code class="literal">0</code></td>
</tr><tr><th>最大値</th>
<td><code class="literal">4294967295</code></td>
</tr><tr><th>単位</th>
<td><code class="literal">ms</code></td>
</tr></tbody></table></div><p>
            エラー挿入遅延
            (ミリ秒)。ランダムなバリエーションが追加されます。
            このオプションは、テスト目的でのみ使用されます。
          </p></li><li class="listitem"><p><a name="option_ndb_import_fields-enclosed-by"></a>
            <code class="option">--fields-enclosed-by</code>=<em class="replaceable"><code>char</code></em>
          </p><a class="indexterm" name="idm45563218871424"></a><a class="indexterm" name="idm45563218869264"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for fields-enclosed-by"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--fields-enclosed-by=char</code></td>
</tr><tr><th>型</th>
<td>文字列</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">[none]</code></td>
</tr></tbody></table></div><p>
            これは、<code class="literal">LOAD DATA</code>
            ステートメントの <code class="literal">FIELDS ENCLOSED
            BY</code>
            オプションと同様に機能し、フィールド値を引用符で囲む文字を指定します。
            CSV 入力の場合、これは
            <code class="option">--fields-optionally-enclosed-by</code>
            と同じです。
          </p></li><li class="listitem"><p><a name="option_ndb_import_fields-escaped-by"></a>
            <code class="option">--fields-escaped-by</code>=<em class="replaceable"><code>name</code></em>
          </p><a class="indexterm" name="idm45563218851760"></a><a class="indexterm" name="idm45563218849600"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for fields-escaped-by"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--fields-escaped-by=name</code></td>
</tr><tr><th>型</th>
<td>文字列</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">\</code></td>
</tr></tbody></table></div><p>
            SQL <code class="literal">LOAD DATA</code>
            ステートメントの <code class="literal">FIELDS ESCAPED
            BY</code>
            オプションと同じ方法でエスケープ文字を指定します。
          </p></li><li class="listitem"><p><a name="option_ndb_import_fields-optionally-enclosed-by"></a>
            <code class="option">--fields-optionally-enclosed-by</code>=<em class="replaceable"><code>char</code></em>
          </p><a class="indexterm" name="idm45563218833056"></a><a class="indexterm" name="idm45563218830864"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for fields-optionally-enclosed-by"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--fields-optionally-enclosed-by=char</code></td>
</tr><tr><th>型</th>
<td>文字列</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">[none]</code></td>
</tr></tbody></table></div><p>
            これは、<code class="literal">LOAD DATA</code>
            ステートメントの <code class="literal">FIELDS OPTIONALLY ENCLOSED
            BY</code>
            オプションと同様に機能し、オプションでフィールド値を引用符で囲んだ文字を指定します。
            CSV 入力の場合、これは
            <code class="option">--fields-enclosed-by</code>
            と同じです。
          </p></li><li class="listitem"><p><a name="option_ndb_import_fields-terminated-by"></a>
            <code class="option">--fields-terminated-by</code>=<em class="replaceable"><code>char</code></em>
          </p><a class="indexterm" name="idm45563218813248"></a><a class="indexterm" name="idm45563218811072"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for fields-terminated-by"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--fields-terminated-by=char</code></td>
</tr><tr><th>型</th>
<td>文字列</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">\t</code></td>
</tr></tbody></table></div><p>
            これは、<code class="literal">LOAD DATA</code>
            ステートメントの <code class="literal">FIELDS TERMINATED
            BY</code>
            オプションと同様に機能し、インターペットする文字をフィールドセパレータとして指定します。
          </p></li><li class="listitem"><p><a name="option_ndb_import_idlesleep"></a>
            <code class="option">--idlesleep</code>=<em class="replaceable"><code>#</code></em>
          </p><a class="indexterm" name="idm45563218794448"></a><a class="indexterm" name="idm45563218792304"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for idlesleep"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--idlesleep=#</code></td>
</tr><tr><th>型</th>
<td>Integer</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">1</code></td>
</tr><tr><th>最小値</th>
<td><code class="literal">1</code></td>
</tr><tr><th>最大値</th>
<td><code class="literal">4294967295</code></td>
</tr><tr><th>単位</th>
<td><code class="literal">ms</code></td>
</tr></tbody></table></div><p>
            これ以上の作業の実行を待機するスリープ時間
            (ミリ秒)。
          </p></li><li class="listitem"><p><a name="option_ndb_import_idlespin"></a>
            <code class="option">--idlespin</code>=<em class="replaceable"><code>#</code></em>
          </p><a class="indexterm" name="idm45563218770368"></a><a class="indexterm" name="idm45563218768224"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for idlespin"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--idlespin=#</code></td>
</tr><tr><th>型</th>
<td>Integer</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">0</code></td>
</tr><tr><th>最小値</th>
<td><code class="literal">0</code></td>
</tr><tr><th>最大値</th>
<td><code class="literal">4294967295</code></td>
</tr></tbody></table></div><p>
            スリープする前に再試行する回数。
          </p></li><li class="listitem"><p><a name="option_ndb_import_ignore-lines"></a>
            <code class="option">--ignore-lines</code>=<em class="replaceable"><code>#</code></em>
          </p><a class="indexterm" name="idm45563218748864"></a><a class="indexterm" name="idm45563218746704"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ignore-lines"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--ignore-lines=#</code></td>
</tr><tr><th>型</th>
<td>Integer</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">0</code></td>
</tr><tr><th>最小値</th>
<td><code class="literal">0</code></td>
</tr><tr><th>最大値</th>
<td><code class="literal">4294967295</code></td>
</tr></tbody></table></div><p>
            ndb_import
            が入力ファイルの最初の<em class="replaceable"><code>#</code></em>行を無視するようにします。
            これは、データを含まないファイルヘッダーをスキップするために使用できます。
          </p></li><li class="listitem"><p><a name="option_ndb_import_input-type"></a>
            <code class="option">--input-type</code>=<em class="replaceable"><code>name</code></em>
          </p><a class="indexterm" name="idm45563218726640"></a><a class="indexterm" name="idm45563218724496"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for input-type"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--input-type=name</code></td>
</tr><tr><th>型</th>
<td>列挙</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">csv</code></td>
</tr><tr><th>有効な値</th>
<td><p class="valid-value"><code class="literal">random</code></p><p class="valid-value"><code class="literal">csv</code></p></td>
</tr></tbody></table></div><p>
            入力タイプのタイプを設定します。
            デフォルトは <code class="literal">csv</code>
            です。<code class="literal">random</code>
            はテストのみを目的としています。
          </p></li><li class="listitem"><p><a name="option_ndb_import_input-workers"></a>
            <code class="option">--input-workers</code>=<em class="replaceable"><code>#</code></em>
          </p><a class="indexterm" name="idm45563218704528"></a><a class="indexterm" name="idm45563218702368"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for input-workers"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--input-workers=#</code></td>
</tr><tr><th>型</th>
<td>Integer</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">4</code></td>
</tr><tr><th>最小値</th>
<td><code class="literal">1</code></td>
</tr><tr><th>最大値</th>
<td><code class="literal">4294967295</code></td>
</tr></tbody></table></div><p>
            入力を処理するスレッドの数を設定します。
          </p></li><li class="listitem"><p><a name="option_ndb_import_keep-state"></a>
            <code class="option">--keep-state</code>
          </p><a class="indexterm" name="idm45563218683264"></a><a class="indexterm" name="idm45563218681120"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for keep-state"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--keep-state</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">false</code></td>
</tr></tbody></table></div><p>
            デフォルトでは、ndb_import
            はジョブの完了時にすべての状態ファイル
            (空でない <code class="filename">*.rej</code>
            ファイルを除く) を削除します。
            プログラムですべての状態ファイルを強制的に保持するには、このオプション
            (または引数は必須) を指定します。
          </p></li><li class="listitem"><p><a name="option_ndb_import_lines-terminated-by"></a>
            <code class="option">--lines-terminated-by</code>=<em class="replaceable"><code>name</code></em>
          </p><a class="indexterm" name="idm45563218665136"></a><a class="indexterm" name="idm45563218662976"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for lines-terminated-by"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--lines-terminated-by=name</code></td>
</tr><tr><th>型</th>
<td>文字列</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">\n</code></td>
</tr></tbody></table></div><p>
            これは、<code class="literal">LOAD DATA</code>
            ステートメントの <code class="literal">LINES TERMINATED
            BY</code>
            オプションと同様に機能し、インターペットする文字を行末として指定します。
          </p></li><li class="listitem"><p><a name="option_ndb_import_log-level"></a>
            <code class="option">--log-level</code>=<em class="replaceable"><code>#</code></em>
          </p><a class="indexterm" name="idm45563218646368"></a><a class="indexterm" name="idm45563218644240"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for log-level"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--log-level=#</code></td>
</tr><tr><th>型</th>
<td>Integer</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">0</code></td>
</tr><tr><th>最小値</th>
<td><code class="literal">0</code></td>
</tr><tr><th>最大値</th>
<td><code class="literal">2</code></td>
</tr></tbody></table></div><p>
            指定されたレベルで内部ロギングを実行します。
            このオプションは、主に内部および開発での使用を目的としています。
          </p><p>
            NDB
            のデバッグビルドでのみ、このオプションを使用してロギングレベルを最大
            4 に設定できます。
          </p></li><li class="listitem"><p><a name="option_ndb_import_max-rows"></a>
            <code class="option">--max-rows</code>=<em class="replaceable"><code>#</code></em>
          </p><a class="indexterm" name="idm45563218623824"></a><a class="indexterm" name="idm45563218621680"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for max-rows"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--max-rows=#</code></td>
</tr><tr><th>型</th>
<td>Integer</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">0</code></td>
</tr><tr><th>最小値</th>
<td><code class="literal">0</code></td>
</tr><tr><th>最大値</th>
<td><code class="literal">4294967295</code></td>
</tr><tr><th>単位</th>
<td><code class="literal">bytes</code></td>
</tr></tbody></table></div><p>
            この数の入力データ行のみをインポートします。デフォルトは
            0 で、すべての行がインポートされます。
          </p></li><li class="listitem"><p><a name="option_ndb_import_monitor"></a>
            <code class="option">--monitor</code>=<em class="replaceable"><code>#</code></em>
          </p><a class="indexterm" name="idm45563218599600"></a><a class="indexterm" name="idm45563218597472"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for monitor"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--monitor=#</code></td>
</tr><tr><th>型</th>
<td>Integer</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">2</code></td>
</tr><tr><th>最小値</th>
<td><code class="literal">0</code></td>
</tr><tr><th>最大値</th>
<td><code class="literal">4294967295</code></td>
</tr><tr><th>単位</th>
<td><code class="literal">bytes</code></td>
</tr></tbody></table></div><p>
            なんらかの変更
            (ステータス、拒否された行、一時エラー)
            があった場合は、実行中のジョブのステータスを定期的に出力します。
            このレポートを無効にするには、0
            に設定します。 1
            に設定すると、表示される変更が印刷されます。
            値を大きくすると、このステータスレポートの頻度が低くなります。
          </p></li><li class="listitem"><p><a name="option_ndb_import_no-asynch"></a>
            <code class="option">--no-asynch</code>
          </p><a class="indexterm" name="idm45563218575520"></a><a class="indexterm" name="idm45563218573376"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for no-asynch"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--no-asynch</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table></div><p>
            単一のトランザクションでバッチとしてデータベース操作を実行します。
          </p></li><li class="listitem"><p><a name="option_ndb_import_no-hint"></a>
            <code class="option">--no-hint</code>
          </p><a class="indexterm" name="idm45563218559056"></a><a class="indexterm" name="idm45563218556880"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for no-hint"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--no-hint</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table></div><p>
            分散キーのヒントを使用してデータノードを選択しないでください。
          </p></li><li class="listitem"><p><a name="option_ndb_import_opbatch"></a>
            <code class="option">--opbatch</code>=<em class="replaceable"><code>#</code></em>
          </p><a class="indexterm" name="idm45563218542256"></a><a class="indexterm" name="idm45563218540080"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for opbatch"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--opbatch=#</code></td>
</tr><tr><th>型</th>
<td>Integer</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">256</code></td>
</tr><tr><th>最小値</th>
<td><code class="literal">1</code></td>
</tr><tr><th>最大値</th>
<td><code class="literal">4294967295</code></td>
</tr><tr><th>単位</th>
<td><code class="literal">bytes</code></td>
</tr></tbody></table></div><p>
            実行バッチごとの操作数 (blob 操作を含む)
            および非同期トランザクション数の制限を設定します。
          </p></li><li class="listitem"><p><a name="option_ndb_import_opbytes"></a>
            <code class="option">--opbytes</code>=<em class="replaceable"><code>#</code></em>
          </p><a class="indexterm" name="idm45563218518080"></a><a class="indexterm" name="idm45563218515904"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for opbytes"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--opbytes=#</code></td>
</tr><tr><th>型</th>
<td>Integer</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">0</code></td>
</tr><tr><th>最小値</th>
<td><code class="literal">0</code></td>
</tr><tr><th>最大値</th>
<td><code class="literal">4294967295</code></td>
</tr><tr><th>単位</th>
<td><code class="literal">bytes</code></td>
</tr></tbody></table></div><p>
            実行バッチ当たりのバイト数の制限を設定します。
            無制限の場合は 0 を使用します。
          </p></li><li class="listitem"><p><a name="option_ndb_import_output-type"></a>
            <code class="option">--output-type</code>=<em class="replaceable"><code>name</code></em>
          </p><a class="indexterm" name="idm45563218493904"></a><a class="indexterm" name="idm45563218491760"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for output-type"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--output-type=name</code></td>
</tr><tr><th>型</th>
<td>列挙</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">ndb</code></td>
</tr><tr><th>有効な値</th>
<td><code class="literal">null</code></td>
</tr></tbody></table></div><p>
            出力タイプを設定します。<code class="literal">ndb</code>
            がデフォルトです。<code class="literal">null</code>
            はテストにのみ使用されます。
          </p></li><li class="listitem"><p><a name="option_ndb_import_output-workers"></a>
            <code class="option">--output-workers</code>=<em class="replaceable"><code>#</code></em>
          </p><a class="indexterm" name="idm45563218473152"></a><a class="indexterm" name="idm45563218470992"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for output-workers"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--output-workers=#</code></td>
</tr><tr><th>型</th>
<td>Integer</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">2</code></td>
</tr><tr><th>最小値</th>
<td><code class="literal">1</code></td>
</tr><tr><th>最大値</th>
<td><code class="literal">4294967295</code></td>
</tr></tbody></table></div><p>
            出力またはリレーデータベース操作を処理するスレッドの数を設定します。
          </p></li><li class="listitem"><p><a name="option_ndb_import_pagesize"></a>
            <code class="option">--pagesize</code>=<em class="replaceable"><code>#</code></em>
          </p><a class="indexterm" name="idm45563218451424"></a><a class="indexterm" name="idm45563218449280"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for pagesize"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--pagesize=#</code></td>
</tr><tr><th>型</th>
<td>Integer</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">4096</code></td>
</tr><tr><th>最小値</th>
<td><code class="literal">1</code></td>
</tr><tr><th>最大値</th>
<td><code class="literal">4294967295</code></td>
</tr><tr><th>単位</th>
<td><code class="literal">bytes</code></td>
</tr></tbody></table></div><p>
            I/O
            バッファを指定されたサイズに位置合せします。
          </p></li><li class="listitem"><p><a name="option_ndb_import_pagecnt"></a>
            <code class="option">--pagecnt</code>=<em class="replaceable"><code>#</code></em>
          </p><a class="indexterm" name="idm45563218427312"></a><a class="indexterm" name="idm45563218425136"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for pagecnt"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--pagecnt=#</code></td>
</tr><tr><th>型</th>
<td>Integer</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">64</code></td>
</tr><tr><th>最小値</th>
<td><code class="literal">1</code></td>
</tr><tr><th>最大値</th>
<td><code class="literal">4294967295</code></td>
</tr></tbody></table></div><p>
            I/O
            バッファのサイズをページサイズの倍数として設定します。
            CSV
            入力ワーカーは、サイズが倍増したバッファを割り当てます。
          </p></li><li class="listitem"><p><a name="option_ndb_import_polltimeout"></a>
            <code class="option">--polltimeout</code>=<em class="replaceable"><code>#</code></em>
          </p><a class="indexterm" name="idm45563218405456"></a><a class="indexterm" name="idm45563218403312"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for polltimeout"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--polltimeout=#</code></td>
</tr><tr><th>型</th>
<td>Integer</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">1000</code></td>
</tr><tr><th>最小値</th>
<td><code class="literal">1</code></td>
</tr><tr><th>最大値</th>
<td><code class="literal">4294967295</code></td>
</tr><tr><th>単位</th>
<td><code class="literal">ms</code></td>
</tr></tbody></table></div><p>
            完了した非同期トランザクションのポーリングごとにタイムアウトを設定します。ポーリングは、すべてのポーリングが完了するか、エラーが発生するまで続行されます。
          </p></li><li class="listitem"><p><a name="option_ndb_import_rejects"></a>
            <code class="option">--rejects</code>=<em class="replaceable"><code>#</code></em>
          </p><a class="indexterm" name="idm45563218381056"></a><a class="indexterm" name="idm45563218378944"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for rejects"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--rejects=#</code></td>
</tr><tr><th>型</th>
<td>Integer</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">0</code></td>
</tr><tr><th>最小値</th>
<td><code class="literal">0</code></td>
</tr><tr><th>最大値</th>
<td><code class="literal">4294967295</code></td>
</tr></tbody></table></div><p>
            データロードで拒否される行
            (永続エラーのある行) の数を制限します。
            デフォルトは 0
            で、拒否された行によって致命的エラーが発生することを意味します。
            制限を超える原因となった行は、<code class="filename">.rej</code>
            ファイルに追加されます。
          </p><p>
            このオプションによって課される制限は、現在の実行中に有効です。
            <code class="option">--resume</code>
            を使用して再起動された実行は、この目的では
            <span class="quote">「<span class="quote">new</span>」</span> の実行とみなされます。
          </p></li><li class="listitem"><p><a name="option_ndb_import_resume"></a>
            <code class="option">--resume</code>
          </p><a class="indexterm" name="idm45563218356608"></a><a class="indexterm" name="idm45563218354496"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for resume"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--resume</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table></div><p>
            ジョブが中断された場合 (一時 DB
            エラーまたはユーザーによる割込みが原因)、まだ処理されていない行で再開します。
          </p></li><li class="listitem"><p><a name="option_ndb_import_rowbatch"></a>
            <code class="option">--rowbatch</code>=<em class="replaceable"><code>#</code></em>
          </p><a class="indexterm" name="idm45563218339680"></a><a class="indexterm" name="idm45563218337536"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for rowbatch"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--rowbatch=#</code></td>
</tr><tr><th>型</th>
<td>Integer</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">0</code></td>
</tr><tr><th>最小値</th>
<td><code class="literal">0</code></td>
</tr><tr><th>最大値</th>
<td><code class="literal">4294967295</code></td>
</tr><tr><th>単位</th>
<td><code class="literal">rows</code></td>
</tr></tbody></table></div><p>
            行キューごとの行数の制限を設定します。
            無制限の場合は 0 を使用します。
          </p></li><li class="listitem"><p><a name="option_ndb_import_rowbytes"></a>
            <code class="option">--rowbytes</code>=<em class="replaceable"><code>#</code></em>
          </p><a class="indexterm" name="idm45563218315536"></a><a class="indexterm" name="idm45563218313392"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for rowbytes"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--rowbytes=#</code></td>
</tr><tr><th>型</th>
<td>Integer</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">262144</code></td>
</tr><tr><th>最小値</th>
<td><code class="literal">0</code></td>
</tr><tr><th>最大値</th>
<td><code class="literal">4294967295</code></td>
</tr><tr><th>単位</th>
<td><code class="literal">bytes</code></td>
</tr></tbody></table></div><p>
            行キュー当たりのバイト数の制限を設定します。
            無制限の場合は 0 を使用します。
          </p></li><li class="listitem"><p><a name="option_ndb_import_stats"></a>
            <code class="option">--stats</code>
          </p><a class="indexterm" name="idm45563218291792"></a><a class="indexterm" name="idm45563218289616"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for stats"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--stats</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">false</code></td>
</tr></tbody></table></div><p>
            パフォーマンスおよびその他の内部統計に関連するオプションに関する情報を、<code class="filename">*.sto</code>
            および <code class="filename">*.stt</code>
            という名前のファイルに保存します。
            これらのファイルは、(<code class="option">--keep-state</code>
            も指定されていない場合でも)
            正常終了時に常に保持されます。
          </p></li><li class="listitem"><p><a name="option_ndb_import_state-dir"></a>
            <code class="option">--state-dir</code>=<em class="replaceable"><code>name</code></em>
          </p><a class="indexterm" name="idm45563218272288"></a><a class="indexterm" name="idm45563218270144"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for state-dir"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--state-dir=name</code></td>
</tr><tr><th>型</th>
<td>文字列</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">.</code></td>
</tr></tbody></table></div><p>
            プログラムの実行によって生成された状態ファイル
            (<code class="filename"><em class="replaceable"><code>tbl_name</code></em>.map</code>、<code class="filename"><em class="replaceable"><code>tbl_name</code></em>.rej</code>、<code class="filename"><em class="replaceable"><code>tbl_name</code></em>.res</code>
            および
            <code class="filename"><em class="replaceable"><code>tbl_name</code></em>.stt</code>)
            を書き込む場所。デフォルトは現在のディレクトリです。
          </p></li><li class="listitem"><p><a name="option_ndb_import_tempdelay"></a>
            <code class="option">--tempdelay</code>=<em class="replaceable"><code>#</code></em>
          </p><a class="indexterm" name="idm45563218251248"></a><a class="indexterm" name="idm45563218249104"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for tempdelay"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--tempdelay=#</code></td>
</tr><tr><th>型</th>
<td>Integer</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">10</code></td>
</tr><tr><th>最小値</th>
<td><code class="literal">0</code></td>
</tr><tr><th>最大値</th>
<td><code class="literal">4294967295</code></td>
</tr><tr><th>単位</th>
<td><code class="literal">ms</code></td>
</tr></tbody></table></div><p>
            一時エラー間でスリープするミリ秒数。
          </p></li><li class="listitem"><p><a name="option_ndb_import_temperrors"></a>
            <code class="option">--temperrors</code>=<em class="replaceable"><code>#</code></em>
          </p><a class="indexterm" name="idm45563218227232"></a><a class="indexterm" name="idm45563218225088"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for temperrors"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--temperrors=#</code></td>
</tr><tr><th>型</th>
<td>Integer</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">0</code></td>
</tr><tr><th>最小値</th>
<td><code class="literal">0</code></td>
</tr><tr><th>最大値</th>
<td><code class="literal">4294967295</code></td>
</tr></tbody></table></div><p>
            実行バッチごとに、一時エラーが原因でトランザクションが失敗する可能性がある回数。
            デフォルトは 0
            で、これは一時エラーが致命的であることを意味します。
            一時エラーにより、<code class="filename">.rej</code>
            ファイルに行が追加されることはありません。
          </p></li><li class="listitem"><p><a name="option_ndb_import_verbose"></a>
            <code class="option">--verbose</code>, <code class="option">-v</code>
          </p><a class="indexterm" name="idm45563218204320"></a><a class="indexterm" name="idm45563218202144"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for verbose"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--verbose</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">false</code></td>
</tr></tbody></table></div><p>
            冗長出力を有効にします。
          </p></li></ul></div><p>
        <code class="literal">LOAD DATA</code>
        と同様に、フィールドおよび行の書式設定のオプションは、CSV
        ファイルの作成に使用されたオプションと、<code class="literal">SELECT
        INTO ... OUTFILE</code>
        を使用して実行されたか他の方法で実行されたかにかかわらず、ほとんど一致します。
        <code class="literal">LOAD DATA</code>
        ステートメントの <code class="literal">STARTING WITH</code>
        オプションと同等のものはありません。
      </p><p>
        <span class="command"><strong>ndb_import</strong></span> は NDB 7.6.2
        で追加されました。
      </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-cluster-programs-ndb-index-stat"></a>23.4.14 ndb_index_stat — NDB インデックス統計ユーティリティー</h3></div></div></div><a class="indexterm" name="idm45563218181840"></a><p>
        <span class="command"><strong>ndb_index_stat</strong></span> は、<code class="literal">NDB</code>
        テーブルのインデックスに関するフラグメントごとの統計情報を表示します。
        これには、キャッシュバージョンと経過期間、パーティションごとのインデックスエントリの数、およびインデックスによるメモリー使用量が含まれます。
      </p><h4><a name="idm45563218177984"></a>使用法</h4><p>
        指定した <code class="literal">NDB</code>
        テーブルの基本的なインデックス統計を取得するには、最初の引数としてテーブル名を指定し、<code class="option">--database</code>
        (<code class="option">-d</code>)
        オプションを使用してこのテーブルが含まれているデータベース名をその直後に指定して、<span class="command"><strong>ndb_index_stat</strong></span>
        を次のように呼び出します。
      </p><pre class="programlisting">ndb_index_stat <em class="replaceable"><code>table</code></em> -d <em class="replaceable"><code>database</code></em>
</pre><p>
        この例では、<span class="command"><strong>ndb_index_stat</strong></span>
        を使用して、<code class="literal">test</code> データベースの
        <code class="literal">mytable</code> という名前の
        <code class="literal">NDB</code>
        テーブルに関するそのような情報を取得しています。
      </p><a class="indexterm" name="idm45563218168160"></a><a class="indexterm" name="idm45563218166048"></a><pre class="programlisting">shell&gt; <strong class="userinput"><code>ndb_index_stat -d test mytable</code></strong>
table:City index:PRIMARY fragCount:2
sampleVersion:3 loadTime:1399585986 sampleCount:1994 keyBytes:7976
query cache: valid:1 sampleCount:1994 totalBytes:27916
times in ms: save: 7.133 sort: 1.974 sort per sample: 0.000

NDBT_ProgramExit: 0 - OK
</pre><p>
        <code class="literal">sampleVersion</code>
        は、統計データが取得されたキャッシュのバージョン番号です。
        <code class="option">--update</code>
        オプションを指定して <span class="command"><strong>ndb_index_stat</strong></span>
        を実行すると、sampleVersion が増分されます。
      </p><p>
        <code class="literal">loadTime</code>
        はキャッシュが最後に更新された時間を示しています。
        これは UNIX
        エポックからの秒数として表されます。
      </p><p>
        <code class="literal">sampleCount</code>
        はパーティションごとに見つかったインデックスエントリの数です。
        エントリの合計数を見積もるには、これをフラグメントの数
        (<code class="literal">fragCount</code> として表示されます)
        で乗算します。
      </p><p>
        <code class="literal">sampleCount</code> は <code class="literal">SHOW
        INDEX</code> または
        <code class="literal">INFORMATION_SCHEMA.STATISTICS</code>
        のカーディナリティーと似ています。ただし、後者の
        2
        つはテーブル全体の統計を示し、<span class="command"><strong>ndb_index_stat</strong></span>
        はフラグメントごとの平均を示します。
      </p><p>
        <code class="literal">keyBytes</code>
        はインデックスによって使用されるバイト数です。
        この例では、主キーは整数であり、各インデックスに
        4
        バイトが必要となるため、<code class="literal">keyBytes</code>
        はこの場合次のように計算できます。
      </p><pre class="programlisting">    keyBytes = sampleCount * (4 bytes per index) = 1994 * 4 = 7976
</pre><p>
        この情報は、<code class="literal">INFORMATION_SCHEMA.COLUMNS</code>
        の対応するカラム定義を使用して取得することもできます
        (これには、MySQL Server および MySQL
        クライアントアプリケーションが必要となります)。
      </p><p>
        <code class="literal">totalBytes</code>
        はテーブルのすべてのインデックスで使用される合計メモリーです
        (バイト単位)。
      </p><p>
        前述の例に示されている時間は、<span class="command"><strong>ndb_index_stat</strong></span>
        の各呼び出しに固有のものです。
      </p><p>
        <code class="option">--verbose</code>
        オプションを指定すると、次のように追加出力が表示されます。
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>ndb_index_stat -d test mytable --verbose</code></strong>
random seed 1337010518
connected
loop 1 of 1
table:mytable index:PRIMARY fragCount:4
sampleVersion:2 loadTime:1336751773 sampleCount:0 keyBytes:0
read stats
query cache created
query cache: valid:1 sampleCount:0 totalBytes:0
times in ms: save: 20.766 sort: 0.001
disconnected

NDBT_ProgramExit: 0 - OK

shell&gt;
</pre><p>
        プログラムからの出力が <code class="literal">NDBT_ProgramExit: 0 -
        OK</code>
        のみの場合は、統計がまだ存在しないことを示している可能性があります。
        これらを強制的に作成
        (またはすでに存在する場合は更新)
        するには、<code class="option">--update</code>
        オプションを指定して <span class="command"><strong>ndb_index_stat</strong></span>
        を起動するか、<span class="command"><strong>mysql</strong></span>
        クライアントのテーブルで
        <code class="literal">ANALYZE TABLE</code>
        を実行します。
      </p><h4><a name="idm45563218134576"></a>オプション</h4><p>
        次のテーブルに、NDB Cluster
        <span class="command"><strong>ndb_index_stat</strong></span>
        ユーティリティーに固有のオプションを示します。
        詳しい説明は表のあとに一覧されています。
        ほとんどの NDB Cluster プログラム
        (<span class="command"><strong>ndb_index_stat</strong></span> を含む)
        に共通のオプションについては、<a class="xref" href="mysql-cluster.html#mysql-cluster-program-options-common" title="23.4.32 NDB Cluster プログラムに共通のオプション — NDB Cluster プログラムに共通のオプション">セクション23.4.32「NDB Cluster プログラムに共通のオプション — NDB Cluster プログラムに共通のオプション」</a>
        を参照してください。
      </p><div class="table"><a name="mysql-cluster-ndb_index_stat-options-table"></a><p class="title"><b>表 23.36 プログラムで使用されるコマンドライン・オプション ndb_index_stat</b></p><div class="table-contents"><table frame="box" rules="all"><col style="width: 33%"><col style="width: 34%"><col style="width: 33%"><thead><tr>
            <th scope="col">形式</th>
            <th scope="col">説明</th>
            <th scope="col">追加、非推奨、または削除された</th>
          </tr></thead><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_index_stat_database">--database=name</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_index_stat_database">-d</a>
                </code>
              </p></th>
            <td>テーブルが含まれているデータベースの名前</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_index_stat_delete">--delete</a>
                </code>
              </p></th>
            <td>テーブルのインデックス統計を削除し、以前に構成された自動更新を停止</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_index_stat_update">--update</a>
                </code>
              </p></th>
            <td>テーブルのインデックス統計を更新し、以前に構成された自動更新を再起動</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_index_stat_dump">--dump</a>
                </code>
              </p></th>
            <td>クエリーキャッシュの印刷</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_index_stat_query">--query=#</a>
                </code>
              </p></th>
            <td>最初のキー属性に対してランダム範囲クエリーを実行します
              (int unsigned である必要があります)</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_index_stat_sys-drop">--sys-drop</a>
                </code>
              </p></th>
            <td>NDB
              カーネルの統計テーブルおよびイベントを削除します
              (すべての統計が失われます)</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_index_stat_sys-create">--sys-create</a>
                </code>
              </p></th>
            <td>NDB
              カーネルにすべての統計テーブルおよびイベントを作成します
              (それらがまったく存在していなかった場合)</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_index_stat_sys-create-if-not-exist">--sys-create-if-not-exist</a>
                </code>
              </p></th>
            <td>NDB
              カーネルにあらかじめ存在しない統計テーブルおよびイベントを作成します</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_index_stat_sys-create-if-not-valid">--sys-create-if-not-valid</a>
                </code>
              </p></th>
            <td>NDB
              カーネルにまだ存在しない統計テーブルまたはイベントを、無効なものを削除したあとに作成</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_index_stat_sys-check">--sys-check</a>
                </code>
              </p></th>
            <td>NDB
              システムのインデックス統計およびイベントテーブルが存在することを確認します</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_index_stat_sys-skip-tables">--sys-skip-tables</a>
                </code>
              </p></th>
            <td>sys-* オプションをテーブルに適用しません</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_index_stat_sys-skip-events">--sys-skip-events</a>
                </code>
              </p></th>
            <td>sys-* オプションをイベントに適用しません</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_index_stat_verbose">--verbose</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_index_stat_verbose">-v</a>
                </code>
              </p></th>
            <td>冗長出力を有効にします</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_index_stat_loops">--loops=#</a>
                </code>
              </p></th>
            <td>指定したコマンドを実行する回数を設定します。デフォルトは
              0 です</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody></table></div></div><br class="table-break"><p><a name="ndb-index-stat-options-statistics"></a><b>ndb_index_stat の統計オプション. </b>
          次のオプションはインデックス統計を生成するために使用します。
          これらは指定されたテーブルおよびデータベースを処理します。
          これらはシステムオプション
          (<a class="xref" href="mysql-cluster.html#ndb-index-stat-options-system" title="ndb_index_stat のシステムオプション">ndb_index_stat のシステムオプション</a>を参照してください)
          と混在させることはできません。
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="option_ndb_index_stat_database"></a>
            <code class="option">--database=<em class="replaceable"><code>name</code></em></code>,
            <code class="option">-d <em class="replaceable"><code>name</code></em></code>
          </p><a class="indexterm" name="idm45563218034656"></a><a class="indexterm" name="idm45563218032640"></a><a class="indexterm" name="idm45563218030464"></a><a class="indexterm" name="idm45563218028528"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for database"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--database=name</code></td>
</tr><tr><th>型</th>
<td>文字列</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">[none]</code></td>
</tr><tr><th>最小値</th>
<td><code class="literal"></code></td>
</tr><tr><th>最大値</th>
<td><code class="literal"></code></td>
</tr></tbody></table></div><p>
            問い合わせるテーブルが含まれているデータベースの名前。
          </p></li><li class="listitem"><p><a name="option_ndb_index_stat_delete"></a>
            <code class="option">--delete</code>
          </p><a class="indexterm" name="idm45563218009600"></a><a class="indexterm" name="idm45563218007600"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for delete"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--delete</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">false</code></td>
</tr><tr><th>最小値</th>
<td><code class="literal"></code></td>
</tr><tr><th>最大値</th>
<td><code class="literal"></code></td>
</tr></tbody></table></div><p>
            指定したテーブルのインデックス統計を削除し、以前構成された自動更新を停止します。
          </p></li><li class="listitem"><p><a name="option_ndb_index_stat_update"></a>
            <code class="option">--update</code>
          </p><a class="indexterm" name="idm45563217988592"></a><a class="indexterm" name="idm45563217986592"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for update"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--update</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">false</code></td>
</tr><tr><th>最小値</th>
<td><code class="literal"></code></td>
</tr><tr><th>最大値</th>
<td><code class="literal"></code></td>
</tr></tbody></table></div><p>
            指定したテーブルのインデックス統計を更新し、以前構成された自動更新を再開します。
          </p></li><li class="listitem"><p><a name="option_ndb_index_stat_dump"></a>
            <code class="option">--dump</code>
          </p><a class="indexterm" name="idm45563217967584"></a><a class="indexterm" name="idm45563217965568"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for dump"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--dump</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">false</code></td>
</tr><tr><th>最小値</th>
<td><code class="literal"></code></td>
</tr><tr><th>最大値</th>
<td><code class="literal"></code></td>
</tr></tbody></table></div><p>
            クエリーキャッシュの内容をダンプします。
          </p></li><li class="listitem"><p><a name="option_ndb_index_stat_query"></a>
            <code class="option">--query=<em class="replaceable"><code>#</code></em></code>
          </p><a class="indexterm" name="idm45563217946400"></a><a class="indexterm" name="idm45563217944384"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for query"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--query=#</code></td>
</tr><tr><th>型</th>
<td>数値</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">0</code></td>
</tr><tr><th>最小値</th>
<td><code class="literal">0</code></td>
</tr><tr><th>最大値</th>
<td><code class="literal">MAX_INT</code></td>
</tr></tbody></table></div><p>
            最初のキー属性 (符号なしの int
            である必要があります)
            に対してランダム範囲クエリーを実行します。
          </p></li></ul></div><p><a name="ndb-index-stat-options-system"></a><b>ndb_index_stat のシステムオプション. </b>
          次のオプションは、NDB
          カーネルの統計テーブルを生成および更新するために使用します。
          これらのオプションは、統計オプションと混在させることはできません
          (<a class="xref" href="mysql-cluster.html#ndb-index-stat-options-statistics" title="ndb_index_stat の統計オプション">ndb_index_stat の統計オプション</a>を参照してください)。
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="option_ndb_index_stat_sys-drop"></a>
            <code class="option">--sys-drop</code>
          </p><a class="indexterm" name="idm45563217921504"></a><a class="indexterm" name="idm45563217919472"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for sys-drop"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--sys-drop</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">false</code></td>
</tr><tr><th>最小値</th>
<td><code class="literal"></code></td>
</tr><tr><th>最大値</th>
<td><code class="literal"></code></td>
</tr></tbody></table></div><p>
            NDB
            カーネルのすべての統計テーブルおよびイベントを削除します。
            <span class="emphasis"><em>これを実行すると、すべての統計が失われます</em></span>。
          </p></li><li class="listitem"><p><a name="option_ndb_index_stat_sys-create"></a>
            <code class="option">--sys-create</code>
          </p><a class="indexterm" name="idm45563217899968"></a><a class="indexterm" name="idm45563217897936"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for sys-create"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--sys-create</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">false</code></td>
</tr><tr><th>最小値</th>
<td><code class="literal"></code></td>
</tr><tr><th>最大値</th>
<td><code class="literal"></code></td>
</tr></tbody></table></div><p>
            NDB
            カーネルにすべての統計テーブルおよびイベントを作成します。
            これはそれらがあらかじめ存在していなかった場合にのみ動作します。
          </p></li><li class="listitem"><p><a name="option_ndb_index_stat_sys-create-if-not-exist"></a>
            <code class="option">sys-create-if-not-exist</code>
          </p><a class="indexterm" name="idm45563217878640"></a><a class="indexterm" name="idm45563217876528"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for sys-create-if-not-exist"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--sys-create-if-not-exist</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">false</code></td>
</tr><tr><th>最小値</th>
<td><code class="literal"></code></td>
</tr><tr><th>最大値</th>
<td><code class="literal"></code></td>
</tr></tbody></table></div><p>
            このプログラムが呼び出されたときにあらかじめ存在していなかった
            NDB システム統計テーブルまたはイベント
            (あるいはその両方) を作成します。
          </p></li><li class="listitem"><p><a name="option_ndb_index_stat_sys-create-if-not-valid"></a>
            <code class="option">--sys-create-if-not-valid</code>
          </p><a class="indexterm" name="idm45563217857216"></a><a class="indexterm" name="idm45563217855104"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for sys-create-if-not-valid"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--sys-create-if-not-valid</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">false</code></td>
</tr><tr><th>最小値</th>
<td><code class="literal"></code></td>
</tr><tr><th>最大値</th>
<td><code class="literal"></code></td>
</tr></tbody></table></div><p>
            無効なものを削除したあとにあらかじめ存在していなかった
            NDB
            システムの統計テーブルまたはイベントを作成します。
          </p></li><li class="listitem"><p><a name="option_ndb_index_stat_sys-check"></a>
            <code class="option">--sys-check</code>
          </p><a class="indexterm" name="idm45563217835936"></a><a class="indexterm" name="idm45563217833904"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for sys-check"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--sys-check</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">false</code></td>
</tr><tr><th>最小値</th>
<td><code class="literal"></code></td>
</tr><tr><th>最大値</th>
<td><code class="literal"></code></td>
</tr></tbody></table></div><p>
            必要なすべてのシステム統計テーブルおよびイベントが
            NDB カーネルに存在することを検証します。
          </p></li><li class="listitem"><p><a name="option_ndb_index_stat_sys-skip-tables"></a>
            <code class="option">--sys-skip-tables</code>
          </p><a class="indexterm" name="idm45563217814800"></a><a class="indexterm" name="idm45563217812752"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for sys-skip-tables"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--sys-skip-tables</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">false</code></td>
</tr><tr><th>最小値</th>
<td><code class="literal"></code></td>
</tr><tr><th>最大値</th>
<td><code class="literal"></code></td>
</tr></tbody></table></div><p>
            <code class="option">--sys-*</code>
            オプションを統計テーブルに適用しません。
          </p></li><li class="listitem"><p><a name="option_ndb_index_stat_sys-skip-events"></a>
            <code class="option">--sys-skip-events</code>
          </p><a class="indexterm" name="idm45563217793376"></a><a class="indexterm" name="idm45563217791328"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for sys-skip-events"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--sys-skip-events</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">false</code></td>
</tr><tr><th>最小値</th>
<td><code class="literal"></code></td>
</tr><tr><th>最大値</th>
<td><code class="literal"></code></td>
</tr></tbody></table></div><p>
            <code class="option">--sys-*</code>
            オプションをイベントに適用しません。
          </p></li><li class="listitem"><p><a name="option_ndb_index_stat_verbose"></a>
            <code class="option">--verbose</code>
          </p><a class="indexterm" name="idm45563217771968"></a><a class="indexterm" name="idm45563217769904"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for verbose"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--verbose</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">false</code></td>
</tr><tr><th>最小値</th>
<td><code class="literal"></code></td>
</tr><tr><th>最大値</th>
<td><code class="literal"></code></td>
</tr></tbody></table></div><p>
            冗長出力を有効にします。
          </p></li><li class="listitem"><p><a name="option_ndb_index_stat_loops"></a>
            <code class="option">--loops=<em class="replaceable"><code>#</code></em></code>
          </p><a class="indexterm" name="idm45563217750832"></a><a class="indexterm" name="idm45563217748768"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for loops"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--loops=#</code></td>
</tr><tr><th>型</th>
<td>数値</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">0</code></td>
</tr><tr><th>最小値</th>
<td><code class="literal">0</code></td>
</tr><tr><th>最大値</th>
<td><code class="literal">MAX_INT</code></td>
</tr></tbody></table></div><p>
            コマンドをこの回数繰り返します
            (テストで使用するため)。
          </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-cluster-programs-ndb-move-data"></a>23.4.15 ndb_move_data — NDB データコピーユーティリティー</h3></div></div></div><a class="indexterm" name="idm45563217729680"></a><p>
        <span class="command"><strong>ndb_move_data</strong></span> は、NDB
        テーブル間でデータをコピーします。
      </p><h4><a name="idm45563217726976"></a>使用法</h4><p>
        プログラムは、ソーステーブルとターゲットテーブルの名前を使用して起動されます。これらのいずれかまたは両方を、オプションでデータベース名で修飾できます。
        どちらのテーブルも NDB
        ストレージエンジンを使用する必要があります。
      </p><pre class="programlisting">ndb_move_data <em class="replaceable"><code>options</code></em> <em class="replaceable"><code>source</code></em> <em class="replaceable"><code>target</code></em>
</pre><p>
        次のテーブルに、<span class="command"><strong>ndb_move_data</strong></span>
        に固有のオプションを示します。
        追加説明が表のあとにあります。 ほとんどの
        NDB Cluster プログラム (<span class="command"><strong>ndb_move_data</strong></span>
        を含む)
        に共通のオプションについては、<a class="xref" href="mysql-cluster.html#mysql-cluster-program-options-common" title="23.4.32 NDB Cluster プログラムに共通のオプション — NDB Cluster プログラムに共通のオプション">セクション23.4.32「NDB Cluster プログラムに共通のオプション — NDB Cluster プログラムに共通のオプション」</a>
        を参照してください。
      </p><div class="table"><a name="mysql-cluster-ndb_move_data-options-table"></a><p class="title"><b>表 23.37 プログラムで使用されるコマンドライン・オプション ndb_move_data</b></p><div class="table-contents"><table frame="box" rules="all"><col style="width: 33%"><col style="width: 34%"><col style="width: 33%"><thead><tr>
            <th scope="col">形式</th>
            <th scope="col">説明</th>
            <th scope="col">追加、非推奨、または削除された</th>
          </tr></thead><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_move_data_abort-on-error">--abort-on-error</a>
                </code>
              </p></th>
            <td>永続エラー時にコアをダンプ (デバッグオプション)</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_move_data_character-sets-dir">--character-sets-dir=name</a>
                </code>
              </p></th>
            <td>文字セットが存在するディレクトリ</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_move_data_database">--database=dbname</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_move_data_database">-d</a>
                </code>
              </p></th>
            <td>テーブルが見つかったデータベースの名前</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_move_data_drop-source">--drop-source</a>
                </code>
              </p></th>
            <td>すべての行の移動後にソーステーブルを削除</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_move_data_error-insert">--error-insert</a>
                </code>
              </p></th>
            <td>ランダムな一時エラーの挿入 (テストオプション)</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_move_data_exclude-missing-columns">--exclude-missing-columns</a>
                </code>
              </p></th>
            <td>ソーステーブルまたはターゲットテーブルの余分なカラムを無視</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_move_data_lossy-conversions">--lossy-conversions</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_move_data_lossy-conversions">-l</a>
                </code>
              </p></th>
            <td>小さい型への変換時に属性データの切捨てを許可</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_move_data_promote-attributes">--promote-attributes</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_move_data_promote-attributes">-A</a>
                </code>
              </p></th>
            <td>属性データの大きい型への変換を許可</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_move_data_staging-tries">--staging-tries=x[,y[,z]]</a>
                </code>
              </p></th>
            <td>一時エラー時の試行回数を指定します。形式は x [, y
              [, z]]です。ここで x は最大試行回数 (0 =
              制限なし)、y は最小遅延 (ミリ秒)、z =
              最大遅延 (ミリ秒) です</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_move_data_verbose">--verbose</a>
                </code>
              </p></th>
            <td>詳細メッセージの有効化</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody></table></div></div><br class="table-break"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="option_ndb_move_data_abort-on-error"></a>
            <code class="option">--abort-on-error</code>
          </p><a class="indexterm" name="idm45563217650320"></a><a class="indexterm" name="idm45563217648160"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for abort-on-error"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--abort-on-error</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table></div><p>
            永続エラー時にコアをダンプします
            (デバッグオプション)。
          </p></li><li class="listitem"><p><a name="option_ndb_move_data_character-sets-dir"></a>
            <code class="option">--character-sets-dir</code>=<em class="replaceable"><code>name</code></em>
          </p><a class="indexterm" name="idm45563217633408"></a><a class="indexterm" name="idm45563217631248"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for character-sets-dir"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--character-sets-dir=name</code></td>
</tr><tr><th>型</th>
<td>文字列</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">[none]</code></td>
</tr></tbody></table></div><p>
            文字セットが存在するディレクトリ。
          </p></li><li class="listitem"><p><a name="option_ndb_move_data_database"></a>
            <code class="option">--database</code>=<em class="replaceable"><code>dbname</code></em>,
            <code class="option">-d</code>
          </p><a class="indexterm" name="idm45563217616160"></a><a class="indexterm" name="idm45563217614032"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for database"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--database=dbname</code></td>
</tr><tr><th>型</th>
<td>文字列</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">TEST_DB</code></td>
</tr></tbody></table></div><p>
            テーブルが見つかるデータベースの名前。
          </p></li><li class="listitem"><p><a name="option_ndb_move_data_drop-source"></a>
            <code class="option">--drop-source</code>
          </p><a class="indexterm" name="idm45563217599824"></a><a class="indexterm" name="idm45563217597680"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for drop-source"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--drop-source</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table></div><p>
            すべての行が移動されたら、ソーステーブルを削除します。
          </p></li><li class="listitem"><p><a name="option_ndb_move_data_error-insert"></a>
            <code class="option">--error-insert</code>
          </p><a class="indexterm" name="idm45563217583392"></a><a class="indexterm" name="idm45563217581232"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for error-insert"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--error-insert</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table></div><p>
            ランダムな一時エラーを挿入します
            (テストオプション)。
          </p></li><li class="listitem"><p><a name="option_ndb_move_data_exclude-missing-columns"></a>
            <code class="option">--exclude-missing-columns</code>
          </p><a class="indexterm" name="idm45563217566848"></a><a class="indexterm" name="idm45563217564624"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for exclude-missing-columns"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--exclude-missing-columns</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table></div><p>
            ソーステーブルまたはターゲットテーブルの余分なカラムを無視します。
          </p></li><li class="listitem"><p><a name="option_ndb_move_data_lossy-conversions"></a>
            <code class="option">--lossy-conversions</code>, <code class="option">-l</code>
          </p><a class="indexterm" name="idm45563217549936"></a><a class="indexterm" name="idm45563217547776"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for lossy-conversions"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--lossy-conversions</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table></div><p>
            属性データを小さい型に変換するときに切り捨てられるようにします。
          </p></li><li class="listitem"><p><a name="option_ndb_move_data_promote-attributes"></a>
            <code class="option">--promote-attributes</code>, <code class="option">-A</code>
          </p><a class="indexterm" name="idm45563217533056"></a><a class="indexterm" name="idm45563217530896"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for promote-attributes"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--promote-attributes</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table></div><p>
            属性データを大きい型に変換できるようにします。
          </p></li><li class="listitem"><p><a name="option_ndb_move_data_staging-tries"></a>
            <code class="option">--staging-tries</code>=<em class="replaceable"><code>x[,y[,z]]</code></em>
          </p><a class="indexterm" name="idm45563217516192"></a><a class="indexterm" name="idm45563217514032"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for staging-tries"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--staging-tries=x[,y[,z]]</code></td>
</tr><tr><th>型</th>
<td>文字列</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">0,1000,60000</code></td>
</tr></tbody></table></div><p>
            一時エラー時の試行回数を指定します。
            形式は x [, y [, z]]で、x は最大試行回数 (0 =
            制限なし)、y は最小遅延 (ミリ秒)、z
            は最大遅延 (ミリ秒) です。
          </p></li><li class="listitem"><p><a name="option_ndb_move_data_verbose"></a>
            <code class="option">--verbose</code>
          </p><a class="indexterm" name="idm45563217499392"></a><a class="indexterm" name="idm45563217497216"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for verbose"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--verbose</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table></div><p>
            詳細メッセージを有効にします。
          </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-cluster-programs-ndb-perror"></a>23.4.16 ndb_perror — NDB エラーメッセージ情報の取得</h3></div></div></div><a class="indexterm" name="idm45563217483184"></a><p>
        <span class="command"><strong>ndb_perror</strong></span>
        は、エラーコードが指定された NDB
        エラーに関する情報を表示します。
        これには、エラーメッセージ、エラーのタイプ、およびエラーが永続的か一時的かが含まれます。
        NDB 7.6.4 の MySQL NDB Cluster
        ディストリビューションに追加されました。これは、<span class="command"><strong>perror</strong></span>
        <code class="option">--ndb</code>
        のドロップインの代替として使用されます。
      </p><h4><a name="idm45563217478464"></a>使用法</h4><pre class="programlisting">ndb_perror [<em class="replaceable"><code>options</code></em>] <em class="replaceable"><code>error_code</code></em>
</pre><p>
        <span class="command"><strong>ndb_perror</strong></span> は、実行中の NDB Cluster
        またはノード (SQL ノードを含む)
        にアクセスする必要はありません。 指定された
        NDB
        エラーに関する情報を表示するには、次のようにエラーコードを引数として使用してプログラムを呼び出します:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>ndb_perror 323</code></strong>
NDB error code 323: Invalid nodegroup id, nodegroup already existing: Permanent error: Application error
</pre><p>
        エラーメッセージのみを表示するには、次に示すように、<code class="option">--silent</code>
        オプション (<code class="option">-s</code> の短縮形)
        を指定して <span class="command"><strong>ndb_perror</strong></span>
        を起動します:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>ndb_perror -s 323</code></strong>
Invalid nodegroup id, nodegroup already existing: Permanent error: Application error
</pre><p>
        <span class="command"><strong>perror</strong></span>
        と同様に、<span class="command"><strong>ndb_perror</strong></span>
        は複数のエラーコードを受け入れます:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>ndb_perror 321 1001</code></strong>
NDB error code 321: Invalid nodegroup id: Permanent error: Application error
NDB error code 1001: Illegal connect string
</pre><p>
        <span class="command"><strong>ndb_perror</strong></span>
        の追加のプログラムオプションについては、このセクションの後半で説明します。
      </p><p>
        <span class="command"><strong>ndb_perror</strong></span> は、NDB 7.6.4
        の時点で非推奨であり、MySQL NDB Cluster
        の将来のリリースで削除される予定の
        <span class="command"><strong>perror</strong></span> <code class="option">--ndb</code>
        に置き換わります。 NDB
        エラー情報を取得するために
        <span class="command"><strong>perror</strong></span>
        に依存する可能性のあるスクリプトやその他のアプリケーションで置換を容易にするために、<span class="command"><strong>ndb_perror</strong></span>
        は独自の<span class="quote">「<span class="quote">「ダミー」</span>」</span>
        <code class="option">--ndb</code>
        オプションをサポートしていますが、これは何も行いません。
      </p><p>
        次のテーブルに、NDB Cluster プログラム
        <span class="command"><strong>ndb_perror</strong></span>
        に固有のすべてのオプションを示します。
        追加説明が表のあとにあります。
      </p><div class="table"><a name="mysql-cluster-ndb_perror-options-table"></a><p class="title"><b>表 23.38 プログラムで使用されるコマンドライン・オプション ndb_perror</b></p><div class="table-contents"><table frame="box" rules="all"><col style="width: 33%"><col style="width: 34%"><col style="width: 33%"><thead><tr>
            <th scope="col">形式</th>
            <th scope="col">説明</th>
            <th scope="col">追加、非推奨、または削除された</th>
          </tr></thead><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_perror_help">--help</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_perror_help">-?</a>
                </code>
              </p></th>
            <td>ヘルプテキストの表示</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_perror_ndb">--ndb</a>
                </code>
              </p></th>
            <td>古いバージョンの perror
              に依存するアプリケーションとの互換性のために、何も行いません</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_perror_silent">--silent</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_perror_silent">-s</a>
                </code>
              </p></th>
            <td>エラーメッセージのみ表示</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_perror_version">--version</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_perror_version">-V</a>
                </code>
              </p></th>
            <td>プログラムのバージョン情報を出力して終了</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_perror_verbose">--verbose</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_perror_verbose">-v</a>
                </code>
              </p></th>
            <td>冗長出力。--silent で無効にします</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody></table></div></div><br class="table-break"><h4><a name="mysql-cluster-programs-ndb-perror-additional-options"></a>その他のオプション</h4><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="option_ndb_perror_help"></a>
            <code class="option">--help</code>, <code class="option">-?</code>
          </p><a class="indexterm" name="idm45563217411664"></a><a class="indexterm" name="idm45563217409488"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for help"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--help</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">TRUE</code></td>
</tr></tbody></table></div><p>
            プログラムのヘルプテキストを表示して終了します。
          </p></li><li class="listitem"><p><a name="option_ndb_perror_ndb"></a>
            <code class="option">--ndb</code>
          </p><a class="indexterm" name="idm45563217395328"></a><a class="indexterm" name="idm45563217393168"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndb"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--ndb</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">TRUE</code></td>
</tr></tbody></table></div><p>
            そのプログラムの
            <code class="option">--ndb</code>
            オプションを使用する古いバージョンの
            <span class="command"><strong>perror</strong></span>
            に依存するアプリケーションとの互換性のため。
            <span class="command"><strong>ndb_perror</strong></span>
            で使用する場合、このオプションは何もせず、無視されます。
          </p></li><li class="listitem"><p><a name="option_ndb_perror_silent"></a>
            <code class="option">--silent</code>, <code class="option">-s</code>
          </p><a class="indexterm" name="idm45563217375968"></a><a class="indexterm" name="idm45563217373840"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for silent"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--silent</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">TRUE</code></td>
</tr></tbody></table></div><p>
            エラーメッセージのみ表示します。
          </p></li><li class="listitem"><p><a name="option_ndb_perror_version"></a>
            <code class="option">--version</code>, <code class="option">-V</code>
          </p><a class="indexterm" name="idm45563217359264"></a><a class="indexterm" name="idm45563217357136"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for version"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--version</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">TRUE</code></td>
</tr></tbody></table></div><p>
            プログラムのバージョン情報を出力して終了します。
          </p></li><li class="listitem"><p><a name="option_ndb_perror_verbose"></a>
            <code class="option">--verbose</code>, <code class="option">-v</code>
          </p><a class="indexterm" name="idm45563217342512"></a><a class="indexterm" name="idm45563217340336"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for verbose"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--verbose</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">TRUE</code></td>
</tr></tbody></table></div><p>
            冗長出力。<code class="option">--silent</code>
            で無効にします。
          </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-cluster-programs-ndb-print-backup-file"></a>23.4.17 ndb_print_backup_file — NDB バックアップファイルの内容の出力</h3></div></div></div><a class="indexterm" name="idm45563217325488"></a><p>
        <span class="command"><strong>ndb_print_backup_file</strong></span>
        は、クラスタバックアップファイルから診断情報を取得します。
      </p><h4><a name="idm45563217321920"></a>使用法</h4><pre class="programlisting">ndb_print_backup_file [-P <em class="replaceable"><code>password</code></em>] <em class="replaceable"><code>file_name</code></em>
</pre><p>
        <em class="replaceable"><code>file_name</code></em>
        はクラスタバックアップファイル名です。
        これには、クラスタバックアップディレクトリにある任意のファイル
        (<code class="filename">.Data</code>、<code class="filename">.ctl</code>、または
        <code class="filename">.log</code> ファイル) を指定できます。
        これらのファイルは、データノードのバックアップディレクトリのサブディレクトリ
        <code class="filename">BACKUP-<em class="replaceable"><code>#</code></em></code>
        にあります。ここで、<em class="replaceable"><code>#</code></em>
        はバックアップのシーケンス番号です。
        クラスタバックアップファイルおよびその内容については、<a class="xref" href="mysql-cluster.html#mysql-cluster-backup-concepts" title="23.5.8.1 NDB Cluster バックアップの概念">セクション23.5.8.1「NDB Cluster バックアップの概念」</a>を参照してください。
      </p><p>
        <span class="command"><strong>ndb_print_schema_file</strong></span> および
        <span class="command"><strong>ndb_print_sys_file</strong></span> と同様に
        (および管理サーバーホストで実行するか、管理サーバーに接続することが意図されているほかのほとんどの
        <code class="literal">NDB</code>
        ユーティリティーと異なり)、<span class="command"><strong>ndb_print_backup_file</strong></span>
        は、データノードファイルシステムに直接アクセスするため、クラスタデータノードで実行する必要があります。
        このユーティリティーは管理サーバーを使用しないため、管理サーバーが実行されていない場合、およびクラスタが完全にシャットダウンされている場合にも使用できます。
      </p><p>
        NDB 8.0.17 以降では、このプログラムを使用して
        undo ログファイルを読み取ることもできます。
      </p><p>
        NDB 8.0.22
        以降、このプログラムは暗号化されたバックアップを読み取ることができます。
        これを行うには、バックアップの暗号化に使用するパスワードとともに
        <code class="option">-P</code> オプションを指定します。
      </p><h4><a name="idm45563217306592"></a>その他のオプション</h4><p>
        なし
      </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-cluster-programs-ndb-print-file"></a>23.4.18 ndb_print_file — NDB ディスクデータファイル内容の出力</h3></div></div></div><a class="indexterm" name="idm45563217304176"></a><p>
        <span class="command"><strong>ndb_print_file</strong></span> は NDB Cluster
        ディスクデータファイルから情報を取得します。
      </p><h4><a name="idm45563217301440"></a>使用法</h4><pre class="programlisting">ndb_print_file [-v] [-q] <em class="replaceable"><code>file_name</code></em>+
</pre><p>
        <em class="replaceable"><code>file_name</code></em> は NDB Cluster
        ディスクデータファイルの名前です。
        複数のファイル名はスペースで区切ることによって受け入れられます。
      </p><p>
        <span class="command"><strong>ndb_print_schema_file</strong></span> や
        <span class="command"><strong>ndb_print_sys_file</strong></span> と同様に
        (および管理サーバーホスト上で実行することや管理サーバーに接続することを意図しているほかのほとんどの
        <code class="literal">NDB</code>
        ユーティリティーとは異なり)、<span class="command"><strong>ndb_print_file</strong></span>
        はデータノードファイルシステムに直接アクセスするため、NDB
        Cluster
        データノード上で実行する必要があります。
        このユーティリティーは管理サーバーを使用しないため、管理サーバーが実行されていない場合、およびクラスタが完全にシャットダウンされている場合にも使用できます。
      </p><h4><a name="idm45563217293632"></a>その他のオプション</h4><p>
        <span class="command"><strong>ndb_print_file</strong></span>
        では、次のオプションがサポートされます。
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="option">-v</code>: 出力を冗長にします。
          </p></li><li class="listitem"><p>
            <code class="option">-q</code>: 出力を抑止します
            (抑止モード)。
          </p></li><li class="listitem"><p>
            <code class="option">--help</code>, <code class="option">-h</code>,
            <code class="option">-?</code>:
            ヘルプメッセージを出力します。
          </p></li></ul></div><p>
        詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-disk-data" title="23.5.10 NDB Cluster ディスクデータテーブル">セクション23.5.10「NDB Cluster ディスクデータテーブル」</a>を参照してください。
      </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-cluster-programs-ndb-print-frag-file"></a>23.4.19 ndb_print_frag_file — NDB フラグメントリストファイルの内容の出力</h3></div></div></div><a class="indexterm" name="idm45563217284080"></a><p>
        <span class="command"><strong>ndb_print_frag_file</strong></span>
        は、クラスタフラグメントリストファイルから情報を取得します。
        これは、データノードの再起動に関する問題の診断に役立つことを目的としています。
      </p><h4><a name="idm45563217281104"></a>使用法</h4><pre class="programlisting">ndb_print_frag_file <em class="replaceable"><code>file_name</code></em>
</pre><p>
        <em class="replaceable"><code>file_name</code></em>
        はクラスタフラグメントリストファイルの名前で、<code class="filename">S<em class="replaceable"><code>X</code></em>.FragList</code>
        というパターンに一致します。<em class="replaceable"><code>X</code></em>
        は 2-9 の範囲内の数字で、ノード ID
        <em class="replaceable"><code>nodeid</code></em>
        を持つデータノードのデータノードファイルシステムにあり、<code class="filename">ndb_
        <em class="replaceable"><code>nodeid</code></em>
        _fs/D<em class="replaceable"><code>N</code></em>/DBDIH/</code>という名前のディレクトリにあります。<em class="replaceable"><code>N</code></em>
        は <code class="literal">1</code> または <code class="literal">2</code>
        です。 各フラグメントファイルには、各
        <code class="literal">NDB</code>
        テーブルに属するフラグメントのレコードが含まれます。
        クラスタフラグメントファイルの詳細は、<a class="ulink" href="https://dev.mysql.com/doc/ndb-internals/en/ndb-internals-ndbd-filesystemdir-files.html" target="_top">NDB Cluster Data Node File System Directory</a>
        を参照してください。
      </p><p>
        <span class="command"><strong>ndb_print_backup_file</strong></span>、<span class="command"><strong>ndb_print_sys_file</strong></span>
        および <span class="command"><strong>ndb_print_schema_file</strong></span> と同様に
        (および管理サーバーホスト上で実行することや管理サーバーに接続することを意図している他の
        <code class="literal">NDB</code>
        ユーティリティとは異なり)、<span class="command"><strong>ndb_print_frag_file</strong></span>
        はデータノードファイルシステムに直接アクセスするため、クラスタデータノード上で実行する必要があります。
        このユーティリティーは管理サーバーを使用しないため、管理サーバーが実行されていない場合、およびクラスタが完全にシャットダウンされている場合にも使用できます。
      </p><h4><a name="idm45563217265168"></a>その他のオプション</h4><p>
        なし
      </p><h4><a name="idm45563217264000"></a>出力例</h4><pre class="programlisting">shell&gt; <strong class="userinput"><code>ndb_print_frag_file /usr/local/mysqld/data/ndb_3_fs/D1/DBDIH/S2.FragList</code></strong>
Filename: /usr/local/mysqld/data/ndb_3_fs/D1/DBDIH/S2.FragList with size 8192
noOfPages = 1 noOfWords = 182
Table Data
----------
Num Frags: 2 NoOfReplicas: 2 hashpointer: 4294967040
kvalue: 6 mask: 0x00000000 method: HashMap
Storage is on Logged and checkpointed, survives SR
------ Fragment with FragId: 0 --------
Preferred Primary: 2 numStoredReplicas: 2 numOldStoredReplicas: 0 distKey: 0 LogPartId: 0
-------Stored Replica----------
Replica node is: 2 initialGci: 2 numCrashedReplicas = 0 nextLcpNo = 1
LcpNo[0]: maxGciCompleted: 1 maxGciStarted: 2 lcpId: 1 lcpStatus: valid
LcpNo[1]: maxGciCompleted: 0 maxGciStarted: 0 lcpId: 0 lcpStatus: invalid
-------Stored Replica----------
Replica node is: 3 initialGci: 2 numCrashedReplicas = 0 nextLcpNo = 1
LcpNo[0]: maxGciCompleted: 1 maxGciStarted: 2 lcpId: 1 lcpStatus: valid
LcpNo[1]: maxGciCompleted: 0 maxGciStarted: 0 lcpId: 0 lcpStatus: invalid
------ Fragment with FragId: 1 --------
Preferred Primary: 3 numStoredReplicas: 2 numOldStoredReplicas: 0 distKey: 0 LogPartId: 1
-------Stored Replica----------
Replica node is: 3 initialGci: 2 numCrashedReplicas = 0 nextLcpNo = 1
LcpNo[0]: maxGciCompleted: 1 maxGciStarted: 2 lcpId: 1 lcpStatus: valid
LcpNo[1]: maxGciCompleted: 0 maxGciStarted: 0 lcpId: 0 lcpStatus: invalid
-------Stored Replica----------
Replica node is: 2 initialGci: 2 numCrashedReplicas = 0 nextLcpNo = 1
LcpNo[0]: maxGciCompleted: 1 maxGciStarted: 2 lcpId: 1 lcpStatus: valid
LcpNo[1]: maxGciCompleted: 0 maxGciStarted: 0 lcpId: 0 lcpStatus: invalid
</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-cluster-programs-ndb-print-schema-file"></a>23.4.20 ndb_print_schema_file — NDB スキーマファイル内容の出力</h3></div></div></div><a class="indexterm" name="idm45563217257616"></a><p>
        <span class="command"><strong>ndb_print_schema_file</strong></span>
        は、クラスタスキーマファイルから診断情報を取得します。
      </p><h4><a name="idm45563217254880"></a>使用法</h4><pre class="programlisting">ndb_print_schema_file <em class="replaceable"><code>file_name</code></em>
</pre><p>
        <em class="replaceable"><code>file_name</code></em>
        はクラスタスキーマファイル名です。
        クラスタスキーマファイルについては、<a class="ulink" href="https://dev.mysql.com/doc/ndb-internals/en/ndb-internals-ndbd-filesystemdir-files.html" target="_top">NDB Cluster Data Node File System Directory</a>を参照してください。
      </p><p>
        <span class="command"><strong>ndb_print_backup_file</strong></span> や
        <span class="command"><strong>ndb_print_sys_file</strong></span> と同様に
        (管理サーバーホスト上で実行することや管理サーバーに接続することを意図している他の
        <code class="literal">NDB</code>
        ユーティリティとは異なり)、<span class="command"><strong>ndb_print_schema_file</strong></span>
        はデータノードファイルシステムに直接アクセスするため、クラスタデータノード上で実行する必要があります。
        このユーティリティーは管理サーバーを使用しないため、管理サーバーが実行されていない場合、およびクラスタが完全にシャットダウンされている場合にも使用できます。
      </p><h4><a name="idm45563217246528"></a>その他のオプション</h4><p>
        なし
      </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-cluster-programs-ndb-print-sys-file"></a>23.4.21 ndb_print_sys_file — NDB システムファイル内容の出力</h3></div></div></div><a class="indexterm" name="idm45563217244080"></a><p>
        <span class="command"><strong>ndb_print_sys_file</strong></span> は NDB Cluster
        システムファイルから診断情報を取得します。
      </p><h4><a name="idm45563217241344"></a>使用法</h4><pre class="programlisting">ndb_print_sys_file <em class="replaceable"><code>file_name</code></em>
</pre><p>
        <em class="replaceable"><code>file_name</code></em>
        はクラスタシステムファイル (sysfile) 名です。
        クラスタシステムファイルはデータノードのデータディレクトリ
        (<code class="literal">DataDir</code>)
        にあり、このディレクトリからシステムファイルへのパスは
        <code class="filename">ndb_<em class="replaceable"><code>#</code></em>_fs/D<em class="replaceable"><code>#</code></em>/DBDIH/P<em class="replaceable"><code>#</code></em>.sysfile</code>
        というパターンに一致します。
        それぞれの箇所で、<em class="replaceable"><code>#</code></em>
        は数字を表しています
        (同じ数字であるとはかぎりません)。
        詳細は、<a class="ulink" href="https://dev.mysql.com/doc/ndb-internals/en/ndb-internals-ndbd-filesystemdir-files.html" target="_top">NDB Cluster Data Node File System Directory</a>を参照してください。
      </p><p>
        <span class="command"><strong>ndb_print_backup_file</strong></span> および
        <span class="command"><strong>ndb_print_schema_file</strong></span> と同様に
        (および管理サーバーのホストで実行すること、または管理サーバーに接続することが意図されているほかのほとんどの
        <code class="literal">NDB</code>
        ユーティリティーと異なり)、<span class="command"><strong>ndb_print_backup_file</strong></span>
        は、データノードファイルシステムに直接アクセスするため、クラスタデータノードで実行する必要があります。
        このユーティリティーは管理サーバーを使用しないため、管理サーバーが実行されていない場合、およびクラスタが完全にシャットダウンされている場合にも使用できます。
      </p><h4><a name="idm45563217228848"></a>その他のオプション</h4><p>
        なし
      </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-cluster-programs-ndb-redo-log-reader"></a>23.4.22 ndb_redo_log_reader — クラスタ redo ログの内容の確認および印刷</h3></div></div></div><a class="indexterm" name="idm45563421927424"></a><p>
        redo
        ログファイルの読取り、エラーのチェック、判読可能な形式での内容の出力、またはその両方を行います。<span class="command"><strong>ndb_redo_log_reader</strong></span>
        は、主に NDB Cluster
        開発者およびサポート担当者が問題のデバッグおよび診断に使用することを目的としています。
      </p><p>
        このユーティリティーはまだ開発中であり、その構文と動作は
        NDB Cluster
        の将来のリリースで変更される可能性があります。
      </p><p>
        <span class="command"><strong>ndb_redo_log_reader</strong></span> の C++
        ソースファイルは、<code class="filename">/storage/ndb/src/kernel/blocks/dblqh/redoLogReader</code>
        ディレクトリにあります。
      </p><p>
        次のテーブルに、NDB Cluster プログラム
        <span class="command"><strong>ndb_redo_log_reader</strong></span>
        に固有のオプションを示します。
        追加説明が表のあとにあります。 ほとんどの
        NDB Cluster プログラム
        (<span class="command"><strong>ndb_redo_log_reader</strong></span> を含む)
        に共通のオプションについては、<a class="xref" href="mysql-cluster.html#mysql-cluster-program-options-common" title="23.4.32 NDB Cluster プログラムに共通のオプション — NDB Cluster プログラムに共通のオプション">セクション23.4.32「NDB Cluster プログラムに共通のオプション — NDB Cluster プログラムに共通のオプション」</a>
        を参照してください。
      </p><div class="table"><a name="mysql-cluster-ndb_redo_log_reader-options-table"></a><p class="title"><b>表 23.39 プログラムで使用されるコマンドライン・オプション ndb_redo_log_reader</b></p><div class="table-contents"><table frame="box" rules="all"><col style="width: 33%"><col style="width: 34%"><col style="width: 33%"><thead><tr>
            <th scope="col">形式</th>
            <th scope="col">説明</th>
            <th scope="col">追加、非推奨、または削除された</th>
          </tr></thead><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_redo_log_reader_dump">-dump</a>
                </code>
              </p></th>
            <td>ダンプ情報の出力</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_redo_log_reader_filedescriptors">-filedescriptors</a>
                </code>
              </p></th>
            <td>ファイル記述子のみを出力</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_redo_log_reader_help">--help</a>
                </code>
              </p></th>
            <td>使用方法の情報を出力します</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_redo_log_reader_lap">-lap</a>
                </code>
              </p></th>
            <td>最大 GCI が開始および完了したラップ情報を指定</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_redo_log_reader_mbyte">-mbyte
                #</a> </code>
              </p></th>
            <td>開始メガバイト</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_redo_log_reader_mbyteheaders">-mbyteheaders</a>
                </code>
              </p></th>
            <td>ファイル内の各メガバイトの最初のページヘッダーのみ表示</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_redo_log_reader_nocheck">-nocheck</a>
                </code>
              </p></th>
            <td>レコードのエラーをチェックしません</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_redo_log_reader_noprint">-noprint</a>
                </code>
              </p></th>
            <td>レコードを出力しません</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_redo_log_reader_page">-page
                #</a> </code>
              </p></th>
            <td>このページから開始</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_redo_log_reader_pageheaders">-pageheaders</a>
                </code>
              </p></th>
            <td>ページヘッダーのみ表示</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_redo_log_reader_pageindex">-pageindex
                #</a> </code>
              </p></th>
            <td>このページインデックスで開始</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_redo_log_reader_twiddle">-twiddle</a>
                </code>
              </p></th>
            <td>ビットシフトダンプ</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody></table></div></div><br class="table-break"><h4><a name="idm45563421844640"></a>使用法</h4><pre class="programlisting">ndb_redo_log_reader <em class="replaceable"><code>file_name</code></em> [<em class="replaceable"><code>options</code></em>]
</pre><p>
        <em class="replaceable"><code>file_name</code></em> は、クラスタ redo
        ログファイルの名前です。redo
        ログファイルは、データノードデータディレクトリ
        (<code class="literal">DataDir</code>)
        の下の番号付きディレクトリにあります。このディレクトリの下の
        redo
        ログファイルへのパスは、<code class="filename">ndb_<em class="replaceable"><code>nodeid</code></em>_fs/D<em class="replaceable"><code>#</code></em>/DBLQH/S<em class="replaceable"><code>#</code></em>.FragLog</code>
        のパターンと一致します。<em class="replaceable"><code>nodeid</code></em>
        はデータノードのノード ID です。
        <em class="replaceable"><code>#</code></em>の 2
        つのインスタンスは、それぞれ数値
        (必ずしも同じ数値ではない)
        を表します。<code class="literal">D</code> に続く数値は 8-39
        の範囲です。<code class="literal">S</code>
        に続く数値の範囲は、<code class="literal">NoOfFragmentLogFiles</code>
        構成パラメータの値 (デフォルト値は 16)
        によって異なります。したがって、ファイル名の数値のデフォルト範囲は
        0-15 です。
        詳細は、<a class="ulink" href="https://dev.mysql.com/doc/ndb-internals/en/ndb-internals-ndbd-filesystemdir-files.html" target="_top">NDB Cluster Data Node File System Directory</a>を参照してください。
      </p><p>
        読み取られるファイルの名前の後ろには、次に一覧する
        1 つ以上のオプションが続くことがあります。
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="option_ndb_redo_log_reader_dump"></a>
            <code class="option">-dump</code>
          </p><a class="indexterm" name="idm45563421830544"></a><a class="indexterm" name="idm45563217225792"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for dump"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">-dump</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table></div><p>
            ダンプ情報を出力します。
          </p></li><li class="listitem"><a name="option_ndb_redo_log_reader_filedescriptors"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for filedescriptors"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">-filedescriptors</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table></div><p>
            <code class="option">-filedescriptors</code>:
            ファイル記述子のみを出力します。
          </p></li><li class="listitem"><a name="option_ndb_redo_log_reader_help"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for help"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--help</code></td>
</tr></tbody></table></div><p>
            <code class="option">--help</code>:
            使用方法の情報を出力します。
          </p></li><li class="listitem"><p><a name="option_ndb_redo_log_reader_lap"></a>
            <code class="option">-lap</code>
          </p><a class="indexterm" name="idm45563217194416"></a><a class="indexterm" name="idm45563217192432"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for lap"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">-lap</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table></div><p>
            最大 GCI
            が開始および完了したラップ情報を指定してください。
          </p></li><li class="listitem"><a name="option_ndb_redo_log_reader_mbyte"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for mbyte"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">-mbyte #</code></td>
</tr><tr><th>型</th>
<td>数値</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">0</code></td>
</tr><tr><th>最小値</th>
<td><code class="literal">0</code></td>
</tr><tr><th>最大値</th>
<td><code class="literal">15</code></td>
</tr></tbody></table></div><p>
            <code class="option">-mbyte <em class="replaceable"><code>#</code></em></code>:
            開始メガバイト。
          </p><p>
            <em class="replaceable"><code>#</code></em>は、0 から 15
            の範囲の整数です。
          </p></li><li class="listitem"><a name="option_ndb_redo_log_reader_mbyteheaders"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for mbyteheaders"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">-mbyteheaders</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table></div><p>
            <code class="option">-mbyteheaders</code>:
            ファイル内のすべての MB
            の最初のページヘッダーのみを表示します。
          </p></li><li class="listitem"><a name="option_ndb_redo_log_reader_noprint"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for noprint"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">-noprint</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table></div><p>
            <code class="option">-noprint</code>:
            ログファイルの内容を出力しません。
          </p></li><li class="listitem"><a name="option_ndb_redo_log_reader_nocheck"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for nocheck"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">-nocheck</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table></div><p>
            <code class="option">-nocheck</code>:
            ログファイルのエラーをチェックしません。
          </p></li><li class="listitem"><a name="option_ndb_redo_log_reader_page"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for page"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">-page #</code></td>
</tr><tr><th>型</th>
<td>Integer</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">0</code></td>
</tr><tr><th>最小値</th>
<td><code class="literal">0</code></td>
</tr><tr><th>最大値</th>
<td><code class="literal">31</code></td>
</tr></tbody></table></div><p>
            <code class="option">-page <em class="replaceable"><code>#</code></em></code>:
            このページから開始します。
          </p><p>
            <em class="replaceable"><code>#</code></em>は、0 から 31
            の範囲の整数です。
          </p></li><li class="listitem"><a name="option_ndb_redo_log_reader_pageheaders"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for pageheaders"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">-pageheaders</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table></div><p>
            <code class="option">-pageheaders</code>:
            ページヘッダーのみ表示します。
          </p></li><li class="listitem"><a name="option_ndb_redo_log_reader_pageindex"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for pageindex"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">-pageindex #</code></td>
</tr><tr><th>型</th>
<td>Integer</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">12</code></td>
</tr><tr><th>最小値</th>
<td><code class="literal">12</code></td>
</tr><tr><th>最大値</th>
<td><code class="literal">8191</code></td>
</tr></tbody></table></div><p>
            <code class="option">-pageindex <em class="replaceable"><code>#</code></em></code>:
            このページインデックスから開始します。
          </p><p>
            <em class="replaceable"><code>#</code></em>は、12 以上 8191
            以下の整数です。
          </p></li><li class="listitem"><p><a name="option_ndb_redo_log_reader_twiddle"></a>
            <code class="option">-twiddle</code>
          </p><a class="indexterm" name="idm45563217083056"></a><a class="indexterm" name="idm45563217081072"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for twiddle"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">-twiddle</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table></div><p>
            Bit-shifted dump.
          </p></li></ul></div><p>
        <span class="command"><strong>ndb_print_backup_file</strong></span> や
        <span class="command"><strong>ndb_print_schema_file</strong></span> と同様に
        (管理サーバーホスト上で実行することや管理サーバーに接続することを意図している
        <code class="literal">NDB</code>
        ユーティリティとは異なり)、<span class="command"><strong>ndb_redo_log_reader</strong></span>
        はデータノードファイルシステムに直接アクセスするため、クラスタデータノード上で実行する必要があります。
        このユーティリティーは管理サーバーを使用しないため、管理サーバーが実行されていない場合、およびクラスタが完全にシャットダウンされている場合にも使用できます。
      </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-cluster-programs-ndb-restore"></a>23.4.23 ndb_restore — NDB Cluster バックアップの復元</h3></div></div></div><div class="toc"><dl class="toc"><dt><span class="section"><a href="mysql-cluster.html#ndb-restore-to-different-version">23.4.23.1 異なるバージョンの NDB Cluster への NDB
          バックアップの復元</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#ndb-restore-different-number-nodes">23.4.23.2 異なる数のデータノードへの復元</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#ndb-restore-parallel-data-node-backup">23.4.23.3 パラレルで作成されたバックアップからのリストア</a></span></dt></dl></div><a class="indexterm" name="idm45563217063840"></a><a class="indexterm" name="idm45563217062096"></a><a class="indexterm" name="idm45563217060240"></a><a class="indexterm" name="idm45563217058496"></a><a class="indexterm" name="idm45563217056752"></a><p>
        NDB Cluster リストアプログラムは、通常は MySQL
        <code class="filename">bin</code>
        ディレクトリにある個別のコマンド行ユーティリティー
        <span class="command"><strong>ndb_restore</strong></span> として実装されます。
        このプログラムは、バックアップの結果として作成されたファイルを読み取り、格納されている情報をデータベースに挿入します。
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
          NDB 8.0.17
          以降、このプログラムは実行の終了時に
          <code class="literal">NDBT_ProgramExit: ...</code>
          を出力しなくなりました。 NDB 8.0.16 以前から
          NDB 8.0
          以降のリリースにアップグレードする場合は、この動作に依存するアプリケーションを適宜変更するようにしてください。
        </p></div><p>
        <span class="command"><strong>ndb_restore</strong></span>
        は、バックアップを作成するために使用される
        <code class="literal">START BACKUP</code> コマンド
        (<a class="xref" href="mysql-cluster.html#mysql-cluster-backup-using-management-client" title="23.5.8.2 NDB Cluster 管理クライアントを使用したバックアップの作成">セクション23.5.8.2「NDB Cluster 管理クライアントを使用したバックアップの作成」</a>を参照してください)
        によって作成されたバックアップファイルごとに、一度実行する必要があります。
        これは、バックアップが作成された時点の、クラスタ内のデータノード数と同じです。
      </p><a class="indexterm" name="idm45563217048128"></a><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
          複数のデータノードを並列でリストアしている場合を除き、<span class="command"><strong>ndb_restore</strong></span>
          を使用する前に、クラスタをシングルユーザーモードで実行することをお勧めします。
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-single-user-mode" title="23.5.6 NDB Cluster のシングルユーザーモード">セクション23.5.6「NDB Cluster のシングルユーザーモード」</a>を参照してください。
        </p></div><p>
        次のテーブルに、NDB Cluster
        ネイティブバックアップリストアプログラム
        <span class="command"><strong>ndb_restore</strong></span>
        に固有のオプションを示します。
        追加説明が表のあとにあります。 ほとんどの
        NDB Cluster プログラム (<span class="command"><strong>ndb_restore</strong></span>
        を含む)
        に共通のオプションについては、<a class="xref" href="mysql-cluster.html#mysql-cluster-program-options-common" title="23.4.32 NDB Cluster プログラムに共通のオプション — NDB Cluster プログラムに共通のオプション">セクション23.4.32「NDB Cluster プログラムに共通のオプション — NDB Cluster プログラムに共通のオプション」</a>
        を参照してください。
      </p><div class="table"><a name="mysql-cluster-ndb_restore-options-table"></a><p class="title"><b>表 23.40 プログラムで使用されるコマンドライン・オプション ndb_restore</b></p><div class="table-contents"><table frame="box" rules="all"><col style="width: 33%"><col style="width: 34%"><col style="width: 33%"><thead><tr>
            <th scope="col">形式</th>
            <th scope="col">説明</th>
            <th scope="col">追加、非推奨、または削除された</th>
          </tr></thead><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_allow-pk-changes">--allow-pk-changes[=0|1]</a>
                </code>
              </p></th>
            <td>テーブルの主キーを構成するカラムセットの変更を許可</td>
            <td><p>
                追加: NDB 8.0.21
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_append">--append</a>
                </code>
              </p></th>
            <td>タブ区切りファイルへのデータの追加</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_backup-password">--backup-password=string</a>
                </code>
              </p></th>
            <td>--decrypt
              を使用して暗号化バックアップを復号化するためのパスワードを指定します。許可される値については、ドキュメントを参照してください</td>
            <td><p>
                追加: NDB 8.0.22
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_backup-path">--backup-path=dir_name</a>
                </code>
              </p></th>
            <td>バックアップファイルディレクトリへのパス</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_restore_backupid">--backupid=#</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_backupid">-b</a>
                </code>
              </p></th>
            <td>この ID を持つバックアップからのリストア</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_restore_connect">--connect</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_connect">-c</a>
                </code>
              </p></th>
            <td>--connectstring のエイリアス</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_decrypt">--decrypt</a>
                </code>
              </p></th>
            <td>暗号化バックアップを復号化します。--backup-password
              が必要です</td>
            <td><p>
                追加: NDB 8.0.22
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_disable-indexes">--disable-indexes</a>
                </code>
              </p></th>
            <td>バックアップからのインデックスが無視されます。データのリストアに必要な時間が短縮される可能性があります</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_restore_dont-ignore-systab-0">--dont-ignore-systab-0</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_dont-ignore-systab-0">-f</a>
                </code>
              </p></th>
            <td>リストア中はシステムテーブルを無視しないでください。実験のみで、本番での使用には使用しません</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_exclude-databases">--exclude-databases=db-list</a>
                </code>
              </p></th>
            <td>1 つ以上の除外するデータベースのリスト
              (指定されていないものを含めます)</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_exclude-intermediate-sql-tables">--exclude-intermediate-sql-tables[=TRUE|FALSE]</a>
                </code>
              </p></th>
            <td>TRUE (デフォルト) の場合、ALTER TABLE
              操作のコピーから残された中間テーブル
              (接頭辞'#sql-'が付いた名前)
              をリストアしません</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_exclude-missing-columns">--exclude-missing-columns</a>
                </code>
              </p></th>
            <td>データベースのテーブルのバージョンから欠落しているテーブルのバックアップバージョンのカラムは無視されます</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_exclude-missing-tables">--exclude-missing-tables</a>
                </code>
              </p></th>
            <td>データベースから欠落しているバックアップからのテーブルは無視されます</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_exclude-tables">--exclude-tables=table-list</a>
                </code>
              </p></th>
            <td>除外する 1 つ以上のテーブルのリスト
              (名前のない同じデータベース内のテーブルを含む)。各テーブル参照にはデータベース名が含まれている必要があります</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_fields-enclosed-by">--fields-enclosed-by=char</a>
                </code>
              </p></th>
            <td>フィールドはこの文字で囲まれています</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_fields-optionally-enclosed-by">--fields-optionally-enclosed-by</a>
                </code>
              </p></th>
            <td>フィールドはオプションでこの文字で囲まれます</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_fields-terminated-by">--fields-terminated-by=char</a>
                </code>
              </p></th>
            <td>フィールドはこの文字で終了</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_hex">--hex</a>
                </code>
              </p></th>
            <td>バイナリタイプを 16 進形式で出力します</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_ignore-extended-pk-updates">--ignore-extended-pk-updates[=0|1]</a>
                </code>
              </p></th>
            <td>現在拡張主キーに含まれているカラムの更新を含むログエントリを無視</td>
            <td><p>
                追加: NDB 8.0.21
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_include-databases">--include-databases=db-list</a>
                </code>
              </p></th>
            <td>1 つ以上のリストアするデータベースのリスト
              (指定されていないものを除外します)</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_include-stored-grants">--include-stored-grants</a>
                </code>
              </p></th>
            <td>共有ユーザーおよび権限を ndb_sql_metadata
              テーブルにリストア</td>
            <td><p>
                追加: NDB 8.0.19
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_include-tables">--include-tables=table-list</a>
                </code>
              </p></th>
            <td>リストアする 1 つ以上のテーブルのリスト
              (名前のない同じデータベース内のテーブルを除く)。各テーブル参照にはデータベース名を含める必要があります</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_lines-terminated-by">--lines-terminated-by=char</a>
                </code>
              </p></th>
            <td>行はこの文字で終了</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_restore_lossy-conversions">--lossy-conversions</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_lossy-conversions">-L</a>
                </code>
              </p></th>
            <td>バックアップからデータをリストアするときに、カラム値の不可逆変換
              (型の昇格または符号の変更) を許可します</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_no-binlog">--no-binlog</a>
                </code>
              </p></th>
            <td>mysqld
              が接続され、バイナリロギングを使用している場合は、復元されたデータをログに記録しません</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_restore_no-restore-disk-objects">--no-restore-disk-objects</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_no-restore-disk-objects">-d</a>
                </code>
              </p></th>
            <td>ディスクデータに関連するオブジェクトをリストアしません</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_restore_no-upgrade">--no-upgrade</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_no-upgrade">-u</a>
                </code>
              </p></th>
            <td>VAR
              データがまだサイズ変更されていない可変サイズ属性の配列タイプをアップグレードせず、カラム属性を変更しません</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_restore_ndb-nodegroup-map">--ndb-nodegroup-map=map</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_ndb-nodegroup-map">-z</a>
                </code>
              </p></th>
            <td>NDBCLUSTER
              ストレージエンジンのノードグループマップ;構文:
              リスト (source_nodegroup、destination_nodegroup)</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_restore_nodeid">--nodeid=#</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_nodeid">-n</a>
                </code>
              </p></th>
            <td>バックアップが作成されたノードの ID</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_num-slices">--num-slices=#</a>
                </code>
              </p></th>
            <td>スライスごとの復元時に適用するスライスの数</td>
            <td><p>
                追加: NDB 8.0.20
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_restore_parallelism">--parallelism=#</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_parallelism">-p</a>
                </code>
              </p></th>
            <td>データのリストア中に使用する並列トランザクションの数</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_restore_preserve-trailing-spaces">--preserve-trailing-spaces</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_preserve-trailing-spaces">-P</a>
                </code>
              </p></th>
            <td>固定幅文字列型を可変幅型に昇格するときに、末尾の空白
              (パディングを含む)
              を維持することを許可します</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_print">--print</a>
                </code>
              </p></th>
            <td>メタデータ、データおよびログを stdout に出力します
              (--print-meta --print-data --print-log と同等)</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_print-data">--print-data</a>
                </code>
              </p></th>
            <td>データを stdout に出力します</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_print-log">--print-log</a>
                </code>
              </p></th>
            <td>stdout へのログの出力</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_print-meta">--print-meta</a>
                </code>
              </p></th>
            <td>メタデータを stdout に出力します</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_print-sql-log">--print-sql-log</a>
                </code>
              </p></th>
            <td>SQL ログを stdout に書き込みます。デフォルトは FALSE
              です</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_progress-frequency">--progress-frequency=#</a>
                </code>
              </p></th>
            <td>指定された秒数ごとに復元のステータスを出力</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_restore_promote-attributes">--promote-attributes</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_promote-attributes">-A</a>
                </code>
              </p></th>
            <td>バックアップからデータをリストアするときに、属性の昇格を許可します</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_rebuild-indexes">--rebuild-indexes</a>
                </code>
              </p></th>
            <td>バックアップで見つかった順序付けられたインデックスをマルチスレッドで再構築します。使用されるスレッドの数は、BuildIndexThreads
              の設定によって決定されます</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_remap-column">--remap-column=[db].[tbl].[col]:[fn]:[args]</a>
                </code>
              </p></th>
            <td>指定された関数および引数を使用して、指定されたカラムの値にオフセットを適用</td>
            <td><p>
                追加: NDB 8.0.21
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_restore_restore-data">--restore-data</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_restore-data">-r</a>
                </code>
              </p></th>
            <td>NDB API を使用してテーブルデータを復元し、NDB Cluster
              にログイン</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_restore_restore-epoch">--restore-epoch</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_restore-epoch">-e</a>
                </code>
              </p></th>
            <td>エポック情報をステータステーブルにリストアします。レプリカクラスタでレプリケーションを開始する場合に役立ちます。ID
              0 の mysql.ndb_apply_status
              の行を更新または挿入</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_restore_restore-meta">--restore-meta</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_restore-meta">-m</a>
                </code>
              </p></th>
            <td>NDB API を使用した NDB Cluster へのメタデータの復元</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_restore-privilege-tables">--restore-privilege-tables</a>
                </code>
              </p></th>
            <td>以前 NDB に移動された MySQL
              権限テーブルをリストアします</td>
            <td><p>
                非推奨: NDB 8.0.16
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_rewrite-database">--rewrite-database=olddb,newdb</a>
                </code>
              </p></th>
            <td>別の名前のデータベースへのリストア</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_skip-broken-objects">--skip-broken-objects</a>
                </code>
              </p></th>
            <td>バックアップファイルで欠落している BLOB
              テーブルを無視</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_restore_skip-table-check">--skip-table-check</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_skip-table-check">-s</a>
                </code>
              </p></th>
            <td>リストア中にテーブル構造チェックをスキップ</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_skip-unknown-objects">--skip-unknown-objects</a>
                </code>
              </p></th>
            <td>新しい NDB
              バージョンから古いバージョンにバックアップを復元するときに、ndb_restore
              で認識されないスキーマオブジェクトを無視</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_slice-id">--slice-id=#</a>
                </code>
              </p></th>
            <td>スライス ID(スライス別に復元する場合)</td>
            <td><p>
                追加: NDB 8.0.20
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_restore_tab">--tab=dir_name</a></code>,
              </p><p>
                <code class="option"> <a class="link" href="mysql-cluster.html#option_ndb_restore_tab">-T
                dir_name</a> </code>
              </p></th>
            <td>指定されたパスのテーブルごとにタブ区切りの .txt
              ファイルを作成</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_restore_verbose">--verbose=#</a>
                </code>
              </p></th>
            <td>出力の冗長性レベル</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody></table></div></div><br class="table-break"><a class="indexterm" name="idm45563216745584"></a><p>
        このユーティリティーの一般的なオプションを次に示します。
      </p><pre class="programlisting">ndb_restore [-c <em class="replaceable"><code>connection_string</code></em>] -n <em class="replaceable"><code>node_id</code></em> -b <em class="replaceable"><code>backup_id</code></em> \
      [-m] -r --backup-path=<em class="replaceable"><code>/path/to/backup/files</code></em>
</pre><p>
        通常、NDB Cluster
        バックアップから復元する場合、<span class="command"><strong>ndb_restore</strong></span>
        には少なくとも
        <code class="option">--nodeid</code> (短い形式)
        が必要です:
        <code class="option">-n</code>)、<code class="option">--backupid</code>
        (短い形式: <code class="option">-b</code>)、および
        <code class="option">--backup-path</code>
        のオプション。
      </p><p>
        NDB 8.0.19 より前では、<span class="command"><strong>ndb_restore</strong></span>
        を使用して一意のインデックスを含むテーブルを復元した場合、<code class="option">--disable-indexes</code>
        または <code class="option">--rebuild-indexes</code>
        を含める必要がありました。 NDB 8.0.19
        以降では、自動メタデータ同期が有効になっている場合、これは必要なくなりました。
      </p><p>
        <code class="option">-c</code>
        オプションは、クラスタ管理サーバーの場所を
        <code class="literal">ndb_restore</code>
        に指示する接続文字列を指定するために使用します
        (<a class="xref" href="mysql-cluster.html#mysql-cluster-connection-strings" title="23.3.3.3 NDB Cluster 接続文字列">セクション23.3.3.3「NDB Cluster 接続文字列」</a>
        を参照)。
        このオプションを使用しない場合、<span class="command"><strong>ndb_restore</strong></span>
        は <code class="literal">localhost:1186</code>
        の管理サーバーに接続を試みます。
        このユーティリティーはクラスタ API
        ノードとして動作するため、クラスタ管理サーバーに接続するための空き接続<span class="quote">「<span class="quote">スロット</span>」</span>が必要となります。
        これは、クラスタ <code class="filename">config.ini</code>
        ファイル内にそれが使用できる
        <code class="literal">[api]</code> セクションまたは
        <code class="literal">[mysqld]</code> セクションが少なくとも 1
        つ存在する必要があることを意味します。
        このため、MySQL
        サーバーまたはほかのアプリケーションに使用されていない空の
        <code class="literal">[api]</code> セクションまたは
        <code class="literal">[mysqld]</code>
        セクションを、<code class="filename">config.ini</code>
        内に少なくとも 1
        つ用意することをお勧めします
        (<a class="xref" href="mysql-cluster.html#mysql-cluster-api-definition" title="23.3.3.7 NDB Cluster での SQL およびその他の API ノードの定義">セクション23.3.3.7「NDB Cluster での SQL およびその他の API ノードの定義」</a>を参照してください)。
      </p><p>
        NDB 8.0.22 以降では、<span class="command"><strong>ndb_restore</strong></span> は
        <code class="option">--decrypt</code> および
        <code class="option">--backup-password</code>
        を使用して暗号化バックアップを復号化できます。
        復号化を実行するには、両方のオプションを指定する必要があります。
        暗号化バックアップの作成の詳細は、<code class="literal">START
        BACKUP</code>
        管理クライアントコマンドのドキュメントを参照してください。
      </p><p>
        <span class="command"><strong>ndb_restore</strong></span>
        がクラスタに接続されていることを確認するには、<span class="command"><strong>ndb_mgm</strong></span>
        管理クライアントで
        <code class="literal">SHOW</code>
        コマンドを使用します。
        システムシェルで次のようにすることでこれを実現することもできます。
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>ndb_mgm -e "SHOW"</code></strong>
</pre><p>
        <span class="command"><strong>ndb_restore</strong></span>
        で使用されるすべてのオプションの詳細は、次のリストを参照してください:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="option_ndb_restore_allow-pk-changes"></a>
            <code class="option">--allow-pk-changes</code>
          </p><a class="indexterm" name="idm45563216712176"></a><a class="indexterm" name="idm45563216710112"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for allow-pk-changes"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--allow-pk-changes[=0|1]</code></td>
</tr><tr><th>導入</th>
<td>8.0.21-ndb-8.0.21</td>
</tr><tr><th>型</th>
<td>Integer</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">0</code></td>
</tr><tr><th>最小値</th>
<td><code class="literal">0</code></td>
</tr><tr><th>最大値</th>
<td><code class="literal">1</code></td>
</tr></tbody></table></div><p>
            このオプションが <code class="literal">1</code>
            に設定されている場合、<span class="command"><strong>ndb_restore</strong></span>
            では、テーブル定義の主キーをバックアップ内の同じテーブルの主キーと異なるものにすることができます。
            これは、複数のテーブルで主キーが変更されている異なるスキーマバージョン間でバックアップおよびリストアを行う場合に望ましいことがあり、テーブルスキーマおよびデータのリストア後に多くの
            <code class="literal">ALTER TABLE</code>
            ステートメントを発行するよりも、ndb_restore
            を使用してリストア操作を実行する方が単純または効率的であるようです。
          </p><p>
            <code class="option">--allow-pk-changes</code>
            では、主キー定義の次の変更がサポートされています:
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <span class="bold"><strong>主キーの拡張</strong></span>:
                バックアップ内のテーブルスキーマに存在する
                NULL
                以外のカラムは、データベース内のテーブル主キーの一部になります。
              </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">重要</div><p>
                  テーブルの主キーを拡張する場合、バックアップの実行中に主キーの一部となるカラムは更新しないでください。<span class="command"><strong>ndb_restore</strong></span>
                  によって検出された更新によって、値が変更されなくてもリストア操作は失敗します。
                  場合によっては、<code class="option">--ignore-extended-pk-updates</code>
                  オプションを使用してこの動作をオーバーライドできます。詳細は、このオプションの説明を参照してください。
                </p></div></li><li class="listitem"><p>
                <span class="bold"><strong>主キーの契約 (1)</strong></span>
                :
                すでにバックアップスキーマのテーブル主キーの一部であるカラムは、主キーの一部ではなくなりますが、テーブルには残ります。
              </p></li><li class="listitem"><p>
                <span class="bold"><strong>主キーの契約 (2)</strong></span>
                :
                すでにバックアップスキーマのテーブル主キーの一部であるカラムは、テーブルから完全に削除されます。
              </p></li></ul></div><p>
            これらの違いは、ステージングテーブルの使用を必要とする
            BLOB
            カラムやテキストカラムの変更など、<span class="command"><strong>ndb_restore</strong></span>
            でサポートされている他のスキーマの違いと組み合せることができます。
          </p><p>
            主キースキーマの変更を使用する一般的なシナリオの基本ステップを次に示します:
          </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
                <span class="command"><strong>ndb_restore</strong></span>
                <code class="option">--restore-meta</code>
                を使用したテーブルスキーマのリストア
              </p></li><li class="listitem"><p>
                必要なスキーマに変更するか、スキーマを作成
              </p></li><li class="listitem"><p>
                目的のスキーマのバックアップ
              </p></li><li class="listitem"><p>
                前のステップのバックアップを使用して
                <span class="command"><strong>ndb_restore</strong></span>
                <code class="option">--disable-indexes</code>
                を実行し、インデックスおよび制約を削除
              </p></li><li class="listitem"><p>
                <span class="command"><strong>ndb_restore</strong></span>
                <code class="option">--allow-pk-changes</code>
                を
                (<code class="option">--ignore-extended-pk-updates</code>、<code class="option">--disable-indexes</code>
                および必要に応じてその他のオプションとともに)
                実行して、すべてのデータをリストア
              </p></li><li class="listitem"><p>
                目的のスキーマで作成されたバックアップを使用して
                <span class="command"><strong>ndb_restore</strong></span>
                <code class="option">--rebuild-indexes</code>
                を実行し、インデックスおよび制約を再構築
              </p></li></ol></div><p>
            主キーを拡張する場合、リストア操作中に
            <span class="command"><strong>ndb_restore</strong></span>
            で一時セカンダリ一意インデックスを使用して、古い主キーから新しい主キーにマップする必要がある場合があります。
            このようなインデックスは、バックアップログから拡張主キーを持つテーブルにイベントを適用する必要がある場合にのみ作成されます。
            このインデックスは
            <code class="literal">NDB$RESTORE_PK_MAPPING</code>
            という名前で、それを必要とする各テーブルに作成されます。必要に応じて、パラレルで実行されている
            <span class="command"><strong>ndb_restore</strong></span>
            インスタンスの複数のインスタンスで共有できます。
            (リストアプロセスの最後に
            <span class="command"><strong>ndb_restore</strong></span>
            <code class="option">--rebuild-indexes</code>
            を実行すると、このインデックスは削除されます。)
          </p></li><li class="listitem"><p><a name="option_ndb_restore_append"></a>
            <code class="option">--append</code>
          </p><a class="indexterm" name="idm45563216655712"></a><a class="indexterm" name="idm45563216653728"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for append"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--append</code></td>
</tr></tbody></table></div><p>
            <code class="option">--tab</code> および
            <code class="option">--print-data</code>
            オプションとともに使用すると、同じ名前の既存のファイルにデータが追加されます。
          </p></li><li class="listitem"><p><a name="option_ndb_restore_backup-path"></a>
            <code class="option">--backup-path</code>=<em class="replaceable"><code>dir_name</code></em>
          </p><a class="indexterm" name="idm45563216642944"></a><a class="indexterm" name="idm45563216640960"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for backup-path"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--backup-path=dir_name</code></td>
</tr><tr><th>型</th>
<td>ディレクトリ名</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">./</code></td>
</tr></tbody></table></div><p>
            バックアップディレクトリへのパスは必須です。これは、<code class="option">--backup-path</code>
            オプションを使用して
            <span class="command"><strong>ndb_restore</strong></span>
            に提供され、リストアするバックアップの ID
            バックアップに対応するサブディレクトリを含める必要があります。
            たとえば、データノードの
            <code class="literal">DataDir</code> が
            <code class="filename">/var/lib/mysql-cluster</code>
            である場合、バックアップディレクトリは
            <code class="filename">/var/lib/mysql-cluster/BACKUP</code>
            であり、ID 3
            のバックアップのバックアップファイルは
            <code class="filename">/var/lib/mysql-cluster/BACKUP/BACKUP-3</code>
            にあります。 パスは、絶対パスまたは
            <span class="command"><strong>ndb_restore</strong></span>
            実行可能ファイルが配置されているディレクトリへの相対パスで、必要に応じて
            <code class="option">backup-path=</code>
            を接頭辞として付けることができます。
          </p><p>
            作成されたデータベースとは異なる構成のデータベースにバックアップをリストアできます。
            たとえば、<code class="literal">2</code> および
            <code class="literal">3</code> というノード ID を持つ 2
            つのストレージノードを持つクラスタに作成された、バックアップ
            ID が <code class="literal">12</code> のバックアップを、4
            つのノードを持つクラスタにリストアするとします。
            その後、バックアップが作成されたクラスタ内のストレージノードごとに、<span class="command"><strong>ndb_restore</strong></span>
            を 2 回実行する必要があります。
            ただし、<span class="command"><strong>ndb_restore</strong></span>
            はあるバージョンの MySQL
            で実行されているクラスタから作成されたバックアップを、別のバージョンの
            MySQL
            で実行されているクラスタに常に復旧できるとはかぎりません。


          </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">重要</div><p>
              古いバージョンの <span class="command"><strong>ndb_restore</strong></span>
              を使用して新しいバージョンの NDB Cluster
              から作成されたバックアップを復元することはできません。
              新しいバージョンの MySQL
              から作成されたバックアップを古いクラスタに復元できますが、そのためには新しい
              NDB Cluster バージョンの
              <span class="command"><strong>ndb_restore</strong></span>
              のコピーを使用する必要があります。
            </p><p>
              たとえば、NDB Cluster 7.5.21
              を実行しているクラスタから取得したクラスタバックアップを
              NDB Cluster 7.4.31
              を実行しているクラスタに復元するには、NDB
              Cluster 7.5.21
              ディストリビューションに付属の
              <span class="command"><strong>ndb_restore</strong></span>
              を使用する必要があります。
            </p></div><p>
            リストアをより高速にするために、十分な数のクラスタ接続が使用できる場合は、データを並列でリストアできます。
            より正確に言うと、複数のノードを並列でリストアする場合は、各並列
            <span class="command"><strong>ndb_restore</strong></span>
            プロセスに使用できる <code class="literal">[api]</code>
            または <code class="literal">[mysqld]</code>
            セクションがクラスタ
            <code class="filename">config.ini</code>
            ファイルに存在する必要があります。
            ただし、データファイルは常にログの前に適用する必要があります。
          </p></li><li class="listitem"><p><a name="option_ndb_restore_backup-password"></a>
            <code class="option">--backup-password=<em class="replaceable"><code>password</code></em></code>
          </p><a class="indexterm" name="idm45563216606592"></a><a class="indexterm" name="idm45563216604528"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for backup-password"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--backup-password=string</code></td>
</tr><tr><th>導入</th>
<td>8.0.22-ndb-8.0.22</td>
</tr><tr><th>型</th>
<td>文字列</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">[none]</code></td>
</tr></tbody></table></div><p>
            このオプションは、<code class="option">--decrypt</code>
            オプションを使用して暗号化バックアップを復号化するときに使用するパスワードを指定します。
            これは、バックアップの暗号化に使用されたパスワードと同じである必要があります。
          </p><p>
            パスワードは 256
            文字以内で、一重引用符または二重引用符で囲む必要があります。
            文字コード 32、35、38、40-91、93、95 および
            97-126 を持つ ASCII
            文字を含めることができます。つまり、<code class="literal">!</code>,
            <code class="literal">'</code>, <code class="literal">"</code>,
            <code class="literal">$</code>, <code class="literal">%</code>,
            <code class="literal">\</code>および <code class="literal">^</code>
            以外の印刷可能な ASCII
            文字を使用できます。
          </p></li><li class="listitem"><p><a name="option_ndb_restore_backupid"></a>
            <code class="option">--backupid</code>=<em class="replaceable"><code>#</code></em>,
            <code class="option">-b</code>
          </p><a class="indexterm" name="idm45563216581600"></a><a class="indexterm" name="idm45563216579616"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for backupid"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--backupid=#</code></td>
</tr><tr><th>型</th>
<td>数値</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">none</code></td>
</tr></tbody></table></div><p>
            このオプションは、バックアップの ID
            または順序番号を指定するために使用され、バックアップの完了時に表示される
            <code class="literal">Backup <em class="replaceable"><code>backup_id</code></em>
            completed</code>
            メッセージに管理クライアントによって表示される番号と同じです。
            (<a class="xref" href="mysql-cluster.html#mysql-cluster-backup-using-management-client" title="23.5.8.2 NDB Cluster 管理クライアントを使用したバックアップの作成">セクション23.5.8.2「NDB Cluster 管理クライアントを使用したバックアップの作成」</a>を参照してください。)
          </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">重要</div><p>
              クラスタバックアップをリストアするときは、同じバックアップ
              ID
              を持つバックアップからすべてのデータノードをリストアする必要があります。
              異なるバックアップのファイルを使用すると、クラスタが一貫性のない状態にリストアされ、完全に失敗する可能性があります。
            </p></div><p>
            NDB 8.0.15
            以降では、このオプションは必須です。
          </p></li><li class="listitem"><p><a name="option_ndb_restore_connect"></a>
            <code class="option">--connect</code>, <code class="option">-c</code>
          </p><a class="indexterm" name="idm45563216561840"></a><a class="indexterm" name="idm45563216559856"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for connect"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--connect</code></td>
</tr><tr><th>型</th>
<td>文字列</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">localhost:1186</code></td>
</tr></tbody></table></div><p>
            <code class="option">--ndb-connectstring</code>
            のエイリアス。
          </p></li><li class="listitem"><p><a name="option_ndb_restore_decrypt"></a>
            <code class="option">--decrypt</code>
          </p><a class="indexterm" name="idm45563216545936"></a><a class="indexterm" name="idm45563216543952"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for decrypt"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--decrypt</code></td>
</tr><tr><th>導入</th>
<td>8.0.22-ndb-8.0.22</td>
</tr></tbody></table></div><p>
            <code class="option">--backup-password</code>
            オプションで指定されたパスワードを使用して、暗号化バックアップを復号化します。
          </p></li><li class="listitem"><p><a name="option_ndb_restore_disable-indexes"></a>
            <code class="option">--disable-indexes</code>
          </p><a class="indexterm" name="idm45563216532192"></a><a class="indexterm" name="idm45563216530128"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for disable-indexes"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--disable-indexes</code></td>
</tr></tbody></table></div><p>
            ネイティブ <code class="literal">NDB</code>
            バックアップからのデータのリストア中にインデックスのリストアを無効にします。
            その後、<code class="option">--rebuild-indexes</code>
            を使用してマルチスレッドでインデックスを作成することで、すべてのテーブルのインデックスを一度にリストアできます。これは、非常に大きなテーブルのインデックスを同時に再構築するより高速である必要があります。
          </p></li><li class="listitem"><p><a name="option_ndb_restore_dont-ignore-systab-0"></a>
            <code class="option">--dont-ignore-systab-0</code>, <code class="option">-f</code>
          </p><a class="indexterm" name="idm45563216518528"></a><a class="indexterm" name="idm45563216516448"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for dont-ignore-systab-0"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--dont-ignore-systab-0</code></td>
</tr></tbody></table></div><p>
            通常、テーブルデータおよびメタデータをリストアする場合、<span class="command"><strong>ndb_restore</strong></span>
            は、バックアップに存在する
            <code class="literal">NDB</code>
            システムテーブルのコピーを無視します。<code class="option">--dont-ignore-systab-0</code>
            により、システムテーブルがリストアされます。
            <span class="emphasis"><em>このオプションは、実験および開発での使用のみが意図されており、本番環境には推奨されていません</em></span>。
          </p></li><li class="listitem"><p><a name="option_ndb_restore_exclude-databases"></a>
            <code class="option">--exclude-databases</code>=<em class="replaceable"><code>db-list</code></em>
          </p><a class="indexterm" name="idm45563216503984"></a><a class="indexterm" name="idm45563216501920"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for exclude-databases"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--exclude-databases=db-list</code></td>
</tr><tr><th>型</th>
<td>文字列</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal"></code></td>
</tr></tbody></table></div><p>
            リストアしない 1
            つ以上のデータベースのカンマ区切りリスト。
          </p><p>
            このオプションは、多くの場合、<code class="option">--exclude-tables</code>
            と組み合せて使用されます。詳細および例は、そのオプションの説明を参照してください。
          </p></li><li class="listitem"><p><a name="option_ndb_restore_exclude-intermediate-sql-tables"></a>
            <code class="option">--exclude-intermediate-sql-tables[</code>=<em class="replaceable"><code>TRUE|FALSE]</code></em>
          </p><a class="indexterm" name="idm45563216486704"></a><a class="indexterm" name="idm45563216484608"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for exclude-intermediate-sql-tables"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--exclude-intermediate-sql-tables[=TRUE|FALSE]</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">TRUE</code></td>
</tr></tbody></table></div><p>
            <code class="literal">ALTER TABLE</code>
            のコピー操作を実行するときに、<span class="command"><strong>mysqld</strong></span>
            は中間テーブルを作成します (名前の前に
            <code class="literal">#sql-</code> が付けられます)。
            <code class="literal">TRUE</code>
            の場合、<code class="option">--exclude-intermediate-sql-tables</code>
            オプションは、<span class="command"><strong>ndb_restore</strong></span>
            がこれらの操作から残された可能性のあるテーブルをリストアしないようにします。
            このオプションはデフォルトでは
            <code class="literal">TRUE</code> です。
          </p></li><li class="listitem"><p><a name="option_ndb_restore_exclude-missing-columns"></a>
            <code class="option">--exclude-missing-columns</code>
          </p><a class="indexterm" name="idm45563216466048"></a><a class="indexterm" name="idm45563216463968"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for exclude-missing-columns"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--exclude-missing-columns</code></td>
</tr></tbody></table></div><p>
            このオプションを使用して、選択したテーブルのカラムのみをリストアできます。これにより、<span class="command"><strong>ndb_restore</strong></span>
            は、バックアップで見つかったテーブルのバージョンと比較して、リストアされるテーブルから欠落しているカラムを無視します。
            このオプションはリストアされるすべてのテーブルに適用されます。
            このオプションを選択したテーブルまたはデータベースにのみ適用する場合は、このセクションの他の場所で説明されている
            <code class="option">--include-*</code> または
            <code class="option">--exclude-*</code>
            のオプションと組み合せて使用し、これらのオプションの補完セットを使用して残りのテーブルにデータをリストアできます。
          </p></li><li class="listitem"><p><a name="option_ndb_restore_exclude-missing-tables"></a>
            <code class="option">--exclude-missing-tables</code>
          </p><a class="indexterm" name="idm45563216452288"></a><a class="indexterm" name="idm45563216450208"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for exclude-missing-tables"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--exclude-missing-tables</code></td>
</tr></tbody></table></div><p>
            このオプションを使用して、選択したテーブルのみをリストアできます。これにより、<span class="command"><strong>ndb_restore</strong></span>
            は、ターゲットデータベースで見つからないバックアップのテーブルを無視します。
          </p></li><li class="listitem"><p><a name="option_ndb_restore_exclude-tables"></a>
            <code class="option">--exclude-tables</code>=<em class="replaceable"><code>table-list</code></em>
          </p><a class="indexterm" name="idm45563216439696"></a><a class="indexterm" name="idm45563216437632"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for exclude-tables"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--exclude-tables=table-list</code></td>
</tr><tr><th>型</th>
<td>文字列</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal"></code></td>
</tr></tbody></table></div><p>
            除外する 1
            つ以上のテーブルのリスト。各テーブル参照にはデータベース名を含める必要があります。
            多くの場合、<code class="option">--exclude-databases</code>
            とともに使用されます。
          </p><p>
            <code class="option">--exclude-databases</code> または
            <code class="option">--exclude-tables</code>
            を使用した場合は、これらのオプションによって指定されたデータベースまたはテーブルのみが除外されます。ほかのすべてのデータベースおよびテーブルは
            <span class="command"><strong>ndb_restore</strong></span>
            によってリストアされます。
          </p><p>
            このテーブルは、<code class="option">--exclude-*</code>
            オプションを使用した
            <span class="command"><strong>ndb_restore</strong></span>
            のいくつかの呼び出し
            (わかりやすくするためにほかのオプションが省略されている可能性があります)
            と、これらのオプションが NDB Cluster
            バックアップからの復元に与える影響を示しています:
          </p><div class="table"><a name="idm45563216420064"></a><p class="title"><b>表 23.41 --exclude-* オプションを使用した ndb_restore のいくつかの呼び出し、およびこれらのオプションが NDB Cluster バックアップからの復元に与える影響。</b></p><div class="table-contents"><table><col style="width: 50%"><col style="width: 50%"><thead><tr>
                <th>オプション</th>
                <th>結果</th>
              </tr></thead><tbody><tr>
                <td><code class="option">--exclude-databases=db1</code></td>
                <td><code class="literal">db1</code>
                  を除くすべてのデータベース内のすべてのテーブルがリストアされます。<code class="literal">db1</code>
                  内のテーブルはリストアされません</td>
              </tr><tr>
                <td><code class="option">--exclude-databases=db1,db2</code> (または
                  <code class="option">--exclude-databases=db1</code>
                  <code class="option">--exclude-databases=db2</code>)</td>
                <td><code class="literal">db1</code> および <code class="literal">db2</code>
                  を除くすべてのデータベース内のすべてのテーブルがリストアされます。<code class="literal">db1</code>
                  または <code class="literal">db2</code>
                  内のテーブルはリストアされません</td>
              </tr><tr>
                <td><code class="option">--exclude-tables=db1.t1</code></td>
                <td>データベース <code class="literal">db1</code> 内の <code class="literal">t1</code>
                  を除くすべてのテーブルがリストアされます。<code class="literal">db1</code>
                  内のほかのすべてのテーブルはリストアされます。ほかのすべてのデータベース内のすべてのテーブルはリストアされます</td>
              </tr><tr>
                <td><code class="option">--exclude-tables=db1.t2,db2.t1</code> (または
                  <code class="option">--exclude-tables=db1.t2</code>
                  <code class="option">--exclude-tables=db2.t1)</code></td>
                <td>データベース <code class="literal">db1</code> 内の <code class="literal">t2</code>
                  を除くすべてのテーブル、およびデータベース
                  <code class="literal">db2</code> 内の <code class="literal">t1</code>
                  を除くすべてのテーブルがリストアされます。<code class="literal">db1</code>
                  または <code class="literal">db2</code>
                  内のほかのテーブルはリストアされません。ほかのすべてのデータベース内のすべてのテーブルはリストアされます</td>
              </tr></tbody></table></div></div><br class="table-break"><p>
            これらの 2
            つのオプションは一緒に使用できます。
            たとえば、次のようにすると、すべてのデータベースのすべてのテーブルが
            <span class="emphasis"><em>except for</em></span> データベース
            <code class="literal">db1</code> および <code class="literal">db2</code>
            にリストアされ、データベース
            <code class="literal">db3</code> のテーブル <code class="literal">t1</code>
            および <code class="literal">t2</code> がリストアされます:
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>ndb_restore [...] --exclude-databases=db1,db2 --exclude-tables=db3.t1,db3.t2</code></strong>
</pre><p>
            (この例でも、わかりやすく簡潔にするために、必要となる可能性があるほかのオプションを省略しています)。
          </p><p>
            <code class="option">--include-*</code> オプションおよび
            <code class="option">--exclude-*</code>
            オプションは、次のルールに従って一緒に使用できます。
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                すべての <code class="option">--include-*</code> および
                <code class="option">--exclude-*</code>
                オプションのアクションは累積されます。
              </p></li><li class="listitem"><p>
                すべての <code class="option">--include-*</code> および
                <code class="option">--exclude-*</code>
                オプションは、ndb_restore
                に渡された順序で右から左に評価されます。
              </p></li><li class="listitem"><p>
                競合するオプションがある場合は、最初
                (もっとも右側)
                のオプションが優先されます。
                言い換えると、対象となるデータベースまたはテーブルと一致する最初のオプション
                (右から左に適用して)
                が<span class="quote">「<span class="quote">適用されます</span>」</span>。
              </p></li></ul></div><p>
            たとえば、次の一連のオプションを指定すると、<span class="command"><strong>ndb_restore</strong></span>
            がデータベース <code class="literal">db1</code> の
            <code class="literal">db1.t1</code>
            を除くすべてのテーブルをリストアし、ほかのデータベースのほかのテーブルはリストアしません。
          </p><pre class="programlisting">--include-databases=db1 --exclude-tables=db1.t1
</pre><p>
            ただし、前述のオプションの順序を逆にすると、データベース
            <code class="literal">db1</code>
            のすべてのテーブルがリストアされます
            (<code class="literal">db1.t1</code>
            は含まれますが、ほかのデータベースのテーブルは含まれません)。これは、もっとも右にある
            <code class="option">--include-databases</code>
            オプションがデータベース <code class="literal">db1</code>
            に対して最初に一致し、<code class="literal">db1</code>
            または <code class="literal">db1</code>
            内のテーブルと一致するその他のオプションより優先されるためです。
          </p><pre class="programlisting">--exclude-tables=db1.t1 --include-databases=db1
</pre></li><li class="listitem"><p><a name="option_ndb_restore_fields-enclosed-by"></a>
            <code class="option">--fields-enclosed-by</code>=<em class="replaceable"><code>char</code></em>
          </p><a class="indexterm" name="idm45563216366256"></a><a class="indexterm" name="idm45563216364192"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for fields-enclosed-by"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--fields-enclosed-by=char</code></td>
</tr><tr><th>型</th>
<td>文字列</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal"></code></td>
</tr></tbody></table></div><p>
            各カラム値は、このオプションに渡される文字列で囲まれます
            (データ型に関係なく、<code class="option">--fields-optionally-enclosed-by</code>
            の説明を参照)。
          </p></li><li class="listitem"><p><a name="option_ndb_restore_fields-optionally-enclosed-by"></a>
            <code class="option">--fields-optionally-enclosed-by</code>
          </p><a class="indexterm" name="idm45563216350016"></a><a class="indexterm" name="idm45563216347920"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for fields-optionally-enclosed-by"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--fields-optionally-enclosed-by</code></td>
</tr><tr><th>型</th>
<td>文字列</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal"></code></td>
</tr></tbody></table></div><p>
            このオプションに渡された文字列は、文字データが含まれているカラム値
            (<code class="literal">CHAR</code>、<code class="literal">VARCHAR</code>、<code class="literal">BINARY</code>、<code class="literal">TEXT</code>、<code class="literal">ENUM</code>
            など) を囲むために使用されます。
          </p></li><li class="listitem"><p><a name="option_ndb_restore_fields-terminated-by"></a>
            <code class="option">--fields-terminated-by</code>=<em class="replaceable"><code>char</code></em>
          </p><a class="indexterm" name="idm45563216329616"></a><a class="indexterm" name="idm45563216327536"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for fields-terminated-by"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--fields-terminated-by=char</code></td>
</tr><tr><th>型</th>
<td>文字列</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">\t (tab)</code></td>
</tr></tbody></table></div><p>
            このオプションに渡された文字列は、カラム値を区切るために使用されます。
            デフォルト値はタブ文字 (<code class="literal">\t</code>)
            です。
          </p></li><li class="listitem"><p><a name="option_ndb_restore_hex"></a>
            <code class="option">--hex</code>
          </p><a class="indexterm" name="idm45563216313200"></a><a class="indexterm" name="idm45563216311216"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for hex"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--hex</code></td>
</tr></tbody></table></div><p>
            このオプションを使用すると、すべてのバイナリ値は
            16 進形式で出力されます。
          </p></li><li class="listitem"><p><a name="option_ndb_restore_ignore-extended-pk-updates"></a>
            <code class="option">--ignore-extended-pk-updates</code>
          </p><a class="indexterm" name="idm45563216302064"></a><a class="indexterm" name="idm45563216299984"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ignore-extended-pk-updates"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--ignore-extended-pk-updates[=0|1]</code></td>
</tr><tr><th>導入</th>
<td>8.0.21-ndb-8.0.21</td>
</tr><tr><th>型</th>
<td>Integer</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">0</code></td>
</tr><tr><th>最小値</th>
<td><code class="literal">0</code></td>
</tr><tr><th>最大値</th>
<td><code class="literal">1</code></td>
</tr></tbody></table></div><p>
            <code class="option">--allow-pk-changes</code>
            を使用する場合、バックアップの実行中にテーブルの主キーの一部になるカラムは更新しないでください。そのようなカラムは、値を含む行が削除されるまで、時間値から同じ値が挿入されたままにしておく必要があります。
            <span class="command"><strong>ndb_restore</strong></span>
            がバックアップのリストア時にこれらのカラムの更新を検出すると、リストアは失敗します。
            一部のアプリケーションでは、行の更新時にすべてのカラムの値が設定される場合があるため、一部のカラム値が変更されていない場合でも、実際には変更されていないカラムの更新に表示されるログイベントがバックアップに含まれることがあります。
            このような場合は、<code class="option">--ignore-extended-pk-updates</code>
            を <code class="literal">1</code>
            に設定して、<span class="command"><strong>ndb_restore</strong></span>
            でこのような更新を強制的に無視できます。
          </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">重要</div><p>
              これらの更新を無視する場合、ユーザーは主キーの一部になるカラムの値に対する更新がないことを確認する必要があります。
            </p></div><p>
            詳細は、<code class="option">--allow-pk-changes</code>
            の説明を参照してください。
          </p></li><li class="listitem"><p><a name="option_ndb_restore_include-databases"></a>
            <code class="option">--include-databases</code>=<em class="replaceable"><code>db-list</code></em>
          </p><a class="indexterm" name="idm45563216272864"></a><a class="indexterm" name="idm45563216270800"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for include-databases"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--include-databases=db-list</code></td>
</tr><tr><th>型</th>
<td>文字列</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal"></code></td>
</tr></tbody></table></div><p>
            リストアする 1
            つ以上のデータベースのカンマ区切りリスト。
            多くの場合、<code class="option">--include-tables</code>
            とともに使用されます。詳細および例は、そのオプションの説明を参照してください。
          </p></li><li class="listitem"><p><a name="option_ndb_restore_include-stored-grants"></a>
            <code class="option">--include-stored-grants</code>
          </p><a class="indexterm" name="idm45563216256432"></a><a class="indexterm" name="idm45563216254352"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for include-stored-grants"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--include-stored-grants</code></td>
</tr><tr><th>導入</th>
<td>8.0.19-ndb-8.0.19</td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table></div><p>
            NDB 8.0.19 以降では、<span class="command"><strong>ndb_restore</strong></span>
            はデフォルトで、<code class="literal">ndb_sql_metadata</code>
            テーブルへの共有ユーザーおよび権限付与
            (<a class="xref" href="mysql-cluster.html#mysql-cluster-privilege-distribution" title="23.5.12 NDB_STORED_USER での分散 MySQL 権限">セクション23.5.12「NDB_STORED_USER での分散 MySQL 権限」</a>
            を参照) を復元しません。
            このオプションを指定すると、これが実行されます。
          </p></li><li class="listitem"><p><a name="option_ndb_restore_include-tables"></a>
            <code class="option">--include-tables</code>=<em class="replaceable"><code>table-list</code></em>
          </p><a class="indexterm" name="idm45563216236272"></a><a class="indexterm" name="idm45563216234208"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for include-tables"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--include-tables=table-list</code></td>
</tr><tr><th>型</th>
<td>文字列</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal"></code></td>
</tr></tbody></table></div><p>
            リストアするテーブルのカンマ区切りリスト。各テーブル参照にはデータベース名を含める必要があります。
          </p><p>
            <code class="option">--include-databases</code> または
            <code class="option">--include-tables</code>
            を使用すると、それらのオプションによって指定されたデータベースまたはテーブルのみがリストアされます。ほかのすべてのデータベースおよびテーブルは
            <span class="command"><strong>ndb_restore</strong></span>
            によって除外され、リストアされません。
          </p><p>
            次のテーブルに、<code class="option">--include-*</code>
            オプションを使用した
            <span class="command"><strong>ndb_restore</strong></span>
            のいくつかの呼び出し
            (わかりやすくするためにほかのオプションが省略されている可能性があります)
            と、NDB Cluster
            バックアップからの復元に対するそれらの影響を示します:
          </p><div class="table"><a name="idm45563216217440"></a><p class="title"><b>表 23.42 --include-* オプションを使用した ndb_restore のいくつかの呼び出しと、NDB Cluster バックアップからの復元へのそれらの影響。</b></p><div class="table-contents"><table><col style="width: 50%"><col style="width: 50%"><thead><tr>
                <th>オプション</th>
                <th>結果</th>
              </tr></thead><tbody><tr>
                <td><code class="option">--include-databases=db1</code></td>
                <td>データベース <code class="literal">db1</code>
                  内のテーブルのみがリストアされます。ほかのすべてのデータベース内のすべてのテーブルは無視されます</td>
              </tr><tr>
                <td><code class="option">--include-databases=db1,db2</code> (または
                  <code class="option">--include-databases=db1</code>
                  <code class="option">--include-databases=db2</code>)</td>
                <td>データベース <code class="literal">db1</code> および
                  <code class="literal">db2</code>
                  内のテーブルのみがリストアされます。ほかのすべてのデータベース内のすべてのテーブルは無視されます</td>
              </tr><tr>
                <td><code class="option">--include-tables=db1.t1</code></td>
                <td>データベース <code class="literal">db1</code> 内のテーブル
                  <code class="literal">t1</code>
                  のみがリストアされます。<code class="literal">db1</code>
                  またはその他のデータベース内のほかのテーブルはリストアされません</td>
              </tr><tr>
                <td><code class="option">--include-tables=db1.t2,db2.t1</code> (または
                  <code class="option">--include-tables=db1.t2</code>
                  <code class="option">--include-tables=db2.t1</code>)</td>
                <td>データベース <code class="literal">db1</code> 内のテーブル
                  <code class="literal">t2</code> およびデータベース
                  <code class="literal">db2</code> 内のテーブル
                  <code class="literal">t1</code>
                  のみがリストアされます。<code class="literal">db1</code>、<code class="literal">db2</code>、またはその他のデータベース内のほかのテーブルはリストアされません</td>
              </tr></tbody></table></div></div><br class="table-break"><p>
            これらの 2
            つのオプションは一緒に使用することもできます。
            たとえば、次の場合は、データベース
            <code class="literal">db1</code> および <code class="literal">db2</code>
            内のすべてのテーブルに加えて、データベース
            <code class="literal">db3</code> 内のテーブル
            <code class="literal">t1</code> および <code class="literal">t2</code>
            がリストアされます
            (ほかのデータベースまたはテーブルはリストアされません)。
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>ndb_restore [...] --include-databases=db1,db2 --include-tables=db3.t1,db3.t2</code></strong>
</pre><p>
            (この例でも、必要となる可能性があるほかのオプションを省略しています。)
          </p><p>
            次に示す構文を使用して、<code class="option">--include-*</code>
            (または <code class="option">--exclude-*</code>)
            オプションなしで、選択したデータベースまたは選択したテーブルのみを単一のデータベースからリストアすることもできます:
          </p><pre class="programlisting">ndb_restore <em class="replaceable"><code>other_options</code></em> <em class="replaceable"><code>db_name</code></em>,[<em class="replaceable"><code>db_name</code></em>[,...] | <em class="replaceable"><code>tbl_name</code></em>[,<em class="replaceable"><code>tbl_name</code></em>][,...]]
</pre><p>
            言い換えると、次のいずれかをリストアすることを指定できます。
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                1
                つ以上のデータベースのすべてのテーブル
              </p></li><li class="listitem"><p>
                単一データベースの 1 つ以上のテーブル
              </p></li></ul></div></li><li class="listitem"><p><a name="option_ndb_restore_lines-terminated-by"></a>
            <code class="option">--lines-terminated-by</code>=<em class="replaceable"><code>char</code></em>
          </p><a class="indexterm" name="idm45563216175920"></a><a class="indexterm" name="idm45563216173856"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for lines-terminated-by"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--lines-terminated-by=char</code></td>
</tr><tr><th>型</th>
<td>文字列</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">\n (linebreak)</code></td>
</tr></tbody></table></div><p>
            出力の各行を終了するために使用する文字列を指定します。
            デフォルトは改行文字 (<code class="literal">\n</code>)
            です。
          </p></li><li class="listitem"><p><a name="option_ndb_restore_lossy-conversions"></a>
            <code class="option">--lossy-conversions</code>, <code class="option">-L</code>
          </p><a class="indexterm" name="idm45563216159216"></a><a class="indexterm" name="idm45563216157152"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for lossy-conversions"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--lossy-conversions</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">FALSE</code> (オプションを使用しない場合)</td>
</tr></tbody></table></div><p>
            このオプションは、<code class="option">--promote-attributes</code>
            オプションを補完することを意図しています。
            <code class="option">--lossy-conversions</code>
            を使用するときは、バックアップからデータをリストアするときにカラム値の不可逆変換
            (型降格または符号の変更) が許可されます。
            いくつかの例外はありますが、降格を制御するルールは
            MySQL
            レプリケーションの場合と同じです。属性降格によって現在サポートされる型変換については、<a class="xref" href="replication.html#replication-features-different-data-types" title="17.5.1.9.2 データ型が異なるカラムのレプリケーション">セクション17.5.1.9.2「データ型が異なるカラムのレプリケーション」</a>を参照してください。
          </p><p>
            <span class="command"><strong>ndb_restore</strong></span>
            は、不可逆変換中に実行されるデータの切り捨てを属性およびカラムごとに報告します。
          </p></li><li class="listitem"><p><a name="option_ndb_restore_no-binlog"></a>
            <code class="option">--no-binlog</code>
          </p><a class="indexterm" name="idm45563216139920"></a><a class="indexterm" name="idm45563216137936"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for no-binlog"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--no-binlog</code></td>
</tr></tbody></table></div><p>
            このオプションは、接続されている SQL
            ノードが <span class="command"><strong>ndb_restore</strong></span>
            によってリストアされるデータをバイナリログに書き込むことを阻止します。
          </p></li><li class="listitem"><p><a name="option_ndb_restore_no-restore-disk-objects"></a>
            <code class="option">--no-restore-disk-objects</code>,
            <code class="option">-d</code>
          </p><a class="indexterm" name="idm45563216127616"></a><a class="indexterm" name="idm45563216125536"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for no-restore-disk-objects"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--no-restore-disk-objects</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table></div><p>
            このオプションは、<span class="command"><strong>ndb_restore</strong></span>
            による NDB Cluster
            ディスクデータオブジェクト
            (テーブルスペースやログファイルグループなど)
            の復元を停止します。これらの詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-disk-data" title="23.5.10 NDB Cluster ディスクデータテーブル">セクション23.5.10「NDB Cluster ディスクデータテーブル」</a>
            を参照してください。
          </p></li><li class="listitem"><p><a name="option_ndb_restore_no-upgrade"></a>
            <code class="option">--no-upgrade</code>, <code class="option">-u</code>
          </p><a class="indexterm" name="idm45563216110048"></a><a class="indexterm" name="idm45563216108064"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for no-upgrade"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--no-upgrade</code></td>
</tr></tbody></table></div><p>
            <span class="command"><strong>ndb_restore</strong></span>
            を使用してバックアップをリストアする場合、古い固定長形式を使用して作成された
            <code class="literal">VARCHAR</code>
            カラムは、現在採用されている可変幅形式を使用してサイズ変更および再作成されます。
            この動作は、<code class="option">--no-upgrade</code>
            を指定することでオーバーライドできます。
          </p></li><li class="listitem"><p><a name="option_ndb_restore_ndb-nodegroup-map"></a>
            <code class="option">--ndb-nodegroup-map</code>=<em class="replaceable"><code>map</code></em>,
            <code class="option">-z</code>
          </p><a class="indexterm" name="idm45563216095728"></a><a class="indexterm" name="idm45563216093664"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndb-nodegroup-map"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--ndb-nodegroup-map=map</code></td>
</tr></tbody></table></div><p>
            このオプションは、あるノードグループから取得されたバックアップを別のノードグループにリストアするために使用できます。
            引数は、<code class="literal"><em class="replaceable"><code>source_node_group</code></em>,
            <em class="replaceable"><code>target_node_group</code></em></code>
            という形式のリストです。
          </p></li><li class="listitem"><p><a name="option_ndb_restore_nodeid"></a>
            <code class="option">--nodeid</code>=<em class="replaceable"><code>#</code></em>,
            <code class="option">-n</code>
          </p><a class="indexterm" name="idm45563216082240"></a><a class="indexterm" name="idm45563216080256"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for nodeid"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--nodeid=#</code></td>
</tr><tr><th>型</th>
<td>数値</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">none</code></td>
</tr></tbody></table></div><p>
            バックアップが作成されたデータノードのノード
            ID を指定します。
          </p><p>
            バックアップが作成されたものとは異なる数のデータノードを持つクラスタにリストアする場合、この情報は、特定のノードにリストアされるファイルの正しいセットを識別するのに役立ちます。
            (このような場合、通常は複数のファイルを単一のデータノードに復元する必要があります。)
            追加情報および例については、<a class="xref" href="mysql-cluster.html#ndb-restore-different-number-nodes" title="23.4.23.2 異なる数のデータノードへの復元">セクション23.4.23.2「異なる数のデータノードへの復元」</a>を参照してください。
          </p><p>
            NDB 8.0.15
            以降では、このオプションは必須です。
          </p></li><li class="listitem"><p><a name="option_ndb_restore_num-slices"></a>
            <code class="option">--num-slices</code>=<em class="replaceable"><code>#</code></em>
          </p><a class="indexterm" name="idm45563216064288"></a><a class="indexterm" name="idm45563216062304"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for num-slices"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--num-slices=#</code></td>
</tr><tr><th>導入</th>
<td>8.0.20-ndb-8.0.20</td>
</tr><tr><th>型</th>
<td>Integer</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">1</code></td>
</tr><tr><th>最小値</th>
<td><code class="literal">1</code></td>
</tr><tr><th>最大値</th>
<td><code class="literal">1024</code></td>
</tr></tbody></table></div><p>
            スライスごとにバックアップを復元する場合、このオプションはバックアップを分割するスライスの数を設定します。
            これにより、<span class="command"><strong>ndb_restore</strong></span>
            の複数のインスタンスで非結合サブセットをパラレルにリストアできるため、リストア操作の実行に必要な時間が短縮される可能性があります。
          </p><p>
            <span class="emphasis"><em>スライス</em></span>は、特定のバックアップ内のデータのサブセットです。つまり、<code class="option">--slice-id</code>
            オプションを使用して指定された同じスライス
            ID を持つフラグメントのセットです。 2
            つのオプションは常に一緒に使用する必要があり、<code class="option">--slice-id</code>
            によって設定される値は常にスライスの数より小さくする必要があります。
          </p><p>
            <span class="command"><strong>ndb_restore</strong></span>
            はフラグメントを検出し、各フラグメントにフラグメントカウンタを割り当てます。
            スライスごとに復元する場合、スライス ID
            は各フラグメントに割り当てられます。このスライス
            ID は、スライスの数より 0 から 1
            の範囲内にあります。
            <code class="literal">BLOB</code>
            テーブルではないテーブルの場合、特定のフラグメントが属するスライスは、次に示す式を使用して決定されます:
          </p><pre class="programlisting">[<em class="replaceable"><code>slice_ID</code></em>] = [<em class="replaceable"><code>fragment_counter</code></em>] % [<em class="replaceable"><code>number_of_slices</code></em>]
</pre><p>
            <code class="literal">BLOB</code>
            テーブルの場合、フラグメントカウンタは使用されず、かわりにフラグメント番号が
            <code class="literal">BLOB</code>
            テーブルのメインテーブルの ID
            とともに使用されます (<code class="literal">NDB</code>
            では <em class="replaceable"><code>BLOB</code></em>
            値が内部的に別のテーブルに格納されることに注意してください)。
            この場合、特定のフラグメントのスライス ID
            は次のように計算されます:
          </p><pre class="programlisting">[<em class="replaceable"><code>slice_ID</code></em>] =
([<em class="replaceable"><code>main_table_ID</code></em>] + [<em class="replaceable"><code>fragment_ID</code></em>]) % [<em class="replaceable"><code>number_of_slices</code></em>]
</pre><p>
            したがって、<em class="replaceable"><code>N</code></em>
            スライスによるリストアとは、<span class="command"><strong>ndb_restore</strong></span>
            の <em class="replaceable"><code>N</code></em>
            インスタンスを実行し、すべて
            <code class="option">--num-slices= <em class="replaceable"><code>N</code></em></code>
            (およびその他の必要なオプション)
            を使用し、それぞれに
            <code class="option">--slice-id=1</code>,
            <code class="option">--slice-id=2</code>, <code class="option">--slice-id=3</code>
            を使用して <code class="option">slice-id=
            <em class="replaceable"><code>N</code></em>-1</code>
            を介して実行することです。
          </p><p><b>例. </b>
              各データノードのノードファイルシステム上のデフォルトディレクトリ<code class="filename">/var/lib/mysql-cluster/BACKUP/BACKUP-3</code>
              にある <code class="filename">BACKUP-1</code>
              という名前のバックアップを、ノード ID
              1、2、3、および 4 を持つ 4
              つのデータノードを持つクラスタに復元するとします。
              5
              つのスライスを使用してこの操作を実行するには、次のリストに示す一連のコマンドを実行します:
            </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
                次に示すように、<span class="command"><strong>ndb_restore</strong></span>
                を使用してクラスタメタデータをリストアします:
              </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>ndb_restore -b 1 -n 1 -m --disable-indexes --backup-path=/home/ndbuser/backups</code></strong>
</pre></li><li class="listitem"><p>
                次に示すように、<span class="command"><strong>ndb_restore</strong></span>
                を起動するデータノードにクラスタデータを復元します:
              </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>ndb_restore -b 1 -n 1 -r --num-slices=5 --slice-id=0 --backup-path=/var/lib/mysql-cluster/BACKUP/BACKUP-1</code></strong>
shell&gt; <strong class="userinput"><code>ndb_restore -b 1 -n 1 -r --num-slices=5 --slice-id=1 --backup-path=/var/lib/mysql-cluster/BACKUP/BACKUP-1</code></strong>
shell&gt; <strong class="userinput"><code>ndb_restore -b 1 -n 1 -r --num-slices=5 --slice-id=2 --backup-path=/var/lib/mysql-cluster/BACKUP/BACKUP-1</code></strong>
shell&gt; <strong class="userinput"><code>ndb_restore -b 1 -n 1 -r --num-slices=5 --slice-id=3 --backup-path=/var/lib/mysql-cluster/BACKUP/BACKUP-1</code></strong>
shell&gt; <strong class="userinput"><code>ndb_restore -b 1 -n 1 -r --num-slices=5 --slice-id=4 --backup-path=/var/lib/mysql-cluster/BACKUP/BACKUP-1</code></strong>

shell&gt; <strong class="userinput"><code>ndb_restore -b 1 -n 2 -r --num-slices=5 --slice-id=0 --backup-path=/var/lib/mysql-cluster/BACKUP/BACKUP-1</code></strong>
shell&gt; <strong class="userinput"><code>ndb_restore -b 1 -n 2 -r --num-slices=5 --slice-id=1 --backup-path=/var/lib/mysql-cluster/BACKUP/BACKUP-1</code></strong>
shell&gt; <strong class="userinput"><code>ndb_restore -b 1 -n 2 -r --num-slices=5 --slice-id=2 --backup-path=/var/lib/mysql-cluster/BACKUP/BACKUP-1</code></strong>
shell&gt; <strong class="userinput"><code>ndb_restore -b 1 -n 2 -r --num-slices=5 --slice-id=3 --backup-path=/var/lib/mysql-cluster/BACKUP/BACKUP-1</code></strong>
shell&gt; <strong class="userinput"><code>ndb_restore -b 1 -n 2 -r --num-slices=5 --slice-id=4 --backup-path=/var/lib/mysql-cluster/BACKUP/BACKUP-1</code></strong>

shell&gt; <strong class="userinput"><code>ndb_restore -b 1 -n 3 -r --num-slices=5 --slice-id=0 --backup-path=/var/lib/mysql-cluster/BACKUP/BACKUP-1</code></strong>
shell&gt; <strong class="userinput"><code>ndb_restore -b 1 -n 3 -r --num-slices=5 --slice-id=1 --backup-path=/var/lib/mysql-cluster/BACKUP/BACKUP-1</code></strong>
shell&gt; <strong class="userinput"><code>ndb_restore -b 1 -n 3 -r --num-slices=5 --slice-id=2 --backup-path=/var/lib/mysql-cluster/BACKUP/BACKUP-1</code></strong>
shell&gt; <strong class="userinput"><code>ndb_restore -b 1 -n 3 -r --num-slices=5 --slice-id=3 --backup-path=/var/lib/mysql-cluster/BACKUP/BACKUP-1</code></strong>
shell&gt; <strong class="userinput"><code>ndb_restore -b 1 -n 3 -r --num-slices=5 --slice-id=4 --backup-path=/var/lib/mysql-cluster/BACKUP/BACKUP-1</code></strong>

shell&gt; <strong class="userinput"><code>ndb_restore -b 1 -n 4 -r --num-slices=5 --slice-id=0 --backup-path=/var/lib/mysql-cluster/BACKUP/BACKUP-1</code></strong>
shell&gt; <strong class="userinput"><code>ndb_restore -b 1 -n 4 -r --num-slices=5 --slice-id=1 --backup-path=/var/lib/mysql-cluster/BACKUP/BACKUP-1</code></strong>
shell&gt; <strong class="userinput"><code>ndb_restore -b 1 -n 4 -r --num-slices=5 --slice-id=2 --backup-path=/var/lib/mysql-cluster/BACKUP/BACKUP-1</code></strong>
shell&gt; <strong class="userinput"><code>ndb_restore -b 1 -n 4 -r --num-slices=5 --slice-id=3 --backup-path=/var/lib/mysql-cluster/BACKUP/BACKUP-1</code></strong>
shell&gt; <strong class="userinput"><code>ndb_restore -b 1 -n 4 -r --num-slices=5 --slice-id=4 --backup-path=/var/lib/mysql-cluster/BACKUP/BACKUP-1</code></strong>
</pre><p>
                クラスタへの接続に十分なスロットがある場合は、このステップで示したすべてのコマンドをパラレルで実行できます
                (<code class="option">--backup-path</code>
                オプションの説明を参照)。
              </p></li><li class="listitem"><p>
                次に示すように、通常どおりにインデックスをリストアします:
              </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>ndb_restore -b 1 -n 1 --rebuild-indexes --backup-path=/var/lib/mysql-cluster/BACKUP/BACKUP-1</code></strong>
</pre></li><li class="listitem"><p>
                最後に、次に示すコマンドを使用してエポックをリストアします:
              </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>ndb_restore -b 1 -n 1 --restore-epoch --backup-path=/var/lib/mysql-cluster/BACKUP/BACKUP-1</code></strong>
</pre></li></ol></div><p>
            スライスは、クラスタデータのリストアにのみ使用する必要があります。メタデータ、インデックスまたはエポック情報のリストア時に
            <code class="option">--num-slices</code> または
            <code class="option">--slice-id</code>
            を使用する必要はありません。
            これらの復元を制御する
            <span class="command"><strong>ndb_restore</strong></span>
            オプションとともにこれらのオプションの一方または両方が使用されている場合、プログラムはそれらを無視します。
          </p><p>
            <code class="option">--parallelism</code>
            オプションを使用したリストア速度への影響は、<span class="command"><strong>ndb_restore</strong></span>
            の複数のインスタンスを使用したスライスまたはパラレルリストアによって生成されるものとは無関係です
            (<code class="option">--parallelism</code> は
            <span class="emphasis"><em>single</em></span> <span class="command"><strong>ndb_restore</strong></span>
            スレッドによって実行されるパラレルトランザクションの数を指定します)。ただし、これらのいずれかまたは両方とともに使用できます。
            <code class="option">--parallelism</code>
            を増やすと、<span class="command"><strong>ndb_restore</strong></span>
            のクラスタに大きな負荷がかかることに注意してください。システムでこれを処理できる場合は、リストアをさらに迅速に完了する必要があります。
          </p><p>
            <code class="option">--num-slices</code> の値は、CPU または CPU
            コアの数、RAM
            の量などのハードウェアに関連する値に直接依存することはなく、LDM
            の数にも依存しません。
          </p><p>
            同じリストアの一部として、異なるデータノードでこのオプションに異なる値を使用することもできます。そうしないと、それ自体で悪影響が生じることはありません。
          </p></li><li class="listitem"><p><a name="option_ndb_restore_parallelism"></a>
            <code class="option">--parallelism</code>=<em class="replaceable"><code>#</code></em>,
            <code class="option">-p</code>
          </p><a class="indexterm" name="idm45563215978064"></a><a class="indexterm" name="idm45563215976080"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for parallelism"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--parallelism=#</code></td>
</tr><tr><th>型</th>
<td>数値</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">128</code></td>
</tr><tr><th>最小値</th>
<td><code class="literal">1</code></td>
</tr><tr><th>最大値</th>
<td><code class="literal">1024</code></td>
</tr></tbody></table></div><p>
            <span class="command"><strong>ndb_restore</strong></span>
            では、単一行トランザクションを使用して多数の行を同時に適用します。
            このパラメータは、<span class="command"><strong>ndb_restore</strong></span>
            のインスタンスが使用しようとするパラレルトランザクション
            (同時行) の数を決定します。
            デフォルトでは、これは 128
            であり、最小値は 1、最大値は 1024 です。
          </p><p>
            挿入を実行する作業は、関係するデータノード内のスレッド間で並列化されます。
            このメカニズムは、<code class="filename">.Data</code>
            ファイル
            (データのファジースナップショット)
            からバルクデータをリストアするために使用されます。インデックスの作成または再構築には使用されません。
            変更ログはシリアルに適用されます。インデックスの削除および構築は
            DDL 操作であり、個別に処理されます。
            リストアのクライアント側にスレッドレベルの並列性はありません。
          </p></li><li class="listitem"><p><a name="option_ndb_restore_preserve-trailing-spaces"></a>
            <code class="option">--preserve-trailing-spaces</code>,
            <code class="option">-P</code>
          </p><a class="indexterm" name="idm45563215953664"></a><a class="indexterm" name="idm45563215951584"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for preserve-trailing-spaces"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--preserve-trailing-spaces</code></td>
</tr></tbody></table></div><p>
            固定幅文字データ型を同等の可変幅に昇格させるとき、つまり
            <code class="literal">CHAR</code> カラム値を
            <code class="literal">VARCHAR</code>
            に昇格させるとき、または
            <code class="literal">BINARY</code> カラム値を
            <code class="literal">VARBINARY</code>
            に昇格させるときに、末尾の空白が保持されるようにします。
            それ以外の場合は、新しいカラムに挿入されるときに、末尾の空白はそのようなカラム値から削除されます。
          </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
              <code class="literal">CHAR</code> カラムを
              <code class="literal">VARCHAR</code> に、および
              <code class="literal">BINARY</code> カラムを
              <code class="literal">VARBINARY</code>
              に昇格することはできますが、<code class="literal">VARCHAR</code>
              カラムを <code class="literal">CHAR</code>
              に、または <code class="literal">VARBINARY</code>
              カラムを <code class="literal">BINARY</code>
              に昇格することはできません。
            </p></div></li><li class="listitem"><p><a name="option_ndb_restore_print"></a>
            <code class="option">--print</code>
          </p><a class="indexterm" name="idm45563215930352"></a><a class="indexterm" name="idm45563215928368"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for print"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--print</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table></div><p>
            <span class="command"><strong>ndb_restore</strong></span>
            がすべてのデータ、メタデータ、およびログを
            <code class="literal">stdout</code> に出力します。
            <code class="option">--print-data</code>、<code class="option">--print-meta</code>
            および <code class="option">--print-log</code>
            オプションを一緒に使用することと同等です。
          </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
              <code class="option">--print</code> または
              <code class="option">--print_*</code>
              オプションのいずれかを使用した場合は、仮実行をするときに有効になります。
              これらのオプションのいずれかまたは複数を含めると、すべての出力が
              <code class="literal">stdout</code>
              にリダイレクトされます。このような場合、<span class="command"><strong>ndb_restore</strong></span>
              は NDB Cluster
              にデータまたはメタデータを復元しようとしません。
            </p></div></li><li class="listitem"><p><a name="option_ndb_restore_print-data"></a>
            <code class="option">--print-data</code>
          </p><a class="indexterm" name="idm45563215907872"></a><a class="indexterm" name="idm45563215905888"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for print-data"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--print-data</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table></div><p>
            <span class="command"><strong>ndb_restore</strong></span> がその出力を
            <code class="literal">stdout</code>
            に送信するようにします。 多くの場合、1
            つ以上の <code class="option">--tab</code>,
            <code class="option">--fields-enclosed-by</code>,
            <code class="option">--fields-optionally-enclosed-by</code>,
            <code class="option">--fields-terminated-by</code>,
            <code class="option">--hex</code> および
            <code class="option">--append</code>
            とともに使用されます。
          </p><p>
            <code class="literal">TEXT</code> および
            <code class="literal">BLOB</code>
            カラム値は常に切り捨てられます。
            このような値は、出力の最初の 256
            バイトに切り捨てられます。
            現在、<code class="option">--print-data</code>
            を使用している場合はオーバーライドできません。
          </p></li><li class="listitem"><p><a name="option_ndb_restore_print-log"></a>
            <code class="option">--print-log</code>
          </p><a class="indexterm" name="idm45563215884192"></a><a class="indexterm" name="idm45563215882208"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for print-log"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--print-log</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table></div><p>
            <span class="command"><strong>ndb_restore</strong></span> がログを
            <code class="literal">stdout</code>
            に出力するようにします。
          </p></li><li class="listitem"><p><a name="option_ndb_restore_print-meta"></a>
            <code class="option">--print-meta</code>
          </p><a class="indexterm" name="idm45563215867632"></a><a class="indexterm" name="idm45563215865648"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for print-meta"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--print-meta</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table></div><p>
            すべてのメタデータを <code class="literal">stdout</code>
            に出力します。
          </p></li><li class="listitem"><p><a name="option_ndb_restore_print-sql-log"></a>
            <code class="option">print-sql-log</code>
          </p><a class="indexterm" name="idm45563215851616"></a><a class="indexterm" name="idm45563215849552"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for print-sql-log"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--print-sql-log</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table></div><p>
            SQL ステートメントを <code class="literal">stdout</code>
            に記録します。
            オプションを使用して有効にします。通常、この動作は無効になっています。
            このオプションは、リストアされるすべてのテーブルに主キーが明示的に定義されているかどうかをログに記録する前にチェックします。<code class="literal">NDB</code>
            によって実装された非表示の主キーのみを持つテーブルに対するクエリーは、有効な
            SQL に変換できません。
          </p><p>
            このオプションは、<code class="literal">BLOB</code>
            カラムを含むテーブルでは機能しません。
          </p></li><li class="listitem"><p><a name="option_ndb_restore_progress-frequency"></a>
            <code class="option">--progress-frequency</code>=<em class="replaceable"><code>N</code></em>
          </p><a class="indexterm" name="idm45563215832016"></a><a class="indexterm" name="idm45563215829952"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for progress-frequency"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--progress-frequency=#</code></td>
</tr><tr><th>型</th>
<td>数値</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">0</code></td>
</tr><tr><th>最小値</th>
<td><code class="literal">0</code></td>
</tr><tr><th>最大値</th>
<td><code class="literal">65535</code></td>
</tr></tbody></table></div><p>
            バックアップの進行中に、ステータスレポートを
            <em class="replaceable"><code>N</code></em> 秒ごとに出力します。0
            (デフォルト)
            を指定すると、ステータスレポートは出力されません。
            最大値は 65535 です。
          </p></li><li class="listitem"><p><a name="option_ndb_restore_promote-attributes"></a>
            <code class="option">--promote-attributes</code>, <code class="option">-A</code>
          </p><a class="indexterm" name="idm45563215810592"></a><a class="indexterm" name="idm45563215808528"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for promote-attributes"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--promote-attributes</code></td>
</tr></tbody></table></div><p>
            <span class="command"><strong>ndb_restore</strong></span> では、MySQL
            レプリケーションでサポートされているのとほぼ同じ方法で限定された<span class="firstterm">属性プロモーション</span>がサポートされます。つまり、特定のタイプのカラムからバックアップされたデータは、通常、<span class="quote">「<span class="quote">「大規模、類似」</span>」</span>タイプを使用してカラムにリストアできます。
            たとえば、<code class="literal">CHAR(20)</code>
            カラムのデータは
            <code class="literal">VARCHAR(20)</code>、<code class="literal">VARCHAR(30)</code>、または
            <code class="literal">CHAR(30)</code>
            として宣言されているカラムにリストアでき、<code class="literal">MEDIUMINT</code>
            カラムのデータは、<code class="literal">INT</code>
            または <code class="literal">BIGINT</code>
            型のカラムにリストアできます。
            属性昇格によって現在サポートされる型変換の表については、<a class="xref" href="replication.html#replication-features-different-data-types" title="17.5.1.9.2 データ型が異なるカラムのレプリケーション">セクション17.5.1.9.2「データ型が異なるカラムのレプリケーション」</a>を参照してください。
          </p><p>
            <span class="command"><strong>ndb_restore</strong></span>
            による属性昇格は、次のように明示的に有効にする必要があります。
          </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
                バックアップをリストアするテーブルを準備します。<span class="command"><strong>ndb_restore</strong></span>
                を使用してオリジナルと異なる定義でテーブルを再作成することはできません。これは、テーブルを手動で作成するか、またはテーブルメタデータをリストアしたあとかつデータをリストアする前に昇格するカラムを
                <code class="literal">ALTER TABLE</code>
                を使用して変更する必要があることを意味します。
              </p></li><li class="listitem"><p>
                テーブルデータをリストアするときに、<code class="option">--promote-attributes</code>
                オプション (短縮形: <code class="option">-A</code>)
                を指定して<span class="command"><strong>ndb_restore</strong></span>
                を呼び出します。
                このオプションを使用しない場合、属性昇格は行われず、リストア操作がエラーで失敗します。
              </p></li></ol></div><p>
            文字データ型と <code class="literal">TEXT</code> または
            <code class="literal">BLOB</code>
            の間で変換する場合は、文字型
            (<code class="literal">CHAR</code> および
            <code class="literal">VARCHAR</code>) とバイナリ型
            (<code class="literal">BINARY</code> および
            <code class="literal">VARBINARY</code>)
            の間の変換のみを同時に実行できます。
            たとえば、同じ <span class="command"><strong>ndb_restore</strong></span>
            呼び出しで、<code class="literal">VARCHAR</code> カラムを
            <code class="literal">TEXT</code>
            に昇格するときに、<code class="literal">INT</code>
            カラムを <code class="literal">BIGINT</code>
            に昇格できません。
          </p><p>
            異なる文字セットを使用した
            <code class="literal">TEXT</code>
            カラム間の変換はサポートされておらず、明示的には許可されません。
          </p><p>
            <span class="command"><strong>ndb_restore</strong></span>
            を使用して文字型またはバイナリ型から
            <code class="literal">TEXT</code> または <code class="literal">BLOB</code>
            への変換を実行するときに、<code class="literal"><em class="replaceable"><code>table_name</code></em>$ST<em class="replaceable"><code>node_id</code></em></code>
            という名前の 1
            つ以上のステージングテーブルが作成および使用されることに気付くことがあります。
            これらのテーブルはその後必要ではなくなるため、通常はリストアが成功したあとに
            <span class="command"><strong>ndb_restore</strong></span>
            によって削除されます。
          </p></li><li class="listitem"><p><a name="option_ndb_restore_rebuild-indexes"></a>
            <code class="option">--rebuild-indexes</code>
          </p><a class="indexterm" name="idm45563215766288"></a><a class="indexterm" name="idm45563215764224"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for rebuild-indexes"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--rebuild-indexes</code></td>
</tr></tbody></table></div><p>
            ネイティブ <code class="literal">NDB</code>
            バックアップのリストア中に、順序付けられたインデックスのマルチスレッド再構築を有効にします。
            このオプションを使用して
            <span class="command"><strong>ndb_restore</strong></span>
            によって順序付けられたインデックスを構築するために使用されるスレッドの数は、<code class="literal">BuildIndexThreads</code>
            データノード構成パラメータと LDM
            の数によって制御されます。
          </p><a class="indexterm" name="idm45563215753520"></a><p>
            このオプションを使用する必要があるのは、<span class="command"><strong>ndb_restore</strong></span>
            の最初の実行の場合のみです。これにより、以降のノードをリストアするときに
            <code class="option">--rebuild-indexes</code>
            をふたたび使用しなくても、すべての順序付けられたインデックスが再構築されます。
            このオプションはデータベースに新しい行を挿入する前に使用してください。そうしないと、インデックスを再構築しようとするときに、挿入される行があとで一意制約違反になることがあります。
          </p><p>
            順序付けされたインデックスの構築は、デフォルトで
            LDM の数で並列化されます。
            ノードおよびシステムの再起動中に実行されるオフラインインデックス構築は、<code class="literal">BuildIndexThreads</code>
            データノード構成パラメータを使用して高速化できます。このパラメータは、オンラインで実行される
            <span class="command"><strong>ndb_restore</strong></span>
            によるインデックスの削除および再構築には影響しません。
          </p><p>
            一意インデックスの再構築では、Redo
            ロギングおよびローカルチェックポイント処理のディスク書き込み帯域幅が使用されます。
            この帯域幅が十分ではない場合、Redo
            バッファーオーバーロードエラーまたはログオーバーロードエラーになることがあります。
            そのような場合は、<span class="command"><strong>ndb_restore</strong></span>
            <code class="option">--rebuild-indexes</code>
            を再度実行できます。この処理はエラーが発生した箇所から再開されます。
            これは、一時エラーが発生した場合にも実行できます。
            <span class="command"><strong>ndb_restore</strong></span>
            <code class="option">--rebuild-indexes</code>
            の実行は無期限に繰り返すことができます。このようなエラーは、<code class="option">--parallelism</code>
            の値を減らすことで停止できる場合があります。
            領域不足の場合は、redo ログのサイズ
            (<code class="literal">FragmentLogFileSize</code>
            ノード構成パラメータ) を増やすか、LCP
            の実行速度
            (<code class="literal">MaxDiskWriteSpeed</code>
            および関連パラメータ)
            を上げて領域をより迅速に解放できます。
          </p></li><li class="listitem"><p><a name="option_ndb_restore_remap-column"></a>
            <code class="option">--remap-column=<em class="replaceable"><code>db</code></em>.<em class="replaceable"><code>tbl</code></em>.<em class="replaceable"><code>col</code></em>:<em class="replaceable"><code>fn</code></em>:<em class="replaceable"><code>args</code></em></code>
          </p><a class="indexterm" name="idm45563215736096"></a><a class="indexterm" name="idm45563215734032"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for remap-column"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--remap-column=[db].[tbl].[col]:[fn]:[args]</code></td>
</tr><tr><th>導入</th>
<td>8.0.21-ndb-8.0.21</td>
</tr><tr><th>型</th>
<td>文字列</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">[none]</code></td>
</tr></tbody></table></div><p>
            このオプションを
            <code class="option">--restore-data</code>
            とともに使用すると、示されたカラムの値に関数が適用されます。
            引数文字列の値を次に示します:
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <em class="replaceable"><code>db</code></em>:
                <code class="option">--rewrite-database</code>
                によって実行された名前の変更後のデータベース名。
              </p></li><li class="listitem"><p>
                <em class="replaceable"><code>tbl</code></em>: テーブル名。
              </p></li><li class="listitem"><p>
                <em class="replaceable"><code>col</code></em>:
                更新するカラムの名前。
                このカラムのタイプは、<code class="literal">INT</code>
                または <code class="literal">BIGINT</code>
                である必要があります。 カラムは
                <code class="literal">UNSIGNED</code>
                でもかまいませんが、必須ではありません。
              </p></li><li class="listitem"><p>
                <em class="replaceable"><code>fn</code></em>:
                関数名。現在サポートされている名前は
                <code class="literal">offset</code> のみです。
              </p></li><li class="listitem"><p>
                <em class="replaceable"><code>args</code></em>:
                関数に渡される引数。
                現在、<code class="literal">offset</code>
                関数によって追加されるオフセットのサイズである単一の引数のみがサポートされています。
                負の値がサポートされています。
                引数のサイズは、カラムタイプの符号付きバリアントのサイズを超えることはできません。たとえば、<em class="replaceable"><code>col</code></em>
                が <code class="literal">INT</code>
                カラムの場合、<code class="literal">offset</code>
                関数に渡される引数の許容範囲は
                <code class="literal">-2147483648</code> から
                <code class="literal">2147483647</code>
                (<a class="xref" href="data-types.html#integer-types" title="11.1.2 整数型 (真数値) - INTEGER、INT、SMALLINT、TINYINT、MEDIUMINT、BIGINT">セクション11.1.2「整数型 (真数値) - INTEGER、INT、SMALLINT、TINYINT、MEDIUMINT、BIGINT」</a> を参照) です。
              </p><p>
                オフセット値をカラムに適用すると、オーバーフローまたはアンダーフローが発生する場合、リストア操作は失敗します。
                これは、たとえば、カラムが
                <code class="literal">BIGINT</code> で、<code class="literal">4294967291 + 8
                = 4294967299 &gt; 4294967295</code>
                以降、カラム値が 4294967291
                である行にオフセット値 8
                を適用しようとした場合に発生する可能性があります。
              </p></li></ul></div><p>
            このオプションは、NDB
            ネイティブバックアップ
            (<a class="xref" href="mysql-cluster.html#mysql-cluster-backup-using-management-client" title="23.5.8.2 NDB Cluster 管理クライアントを使用したバックアップの作成">セクション23.5.8.2「NDB Cluster 管理クライアントを使用したバックアップの作成」</a>
            を参照) と <span class="command"><strong>ndb_restore</strong></span>
            を使用してデータをマージし、主キーと一意キーの値がソースクラスタ間で重複しており、これらの値を重複しない範囲に再マップするプロセスの一環として、NDB
            Cluster
            の複数のソースインスタンスに格納されているデータを単一の宛先
            NDB Cluster にマージする場合に役立ちます。
            テーブル間の他の関係を保持する必要がある場合もあります。
            このような要件を満たすために、次に示すように、<span class="command"><strong>ndb_restore</strong></span>
            の同じ起動でオプションを複数回使用して、異なるテーブルのカラムを再マップできます:
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>ndb_restore --restore-data --remap-column=hr.employee.id:offset:1000 \
    --remap-column=hr.manager.id:offset:1000 --remap-column=hr.firstaiders.id:offset:1000</code></strong>
</pre><p>
            (ここに示されていない他のオプションも使用できます。)
          </p><p>
            <code class="option">--remap-column</code>
            を使用して、同じテーブルの複数のカラムを更新することもできます。
            複数のテーブルとカラムの組合せが可能です。
            次のように、同じテーブルの異なるカラムに異なるオフセット値を使用することもできます:
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>ndb_restore --restore-data --remap-column=hr.employee.salary:offset:10000 \
    --remap-column=hr.employee.hours:offset:-10</code></strong>
</pre><p>
            マージしない重複テーブルがソースバックアップに含まれている場合は、<code class="option">--exclude-tables</code>、<code class="option">--exclude-databases</code>
            またはアプリケーション内の他の方法を使用してこれを処理できます。
          </p><p>
            マージされるテーブルの構造およびその他の特性に関する情報は、<code class="literal">SHOW
            CREATE TABLE</code>、<span class="command"><strong>ndb_desc</strong></span>
            ツール、<code class="literal">MAX()</code>,
            <code class="literal">MIN()</code>,
            <code class="literal">LAST_INSERT_ID()</code>
            およびその他の MySQL
            関数を使用して取得できます。
          </p><p>
            NDB Cluster
            の個別のインスタンスで、マージされたテーブルからマージされていないテーブル、またはマージされていないテーブルからマージされたテーブルへの変更のレプリケーションはサポートされていません。
          </p></li><li class="listitem"><p><a name="option_ndb_restore_restore-data"></a>
            <code class="option">--restore-data</code>, <code class="option">-r</code>
          </p><a class="indexterm" name="idm45563215681712"></a><a class="indexterm" name="idm45563215679648"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for restore-data"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--restore-data</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table></div><p>
            <code class="literal">NDB</code>
            テーブルのデータおよびログを出力します。
          </p></li><li class="listitem"><p><a name="option_ndb_restore_restore-epoch"></a>
            <code class="option">--restore-epoch</code>, <code class="option">-e</code>
          </p><a class="indexterm" name="idm45563215664944"></a><a class="indexterm" name="idm45563215662880"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for restore-epoch"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--restore-epoch</code></td>
</tr></tbody></table></div><p>
            エポック情報をクラスタレプリケーションステータステーブルに追加
            (またはリストア) します。 これは NDB Cluster
            レプリカでレプリケーションを開始する場合に役立ちます。
            このオプションを使用すると、<code class="literal">id</code>
            カラムが <code class="literal">0</code> である
            <code class="literal">mysql.ndb_apply_status</code>
            内の行が更新されます
            (存在する場合)。存在しない場合はそのような行が挿入されます
            (<a class="xref" href="mysql-cluster.html#mysql-cluster-replication-backups" title="23.6.9 NDB Cluster レプリケーションによる NDB Cluster バックアップ">セクション23.6.9「NDB Cluster レプリケーションによる NDB Cluster バックアップ」</a>を参照してください。)
          </p></li><li class="listitem"><p><a name="option_ndb_restore_restore-meta"></a>
            <code class="option">--restore-meta</code>, <code class="option">-m</code>
          </p><a class="indexterm" name="idm45563215650224"></a><a class="indexterm" name="idm45563215648160"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for restore-meta"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--restore-meta</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table></div><p>
            このオプションを指定すると、<span class="command"><strong>ndb_restore</strong></span>
            が <code class="literal">NDB</code>
            テーブルメタデータを出力します。
          </p><p>
            <span class="command"><strong>ndb_restore</strong></span>
            リストアプログラムを最初に実行するときは、メタデータもリストアする必要があります。
            つまり、データベーステーブルを再作成する必要があります。これは、<code class="option">--restore-meta</code>
            (<code class="option">-m</code>)
            オプションを指定して実行することで実行できます。
            メタデータのリストアは、単一のデータノードでのみ実行する必要があります。これは、クラスタ全体にリストアするのに十分です。
          </p><p>
            古いバージョンの NDB Cluster
            では、このオプションを使用してスキーマが復元されたテーブルは、新しいクラスタとは異なる数のデータノードがあった場合でも、元のクラスタと同じ数のパーティションを使用していました。
            NDB 8.0
            では、メタデータを復元するときにこれは問題ではなくなりました。ローカルデータマネージャースレッドの数も元のクラスタ内のデータノードの数から変更されないかぎり、<span class="command"><strong>ndb_restore</strong></span>
            はターゲットクラスタのデフォルトのパーティション数を使用するようになりました。
          </p><p>
            NDB 8.0.16
            以降でこのオプションを使用する場合は、<span class="command"><strong>ndb_restore</strong></span>
            がメタデータの復元を完了するまで
            <code class="literal">ndb_metadata_check=OFF</code>
            を設定して自動同期を無効にすることをお勧めします。その後、NDB
            ディクショナリに新しく作成されたオブジェクトを同期するために再度有効にすることができます。
          </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
              バックアップのリストアを開始する場合、クラスタには空のデータベースが必要です。
              (つまり、リストアを実行する前に、<code class="option">--initial</code>
              を使用してデータノードを起動する必要があります。)
            </p></div></li><li class="listitem"><p><a name="option_ndb_restore_restore-privilege-tables"></a>
            <code class="option">--restore-privilege-tables</code>
          </p><a class="indexterm" name="idm45563215623472"></a><a class="indexterm" name="idm45563215621392"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for restore-privilege-tables"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--restore-privilege-tables</code></td>
</tr><tr><th>非推奨</th>
<td>8.0.16-ndb-8.0.16</td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">FALSE</code> (オプションを使用しない場合)</td>
</tr></tbody></table></div><p>
            <span class="command"><strong>ndb_restore</strong></span> は、NDB 7.6
            以前で実装されている分散特権をサポートしていない、バージョン
            8.0 より前の NDB Cluster
            のリリースで作成された分散 MySQL
            特権テーブルをデフォルトで復元しません。
            このオプションを選択すると、<span class="command"><strong>ndb_restore</strong></span>
            によってリストアされます。
          </p><p>
            NDB 8.0.16
            以降では、このようなテーブルはアクセス制御に使用されません。MySQL
            サーバーのアップグレードプロセスの一環として、サーバーはこれらのテーブルの
            <code class="literal">InnoDB</code>
            コピーをそれ自体に対してローカルに作成します。
            詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-upgrade-downgrade" title="23.2.7 NDB Cluster のアップグレードおよびダウングレード">セクション23.2.7「NDB Cluster のアップグレードおよびダウングレード」</a>
            および <a class="xref" href="security.html#grant-tables" title="6.2.3 付与テーブル">セクション6.2.3「付与テーブル」</a>
            を参照してください。
          </p></li><li class="listitem"><p><a name="option_ndb_restore_rewrite-database"></a>
            <code class="option">--rewrite-database</code>=<em class="replaceable"><code>olddb,newdb</code></em>
          </p><a class="indexterm" name="idm45563215600352"></a><a class="indexterm" name="idm45563215598288"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for rewrite-database"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--rewrite-database=olddb,newdb</code></td>
</tr><tr><th>型</th>
<td>文字列</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">none</code></td>
</tr></tbody></table></div><p>
            このオプションを指定すると、バックアップに使用された名前と異なる名前を持つデータベースにリストアできます。
            たとえば、バックアップが
            <code class="literal">products</code>
            という名前のデータベースから作成された場合は、このオプションを次のように使用して
            (必要となる可能性があるほかのオプションを省略しています)、含まれているデータを
            <code class="literal">inventory</code>
            という名前のデータベースにリストアできます。
          </p><pre class="programlisting">shell&gt; ndb_restore --rewrite-database=product,inventory
</pre><p>
            このオプションは、<span class="command"><strong>ndb_restore</strong></span>
            の単一呼び出しで複数回指定できます。
            このため、<code class="option">--rewrite-database=db1,db2
            --rewrite-database=db3,db4</code>
            を使用して、<code class="literal">db1</code>
            という名前のデータベースから
            <code class="literal">db2</code>
            という名前のデータベースに、および
            <code class="literal">db3</code>
            という名前のデータベースから
            <code class="literal">db4</code>
            という名前のデータベースに同時にリストアできます。
            複数の <code class="option">--rewrite-database</code>
            発生箇所の間にほかの
            <span class="command"><strong>ndb_restore</strong></span>
            オプションを指定できます。
          </p><p>
            複数の <code class="option">--rewrite-database</code>
            オプションで競合が発生した場合は、左から右に読んで最後に使用されている
            <code class="option">--rewrite-database</code>
            オプションが有効となります。
            たとえば、<code class="option">--rewrite-database=db1,db2
            --rewrite-database=db1,db3</code>
            が使用された場合、<code class="option">--rewrite-database=db1,db3</code>
            のみが有効となり、<code class="option">--rewrite-database=db1,db2</code>
            は無視されます。
            複数のデータベースから単一データベースにリストアすることもできるため、<code class="option">--rewrite-database=db1,db3
            --rewrite-database=db2,db3</code>
            を指定すると、データベース
            <code class="literal">db1</code> および <code class="literal">db2</code>
            のすべてのテーブルおよびデータがデータベース
            <code class="literal">db3</code> にリストアされます。
          </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">重要</div><p>
              <code class="option">--rewrite-database</code>
              を使用して複数のバックアップデータベースから単一ターゲットデータベースにリストアする場合、テーブル名またはその他のオブジェクト名間の競合はチェックされず、行がリストアされる順序は保証されません。
              これは、そのような場合に行が上書きされて更新が失われることがあることを意味します。
            </p></div></li><li class="listitem"><p><a name="option_ndb_restore_skip-broken-objects"></a>
            <code class="option">--skip-broken-objects</code>
          </p><a class="indexterm" name="idm45563215567248"></a><a class="indexterm" name="idm45563215565184"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for skip-broken-objects"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--skip-broken-objects</code></td>
</tr></tbody></table></div><p>
            このオプションを指定すると、<span class="command"><strong>ndb_restore</strong></span>
            がネイティブ <code class="literal">NDB</code>
            バックアップを読み取るときに破損しているテーブルを無視して、残りのテーブル
            (破損していない) のリストアを続行します。
            現在のところ、<code class="option">--skip-broken-objects</code>
            オプションは BLOB
            パーツテーブルが欠けている場合にのみ機能します。
          </p></li><li class="listitem"><p><a name="option_ndb_restore_skip-table-check"></a>
            <code class="option">--skip-table-check</code>, <code class="option">-s</code>
          </p><a class="indexterm" name="idm45563215553024"></a><a class="indexterm" name="idm45563215550960"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for skip-table-check"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--skip-table-check</code></td>
</tr></tbody></table></div><p>
            テーブルメタデータをリストアせずにデータをリストアできます。
            デフォルトでは、テーブルデータとテーブルスキーマの間に不一致が見つかった場合、<span class="command"><strong>ndb_restore</strong></span>
            はエラーで失敗します。このオプションはその動作をオーバーライドします。
          </p><p>
            <span class="command"><strong>ndb_restore</strong></span>
            を使用してデータをリストアするときのカラム定義内の不一致に関する制限の一部が緩和されています。それらのタイプの不一致のいずれかが発生しても、<span class="command"><strong>ndb_restore</strong></span>
            は以前のようにエラーで停止しなくなり、代わりにデータを受け入れてターゲットテーブルに挿入し、これが行われているという警告をユーザーに発行します。
            この動作は、<code class="option">--skip-table-check</code>
            オプションまたは
            <code class="option">--promote-attributes</code>
            オプションが使用されているかどうかにかかわらず、実行されます。
            カラム定義でのこれらの違いには次のタイプがあります。
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                異なる <code class="literal">COLUMN_FORMAT</code> 設定
                (<code class="literal">FIXED</code>、<code class="literal">DYNAMIC</code>、<code class="literal">DEFAULT</code>)
              </p></li><li class="listitem"><p>
                異なる <code class="literal">STORAGE</code> 設定
                (<code class="literal">MEMORY</code>、<code class="literal">DISK</code>)
              </p></li><li class="listitem"><p>
                異なるデフォルト値
              </p></li><li class="listitem"><p>
                異なる配布キー設定
              </p></li></ul></div></li><li class="listitem"><p><a name="option_ndb_restore_skip-unknown-objects"></a>
            <code class="option">--skip-unknown-objects</code>
          </p><a class="indexterm" name="idm45563215528384"></a><a class="indexterm" name="idm45563215526304"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for skip-unknown-objects"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--skip-unknown-objects</code></td>
</tr></tbody></table></div><p>
            このオプションを指定すると、<span class="command"><strong>ndb_restore</strong></span>
            がネイティブ <code class="literal">NDB</code>
            バックアップを読み取るときに、認識されないスキーマオブジェクトを無視します。
            これは、NDB 7.6 を実行しているクラスタから
            NDB Cluster 7.5
            を実行しているクラスタに作成されたバックアップを復元するために使用できます。
          </p></li><li class="listitem"><p><a name="option_ndb_restore_slice-id"></a>
            <code class="option">--slice-id</code>=<em class="replaceable"><code>#</code></em>
          </p><a class="indexterm" name="idm45563215514640"></a><a class="indexterm" name="idm45563215512656"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for slice-id"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--slice-id=#</code></td>
</tr><tr><th>導入</th>
<td>8.0.20-ndb-8.0.20</td>
</tr><tr><th>型</th>
<td>Integer</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">0</code></td>
</tr><tr><th>最小値</th>
<td><code class="literal">0</code></td>
</tr><tr><th>最大値</th>
<td><code class="literal">1023</code></td>
</tr></tbody></table></div><p>
            スライスで復元する場合、これは復元するスライスの
            ID です。 このオプションは常に
            <code class="option">--num-slices</code>
            とともに使用され、その値は常に
            <code class="option">--num-slices</code>
            の値より小さくする必要があります。
          </p><p>
            詳細は、このセクションの他の場所にある
            <code class="option">--num-slices</code>
            の説明を参照してください。
          </p></li><li class="listitem"><p><a name="option_ndb_restore_tab"></a>
            <code class="option">--tab</code>=<em class="replaceable"><code>dir_name</code></em>,
            <code class="option">-T</code> <em class="replaceable"><code>dir_name</code></em>
          </p><a class="indexterm" name="idm45563215488656"></a><a class="indexterm" name="idm45563215486672"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for tab"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--tab=dir_name</code></td>
</tr><tr><th>型</th>
<td>ディレクトリ名</td>
</tr></tbody></table></div><p>
            <code class="option">--print-data</code>
            がダンプファイルをテーブルごとに作成し、それぞれに
            <code class="filename"><em class="replaceable"><code>tbl_name</code></em>.txt</code>
            という名前を付けます。
            ファイルを保存すべきディレクトリへのパスを引数が必要です。現在のディレクトリの場合は
            <code class="literal">.</code> を使用します。
          </p></li><li class="listitem"><p><a name="option_ndb_restore_verbose"></a>
            <code class="option">--verbose</code>=<em class="replaceable"><code>#</code></em>
          </p><a class="indexterm" name="idm45563215472608"></a><a class="indexterm" name="idm45563215470624"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for verbose"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--verbose=#</code></td>
</tr><tr><th>型</th>
<td>数値</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">1</code></td>
</tr><tr><th>最小値</th>
<td><code class="literal">0</code></td>
</tr><tr><th>最大値</th>
<td><code class="literal">255</code></td>
</tr></tbody></table></div><p>
            出力の冗長性のレベルを設定します。
            最小値は 0 であり、最大値は 255 です。
            デフォルト値は 1 です。
          </p></li></ul></div><p><b>エラー報告. </b><a class="indexterm" name="idm45563215452848"></a>
          <span class="command"><strong>ndb_restore</strong></span>
          は一時的および永続的エラーの両方を報告します。
          一時エラーの場合は、それらからリカバリできる場合があり、そのようなときには<code class="literal">「Restore
          successful, but encountered temporary error, please look at
          configuration」</code>と報告されます。
        </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">重要</div><p>
          <span class="command"><strong>ndb_restore</strong></span>
          を使用して循環レプリケーションで使用する
          NDB Cluster
          を初期化したあと、レプリカとして機能する
          SQL
          ノード上のバイナリログは自動的に作成されないため、手動で作成する必要があります。
          バイナリログを作成させるには、<code class="literal">START
          SLAVE</code> を実行する前に、その SQL
          ノードで <code class="literal">SHOW TABLES</code>
          ステートメントを発行します。 これは NDB
          Cluster の既知の問題です。
        </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="ndb-restore-to-different-version"></a>23.4.23.1 異なるバージョンの NDB Cluster への NDB
          バックアップの復元</h4></div></div></div><div class="toc"><dl class="toc"><dt><span class="section"><a href="mysql-cluster.html#ndb-restore-to-previous-version">23.4.23.1.1 NDB バックアップを以前のバージョンの NDB Cluster
            に復元</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#ndb-restore-to-later-version">23.4.23.1.2 NDB Cluster の新しいバージョンへの NDB
            バックアップの復元</a></span></dt></dl></div><a class="indexterm" name="idm45563215443536"></a><p>
          次の 2 つのセクションでは、ネイティブ NDB
          バックアップを、バックアップが作成されたバージョンとは異なるバージョンの
          NDB Cluster
          に復元する方法について説明します。
        </p><p>
          また、NDB
          ソフトウェアの別のバージョンを実行しているクラスタに
          NDB
          バックアップを復元しようとしたときに発生する可能性のあるその他の問題については、<a class="xref" href="mysql-cluster.html#mysql-cluster-upgrade-downgrade" title="23.2.7 NDB Cluster のアップグレードおよびダウングレード">セクション23.2.7「NDB Cluster のアップグレードおよびダウングレード」</a>
          に相談してください。
        </p><p>
          NDB 8.0 と以前のバージョンの NDB Cluster
          の間で、特定の状況に関連する可能性のあるその他の変更については、<a class="xref" href="mysql-cluster.html#mysql-cluster-what-is-new-8-0" title="NDB Cluster 8.0 の新機能">NDB Cluster 8.0 の新機能</a>
          および <a class="xref" href="installing.html#upgrading-from-previous-series" title="2.11.4 MySQL 8.0 での変更">セクション2.11.4「MySQL 8.0 での変更」</a>
          を確認することもお勧めします。
        </p><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="ndb-restore-to-previous-version"></a>23.4.23.1.1 NDB バックアップを以前のバージョンの NDB Cluster
            に復元</h5></div></div></div><a class="indexterm" name="idm45563215436080"></a><p>
            以前のバージョンには存在しない機能を使用しているため、新しいバージョンの
            NDB Cluster
            から以前のバージョンにバックアップを復元するときに問題が発生することがあります。
            これらの問題の一部を次に示します:
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                NDB 8.0 で作成されたテーブルは、NDB 7.6
                以前では使用できない
                <code class="literal">utf8mb4_ai_ci</code>
                文字セットをデフォルトで使用するため、これらの以前のバージョンのいずれかから
                <span class="command"><strong>ndb_restore</strong></span>
                バイナリによって読み取ることはできません。
                このような場合は、バックアップを実行する前に古いバージョンでサポートされている文字セットを使用するように、<code class="literal">utf8mb4_ai_ci</code>
                を使用してテーブルを変更する必要があります。
              </p></li><li class="listitem"><p>
                MySQL Server および NDB
                がテーブルメタデータを処理する方法が変更されたため、含まれている
                MySQL サーバーバイナリを使用して NDB 8.0.14
                以降から作成または変更されたテーブルは、<span class="command"><strong>ndb_restore</strong></span>
                を使用して以前のバージョンの NDB Cluster
                に復元できません。
                このようなテーブルでは、古いバージョンの
                <span class="command"><strong>mysqld</strong></span> で認識されない
                <code class="filename">.sdi</code>
                ファイルが使用されます。
              </p><p>
                NDB 8.0.13 以前で作成され、NDB 8.0.14
                以降へのアップグレード以降に変更されていない
                NDB 8.0.14
                以降のテーブルで作成されたバックアップは、古いバージョンの
                NDB Cluster
                に復元可能である必要があります。
              </p><p>
                メタデータとテーブルデータを別々にリストアできるため、このような場合は、<span class="command"><strong>mysqldump</strong></span>
                を使用して作成したダンプからテーブルスキーマをリストアするか、必要な
                <code class="literal">CREATE TABLE</code>
                ステートメントを手動で実行してから、<code class="option">--restore-data</code>
                オプションを指定した
                <span class="command"><strong>ndb_restore</strong></span>
                を使用してテーブルデータのみをインポートできます。
              </p></li><li class="listitem"><p>
                NDB 8.0.22
                以降で作成された暗号化バックアップは、NDB
                8.0.21 以前の <span class="command"><strong>ndb_restore</strong></span>
                を使用して復元することはできません。
              </p></li><li class="listitem"><p>
                NDB 8.0.18
                より前では、<code class="literal">NDB_STORED_USER</code>
                権限はサポートされていません。
              </p></li><li class="listitem"><p>
                NDB Cluster 8.0.18 以降では最大 144
                個のデータノードがサポートされますが、それ以前のバージョンでは最大
                48
                個のデータノードのみがサポートされます。
                この非互換性によって問題が発生する状況の詳細は、<a class="xref" href="mysql-cluster.html#ndb-restore-to-fewer-nodes" title="23.4.23.2.1 元のノードより少ないノードへのリストア">セクション23.4.23.2.1「元のノードより少ないノードへのリストア」</a>
                を参照してください。
              </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="ndb-restore-to-later-version"></a>23.4.23.1.2 NDB Cluster の新しいバージョンへの NDB
            バックアップの復元</h5></div></div></div><a class="indexterm" name="idm45563215412320"></a><p>
            一般に、古いバージョンの NDB で
            <span class="command"><strong>ndb_mgm</strong></span> クライアントの
            <code class="literal">START BACKUP</code>
            コマンドを使用して作成されたバックアップは、新しいバージョンに付属の
            <span class="command"><strong>ndb_restore</strong></span>
            バイナリを使用している場合は、新しいバージョンに復元できます。
            (古いバージョンの <span class="command"><strong>ndb_restore</strong></span>
            を使用することもできますが、お薦めしません。)
            その他の潜在的な問題を次に示します:
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                バックアップ
                (<code class="option">--restore-meta</code>
                オプション)
                からメタデータをリストアする場合、<span class="command"><strong>ndb_restore</strong></span>
                は通常、取得したテーブルスキーマをバックアップの作成時とまったく同じように再現しようとします。
              </p><p>
                8.0.14 より前のバージョンの NDB
                で作成されたテーブルは、そのメタデータに
                <code class="filename">.frm</code>
                ファイルを使用します。
                これらのファイルは NDB 8.0.14 以降の
                <span class="command"><strong>mysqld</strong></span>
                で読み取ることができ、それに含まれる情報を使用して、MySQL
                データディクショナリで使用される
                <code class="filename">.sdi</code>
                ファイルを新しいバージョンで作成できます。
              </p></li><li class="listitem"><p>
                古いバックアップを NDB
                の新しいバージョンに復元する場合、ハッシュマップパーティション分割、より多くのハッシュマップバケット、読み取りバックアップ、さまざまなパーティションレイアウトなどの新しい機能を利用できないことがあります。
                このため、NDB
                が新しいスキーマ機能を利用できるように、<span class="command"><strong>mysqldump</strong></span>
                および <span class="command"><strong>mysql</strong></span>
                クライアントを使用して古いスキーマを復元することをお勧めします。
              </p></li><li class="listitem"><p>
                小数秒をサポートしていない古い時間型
                (MySQL 5.6.4 および NDB 7.3.31
                より前に使用されていた)
                を使用しているテーブルは、<span class="command"><strong>ndb_restore</strong></span>
                を使用して NDB 8.0 に復元できません。
                <code class="literal">CHECK TABLE</code>
                を使用してこのようなテーブルをチェックし、必要に応じて
                <span class="command"><strong>mysql</strong></span> クライアントで
                <code class="literal">REPAIR TABLE</code>
                を使用して、新しい時間カラム形式にアップグレードできます。これは、バックアップを取得する前に行う必要があります。
                詳しくは<a class="xref" href="installing.html#upgrade-prerequisites" title="2.11.5 アップグレード用のインストールの準備">セクション2.11.5「アップグレード用のインストールの準備」</a>,をご覧ください。
              </p><p>
                また、<span class="command"><strong>mysqldump</strong></span>
                で作成されたダンプを使用して、このようなテーブルをリストアします。
              </p></li><li class="listitem"><p>
                NDB 7.6
                以前で作成された分散付与テーブルは NDB
                8.0 ではサポートされていません。
                このようなテーブルは NDB 8.0
                クラスタに復元できますが、アクセス制御には影響しません。
              </p></li></ul></div></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="ndb-restore-different-number-nodes"></a>23.4.23.2 異なる数のデータノードへの復元</h4></div></div></div><div class="toc"><dl class="toc"><dt><span class="section"><a href="mysql-cluster.html#ndb-restore-to-fewer-nodes">23.4.23.2.1 元のノードより少ないノードへのリストア</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#ndb-restore-to-more-nodes">23.4.23.2.2 元のノードより多くのノードへのリストア</a></span></dt></dl></div><p>
          NDB
          バックアップから、バックアップが作成された元のものとは異なる数のデータノードを持つクラスタに復元できます。
          次の 2
          つのセクションでは、ターゲットクラスタのデータノード数がバックアップのソースより少ないか多い場合についてそれぞれ説明します。
        </p><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="ndb-restore-to-fewer-nodes"></a>23.4.23.2.1 元のノードより少ないノードへのリストア</h5></div></div></div><p>
            多数のノードが小さい数の偶数倍である場合は、元のノードより少ないデータノードを持つクラスタに復元できます。
            次の例では、4
            つのデータノードを持つクラスタで作成したバックアップを、2
            つのデータノードを持つクラスタに使用します。
          </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
                元のクラスタの管理サーバーはホスト
                <code class="literal">host10</code> 上にあります。
                元のクラスタには 4
                つのデータノードがあり、ノード ID
                とホスト名は次のように管理サーバーの
                <code class="filename">config.ini</code>
                ファイルから抽出されたものです:
              </p><pre class="programlisting">[ndbd]
<code class="literal">NodeId</code>=2
<code class="literal">HostName</code>=host2

[ndbd]
NodeId=4
HostName=host4

[ndbd]
NodeId=6
HostName=host6

[ndbd]
NodeId=8
HostName=host8
</pre><p>
                各データノードは、最初は
                <span class="command"><strong>ndbmtd</strong></span>
                <code class="option">--ndb-connectstring=host10</code>
                または同等のものを使用して起動されたものとします。
              </p></li><li class="listitem"><p>
                通常の方法でバックアップを実行します。
                これを行う方法については、<a class="xref" href="mysql-cluster.html#mysql-cluster-backup-using-management-client" title="23.5.8.2 NDB Cluster 管理クライアントを使用したバックアップの作成">セクション23.5.8.2「NDB Cluster 管理クライアントを使用したバックアップの作成」</a>を参照してください。
              </p></li><li class="listitem"><p>
                各データノードでバックアップによって作成されたファイルがここに一覧表示されます。ここで、<em class="replaceable"><code>N</code></em>
                はノード ID、<em class="replaceable"><code>B</code></em>
                はバックアップ ID です。
              </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    <code class="filename">BACKUP-<em class="replaceable"><code>B</code></em>-0.<em class="replaceable"><code>N</code></em>.Data</code>
                  </p></li><li class="listitem"><p>
                    <code class="filename">BACKUP-<em class="replaceable"><code>B</code></em>.<em class="replaceable"><code>N</code></em>.ctl</code>
                  </p></li><li class="listitem"><p>
                    <code class="filename">BACKUP-<em class="replaceable"><code>B</code></em>.<em class="replaceable"><code>N</code></em>.log</code>
                  </p></li></ul></div><p>
                これらのファイルは、各データノードの
                <code class="literal">BackupDataDir</code>
                <code class="filename">/BACKUP/BACKUP-<em class="replaceable"><code>B</code></em></code>
                の下にあります。
                この例の残りの部分では、バックアップ
                ID は 1 であると想定しています。
              </p><p>
                これらのすべてのファイルを後で新しいデータノードにコピーできるようにします
                (ここでは、<span class="command"><strong>ndb_restore</strong></span>
                によってデータノードのローカルファイルシステム上でアクセスできます)。
                これらはすべて単一の場所にコピーするのが最も簡単です。これが完了したことを前提としています。
              </p></li><li class="listitem"><p>
                ターゲットクラスタの管理サーバーはホスト
                <code class="literal">host20</code>
                上にあり、ターゲットには、<code class="literal">host20</code>
                上の管理サーバー <code class="filename">config.ini</code>
                ファイルからのノード ID
                とホスト名が表示された 2
                つのデータノードがあります:
              </p><pre class="programlisting">[ndbd]
NodeId=3
hostname=host3

[ndbd]
NodeId=5
hostname=host5
</pre><p>
                新しい (ターゲット)
                クラスタがクリーンデータノードファイルシステムで起動するように、<code class="literal">host3</code>
                および <code class="literal">host5</code>
                の各データノードプロセスは、<span class="command"><strong>ndbmtd</strong></span>
                <code class="option">-c host20</code>
                <code class="option">--initial</code>
                または同等のものを使用して起動する必要があります。
              </p></li><li class="listitem"><p>
                2 つの異なる 2
                つのバックアップファイルのセットを各ターゲットデータノードにコピーします。
                この例では、バックアップファイルを元のクラスタのノード
                2 および 4
                からターゲットクラスタのノード 3
                にコピーします。
                これらのファイルは次のとおりです:
              </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    <code class="filename">BACKUP-1-0.2.Data</code>
                  </p></li><li class="listitem"><p>
                    <code class="filename">BACKUP-1.2.ctl</code>
                  </p></li><li class="listitem"><p>
                    <code class="filename">BACKUP-1.2.log</code>
                  </p></li><li class="listitem"><p>
                    <code class="filename">BACKUP-1-0.6.Data</code>
                  </p></li><li class="listitem"><p>
                    <code class="filename">BACKUP-1.6.ctl</code>
                  </p></li><li class="listitem"><p>
                    <code class="filename">BACKUP-1.6.log</code>
                  </p></li></ul></div><p>
                次に、バックアップファイルをノード 6
                および 8 からノード 5
                にコピーします。これらのファイルを次のリストに示します:
              </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    <code class="filename">BACKUP-1-0.4.Data</code>
                  </p></li><li class="listitem"><p>
                    <code class="filename">BACKUP-1.4.ctl</code>
                  </p></li><li class="listitem"><p>
                    <code class="filename">BACKUP-1.4.log</code>
                  </p></li><li class="listitem"><p>
                    <code class="filename">BACKUP-1-0.8.Data</code>
                  </p></li><li class="listitem"><p>
                    <code class="filename">BACKUP-1.8.ctl</code>
                  </p></li><li class="listitem"><p>
                    <code class="filename">BACKUP-1.8.log</code>
                  </p></li></ul></div><p>
                この例の残りの部分では、それぞれのバックアップファイルが各ノード
                3 および 5
                のディレクトリ<code class="filename">/BACKUP-1</code>
                に保存されていることを前提としています。
              </p></li><li class="listitem"><p>
                2
                つのターゲットデータノードのそれぞれで、両方のバックアップセットから復元する必要があります。
                まず、次に示すように <code class="literal">host3</code>
                で <span class="command"><strong>ndb_restore</strong></span>
                を起動して、ノード 2 および 4
                からノード 3
                にバックアップをリストアします:
              </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>ndb_restore -c host20 <code class="option">--nodeid=2</code> <code class="option">--backupid=1</code> <code class="option">--restore-data</code> <code class="option">--backup-path=/BACKUP-1</code></code></strong>

shell&gt; <strong class="userinput"><code>ndb_restore -c host20 --nodeid=4 --backupid=1 --restore-data --backup-path=/BACKUP-1</code></strong>
</pre><p>
                次に、次のように <code class="literal">host5</code> で
                <span class="command"><strong>ndb_restore</strong></span>
                を起動して、ノード 6 および 8
                からノード 5
                にバックアップをリストアします:
              </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>ndb_restore -c host20 --nodeid=6 --backupid=1 --restore-data --backup-path=/BACKUP-1</code></strong>

shell&gt; <strong class="userinput"><code>ndb_restore -c host20 --nodeid=8 --backupid=1 --restore-data --backup-path=/BACKUP-1</code></strong>
</pre></li></ol></div></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="ndb-restore-to-more-nodes"></a>23.4.23.2.2 元のノードより多くのノードへのリストア</h5></div></div></div><p>
            特定の <span class="command"><strong>ndb_restore</strong></span>
            コマンドに指定されたノード ID
            は、元のバックアップ内のノードのノード ID
            であり、リストア先のデータノードのノード
            ID ではありません。
            このセクションで説明する方法を使用してバックアップを実行する場合、<span class="command"><strong>ndb_restore</strong></span>
            は管理サーバーに接続し、バックアップのリストア先となるクラスタ内のデータノードのリストを取得します。
            リストアされたデータは適宜分散されるため、バックアップの実行時にターゲットクラスタ内のノード数を把握または計算する必要はありません。
          </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
              ノードグループ当たりの LCP
              スレッドまたは LQH
              スレッドの合計数を変更する場合は、<span class="command"><strong>mysqldump</strong></span>
              を使用して作成されたバックアップからスキーマを再作成する必要があります。
            </p></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
                <span class="emphasis"><em>データのバックアップの作成</em></span>。
                これを行うには、次のように、システムシェルから
                <span class="command"><strong>ndb_mgm</strong></span> クライアントの
                <code class="literal">START BACKUP</code>
                コマンドを呼び出します:
              </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>ndb_mgm -e "START BACKUP 1"</code></strong>
</pre><p>
                これは、目的のバックアップ ID が 1
                であることを前提としています。
              </p></li><li class="listitem"><p>
                スキーマのバックアップを作成します。
                この手順は、ノードグループごとの LCP
                スレッドまたは LQH
                スレッドの合計数が変更された場合にのみ必要です。
              </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>mysqldump --no-data --routines --events --triggers --databases &gt; myschema.sql</code></strong>
</pre><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">重要</div><p>
                  <span class="command"><strong>ndb_mgm</strong></span> を使用して
                  <code class="literal">NDB</code>
                  ネイティブバックアップを作成した後は、スキーマのバックアップを作成する前にスキーマを変更しないでください
                  (作成した場合)。
                </p></div></li><li class="listitem"><p>
                バックアップディレクトリを新しいクラスタにコピーします。
                たとえば、リストアするバックアップの
                ID が 1 で、<code class="literal">BackupDataDir</code> =
                <code class="filename">/backups/node_<em class="replaceable"><code>nodeid</code></em></code>
                の場合、このノードのバックアップへのパスは<code class="filename">/backups/node_1/BACKUP/BACKUP-1</code>
                です。 このディレクトリ内には、次の 3
                つのファイルがあります:
              </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    <code class="filename">BACKUP-1-0.1.Data</code>
                  </p></li><li class="listitem"><p>
                    <code class="filename">BACKUP-1.1.ctl</code>
                  </p></li><li class="listitem"><p>
                    <code class="filename">BACKUP-1.1.log</code>
                  </p></li></ul></div><p>
                ディレクトリ全体を新しいノードにコピーする必要があります。
              </p><p>
                スキーマファイルを作成する必要がある場合は、これを
                <span class="command"><strong>mysqld</strong></span>
                で読み取ることができる SQL
                ノード上の場所にコピーします。
              </p></li></ol></div><p>
            特定のノードからバックアップをリストアする必要はありません。
          </p><p>
            作成したばかりのバックアップからリストアするには、次のステップを実行します:
          </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
                <span class="emphasis"><em>スキーマのリストア</em></span>。
              </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    <span class="command"><strong>mysqldump</strong></span>
                    を使用して別のスキーマバックアップファイルを作成した場合は、次に示すように、<span class="command"><strong>mysql</strong></span>
                    クライアントを使用してこのファイルをインポートします:
                  </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>mysql &lt; myschema.sql</code></strong>
</pre><p>
                    スキーマファイルをインポートする場合、<span class="command"><strong>mysql</strong></span>
                    クライアントが MySQL
                    サーバーに接続できるように、表示されている内容に加えて、<code class="option">--user</code>
                    および <code class="option">--password</code>
                    のオプション (場合によってはその他)
                    を指定する必要があります。
                  </p></li><li class="listitem"><p>
                    スキーマファイルを作成する必要がなかった場合は、次に示すように、<span class="command"><strong>ndb_restore</strong></span>
                    <code class="option">--restore-meta</code>
                    (短縮形 <code class="option">-m</code>)
                    を使用してスキーマを再作成できます:
                  </p><pre class="programlisting">shell&gt; ndb_restore --nodeid=1 --backupid=1 --restore-meta --backup-path=/backups/node_1/BACKUP/BACKUP-1
</pre><p>
                    <span class="command"><strong>ndb_restore</strong></span>
                    は管理サーバーに接続できる必要があります。これを可能にするには、必要に応じて
                    <code class="option">--ndb-connectstring</code>
                    オプションを追加します。
                  </p></li></ul></div></li><li class="listitem"><p>
                <span class="emphasis"><em>データのリストア</em></span>。
                これは、元のクラスタ内のデータノードごとに、そのデータノード
                ID を使用するたびに 1
                回実行する必要があります。 最初に 4
                つのデータノードがあったと仮定すると、必要な一連のコマンドは次のようになります:
              </p><pre class="programlisting">ndb_restore --nodeid=1 --backupid=1 --restore-data --backup-path=/backups/node_1/BACKUP/BACKUP-1 --disable-indexes
ndb_restore --nodeid=2 --backupid=1 --restore-data --backup-path=/backups/node_2/BACKUP/BACKUP-1 --disable-indexes
ndb_restore --nodeid=3 --backupid=1 --restore-data --backup-path=/backups/node_3/BACKUP/BACKUP-1 --disable-indexes
ndb_restore --nodeid=4 --backupid=1 --restore-data --backup-path=/backups/node_4/BACKUP/BACKUP-1 --disable-indexes
</pre><p>
                これらはパラレルで実行できます。
              </p><p>
                必要に応じて、<code class="option">--ndb-connectstring</code>
                オプションを追加してください。
              </p></li><li class="listitem"><p>
                <span class="emphasis"><em>インデックスの再構築</em></span>。
                これらは、前述のコマンドで使用された
                <code class="option">--disable-indexes</code>
                オプションによって無効化されました。
                インデックスを再作成すると、リストアがすべての時点で一貫していないことによるエラーを回避できます。
                インデックスを再構築すると、場合によってはパフォーマンスが向上することもあります。
                インデックスを再構築するには、単一ノードで次のコマンドを
                1 回実行します:
              </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>ndb_restore --nodeid=1 --backupid=1 --backup-path=/backups/node_1/BACKUP/BACKUP-1 --rebuild-indexes</code></strong>
</pre><p>
                前述のように、<span class="command"><strong>ndb_restore</strong></span>
                が管理サーバーに接続できるように、<code class="option">--ndb-connectstring</code>
                オプションを追加する必要がある場合があります。
              </p></li></ol></div></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="ndb-restore-parallel-data-node-backup"></a>23.4.23.3 パラレルで作成されたバックアップからのリストア</h4></div></div></div><div class="toc"><dl class="toc"><dt><span class="section"><a href="mysql-cluster.html#ndb-restore-parallel-backup-in-paprallel">23.4.23.3.1 パラレルバックアップのリストア</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#ndb-restore-parallel-backup-serial">23.4.23.3.2 パラレルバックアップのシリアルリストア</a></span></dt></dl></div><p>
          NDB Cluster 8.0.16 以降では、複数の LDM を持つ
          <span class="command"><strong>ndbmtd</strong></span>
          を使用して、各データノードで並列バックアップを取ることができます
          (<a class="xref" href="mysql-cluster.html#mysql-cluster-backup-parallel-data-nodes" title="23.5.8.5 並列データノードを使用した NDB バックアップの作成">セクション23.5.8.5「並列データノードを使用した NDB バックアップの作成」</a>
          を参照)。 次の 2
          つのセクションでは、この方法で作成されたバックアップをリストアする方法について説明します。
        </p><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="ndb-restore-parallel-backup-in-paprallel"></a>23.4.23.3.1 パラレルバックアップのリストア</h5></div></div></div><p>
            並列バックアップの復元には、NDB Cluster
            配布バージョン 8.0.16 以降からの
            <span class="command"><strong>ndb_restore</strong></span>
            バイナリが必要です。
            このプロセスは、<span class="command"><strong>ndb_restore</strong></span>
            プログラムの説明の下の一般的な使用方法のセクションで概説されているプロセスとは大きく異なりません。ここで示すように、<span class="command"><strong>ndb_restore</strong></span>
            の 2 回の実行で構成されます:
          </p><pre class="programlisting">shell&gt; ndb_restore -n 1 -b 1 -m --backup-path=<em class="replaceable"><code>path/to/backup_dir</code></em>/BACKUP/BACKUP-<em class="replaceable"><code>backup_id</code></em>
shell&gt; ndb_restore -n 1 -b 1 -r --backup-path=<em class="replaceable"><code>path/to/backup_dir</code></em>/BACKUP/BACKUP-<em class="replaceable"><code>backup_id</code></em>
</pre><p>
            <em class="replaceable"><code>backup_id</code></em>
            は、リストアするバックアップの ID です。
            一般に、追加の特別な引数は必要ありません。<span class="command"><strong>ndb_restore</strong></span>
            は常に、<code class="option">--backup-path</code>
            オプションで指定されたディレクトリの下にパラレルサブディレクトリが存在するかどうかをチェックし、メタデータを
            (シリアルに)
            リストアしてから、テーブルデータを
            (パラレルに) リストアします。
          </p></div><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="ndb-restore-parallel-backup-serial"></a>23.4.23.3.2 パラレルバックアップのシリアルリストア</h5></div></div></div><p>
            並列性を使用してデータノード上で作成されたバックアップをシリアル方式で復元できます。
            これを行うには、メインバックアップディレクトリの下の各
            LDM
            によって作成されたサブディレクトリを指す
            <code class="option">--backup-path</code>
            を使用して <span class="command"><strong>ndb_restore</strong></span>
            を起動し、メタデータをリストアするサブディレクトリのいずれかを一度起動します
            (各サブディレクトリにメタデータの完全なコピーが含まれているため、どのサブディレクトリにも関係ありません)。その後、各サブディレクトリを順に起動してデータをリストアします。
            4 つの LDM で作成されたバックアップ ID 100
            を持つバックアップをリストアし、<code class="literal">BackupDataDir</code>
            が<code class="filename">/opt</code> であるとします。
            この場合、メタデータをリストアするには、次のように
            <span class="command"><strong>ndb_restore</strong></span> を起動します:
          </p><pre class="programlisting">shell&gt; ndb_restore -n 1 -b 1 -m --backup-path=opt/BACKUP/BACKUP-100/BACKUP-100-PART-1-OF-4
</pre><p>
            テーブルデータをリストアするには、次に示すように、いずれかのサブディレクトリを順に使用して、<span class="command"><strong>ndb_restore</strong></span>
            を 4 回実行します:
          </p><pre class="programlisting">shell&gt; ndb_restore -n 1 -b 1 -r --backup-path=opt/BACKUP/BACKUP-100/BACKUP-100-PART-1-OF-4
shell&gt; ndb_restore -n 1 -b 1 -r --backup-path=opt/BACKUP/BACKUP-100/BACKUP-100-PART-2-OF-4
shell&gt; ndb_restore -n 1 -b 1 -r --backup-path=opt/BACKUP/BACKUP-100/BACKUP-100-PART-3-OF-4
shell&gt; ndb_restore -n 1 -b 1 -r --backup-path=opt/BACKUP/BACKUP-100/BACKUP-100-PART-4-OF-4
</pre><p>
            以前のバージョンの NDB Cluster
            ソフトウェアで提供されていた
            <span class="command"><strong>ndb_restore</strong></span>
            バイナリを使用して、並列バックアップをサポートしていない古いバージョンの
            NDB Cluster (NDB 8.0.16 より前)
            に並列バックアップを復元する場合と同じ方法を使用できます。
          </p></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-cluster-programs-ndb-select-all"></a>23.4.24 ndb_select_all — NDB テーブルの行の出力</h3></div></div></div><a class="indexterm" name="idm45563215236144"></a><p>
        <span class="command"><strong>ndb_select_all</strong></span>
        は、<code class="literal">NDB</code>
        テーブルのすべての行を <code class="literal">stdout</code>
        に出力します。
      </p><h4><a name="idm45563215232096"></a>使用法</h4><pre class="programlisting">ndb_select_all -c <em class="replaceable"><code>connection_string</code></em> <em class="replaceable"><code>tbl_name</code></em> -d <em class="replaceable"><code>db_name</code></em> [&gt; <em class="replaceable"><code>file_name</code></em>]
</pre><p>
        次のテーブルに、NDB Cluster
        ネイティブバックアップリストアプログラム
        <span class="command"><strong>ndb_select_all</strong></span>
        に固有のオプションを示します。
        追加説明が表のあとにあります。 ほとんどの
        NDB Cluster プログラム (<span class="command"><strong>ndb_select_all</strong></span>
        を含む)
        に共通のオプションについては、<a class="xref" href="mysql-cluster.html#mysql-cluster-program-options-common" title="23.4.32 NDB Cluster プログラムに共通のオプション — NDB Cluster プログラムに共通のオプション">セクション23.4.32「NDB Cluster プログラムに共通のオプション — NDB Cluster プログラムに共通のオプション」</a>
        を参照してください。
      </p><div class="table"><a name="mysql-cluster-ndb_select_all-options-table"></a><p class="title"><b>表 23.43 プログラムで使用されるコマンドライン・オプション ndb_select_all</b></p><div class="table-contents"><table frame="box" rules="all"><col style="width: 33%"><col style="width: 34%"><col style="width: 33%"><thead><tr>
            <th scope="col">形式</th>
            <th scope="col">説明</th>
            <th scope="col">追加、非推奨、または削除された</th>
          </tr></thead><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_select_all_database">--database=dbname</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_select_all_database">-d</a>
                </code>
              </p></th>
            <td>テーブルが見つかったデータベースの名前</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_select_all_parallelism">--parallelism=#</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_select_all_parallelism">-p</a>
                </code>
              </p></th>
            <td>並列性の度合い</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_select_all_lock">--lock=#</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_select_all_lock">-l</a>
                </code>
              </p></th>
            <td>ロックタイプ</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_select_all_order">--order=index</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_select_all_order">-o</a>
                </code>
              </p></th>
            <td>この名前を持つインデックスに従って結果セットをソート</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_select_all_descending">--descending</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_select_all_descending">-z</a>
                </code>
              </p></th>
            <td>結果セットを降順でソート (--order が必要)</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_select_all_header">--header</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_select_all_header">-h</a>
                </code>
              </p></th>
            <td>ヘッダーを出力します
              (出力でヘッダーを無効にするには 0|FALSE
              を設定します)</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_select_all_useHexFormat">--useHexFormat</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_select_all_useHexFormat">-x</a>
                </code>
              </p></th>
            <td>数値を 16 進形式で出力します</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_select_all_delimiter">--delimiter=char</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_select_all_delimiter">-D</a>
                </code>
              </p></th>
            <td>カラムデリミタの設定</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_select_all_disk">--disk</a>
                </code>
              </p></th>
            <td>ディスク参照を出力します
              (インデックスが設定されていないカラムを持つディスクデータテーブルでのみ役に立ちます)</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_select_all_rowid">--rowid</a>
                </code>
              </p></th>
            <td>印刷行 ID</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_select_all_gci">--gci</a>
                </code>
              </p></th>
            <td>出力に GCI を含めます</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_select_all_gci64">--gci64</a>
                </code>
              </p></th>
            <td>出力に GCI および行エポックを含めます</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_select_all_tupscan">--tupscan</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_select_all_tupscan">-t</a>
                </code>
              </p></th>
            <td>TUP 順序でスキャンします</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_select_all_nodata">--nodata</a>
                </code>
              </p></th>
            <td>テーブルカラムデータを出力しません</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody></table></div></div><br class="table-break"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="option_ndb_select_all_database"></a>
            <code class="option">--database=<em class="replaceable"><code>dbname</code></em></code>,
            <code class="option">-d</code> <em class="replaceable"><code>dbname</code></em>
          </p><a class="indexterm" name="idm45563215134576"></a><p>
            テーブルが見つかるデータベースの名前。
            デフォルト値は <code class="literal">TEST_DB</code> です。
          </p></li><li class="listitem"><p><a name="option_ndb_select_all_parallelism"></a>
            <code class="option">parallelism=<em class="replaceable"><code>#</code></em></code>,
            <code class="option">-p</code> <em class="replaceable"><code>#</code></em>
          </p><a class="indexterm" name="idm45563215129056"></a><p>
            並列の度合いを指定します。
          </p></li><li class="listitem"><p><a name="option_ndb_select_all_lock"></a>
            <code class="option">--lock=<em class="replaceable"><code>lock_type</code></em></code>,
            <code class="option">-l <em class="replaceable"><code>lock_type</code></em></code>
          </p><a class="indexterm" name="idm45563215124368"></a><a class="indexterm" name="idm45563215122384"></a><p>
            テーブルを読み取るときにロックを適用します。
            <em class="replaceable"><code>lock_type</code></em>
            に指定できる値を次に示します。
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <code class="literal">0</code>: 読み取りロック
              </p></li><li class="listitem"><p>
                <code class="literal">1</code>:
                ホールド付きの読み取りロック
              </p></li><li class="listitem"><p>
                <code class="literal">2</code>: 排他的読み取りロック
              </p></li></ul></div><p>
            このオプションにはデフォルト値はありません。
          </p></li><li class="listitem"><p><a name="option_ndb_select_all_order"></a>
            <code class="option">--order=<em class="replaceable"><code>index_name</code></em></code>,
            <code class="option">-o <em class="replaceable"><code>index_name</code></em></code>
          </p><a class="indexterm" name="idm45563215111696"></a><a class="indexterm" name="idm45563215109712"></a><p>
            <em class="replaceable"><code>index_name</code></em>
            という名前のインデックスの順序で出力します。
          </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
              これは、カラムではなくインデックスの名前です。インデックスは、作成時に明示的に名前が付けられている必要があります。
            </p></div></li><li class="listitem"><p><a name="option_ndb_select_all_descending"></a>
            <code class="option">--descending</code>, <code class="option">-z</code>
          </p><a class="indexterm" name="idm45563215104032"></a><a class="indexterm" name="idm45563215102048"></a><p>
            出力を降順でソートします。
            このオプションは、<code class="option">-o</code>
            (<code class="option">--order</code>)
            オプションを指定した場合にのみ使用できます。
          </p></li><li class="listitem"><p><a name="option_ndb_select_all_header"></a>
            <code class="option">--header=FALSE</code>
          </p><a class="indexterm" name="idm45563215097104"></a><a class="indexterm" name="idm45563215095120"></a><p>
            出力からカラムヘッダーを除外します。
          </p></li><li class="listitem"><p><a name="option_ndb_select_all_useHexFormat"></a>
            <code class="option">--useHexFormat</code> <code class="option">-x</code>
          </p><a class="indexterm" name="idm45563215091024"></a><a class="indexterm" name="idm45563215088960"></a><p>
            すべての数値を 16 進数形式で表示します。
            これは文字列または日時値に含まれている数値の出力には影響しません。
          </p></li><li class="listitem"><p><a name="option_ndb_select_all_delimiter"></a>
            <code class="option">--delimiter=<em class="replaceable"><code>character</code></em></code>,
            <code class="option">-D <em class="replaceable"><code>character</code></em></code>
          </p><a class="indexterm" name="idm45563215084048"></a><a class="indexterm" name="idm45563215082064"></a><p>
            <em class="replaceable"><code>character</code></em>
            をカラム区切り文字として使用します。
            この区切り文字で区切られるのはテーブルデータカラムのみです。
          </p><p>
            デフォルトの区切り文字はタブ文字です。
          </p></li><li class="listitem"><p><a name="option_ndb_select_all_disk"></a>
            <code class="option">--disk</code>
          </p><a class="indexterm" name="idm45563215077200"></a><a class="indexterm" name="idm45563215075216"></a><p>
            出力にディスクリファレンスカラムを追加します。
            このカラムが空でないのは、インデックスが設定されていないカラムを持つディスクデータテーブルの場合だけです。
          </p></li><li class="listitem"><p><a name="option_ndb_select_all_rowid"></a>
            <code class="option">--rowid</code>
          </p><a class="indexterm" name="idm45563215071136"></a><a class="indexterm" name="idm45563215069152"></a><p>
            行が保存されるフラグメントに関する情報を示す
            <code class="literal">ROWID</code> カラムを追加します。
          </p></li><li class="listitem"><p><a name="option_ndb_select_all_gci"></a>
            <code class="option">--gci</code>
          </p><a class="indexterm" name="idm45563215064688"></a><a class="indexterm" name="idm45563215062704"></a><p>
            各行が最後に更新されたグローバルチェックポイントを示す
            <code class="literal">GCI</code>
            カラムを出力に追加します。
            チェックポイントに関する詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-overview" title="23.1 NDB Cluster の概要">セクション23.1「NDB Cluster の概要」</a>および<a class="xref" href="mysql-cluster.html#mysql-cluster-log-events" title="23.5.3.2 NDB Cluster ログイベント">セクション23.5.3.2「NDB Cluster ログイベント」</a>を参照してください。
          </p></li><li class="listitem"><p><a name="option_ndb_select_all_gci64"></a>
            <code class="option">--gci64</code>
          </p><a class="indexterm" name="idm45563215057088"></a><a class="indexterm" name="idm45563215055104"></a><p>
            各行が最後に更新されたグローバルチェックポイントおよびこの更新が発生したエポックの数を示す
            <code class="literal">ROW$GCI64</code>
            カラムを出力に追加します。
          </p></li><li class="listitem"><p><a name="option_ndb_select_all_tupscan"></a>
            <code class="option">--tupscan</code>, <code class="option">-t</code>
          </p><a class="indexterm" name="idm45563215050080"></a><a class="indexterm" name="idm45563215048096"></a><p>
            タプルの順序でテーブルをスキャンします。
          </p></li><li class="listitem"><p><a name="option_ndb_select_all_nodata"></a>
            <code class="option">--nodata</code>
          </p><a class="indexterm" name="idm45563215044368"></a><a class="indexterm" name="idm45563215042384"></a><p>
            テーブルデータを省きます。
          </p></li></ul></div><h4><a name="idm45563215039728"></a>出力例</h4><p>
        MySQL <code class="literal">SELECT</code>
        ステートメントからの出力:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT * FROM ctest1.fish;</code></strong>
+----+-----------+
| id | name      |
+----+-----------+
|  3 | shark     |
|  6 | puffer    |
|  2 | tuna      |
|  4 | manta ray |
|  5 | grouper   |
|  1 | guppy     |
+----+-----------+
6 rows in set (0.04 sec)
</pre><p>
        同等の <span class="command"><strong>ndb_select_all</strong></span>
        呼び出しからの出力:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>./ndb_select_all -c localhost fish -d ctest1</code></strong>
id      name
3       [shark]
6       [puffer]
2       [tuna]
4       [manta ray]
5       [grouper]
1       [guppy]
6 rows returned

NDBT_ProgramExit: 0 - OK
</pre><p>
        <span class="command"><strong>ndb_select_all</strong></span>
        の出力では、すべての文字列値が大カッコ
        (<code class="literal">[</code>...<code class="literal">]</code>)
        で囲まれています。
        別の例として、次に示すように作成および移入されたテーブルを考えてみます:
      </p><pre class="programlisting">CREATE TABLE dogs (
    id INT(11) NOT NULL AUTO_INCREMENT,
    name VARCHAR(25) NOT NULL,
    breed VARCHAR(50) NOT NULL,
    PRIMARY KEY pk (id),
    KEY ix (name)
)
TABLESPACE ts STORAGE DISK
ENGINE=NDBCLUSTER;

INSERT INTO dogs VALUES
    ('', 'Lassie', 'collie'),
    ('', 'Scooby-Doo', 'Great Dane'),
    ('', 'Rin-Tin-Tin', 'Alsatian'),
    ('', 'Rosscoe', 'Mutt');
</pre><p>
        ほかのいくつかの <span class="command"><strong>ndb_select_all</strong></span>
        オプションの使用方法を次に示します。
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>./ndb_select_all -d ctest1 dogs -o ix -z --gci --disk</code></strong>
GCI     id name          breed        DISK_REF
834461  2  [Scooby-Doo]  [Great Dane] [ m_file_no: 0 m_page: 98 m_page_idx: 0 ]
834878  4  [Rosscoe]     [Mutt]       [ m_file_no: 0 m_page: 98 m_page_idx: 16 ]
834463  3  [Rin-Tin-Tin] [Alsatian]   [ m_file_no: 0 m_page: 34 m_page_idx: 0 ]
835657  1  [Lassie]      [Collie]     [ m_file_no: 0 m_page: 66 m_page_idx: 0 ]
4 rows returned

NDBT_ProgramExit: 0 - OK
</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-cluster-programs-ndb-select-count"></a>23.4.25 ndb_select_count — NDB テーブルの行数の出力</h3></div></div></div><a class="indexterm" name="idm45563215025136"></a><p>
        <span class="command"><strong>ndb_select_count</strong></span> は、1 つ以上の
        <code class="literal">NDB</code>
        テーブルの行数を出力します。
        単一テーブルでは、結果は MySQL ステートメント
        <code class="literal">SELECT COUNT(*) FROM
        <em class="replaceable"><code>tbl_name</code></em></code>
        を使用して取得される結果と同じになります。
      </p><h4><a name="idm45563215020480"></a>使用法</h4><pre class="programlisting">ndb_select_count [-c <em class="replaceable"><code>connection_string</code></em>] -d<em class="replaceable"><code>db_name</code></em> <em class="replaceable"><code>tbl_name</code></em>[, <em class="replaceable"><code>tbl_name2</code></em>[, ...]]
</pre><p>
        次のテーブルに、NDB Cluster
        ネイティブバックアップリストアプログラム
        <span class="command"><strong>ndb_select_count</strong></span>
        に固有のオプションを示します。
        追加説明が表のあとにあります。 ほとんどの
        NDB Cluster プログラム (<span class="command"><strong>ndb_select_count</strong></span>
        を含む)
        に共通のオプションについては、<a class="xref" href="mysql-cluster.html#mysql-cluster-program-options-common" title="23.4.32 NDB Cluster プログラムに共通のオプション — NDB Cluster プログラムに共通のオプション">セクション23.4.32「NDB Cluster プログラムに共通のオプション — NDB Cluster プログラムに共通のオプション」</a>
        を参照してください。
      </p><div class="table"><a name="mysql-cluster-ndb_select_count-options-table"></a><p class="title"><b>表 23.44 プログラムで使用されるコマンドライン・オプション ndb_select_count</b></p><div class="table-contents"><table frame="box" rules="all"><col style="width: 33%"><col style="width: 34%"><col style="width: 33%"><thead><tr>
            <th scope="col">形式</th>
            <th scope="col">説明</th>
            <th scope="col">追加、非推奨、または削除された</th>
          </tr></thead><tbody><tr>
            <th scope="row"><p>
                <code class="option">--database=dbname</code>,
              </p><p>
                <code class="option">-d</code>
              </p></th>
            <td>テーブルが見つかったデータベースの名前</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">--parallelism=#</code>,
              </p><p>
                <code class="option">-p</code>
              </p></th>
            <td>並列性の度合い</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">--lock=#</code>,
              </p><p>
                <code class="option">-l</code>
              </p></th>
            <td>ロックタイプ</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody></table></div></div><br class="table-break"><p>
        同じデータベース内の複数のテーブルの行数を取得するには、<span class="bold"><strong>「出力例」</strong></span>に示されているように、このコマンドを呼び出すときにテーブル名をスペースで区切ってリストします。
      </p><h4><a name="idm45563214989760"></a>出力例</h4><pre class="programlisting">shell&gt; <strong class="userinput"><code>./ndb_select_count -c localhost -d ctest1 fish dogs</code></strong>
6 records in table fish
4 records in table dogs

NDBT_ProgramExit: 0 - OK
</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-cluster-programs-ndb-setup-py"></a>23.4.26 ndb_setup.py — NDB Cluster 用ブラウザベースの Auto-Installer の起動 (非推奨)</h3></div></div></div><a class="indexterm" name="idm45563214986576"></a><a class="indexterm" name="idm45563214985328"></a><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>この機能は非推奨になっており、使用しないようにしてください。 NDB Cluster の将来のバージョンで削除される可能性があります。 </p></div><p>
        <span class="command"><strong>ndb_setup.py</strong></span> は NDB Cluster Auto-Installer
        を起動し、デフォルトの Web
        ブラウザでインストーラの Start
        ページを開きます。
      </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">重要</div><p>
          このプログラムは、<code class="literal">mysql</code>、システム
          <code class="literal">root</code>
          またはその他の管理アカウントではなく、通常のユーザーとして起動することを目的としています。
        </p></div><p>
        このセクションでは、コマンド行ツールのみの使用方法およびプログラムオプションについて説明します。
        <span class="command"><strong>ndb_setup.py</strong></span>
        を呼び出すと開始される Auto-Installer GUI
        の使用方法については、<a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-install-auto.html" target="_top">The NDB Cluster Auto-Installer (NDB 7.5) (No longer supported)</a>を参照してください。
      </p><h4><a name="idm45563214976400"></a>使用法</h4><p>
        すべてのプラットフォーム:
      </p><pre class="programlisting">ndb_setup.py [<em class="replaceable"><code>options</code></em>]
</pre><a class="indexterm" name="idm45563214974128"></a><a class="indexterm" name="idm45563214972256"></a><p>
        または、Windows プラットフォームのみ:
      </p><pre class="programlisting">setup.bat [<em class="replaceable"><code>options</code></em>]
</pre><p>
        次のテーブルには、NDB Cluster
        のインストールおよび構成プログラム
        <span class="command"><strong>ndb_setup.py</strong></span>
        でサポートされるすべてのオプションが含まれています。
        追加説明が表のあとにあります。
      </p><div class="table"><a name="mysql-cluster-ndb_setup_py-options-table"></a><p class="title"><b>表 23.45 プログラムで使用されるコマンドライン・オプション ndb_setup.py</b></p><div class="table-contents"><table frame="box" rules="all"><col style="width: 33%"><col style="width: 34%"><col style="width: 33%"><thead><tr>
            <th scope="col">形式</th>
            <th scope="col">説明</th>
            <th scope="col">追加、非推奨、または削除された</th>
          </tr></thead><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_setup_py_browser-start-page">--browser-start-page=filename</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_setup_py_browser-start-page">-s</a>
                </code>
              </p></th>
            <td>起動時に web ブラウザが開くページ</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_setup_py_ca-certs-file">--ca-certs-file=filename</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_setup_py_ca-certs-file">-a</a>
                </code>
              </p></th>
            <td>サーバーへの接続が許可されているクライアント証明書のリストを含むファイル</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_setup_py_cert-file">--cert-file=filename</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_setup_py_cert-file">-c</a>
                </code>
              </p></th>
            <td>サーバーを識別する X509 証明書を含むファイル</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_setup_py_debug-level">--debug-level=level</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_setup_py_debug-level">-d</a>
                </code>
              </p></th>
            <td>Python
              ロギングモジュールのデバッグレベル。DEBUG、INFO、WARNING
              (デフォルト)、ERROR または CRITICAL
              のいずれか</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_setup_py_help">--help</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_setup_py_help">-h</a>
                </code>
              </p></th>
            <td>ヘルプメッセージを出力します</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_setup_py_key-file">--key-file=file</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_setup_py_key-file">-k</a>
                </code>
              </p></th>
            <td>プライベートキーが含まれているファイルを指定します
              (--cert-file に含まれていない場合)</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_setup_py_no-browser">--no-browser</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_setup_py_no-browser">-n</a>
                </code>
              </p></th>
            <td>ブラウザで開始ページを開かず、単にツールを起動</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_setup_py_port">--port=#</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_setup_py_port">-p</a>
                </code>
              </p></th>
            <td>web サーバーで使用されるポートを指定</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_setup_py_server-log-file">--server-log-file=file</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_setup_py_server-log-file">-o</a>
                </code>
              </p></th>
            <td>リクエストをこのファイルに記録します。かわりに、'-'を使用して
              stderr に強制的にロギング</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_setup_py_server-name">--server-name=name</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_setup_py_server-name">-N</a>
                </code>
              </p></th>
            <td>接続先のサーバーの名前</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_setup_py_use-http">--use-http</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_setup_py_use-http">-H</a>
                </code>
              </p></th>
            <td>非暗号化 (HTTP) クライアント/サーバー接続の使用</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_setup_py_use-https">--use-https</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_setup_py_use-https">-S</a>
                </code>
              </p></th>
            <td>暗号化された (HTTPS)
              クライアント/サーバー接続の使用</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody></table></div></div><br class="table-break"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="option_ndb_setup_py_browser-start-page"></a>
            <code class="option">--browser-start-page=<em class="replaceable"><code>file</code></em></code>,
            <code class="option">-s</code>
          </p><a class="indexterm" name="idm45563214882272"></a><a class="indexterm" name="idm45563214880208"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for browser-start-page"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--browser-start-page=filename</code></td>
</tr><tr><th>型</th>
<td>文字列</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">index.html</code></td>
</tr></tbody></table></div><p>
            ブラウザでインストールおよび構成の「Start」ページとして開くファイルを指定します。
            デフォルトは <code class="filename">index.html</code> です。
          </p></li><li class="listitem"><p><a name="option_ndb_setup_py_ca-certs-file"></a>
            <code class="option">--ca-certs-file=<em class="replaceable"><code>file</code></em></code>,
            <code class="option">-a</code>
          </p><a class="indexterm" name="idm45563214865328"></a><a class="indexterm" name="idm45563214863264"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ca-certs-file"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--ca-certs-file=filename</code></td>
</tr><tr><th>型</th>
<td>ファイル名</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">[none]</code></td>
</tr></tbody></table></div><p>
            サーバーに接続できるクライアント証明書のリストが含まれているファイルを指定します。
            デフォルトは空の文字列であり、クライアント認証が使用されないことを意味します。
          </p></li><li class="listitem"><p><a name="option_ndb_setup_py_cert-file"></a>
            <code class="option">--cert-file=<em class="replaceable"><code>file</code></em></code>,
            <code class="option">-c</code>
          </p><a class="indexterm" name="idm45563214848784"></a><a class="indexterm" name="idm45563214846800"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for cert-file"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--cert-file=filename</code></td>
</tr><tr><th>型</th>
<td>ファイル名</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">/usr/share/mysql/mcc/cfg.pem</code></td>
</tr></tbody></table></div><p>
            サーバーを識別する X509
            証明書が含まれているファイルを指定します。
            証明書は自己署名できます。 デフォルトは
            <code class="filename">cfg.pem</code> です。
          </p></li><li class="listitem"><p><a name="option_ndb_setup_py_debug-level"></a>
            <code class="option">--debug-level=<em class="replaceable"><code>level</code></em></code>,
            <code class="option">-d</code>
          </p><a class="indexterm" name="idm45563214831920"></a><a class="indexterm" name="idm45563214829936"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for debug-level"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--debug-level=level</code></td>
</tr><tr><th>型</th>
<td>列挙</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">WARNING</code></td>
</tr><tr><th>有効な値</th>
<td><p class="valid-value"><code class="literal">WARNING</code></p><p class="valid-value"><code class="literal">DEBUG</code></p><p class="valid-value"><code class="literal">INFO</code></p><p class="valid-value"><code class="literal">ERROR</code></p><p class="valid-value"><code class="literal">CRITICAL</code></p></td>
</tr></tbody></table></div><p>
            Python
            ロギングモジュールデバッグレベルを設定します。
            これは、<code class="literal">DEBUG</code>、<code class="literal">INFO</code>、<code class="literal">WARNING</code>、<code class="literal">ERROR</code>、または
            <code class="literal">CRITICAL</code> のいずれかです。
            <code class="literal">WARNING</code> がデフォルトです。
          </p></li><li class="listitem"><p><a name="option_ndb_setup_py_help"></a>
            <code class="option">--help</code>, <code class="option">-h</code>
          </p><a class="indexterm" name="idm45563214805984"></a><a class="indexterm" name="idm45563214804000"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for help"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--help</code></td>
</tr></tbody></table></div><p>
            ヘルプメッセージを出力します。
          </p></li><li class="listitem"><p><a name="option_ndb_setup_py_key-file"></a>
            <code class="option">--key-file=<em class="replaceable"><code>file</code></em></code>,
            <code class="option">-d</code>
          </p><a class="indexterm" name="idm45563214794352"></a><a class="indexterm" name="idm45563214792368"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for key-file"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--key-file=file</code></td>
</tr><tr><th>型</th>
<td>ファイル名</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">[none]</code></td>
</tr></tbody></table></div><p>
            X509 証明書ファイル
            (<code class="option">--cert-file</code>)
            にプライベートキーが含まれていない場合、これが含まれているファイルを指定します。
            デフォルトは空の文字列であり、そのようなファイルが使用されないことを意味します。
          </p></li><li class="listitem"><p><a name="option_ndb_setup_py_no-browser"></a>
            <code class="option">--no-browser</code>, <code class="option">-n</code>
          </p><a class="indexterm" name="idm45563214777472"></a><a class="indexterm" name="idm45563214775488"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for no-browser"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--no-browser</code></td>
</tr></tbody></table></div><p>
            インストールおよび構成ツールを開始しますが、ブラウザで「Start」ページを開きません。
          </p></li><li class="listitem"><p><a name="option_ndb_setup_py_port"></a>
            <code class="option">--port=<em class="replaceable"><code>#</code></em></code>,
            <code class="option">-p</code>
          </p><a class="indexterm" name="idm45563214765696"></a><a class="indexterm" name="idm45563214763712"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for port"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--port=#</code></td>
</tr><tr><th>型</th>
<td>数値</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">8081</code></td>
</tr><tr><th>最小値</th>
<td><code class="literal">1</code></td>
</tr><tr><th>最大値</th>
<td><code class="literal">65535</code></td>
</tr></tbody></table></div><p>
            Web
            サーバーによって使用されるポートを設定します。
            デフォルトは 8081 です。
          </p></li><li class="listitem"><p><a name="option_ndb_setup_py_server-log-file"></a>
            <code class="option">--server-log-file=<em class="replaceable"><code>file</code></em></code>,
            <code class="option">-o</code>
          </p><a class="indexterm" name="idm45563214744864"></a><a class="indexterm" name="idm45563214742800"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for server-log-file"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--server-log-file=file</code></td>
</tr><tr><th>型</th>
<td>ファイル名</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">ndb_setup.log</code></td>
</tr><tr><th>有効な値</th>
<td><p class="valid-value"><code class="literal">ndb_setup.log</code></p><p class="valid-value"><code class="literal">-</code> (stderr にログを記録します)</p></td>
</tr></tbody></table></div><p>
            要求のログをこのファイルに記録します。
            デフォルトは <code class="filename">ndb_setup.log</code>
            です。 ファイルではなく <code class="literal">stderr</code>
            にロギングするように指定するには、ファイル名に
            <code class="literal">-</code> (ダッシュ文字)
            を使用します。
          </p></li><li class="listitem"><p><a name="option_ndb_setup_py_server-name"></a>
            <code class="option">--server-name=<em class="replaceable"><code>host</code></em></code>,
            <code class="option">-N</code>
          </p><a class="indexterm" name="idm45563214722528"></a><a class="indexterm" name="idm45563214720544"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for server-name"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--server-name=name</code></td>
</tr><tr><th>型</th>
<td>文字列</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">localhost</code></td>
</tr></tbody></table></div><p>
            ブラウザが接続するときに使用するホスト名または
            IP アドレスを指定します。 デフォルトは
            <code class="literal">localhost</code> です。
          </p></li><li class="listitem"><p><a name="option_ndb_setup_py_use-http"></a>
            <code class="option">--use-http</code>, <code class="option">-H</code>
          </p><a class="indexterm" name="idm45563214706016"></a><a class="indexterm" name="idm45563214704032"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for use-http"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--use-http</code></td>
</tr></tbody></table></div><p>
            ブラウザで HTTP
            を使用してサーバーに接続します。
            つまり、接続は暗号化されず、どのような方法でも保護されません。
          </p></li><li class="listitem"><p><a name="option_ndb_setup_py_use-https"></a>
            <code class="option">--use-https</code>, <code class="option">-S</code>
          </p><a class="indexterm" name="idm45563214694368"></a><a class="indexterm" name="idm45563214692384"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for use-https"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--use-https</code></td>
</tr></tbody></table></div><p>
            ブラウザがサーバーに対してセキュア (HTTPS)
            接続を使用します。
          </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-cluster-programs-ndb-show-tables"></a>23.4.27 ndb_show_tables — NDB テーブルのリストの表示</h3></div></div></div><a class="indexterm" name="idm45563214683408"></a><p>
        <span class="command"><strong>ndb_show_tables</strong></span>
        は、クラスタ内のすべての
        <code class="literal">NDB</code>
        データベースオブジェクトのリストを表示します。
        デフォルトでは、これにはユーザーが作成したテーブルと
        <code class="literal">NDB</code>
        システムテーブルの両方だけでなく、<code class="literal">NDB</code>
        固有のインデックス、内部トリガー、NDB Cluster
        ディスクデータオブジェクトも含まれます。
      </p><p>
        次のテーブルに、NDB Cluster
        ネイティブバックアップリストアプログラム
        <span class="command"><strong>ndb_show_tables</strong></span>
        に固有のオプションを示します。
        追加説明が表のあとにあります。 ほとんどの
        NDB Cluster プログラム (<span class="command"><strong>ndb_show_tables</strong></span>
        を含む)
        に共通のオプションについては、<a class="xref" href="mysql-cluster.html#mysql-cluster-program-options-common" title="23.4.32 NDB Cluster プログラムに共通のオプション — NDB Cluster プログラムに共通のオプション">セクション23.4.32「NDB Cluster プログラムに共通のオプション — NDB Cluster プログラムに共通のオプション」</a>
        を参照してください。
      </p><div class="table"><a name="mysql-cluster-ndb_show_tables-options-table"></a><p class="title"><b>表 23.46 プログラムで使用されるコマンドライン・オプション ndb_show_tables</b></p><div class="table-contents"><table frame="box" rules="all"><col style="width: 33%"><col style="width: 34%"><col style="width: 33%"><thead><tr>
            <th scope="col">形式</th>
            <th scope="col">説明</th>
            <th scope="col">追加、非推奨、または削除された</th>
          </tr></thead><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_show_tables_database">--database=string</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_show_tables_database">-d</a>
                </code>
              </p></th>
            <td>テーブルが見つかったデータベースを指定します。データベース名の後にはテーブル名が続く必要があります</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_show_tables_loops">--loops=#</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_show_tables_loops">-l</a>
                </code>
              </p></th>
            <td>出力を繰り返す回数</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_show_tables_parsable">--parsable</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_show_tables_parsable">-p</a>
                </code>
              </p></th>
            <td>MySQL LOAD DATA ステートメントに適した出力を返します</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_show_tables_show-temp-status">--show-temp-status</a>
                </code>
              </p></th>
            <td>テーブル一時フラグを表示します</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_show_tables_type">--type=#</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_show_tables_type">-t</a>
                </code>
              </p></th>
            <td>このタイプのオブジェクトに出力を制限します</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_show_tables_unqualified">--unqualified</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_show_tables_unqualified">-u</a>
                </code>
              </p></th>
            <td>テーブル名を修飾しません</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody></table></div></div><br class="table-break"><h4><a name="idm45563214630560"></a>使用法</h4><pre class="programlisting">ndb_show_tables [-c <em class="replaceable"><code>connection_string</code></em>]
</pre><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="option_ndb_show_tables_database"></a>
            <code class="option">--database</code>, <code class="option">-d</code>
          </p><a class="indexterm" name="idm45563214626896"></a><a class="indexterm" name="idm45563214624912"></a><p>
            目的のテーブルが見つかるデータベースの名前を指定します。
            このオプションを指定する場合、テーブルの名前はデータベース名の後に指定する必要があります。
          </p><p>
            このオプションが指定されておらず、<code class="literal">TEST_DB</code>
            データベースにテーブルが見つからない場合、<span class="command"><strong>ndb_show_tables</strong></span>
            は警告を発行します。
          </p></li><li class="listitem"><p><a name="option_ndb_show_tables_loops"></a>
            <code class="option">--loops</code>, <code class="option">-l</code>
          </p><a class="indexterm" name="idm45563214618384"></a><a class="indexterm" name="idm45563214616400"></a><p>
            ユーティリティーを実行すべき回数を指定します。
            このオプションを指定しない場合はこれは 1
            ですが、このオプションを使用する場合はそれに整数の引数を指定する必要があります。
          </p></li><li class="listitem"><p><a name="option_ndb_show_tables_parsable"></a>
            <code class="option">--parsable</code>, <code class="option">-p</code>
          </p><a class="indexterm" name="idm45563214611872"></a><a class="indexterm" name="idm45563214609888"></a><p>
            このオプションを使用すると、出力は
            <code class="literal">LOAD DATA</code>
            での使用に適した形式になります。
          </p></li><li class="listitem"><p><a name="option_ndb_show_tables_show-temp-status"></a>
            <code class="option">--show-temp-status</code>
          </p><a class="indexterm" name="idm45563214605152"></a><a class="indexterm" name="idm45563214603088"></a><p>
            指定した場合は、一時テーブルが表示されます。
          </p></li><li class="listitem"><p><a name="option_ndb_show_tables_type"></a>
            <code class="option">--type</code>, <code class="option">-t</code>
          </p><a class="indexterm" name="idm45563214598896"></a><a class="indexterm" name="idm45563214596912"></a><p>
            次に示す整数型コードで指定された 1
            種類のオブジェクトに出力を制限するために使用できます。
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <code class="literal">1</code>: システムテーブル
              </p></li><li class="listitem"><p>
                <code class="literal">2</code>:
                ユーザーが作成したテーブル
              </p></li><li class="listitem"><p>
                <code class="literal">3</code>:
                一意のハッシュインデックス
              </p></li></ul></div><p>
            その他の値を指定すると、すべての
            <code class="literal">NDB</code>
            データベースオブジェクトが一覧されます
            (デフォルト)。
          </p></li><li class="listitem"><p><a name="option_ndb_show_tables_unqualified"></a>
            <code class="option">--unqualified</code>, <code class="option">-u</code>
          </p><a class="indexterm" name="idm45563214586016"></a><a class="indexterm" name="idm45563214584032"></a><p>
            これを指定すると、修飾されていないオブジェクト名が表示されます。
          </p></li></ul></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
          MySQL
          からアクセスできるのは、ユーザーが作成した「NDB
          Cluster」テーブルのみです。<code class="literal">SYSTAB_0</code>
          などのシステムテーブルは、<span class="command"><strong>mysqld</strong></span>
          には表示されません。
          ただし、<span class="command"><strong>ndb_select_all</strong></span> などの
          <code class="literal">NDB</code> API
          アプリケーションを使用してシステムテーブルの内容を調べることができます
          (<a class="xref" href="mysql-cluster.html#mysql-cluster-programs-ndb-select-all" title="23.4.24 ndb_select_all — NDB テーブルの行の出力">セクション23.4.24「ndb_select_all — NDB テーブルの行の出力」</a>を参照してください)。
        </p></div><p>
        NDB 8.0.20
        より前では、このプログラムは、<code class="literal">NDBT</code>
        テストライブラリへの不要な依存関係のため、実行の完了時に
        <code class="literal">NDBT_ProgramExit -
        <em class="replaceable"><code>status</code></em></code>
        を出力しました。
        この依存関係は削除され、余分な出力がなくなりました。
      </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-cluster-programs-ndb-size-pl"></a>23.4.28 ndb_size.pl — NDBCLUSTER サイズ要件エスティメータ</h3></div></div></div><a class="indexterm" name="idm45563214572960"></a><p>
        これは、<code class="literal">NDBCLUSTER</code>
        ストレージエンジンを使用するように変更された場合に、MySQL
        データベースによって要求される空き領域の大きさを見積もるために使用できる
        Perl スクリプトです。
        このセクションで説明するほかのユーティリティーとは異なり、NDB
        Cluster にアクセスする必要はありません
        (実際には、これを行う理由はありません)。
        ただし、テストするデータベースがある MySQL
        サーバーにアクセスする必要はあります。
      </p><h4><a name="idm45563214569712"></a>要件</h4><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            実行されている MySQL サーバー。
            サーバーインスタンスは NDB Cluster
            をサポートする必要はありません。
          </p></li><li class="listitem"><p>
            Perl の有効なインストール。
          </p></li><li class="listitem"><p>
            <code class="literal">DBI</code> モジュール (まだ Perl
            インストールの一部でない場合は、CPAN
            から取得できます) (多くの Linux
            およびその他のオペレーティングシステム配布では、このライブラリの独自のパッケージが提供されています)。
          </p></li><li class="listitem"><p>
            必要な権限を持つ MySQL
            ユーザーアカウント。
            既存のアカウントを使用したくない場合は、<code class="literal">GRANT
            USAGE ON <em class="replaceable"><code>db_name</code></em>.*</code>
            を使用して作成するだけでこの用途には十分です。ここで、<em class="replaceable"><code>db_name</code></em>
            は検査するデータベースの名前です。
          </p></li></ul></div><p>
        <code class="filename">ndb_size.pl</code>
        は、<code class="filename">storage/ndb/tools</code> 内の MySQL
        ソースでも見つかります。
      </p><p>
        次のテーブルに、NDB Cluster プログラム
        <span class="command"><strong>ndb_size.pl</strong></span>
        に固有のオプションを示します。
        追加説明が表のあとにあります。 ほとんどの
        NDB Cluster プログラム (<span class="command"><strong>ndb_size.pl</strong></span>
        を含む)
        に共通のオプションについては、<a class="xref" href="mysql-cluster.html#mysql-cluster-program-options-common" title="23.4.32 NDB Cluster プログラムに共通のオプション — NDB Cluster プログラムに共通のオプション">セクション23.4.32「NDB Cluster プログラムに共通のオプション — NDB Cluster プログラムに共通のオプション」</a>
        を参照してください。
      </p><div class="table"><a name="mysql-cluster-ndb_size_pl-options-table"></a><p class="title"><b>表 23.47 プログラムで使用されるコマンドライン・オプション ndb_size.pl</b></p><div class="table-contents"><table frame="box" rules="all"><col style="width: 33%"><col style="width: 34%"><col style="width: 33%"><thead><tr>
            <th scope="col">形式</th>
            <th scope="col">説明</th>
            <th scope="col">追加、非推奨、または削除された</th>
          </tr></thead><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_size_pl_options">--database=dbname</a>
                </code>
              </p></th>
            <td>検査するデータベース。カンマ区切りのリスト。デフォルトは
              ALL
              (サーバー上のすべてのデータベースを使用)
              です</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_size_pl_options">--hostname[:port]</a>
                </code>
              </p></th>
            <td>ホストおよびオプションポートを host[:port]
              として指定します</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_size_pl_options">--socket=file_name</a>
                </code>
              </p></th>
            <td>接続先のソケットの指定</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_size_pl_options">--user=string</a>
                </code>
              </p></th>
            <td>MySQL ユーザー名の指定</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_size_pl_options">--password=string</a>
                </code>
              </p></th>
            <td>MySQL ユーザーパスワードの指定</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_size_pl_format">--format=string</a>
                </code>
              </p></th>
            <td>出力形式 (テキストまたは HTML) を設定します</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_size_pl_options">--excludetables=tbl_list</a>
                </code>
              </p></th>
            <td>カンマ区切りリストのテーブルをスキップ</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_size_pl_options">--excludedbs=db_list</a>
                </code>
              </p></th>
            <td>カンマ区切りリストのデータベースをスキップ</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_size_pl_debugging">--savequeries=file</a>
                </code>
              </p></th>
            <td>指定したファイルにデータベースのすべてのクエリーを保存</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_size_pl_debugging">--loadqueries=file</a>
                </code>
              </p></th>
            <td>指定されたファイルからすべてのクエリーをロードします。データベースには接続しません</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_size_pl_options">--real_table_name=table</a>
                </code>
              </p></th>
            <td>一意のインデックスサイズ計算を処理するテーブルを指定</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody></table></div></div><br class="table-break"><h4><a name="idm45563214492000"></a>使用法</h4><pre class="programlisting">perl ndb_size.pl [--database={<em class="replaceable"><code>db_name</code></em>|ALL}] [--hostname=<em class="replaceable"><code>host</code></em>[:<em class="replaceable"><code>port</code></em>]] [--socket=<em class="replaceable"><code>socket</code></em>] \
      [--user=<em class="replaceable"><code>user</code></em>] [--password=<em class="replaceable"><code>password</code></em>]  \
      [--help|-h] [--format={html|text}] \
      [--loadqueries=<em class="replaceable"><code>file_name</code></em>] [--savequeries=<em class="replaceable"><code>file_name</code></em>]
</pre><p><a name="option_ndb_size_pl_options"></a>
        デフォルトでは、このユーティリティーはサーバー上のすべてのデータベースを分析しようとします。
        <code class="option">--database</code>
        オプションを使用すると、単一データベースを指定できます。デフォルト動作を明示的に指定するには、データベースの名前に
        <code class="literal">ALL</code> を使用します。 1
        つ以上のデータベースを除外するには、<code class="option">--excludedbs</code>
        オプションを使用して、スキップするデータベース名のカンマ区切りのリストを指定します。
        同様に、特定のテーブルをスキップするには、オプションの
        <code class="option">--excludetables</code>
        オプションに続けて、それらの名前をカンマで区切ってリストします。
        ホスト名を指定するには、<code class="option">--hostname</code>
        を使用します。デフォルトは
        <code class="literal">localhost</code> です。
        ホストに加えてポートを指定するには、<code class="option">--hostname</code>
        の値に
        <em class="replaceable"><code>host</code></em>:<em class="replaceable"><code>port</code></em>
        形式を使用します。 デフォルトのポート番号は
        3306 です。
        必要に応じて、ソケットも指定できます。デフォルトは
        <code class="filename">/var/lib/mysql.sock</code> です。 MySQL
        のユーザー名およびパスワードは、表示されている対応するオプションで指定できます。
        出力の形式を制御するには、<code class="option">--format</code>
        オプションを使用します。これには、値
        <code class="literal">html</code> または <code class="literal">text</code>
        を指定でき、<code class="literal">text</code>
        がデフォルトです。
        テキスト出力の例を次に示します。
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>ndb_size.pl --database=test --socket=/tmp/mysql.sock</code></strong>
ndb_size.pl report for database: 'test' (1 tables)
--------------------------------------------------
Connected to: DBI:mysql:host=localhost;mysql_socket=/tmp/mysql.sock

Including information for versions: 4.1, 5.0, 5.1

test.t1
-------

DataMemory for Columns (* means varsized DataMemory):
         Column Name            Type  Varsized   Key  4.1  5.0   5.1
     HIDDEN_NDB_PKEY          bigint             PRI    8    8     8
                  c2     varchar(50)         Y         52   52    4*
                  c1         int(11)                    4    4     4
                                                       --   --    --
Fixed Size Columns DM/Row                              64   64    12
   Varsize Columns DM/Row                               0    0     4

DataMemory for Indexes:
   Index Name                 Type        4.1        5.0        5.1
      PRIMARY                BTREE         16         16         16
                                           --         --         --
       Total Index DM/Row                  16         16         16

IndexMemory for Indexes:
               Index Name        4.1        5.0        5.1
                  PRIMARY         33         16         16
                                  --         --         --
           Indexes IM/Row         33         16         16

Summary (for THIS table):
                                 4.1        5.0        5.1
    Fixed Overhead DM/Row         12         12         16
           NULL Bytes/Row          4          4          4
           DataMemory/Row         96         96         48
                    (Includes overhead, bitmap and indexes)

  Varsize Overhead DM/Row          0          0          8
   Varsize NULL Bytes/Row          0          0          4
       Avg Varside DM/Row          0          0         16

                 No. Rows          0          0          0

        Rows/32kb DM Page        340        340        680
Fixedsize DataMemory (KB)          0          0          0

Rows/32kb Varsize DM Page          0          0       2040
  Varsize DataMemory (KB)          0          0          0

         Rows/8kb IM Page        248        512        512
         IndexMemory (KB)          0          0          0

Parameter Minimum Requirements
------------------------------
* indicates greater than default

                Parameter     Default        4.1         5.0         5.1
          DataMemory (KB)       81920          0           0           0
       NoOfOrderedIndexes         128          1           1           1
               NoOfTables         128          1           1           1
         IndexMemory (KB)       18432          0           0           0
    NoOfUniqueHashIndexes          64          0           0           0
           NoOfAttributes        1000          3           3           3
             NoOfTriggers         768          5           5           5
</pre><p><a name="option_ndb_size_pl_debugging"></a>
        デバッグ目的で、このスクリプトによって実行されるクエリーを含む
        Perl
        配列は、を使用して指定されたファイルから
        <code class="option">--savequeries</code>
        を使用してファイルに保存できます。スクリプトの実行中に読み取られるこのような配列を含むファイルは、<code class="option">--loadqueries</code>
        を使用して指定できます。
        これらのオプションにはデフォルト値はありません。
      </p><p><a name="option_ndb_size_pl_format"></a>
        出力を HTML
        形式で生成するには、次に示すように
        <code class="option">--format</code>
        オプションを使用して出力をファイルにリダイレクトします。
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>ndb_size.pl --database=test --socket=/tmp/mysql.sock --format=html &gt; ndb_size.html</code></strong>
</pre><p>
        (リダイレクトしない場合、出力は
        <code class="literal">stdout</code> に送られます)。
      </p><p>
        このスクリプトの出力には次の情報が含まれています。
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            分析されるテーブルに対応するために必要な
            <code class="literal">DataMemory</code>,
            <code class="literal">IndexMemory</code>,
            <code class="literal">MaxNoOfTables</code>,
            <code class="literal">MaxNoOfAttributes</code>,
            <code class="literal">MaxNoOfOrderedIndexes</code>
            および
            <code class="literal">MaxNoOfTriggers</code>
            構成パラメータの最小値。
          </p></li><li class="listitem"><p>
            データベースに定義されているすべてのテーブル、属性、順序付けされたインデックス、および一意のハッシュインデックスのメモリー要件。
          </p></li><li class="listitem"><p>
            テーブルおよびテーブル行ごとに必要な
            <code class="literal">IndexMemory</code>
            および
            <code class="literal">DataMemory</code>。
          </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-cluster-programs-ndb-top"></a>23.4.29 ndb_top — NDB スレッドの CPU 使用率情報の表示</h3></div></div></div><a class="indexterm" name="idm45563214453344"></a><p>
        <span class="command"><strong>ndb_top</strong></span> は、NDB Cluster
        データノード上の NDB スレッドによる CPU
        使用率に関する実行中の情報を端末に表示します。
        出力では、各スレッドは 2
        行で表され、最初にシステム統計が表示され、2
        行目にスレッドの測定統計が表示されます。
      </p><p>
        <span class="command"><strong>ndb_top</strong></span> は、MySQL NDB Cluster 7.6.3
        以降で使用できます。
      </p><h4><a name="idm45563214449168"></a>使用法</h4><pre class="programlisting">ndb_top [-h <em class="replaceable"><code>hostname</code></em>] [-t <em class="replaceable"><code>port</code></em>] [-u <em class="replaceable"><code>user</code></em>] [-p <em class="replaceable"><code>pass</code></em>] [-n <em class="replaceable"><code>node_id</code></em>]
</pre><p>
        <span class="command"><strong>ndb_top</strong></span> は、クラスタの SQL
        ノードとして実行中の MySQL Server
        に接続します。
        デフォルトでは、<code class="literal">localhost</code>
        およびポート 3306 で実行されている
        <span class="command"><strong>mysqld</strong></span>
        に、パスワードを指定せずに MySQL
        <code class="literal">root</code>
        ユーザーとして接続しようとします。
        デフォルトのホストおよびポートは、それぞれ
        <code class="option">--host</code> (<code class="option">-h</code>)
        および <code class="option">--port</code>
        (<code class="option">-t</code>)
        を使用してオーバーライドできます。 MySQL
        のユーザーおよびパスワードを指定するには、<code class="option">--user</code>
        (<code class="option">-u</code>) および
        <code class="option">--passwd</code> (<code class="option">-p</code>)
        オプションを使用します。
        このユーザーは、<code class="literal">ndbinfo</code>
        データベース内のテーブルを読み取ることができる必要があります
        (<span class="command"><strong>ndb_top</strong></span>
        では、<code class="literal">ndbinfo.cpustat</code>
        および関連するテーブルの情報が使用されます)。
      </p><p>
        MySQL
        のユーザーアカウントおよびパスワードの詳細は、<a class="xref" href="security.html#access-control" title="6.2 アクセス制御とアカウント管理">セクション6.2「アクセス制御とアカウント管理」</a>
        を参照してください。
      </p><p>
        出力はプレーンテキストまたは ASCII
        グラフとして使用できます。これは、それぞれ
        <code class="option">--text</code> (<code class="option">-x</code>)
        および <code class="option">--graph</code>
        (<code class="option">-g</code>)
        オプションを使用して指定できます。 これら 2
        つの表示モードは同じ情報を提供し、同時に使用できます。
        少なくとも 1
        つの表示モードを使用する必要があります。
      </p><p>
        グラフの色表示は、デフォルトでサポートされ、有効になっています
        (<code class="option">--color</code> または
        <code class="option">-c</code> オプション)。
        カラーサポートが有効な場合、グラフ表示には
        OS ユーザー時間が青、OS
        システム時間が緑、アイドル時間が空白で表示されます。
        測定負荷の場合、実行時間には青、送信時間には黄色、送信バッファのフル待機に費やされた時間には赤、アイドル時間には空白が使用されます。
        グラフ表示に表示されるパーセンテージは、アイドル状態でないすべてのスレッドのパーセンテージの合計です。
        現在、色は構成できません。かわりに、<code class="option">--skip-color</code>
        を使用してグレースケールを使用できます。
      </p><p>
        ソートされたビュー
        (<code class="option">--sort</code>、<code class="option">-r</code>)
        は、測定された負荷の最大および OS
        によって報告された負荷に基づきます。
        これらの表示は、<code class="option">--measured-load</code>
        (<code class="option">-m</code>) および
        <code class="option">--os-load</code> (<code class="option">-o</code>)
        オプションを使用して有効または無効にできます。
        少なくとも 1
        つの荷重の表示を有効にする必要があります。
      </p><p>
        プログラムは、<code class="option">--node-id</code>
        (<code class="option">-n</code>) オプションで指定されたノード
        ID
        を持つデータノードから統計情報を取得しようとします。指定されていない場合、これは
        1 です。<span class="command"><strong>ndb_top</strong></span>
        は、他のタイプのノードに関する情報を提供できません。
      </p><p>
        ビュー自体が端末ウィンドウの高さと幅に合わせて調整されます。サポートされる最小幅は
        76 文字です。
      </p><p>
        一度起動すると、<span class="command"><strong>ndb_top</strong></span>
        は強制的に終了するまで継続して実行されます。<code class="literal">Ctrl-C</code>
        を使用してプログラムを終了できます。
        表示は毎秒 1
        回更新されます。異なる遅延間隔を設定するには、<code class="option">--sleep-time</code>
        (<code class="option">-s</code>) を使用します。
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
          <span class="command"><strong>ndb_top</strong></span> は、macOS、Linux および
          Solaris で使用できます。 現在、Windows
          プラットフォームではサポートされていません。
        </p></div><p>
        次のテーブルに、NDB Cluster プログラム
        <span class="command"><strong>ndb_top</strong></span>
        に固有のすべてのオプションを示します。
        追加説明が表のあとにあります。
      </p><div class="table"><a name="mysql-cluster-ndb_top-options-table"></a><p class="title"><b>表 23.48 プログラムで使用されるコマンドライン・オプション ndb_top</b></p><div class="table-contents"><table frame="box" rules="all"><col style="width: 33%"><col style="width: 34%"><col style="width: 33%"><thead><tr>
            <th scope="col">形式</th>
            <th scope="col">説明</th>
            <th scope="col">追加、非推奨、または削除された</th>
          </tr></thead><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_top_color">--color</a></code>,
              </p><p>
                <code class="option"> <a class="link" href="mysql-cluster.html#option_ndb_top_color">-c</a>
                </code>
              </p></th>
            <td>ASCII グラフを色で表示します。無効にするには
              --skip-colors を使用</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_top_graph">--graph</a></code>,
              </p><p>
                <code class="option"> <a class="link" href="mysql-cluster.html#option_ndb_top_graph">-g</a>
                </code>
              </p></th>
            <td>グラフを使用してデータを表示します。--skip-graphs
              を使用して無効にします</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_top_help">--help</a></code>,
              </p><p>
                <code class="option"> <a class="link" href="mysql-cluster.html#option_ndb_top_help">-?</a>
                </code>
              </p></th>
            <td>プログラム使用状況情報の表示</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_top_host">--host[=name]</a></code>,
              </p><p>
                <code class="option"> <a class="link" href="mysql-cluster.html#option_ndb_top_host">-h</a>
                </code>
              </p></th>
            <td>接続先の MySQL Server のホスト名または IP アドレス</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_top_measured-load">--measured-load</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_top_measured-load">-m</a>
                </code>
              </p></th>
            <td>測定された負荷をスレッド別に表示</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_top_node-id">--node-id[=#]</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_top_node-id">-n</a>
                </code>
              </p></th>
            <td>このノード ID を持つウォッチノード</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_top_os-load">--os-load</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_top_os-load">-o</a>
                </code>
              </p></th>
            <td>オペレーティングシステムによって測定された負荷の表示</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_top_password">--password[=password]</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_top_password">-p</a>
                </code>
              </p></th>
            <td>このパスワードを使用して接続</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_top_port">--port[=#]</a></code>,
              </p><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_top_port">-P</a></code>
                (&gt;=7.6.6)
              </p></th>
            <td>MySQL Server への接続時に使用するポート番号</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_top_sleep-time">--sleep-time[=seconds]</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_top_sleep-time">-s</a>
                </code>
              </p></th>
            <td>表示リフレッシュ間の待機時間 (秒)</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_top_socket">--socket</a></code>,
              </p><p>
                <code class="option"> <a class="link" href="mysql-cluster.html#option_ndb_top_socket">-S</a>
                </code>
              </p></th>
            <td>接続で使用されるソケットファイル</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_top_sort">--sort</a></code>,
              </p><p>
                <code class="option"> <a class="link" href="mysql-cluster.html#option_ndb_top_sort">-r</a>
                </code>
              </p></th>
            <td>スレッドを使用状況でソートします。--skip-sort
              を使用して無効にします</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_top_text">--text</a></code>,
              </p><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_top_text">-t</a></code>
                (&gt;=7.6.6)
              </p></th>
            <td>テキストを使用したデータの表示</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_top_user">--user[=name]</a></code>,
              </p><p>
                <code class="option"> <a class="link" href="mysql-cluster.html#option_ndb_top_user">-u</a>
                </code>
              </p></th>
            <td>この MySQL ユーザーとして接続</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody></table></div></div><br class="table-break"><p>
        NDB 7.6.6 以降では、<span class="command"><strong>ndb_top</strong></span> は共通の
        <code class="literal">NDB</code> プログラムオプション
        <code class="option">--defaults-file</code>,
        <code class="option">--defaults-extra-file</code>,
        <code class="option">--print-defaults</code>,
        <code class="option">--no-defaults</code> および
        <code class="option">--defaults-group-suffix</code>
        もサポートしています。 (Bug #86614、Bug #26236298)
      </p><h4><a name="mysql-cluster-programs-ndb-top-additional-options"></a>その他のオプション</h4><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="option_ndb_top_color"></a>
            <code class="option">--color</code>, <code class="option">-c</code>
          </p><a class="indexterm" name="idm45563214310800"></a><a class="indexterm" name="idm45563214308816"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for color"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--color</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">TRUE</code></td>
</tr></tbody></table></div><p>
            ASCII
            グラフを色で表示します。無効にするには
            <code class="option">--skip-colors</code> を使用します。
          </p></li><li class="listitem"><p><a name="option_ndb_top_graph"></a>
            <code class="option">--graph</code>, <code class="option">-g</code>
          </p><a class="indexterm" name="idm45563214294560"></a><a class="indexterm" name="idm45563214292576"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for graph"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--graph</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">TRUE</code></td>
</tr></tbody></table></div><p>
            グラフを使用してデータを表示します。無効にするには
            <code class="option">--skip-graphs</code> を使用します。
            このオプションまたは
            <code class="option">--text</code> は true
            である必要があります。両方のオプションが
            true の場合があります。
          </p></li><li class="listitem"><p><a name="option_ndb_top_help"></a>
            <code class="option">--help</code>, <code class="option">-?</code>
          </p><a class="indexterm" name="idm45563214277312"></a><a class="indexterm" name="idm45563214275328"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for help"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--help</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">TRUE</code></td>
</tr></tbody></table></div><p>
            プログラム使用状況情報を表示します。
          </p></li><li class="listitem"><p><a name="option_ndb_top_host"></a>
            <code class="option">--host[</code>=<em class="replaceable"><code>name]</code></em>,
            <code class="option">-h</code>
          </p><a class="indexterm" name="idm45563214261200"></a><a class="indexterm" name="idm45563214259216"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for host"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--host[=name]</code></td>
</tr><tr><th>型</th>
<td>文字列</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">localhost</code></td>
</tr></tbody></table></div><p>
            接続先の MySQL Server のホスト名または IP
            アドレス。
          </p></li><li class="listitem"><p><a name="option_ndb_top_measured-load"></a>
            <code class="option">--measured-load</code>, <code class="option">-m</code>
          </p><a class="indexterm" name="idm45563214245424"></a><a class="indexterm" name="idm45563214243360"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for measured-load"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--measured-load</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table></div><p>
            測定された負荷をスレッド別に表示します。
            このオプションまたは
            <code class="option">--os-load</code> は true
            である必要があります。両方のオプションが
            true の場合があります。
          </p></li><li class="listitem"><p><a name="option_ndb_top_node-id"></a>
            <code class="option">--node-id[</code>=<em class="replaceable"><code>#]</code></em>,
            <code class="option">-n</code>
          </p><a class="indexterm" name="idm45563214228144"></a><a class="indexterm" name="idm45563214226160"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for node-id"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--node-id[=#]</code></td>
</tr><tr><th>型</th>
<td>Integer</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">1</code></td>
</tr></tbody></table></div><p>
            このノード ID
            を持つデータノードを監視します。
          </p></li><li class="listitem"><p><a name="option_ndb_top_os-load"></a>
            <code class="option">--os-load</code>, <code class="option">-o</code>
          </p><a class="indexterm" name="idm45563214212368"></a><a class="indexterm" name="idm45563214210384"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for os-load"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--os-load</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">TRUE</code></td>
</tr></tbody></table></div><p>
            オペレーティングシステムによって測定された負荷を表示します。
            このオプションまたは
            <code class="option">--measured-load</code> は true
            である必要があります。両方のオプションが
            true の場合があります。
          </p></li><li class="listitem"><p><a name="option_ndb_top_passwd"></a>
            <code class="option">--passwd[</code>=<em class="replaceable"><code>password]</code></em>,
            <code class="option">-p</code>
          </p><a class="indexterm" name="idm45563214195184"></a><a class="indexterm" name="idm45563214193200"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for passwd"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--passwd[=password]</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">NULL</code></td>
</tr></tbody></table></div><p>
            このパスワードを使用して接続します。
          </p><p>
            このオプションは NDB 7.6.4 では非推奨です。
            NDB 7.6.6
            では削除され、<code class="option">--password</code>
            オプションに置き換えられます。 (Bug
            #26907833)
          </p></li><li class="listitem"><p><a name="option_ndb_top_password"></a>
            <code class="option">--password[</code>=<em class="replaceable"><code>password]</code></em>,
            <code class="option">-p</code>
          </p><a class="indexterm" name="idm45563214177584"></a><a class="indexterm" name="idm45563214175600"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for password"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--password[=password]</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">NULL</code></td>
</tr></tbody></table></div><p>
            このパスワードを使用して接続します。
          </p><p>
            このオプションは、NDB 7.6.6
            で、以前に使用された
            <code class="option">--passwd</code>
            オプションの代替として追加されました。
            (Bug #26907833)
          </p></li><li class="listitem"><p><a name="option_ndb_top_port"></a>
            <code class="option">--port[</code> =
            <em class="replaceable"><code>#]</code></em>、<code class="option">-t</code> (NDB
            7.6.6 以降: <code class="option">-P</code> )
          </p><a class="indexterm" name="idm45563214159440"></a><a class="indexterm" name="idm45563214157264"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for port"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--port[=#]</code></td>
</tr><tr><th>型</th>
<td>Integer</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">3306</code></td>
</tr></tbody></table></div><p>
            MySQL Server
            への接続時に使用するポート番号。
          </p><p>
            NDB 7.6.6
            以降では、このオプションの短い形式は
            <code class="option">-P</code> で、<code class="option">-t</code> は
            <code class="option">--text</code>
            オプションの短い形式として再利用されます。
            (Bug #26907833)
          </p></li><li class="listitem"><p><a name="option_ndb_top_sleep-time"></a>
            <code class="option">--sleep-time[</code>=<em class="replaceable"><code>seconds]</code></em>,
            <code class="option">-s</code>
          </p><a class="indexterm" name="idm45563214139936"></a><a class="indexterm" name="idm45563214137792"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for sleep-time"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--sleep-time[=seconds]</code></td>
</tr><tr><th>型</th>
<td>Integer</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">1</code></td>
</tr></tbody></table></div><p>
            表示がリフレッシュされるまでの待機時間
            (秒)。
          </p></li><li class="listitem"><p><a name="option_ndb_top_socket"></a>
            <code class="option">--socket=<em class="replaceable"><code>path/to/file</code></em></code>,
            <em class="replaceable"><code>-S</code></em>
          </p><a class="indexterm" name="idm45563214123040"></a><a class="indexterm" name="idm45563214120864"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for socket"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--socket</code></td>
</tr><tr><th>型</th>
<td>パス名</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">[none]</code></td>
</tr></tbody></table></div><p>
            指定されたソケットファイルを接続に使用します。
          </p><p>
            NDB 7.6.6 に追加されました。 (Bug #86614、Bug
            #26236298)
          </p></li><li class="listitem"><p><a name="option_ndb_top_sort"></a>
            <code class="option">--sort</code>, <code class="option">-r</code>
          </p><a class="indexterm" name="idm45563214105776"></a><a class="indexterm" name="idm45563214103600"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for sort"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--sort</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">TRUE</code></td>
</tr></tbody></table></div><p>
            スレッドを使用状況でソートします。無効にするには
            <code class="option">--skip-sort</code> を使用します。
          </p></li><li class="listitem"><p><a name="option_ndb_top_text"></a>
            <code class="option">--text</code>, <code class="option">-t</code>
          </p><a class="indexterm" name="idm45563214088560"></a><a class="indexterm" name="idm45563214086384"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for text"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--text</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table></div><p>
            テキストを使用したデータの表示。
            このオプションまたは
            <code class="option">--graph</code> は true
            である必要があります。両方のオプションが
            true の場合があります。
          </p><p>
            このオプションの短い形式は以前のバージョンの
            NDB Cluster では <code class="option">-x</code>
            でしたが、これはサポートされなくなりました。
          </p></li><li class="listitem"><p><a name="option_ndb_top_user"></a>
            <code class="option">--user[</code>=<em class="replaceable"><code>name]</code></em>,
            <code class="option">-u</code>
          </p><a class="indexterm" name="idm45563214069232"></a><a class="indexterm" name="idm45563214067056"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for user"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--user[=name]</code></td>
</tr><tr><th>型</th>
<td>文字列</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">root</code></td>
</tr></tbody></table></div><p>
            この MySQL ユーザーとして接続します。
          </p></li></ul></div><p><b>出力例. </b>
          次の図は、負荷が中程度の <span class="command"><strong>ndbmtd</strong></span>
          データノードを備えた Linux
          システムの端末ウィンドウで実行されている
          <span class="command"><strong>ndb_top</strong></span> を示しています。
          ここでは、テキストとグラフの両方の出力を提供するために、<span class="command"><strong>ndb_top</strong></span>
          <code class="option">-n8</code>
          <code class="option">-x</code>
          を使用してプログラムが起動されています:
        </p><div class="figure"><a name="ndb_top-running-terminal"></a><p class="title"><b>図 23.26 ターミナルで実行されている ndb_top</b></p><div class="figure-contents"><div class="mediaobject"><img src="images/ndb-top-1.png" width="800" height="675" alt="端末ウィンドウで実行されている ndb_top から表示します。 利用されているリソースなど、各ノードの情報を表示します。"></div></div></div><br class="figure-break"><p>
        NDB 8.0.20 以降、<span class="command"><strong>ndb_top</strong></span>
        はスレッドのスピン時間も緑色で表示します。
      </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-cluster-programs-ndb-waiter"></a>23.4.30 ndb_waiter — NDB Cluster が特定のステータスに達するまで待機</h3></div></div></div><a class="indexterm" name="idm45563214038896"></a><p>
        <span class="command"><strong>ndb_waiter</strong></span>
        は、クラスタが指定したステータスになるか、<code class="option">--timeout</code>
        制限を超えるまで、すべてのクラスタデータノードのステータスを繰り返し出力してから
        (100 ミリ秒ごと)、終了します。
        デフォルトでは、すべてのノードが起動されてクラスタに接続された状態である
        <code class="literal">STARTED</code>
        ステータスにクラスタがなるまで待機します。
        これは、<code class="option">--no-contact</code>
        および <code class="option">--not-started</code>
        オプションを使用してオーバーライドできます。
      </p><p>
        このユーティリティーによって報告されるノード状態を次に示します。
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">NO_CONTACT</code>:
            ノードに接続できません。
          </p></li><li class="listitem"><p>
            <code class="literal">UNKNOWN</code>:
            ノードに接続できますが、ステータスがまだ不明です。
            通常、これはノードが管理サーバーから
            <code class="literal">START</code> または
            <code class="literal">RESTART</code>
            コマンドを受け取ったけれども、まだそこで実行されていないことを意味します。
          </p></li><li class="listitem"><p>
            <code class="literal">NOT_STARTED</code>:
            ノードは停止されたけれども、クラスタにまだ接続されています。
            これは、管理クライアントの
            <code class="literal">RESTART</code>
            コマンドを使用してノードを再起動したときに表示されます。
          </p></li><li class="listitem"><p>
            <code class="literal">STARTING</code>: ノードの
            <span class="command"><strong>ndbd</strong></span>
            プロセスが開始されたけれども、ノードはまだクラスタに接続されていません。
          </p></li><li class="listitem"><p>
            <code class="literal">STARTED</code>:ノードは動作しており、クラスタに接続されています。
          </p></li><li class="listitem"><p>
            <code class="literal">SHUTTING_DOWN</code>:
            ノードがシャットダウン中です。
          </p></li><li class="listitem"><p>
            <code class="literal">SINGLE USER MODE</code>:
            これは、クラスタがシングルユーザーモードの場合に、すべてのクラスタデータノードに表示されます。
          </p></li></ul></div><p>
        次のテーブルに、NDB Cluster
        ネイティブバックアップリストアプログラム
        <span class="command"><strong>ndb_waiter</strong></span>
        に固有のオプションを示します。
        追加説明が表のあとにあります。 ほとんどの
        NDB Cluster プログラム (<span class="command"><strong>ndb_waiter</strong></span>
        を含む)
        に共通のオプションについては、<a class="xref" href="mysql-cluster.html#mysql-cluster-program-options-common" title="23.4.32 NDB Cluster プログラムに共通のオプション — NDB Cluster プログラムに共通のオプション">セクション23.4.32「NDB Cluster プログラムに共通のオプション — NDB Cluster プログラムに共通のオプション」</a>
        を参照してください。
      </p><div class="table"><a name="mysql-cluster-ndb_waiter-options-table"></a><p class="title"><b>表 23.49 プログラムで使用されるコマンドライン・オプション ndb_waiter</b></p><div class="table-contents"><table frame="box" rules="all"><col style="width: 33%"><col style="width: 34%"><col style="width: 33%"><thead><tr>
            <th scope="col">形式</th>
            <th scope="col">説明</th>
            <th scope="col">追加、非推奨、または削除された</th>
          </tr></thead><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_waiter_no-contact">--no-contact</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_waiter_no-contact">-n</a>
                </code>
              </p></th>
            <td>クラスタが NO CONTACT 状態になるのを待機します</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_waiter_not-started">--not-started</a>
                </code>
              </p></th>
            <td>クラスタが NOT STARTED 状態になるのを待機します</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_waiter_single-user">--single-user</a>
                </code>
              </p></th>
            <td>クラスタがシングルユーザーモードになるのを待機します</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_waiter_timeout">--timeout=#</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_waiter_timeout">-t</a>
                </code>
              </p></th>
            <td>この秒数待機してから、クラスタが目的の状態に達したかどうかを終了</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_waiter_nowait-nodes">--nowait-nodes=list</a>
                </code>
              </p></th>
            <td>待機しないノードのリスト</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndb_waiter_wait-nodes">--wait-nodes=list</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndb_waiter_wait-nodes">-w</a>
                </code>
              </p></th>
            <td>待機するノードのリスト</td>
            <td><p>
                (MySQLに基づくすべてのNDBリリースでサポート
                8.0)
              </p></td>
          </tr></tbody></table></div></div><br class="table-break"><h4><a name="idm45563213966880"></a>使用法</h4><pre class="programlisting">ndb_waiter [-c <em class="replaceable"><code>connection_string</code></em>]
</pre><h4><a name="mysql-cluster-programs-ndb-waiter-additional-options"></a>その他のオプション</h4><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="option_ndb_waiter_no-contact"></a>
            <code class="option">--no-contact</code>, <code class="option">-n</code>
          </p><a class="indexterm" name="idm45563213961520"></a><a class="indexterm" name="idm45563213959376"></a><p>
            <code class="literal">STARTED</code>
            状態を待機する代わりに、<span class="command"><strong>ndb_waiter</strong></span>
            はクラスタが <code class="literal">NO_CONTACT</code>
            ステータスになるまで実行を継続してから終了します。
          </p></li><li class="listitem"><p><a name="option_ndb_waiter_not-started"></a>
            <code class="option">--not-started</code>
          </p><a class="indexterm" name="idm45563213952928"></a><a class="indexterm" name="idm45563213950784"></a><p>
            <code class="literal">STARTED</code>
            状態を待機する代わりに、<span class="command"><strong>ndb_waiter</strong></span>
            はクラスタが <code class="literal">NOT_STARTED</code>
            ステータスになるまで実行を継続してから終了します。
          </p></li><li class="listitem"><p><a name="option_ndb_waiter_timeout"></a>
            <code class="option">--timeout=<em class="replaceable"><code>seconds</code></em></code>,
            <code class="option">-t <em class="replaceable"><code>seconds</code></em></code>
          </p><a class="indexterm" name="idm45563213943344"></a><a class="indexterm" name="idm45563213941168"></a><p>
            待機する時間。
            この秒数内に目的の状態に達しなかった場合、プログラムは終了します。
            デフォルトは 120 秒 (1200 レポートサイクル)
            です。
          </p></li><li class="listitem"><p><a name="option_ndb_waiter_single-user"></a>
            <code class="option">--single-user</code>
          </p><a class="indexterm" name="idm45563213936672"></a><a class="indexterm" name="idm45563213934544"></a><p>
            プログラムはクラスタがシングルユーザーモードになるのを待機します。
          </p></li><li class="listitem"><p><a name="option_ndb_waiter_nowait-nodes"></a>
            <code class="option">--nowait-nodes=<em class="replaceable"><code>list</code></em></code>
          </p><a class="indexterm" name="idm45563213929968"></a><a class="indexterm" name="idm45563213927808"></a><p>
            このオプションを使用すると、<span class="command"><strong>ndb_waiter</strong></span>
            は ID
            がリストされているノードを待機しません。
            次に示すように、このリストはカンマ区切りであり、範囲はダッシュで示すことができます。
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>ndb_waiter --nowait-nodes=1,3,7-9</code></strong>
</pre><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">重要</div><p>
              このオプションは
              <code class="option">--wait-nodes</code>
              オプションと一緒に使用<span class="emphasis"><em>しない</em></span>でください。
            </p></div></li><li class="listitem"><p><a name="option_ndb_waiter_wait-nodes"></a>
            <code class="option">--wait-nodes=<em class="replaceable"><code>list</code></em></code>,
            <code class="option">-w <em class="replaceable"><code>list</code></em></code>
          </p><a class="indexterm" name="idm45563213917616"></a><a class="indexterm" name="idm45563213915472"></a><p>
            このオプションを使用した場合、<span class="command"><strong>ndb_waiter</strong></span>
            は ID
            がリストされているノードのみを待機します。
            次に示すように、このリストはカンマ区切りであり、範囲はダッシュで示すことができます。
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>ndb_waiter --wait-nodes=2,4-6,10</code></strong>
</pre><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">重要</div><p>
              このオプションは
              <code class="option">--nowait-nodes</code>
              オプションと一緒に使用<span class="emphasis"><em>しない</em></span>でください。
            </p></div></li></ul></div><p><b>出力例. </b>
          4 ノードのクラスタで 2
          つのノードをシャットダウンしてから手動で再度起動したときの
          <span class="command"><strong>ndb_waiter</strong></span>
          の出力を次に示します。 重複するレポート
          (<code class="literal">...</code> で示されています)
          は省略しています。
        </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>./ndb_waiter -c localhost</code></strong>

Connecting to mgmsrv at (localhost)
State node 1 STARTED
State node 2 NO_CONTACT
State node 3 STARTED
State node 4 NO_CONTACT
Waiting for cluster enter state STARTED

...

State node 1 STARTED
State node 2 UNKNOWN
State node 3 STARTED
State node 4 NO_CONTACT
Waiting for cluster enter state STARTED

...

State node 1 STARTED
State node 2 STARTING
State node 3 STARTED
State node 4 NO_CONTACT
Waiting for cluster enter state STARTED

...

State node 1 STARTED
State node 2 STARTING
State node 3 STARTED
State node 4 UNKNOWN
Waiting for cluster enter state STARTED

...

State node 1 STARTED
State node 2 STARTING
State node 3 STARTED
State node 4 STARTING
Waiting for cluster enter state STARTED

...

State node 1 STARTED
State node 2 STARTED
State node 3 STARTED
State node 4 STARTING
Waiting for cluster enter state STARTED

...

State node 1 STARTED
State node 2 STARTED
State node 3 STARTED
State node 4 STARTED
Waiting for cluster enter state STARTED
</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
          接続文字列を指定しない場合、<span class="command"><strong>ndb_waiter</strong></span>
          は <code class="literal">localhost</code>
          の管理サーバーへの接続を試み、<code class="literal">「Connecting
          to mgmsrv at (null)」</code>を報告します。
        </p></div><p>
        NDB 8.0.20
        より前では、このプログラムは、<code class="literal">NDBT</code>
        テストライブラリへの不要な依存関係のため、実行の完了時に
        <code class="literal">NDBT_ProgramExit -
        <em class="replaceable"><code>status</code></em></code>
        を出力しました。
        この依存関係は削除され、余分な出力がなくなりました。
      </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-cluster-programs-ndbxfrm"></a>23.4.31 ndbxfrm — NDB Cluster によって作成されたファイルの圧縮、圧縮解除、暗号化、および復号化</h3></div></div></div><a class="indexterm" name="idm45563213894560"></a><p>
        NDB 8.0.22 で導入された <span class="command"><strong>ndbxfrm</strong></span>
        ユーティリティーを使用すると、NDB Cluster
        によって作成された圧縮、暗号化、またはその両方のファイルに関する情報を解凍、復号化、および出力できます。
        ファイルの圧縮または暗号化にも使用できます。
      </p><div class="table"><a name="mysql-cluster-ndbxfrm-options-table"></a><p class="title"><b>表 23.50 プログラムで使用されるコマンドライン・オプション ndbxfrm</b></p><div class="table-contents"><table frame="box" rules="all"><col style="width: 33%"><col style="width: 34%"><col style="width: 33%"><thead><tr>
            <th scope="col">形式</th>
            <th scope="col">説明</th>
            <th scope="col">追加、非推奨、または削除された</th>
          </tr></thead><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndbxfrm_compress">--compress</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndbxfrm_compress">-c</a>
                </code>
              </p></th>
            <td>Compress file</td>
            <td><p>
                追加: NDB 8.0.22
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndbxfrm_decrypt-password">--decrypt-password=string</a>
                </code>
              </p></th>
            <td>ファイルの復号化にこのパスワードを使用</td>
            <td><p>
                追加: NDB 8.0.22
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndbxfrm_encrypt-kdf-iter-count">--encrypt-kdf-iter-count=#</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndbxfrm_encrypt-kdf-iter-count">-k</a>
                </code>
              </p></th>
            <td>キー定義で使用される反復数</td>
            <td><p>
                追加: NDB 8.0.22
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndbxfrm_encrypt-password">--encrypt-password=string</a>
                </code>
              </p></th>
            <td>このパスワードを使用してファイルを暗号化</td>
            <td><p>
                追加: NDB 8.0.22
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndbxfrm_help">--help</a></code>,
              </p><p>
                <code class="option"> <a class="link" href="mysql-cluster.html#option_ndbxfrm_help">-?</a>
                </code>
              </p></th>
            <td>使用方法の情報を出力します</td>
            <td><p>
                追加: NDB 8.0.22
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndbxfrm_info">--info</a></code>,
              </p><p>
                <code class="option"> <a class="link" href="mysql-cluster.html#option_ndbxfrm_info">-i</a>
                </code>
              </p></th>
            <td>ファイル情報の印刷</td>
            <td><p>
                追加: NDB 8.0.22
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndbxfrm_usage">--usage</a></code>,
              </p><p>
                <code class="option"> <a class="link" href="mysql-cluster.html#option_ndbxfrm_usage">-?</a>
                </code>
              </p></th>
            <td>使用方法の情報を出力します。--help のシノニムです</td>
            <td><p>
                追加: NDB 8.0.22
              </p></td>
          </tr></tbody><tbody><tr>
            <th scope="row"><p>
                <code class="option"><a class="link" href="mysql-cluster.html#option_ndbxfrm_version">--version</a></code>,
              </p><p>
                <code class="option">
                <a class="link" href="mysql-cluster.html#option_ndbxfrm_version">-V</a>
                </code>
              </p></th>
            <td>出力バージョン情報</td>
            <td><p>
                追加: NDB 8.0.22
              </p></td>
          </tr></tbody></table></div></div><br class="table-break"><h4><a name="idm45563213832704"></a>使用法</h4><pre class="programlisting">ndbxfrm --info <em class="replaceable"><code>file</code></em>[ <em class="replaceable"><code>file</code></em> ...]

ndbxfrm --compress <em class="replaceable"><code>input_file</code></em> <em class="replaceable"><code>output_file</code></em>

ndbxfrm --decrypt-password=<em class="replaceable"><code>password</code></em> <em class="replaceable"><code>input_file</code></em> <em class="replaceable"><code>output_file</code></em>

ndbxfrm [--encrypt-ldf-iter-count=#] --encrypt-password=<em class="replaceable"><code>password</code></em> <em class="replaceable"><code>input_file</code></em> <em class="replaceable"><code>output_file</code></em>
</pre><p>
        <em class="replaceable"><code>input_file</code></em> と
        <em class="replaceable"><code>output_file</code></em>
        を同じファイルにすることはできません。
      </p><h4><a name="idm45563213825280"></a>オプション</h4><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="option_ndbxfrm_compress"></a>
            <code class="option">--compress</code>, <code class="option">-c</code>
          </p><a class="indexterm" name="idm45563213822640"></a><a class="indexterm" name="idm45563213820448"></a><p>
            NDB Cluster
            バックアップの圧縮に使用されるものと同じ圧縮方法を使用して入力ファイルを圧縮し、出力ファイルに書き込みます。
            暗号化されていない圧縮 <code class="literal">NDB</code>
            バックアップファイルを解凍するには、圧縮ファイルおよび出力ファイルの名前を使用して
            <span class="command"><strong>ndbxfrm</strong></span>
            を起動する必要があります
            (オプションは必要ありません)。
          </p></li><li class="listitem"><p><a name="option_ndbxfrm_decrypt-password"></a>
            <code class="option">--decrypt-password=<em class="replaceable"><code>password</code></em></code>
          </p><a class="indexterm" name="idm45563213813744"></a><a class="indexterm" name="idm45563213811584"></a><p>
            指定されたパスワードを使用して、<code class="literal">NDB</code>
            によって暗号化されたファイルを復号化します。
          </p></li><li class="listitem"><p><a name="option_ndbxfrm_encrypt-kdf-iter-count"></a>
            <code class="option">--encrypt-kdf-iter-count=<em class="replaceable"><code>#</code></em></code>,
            <code class="option">-k <em class="replaceable"><code>#</code></em></code>
          </p><a class="indexterm" name="idm45563213805696"></a><a class="indexterm" name="idm45563213803472"></a><p>
            ファイルを暗号化するときに、暗号化キーに使用する反復回数を指定します。
            <code class="option">--encrypt-password</code>
            オプションが必要です。
          </p></li><li class="listitem"><p><a name="option_ndbxfrm_encrypt-password"></a>
            <code class="option">--encrypt-password=<em class="replaceable"><code>password</code></em></code>
          </p><a class="indexterm" name="idm45563213798016"></a><a class="indexterm" name="idm45563213795856"></a><p>
            オプションで指定されたパスワードを使用してバックアップファイルを暗号化します。
            パスワードは、次の要件を満たしている必要があります:
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                <code class="literal">!</code>, <code class="literal">'</code>,
                <code class="literal">"</code>, <code class="literal">$</code>,
                <code class="literal">%</code>, <code class="literal">\</code>および
                <code class="literal">^</code> 以外の印刷可能な ASCII
                文字を使用
              </p></li><li class="listitem"><p>
                256 文字以下
              </p></li><li class="listitem"><p>
                一重引用符または二重引用符で囲みます
              </p></li></ul></div><p>
            空のパスワード
            (<code class="literal">''</code>または<code class="literal">""</code>)
            を使用することは可能ですが、お薦めしません。
          </p></li><li class="listitem"><p><a name="option_ndbxfrm_help"></a>
            <code class="option">--help</code>, <code class="option">-?</code>
          </p><a class="indexterm" name="idm45563213781168"></a><a class="indexterm" name="idm45563213778992"></a><p>
            プログラムの使用状況情報を出力します。
          </p></li><li class="listitem"><p><a name="option_ndbxfrm_info"></a>
            <code class="option">--info</code>, <code class="option">-i</code>
          </p><a class="indexterm" name="idm45563213774480"></a><a class="indexterm" name="idm45563213772304"></a><p>
            1
            つまたは複数の入力ファイルに関する次の情報を出力します:
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                ファイルの名前
              </p></li><li class="listitem"><p>
                ファイルが圧縮されているかどうか
                (<code class="literal">compression=yes</code> または
                <code class="literal">compression=no</code>)
              </p></li><li class="listitem"><p>
                ファイルが暗号化されているかどうか
                (<code class="literal">encryption=yes</code> または
                <code class="literal">encryption=no</code>)
              </p></li></ul></div><p>
            例:
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>ndbxfrm -i BACKUP-10-0.5.Data BACKUP-10.5.ctl BACKUP-10.5.log</code></strong>
File=BACKUP-10-0.5.Data, compression=no, encryption=yes
File=BACKUP-10.5.ctl, compression=no, encryption=yes
File=BACKUP-10.5.log, compression=no, encryption=yes
</pre></li><li class="listitem"><p><a name="option_ndbxfrm_usage"></a>
            <code class="option">--usage</code>, <code class="option">-?</code>
          </p><a class="indexterm" name="idm45563213759248"></a><a class="indexterm" name="idm45563213757072"></a><p>
            <code class="option">--help</code> と同義です。
          </p></li><li class="listitem"><p><a name="option_ndbxfrm_version"></a>
            <code class="option">--version</code>, <code class="option">-V</code>
          </p><a class="indexterm" name="idm45563213751968"></a><a class="indexterm" name="idm45563213749792"></a><p>
            バージョン情報を出力します。
          </p></li></ul></div><p>
        <span class="command"><strong>ndbxfrm</strong></span> では、NDB Cluster
        の任意のバージョンで作成されたバックアップを暗号化できます。
        バックアップを構成する
        <code class="filename">.Data</code>、<code class="filename">.ctl</code> および
        <code class="filename">.log</code>
        ファイルは個別に暗号化する必要があり、これらのファイルはデータノードごとに個別に暗号化する必要があります。
        暗号化すると、そのようなバックアップは NDB
        Cluster 8.0.22 以降の
        <span class="command"><strong>ndbxfrm</strong></span>、<span class="command"><strong>ndb_restore</strong></span>、または
        <span class="command"><strong>ndb_print_backup</strong></span>
        によってのみ復号化できます。
      </p><p>
        暗号化されたファイルは、次のように、<code class="option">--encrypt-password</code>
        オプションと
        <code class="option">--decrypt-password</code>
        オプションを一緒に使用して新しいパスワードで再暗号化できます:
      </p><pre class="programlisting">ndbxfrm --decrypt-password=<em class="replaceable"><code>old</code></em> --encrypt-password=<em class="replaceable"><code>new</code></em> <em class="replaceable"><code>input_file</code></em> <em class="replaceable"><code>output_file</code></em>
</pre><p>
        前述の例では、<em class="replaceable"><code>old</code></em> と
        <em class="replaceable"><code>new</code></em>
        はそれぞれ古いパスワードと新しいパスワードです。これらの両方を引用符で囲む必要があります。
        入力ファイルは復号化され、出力ファイルとして暗号化されます。
        入力ファイル自体は変更されません。古いパスワードを使用してアクセスできないようにするには、入力ファイルを手動で削除する必要があります。
      </p><p>
        <span class="command"><strong>ndbxfrm</strong></span>
        では、このセクションに明示的にリストされているオプション
        (<code class="option">--help</code>、<code class="option">--usage</code>
        および <code class="option">--version</code>)
        を除き、<a class="xref" href="mysql-cluster.html#mysql-cluster-program-options-common" title="23.4.32 NDB Cluster プログラムに共通のオプション — NDB Cluster プログラムに共通のオプション">セクション23.4.32「NDB Cluster プログラムに共通のオプション — NDB Cluster プログラムに共通のオプション」</a>
        に示されているオプションは使用されません。
      </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-cluster-program-options-common"></a>23.4.32 NDB Cluster プログラムに共通のオプション — NDB Cluster プログラムに共通のオプション</h3></div></div></div><a class="indexterm" name="idm45563213728224"></a><a class="indexterm" name="idm45563213726208"></a><a class="indexterm" name="idm45563213724928"></a><a class="indexterm" name="idm45563213723648"></a><a class="indexterm" name="idm45563213721856"></a><a class="indexterm" name="idm45563213720016"></a><p>
        NDB Cluster
        プログラムはすべて、このセクションで説明するオプションを受け入れますが、次の例外があります:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <span class="command"><strong>mysqld</strong></span>
          </p></li><li class="listitem"><p>
            <span class="command"><strong>ndb_print_backup_file</strong></span>
          </p></li><li class="listitem"><p>
            <span class="command"><strong>ndb_print_schema_file</strong></span>
          </p></li><li class="listitem"><p>
            <span class="command"><strong>ndb_print_sys_file</strong></span>
          </p></li></ul></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
          NDB Cluster
          の以前のバージョンのユーザーは、これらのオプションの一部を変更して、互いに一貫性を持たせ、<span class="command"><strong>mysqld</strong></span>
          と整合性を持たせるようにしてください。
          <span class="command"><strong>ndb_print_backup_file</strong></span>、<span class="command"><strong>ndb_print_schema_file</strong></span>、および
          <span class="command"><strong>ndb_print_sys_file</strong></span> 以外の NDB Cluster
          プログラムで <code class="option">--help</code>
          オプションを使用すると、プログラムがサポートするオプションのリストを表示できます。
        </p></div><p>
        次のテーブルのオプションは、すべての NDB
        Cluster 実行可能ファイル
        (このセクションで前述したオプションを除く)
        に共通です。
      </p><p></p><p>
        個々の NDB Cluster
        プログラムに固有のオプションについては、<a class="xref" href="mysql-cluster.html#mysql-cluster-programs" title="23.4 NDB Cluster プログラム">セクション23.4「NDB Cluster プログラム」</a>
        を参照してください。
      </p><p>
        NDB Cluster に関連する <span class="command"><strong>mysqld</strong></span>
        オプションについては、<a class="xref" href="mysql-cluster.html#mysql-cluster-program-options-mysqld" title="23.3.3.9.1 NDB Cluster の MySQL Server オプション">セクション23.3.3.9.1「NDB Cluster の MySQL Server オプション」</a>
        を参照してください。
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="option_ndb_common_character-sets-dir"></a>
            <code class="option">--character-sets-dir=<em class="replaceable"><code>name</code></em></code>
          </p><a class="indexterm" name="idm45563213699248"></a><a class="indexterm" name="idm45563213697632"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for character-sets-dir"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--character-sets-dir=dir_name</code></td>
</tr><tr><th>型</th>
<td>ディレクトリ名</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal"></code></td>
</tr></tbody></table></div><p>
            文字セット情報を探す場所をプログラムに通知します。
          </p></li><li class="listitem"><p><a name="option_ndb_common_connect-retries"></a>
            <code class="option">--connect-retries=<em class="replaceable"><code>#</code></em></code>
          </p><a class="indexterm" name="idm45563213683888"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for connect-retries"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--connect-retries=#</code></td>
</tr><tr><th>型</th>
<td>数値</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">12</code></td>
</tr><tr><th>最小値</th>
<td><code class="literal">0</code></td>
</tr><tr><th>最大値</th>
<td><code class="literal">4294967295</code></td>
</tr></tbody></table></div><p>
            このオプションは、最初に接続を再試行してから中止するまでの回数を指定します
            (クライアントは常に接続を 1
            回以上試行します)。
            試行ごとの待機時間は、<code class="option">--connect-retry-delay</code>
            を使用して設定されます。
          </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
              <span class="command"><strong>ndb_mgm</strong></span>
              とともに使用する場合、このオプションのデフォルトは
              3 です。
              詳しくは<a class="xref" href="mysql-cluster.html#mysql-cluster-programs-ndb-mgm" title="23.4.5 ndb_mgm — NDB Cluster 管理クライアント">セクション23.4.5「ndb_mgm — NDB Cluster 管理クライアント」</a>,をご覧ください。
            </p></div></li><li class="listitem"><p><a name="option_ndb_common_connect-retry-delay"></a>
            <code class="option">--connect-retry-delay=<em class="replaceable"><code>#</code></em></code>
          </p><a class="indexterm" name="idm45563213661360"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for connect-retry-delay"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--connect-retry-delay=#</code></td>
</tr><tr><th>型</th>
<td>数値</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">5</code></td>
</tr><tr><th>最小値</th>
<td><code class="literal">1</code></td>
</tr><tr><th>最小値</th>
<td><code class="literal">0</code></td>
</tr><tr><th>最大値</th>
<td><code class="literal">4294967295</code></td>
</tr></tbody></table></div><p>
            このオプションは、接続が切断されるまでに試行ごとに待機する時間の長さを指定します。
            接続を試行する回数は、<code class="option">--connect-retries</code>
            によって設定されます。
          </p></li><li class="listitem"><p><a name="option_ndb_common_core-file"></a>
            <code class="option">--core-file</code>
          </p><a class="indexterm" name="idm45563213639312"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for core-file"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--core-file</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">FALSE</code></td>
</tr></tbody></table></div><p>
            プログラムが停止した場合、コアファイルが出力されます。
            コアファイルの名前および場所はシステムによって異なります
            (Linux で実行されている NDB Cluster
            プログラムノードの場合、デフォルトの場所は、データノードの場合はノード
            <code class="literal">DataDir</code> です。)
            一部のシステムでは、制限または制限がある場合があります。
            たとえば、サーバーを起動する前に
            <span class="command"><strong>ulimit -c unlimited</strong></span>
            を実行することが必要な場合もあります。
            詳細は、システムのドキュメントを参照してください。
          </p><p>
            NDB Cluster が <span class="command"><strong>configure</strong></span> の
            <code class="option">--debug</code>
            オプションを使用して構築された場合、<code class="option">--core-file</code>
            はデフォルトで有効になっています。
            通常のビルドの場合、デフォルトでは
            <code class="option">--core-file</code>
            は無効にされています。
          </p></li><li class="listitem"><p><a name="option_ndb_common_debug"></a>
            <code class="option">--debug[=<em class="replaceable"><code>options</code></em>]</code>
          </p><a class="indexterm" name="idm45563213619360"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for debug"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--debug=options</code></td>
</tr><tr><th>型</th>
<td>文字列</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">d:t:O,/tmp/ndb_restore.trace</code></td>
</tr></tbody></table></div><p>
            このオプションは、デバッグを有効にしてコンパイルしたバージョンにのみ使用できます。
            <span class="command"><strong>mysqld</strong></span>
            プロセスの場合と同様に、デバッグ呼び出しからの出力を有効にするために使用します。
          </p></li><li class="listitem"><p><a name="option_ndb_common_defaults-extra-file"></a>
            <code class="option">--defaults-extra-file</code>=<em class="replaceable"><code>filename</code></em>
          </p><a class="indexterm" name="idm45563213604032"></a><a class="indexterm" name="idm45563213601792"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for defaults-extra-file"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--defaults-extra-file=filename</code></td>
</tr><tr><th>型</th>
<td>文字列</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">[none]</code></td>
</tr></tbody></table></div><p>
            グローバルオプションファイルが読み取られた後、このファイルを読み取ります。
          </p><p>
            このオプションおよびその他のオプションファイルオプションの詳細は、<a class="xref" href="programs.html#option-file-options" title="4.2.2.3 オプションファイルの処理に影響するコマンド行オプション">セクション4.2.2.3「オプションファイルの処理に影響するコマンド行オプション」</a>
            を参照してください。
          </p></li><li class="listitem"><p><a name="option_ndb_common_defaults-file"></a>
            <code class="option">--defaults-file</code>=<em class="replaceable"><code>filename</code></em>
          </p><a class="indexterm" name="idm45563213585472"></a><a class="indexterm" name="idm45563213583232"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for defaults-file"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--defaults-file=filename</code></td>
</tr><tr><th>型</th>
<td>文字列</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">[none]</code></td>
</tr></tbody></table></div><p>
            このファイルからデフォルトのオプションを読み取ります。
          </p><p>
            このオプションおよびその他のオプションファイルオプションの詳細は、<a class="xref" href="programs.html#option-file-options" title="4.2.2.3 オプションファイルの処理に影響するコマンド行オプション">セクション4.2.2.3「オプションファイルの処理に影響するコマンド行オプション」</a>
            を参照してください。
          </p></li><li class="listitem"><p><a name="option_ndb_common_defaults-group-suffix"></a>
            <code class="option">--defaults-group-suffix</code>
          </p><a class="indexterm" name="idm45563213567456"></a><a class="indexterm" name="idm45563213565200"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for defaults-group-suffix"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--defaults-group-suffix</code></td>
</tr><tr><th>型</th>
<td>文字列</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">[none]</code></td>
</tr></tbody></table></div><p>
            また、名前がこの接尾辞で終わるグループも読み取ります。
          </p><p>
            このオプションおよびその他のオプションファイルオプションの詳細は、<a class="xref" href="programs.html#option-file-options" title="4.2.2.3 オプションファイルの処理に影響するコマンド行オプション">セクション4.2.2.3「オプションファイルの処理に影響するコマンド行オプション」</a>
            を参照してください。
          </p></li><li class="listitem"><p><a name="option_ndb_common_help"></a>
            <code class="option">--help</code>, <code class="option">--usage</code>,
            <code class="option">-?</code>
          </p><a class="indexterm" name="idm45563213548672"></a><a class="indexterm" name="idm45563213547104"></a><a class="indexterm" name="idm45563213545648"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for help"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><p class="valid-value"><code class="literal">--help</code></p><p class="valid-value"><code class="literal">--usage</code></p></td>
</tr></tbody></table></div><p>
            使用可能なコマンドオプションの説明の短いリストを出力します。
          </p></li><li class="listitem"><p><a name="option_ndb_common_login-path"></a>
            <code class="option">--login-path</code>=<em class="replaceable"><code>path</code></em>
          </p><a class="indexterm" name="idm45563213534720"></a><a class="indexterm" name="idm45563213532496"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for login-path"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--login-path=path</code></td>
</tr><tr><th>型</th>
<td>文字列</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">[none]</code></td>
</tr></tbody></table></div><p>
            ログインファイルからこのパスを読み取ります。
          </p><p>
            このオプションおよびその他のオプションファイルオプションの詳細は、<a class="xref" href="programs.html#option-file-options" title="4.2.2.3 オプションファイルの処理に影響するコマンド行オプション">セクション4.2.2.3「オプションファイルの処理に影響するコマンド行オプション」</a>
            を参照してください。
          </p></li><li class="listitem"><p><a name="option_ndb_common_ndb-connectstring"></a>
            <code class="option">--ndb-connectstring=<em class="replaceable"><code>connection_string</code></em></code>,
            <code class="option">--connect-string=<em class="replaceable"><code>connection_string</code></em></code>,
            <code class="option">-c
            <em class="replaceable"><code>connection_string</code></em></code>
          </p><a class="indexterm" name="idm45563213515008"></a><a class="indexterm" name="idm45563213513392"></a><a class="indexterm" name="idm45563213511888"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndb-connectstring"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><p class="valid-value"><code class="literal">--ndb-connectstring=connectstring</code></p><p class="valid-value"><code class="literal">--connect-string=connectstring</code></p></td>
</tr><tr><th>型</th>
<td>文字列</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">localhost:1186</code></td>
</tr></tbody></table></div><p>
            このオプションは、次に示すように、アプリケーションが接続する管理サーバーを指定する
            NDB Cluster 接続文字列を取ります:
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>ndbd --ndb-connectstring="nodeid=2;host=ndb_mgmd.mysql.com:1186"</code></strong>
</pre><p>
            詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-connection-strings" title="23.3.3.3 NDB Cluster 接続文字列">セクション23.3.3.3「NDB Cluster 接続文字列」</a>を参照してください。
          </p></li><li class="listitem"><p><a name="option_ndb_common_ndb-mgmd-host"></a>
            <code class="option">--ndb-mgmd-host=<em class="replaceable"><code>host</code></em>[:<em class="replaceable"><code>port</code></em>]</code>
          </p><a class="indexterm" name="idm45563213492992"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndb-mgmd-host"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--ndb-mgmd-host=host[:port]</code></td>
</tr><tr><th>型</th>
<td>文字列</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">localhost:1186</code></td>
</tr></tbody></table></div><p>
            プログラムに接続される単一の管理サーバーのホストとポート番号の設定に使用できます。
            プログラムが接続情報に複数の管理サーバーのノード
            ID または参照 (あるいはその両方)
            を必要とする場合は、<code class="option">--ndb-connectstring</code>
            オプションを代わりに使用します。
          </p></li><li class="listitem"><p><a name="option_ndb_common_ndb-nodeid"></a>
            <code class="option">--ndb-nodeid=<em class="replaceable"><code>#</code></em></code>
          </p><a class="indexterm" name="idm45563213477648"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndb-nodeid"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--ndb-nodeid=#</code></td>
</tr><tr><th>型</th>
<td>数値</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">0</code></td>
</tr></tbody></table></div><p>
            このノード NDB Cluster ノード ID
            を設定します。
            <span class="emphasis"><em>許可される値の範囲は、ノードタイプ
            (データ、管理、または API) と NDB Cluster
            ソフトウェアバージョンによって異なります</em></span>。
            詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-limitations-limits" title="23.1.7.2 NDB Cluster と標準の MySQL 制限の制限と相違点">セクション23.1.7.2「NDB Cluster と標準の MySQL 制限の制限と相違点」</a>を参照してください。
          </p></li><li class="listitem"><p><a name="option_ndb_common_no-defaults"></a>
            <code class="option">--no-defaults</code>
          </p><a class="indexterm" name="idm45563213462608"></a><a class="indexterm" name="idm45563213460384"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for no-defaults"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--no-defaults</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">TRUE</code></td>
</tr></tbody></table></div><p>
            ログインファイル以外のオプションファイルからデフォルトのオプションを読み取らないでください。
          </p><p>
            このオプションおよびその他のオプションファイルオプションの詳細は、<a class="xref" href="programs.html#option-file-options" title="4.2.2.3 オプションファイルの処理に影響するコマンド行オプション">セクション4.2.2.3「オプションファイルの処理に影響するコマンド行オプション」</a>
            を参照してください。
          </p></li><li class="listitem"><p><a name="option_ndb_common_ndb-optimized-node-selection"></a>
            <code class="option">--ndb-optimized-node-selection</code>
          </p><a class="indexterm" name="idm45563213444432"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndb-optimized-node-selection"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--ndb-optimized-node-selection</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">TRUE</code></td>
</tr></tbody></table></div><p>
            トランザクションのためのノードの選択を最適化します。
            デフォルトで有効。
          </p></li><li class="listitem"><p><a name="option_ndb_common_print-defaults"></a>
            <code class="option">--print-defaults</code>
          </p><a class="indexterm" name="idm45563213430624"></a><a class="indexterm" name="idm45563213428384"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for print-defaults"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--print-defaults</code></td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">TRUE</code></td>
</tr></tbody></table></div><p>
            プログラム引数リストを出力して終了します。
          </p><p>
            このオプションおよびその他のオプションファイルオプションの詳細は、<a class="xref" href="programs.html#option-file-options" title="4.2.2.3 オプションファイルの処理に影響するコマンド行オプション">セクション4.2.2.3「オプションファイルの処理に影響するコマンド行オプション」</a>
            を参照してください。
          </p></li><li class="listitem"><p><a name="option_ndb_common_version"></a>
            <code class="option">--version</code>, <code class="option">-V</code>
          </p><a class="indexterm" name="idm45563213412272"></a><a class="indexterm" name="idm45563213410688"></a><div class="informaltable"><table frame="box" rules="all" summary="Properties for version"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--version</code></td>
</tr></tbody></table></div><p>
            実行可能ファイルの NDB Cluster
            バージョン番号を出力します。
            すべてのバージョンを一緒に使用できるわけではないため、バージョン番号が関連しており、NDB
            Cluster
            の起動プロセスは、使用されているバイナリのバージョンが同じクラスタ内に共存できることを検証します。
            これは、NDB Cluster のオンライン (ローリング)
            ソフトウェアアップグレードまたはダウングレードを実行する場合にも重要です。
          </p><p>
            詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-rolling-restart" title="23.5.5 NDB Cluster のローリング再起動の実行">セクション23.5.5「NDB Cluster のローリング再起動の実行」</a>を参照してください。
          </p></li></ul></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-cluster-management"></a>23.5 NDB Cluster の管理</h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-mgm-client-commands">23.5.1 NDB Cluster 管理クライアントのコマンド</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-logs-ndb-messages">23.5.2 NDB Cluster ログメッセージ</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-event-reports">23.5.3 NDB Cluster で生成されるイベントレポート</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-start-phases">23.5.4 NDB Cluster 起動フェーズのサマリー</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-rolling-restart">23.5.5 NDB Cluster のローリング再起動の実行</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-single-user-mode">23.5.6 NDB Cluster のシングルユーザーモード</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-online-add-node">23.5.7 NDB Cluster データノードのオンラインでの追加</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-backup">23.5.8 NDB Cluster のオンラインバックアップ</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-mysqld">23.5.9 NDB Cluster での MySQL Server の使用</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-disk-data">23.5.10 NDB Cluster ディスクデータテーブル</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-online-operations">23.5.11 NDB Cluster での ALTER TABLE を使用したオンライン操作</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-privilege-distribution">23.5.12 NDB_STORED_USER での分散 MySQL 権限</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndb-api-statistics">23.5.13 NDB API 統計のカウンタと変数</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo">23.5.14 ndbinfo: NDB Cluster 情報データベース</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-information-schema-tables">23.5.15 NDB Cluster の INFORMATION_SCHEMA テーブル</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-sql-statements">23.5.16 クイックリファレンス: NDB Cluster SQL ステートメント</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-security">23.5.17 NDB Cluster のセキュリティーの問題</a></span></dt></dl></div><a class="indexterm" name="idm45563213398704"></a><a class="indexterm" name="idm45563213396560"></a><p>
    NDB Cluster の管理には多数のタスクが含まれ、最初に NDB Cluster を構成および起動します。 これについては、<a class="xref" href="mysql-cluster.html#mysql-cluster-configuration" title="23.3 NDB Cluster の構成">セクション23.3「NDB Cluster の構成」</a>および<a class="xref" href="mysql-cluster.html#mysql-cluster-programs" title="23.4 NDB Cluster プログラム">セクション23.4「NDB Cluster プログラム」</a>で説明されています。 
  </p><p>
    次のいくつかのセクションでは、実行中の NDB Cluster の管理について説明します。
  </p><p>
    NDB Cluster の管理および配備に関するセキュリティーの問題については、<a class="xref" href="mysql-cluster.html#mysql-cluster-security" title="23.5.17 NDB Cluster のセキュリティーの問題">セクション23.5.17「NDB Cluster のセキュリティーの問題」</a> を参照してください。
  </p><p>
    基本的に、実行中の NDB Cluster をアクティブに管理する方法は 2 つあります。 それらのうちの 1 つ目は、管理クライアントに入力されたコマンドを使用するものです。これにより、クラスタのステータスをチェックしたり、ログレベルを変更したり、バックアップを開始および停止したり、ノードを停止および起動したりできます。 2 つ目の方法には、クラスタログ <code class="filename">ndb_<em class="replaceable"><code>node_id</code></em>_cluster.log</code> の内容の調査が伴います。通常、これは管理サーバーの <code class="literal">DataDir</code> ディレクトリで見つかりますが、この場所は <code class="literal">LogDestination</code> オプションを使用すればオーバーライドできます。 (<em class="replaceable"><code>node_id</code></em> は、アクティビティーのログが記録されるノードの一意の識別子を表すことを思い出してください。) クラスタログには、<span class="command"><strong>ndbd</strong></span> で生成されたイベントレポートが含まれます。 クラスタログのエントリを Unix システムログに送信することもできます。 
  </p><p>
    クラスタ操作の一部の側面は、<code class="literal">SHOW ENGINE NDB STATUS</code> ステートメントを使用して SQL ノードから監視することもできます。
  </p><p>
    NDB Cluster 操作の詳細は、<code class="literal">ndbinfo</code> データベースを使用した SQL インタフェースを介してリアルタイムで入手できます。 詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndbinfo" title="23.5.14 ndbinfo: NDB Cluster 情報データベース">セクション23.5.14「ndbinfo: NDB Cluster 情報データベース」</a>を参照してください。 
  </p><p>
    NDB 統計カウンタでは、<span class="command"><strong>mysql</strong></span> クライアントを使用したモニタリングが改善されています。 NDB カーネルに実装されているこれらのカウンタは、トランザクションの開始、クローズ、中断、主キーと一意キーの操作、テーブル、範囲、プルーニングされたスキャン、さまざまな操作の完了を待機しているブロックされたスレッド、NDB Cluster によって送受信されたデータとイベントなど、<code class="literal">Ndb</code> オブジェクトによって実行または影響を受ける操作に関連しています。 カウンタは、NDB API が呼び出されるたびに、またはデータノードでデータが送受信されるたびに NDB カーネルによってインクリメントされます。 
  </p><p>
    <span class="command"><strong>mysqld</strong></span> では、NDB API 統計カウンタがシステムステータス変数として表示されます。これらは、すべての名前に共通するプリフィクス (<code class="literal">Ndb_api_</code>) から識別できます。 これらの変数の値は、<code class="literal">SHOW STATUS</code> ステートメントの出力から、またはパフォーマンススキーマ <code class="literal">session_status</code> または <code class="literal">global_status</code> テーブルのいずれかをクエリーすることによって、<span class="command"><strong>mysql</strong></span> クライアントで読み取ることができます。 <code class="literal">NDB</code> テーブルに作用する SQL ステートメントの実行前後のステータス変数の値を比較することで、NDB Cluster のモニタリングおよびパフォーマンスチューニングに役立つこのステートメントに対応する NDB API レベルで実行されるアクションを監視できます。 
  </p><p>
    MySQL Cluster Manager は、多数のノードを持つ NDB Cluster の起動、停止、再起動など、それ以外の多くの複雑な NDB Cluster 管理タスクを簡略化する高度なコマンド行インタフェースを提供します。 MySQL Cluster Manager クライアントは、ほとんどのノード構成パラメータの値、NDB Cluster に関連する <span class="command"><strong>mysqld</strong></span> サーバーオプションおよび変数を取得および設定するためのコマンドもサポートしています。MySQL Cluster Manager バージョン 1.4.8 は NDB 8.0 の実験的なサポートを提供します。 詳しくは<a class="ulink" href="https://dev.mysql.com/doc/mysql-cluster-manager/1.4/en/" target="_top">MySQL™ Cluster Manager 1.4.8 User Manual</a>,をご覧ください。 
  </p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-cluster-mgm-client-commands"></a>23.5.1 NDB Cluster 管理クライアントのコマンド</h3></div></div></div><a class="indexterm" name="idm45563213365104"></a><a class="indexterm" name="idm45563213362960"></a><a class="indexterm" name="idm45563213360928"></a><p>
      主要な構成ファイルに加えて、管理クライアント <span class="command"><strong>ndb_mgm</strong></span> から使用可能なコマンド行インタフェースによって、クラスタを制御することもできます。 これは、実行中のクラスタへのプライマリ管理インタフェースです。 
    </p><p>
      イベントログのコマンドは、<a class="xref" href="mysql-cluster.html#mysql-cluster-event-reports" title="23.5.3 NDB Cluster で生成されるイベントレポート">セクション23.5.3「NDB Cluster で生成されるイベントレポート」</a>に示しています。バックアップを作成するためのコマンドと、バックアップからリストアするためのコマンドは、<a class="xref" href="mysql-cluster.html#mysql-cluster-backup" title="23.5.8 NDB Cluster のオンラインバックアップ">セクション23.5.8「NDB Cluster のオンラインバックアップ」</a>で説明しています。
    </p><p><b>MySQL Cluster Manager での ndb_mgm の使用. </b>
        <a class="indexterm" name="idm45563213354256"></a> <a class="indexterm" name="idm45563213352080"></a> MySQL Cluster Manager 1.4.8 は NDB 8.0 を完全にサポートします。MySQL Cluster Manager はプロセスの起動と停止を内部的に処理し、その状態を追跡するため、MySQL Cluster Manager 制御下にある NDB Cluster のこれらのタスクに <span class="command"><strong>ndb_mgm</strong></span> を使用する必要はありません。 NDB Cluster 配布に付属の <span class="command"><strong>ndb_mgm</strong></span> コマンドラインクライアントを使用して、ノードの起動または停止を伴う操作を実行しないことをお勧めします。 これらには、<code class="literal">START</code>、<code class="literal">STOP</code>、<code class="literal">RESTART</code>、および <code class="literal">SHUTDOWN</code> が含まれますが、これだけに限定されません。 詳細は、<a class="ulink" href="https://dev.mysql.com/doc/mysql-cluster-manager/1.4/en/mcm-process-commands.html" target="_top">MySQL Cluster Manager Process Commands</a>を参照してください。 
      </p><p>
      管理クライアントには、次のような基本的なコマンドが用意されています。 次のリストで、<em class="replaceable"><code>node_id</code></em> はデータノード ID またはキーワード <code class="literal">ALL</code> のいずれかを示します。これは、コマンドをすべてのクラスタデータノードに適用する必要があることを示します。 
    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a name="ndbclient-help"></a>
          <code class="literal">HELP</code>
        </p><a class="indexterm" name="idm45563213337984"></a><a class="indexterm" name="idm45563213335824"></a><p>
          使用可能なすべてのコマンドに関する情報を表示します。
        </p></li><li class="listitem"><p><a name="ndbclient-connect"></a>
          <code class="literal">CONNECT <em class="replaceable"><code>connection-string</code></em></code>
        </p><a class="indexterm" name="idm45563213331504"></a><a class="indexterm" name="idm45563213329328"></a><p>
          接続文字列で示される管理サーバーに接続します。 クライアントがすでにこのサーバーに接続されている場合、クライアントは再接続します。 
        </p></li><li class="listitem"><p><a name="ndbclient-show"></a>
          <code class="literal">SHOW</code>
        </p><a class="indexterm" name="idm45563213324992"></a><a class="indexterm" name="idm45563213322832"></a><p>
          クラスタのステータスに関する情報を表示します。 可能性のあるノードステータスの値には、<code class="literal">UNKNOWN</code>、<code class="literal">NO_CONTACT</code>、<code class="literal">NOT_STARTED</code>、<code class="literal">STARTING</code>、<code class="literal">STARTED</code>、<code class="literal">SHUTTING_DOWN</code>、および <code class="literal">RESTARTING</code> が含まれます。 
        </p><p>
          このコマンドからの出力には、クラスタがシングルユーザーモード (ステータス <code class="literal">SINGLE USER MODE</code>) になるタイミングも示されます。 NDB 8.0.17 以降では、このモードが有効な場合、どの API または SQL ノードが排他的アクセスを持つかも示します。これは、クラスタに接続されているすべてのデータノードおよび管理ノードが 8.0.17 以降のバージョンである場合にのみ機能します。 
        </p></li><li class="listitem"><p><a name="ndbclient-start"></a>
          <code class="literal"><em class="replaceable"><code>node_id</code></em> START</code>
        </p><a class="indexterm" name="idm45563213311392"></a><a class="indexterm" name="idm45563213309232"></a><p>
          <em class="replaceable"><code>node_id</code></em> によって識別されるデータノード (またはすべてのデータノード) をオンラインにします。
        </p><p>
          <code class="literal">ALL START</code> はすべてのデータノードでのみ動作し、管理ノードには影響を与えません。
        </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">重要</div><p>
            このコマンドを使用してデータノードをオンラインにするには、<code class="option">--nostart</code> または <code class="option">-n</code> を使用してデータノードが起動されている必要があります。
          </p></div></li><li class="listitem"><p><a name="ndbclient-stop"></a>
          <code class="literal"><em class="replaceable"><code>node_id</code></em> STOP [-a] [-f]</code>
        </p><a class="indexterm" name="idm45563213300816"></a><a class="indexterm" name="idm45563213298656"></a><p>
          <em class="replaceable"><code>node_id</code></em> によって識別されるデータノードまたは管理ノードを停止します。
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
            <code class="literal">ALL STOP</code> は、すべてのデータノードのみを停止するように機能し、管理ノードには影響しません。
          </p></div><p>
          このコマンドの影響を受けるノードはクラスタから切断され、それに関連付けられた <span class="command"><strong>ndbd</strong></span> または <span class="command"><strong>ndb_mgmd</strong></span> プロセスは終了します。
        </p><p>
          <code class="option">-a</code> オプションを使用すると、保留中のトランザクションが完了するまで待機せずに、すぐにノードが停止されます。
        </p><p>
          通常、結果として不完全なクラスタが生成される場合は、<code class="literal">STOP</code> に失敗します。 <code class="option">-f</code> オプションを使用すると、これをチェックせずに、強制的にノードがシャットダウンされます。 このオプションが使用され、結果が不完全なクラスタである場合は、すぐにクラスタがシャットダウンします。 
        </p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">警告</div><p>
            また、<code class="option">-a</code> オプションを使用すると、ノードが停止されても不完全なクラスタが生成されないように、<code class="literal">STOP</code> の呼び出し時に本来実行される安全性チェックも無効になります。 つまり、<code class="literal">STOP</code> コマンドで <code class="option">-a</code> オプションを使用すると、クラスタは <code class="literal">NDB</code> に格納されたすべてのデータの完全なコピーを保持しなくなるため、強制的にシャットダウンされる可能性があることにより、このオプションを使用する際は、細心の注意を払うようにしてください。 
          </p></div></li><li class="listitem"><p><a name="ndbclient-restart"></a>
          <code class="literal"><em class="replaceable"><code>node_id</code></em> RESTART [-n] [-i] [-a] [-f]</code>
        </p><a class="indexterm" name="idm45563213281392"></a><a class="indexterm" name="idm45563213279216"></a><p>
          <em class="replaceable"><code>node_id</code></em> によって識別されるデータノード (またはすべてのデータノード) を再起動します。
        </p><p>
          <code class="literal">RESTART</code> で <code class="option">-i</code> オプションを使用すると、データノードは初期再起動を実行します。つまり、ノードファイルシステムが削除され、再作成されます。 この効果は、データノードのプロセスを停止してから、システムシェルから <span class="command"><strong>ndbd</strong></span> <code class="option">--initial</code> を使用して再起動した場合と同じです。 
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
            このオプションを使用した場合、バックアップファイルおよびディスクデータファイルは削除されません。
          </p></div><p>
          <code class="option">-n</code> オプションを使用するとデータノードプロセスが再起動されますが、実際には、適切な <code class="literal">START</code> コマンドが発行されるまでデータノードはオンラインになりません。 このオプションの効果は、データノードを停止してから、システムシェルから <span class="command"><strong>ndbd</strong></span> <code class="option">--nostart</code> または <span class="command"><strong>ndbd</strong></span> <code class="option">-n</code> を使用して再起動した場合と同じです。 
        </p><p>
          <code class="option">-a</code> を使用すると、このノードに依存している現在のトランザクションがすべて中止されます。 ノードがクラスタに再度参加するときは、GCP チェックが実行されません。 
        </p><p>
          通常、ノードをオフラインにしたことで不完全なクラスタが生成される場合は、<code class="literal">RESTART</code> が失敗します。 <code class="option">-f</code> オプションを使用すると、これをチェックせずに、強制的にノードが再起動されます。 このオプションが使用され、結果が不完全なクラスタである場合は、クラスタ全体が再起動されます。 
        </p></li><li class="listitem"><p><a name="ndbclient-status"></a>
          <code class="literal"><em class="replaceable"><code>node_id</code></em> STATUS</code>
        </p><a class="indexterm" name="idm45563213261120"></a><a class="indexterm" name="idm45563213258960"></a><p>
          <em class="replaceable"><code>node_id</code></em> によって識別されるデータノード (またはすべてのデータノード) のステータス情報を表示します。
        </p><p>
          このコマンドからの出力には、クラスタがシングルユーザーモードになるタイミングも示されます。
        </p></li><li class="listitem"><p><a name="ndbclient-report"></a>
          <code class="literal"><em class="replaceable"><code>node_id</code></em> REPORT <em class="replaceable"><code>report-type</code></em></code>
        </p><a class="indexterm" name="idm45563213253136"></a><a class="indexterm" name="idm45563213250976"></a><p>
          <em class="replaceable"><code>node_id</code></em> によって識別されるデータノード、または <code class="literal">ALL</code> を使用するすべてのデータノードに対する <em class="replaceable"><code>report-type</code></em> タイプのレポートを表示します。
        </p><p>
          現在、<em class="replaceable"><code>report-type</code></em> には次の 3 つの許容値があります:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              <code class="literal">BackupStatus</code> では、進行中のクラスタバックアップに関するステータスレポートが提供されます。
            </p></li><li class="listitem"><p>
              <code class="literal">MemoryUsage</code> では、次の例で示すように、各データノードで使用されているデータメモリーおよびインデックスメモリーの量が表示されます。
            </p><pre class="programlisting">ndb_mgm&gt; <strong class="userinput"><code>ALL REPORT MEMORY</code></strong>

Node 1: Data usage is 5%(177 32K pages of total 3200)
Node 1: Index usage is 0%(108 8K pages of total 12832)
Node 2: Data usage is 5%(177 32K pages of total 3200)
Node 2: Index usage is 0%(108 8K pages of total 12832)
</pre><p>
              この情報は、<code class="literal">ndbinfo.memoryusage</code> テーブルから取得することもできます。
            </p></li><li class="listitem"><p>
              <code class="literal">EventLog</code> は、1 つ以上のデータノードのイベントログバッファーからイベントを報告します。
            </p></li></ul></div><p>
          <em class="replaceable"><code>report-type</code></em> は大文字と小文字が区別されず、<span class="quote">「<span class="quote">あいまい</span>」</span>です。<code class="literal">MemoryUsage</code> では、<code class="literal">MEMORY</code> (前述の例で示すとおり)、<code class="literal">memory</code>、または単に <code class="literal">MEM</code> (または <code class="literal">mem</code>) を使用できます。 <code class="literal">BackupStatus</code> も同様に短縮できます。 
        </p></li><li class="listitem"><p><a name="ndbclient-enter-single-user-mode"></a>
          <code class="literal">ENTER SINGLE USER MODE <em class="replaceable"><code>node_id</code></em></code>
        </p><a class="indexterm" name="idm45563213228848"></a><a class="indexterm" name="idm45563213226720"></a><a class="indexterm" name="idm45563213225312"></a><a class="indexterm" name="idm45563213223216"></a><p>
          シングルユーザーモードを開始します。これにより、ノード ID <em class="replaceable"><code>node_id</code></em> によって識別される MySQL サーバーにのみデータベースへのアクセスが許可されます。
        </p><p>
          NDB 8.0.17 以降、<span class="command"><strong>ndb_mgm</strong></span> クライアントは、次に示すように、このコマンドが発行されて有効になったことを明確に確認します:
        </p><pre class="programlisting">ndb_mgm&gt; <strong class="userinput"><code>ENTER SINGLE USER MODE 100</code></strong>
Single user mode entered
Access is granted for API node 100 only.
</pre><p>
          また、NDB 8.0.17 以降では、シングルユーザーモードのときに排他的アクセスを持つ API または SQL ノードは、次のように <code class="literal">SHOW</code> コマンドの出力に示されます:
        </p><pre class="programlisting">ndb_mgm&gt; <strong class="userinput"><code>SHOW</code></strong>
Cluster Configuration
---------------------
[ndbd(NDB)]     2 node(s)
id=5    @127.0.0.1  (mysql-8.0.17 ndb-8.0.17, single user mode, Nodegroup: 0, *)
id=6    @127.0.0.1  (mysql-8.0.17 ndb-8.0.17, single user mode, Nodegroup: 0)

[ndb_mgmd(MGM)] 1 node(s)
id=50   @127.0.0.1  (mysql-8.0.17 ndb-8.0.17)

[mysqld(API)]   2 node(s)
id=100  @127.0.0.1  (mysql-8.0.17 ndb-8.0.17, allowed single user)
id=101 (not connected, accepting connect from any host)
</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
            この機能を有効にするには、すべてのデータおよび管理ノードで NDB Cluster ソフトウェアのバージョン 8.0.17 が実行されている必要があります。
          </p></div></li><li class="listitem"><p><a name="ndbclient-exit-single-user-mode"></a>
          <code class="literal">EXIT SINGLE USER MODE</code>
        </p><a class="indexterm" name="idm45563213210576"></a><a class="indexterm" name="idm45563213208416"></a><p>
          シングルユーザーモードを終了します。これにより、すべての SQL ノード (つまり、実行中のすべての <span class="command"><strong>mysqld</strong></span> プロセス) がデータベースにアクセスできます。
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
            シングルユーザーモードでないときでも、<code class="literal">EXIT SINGLE USER MODE</code> を使用できますが、この場合、コマンドの効果はありません。
          </p></div></li><li class="listitem"><p><a name="ndbclient-quit"></a>
          <code class="literal">QUIT</code>, <code class="literal">EXIT</code>
        </p><a class="indexterm" name="idm45563213200640"></a><a class="indexterm" name="idm45563213198480"></a><a class="indexterm" name="idm45563213197072"></a><a class="indexterm" name="idm45563213195024"></a><p>
          管理クライアントを終了します。
        </p><p>
          このコマンドは、クラスタに接続されているノードに影響を与えません。
        </p></li><li class="listitem"><p><a name="ndbclient-shutdown"></a>
          <code class="literal">SHUTDOWN</code>
        </p><a class="indexterm" name="idm45563213190464"></a><a class="indexterm" name="idm45563213188288"></a><p>
          すべてのクラスタデータノードおよび管理ノードをシャットダウンします。 これが実行されたあとに管理クライアントを終了するには、<code class="literal">EXIT</code> または <code class="literal">QUIT</code> を使用します。 
        </p><p>
          このコマンドは、クラスタに接続しているどの SQL ノードまたは API ノードもシャットダウン<span class="emphasis"><em>しません</em></span>。
        </p></li><li class="listitem"><p><a name="ndbclient-create-nodegroup"></a>
          <code class="literal">CREATE NODEGROUP <em class="replaceable"><code>nodeid</code></em>[, <em class="replaceable"><code>nodeid</code></em>, ...]</code>
        </p><a class="indexterm" name="idm45563213179904"></a><a class="indexterm" name="idm45563213177744"></a><p>
          新しい NDB Cluster ノードグループを作成し、データノードを結合させます。
        </p><p>
          このコマンドは、NDB Cluster に新しいデータノードをオンラインで追加したあとに使用され、新しいノードグループに参加してクラスタへの参加を完全に開始します。 このコマンドは唯一のパラメータとして、ノード ID をカンマで区切ったリストを取りますが、これらは、先ほど追加した、新しいノードグループに参加することになるノードの ID です。 ノードの数は、すでにクラスタの一部である各ノードグループ内のノードの数と同じである必要があります (NDB Cluster ノードグループごとに同じ数のノードを持つ必要があります)。 つまり、NDB Cluster にそれぞれ 2 つのデータノードの 2 つのノードグループがある場合、新しいノードグループにも 2 つのデータノードが必要です。 
        </p><p>
          このコマンドで作成された新しいノードグループのノードグループ ID は自動的に決定され、常に、クラスタ内で次に最大の未使用のノードグループ ID となり、手動で設定することはできません。
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-online-add-node" title="23.5.7 NDB Cluster データノードのオンラインでの追加">セクション23.5.7「NDB Cluster データノードのオンラインでの追加」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="ndbclient-drop-nodegroup"></a>
          <code class="literal">DROP NODEGROUP <em class="replaceable"><code>nodegroup_id</code></em></code>
        </p><a class="indexterm" name="idm45563213168864"></a><a class="indexterm" name="idm45563213166720"></a><p>
          指定された <em class="replaceable"><code>nodegroup_id</code></em> の NDB Cluster ノードグループを削除します。
        </p><p>
          このコマンドを使用すると、NDB Cluster からノードグループを削除できます。 <code class="literal">DROP NODEGROUP</code> は唯一の引数として、削除するノードグループのノードグループ ID を取ります。 
        </p><p>
          <code class="literal">DROP NODEGROUP</code> は、影響を受けるノードグループ内のデータグループをそのノードグループから削除するためにのみ機能します。 データノードは停止されず、別のノードグループにも割り当てられず、クラスタの構成からも削除されません。 ノードグループに属さないデータノードは、次のように (太字のテキストを使用して示すように)、ノードグループ ID の代わりに、<code class="literal">no nodegroup</code> を付けた管理クライアントの <code class="literal">SHOW</code> コマンドの出力に表示されます。 
        </p><pre class="programlisting">id=3    @10.100.2.67  (8.0.23-ndb-8.0.23, <span class="bold"><strong>no nodegroup</strong></span>)
</pre><p>
          <code class="literal">DROP NODEGROUP</code> は、削除されるノードグループ内のすべてのデータノードに、テーブルデータやテーブル定義がまったく存在しない場合にのみ機能します。 現在は、<span class="command"><strong>ndb_mgm</strong></span> または <span class="command"><strong>mysql</strong></span> クライアントを使用して、特定のデータノードやノードグループからすべてのデータを削除する方法がないため、これは次のような 2 つの場合にのみコマンドが成功することを意味します。 
        </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
              <span class="command"><strong>ndb_mgm</strong></span> クライアントで <code class="literal">CREATE NODEGROUP</code> を発行した後、<span class="command"><strong>mysql</strong></span> クライアントで <code class="literal">ALTER TABLE ... REORGANIZE PARTITION</code> ステートメントを発行する前。
            </p></li><li class="listitem"><p>
              <code class="literal">DROP TABLE</code> を使用してすべての <code class="literal">NDBCLUSTER</code> テーブルを削除したあと。
            </p><p>
              <code class="literal">TRUNCATE TABLE</code> はテーブルデータのみを削除するため、この目的では機能しません。テーブルのメタデータが削除される <code class="literal">DROP TABLE</code> ステートメントが発行されるまで、データノードには引き続き <code class="literal">NDBCLUSTER</code> テーブルの定義が格納されます。
            </p></li></ol></div><p>
          <code class="literal">DROP NODEGROUP</code> の詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-online-add-node" title="23.5.7 NDB Cluster データノードのオンラインでの追加">セクション23.5.7「NDB Cluster データノードのオンラインでの追加」</a>を参照してください。
        </p></li><li class="listitem"><p><a name="ndbclient-prompt"></a>
          <code class="literal">PROMPT [<em class="replaceable"><code>prompt</code></em>]</code>
        </p><a class="indexterm" name="idm45563213137408"></a><a class="indexterm" name="idm45563213135248"></a><p>
          <span class="command"><strong>ndb_mgm</strong></span> によって表示されるプロンプトを文字列リテラル <em class="replaceable"><code>prompt</code></em> に変更します。
        </p><p>
          <em class="replaceable"><code>prompt</code></em> は引用符で囲まないでください (プロンプトに引用符を含める場合を除く)。 <span class="command"><strong>mysql</strong></span> クライアントの場合とは異なり、特殊文字シーケンスおよびエスケープは認識されません。 引数を指定せずにコールすると、プロンプトはデフォルト値 (<code class="literal">ndb_mgm&gt;</code>) にリセットされます。 
        </p><p>
          次に例をいくつか示します:
        </p><pre class="programlisting">ndb_mgm&gt; <strong class="userinput"><code>PROMPT mgm#1:</code></strong>
mgm#1: <strong class="userinput"><code>SHOW</code></strong>
Cluster Configuration
...
mgm#1: <strong class="userinput"><code>PROMPT mymgm &gt;</code></strong>
mymgm &gt; <strong class="userinput"><code>PROMPT 'mymgm:'</code></strong>
'mymgm:' <strong class="userinput"><code>PROMPT  mymgm:</code></strong>
mymgm: <strong class="userinput"><code>PROMPT</code></strong>
ndb_mgm&gt; <strong class="userinput"><code>EXIT</code></strong>
jon@valhaj:~/bin&gt;
</pre><p>
          <em class="replaceable"><code>prompt</code></em> 文字列内の先頭の空白および空白は切り捨てられないことに注意してください。 末尾のスペースは削除されます。 
        </p></li><li class="listitem"><p><a name="ndbclient-nodelog-debug"></a>
          <code class="literal"><em class="replaceable"><code>node_id</code></em> NODELOG DEBUG {ON|OFF}</code>
        </p><a class="indexterm" name="idm45563213119152"></a><a class="indexterm" name="idm45563213116960"></a><p>
          影響を受けるデータノードが <code class="option">--verbose</code> オプションで起動されたかのように、ノードログ内のデバッグロギングを切り替えます。 <code class="literal">NODELOG DEBUG ON</code> はデバッグロギングを開始します。<code class="literal">NODELOG DEBUG OFF</code> はデバッグロギングをオフに切り替えます。 
        </p></li></ul></div><p><b>その他のコマンド. </b>
        次のリストに示すように、<span class="command"><strong>ndb_mgm</strong></span> クライアントで使用可能なその他の多くのコマンドについては、別の場所で説明します:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          <code class="literal">START BACKUP</code> は、<span class="command"><strong>ndb_mgm</strong></span> クライアントでオンラインバックアップを実行するために使用されます。<code class="literal">ABORT BACKUP</code> コマンドは、すでに進行中のバックアップを取り消すために使用されます。 詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-backup" title="23.5.8 NDB Cluster のオンラインバックアップ">セクション23.5.8「NDB Cluster のオンラインバックアップ」</a>を参照してください。 
        </p></li><li class="listitem"><p>
          <code class="literal">CLUSTERLOG</code> コマンドは、様々なロギング機能を実行するために使用します。 詳細および例については、<a class="xref" href="mysql-cluster.html#mysql-cluster-event-reports" title="23.5.3 NDB Cluster で生成されるイベントレポート">セクション23.5.3「NDB Cluster で生成されるイベントレポート」</a>を参照してください。 このセクションで前述したように、<code class="literal">NODELOG DEBUG</code> はノードログのデバッグ出力をアクティブ化または非アクティブ化します。 
        </p></li><li class="listitem"><p>
          テストおよび診断作業のために、クライアントは、クラスタで内部コマンドを実行するために使用できる <code class="literal">DUMP</code> コマンドをサポートしています。 MySQL サポートから指示されないかぎり、本番設定では使用しないでください。 詳細は、<a class="ulink" href="https://dev.mysql.com/doc/ndb-internals/en/" target="_top">MySQL NDB Cluster Internals Manual</a>を参照してください。 
        </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-cluster-logs-ndb-messages"></a>23.5.2 NDB Cluster ログメッセージ</h3></div></div></div><div class="toc"><dl class="toc"><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-logs-cluster-log">23.5.2.1 NDB Cluster: クラスタログ内のメッセージ</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-log-startup-messages">23.5.2.2 NDB Cluster のログ起動メッセージ</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-logs-event-buffer">23.5.2.3 クラスタログでのイベントバッファのレポート</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndb-transporter-errors">23.5.2.4 NDB Cluster: NDB トランスポータエラー</a></span></dt></dl></div><p>
      このセクションでは、さまざまなクラスタログイベントに対応してクラスタに書き込まれるメッセージに関する情報を提供します。 <code class="literal">NDB</code> トランスポータのエラーについて、より具体的な追加情報も提供します。 
    </p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-logs-cluster-log"></a>23.5.2.1 NDB Cluster: クラスタログ内のメッセージ</h4></div></div></div><p>
        次の表には、もっとも一般的な <code class="literal">NDB</code> クラスタログメッセージを一覧表示します。 クラスタログ、ログイベント、およびイベントタイプについては、<a class="xref" href="mysql-cluster.html#mysql-cluster-event-reports" title="23.5.3 NDB Cluster で生成されるイベントレポート">セクション23.5.3「NDB Cluster で生成されるイベントレポート」</a>を参照してください。 これらのログメッセージは、MGM API のログイベントタイプにも対応します。Cluster API の開発者が関心を持つような関連情報については、<a class="ulink" href="https://dev.mysql.com/doc/ndbapi/en/mgm-types.html#mgm-ndb-logevent-type" target="_top">The Ndb_logevent_type Type</a>を参照してください。 
      </p><div class="table"><a name="idm45563213090464"></a><p class="title"><b>表 23.51 NDB クラスタの一般的なログメッセージ</b></p><div class="table-contents"><table><col style="width: 20%"><col style="width: 20%"><col style="width: 25%"><col style="width: 15%"><col style="width: 10%"><col style="width: 10%"><thead><tr>
            <th scope="col">ログメッセージ</th>
            <th scope="col">説明</th>
            <th scope="col">イベント名</th>
            <th scope="col">イベントタイプ</th>
            <th scope="col">優先度</th>
            <th scope="col">重大度</th>
          </tr></thead><tbody><tr>
            <th scope="row"><code class="literal">Node <em class="replaceable"><code>mgm_node_id</code></em>: Node <em class="replaceable"><code>data_node_id</code></em> Connected</code></th>
            <td>ノード ID <em class="replaceable"><code>node_id</code></em> を持つデータノードが管理サーバー (ノード <em class="replaceable"><code>mgm_node_id</code></em>) に接続しました。</td>
            <td><code class="literal">Connected</code></td>
            <td><code class="literal">Connection</code></td>
            <td>8</td>
            <td><code class="literal">INFO</code></td>
          </tr><tr>
            <th scope="row"><code class="literal">Node <em class="replaceable"><code>mgm_node_id</code></em>: Node <em class="replaceable"><code>data_node_id</code></em> Disconnected</code></th>
            <td>ノード ID <em class="replaceable"><code>data_node_id</code></em> を持つデータノードが管理サーバー (ノード <em class="replaceable"><code>mgm_node_id</code></em>) から切断しました。</td>
            <td><code class="literal">Disconnected</code></td>
            <td><code class="literal">Connection</code></td>
            <td>8</td>
            <td><code class="literal">ALERT</code></td>
          </tr><tr>
            <th scope="row"><code class="literal">Node <em class="replaceable"><code>data_node_id</code></em>: Communication to Node <em class="replaceable"><code>api_node_id</code></em> closed</code></th>
            <td>ノード ID <em class="replaceable"><code>api_node_id</code></em> を持つ API ノードまたは SQL ノードがデータノード <em class="replaceable"><code>data_node_id</code></em> と通信しなくなりました。</td>
            <td><code class="literal">CommunicationClosed</code></td>
            <td><code class="literal">Connection</code></td>
            <td>8</td>
            <td><code class="literal">INFO</code></td>
          </tr><tr>
            <th scope="row"><code class="literal">Node <em class="replaceable"><code>data_node_id</code></em>: Communication to Node <em class="replaceable"><code>api_node_id</code></em> opened</code></th>
            <td>ノード ID <em class="replaceable"><code>api_node_id</code></em> を持つ API ノードまたは SQL ノードがデータノード <em class="replaceable"><code>data_node_id</code></em> と通信しています。</td>
            <td><code class="literal">CommunicationOpened</code></td>
            <td><code class="literal">Connection</code></td>
            <td>8</td>
            <td><code class="literal">INFO</code></td>
          </tr><tr>
            <th scope="row"><code class="literal">Node <em class="replaceable"><code>mgm_node_id</code></em>: Node <em class="replaceable"><code>api_node_id</code></em>: API <em class="replaceable"><code>version</code></em></code></th>
            <td>ノード ID <em class="replaceable"><code>api_node_id</code></em> を持つ API ノードが <code class="literal">NDB</code> API バージョン <em class="replaceable"><code>version</code></em> (一般に、MySQL バージョン番号と同じ) を使用して、管理ノード <em class="replaceable"><code>mgm_node_id</code></em> に接続しました。</td>
            <td><code class="literal">ConnectedApiVersion</code></td>
            <td><code class="literal">Connection</code></td>
            <td>8</td>
            <td><code class="literal">INFO</code></td>
          </tr><tr>
            <th scope="row"><code class="literal">Node <em class="replaceable"><code>node_id</code></em>: Global checkpoint <em class="replaceable"><code>gci</code></em> started</code></th>
            <td>ID <em class="replaceable"><code>gci</code></em> を持つグローバルチェックポイントが開始されました。ノード <em class="replaceable"><code>node_id</code></em> は、このグローバルチェックポイントを担当するマスターです。</td>
            <td><code class="literal">GlobalCheckpointStarted</code></td>
            <td><code class="literal">Checkpoint</code></td>
            <td>9</td>
            <td><code class="literal">INFO</code></td>
          </tr><tr>
            <th scope="row"><code class="literal">Node <em class="replaceable"><code>node_id</code></em>: Global checkpoint <em class="replaceable"><code>gci</code></em> completed</code></th>
            <td>ID <em class="replaceable"><code>gci</code></em> を持つグローバルチェックポイントが完了しました。ノード <em class="replaceable"><code>node_id</code></em> は、このグローバルチェックポイントを担当したマスターでした。</td>
            <td><code class="literal">GlobalCheckpointCompleted</code></td>
            <td><code class="literal">Checkpoint</code></td>
            <td>10</td>
            <td><code class="literal">INFO</code></td>
          </tr><tr>
            <th scope="row"><code class="literal">Node <em class="replaceable"><code>node_id</code></em>: Local checkpoint <em class="replaceable"><code>lcp</code></em> started. Keep GCI = <em class="replaceable"><code>current_gci</code></em> oldest restorable GCI = <em class="replaceable"><code>old_gci</code></em></code></th>
            <td>シーケンス ID <em class="replaceable"><code>lcp</code></em> を持つローカルチェックポイントがノード <em class="replaceable"><code>node_id</code></em> で開始されました。 使用可能な最新の GCI はインデックス <em class="replaceable"><code>current_gci</code></em> を持ち、クラスタをリストアできるもっとも古い GCI はインデックス <em class="replaceable"><code>old_gci</code></em> を持っています。 </td>
            <td><code class="literal">LocalCheckpointStarted</code></td>
            <td><code class="literal">Checkpoint</code></td>
            <td>7</td>
            <td><code class="literal">INFO</code></td>
          </tr><tr>
            <th scope="row"><code class="literal">Node <em class="replaceable"><code>node_id</code></em>: Local checkpoint <em class="replaceable"><code>lcp</code></em> completed</code></th>
            <td>ノード <em class="replaceable"><code>node_id</code></em> 上でシーケンス ID <em class="replaceable"><code>lcp</code></em> を持つローカルチェックポイントが完了しました。</td>
            <td><code class="literal">LocalCheckpointCompleted</code></td>
            <td><code class="literal">Checkpoint</code></td>
            <td>8</td>
            <td><code class="literal">INFO</code></td>
          </tr><tr>
            <th scope="row"><code class="literal">Node <em class="replaceable"><code>node_id</code></em>: Local Checkpoint stopped in CALCULATED_KEEP_GCI</code></th>
            <td>このノードは、使用可能な最新の GCI を特定できませんでした。</td>
            <td><code class="literal">LCPStoppedInCalcKeepGci</code></td>
            <td><code class="literal">Checkpoint</code></td>
            <td>0</td>
            <td><code class="literal">ALERT</code></td>
          </tr><tr>
            <th scope="row"><code class="literal">Node <em class="replaceable"><code>node_id</code></em>: Table ID = <em class="replaceable"><code>table_id</code></em>, fragment <em class="replaceable"><code>ID = fragment_id</code></em> has completed LCP on Node <em class="replaceable"><code>node_id</code></em> maxGciStarted: <em class="replaceable"><code>started_gci</code></em> maxGciCompleted: <em class="replaceable"><code>completed_gci</code></em></code></th>
            <td>ノード <em class="replaceable"><code>node_id</code></em> 上のディスクに対して、テーブルフラグメントのチェックポイントが実行されました。 進行中の GCI はインデックス <em class="replaceable"><code>started_gci</code></em> を持ち、最近完了した GCI はインデックス <em class="replaceable"><code>completed_gci</code></em> を持っています。 </td>
            <td><code class="literal">LCPFragmentCompleted</code></td>
            <td><code class="literal">Checkpoint</code></td>
            <td>11</td>
            <td><code class="literal">INFO</code></td>
          </tr><tr>
            <th scope="row"><code class="literal">Node <em class="replaceable"><code>node_id</code></em>: ACC Blocked <em class="replaceable"><code>num_1</code></em> and TUP Blocked <em class="replaceable"><code>num_2</code></em> times last second</code></th>
            <td>ログバッファーがオーバーフローしそうなため、Undo ロギングがブロックされています。</td>
            <td><code class="literal">UndoLogBlocked</code></td>
            <td><code class="literal">Checkpoint</code></td>
            <td>7</td>
            <td><code class="literal">INFO</code></td>
          </tr><tr>
            <th scope="row"><code class="literal">Node <em class="replaceable"><code>node_id</code></em>: Start initiated <em class="replaceable"><code>version</code></em></code></th>
            <td><code class="literal">NDB</code> バージョン <em class="replaceable"><code>version</code></em> を実行しているデータノード <em class="replaceable"><code>node_id</code></em> が起動プロセスを開始しています。</td>
            <td><code class="literal">NDBStartStarted</code></td>
            <td><code class="literal">StartUp</code></td>
            <td>1</td>
            <td><code class="literal">INFO</code></td>
          </tr><tr>
            <th scope="row"><code class="literal">Node <em class="replaceable"><code>node_id</code></em>: Started <em class="replaceable"><code>version</code></em></code></th>
            <td><code class="literal">NDB</code> バージョン <em class="replaceable"><code>version</code></em> を実行しているデータノード <em class="replaceable"><code>node_id</code></em> が正常に起動されました。</td>
            <td><code class="literal">NDBStartCompleted</code></td>
            <td><code class="literal">StartUp</code></td>
            <td>1</td>
            <td><code class="literal">INFO</code></td>
          </tr><tr>
            <th scope="row"><code class="literal">Node <em class="replaceable"><code>node_id</code></em>: STTORRY received after restart finished</code></th>
            <td>ノードがクラスタの再起動が完了したことを示すシグナルを受信しました。</td>
            <td><code class="literal">STTORRYRecieved</code></td>
            <td><code class="literal">StartUp</code></td>
            <td>15</td>
            <td><code class="literal">INFO</code></td>
          </tr><tr>
            <th scope="row"><code class="literal">Node <em class="replaceable"><code>node_id</code></em>: Start phase <em class="replaceable"><code>phase</code></em> completed (<em class="replaceable"><code>type</code></em>)</code></th>
            <td>ノードが <em class="replaceable"><code>type</code></em> 起動の起動フェーズ <em class="replaceable"><code>phase</code></em> を完了しました。 起動フェーズのリストについては、<a class="xref" href="mysql-cluster.html#mysql-cluster-start-phases" title="23.5.4 NDB Cluster 起動フェーズのサマリー">セクション23.5.4「NDB Cluster 起動フェーズのサマリー」</a>を参照してください (<em class="replaceable"><code>type</code></em> は <code class="literal">initial</code>、<code class="literal">system</code>、<code class="literal">node</code>、<code class="literal">initial node</code>、または <code class="literal">&lt;Unknown&gt;</code> のいずれかです)。 </td>
            <td><code class="literal">StartPhaseCompleted</code></td>
            <td><code class="literal">StartUp</code></td>
            <td>4</td>
            <td><code class="literal">INFO</code></td>
          </tr><tr>
            <th scope="row"><code class="literal">Node <em class="replaceable"><code>node_id</code></em>: CM_REGCONF president = <em class="replaceable"><code>president_id</code></em>, own Node = <em class="replaceable"><code>own_id</code></em>, our dynamic id = <em class="replaceable"><code>dynamic_id</code></em></code></th>
            <td>ノード <em class="replaceable"><code>president_id</code></em> が<span class="quote">「<span class="quote">プレジデント</span>」</span>として選択されました。<em class="replaceable"><code>own_id</code></em> および <em class="replaceable"><code>dynamic_id</code></em> は、常にレポートノードの ID (<em class="replaceable"><code>node_id</code></em>) と同じであるべきです。</td>
            <td><code class="literal">CM_REGCONF</code></td>
            <td><code class="literal">StartUp</code></td>
            <td>3</td>
            <td><code class="literal">INFO</code></td>
          </tr><tr>
            <th scope="row"><code class="literal">Node <em class="replaceable"><code>node_id</code></em>: CM_REGREF from Node <em class="replaceable"><code>president_id</code></em> to our Node <em class="replaceable"><code>node_id</code></em>. Cause = <em class="replaceable"><code>cause</code></em></code></th>
            <td>レポートノード (ID <em class="replaceable"><code>node_id</code></em>) がプレジデントとしてノード <em class="replaceable"><code>president_id</code></em> を受け入れることができませんでした。 問題の <em class="replaceable"><code>cause</code></em> は、<code class="literal">Busy</code>、<code class="literal">Election with wait = false</code>、<code class="literal">Not president</code>、<code class="literal">Election without selecting new candidate</code>、または <code class="literal">No such cause</code> のいずれかとして指定されます。 </td>
            <td><code class="literal">CM_REGREF</code></td>
            <td><code class="literal">StartUp</code></td>
            <td>8</td>
            <td><code class="literal">INFO</code></td>
          </tr><tr>
            <th scope="row"><code class="literal">Node <em class="replaceable"><code>node_id</code></em>: We are Node <em class="replaceable"><code>own_id</code></em> with dynamic ID <em class="replaceable"><code>dynamic_id</code></em>, our left neighbor is Node <em class="replaceable"><code>id_1</code></em>, our right is Node <em class="replaceable"><code>id_2</code></em></code></th>
            <td>ノードがクラスタ内の隣接するノード (ノード <em class="replaceable"><code>id_1</code></em> とノード <em class="replaceable"><code>id_2</code></em>) を検出しました。<em class="replaceable"><code>node_id</code></em>、<em class="replaceable"><code>own_id</code></em>、および <em class="replaceable"><code>dynamic_id</code></em> は、常に同じであるべきです。そうでない場合は、クラスタノード構成の重大な誤りを示しています。</td>
            <td><code class="literal">FIND_NEIGHBOURS</code></td>
            <td><code class="literal">StartUp</code></td>
            <td>8</td>
            <td><code class="literal">INFO</code></td>
          </tr><tr>
            <th scope="row"><code class="literal">Node <em class="replaceable"><code>node_id</code></em>: <em class="replaceable"><code>type</code></em> shutdown initiated</code></th>
            <td>ノードがシャットダウンシグナルを受信しました。 シャットダウンの <em class="replaceable"><code>type</code></em> は <code class="literal">Cluster</code> または <code class="literal">Node</code> です。 </td>
            <td><code class="literal">NDBStopStarted</code></td>
            <td><code class="literal">StartUp</code></td>
            <td>1</td>
            <td><code class="literal">INFO</code></td>
          </tr><tr>
            <th scope="row"><code class="literal">Node <em class="replaceable"><code>node_id</code></em>: Node shutdown completed </code>[<code class="literal">, <em class="replaceable"><code>action</code></em></code>] [<code class="literal">Initiated by signal <em class="replaceable"><code>signal</code></em>.</code>]</th>
            <td>ノードがシャットダウンされました。 このレポートには、<em class="replaceable"><code>action</code></em> が含まれる場合があります。これが存在する場合は、<code class="literal">restarting</code>、<code class="literal">no start</code>、または <code class="literal">initial</code> のいずれかです。 また、レポートには <code class="literal">NDB</code> プロトコル <em class="replaceable"><code>signal</code></em> への参照が含まれる場合もあります。可能性のあるシグナルについては、<a class="ulink" href="https://dev.mysql.com/doc/ndb-internals/en/ndb-internals-ndb-protocol-operations-signals.html" target="_top">Operations and Signals</a>を参照してください。 </td>
            <td><code class="literal">NDBStopCompleted</code></td>
            <td><code class="literal">StartUp</code></td>
            <td>1</td>
            <td><code class="literal">INFO</code></td>
          </tr><tr>
            <th scope="row"><code class="literal">Node <em class="replaceable"><code>node_id</code></em>: Forced node shutdown completed </code>[<code class="literal">, action</code>]<code class="literal">.</code> [<code class="literal">Occurred during startphase <em class="replaceable"><code>start_phase</code></em>.</code>] [<code class="literal"> Initiated by <em class="replaceable"><code>signal</code></em>.</code>] [<code class="literal">Caused by error <em class="replaceable"><code>error_code</code></em>: '<em class="replaceable"><code>error_message</code></em>(<em class="replaceable"><code>error_classification</code></em>). <em class="replaceable"><code>error_status</code></em>'.</code> [<code class="literal">(extra info <em class="replaceable"><code>extra_code</code></em>)</code>]]</th>
            <td>ノードが強制的にシャットダウンされました。 あとで実行された <em class="replaceable"><code>action</code></em> (<code class="literal">restarting</code>、<code class="literal">no start</code>、または <code class="literal">initial</code> のいずれか) があれば、それもレポートされます。 ノードの起動時にシャットダウンが発生した場合、レポートに、ノードの障害が発生した <em class="replaceable"><code>start_phase</code></em> が含まれます。 これが、ノードに <em class="replaceable"><code>signal</code></em> が送信された結果であった場合は、その情報も提供されます (詳細は、<a class="ulink" href="https://dev.mysql.com/doc/ndb-internals/en/ndb-internals-ndb-protocol-operations-signals.html" target="_top">Operations and Signals</a>を参照してください)。 障害の原因が既知のエラーである場合は、それも含まれます。<code class="literal">NDB</code> のエラーメッセージおよび分類についての詳細は、<a class="ulink" href="https://dev.mysql.com/doc/ndb-internals/en/ndb-errors.html" target="_top">NDB Cluster API Errors</a>を参照してください。 </td>
            <td><code class="literal">NDBStopForced</code></td>
            <td><code class="literal">StartUp</code></td>
            <td>1</td>
            <td><code class="literal">ALERT</code></td>
          </tr><tr>
            <th scope="row"><code class="literal">Node <em class="replaceable"><code>node_id</code></em>: Node shutdown aborted</code></th>
            <td>ノードのシャットダウンプロセスがユーザーによって中止されました。</td>
            <td><code class="literal">NDBStopAborted</code></td>
            <td><code class="literal">StartUp</code></td>
            <td>1</td>
            <td><code class="literal">INFO</code></td>
          </tr><tr>
            <th scope="row"><code class="literal">Node <em class="replaceable"><code>node_id</code></em>: StartLog: [GCI Keep: <em class="replaceable"><code>keep_pos</code></em> LastCompleted: <em class="replaceable"><code>last_pos</code></em> NewestRestorable: <em class="replaceable"><code>restore_pos</code></em>]</code></th>
            <td>これは、ノード起動時に参照されるグローバルチェックポイントをレポートします。 <em class="replaceable"><code>keep_pos</code></em> よりも前の Redo ログは削除されます。<em class="replaceable"><code>last_pos</code></em> は、データノードが最後に関与したグローバルチェックポイントです。<em class="replaceable"><code>restore_pos</code></em> は、すべてのデータノードをリストアするために実際に使用されるグローバルチェックポイントです。 </td>
            <td><code class="literal">StartREDOLog</code></td>
            <td><code class="literal">StartUp</code></td>
            <td>4</td>
            <td><code class="literal">INFO</code></td>
          </tr><tr>
            <th scope="row"><em class="replaceable"><code>startup_message</code></em> [<span class="emphasis"><em>Listed separately; see below.</em></span>]</th>
            <td>さまざまな環境下でログに記録される可能性のある多くの起動メッセージがあります。 これらは個別にリストされます。<a class="xref" href="mysql-cluster.html#mysql-cluster-log-startup-messages" title="23.5.2.2 NDB Cluster のログ起動メッセージ">セクション23.5.2.2「NDB Cluster のログ起動メッセージ」</a> を参照してください。 </td>
            <td><code class="literal">StartReport</code></td>
            <td><code class="literal">StartUp</code></td>
            <td>4</td>
            <td><code class="literal">INFO</code></td>
          </tr><tr>
            <th scope="row"><code class="literal">Node <em class="replaceable"><code>node_id</code></em>: Node restart completed copy of dictionary information</code></th>
            <td>再起動されたノードへのデータディクショナリ情報のコピーが完了しました。</td>
            <td><code class="literal">NR_CopyDict</code></td>
            <td><code class="literal">NodeRestart</code></td>
            <td>8</td>
            <td><code class="literal">INFO</code></td>
          </tr><tr>
            <th scope="row"><code class="literal">Node <em class="replaceable"><code>node_id</code></em>: Node restart completed copy of distribution information</code></th>
            <td>再起動されたノードへのデータ配布情報のコピーが完了しました。</td>
            <td><code class="literal">NR_CopyDistr</code></td>
            <td><code class="literal">NodeRestart</code></td>
            <td>8</td>
            <td><code class="literal">INFO</code></td>
          </tr><tr>
            <th scope="row"><code class="literal">Node <em class="replaceable"><code>node_id</code></em>: Node restart starting to copy the fragments to Node <em class="replaceable"><code>node_id</code></em></code></th>
            <td>起動データノード <em class="replaceable"><code>node_id</code></em> へのフラグメントのコピーが開始されました。</td>
            <td><code class="literal">NR_CopyFragsStarted</code></td>
            <td><code class="literal">NodeRestart</code></td>
            <td>8</td>
            <td><code class="literal">INFO</code></td>
          </tr><tr>
            <th scope="row"><code class="literal">Node <em class="replaceable"><code>node_id</code></em>: Table ID = <em class="replaceable"><code>table_id</code></em>, fragment ID = <em class="replaceable"><code>fragment_id</code></em> have been copied to Node <em class="replaceable"><code>node_id</code></em></code></th>
            <td>テーブル <em class="replaceable"><code>table_id</code></em> からのフラグメント <em class="replaceable"><code>fragment_id</code></em> がデータノード <em class="replaceable"><code>node_id</code></em> にコピーされました。</td>
            <td><code class="literal">NR_CopyFragDone</code></td>
            <td><code class="literal">NodeRestart</code></td>
            <td>10</td>
            <td><code class="literal">INFO</code></td>
          </tr><tr>
            <th scope="row"><code class="literal">Node <em class="replaceable"><code>node_id</code></em>: Node restart completed copying the fragments to Node <em class="replaceable"><code>node_id</code></em></code></th>
            <td>再起動データノード <em class="replaceable"><code>node_id</code></em> へのすべてのテーブルフラグメントのコピーが完了しました。</td>
            <td><code class="literal">NR_CopyFragsCompleted</code></td>
            <td><code class="literal">NodeRestart</code></td>
            <td>8</td>
            <td><code class="literal">INFO</code></td>
          </tr><tr>
            <th scope="row"><code class="literal">Node <em class="replaceable"><code>node_id</code></em>: Node <em class="replaceable"><code>node1_id</code></em> completed failure of Node <em class="replaceable"><code>node2_id</code></em></code></th>
            <td>データノード <em class="replaceable"><code>node1_id</code></em> がデータノード <em class="replaceable"><code>node2_id</code></em> の障害を検出しました。</td>
            <td><code class="literal">NodeFailCompleted</code></td>
            <td><code class="literal">NodeRestart</code></td>
            <td>8</td>
            <td><code class="literal">ALERT</code></td>
          </tr><tr>
            <th scope="row"><code class="literal">All nodes completed failure of Node <em class="replaceable"><code>node_id</code></em></code></th>
            <td>すべての (残りの) データノードがデータノード <em class="replaceable"><code>node_id</code></em> の障害を検出しました。</td>
            <td><code class="literal">NodeFailCompleted</code></td>
            <td><code class="literal">NodeRestart</code></td>
            <td>8</td>
            <td><code class="literal">ALERT</code></td>
          </tr><tr>
            <th scope="row"><code class="literal">Node failure of <em class="replaceable"><code>node_id</code></em><em class="replaceable"><code>block</code></em> completed</code></th>
            <td>データノード <em class="replaceable"><code>node_id</code></em> の障害が <em class="replaceable"><code>block</code></em><code class="literal">NDB</code> カーネルブロックで検出されました。ここで、ブロックは <code class="literal">DBTC</code>、<code class="literal">DBDICT</code>、<code class="literal">DBDIH</code>、または <code class="literal">DBLQH</code> のいずれかです。詳細は、<a class="ulink" href="https://dev.mysql.com/doc/ndb-internals/en/ndb-internals-kernel-blocks.html" target="_top">NDB Kernel Blocks</a>を参照してください。</td>
            <td><code class="literal">NodeFailCompleted</code></td>
            <td><code class="literal">NodeRestart</code></td>
            <td>8</td>
            <td><code class="literal">ALERT</code></td>
          </tr><tr>
            <th scope="row"><code class="literal">Node <em class="replaceable"><code>mgm_node_id</code></em>: Node <em class="replaceable"><code>data_node_id</code></em> has failed. The Node state at failure was <em class="replaceable"><code>state_code</code></em></code></th>
            <td>データノードで障害が発生しました。 障害発生時の状態は、アービトレーション状態コード <em class="replaceable"><code>state_code</code></em> で記述されます。可能性のある状態コードの値は、<code class="filename">include/kernel/signaldata/ArbitSignalData.hpp</code> ファイルで見つかります。 </td>
            <td><code class="literal">NODE_FAILREP</code></td>
            <td><code class="literal">NodeRestart</code></td>
            <td>8</td>
            <td><code class="literal">ALERT</code></td>
          </tr><tr>
            <th scope="row"><code class="literal">President restarts arbitration thread [state=<em class="replaceable"><code>state_code</code></em>]</code> または <code class="literal">Prepare arbitrator node <em class="replaceable"><code>node_id</code></em> [ticket=<em class="replaceable"><code>ticket_id</code></em>]</code> または <code class="literal">Receive arbitrator node <em class="replaceable"><code>node_id</code></em> [ticket=<em class="replaceable"><code>ticket_id</code></em>]</code> または <code class="literal">Started arbitrator node <em class="replaceable"><code>node_id</code></em> [ticket=<em class="replaceable"><code>ticket_id</code></em>]</code> または <code class="literal">Lost arbitrator node <em class="replaceable"><code>node_id</code></em> - process failure [state=<em class="replaceable"><code>state_code</code></em>]</code> または <code class="literal">Lost arbitrator node <em class="replaceable"><code>node_id</code></em> - process exit [state=<em class="replaceable"><code>state_code</code></em>]</code> または <code class="literal">Lost arbitrator node <em class="replaceable"><code>node_id</code></em> - <em class="replaceable"><code>error_message</code></em> [state=<em class="replaceable"><code>state_code</code></em>]</code></th>
            <td>これは、クラスタ内のアービトレーションの現在の状態および進行状況に関するレポートです。<em class="replaceable"><code>node_id</code></em> は、アービトレータとして選択された管理ノードまたは SQL ノードのノード ID です。<em class="replaceable"><code>state_code</code></em> は、<code class="filename">include/kernel/signaldata/ArbitSignalData.hpp</code> で見つかるアービトレーション状態コードです。 エラーが発生すると、<code class="filename">ArbitSignalData.hpp</code> でも定義されている <em class="replaceable"><code>error_message</code></em> が表示されます。<em class="replaceable"><code>ticket_id</code></em> は、アービトレータが選択された時にそれによって、その選択に参加したすべてのノードに渡された一意の識別子です。これは、アービトレーションをリクエストする各ノードが選択プロセスに参加したノードのいずれかであることを確認するために使用されます。 </td>
            <td><code class="literal">ArbitState</code></td>
            <td><code class="literal">NodeRestart</code></td>
            <td>6</td>
            <td><code class="literal">INFO</code></td>
          </tr><tr>
            <th scope="row"><code class="literal">Arbitration check lost - less than 1/2 nodes left</code> または <code class="literal">Arbitration check won - all node groups and more than 1/2 nodes left</code> または <code class="literal">Arbitration check won - node group majority</code> または <code class="literal">Arbitration check lost - missing node group</code> または <code class="literal">Network partitioning - arbitration required</code> または <code class="literal">Arbitration won - positive reply from node <em class="replaceable"><code>node_id</code></em></code> または <code class="literal">Arbitration lost - negative reply from node <em class="replaceable"><code>node_id</code></em></code> または <code class="literal">Network partitioning - no arbitrator available</code> または <code class="literal">Network partitioning - no arbitrator configured</code> または <code class="literal">Arbitration failure - <em class="replaceable"><code>error_message</code></em> [state=<em class="replaceable"><code>state_code</code></em>]</code></th>
            <td>このメッセージは、アービトレーションの結果についてレポートします。 アービトレーションに失敗した場合、<em class="replaceable"><code>error_message</code></em> およびアービトレーション <em class="replaceable"><code>state_code</code></em> が表示されます。これらの両方の定義は、<code class="filename">include/kernel/signaldata/ArbitSignalData.hpp</code> で見つかります。 </td>
            <td><code class="literal">ArbitResult</code></td>
            <td><code class="literal">NodeRestart</code></td>
            <td>2</td>
            <td><code class="literal">ALERT</code></td>
          </tr><tr>
            <th scope="row"><code class="literal">Node <em class="replaceable"><code>node_id</code></em>: GCP Take over started</code></th>
            <td>このノードは、次のグローバルチェックポイントに対する責任を負おうとしています (つまり、マスターノードになります)。</td>
            <td><code class="literal">GCP_TakeoverStarted</code></td>
            <td><code class="literal">NodeRestart</code></td>
            <td>7</td>
            <td><code class="literal">INFO</code></td>
          </tr><tr>
            <th scope="row"><code class="literal">Node <em class="replaceable"><code>node_id</code></em>: GCP Take over completed</code></th>
            <td>このノードはマスターになり、次のグローバルチェックポイントに対する責任を負いました。</td>
            <td><code class="literal">GCP_TakeoverCompleted</code></td>
            <td><code class="literal">NodeRestart</code></td>
            <td>7</td>
            <td><code class="literal">INFO</code></td>
          </tr><tr>
            <th scope="row"><code class="literal">Node <em class="replaceable"><code>node_id</code></em>: LCP Take over started</code></th>
            <td>このノードは、次のグローバルチェックポイントセットに対する責任を負おうとしています (つまり、マスターノードになります)。</td>
            <td><code class="literal">LCP_TakeoverStarted</code></td>
            <td><code class="literal">NodeRestart</code></td>
            <td>7</td>
            <td><code class="literal">INFO</code></td>
          </tr><tr>
            <th scope="row"><code class="literal">Node <em class="replaceable"><code>node_id</code></em>: LCP Take over completed</code></th>
            <td>このノードはマスターになり、次のグローバルチェックポイントセットに対する責任を負いました。</td>
            <td><code class="literal">LCP_TakeoverCompleted</code></td>
            <td><code class="literal">NodeRestart</code></td>
            <td>7</td>
            <td><code class="literal">INFO</code></td>
          </tr><tr>
            <th scope="row"><code class="literal">Node <em class="replaceable"><code>node_id</code></em>: Trans. Count = <em class="replaceable"><code>transactions</code></em>, Commit Count = <em class="replaceable"><code>commits</code></em>, Read Count = <em class="replaceable"><code>reads</code></em>, Simple Read Count = <em class="replaceable"><code>simple_reads</code></em>, Write Count = <em class="replaceable"><code>writes</code></em>, AttrInfo Count = <em class="replaceable"><code>AttrInfo_objects</code></em>, Concurrent Operations = <em class="replaceable"><code>concurrent_operations</code></em>, Abort Count = <em class="replaceable"><code>aborts</code></em>, Scans = <em class="replaceable"><code>scans</code></em>, Range scans = <em class="replaceable"><code>range_scans</code></em></code></th>
            <td>このトランザクションアクティビティーのレポートは、約 10 秒に 1 回表示されます</td>
            <td><code class="literal">TransReportCounters</code></td>
            <td><code class="literal">Statistic</code></td>
            <td>8</td>
            <td><code class="literal">INFO</code></td>
          </tr><tr>
            <th scope="row"><code class="literal">Node <em class="replaceable"><code>node_id</code></em>: Operations=<em class="replaceable"><code>operations</code></em></code></th>
            <td>このノードで実行された操作数です (約 10 秒に 1 回表示されます)</td>
            <td><code class="literal">OperationReportCounters</code></td>
            <td><code class="literal">Statistic</code></td>
            <td>8</td>
            <td><code class="literal">INFO</code></td>
          </tr><tr>
            <th scope="row"><code class="literal">Node <em class="replaceable"><code>node_id</code></em>: Table with ID = <em class="replaceable"><code>table_id</code></em> created</code></th>
            <td>示されたテーブル ID を持つテーブルが作成されました</td>
            <td><code class="literal">TableCreated</code></td>
            <td><code class="literal">Statistic</code></td>
            <td>7</td>
            <td><code class="literal">INFO</code></td>
          </tr><tr>
            <th scope="row"><code class="literal">Node <em class="replaceable"><code>node_id</code></em>: Mean loop Counter in doJob last 8192 times = <em class="replaceable"><code>count</code></em></code></th>
            <td></td>
            <td><code class="literal">JobStatistic</code></td>
            <td><code class="literal">Statistic</code></td>
            <td>9</td>
            <td><code class="literal">INFO</code></td>
          </tr><tr>
            <th scope="row"><code class="literal">Mean send size to Node = <em class="replaceable"><code>node_id</code></em> last 4096 sends = <em class="replaceable"><code>bytes</code></em> bytes</code></th>
            <td>このノードはノード <em class="replaceable"><code>node_id</code></em> への送信あたり、平均で <em class="replaceable"><code>bytes</code></em> バイト送信しています</td>
            <td><code class="literal">SendBytesStatistic</code></td>
            <td><code class="literal">Statistic</code></td>
            <td>9</td>
            <td><code class="literal">INFO</code></td>
          </tr><tr>
            <th scope="row"><code class="literal">Mean receive size to Node = <em class="replaceable"><code>node_id</code></em> last 4096 sends = <em class="replaceable"><code>bytes</code></em> bytes</code></th>
            <td>このノードはノード <em class="replaceable"><code>node_id</code></em> からデータを受信するたびに、平均で <em class="replaceable"><code>bytes</code></em> バイトのデータを受信しています</td>
            <td><code class="literal">ReceiveBytesStatistic</code></td>
            <td><code class="literal">Statistic</code></td>
            <td>9</td>
            <td><code class="literal">INFO</code></td>
          </tr><tr>
            <th scope="row"><code class="literal">Node <em class="replaceable"><code>node_id</code></em>: Data usage is <em class="replaceable"><code>data_memory_percentage</code></em>% (<em class="replaceable"><code>data_pages_used</code></em> 32K pages of total <em class="replaceable"><code>data_pages_total</code></em>)</code> / <code class="literal">Node <em class="replaceable"><code>node_id</code></em>: Index usage is <em class="replaceable"><code>index_memory_percentage</code></em>% (<em class="replaceable"><code>index_pages_used</code></em> 8K pages of total <em class="replaceable"><code>index_pages_total</code></em>) </code></th>
            <td>このレポートは、クラスタ管理クライアントで <code class="literal">DUMP 1000</code> コマンドが発行されると生成されます</td>
            <td><code class="literal">MemoryUsage</code></td>
            <td><code class="literal">Statistic</code></td>
            <td>5</td>
            <td><code class="literal">INFO</code></td>
          </tr><tr>
            <th scope="row"><code class="literal">Node <em class="replaceable"><code>node1_id</code></em>: Transporter to node <em class="replaceable"><code>node2_id</code></em> reported error <em class="replaceable"><code>error_code</code></em>: <em class="replaceable"><code>error_message</code></em></code></th>
            <td>ノード <em class="replaceable"><code>node2_id</code></em> との通信中に、トランスポータのエラーが発生しました。トランスポータのエラーコードおよびメッセージのリストについては、<a class="ulink" href="https://dev.mysql.com/doc/ndb-internals/en/" target="_top">MySQL NDB Cluster Internals Manual</a>の<a class="ulink" href="https://dev.mysql.com/doc/ndb-internals/en/ndb-transporter-errors.html" target="_top">NDB Transporter Errors</a>を参照してください。</td>
            <td><code class="literal">TransporterError</code></td>
            <td><code class="literal">Error</code></td>
            <td>2</td>
            <td><code class="literal">ERROR</code></td>
          </tr><tr>
            <th scope="row"><code class="literal">Node <em class="replaceable"><code>node1_id</code></em>: Transporter to node <em class="replaceable"><code>node2_id</code></em> reported error <em class="replaceable"><code>error_code</code></em>: <em class="replaceable"><code>error_message</code></em></code></th>
            <td>ノード <em class="replaceable"><code>node2_id</code></em> との通信中の潜在的なトランスポータ問題の警告。トランスポータのエラーコードおよびメッセージのリストについて詳しくは、<a class="ulink" href="https://dev.mysql.com/doc/ndb-internals/en/ndb-transporter-errors.html" target="_top">NDB Transporter Errors</a>を参照してください。</td>
            <td><code class="literal">TransporterWarning</code></td>
            <td><code class="literal">Error</code></td>
            <td>8</td>
            <td><code class="literal">WARNING</code></td>
          </tr><tr>
            <th scope="row"><code class="literal">Node <em class="replaceable"><code>node1_id</code></em>: Node <em class="replaceable"><code>node2_id</code></em> missed heartbeat <em class="replaceable"><code>heartbeat_id</code></em></code></th>
            <td>このノードはノード <em class="replaceable"><code>node2_id</code></em> からのハートビートを受信できませんでした</td>
            <td><code class="literal">MissedHeartbeat</code></td>
            <td><code class="literal">Error</code></td>
            <td>8</td>
            <td><code class="literal">WARNING</code></td>
          </tr><tr>
            <th scope="row"><code class="literal">Node <em class="replaceable"><code>node1_id</code></em>: Node <em class="replaceable"><code>node2_id</code></em> declared dead due to missed heartbeat</code></th>
            <td>このノードは、ノード <em class="replaceable"><code>node2_id</code></em> からの少なくとも 3 つのハートビートを受信できなかったため、そのノードの<span class="quote">「<span class="quote">停止</span>」</span>を宣言しました</td>
            <td><code class="literal">DeadDueToHeartbeat</code></td>
            <td><code class="literal">Error</code></td>
            <td>8</td>
            <td><code class="literal">ALERT</code></td>
          </tr><tr>
            <th scope="row"><code class="literal">Node <em class="replaceable"><code>node1_id</code></em>: Node Sent Heartbeat to node = <em class="replaceable"><code>node2_id</code></em></code></th>
            <td>このノードはノード <em class="replaceable"><code>node2_id</code></em> にハートビートを送信しました</td>
            <td><code class="literal">SentHeartbeat</code></td>
            <td><code class="literal">Info</code></td>
            <td>12</td>
            <td><code class="literal">INFO</code></td>
          </tr><tr>
            <th scope="row"><code class="literal">Node <em class="replaceable"><code>node_id</code></em>: Event buffer status (<em class="replaceable"><code>object_id</code></em>): used=<em class="replaceable"><code>bytes_used</code></em> (<em class="replaceable"><code>percent_used</code></em>% of alloc) alloc=<em class="replaceable"><code>bytes_allocated</code></em> max=<em class="replaceable"><code>bytes_available</code></em> latest_consumed_epoch=<em class="replaceable"><code>latest_consumed_epoch</code></em> latest_buffered_epoch=<em class="replaceable"><code>latest_buffered_epoch</code></em> report_reason=<em class="replaceable"><code>report_reason</code></em></code></th>
            <td>このレポートは、比較的短い期間に多数の更新が適用されている場合など、イベントバッファの使用中に表示されます。このレポートには、使用されているイベントバッファメモリーのバイト数と割合、割り当てられているバイト数と使用可能な割合、および最新のバッファ済エポックと消費済エポックが表示されます。詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-logs-event-buffer" title="23.5.2.3 クラスタログでのイベントバッファのレポート">セクション23.5.2.3「クラスタログでのイベントバッファのレポート」</a> を参照してください</td>
            <td><code class="literal">EventBufferStatus2</code></td>
            <td><code class="literal">Info</code></td>
            <td>7</td>
            <td><code class="literal">INFO</code></td>
          </tr><tr>
            <th scope="row"><code class="literal">Node <em class="replaceable"><code>node_id</code></em>: Entering single user mode</code>, <code class="literal">Node <em class="replaceable"><code>node_id</code></em>: Entered single user mode Node <em class="replaceable"><code>API_node_id</code></em> has exclusive access</code>, <code class="literal">Node <em class="replaceable"><code>node_id</code></em>: Entering single user mode</code></th>
            <td>これらのレポートは、シングルユーザーモードの開始時および終了時にクラスタログに書き込まれます。<em class="replaceable"><code>API_node_id</code></em> は、クラスタへの排他アクセス権を持っている API または SQL のノード ID です (詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-single-user-mode" title="23.5.6 NDB Cluster のシングルユーザーモード">セクション23.5.6「NDB Cluster のシングルユーザーモード」</a>を参照してください)。<code class="literal">「Unknown single user report <em class="replaceable"><code>API_node_id</code></em>」</code>というメッセージは、エラーが発生したことを示し、通常の操作では表示されません。</td>
            <td><code class="literal">SingleUser</code></td>
            <td><code class="literal">Info</code></td>
            <td>7</td>
            <td><code class="literal">INFO</code></td>
          </tr><tr>
            <th scope="row"><code class="literal">Node <em class="replaceable"><code>node_id</code></em>: Backup <em class="replaceable"><code>backup_id</code></em> started from node <em class="replaceable"><code>mgm_node_id</code></em></code></th>
            <td><em class="replaceable"><code>mgm_node_id</code></em> を持つ管理ノードを使用して、バックアップが開始されました。このメッセージは、<code class="literal">START BACKUP</code> コマンドの発行時にクラスタ管理クライアントにも表示されます。詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-backup-using-management-client" title="23.5.8.2 NDB Cluster 管理クライアントを使用したバックアップの作成">セクション23.5.8.2「NDB Cluster 管理クライアントを使用したバックアップの作成」</a>を参照してください。</td>
            <td><code class="literal">BackupStarted</code></td>
            <td><code class="literal">Backup</code></td>
            <td>7</td>
            <td><code class="literal">INFO</code></td>
          </tr><tr>
            <th scope="row"><code class="literal">Node <em class="replaceable"><code>node_id</code></em>: Backup <em class="replaceable"><code>backup_id</code></em> started from node <em class="replaceable"><code>mgm_node_id</code></em> completed. StartGCP: <em class="replaceable"><code>start_gcp</code></em> StopGCP: <em class="replaceable"><code>stop_gcp</code></em> #Records: <em class="replaceable"><code>records</code></em> #LogRecords: <em class="replaceable"><code>log_records</code></em> Data: <em class="replaceable"><code>data_bytes</code></em> bytes Log: <em class="replaceable"><code>log_bytes</code></em> bytes</code></th>
            <td>ID <em class="replaceable"><code>backup_id</code></em> を持つバックアップが完了しました。詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-backup-using-management-client" title="23.5.8.2 NDB Cluster 管理クライアントを使用したバックアップの作成">セクション23.5.8.2「NDB Cluster 管理クライアントを使用したバックアップの作成」</a>を参照してください</td>
            <td><code class="literal">BackupCompleted</code></td>
            <td><code class="literal">Backup</code></td>
            <td>7</td>
            <td><code class="literal">INFO</code></td>
          </tr><tr>
            <th scope="row"><code class="literal">Node <em class="replaceable"><code>node_id</code></em>: Backup request from <em class="replaceable"><code>mgm_node_id</code></em> failed to start. Error: <em class="replaceable"><code>error_code</code></em></code></th>
            <td>バックアップの開始に失敗しました。エラーコードについては、<a class="ulink" href="https://dev.mysql.com/doc/ndbapi/en/mgm-errors.html" target="_top">MGM API Errors</a>を参照してください</td>
            <td><code class="literal">BackupFailedToStart</code></td>
            <td><code class="literal">Backup</code></td>
            <td>7</td>
            <td><code class="literal">ALERT</code></td>
          </tr><tr>
            <th scope="row"><code class="literal">Node <em class="replaceable"><code>node_id</code></em>: Backup <em class="replaceable"><code>backup_id</code></em> started from <em class="replaceable"><code>mgm_node_id</code></em> has been aborted. Error: <em class="replaceable"><code>error_code</code></em></code></th>
            <td>バックアップが開始後に終了しました。ユーザーの介入に原因がある可能性があります</td>
            <td><code class="literal">BackupAborted</code></td>
            <td><code class="literal">Backup</code></td>
            <td>7</td>
            <td><code class="literal">ALERT</code></td>
          </tr></tbody></table></div></div><br class="table-break"></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-log-startup-messages"></a>23.5.2.2 NDB Cluster のログ起動メッセージ</h4></div></div></div><p>
        可能な起動メッセージとその説明を次のリストに示します:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">Initial start, waiting for %s to connect, nodes [ all: %s connected: %s no-wait: %s ]</code>
          </p></li><li class="listitem"><p>
            <code class="literal">Waiting until nodes: %s connects, nodes [ all: %s connected: %s no-wait: %s ]</code>
          </p></li><li class="listitem"><p>
            <code class="literal">Waiting %u sec for nodes %s to connect, nodes [ all: %s connected: %s no-wait: %s ]</code>
          </p></li><li class="listitem"><p>
            <code class="literal">Waiting for non partitioned start, nodes [ all: %s connected: %s missing: %s no-wait: %s ]</code>
          </p></li><li class="listitem"><p>
            <code class="literal">Waiting %u sec for non partitioned start, nodes [ all: %s connected: %s missing: %s no-wait: %s ]</code>
          </p></li><li class="listitem"><p>
            <code class="literal">Initial start with nodes %s [ missing: %s no-wait: %s ]</code>
          </p></li><li class="listitem"><p>
            <code class="literal">Start with all nodes %s</code>
          </p></li><li class="listitem"><p>
            <code class="literal">Start with nodes %s [ missing: %s no-wait: %s ]</code>
          </p></li><li class="listitem"><p>
            <code class="literal">Start potentially partitioned with nodes %s [ missing: %s no-wait: %s ]</code>
          </p></li><li class="listitem"><p>
            <code class="literal">Unknown startreport: 0x%x [ %s %s %s %s ]</code>
          </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-logs-event-buffer"></a>23.5.2.3 クラスタログでのイベントバッファのレポート</h4></div></div></div><p>
        <code class="literal">NDB</code> は、データノードから受信したイベントに 1 つ以上のメモリーバッファーを使用します。 このようなバッファは、テーブルイベントをサブスクライブする <code class="literal">Ndb</code> オブジェクトごとに存在します。つまり、通常、バイナリロギングを実行する <span class="command"><strong>mysqld</strong></span> ごとにバッファが 2 つあります (スキーマイベント用にバッファが 1 つ、データイベント用にバッファが 1 つ)。 各バッファには、イベントで構成されるエポックが含まれます。 これらのイベントは、操作タイプ (挿入、更新、削除) および行データ (ビフォアイメージとアフターイメージおよびメタデータ) で構成されます。 
      </p><p>
        <code class="literal">NDB</code> は、これらのバッファの状態を記述するメッセージをクラスタログに生成します。 これらのレポートはクラスタログに表示されますが、API ノード上のバッファを参照します (データノードによって生成される他のほとんどのクラスタログメッセージとは異なります)。 
      </p><p>
        クラスタログのイベントバッファロギングレポートでは、次に示す形式を使用します:
      </p><pre class="programlisting">Node <em class="replaceable"><code>node_id</code></em>: Event buffer status (<em class="replaceable"><code>object_id</code></em>):
used=<em class="replaceable"><code>bytes_used</code></em> (<em class="replaceable"><code>percent_used</code></em>% of alloc)
alloc=<em class="replaceable"><code>bytes_allocated</code></em> (<em class="replaceable"><code>percent_alloc</code></em>% of max) max=<em class="replaceable"><code>bytes_available</code></em>
latest_consumed_epoch=<em class="replaceable"><code>latest_consumed_epoch</code></em>
latest_buffered_epoch=<em class="replaceable"><code>latest_buffered_epoch</code></em>
report_reason=<em class="replaceable"><code>report_reason</code></em>
</pre><p>
        このレポートを構成するフィールドとその説明を次に示します:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <em class="replaceable"><code>node_id</code></em>: レポートが生成されたノードの ID。
          </p></li><li class="listitem"><p>
            <em class="replaceable"><code>object_id</code></em>: レポートが生成された <code class="literal">Ndb</code> オブジェクトの ID。
          </p></li><li class="listitem"><p>
            <em class="replaceable"><code>bytes_used</code></em>: バッファで使用されるバイト数。
          </p></li><li class="listitem"><p>
            <em class="replaceable"><code>percent_used</code></em>: 使用された割当て済バイトの割合。
          </p></li><li class="listitem"><p>
            <em class="replaceable"><code>bytes_allocated</code></em>: このバッファに割り当てられたバイト数。
          </p></li><li class="listitem"><p>
            <em class="replaceable"><code>percent_alloc</code></em>: 使用可能なバイト数の割合。<code class="literal">ndb_eventbuffer_max_alloc</code> が 0 (無制限) の場合は出力されません。
          </p></li><li class="listitem"><p>
            <em class="replaceable"><code>bytes_available</code></em>: 使用可能なバイト数。<code class="literal">ndb_eventbuffer_max_alloc</code> が 0 (無制限) の場合は 0 です。
          </p></li><li class="listitem"><p>
            <em class="replaceable"><code>latest_consumed_epoch</code></em>: 完了までに最後に消費されたエポック。 (NDB API アプリケーションでは、これは <code class="literal">nextEvent()</code> を呼び出すことによって行われます。) 
          </p></li><li class="listitem"><p>
            <em class="replaceable"><code>latest_buffered_epoch</code></em>: イベントバッファで最後にバッファされた (完全にバッファされた) エポック。
          </p></li><li class="listitem"><p>
            <em class="replaceable"><code>report_reason</code></em>: レポートを作成する理由。 考えられる原因をこのセクションの後半に示します。 
          </p></li></ul></div><p>
        次のリストに、レポートの考えられる理由を示します:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">ENOUGH_FREE_EVENTBUFFER</code>: イベントバッファに十分な領域があります。
          </p><p>
            <code class="literal">LOW_FREE_EVENTBUFFER</code>: イベントバッファの空き領域が少なくなっています。
          </p><p>
            これらのレポートをトリガーするしきい値の空き率レベルは、<code class="literal">ndb_report_thresh_binlog_mem_usage</code> サーバー変数を設定することで調整できます。
          </p></li><li class="listitem"><p>
            <code class="literal">BUFFERED_EPOCHS_OVER_THRESHOLD</code>: バッファされたエポックの数が構成済のしきい値を超えたかどうか。 この数は、完全に受信された最新のエポックと最近消費されたエポックの違いです (NDB API アプリケーションでは、これは <code class="literal">nextEvent()</code> または <code class="literal">nextEvent2()</code> を呼び出すことによって行われます)。 レポートは、バッファされたエポックの数がしきい値を下回るまで毎秒生成され、<code class="literal">ndb_report_thresh_binlog_epoch_slip</code> サーバー変数を設定して調整できます。 NDB API アプリケーションのしきい値は、<code class="literal">setEventBufferQueueEmptyEpoch()</code> を呼び出すことによって調整することもできます。 
          </p></li><li class="listitem"><p>
            <code class="literal">PARTIALLY_DISCARDING</code>: イベントバッファメモリーを使い果たしました。つまり、<code class="literal">ndb_eventbuffer_max_alloc</code> の 100% が使用されています。 部分的にバッファされたエポックは、使用率が 100% を超えても完了までバッファされますが、受信した新しいエポックは破棄されます。 つまり、イベントストリームでギャップが発生しています。 
          </p></li><li class="listitem"><p>
            <code class="literal">COMPLETELY_DISCARDING</code>: エポックはバッファリングされません。
          </p></li><li class="listitem"><p>
            <code class="literal">PARTIALLY_BUFFERING</code> : ギャップに続くバッファーの空き率がしきい値まで上昇しました。<code class="literal">ndb_eventbuffer_free_percent</code> サーバーシステム変数を使用するか、NDB API アプリケーションで <code class="literal">set_eventbuffer_free_percent()</code> を呼び出すことによって <span class="command"><strong>mysql</strong></span> クライアントで設定できます。 新しいエポックがバッファされます。 ギャップのために完了できなかった Epoch は破棄されます。 
          </p></li><li class="listitem"><p>
            <code class="literal">COMPLETELY_BUFFERING</code>: 受信したすべてのエポックがバッファされています。これは、十分なイベントバッファメモリーがあることを意味します。 イベントストリーム内のギャップがクローズされました。 
          </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-ndb-transporter-errors"></a>23.5.2.4 NDB Cluster: NDB トランスポータエラー</h4></div></div></div><p>
        このセクションでは、トランスポータエラーの発生時にクラスタログに書き込まれるエラーのコード、名前、およびメッセージを一覧表示します。
      </p><div class="variablelist"><dl class="variablelist"><dt><span class="term"> <span class="errorcode">0x00</span> </span></dt><dd><p>
              <span class="errorname">TE_NO_ERROR</span>
            </p><p>
              <span class="errortext">No error</span>
            </p></dd><dt><span class="term"> <span class="errorcode">0x01</span> </span></dt><dd><p>
              <span class="errorname">TE_ERROR_CLOSING_SOCKET</span>
            </p><p>
              <span class="errortext">Error found during closing of socket</span>
            </p></dd><dt><span class="term"> <span class="errorcode">0x02</span> </span></dt><dd><p>
              <span class="errorname">TE_ERROR_IN_SELECT_BEFORE_ACCEPT</span>
            </p><p>
              <span class="errortext">Error found before accept. The transporter will retry</span> 
            </p></dd><dt><span class="term"> <span class="errorcode">0x03</span> </span></dt><dd><p>
              <span class="errorname">TE_INVALID_MESSAGE_LENGTH</span>
            </p><p>
              <span class="errortext">Error found in message (invalid message length)</span>
            </p></dd><dt><span class="term"> <span class="errorcode">0x04</span> </span></dt><dd><p>
              <span class="errorname">TE_INVALID_CHECKSUM</span>
            </p><p>
              <span class="errortext">Error found in message (checksum)</span>
            </p></dd><dt><span class="term"> <span class="errorcode">0x05</span> </span></dt><dd><p>
              <span class="errorname">TE_COULD_NOT_CREATE_SOCKET</span>
            </p><p>
              <span class="errortext">Error found while creating socket(can't create socket)</span>
            </p></dd><dt><span class="term"> <span class="errorcode">0x06</span> </span></dt><dd><p>
              <span class="errorname">TE_COULD_NOT_BIND_SOCKET</span>
            </p><p>
              <span class="errortext">Error found while binding server socket</span>
            </p></dd><dt><span class="term"> <span class="errorcode">0x07</span> </span></dt><dd><p>
              <span class="errorname">TE_LISTEN_FAILED</span>
            </p><p>
              <span class="errortext">Error found while listening to server socket</span>
            </p></dd><dt><span class="term"> <span class="errorcode">0x08</span> </span></dt><dd><p>
              <span class="errorname">TE_ACCEPT_RETURN_ERROR</span>
            </p><p>
              <span class="errortext">Error found during accept(accept return error)</span>
            </p></dd><dt><span class="term"> <span class="errorcode">0x0b</span> </span></dt><dd><p>
              <span class="errorname">TE_SHM_DISCONNECT</span>
            </p><p>
              <span class="errortext">The remote node has disconnected</span>
            </p></dd><dt><span class="term"> <span class="errorcode">0x0c</span> </span></dt><dd><p>
              <span class="errorname">TE_SHM_IPC_STAT</span>
            </p><p>
              <span class="errortext">Unable to check shm segment</span>
            </p></dd><dt><span class="term"> <span class="errorcode">0x0d</span> </span></dt><dd><p>
              <span class="errorname">TE_SHM_UNABLE_TO_CREATE_SEGMENT</span>
            </p><p>
              <span class="errortext">Unable to create shm segment</span>
            </p></dd><dt><span class="term"> <span class="errorcode">0x0e</span> </span></dt><dd><p>
              <span class="errorname">TE_SHM_UNABLE_TO_ATTACH_SEGMENT</span>
            </p><p>
              <span class="errortext">Unable to attach shm segment</span>
            </p></dd><dt><span class="term"> <span class="errorcode">0x0f</span> </span></dt><dd><p>
              <span class="errorname">TE_SHM_UNABLE_TO_REMOVE_SEGMENT</span>
            </p><p>
              <span class="errortext">Unable to remove shm segment</span>
            </p></dd><dt><span class="term"> <span class="errorcode">0x10</span> </span></dt><dd><p>
              <span class="errorname">TE_TOO_SMALL_SIGID</span>
            </p><p>
              <span class="errortext">Sig ID too small</span>
            </p></dd><dt><span class="term"> <span class="errorcode">0x11</span> </span></dt><dd><p>
              <span class="errorname">TE_TOO_LARGE_SIGID</span>
            </p><p>
              <span class="errortext">Sig ID too large</span>
            </p></dd><dt><span class="term"> <span class="errorcode">0x12</span> </span></dt><dd><p>
              <span class="errorname">TE_WAIT_STACK_FULL</span>
            </p><p>
              <span class="errortext">Wait stack was full</span>
            </p></dd><dt><span class="term"> <span class="errorcode">0x13</span> </span></dt><dd><p>
              <span class="errorname">TE_RECEIVE_BUFFER_FULL</span>
            </p><p>
              <span class="errortext">Receive buffer was full</span>
            </p></dd><dt><span class="term"> <span class="errorcode">0x14</span> </span></dt><dd><p>
              <span class="errorname">TE_SIGNAL_LOST_SEND_BUFFER_FULL</span>
            </p><p>
              <span class="errortext">Send buffer was full,and trying to force send fails</span>
            </p></dd><dt><span class="term"> <span class="errorcode">0x15</span> </span></dt><dd><p>
              <span class="errorname">TE_SIGNAL_LOST</span>
            </p><p>
              <span class="errortext">Send failed for unknown reason(signal lost)</span>
            </p></dd><dt><span class="term"> <span class="errorcode">0x16</span> </span></dt><dd><p>
              <span class="errorname">TE_SEND_BUFFER_FULL</span>
            </p><p>
              <span class="errortext">The send buffer was full, but sleeping for a while solved</span>
            </p></dd><dt><span class="term"> <span class="errorcode">0x21</span> </span></dt><dd><p>
              <span class="errorname">TE_SHM_IPC_PERMANENT</span>
            </p><p>
              <span class="errortext">Shm ipc Permanent error</span>
            </p></dd></dl></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
          <span class="errorcode"> 0x20 </span>および<span class="errorcode"> 0x22 </span>を介したトランスポータエラーコード<span class="errorcode"> 0x17 </span>は SCI 接続用に予約されており、NDB Cluster のこのバージョンではサポートされていないため、ここには含まれていません。
        </p></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-cluster-event-reports"></a>23.5.3 NDB Cluster で生成されるイベントレポート</h3></div></div></div><div class="toc"><dl class="toc"><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-logging-management-commands">23.5.3.1 NDB Cluster ロギング管理コマンド</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-log-events">23.5.3.2 NDB Cluster ログイベント</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-log-statistics">23.5.3.3 NDB Cluster 管理クライアントでの CLUSTERLOG STATISTICS の使用</a></span></dt></dl></div><a class="indexterm" name="idm45563212292240"></a><a class="indexterm" name="idm45563212290096"></a><a class="indexterm" name="idm45563212288768"></a><a class="indexterm" name="idm45563212287424"></a><a class="indexterm" name="idm45563212286048"></a><a class="indexterm" name="idm45563212284016"></a><p>
      このセクションでは、NDB Cluster によって提供されるイベントログのタイプと、ログに記録されるイベントのタイプについて説明します。
    </p><p>
      NDB Cluster には、次の 2 種類のイベントログが用意されています:
    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          すべてのクラスタノードで生成されたイベントが含まれる<span class="firstterm">クラスタログ</span>。 クラスタログは、単一の場所でクラスタ全体に関するロギング情報を提供するため、ほとんどの使用目的で推奨されるログです。 
        </p><p>
          デフォルトでは、クラスタログは <code class="filename">ndb_<em class="replaceable"><code>node_id</code></em>_cluster.log</code> という名前のファイル (<em class="replaceable"><code>node_id</code></em> は管理サーバーのノード ID) に管理サーバー <code class="literal">DataDir</code> に保存されます。
        </p><p>
          クラスタのロギング情報は、<code class="literal">DataDir</code> および <code class="literal">LogDestination</code> 構成パラメータに設定された値によって指定されたファイルに保存することに加えて、またはその代わりに、<code class="literal">stdout</code> または <code class="literal">syslog</code> 機能に送信することもできます。 これらのパラメータについての詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-mgm-definition" title="23.3.3.5 NDB Cluster 管理サーバーの定義">セクション23.3.3.5「NDB Cluster 管理サーバーの定義」</a>を参照してください。 
        </p></li><li class="listitem"><p>
          <span class="firstterm">ノードログ</span>は、各ノードにローカルです。
        </p><p>
          ノードイベントロギングによって生成された出力は、ノード <code class="literal">DataDir</code> の <code class="filename">ndb_<em class="replaceable"><code>node_id</code></em>_out.log</code> (<em class="replaceable"><code>node_id</code></em> はノードノード ID) ファイルに書き込まれます。 ノードイベントログは、管理ノードとデータノードの両方で生成されます。 
        </p><p>
          ノードログは、アプリケーションの開発時またはアプリケーションコードのデバッグに使用されることのみを目的としています。
        </p></li></ul></div><p>
      両方のタイプのイベントログを設定すると、イベントのさまざまなサブセットのログを記録できます。
    </p><p>
      レポート可能な各イベントは、次の 3 つの基準に従って区別できます。
    </p><a class="indexterm" name="idm45563212262832"></a><a class="indexterm" name="idm45563212260688"></a><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          <span class="emphasis"><em>カテゴリ</em></span>: これは、<code class="literal">STARTUP</code>、<code class="literal">SHUTDOWN</code>、<code class="literal">STATISTICS</code>、<code class="literal">CHECKPOINT</code>、<code class="literal">NODERESTART</code>、<code class="literal">CONNECTION</code>、<code class="literal">ERROR</code>、または <code class="literal">INFO</code> 値のいずれかを指定できます。
        </p></li><li class="listitem"><p>
          <span class="emphasis"><em>優先度</em></span>: これは、0 から 15 までの数値のいずれかで表されます。0 は<span class="quote">「<span class="quote">最も重要</span>」</span>および 15 <span class="quote">「<span class="quote">重要度が最も低い</span>」</span>を示します。
        </p></li><li class="listitem"><p>
          <span class="emphasis"><em>重大度レベル</em></span>: これは、<code class="literal">ALERT</code>、<code class="literal">CRITICAL</code>、<code class="literal">ERROR</code>、<code class="literal">WARNING</code>、<code class="literal">INFO</code>、または <code class="literal">DEBUG</code> 値のいずれかを指定できます。
        </p></li></ul></div><p>
      クラスタログとノードログのどちらもこれらのプロパティーでフィルタ処理できます。
    </p><p>
      クラスタログで使用される形式は、次に示すとおりです。
    </p><pre class="programlisting">2007-01-26 19:35:55 [MgmSrvr] INFO     -- Node 1: Data usage is 2%(60 32K pages of total 2560)
2007-01-26 19:35:55 [MgmSrvr] INFO     -- Node 1: Index usage is 1%(24 8K pages of total 2336)
2007-01-26 19:35:55 [MgmSrvr] INFO     -- Node 1: Resource 0 min: 0 max: 639 curr: 0
2007-01-26 19:35:55 [MgmSrvr] INFO     -- Node 2: Data usage is 2%(76 32K pages of total 2560)
2007-01-26 19:35:55 [MgmSrvr] INFO     -- Node 2: Index usage is 1%(24 8K pages of total 2336)
2007-01-26 19:35:55 [MgmSrvr] INFO     -- Node 2: Resource 0 min: 0 max: 639 curr: 0
2007-01-26 19:35:55 [MgmSrvr] INFO     -- Node 3: Data usage is 2%(58 32K pages of total 2560)
2007-01-26 19:35:55 [MgmSrvr] INFO     -- Node 3: Index usage is 1%(25 8K pages of total 2336)
2007-01-26 19:35:55 [MgmSrvr] INFO     -- Node 3: Resource 0 min: 0 max: 639 curr: 0
2007-01-26 19:35:55 [MgmSrvr] INFO     -- Node 4: Data usage is 2%(74 32K pages of total 2560)
2007-01-26 19:35:55 [MgmSrvr] INFO     -- Node 4: Index usage is 1%(25 8K pages of total 2336)
2007-01-26 19:35:55 [MgmSrvr] INFO     -- Node 4: Resource 0 min: 0 max: 639 curr: 0
2007-01-26 19:39:42 [MgmSrvr] INFO     -- Node 4: Node 9 Connected
2007-01-26 19:39:42 [MgmSrvr] INFO     -- Node 1: Node 9 Connected
2007-01-26 19:39:42 [MgmSrvr] INFO     -- Node 1: Node 9: API 8.0.23-ndb-8.0.23
2007-01-26 19:39:42 [MgmSrvr] INFO     -- Node 2: Node 9 Connected
2007-01-26 19:39:42 [MgmSrvr] INFO     -- Node 2: Node 9: API 8.0.23-ndb-8.0.23
2007-01-26 19:39:42 [MgmSrvr] INFO     -- Node 3: Node 9 Connected
2007-01-26 19:39:42 [MgmSrvr] INFO     -- Node 3: Node 9: API 8.0.23-ndb-8.0.23
2007-01-26 19:39:42 [MgmSrvr] INFO     -- Node 4: Node 9: API 8.0.23-ndb-8.0.23
2007-01-26 19:59:22 [MgmSrvr] ALERT    -- Node 2: Node 7 Disconnected
2007-01-26 19:59:22 [MgmSrvr] ALERT    -- Node 2: Node 7 Disconnected
</pre><p>
      クラスタログの各行には、次の情報が含まれます。
    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          <code class="literal"><em class="replaceable"><code>YYYY</code></em>-<em class="replaceable"><code>MM</code></em>-<em class="replaceable"><code>DD</code></em> <em class="replaceable"><code>HH</code></em>:<em class="replaceable"><code>MM</code></em>:<em class="replaceable"><code>SS</code></em></code> 形式のタイムスタンプ。
        </p></li><li class="listitem"><p>
          ロギングを実行しているノードのタイプ。 クラスタログでは、これは常に <code class="literal">[MgmSrvr]</code> です。 
        </p></li><li class="listitem"><p>
          イベントの重大度。
        </p></li><li class="listitem"><p>
          イベントをレポートするノードの ID。
        </p></li><li class="listitem"><p>
          イベントの説明。 ログに表示されるもっとも一般的なイベントタイプは、クラスタ内のさまざまなノード間およびチェックポイントの発生時の接続と切断です。 場合によっては、説明にステータス情報が含まれることがあります。 
        </p></li></ul></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-logging-management-commands"></a>23.5.3.1 NDB Cluster ロギング管理コマンド</h4></div></div></div><a class="indexterm" name="idm45563212229120"></a><a class="indexterm" name="idm45563212226976"></a><a class="indexterm" name="idm45563212225600"></a><a class="indexterm" name="idm45563212224256"></a><a class="indexterm" name="idm45563212222224"></a><a class="indexterm" name="idm45563212220848"></a><p>
        <span class="command"><strong>ndb_mgm</strong></span> は、クラスタログおよびノードログに関連する多数の管理コマンドをサポートしています。 次のリストで、<em class="replaceable"><code>node_id</code></em> はストレージノード ID またはキーワード <code class="literal">ALL</code> のいずれかを示します。これは、コマンドをすべてのクラスタデータノードに適用する必要があることを示します。 
      </p><a class="indexterm" name="idm45563212215968"></a><a class="indexterm" name="idm45563212214432"></a><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">CLUSTERLOG ON</code>
          </p><p>
            クラスタログをオンにします。
          </p></li><li class="listitem"><p>
            <code class="literal">CLUSTERLOG OFF</code>
          </p><p>
            クラスタログをオフにします。
          </p></li><li class="listitem"><p>
            <code class="literal">CLUSTERLOG INFO</code>
          </p><p>
            クラスタログの設定に関する情報を提供します。
          </p></li><li class="listitem"><p>
            <code class="literal"><em class="replaceable"><code>node_id</code></em> CLUSTERLOG <em class="replaceable"><code>category</code></em>=<em class="replaceable"><code>threshold</code></em></code>
          </p><p>
            <em class="replaceable"><code>threshold</code></em> 以下の優先度を持つ <em class="replaceable"><code>category</code></em> のイベントをクラスタログに記録します。
          </p></li><li class="listitem"><p>
            <code class="literal">CLUSTERLOG FILTER <em class="replaceable"><code>severity_level</code></em></code>
          </p><p>
            指定された <em class="replaceable"><code>severity_level</code></em> のイベントのクラスタロギングを切り換えます。
          </p></li></ul></div><p>
        次の表では、クラスタログカテゴリのしきい値の (すべてのデータノードの) デフォルト設定について説明します。 イベントの優先度が優先度のしきい値以下である場合は、そのイベントがクラスタログにレポートされます。 
      </p><a class="indexterm" name="idm45563212198368"></a><a class="indexterm" name="idm45563212196192"></a><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
          イベントはデータノードごとに報告され、しきい値はノードごとに異なる値に設定できます。
        </p></div><div class="table"><a name="idm45563212193744"></a><p class="title"><b>表 23.52 クラスタログカテゴリ (デフォルトのしきい値設定)</b></p><div class="table-contents"><table><col style="width: 30%"><col style="width: 70%"><thead><tr>
            <th>カテゴリ</th>
            <th>デフォルトのしきい値 (すべてのデータノード)</th>
          </tr></thead><tbody><tr>
            <td><code class="literal">STARTUP</code></td>
            <td><span class="bold"><strong>7</strong></span></td>
          </tr><tr>
            <td><code class="literal">SHUTDOWN</code></td>
            <td><span class="bold"><strong>7</strong></span></td>
          </tr><tr>
            <td><code class="literal">STATISTICS</code></td>
            <td><span class="bold"><strong>7</strong></span></td>
          </tr><tr>
            <td><code class="literal">CHECKPOINT</code></td>
            <td><span class="bold"><strong>7</strong></span></td>
          </tr><tr>
            <td><code class="literal">NODERESTART</code></td>
            <td><span class="bold"><strong>7</strong></span></td>
          </tr><tr>
            <td><code class="literal">CONNECTION</code></td>
            <td><span class="bold"><strong>7</strong></span></td>
          </tr><tr>
            <td><code class="literal">ERROR</code></td>
            <td><span class="bold"><strong>15</strong></span></td>
          </tr><tr>
            <td><code class="literal">INFO</code></td>
            <td><span class="bold"><strong>7</strong></span></td>
          </tr></tbody></table></div></div><br class="table-break"><p>
        <code class="literal">STATISTICS</code> カテゴリは、役に立つデータを大量に提供できます。 詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-log-statistics" title="23.5.3.3 NDB Cluster 管理クライアントでの CLUSTERLOG STATISTICS の使用">セクション23.5.3.3「NDB Cluster 管理クライアントでの CLUSTERLOG STATISTICS の使用」</a>を参照してください。 
      </p><p>
        しきい値は、各カテゴリ内のイベントをフィルタ処理するために使用されます。 たとえば、優先度が 3 の <code class="literal">STARTUP</code> イベントのログは、<code class="literal">STARTUP</code> のしきい値が 3 以上に設定されていなければ記録されません。 しきい値が 3 の場合は、優先度が 3 以下のイベントのみが送信されます。 
      </p><a class="indexterm" name="idm45563212160272"></a><a class="indexterm" name="idm45563212158096"></a><p>
        次の表は、イベントの重大度レベルを示しています。
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
          これらは、使用されることもマップされることもない <code class="literal">LOG_EMERG</code> と <code class="literal">LOG_NOTICE</code> を除く、Unix の <code class="literal">syslog</code> レベルに対応します。
        </p></div><div class="table"><a name="idm45563212152992"></a><p class="title"><b>表 23.53 イベントの重大度</b></p><div class="table-contents"><table><col style="width: 20%"><col style="width: 20%"><col style="width: 60%"><thead><tr>
            <th scope="col">重大度レベル値</th>
            <th scope="col">重大度</th>
            <th scope="col">説明</th>
          </tr></thead><tbody><tr>
            <th scope="row">1</th>
            <td><code class="literal">ALERT</code></td>
            <td>すぐに修正するべき状況 (システムデータベースの破損など)</td>
          </tr><tr>
            <th scope="row">2</th>
            <td><code class="literal">CRITICAL</code></td>
            <td>クリティカルな状況 (デバイスエラーやリソース不足など)</td>
          </tr><tr>
            <th scope="row">3</th>
            <td><code class="literal">ERROR</code></td>
            <td>修正するべき状況 (構成エラーなど)</td>
          </tr><tr>
            <th scope="row">4</th>
            <td><code class="literal">WARNING</code></td>
            <td>エラーではないが、特別な処理が必要な可能性がある状況</td>
          </tr><tr>
            <th scope="row">5</th>
            <td><code class="literal">INFO</code></td>
            <td>情報メッセージ</td>
          </tr><tr>
            <th scope="row">6</th>
            <td><code class="literal">DEBUG</code></td>
            <td><code class="literal">NDBCLUSTER</code> の開発で使用されるデバッグメッセージ</td>
          </tr></tbody></table></div></div><br class="table-break"><p>
        イベント重大度レベルは、<code class="literal">CLUSTERLOG FILTER</code> を使用することでオンとオフを切り替えることができます (上記を参照してください)。 重大度レベルをオンにすると、優先度がカテゴリしきい値以下であるすべてのイベントがログに記録されます。 重大度レベルをオフにすると、その重大度レベルに属するイベントはログに記録されません。 
      </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">重要</div><p>
          クラスタログレベルは、<span class="command"><strong>ndb_mgmd</strong></span> ごとに、スクライバ単位で設定されます。 つまり、複数の管理サーバーを持つ NDB Cluster では、ある管理サーバーに接続されている <span class="command"><strong>ndb_mgm</strong></span> のインスタンスで <code class="literal">CLUSTERLOG</code> コマンドを使用すると、その管理サーバーによって生成されたログにのみ影響し、ほかの管理サーバーによって生成されたログには影響しません。 また、管理サーバーの 1 台が再起動されると、その管理サーバーで生成されたログのみが、再起動によって発生したログレベルのリセットによる影響を受けます。 
        </p></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-log-events"></a>23.5.3.2 NDB Cluster ログイベント</h4></div></div></div><a class="indexterm" name="idm45563212115008"></a><a class="indexterm" name="idm45563212112880"></a><p>
        イベントログでレポートされるイベントレポートの形式は、次のとおりです。
      </p><pre class="programlisting"><em class="replaceable"><code>datetime</code></em> [<em class="replaceable"><code>string</code></em>] <em class="replaceable"><code>severity</code></em> -- <em class="replaceable"><code>message</code></em>
</pre><p>
        例:
      </p><pre class="programlisting">09:19:30 2005-07-24 [NDB] INFO -- Node 4 Start phase 4 completed
</pre><p>
        このセクションでは、レポート可能なすべてのイベントについて、カテゴリおよび各カテゴリ内の重大度レベルの順に説明します。
      </p><p>
        イベントの説明では、GCP と LCP はそれぞれ<span class="quote">「<span class="quote">グローバルチェックポイント</span>」</span>および<span class="quote">「<span class="quote">ローカルチェックポイント</span>」</span>を表します。
      </p><a class="indexterm" name="idm45563212104752"></a><a class="indexterm" name="idm45563212102608"></a><a class="indexterm" name="idm45563212100608"></a><a class="indexterm" name="idm45563212098432"></a><h5><a name="idm45563212097008"></a>CONNECTION イベント</h5><p>
        これらのイベントは、クラスタノード間の接続に関連するものです。
      </p><div class="table"><a name="idm45563212095664"></a><p class="title"><b>表 23.54 クラスタノード間の接続に関連付けられたイベント</b></p><div class="table-contents"><table><col style="width: 35%"><col style="width: 10%"><col style="width: 10%"><col style="width: 45%"><thead><tr>
            <th scope="col">イベント</th>
            <th scope="col">優先度</th>
            <th scope="col">重大度レベル</th>
            <th scope="col">説明</th>
          </tr></thead><tbody><tr>
            <th scope="row"><code class="literal">Connected</code></th>
            <td>8</td>
            <td><code class="literal">INFO</code></td>
            <td>データノードが接続されました</td>
          </tr><tr>
            <th scope="row"><code class="literal">Disconnected</code></th>
            <td>8</td>
            <td><code class="literal">ALERT</code></td>
            <td>データノードが切断されました</td>
          </tr><tr>
            <th scope="row"><code class="literal">CommunicationClosed</code></th>
            <td>8</td>
            <td><code class="literal">INFO</code></td>
            <td>SQL ノードまたはデータノードの接続が閉じられました</td>
          </tr><tr>
            <th scope="row"><code class="literal">CommunicationOpened</code></th>
            <td>8</td>
            <td><code class="literal">INFO</code></td>
            <td>SQL ノードまたはデータノードの接続が開かれました</td>
          </tr><tr>
            <th scope="row"><code class="literal">ConnectedApiVersion</code></th>
            <td>8</td>
            <td><code class="literal">INFO</code></td>
            <td>API バージョンを使用した接続</td>
          </tr></tbody></table></div></div><br class="table-break"><h5><a name="idm45563212060784"></a>CHECKPOINT イベント</h5><a class="indexterm" name="idm45563212060064"></a><a class="indexterm" name="idm45563212058000"></a><p>
        次に示すロギングメッセージは、チェックポイントに関連するものです。
      </p><div class="table"><a name="idm45563212055952"></a><p class="title"><b>表 23.55 チェックポイントに関連付けられたイベント</b></p><div class="table-contents"><table><col style="width: 35%"><col style="width: 10%"><col style="width: 10%"><col style="width: 45%"><thead><tr>
            <th scope="col">イベント</th>
            <th scope="col">優先度</th>
            <th scope="col">重大度レベル</th>
            <th scope="col">説明</th>
          </tr></thead><tbody><tr>
            <th scope="row"><code class="literal">GlobalCheckpointStarted</code></th>
            <td>9</td>
            <td><code class="literal">INFO</code></td>
            <td>GCP の開始: Redo ログがディスクに書き込まれます</td>
          </tr><tr>
            <th scope="row"><code class="literal">GlobalCheckpointCompleted</code></th>
            <td>10</td>
            <td><code class="literal">INFO</code></td>
            <td>GCP が終了しました</td>
          </tr><tr>
            <th scope="row"><code class="literal">LocalCheckpointStarted</code></th>
            <td>7</td>
            <td><code class="literal">INFO</code></td>
            <td>LCP の開始: データがディスクに書き込まれます</td>
          </tr><tr>
            <th scope="row"><code class="literal">LocalCheckpointCompleted</code></th>
            <td>7</td>
            <td><code class="literal">INFO</code></td>
            <td>LCP が正常に完了しました</td>
          </tr><tr>
            <th scope="row"><code class="literal">LCPStoppedInCalcKeepGci</code></th>
            <td>0</td>
            <td><code class="literal">ALERT</code></td>
            <td>LCP が停止しました</td>
          </tr><tr>
            <th scope="row"><code class="literal">LCPFragmentCompleted</code></th>
            <td>11</td>
            <td><code class="literal">INFO</code></td>
            <td>フラグメント上の LCP が完了しました</td>
          </tr><tr>
            <th scope="row"><code class="literal">UndoLogBlocked</code></th>
            <td>7</td>
            <td><code class="literal">INFO</code></td>
            <td>Undo ロギングがブロックされました。バッファーのオーバーフローに近付いています</td>
          </tr><tr>
            <th scope="row"><code class="literal">RedoStatus</code></th>
            <td>7</td>
            <td><code class="literal">INFO</code></td>
            <td>Redo ステータス</td>
          </tr></tbody></table></div></div><br class="table-break"><h5><a name="idm45563212005888"></a>STARTUP イベント</h5><a class="indexterm" name="idm45563212005168"></a><a class="indexterm" name="idm45563212003104"></a><p>
        ノードまたはクラスタの起動や、その成功または失敗に対応して、次のイベントが生成されます。 それらは、起動プロセスの進行状況に関する情報 (ロギングアクティビティーに関する情報を含む) も提供します。 
      </p><div class="table"><a name="idm45563212000688"></a><p class="title"><b>表 23.56 ノードまたはクラスタの起動に関連するイベント</b></p><div class="table-contents"><table><col style="width: 35%"><col style="width: 10%"><col style="width: 10%"><col style="width: 45%"><thead><tr>
            <th scope="col">イベント</th>
            <th scope="col">優先度</th>
            <th scope="col">重大度レベル</th>
            <th scope="col">説明</th>
          </tr></thead><tbody><tr>
            <th scope="row"><code class="literal">NDBStartStarted</code></th>
            <td>1</td>
            <td><code class="literal">INFO</code></td>
            <td>データノードの起動フェーズが開始されました (すべてのノードが起動します)</td>
          </tr><tr>
            <th scope="row"><code class="literal">NDBStartCompleted</code></th>
            <td>1</td>
            <td><code class="literal">INFO</code></td>
            <td>起動フェーズが完了しました、すべてのデータノード</td>
          </tr><tr>
            <th scope="row"><code class="literal">STTORRYRecieved</code></th>
            <td>15</td>
            <td><code class="literal">INFO</code></td>
            <td>再起動の完了後にブロックを受信しました</td>
          </tr><tr>
            <th scope="row"><code class="literal">StartPhaseCompleted</code></th>
            <td>4</td>
            <td><code class="literal">INFO</code></td>
            <td>データノードの起動フェーズ <em class="replaceable"><code>X</code></em> が完了しました</td>
          </tr><tr>
            <th scope="row"><code class="literal">CM_REGCONF</code></th>
            <td>3</td>
            <td><code class="literal">INFO</code></td>
            <td>ノードが正常にクラスタに追加されました。ノード、管理ノード、および動的 ID が表示されます</td>
          </tr><tr>
            <th scope="row"><code class="literal">CM_REGREF</code></th>
            <td>8</td>
            <td><code class="literal">INFO</code></td>
            <td>ノードはクラスタへの追加を拒否されました。構成が間違っている、通信を確立できないなどの問題が原因で、クラスタに追加できません</td>
          </tr><tr>
            <th scope="row"><code class="literal">FIND_NEIGHBOURS</code></th>
            <td>8</td>
            <td><code class="literal">INFO</code></td>
            <td>隣接したデータノードを表示します</td>
          </tr><tr>
            <th scope="row"><code class="literal">NDBStopStarted</code></th>
            <td>1</td>
            <td><code class="literal">INFO</code></td>
            <td>データノードのシャットダウンが開始されました</td>
          </tr><tr>
            <th scope="row"><code class="literal">NDBStopCompleted</code></th>
            <td>1</td>
            <td><code class="literal">INFO</code></td>
            <td>データノードのシャットダウンが完了しました</td>
          </tr><tr>
            <th scope="row"><code class="literal">NDBStopForced</code></th>
            <td>1</td>
            <td><code class="literal">ALERT</code></td>
            <td>データノードが強制的にシャットダウンされました</td>
          </tr><tr>
            <th scope="row"><code class="literal">NDBStopAborted</code></th>
            <td>1</td>
            <td><code class="literal">INFO</code></td>
            <td>データノードを正常にシャットダウンできませんでした</td>
          </tr><tr>
            <th scope="row"><code class="literal">StartREDOLog</code></th>
            <td>4</td>
            <td><code class="literal">INFO</code></td>
            <td>新しい Redo ログが開始されました。GCI は <em class="replaceable"><code>X</code></em> を保持し、最新のリストア可能な GCI は <em class="replaceable"><code>Y</code></em> です</td>
          </tr><tr>
            <th scope="row"><code class="literal">StartLog</code></th>
            <td>10</td>
            <td><code class="literal">INFO</code></td>
            <td>新しいログが開始されました。ログ部分は <em class="replaceable"><code>X</code></em>、開始 MB は <em class="replaceable"><code>Y</code></em>、終了 MB は <em class="replaceable"><code>Z</code></em> です</td>
          </tr><tr>
            <th scope="row"><code class="literal">UNDORecordsExecuted</code></th>
            <td>15</td>
            <td><code class="literal">INFO</code></td>
            <td>Undo レコードが実行されました</td>
          </tr><tr>
            <th scope="row"><code class="literal">StartReport</code></th>
            <td>4</td>
            <td><code class="literal">INFO</code></td>
            <td>レポートが開始されました</td>
          </tr><tr>
            <th scope="row"><code class="literal">LogFileInitStatus</code></th>
            <td>7</td>
            <td><code class="literal">INFO</code></td>
            <td>ログファイルの初期化ステータス</td>
          </tr><tr>
            <th scope="row"><code class="literal">LogFileInitCompStatus</code></th>
            <td>7</td>
            <td><code class="literal">INFO</code></td>
            <td>ログファイルの完了ステータス</td>
          </tr><tr>
            <th scope="row"><code class="literal">StartReadLCP</code></th>
            <td>10</td>
            <td><code class="literal">INFO</code></td>
            <td>ローカルチェックポイントの読み取りを開始します</td>
          </tr><tr>
            <th scope="row"><code class="literal">ReadLCPComplete</code></th>
            <td>10</td>
            <td><code class="literal">INFO</code></td>
            <td>ローカルチェックポイントの読み取りが完了しました</td>
          </tr><tr>
            <th scope="row"><code class="literal">RunRedo</code></th>
            <td>8</td>
            <td><code class="literal">INFO</code></td>
            <td>Redo ログが実行されています</td>
          </tr><tr>
            <th scope="row"><code class="literal">RebuildIndex</code></th>
            <td>10</td>
            <td><code class="literal">INFO</code></td>
            <td>インデックスを再構築しています</td>
          </tr></tbody></table></div></div><br class="table-break"><h5><a name="idm45563211882736"></a>NODERESTART イベント</h5><a class="indexterm" name="idm45563211882000"></a><a class="indexterm" name="idm45563211879920"></a><p>
        次のイベントは、ノードを再起動するときに生成され、ノードの再起動プロセスの成功または失敗に関連するものです。
      </p><div class="table"><a name="idm45563211877744"></a><p class="title"><b>表 23.57 ノードの再起動に関連するイベント</b></p><div class="table-contents"><table><col style="width: 35%"><col style="width: 10%"><col style="width: 10%"><col style="width: 45%"><thead><tr>
            <th scope="col">イベント</th>
            <th scope="col">優先度</th>
            <th scope="col">重大度レベル</th>
            <th scope="col">説明</th>
          </tr></thead><tbody><tr>
            <th scope="row"><code class="literal">NR_CopyDict</code></th>
            <td>7</td>
            <td><code class="literal">INFO</code></td>
            <td>ディレクトリ情報のコピーが完了しました</td>
          </tr><tr>
            <th scope="row"><code class="literal">NR_CopyDistr</code></th>
            <td>7</td>
            <td><code class="literal">INFO</code></td>
            <td>ディストリビューション情報のコピーが完了しました</td>
          </tr><tr>
            <th scope="row"><code class="literal">NR_CopyFragsStarted</code></th>
            <td>7</td>
            <td><code class="literal">INFO</code></td>
            <td>フラグメントのコピーを開始しています</td>
          </tr><tr>
            <th scope="row"><code class="literal">NR_CopyFragDone</code></th>
            <td>10</td>
            <td><code class="literal">INFO</code></td>
            <td>フラグメントのコピーが完了しました</td>
          </tr><tr>
            <th scope="row"><code class="literal">NR_CopyFragsCompleted</code></th>
            <td>7</td>
            <td><code class="literal">INFO</code></td>
            <td>すべてのフラグメントのコピーが完了しました</td>
          </tr><tr>
            <th scope="row"><code class="literal">NodeFailCompleted</code></th>
            <td>8</td>
            <td><code class="literal">ALERT</code></td>
            <td>ノードの失敗フェーズが完了しました</td>
          </tr><tr>
            <th scope="row"><code class="literal">NODE_FAILREP</code></th>
            <td>8</td>
            <td><code class="literal">ALERT</code></td>
            <td>ノードが失敗したことをレポートします</td>
          </tr><tr>
            <th scope="row"><code class="literal">ArbitState</code></th>
            <td>6</td>
            <td><code class="literal">INFO</code></td>
            <td>アービトレータが見つかったかどうかをレポートします。アービトレータの検索時の可能性のある結果は、次に示す 7 つです。<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    管理サーバーがアービトレーションスレッドを再起動します [状態 =<em class="replaceable"><code>X</code></em>]
                  </p></li><li class="listitem"><p>
                    アービトレータノード <em class="replaceable"><code>X</code></em> を準備します [チケット =<em class="replaceable"><code>Y</code></em>]
                  </p></li><li class="listitem"><p>
                    アービトレータノード <em class="replaceable"><code>X</code></em> を受信します [チケット =<em class="replaceable"><code>Y</code></em>]
                  </p></li><li class="listitem"><p>
                    アービトレータノード <em class="replaceable"><code>X</code></em> を起動しました [チケット =<em class="replaceable"><code>Y</code></em>]
                  </p></li><li class="listitem"><p>
                    アービトレータノード <em class="replaceable"><code>X</code></em> が失われました - プロセスの失敗 [状態 =<em class="replaceable"><code>Y</code></em>]
                  </p></li><li class="listitem"><p>
                    アービトレータノード <em class="replaceable"><code>X</code></em> が失われました - プロセスの終了 [状態 =<em class="replaceable"><code>Y</code></em>]
                  </p></li><li class="listitem"><p>
                    アービトレータノード <em class="replaceable"><code>X</code></em> が失われました &lt;エラーメッセージ&gt; [状態 =<em class="replaceable"><code>Y</code></em>]
                  </p></li></ul></div></td>
          </tr><tr>
            <th scope="row"><code class="literal">ArbitResult</code></th>
            <td>2</td>
            <td><code class="literal">ALERT</code></td>
            <td>アービトレータの結果をレポートします。アービトレータの試行の可能性のある結果は、次に示した 8 つです。<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                    アービトレーションチェックに失敗しました: 1/2 未満のノードが残っています
                  </p></li><li class="listitem"><p>
                    アービトレーションチェックに成功しました: ノードグループの大部分
                  </p></li><li class="listitem"><p>
                    アービトレーションチェックに失敗しました: ノードグループが見つかりません
                  </p></li><li class="listitem"><p>
                    ネットワークのパーティション化: アービトレーションが必要です
                  </p></li><li class="listitem"><p>
                    アービトレーションに成功しました: ノード <em class="replaceable"><code>X</code></em> からの肯定的応答
                  </p></li><li class="listitem"><p>
                    アービトレーションに失敗しました: ノード <em class="replaceable"><code>X</code></em> からの否定的応答
                  </p></li><li class="listitem"><p>
                    ネットワークのパーティション化: 使用可能なアービトレータがありません
                  </p></li><li class="listitem"><p>
                    ネットワークのパーティション化: アービトレータが構成されていません
                  </p></li></ul></div></td>
          </tr><tr>
            <th scope="row"><code class="literal">GCP_TakeoverStarted</code></th>
            <td>7</td>
            <td><code class="literal">INFO</code></td>
            <td>GCP テイクオーバーが開始されました</td>
          </tr><tr>
            <th scope="row"><code class="literal">GCP_TakeoverCompleted</code></th>
            <td>7</td>
            <td><code class="literal">INFO</code></td>
            <td>GCP テイクオーバーが完了しました</td>
          </tr><tr>
            <th scope="row"><code class="literal">LCP_TakeoverStarted</code></th>
            <td>7</td>
            <td><code class="literal">INFO</code></td>
            <td>LCP テイクオーバーが開始されました</td>
          </tr><tr>
            <th scope="row"><code class="literal">LCP_TakeoverCompleted</code></th>
            <td>7</td>
            <td><code class="literal">INFO</code></td>
            <td>LCP テイクオーバーが完了しました (状態 = <em class="replaceable"><code>X</code></em>)</td>
          </tr><tr>
            <th scope="row"><code class="literal">ConnectCheckStarted</code></th>
            <td>6</td>
            <td><code class="literal">INFO</code></td>
            <td>接続チェックが開始されました</td>
          </tr><tr>
            <th scope="row"><code class="literal">ConnectCheckCompleted</code></th>
            <td>6</td>
            <td><code class="literal">INFO</code></td>
            <td>接続チェックが完了しました</td>
          </tr><tr>
            <th scope="row"><code class="literal">NodeFailRejected</code></th>
            <td>6</td>
            <td><code class="literal">ALERT</code></td>
            <td>ノードの失敗フェーズに失敗しました</td>
          </tr></tbody></table></div></div><br class="table-break"><h5><a name="idm45563211765120"></a>STATISTICS イベント</h5><a class="indexterm" name="idm45563211764400"></a><a class="indexterm" name="idm45563211762336"></a><p>
        次のイベントは、統計的な特性を持っています。 それらは、トランザクションやその他の操作の回数、各ノードによって送受信されたデータの量、メモリーの使用状況などの情報を提供します。 
      </p><div class="table"><a name="idm45563211759952"></a><p class="title"><b>表 23.58 統計的性質のイベント</b></p><div class="table-contents"><table><col style="width: 35%"><col style="width: 10%"><col style="width: 10%"><col style="width: 45%"><thead><tr>
            <th scope="col">イベント</th>
            <th scope="col">優先度</th>
            <th scope="col">重大度レベル</th>
            <th scope="col">説明</th>
          </tr></thead><tbody><tr>
            <th scope="row"><code class="literal">TransReportCounters</code></th>
            <td>8</td>
            <td><code class="literal">INFO</code></td>
            <td>トランザクション、コミット、読み取り、単純な読み取り、書き込み、同時操作、属性情報、中止の数などのトランザクション統計をレポートします</td>
          </tr><tr>
            <th scope="row"><code class="literal">OperationReportCounters</code></th>
            <td>8</td>
            <td><code class="literal">INFO</code></td>
            <td>操作数</td>
          </tr><tr>
            <th scope="row"><code class="literal">TableCreated</code></th>
            <td>7</td>
            <td><code class="literal">INFO</code></td>
            <td>作成されたテーブルの数をレポートします</td>
          </tr><tr>
            <th scope="row"><code class="literal">JobStatistic</code></th>
            <td>9</td>
            <td><code class="literal">INFO</code></td>
            <td>内部ジョブスケジューリングの平均の統計</td>
          </tr><tr>
            <th scope="row"><code class="literal">ThreadConfigLoop</code></th>
            <td>9</td>
            <td><code class="literal">INFO</code></td>
            <td>スレッド構成ループの数</td>
          </tr><tr>
            <th scope="row"><code class="literal">SendBytesStatistic</code></th>
            <td>9</td>
            <td><code class="literal">INFO</code></td>
            <td>ノード <em class="replaceable"><code>X</code></em> に送信された平均バイト数</td>
          </tr><tr>
            <th scope="row"><code class="literal">ReceiveBytesStatistic</code></th>
            <td>9</td>
            <td><code class="literal">INFO</code></td>
            <td>ノード <em class="replaceable"><code>X</code></em> から受信された平均バイト数</td>
          </tr><tr>
            <th scope="row"><code class="literal">MemoryUsage</code></th>
            <td>5</td>
            <td><code class="literal">INFO</code></td>
            <td>データおよびインデックスメモリー使用状況 (80%、90%、および 100%)</td>
          </tr><tr>
            <th scope="row"><code class="literal">MTSignalStatistics</code></th>
            <td>9</td>
            <td><code class="literal">INFO</code></td>
            <td>マルチスレッドシグナル</td>
          </tr></tbody></table></div></div><br class="table-break"><h5><a name="idm45563211704448"></a>SCHEMA イベント</h5><a class="indexterm" name="idm45563211703744"></a><a class="indexterm" name="idm45563211701696"></a><p>
        これらのイベントは NDB Cluster スキーマ操作に関連しています。
      </p><div class="table"><a name="idm45563211699680"></a><p class="title"><b>表 23.59 NDB Cluster スキーマ操作に関連するイベント</b></p><div class="table-contents"><table><col style="width: 35%"><col style="width: 10%"><col style="width: 10%"><col style="width: 45%"><thead><tr>
            <th scope="col">イベント</th>
            <th scope="col">優先度</th>
            <th scope="col">重大度レベル</th>
            <th scope="col">説明</th>
          </tr></thead><tbody><tr>
            <th scope="row"><code class="literal">CreateSchemaObject</code></th>
            <td>8</td>
            <td><code class="literal">INFO</code></td>
            <td>スキーマオブジェクトが作成されました</td>
          </tr><tr>
            <th scope="row"><code class="literal">AlterSchemaObject</code></th>
            <td>8</td>
            <td><code class="literal">INFO</code></td>
            <td>スキーマオブジェクトが更新されました</td>
          </tr><tr>
            <th scope="row"><code class="literal">DropSchemaObject</code></th>
            <td>8</td>
            <td><code class="literal">INFO</code></td>
            <td>スキーマオブジェクトが削除されました</td>
          </tr></tbody></table></div></div><br class="table-break"><h5><a name="idm45563211674992"></a>ERROR イベント</h5><a class="indexterm" name="idm45563211674288"></a><a class="indexterm" name="idm45563211672240"></a><p>
        これらのイベントは、クラスタのエラーおよび警告に関連するものです。 一般に、これらが 1 つ以上存在することは、重大な誤動作や障害が発生したことを示しています。 
      </p><div class="table"><a name="idm45563211669936"></a><p class="title"><b>表 23.60 クラスタのエラーおよび警告に関連するイベント</b></p><div class="table-contents"><table><col style="width: 35%"><col style="width: 10%"><col style="width: 10%"><col style="width: 45%"><thead><tr>
            <th scope="col">イベント</th>
            <th scope="col">優先度</th>
            <th scope="col">重大度レベル</th>
            <th scope="col">説明</th>
          </tr></thead><tbody><tr>
            <th scope="row"><code class="literal">TransporterError</code></th>
            <td>2</td>
            <td><code class="literal">ERROR</code></td>
            <td>トランスポータエラー</td>
          </tr><tr>
            <th scope="row"><code class="literal">TransporterWarning</code></th>
            <td>8</td>
            <td><code class="literal">WARNING</code></td>
            <td>トランスポータ警告</td>
          </tr><tr>
            <th scope="row"><code class="literal">MissedHeartbeat</code></th>
            <td>8</td>
            <td><code class="literal">WARNING</code></td>
            <td>ノード <em class="replaceable"><code>X</code></em> でハートビート番号 <em class="replaceable"><code>Y</code></em> が失われました</td>
          </tr><tr>
            <th scope="row"><code class="literal">DeadDueToHeartbeat</code></th>
            <td>8</td>
            <td><code class="literal">ALERT</code></td>
            <td>ハートビートが失われたため、ノード <em class="replaceable"><code>X</code></em> が<span class="quote">「<span class="quote">停止</span>」</span>を宣言しました</td>
          </tr><tr>
            <th scope="row"><code class="literal">WarningEvent</code></th>
            <td>2</td>
            <td><code class="literal">WARNING</code></td>
            <td>一般警告イベント</td>
          </tr><tr>
            <th scope="row"><code class="literal">SubscriptionStatus</code></th>
            <td>4</td>
            <td><code class="literal">WARNING</code></td>
            <td>サブスクリプションのステータスの変更</td>
          </tr></tbody></table></div></div><br class="table-break"><h5><a name="idm45563211628576"></a>INFO イベント</h5><a class="indexterm" name="idm45563211627872"></a><a class="indexterm" name="idm45563211625824"></a><p>
        これらのイベントは、クラスタの状態およびロギングやハートビート伝送などのクラスタのメンテナンスに関連するアクティビティーに関する一般情報を提供します。
      </p><div class="table"><a name="idm45563211623536"></a><p class="title"><b>表 23.61 情報イベント</b></p><div class="table-contents"><table><col style="width: 35%"><col style="width: 10%"><col style="width: 10%"><col style="width: 45%"><thead><tr>
            <th scope="col">イベント</th>
            <th scope="col">優先度</th>
            <th scope="col">重大度レベル</th>
            <th scope="col">説明</th>
          </tr></thead><tbody><tr>
            <th scope="row"><code class="literal">SentHeartbeat</code></th>
            <td>12</td>
            <td><code class="literal">INFO</code></td>
            <td>ハートビートを送信しました</td>
          </tr><tr>
            <th scope="row"><code class="literal">CreateLogBytes</code></th>
            <td>11</td>
            <td><code class="literal">INFO</code></td>
            <td>ログの作成: ログ部分、ログファイル、MB 単位のサイズ</td>
          </tr><tr>
            <th scope="row"><code class="literal">InfoEvent</code></th>
            <td>2</td>
            <td><code class="literal">INFO</code></td>
            <td>一般情報イベント</td>
          </tr><tr>
            <th scope="row"><code class="literal">EventBufferStatus</code></th>
            <td>7</td>
            <td><code class="literal">INFO</code></td>
            <td>イベントバッファーステータス</td>
          </tr><tr>
            <th scope="row"><code class="literal">EventBufferStatus2</code></th>
            <td>7</td>
            <td><code class="literal">INFO</code></td>
            <td>イベントバッファステータス情報の改善</td>
          </tr></tbody></table></div></div><br class="table-break"><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
          <code class="literal">SentHeartbeat</code> イベントは、NDB Cluster が <code class="literal">VM_TRACE</code> を有効にしてコンパイルされた場合にのみ使用できます。
        </p></div><h5><a name="idm45563211586512"></a>SINGLEUSER イベント</h5><a class="indexterm" name="idm45563211585792"></a><a class="indexterm" name="idm45563211583728"></a><p>
        これらのイベントは、シングルユーザーモードの開始と終了に関連するものです。
      </p><div class="table"><a name="idm45563211581648"></a><p class="title"><b>表 23.62 シングルユーザーモードに関連するイベント</b></p><div class="table-contents"><table><col style="width: 35%"><col style="width: 10%"><col style="width: 10%"><col style="width: 45%"><thead><tr>
            <th scope="col">イベント</th>
            <th scope="col">優先度</th>
            <th scope="col">重大度レベル</th>
            <th scope="col">説明</th>
          </tr></thead><tbody><tr>
            <th scope="row"><code class="literal">SingleUser</code></th>
            <td>7</td>
            <td><code class="literal">INFO</code></td>
            <td>シングルユーザーモードを開始または終了しています</td>
          </tr></tbody></table></div></div><br class="table-break"><h5><a name="idm45563211566992"></a>BACKUP イベント</h5><a class="indexterm" name="idm45563211566288"></a><a class="indexterm" name="idm45563211564240"></a><p>
        これらのイベントは、作成またはリストアされるバックアップに関する情報を提供します。
      </p><div class="table"><a name="idm45563211562160"></a><p class="title"><b>表 23.63 バックアップイベント</b></p><div class="table-contents"><table><col style="width: 35%"><col style="width: 10%"><col style="width: 10%"><col style="width: 45%"><thead><tr>
            <th scope="col">イベント</th>
            <th scope="col">優先度</th>
            <th scope="col">重大度レベル</th>
            <th scope="col">説明</th>
          </tr></thead><tbody><tr>
            <th scope="row"><code class="literal">BackupStarted</code></th>
            <td>7</td>
            <td><code class="literal">INFO</code></td>
            <td>バックアップが開始されました</td>
          </tr><tr>
            <th scope="row"><code class="literal">BackupStatus</code></th>
            <td>7</td>
            <td><code class="literal">INFO</code></td>
            <td>バックアップのステータス</td>
          </tr><tr>
            <th scope="row"><code class="literal">BackupCompleted</code></th>
            <td>7</td>
            <td><code class="literal">INFO</code></td>
            <td>バックアップが完了しました</td>
          </tr><tr>
            <th scope="row"><code class="literal">BackupFailedToStart</code></th>
            <td>7</td>
            <td><code class="literal">ALERT</code></td>
            <td>バックアップの開始に失敗しました</td>
          </tr><tr>
            <th scope="row"><code class="literal">BackupAborted</code></th>
            <td>7</td>
            <td><code class="literal">ALERT</code></td>
            <td>バックアップがユーザーによって中止されました</td>
          </tr><tr>
            <th scope="row"><code class="literal">RestoreStarted</code></th>
            <td>7</td>
            <td><code class="literal">INFO</code></td>
            <td>バックアップからのリストアが開始されました</td>
          </tr><tr>
            <th scope="row"><code class="literal">RestoreMetaData</code></th>
            <td>7</td>
            <td><code class="literal">INFO</code></td>
            <td>メタデータをリストアしています</td>
          </tr><tr>
            <th scope="row"><code class="literal">RestoreData</code></th>
            <td>7</td>
            <td><code class="literal">INFO</code></td>
            <td>データをリストアしています</td>
          </tr><tr>
            <th scope="row"><code class="literal">RestoreLog</code></th>
            <td>7</td>
            <td><code class="literal">INFO</code></td>
            <td>ログファイルをリストアしています</td>
          </tr><tr>
            <th scope="row"><code class="literal">RestoreCompleted</code></th>
            <td>7</td>
            <td><code class="literal">INFO</code></td>
            <td>バックアップからのリストアが完了しました</td>
          </tr><tr>
            <th scope="row"><code class="literal">SavedEvent</code></th>
            <td>7</td>
            <td><code class="literal">INFO</code></td>
            <td>イベントが保存されました</td>
          </tr></tbody></table></div></div><br class="table-break"></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-log-statistics"></a>23.5.3.3 NDB Cluster 管理クライアントでの CLUSTERLOG STATISTICS の使用</h4></div></div></div><a class="indexterm" name="idm45563211496240"></a><a class="indexterm" name="idm45563211494080"></a><a class="indexterm" name="idm45563211492624"></a><a class="indexterm" name="idm45563211490592"></a><a class="indexterm" name="idm45563211488560"></a><a class="indexterm" name="idm45563211486464"></a><p>
        <code class="literal">NDB</code> 管理クライアントの <code class="literal">CLUSTERLOG STATISTICS</code> コマンドは、その出力に多くの有用な統計を提供できます。 クラスタの状態に関する情報を提供するカウンタは、トランザクションコーディネータ (TC) およびローカルクエリーハンドラ (LQH) によって 5 秒のレポート間隔で更新され、クラスタログに書き込まれます。 
      </p><p><b>トランザクションコーディネータの統計. </b>
          各トランザクションには、1 つのトランザクションコーディネータがあり、それは次の方法のいずれかによって選択されます。
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            ラウンドロビン方式で
          </p></li><li class="listitem"><p>
            通信の近さによって
          </p></li><li class="listitem"><p>
            トランザクションの開始時にデータ配置ヒントを指定
          </p></li></ul></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
          <code class="literal">ndb_optimized_node_selection</code> システム変数を使用すると、特定の SQL ノードから起動されたトランザクションに使用される TC の選択方法を判断できます。
        </p></div><p>
        同じトランザクション内の操作ではすべて、同じトランザクションコーディネータが使用され、次のような統計がレポートされます。
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><b>Trans count. </b>
              これは、この TC をトランザクションコーディネータとして使用して、最後の期間で開始されたトランザクション数です。 これらのトランザクションのいずれかは、レポート期間の最後でコミットされた、中止された、または未コミットのままの状態になっている可能性があります。 
            </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
              トランザクションは TC 間で移行しません。
            </p></div></li><li class="listitem"><p><b>Commit count. </b>
              これは、最後のレポート期間でコミットされた、この TC をトランザクションコーディネータとして使用したトランザクション数です。 このレポート期間でコミットされた一部のトランザクションは、前のレポート期間で開始された可能性があるため、<code class="literal">Commit count</code> が <code class="literal">Trans count</code> よりも大きくなる可能性もあります。 
            </p></li><li class="listitem"><p><b>Read count. </b>
              これは、最後のレポート期間で開始された、この TC をトランザクションコーディネータとして使用した主キーの読み取り操作 (単純な読み取りを含む) 数です。 このカウントには、一意のインデックス操作の一部として実行される読み取りも含まれます。 一意のインデックス読み取り操作では、2 つの主キー読み取り操作 (非表示の一意のインデックステーブルに対して 1 つ、および読み取りが行われるテーブルに対して 1 つ) が発生します。 
            </p></li><li class="listitem"><p><b>Simple read count. </b>
              これは、最後のレポート期間で開始された、この TC をトランザクションコーディネータとして使用した単純な読み取り操作数です。
            </p></li><li class="listitem"><p><b>Write count. </b>
              これは、最後のレポート期間で開始された、この TC をトランザクションコーディネータとして使用した主キーの書き込み操作数です。 これには、一意のインデックス操作の一部として実行される書き込みに加えて、すべての挿入、更新、書き込み、および削除も含まれます。 
            </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
              一意のインデックスの更新操作では、インデックステーブルおよびベーステーブルで、複数の PK 読み取りおよび書き込み操作が発生する可能性があります。
            </p></div></li><li class="listitem"><p><b>AttrInfoCount. </b>
              これは、この TC をトランザクションコーディネータとして使用した主キー操作の最後のレポート期間で受信された 32 ビットのデータ語の数です。 読み取りの場合、これはリクエストされたカラムの数に比例します。 挿入および更新の場合、これは書き込まれたカラムの数、およびそれらのデータのサイズに比例します。 削除操作の場合、これは通常ゼロです。 
            </p><p>
            一意のインデックス操作では、複数の PK 操作が発生するため、このカウントが増加します。 ただし、ここでは、PK 操作自体を記述するために送信されたデータ語、および送信されたキー情報はカウントされ<span class="emphasis"><em>ません</em></span>。 スキャン用に読み取られるカラムを記述するため、または ScanFilters を記述するために送信された属性情報も、<code class="literal">AttrInfoCount</code> ではカウントされません。 
          </p></li><li class="listitem"><p><b>Concurrent Operations. </b>
              これは、最後のレポート期間中に開始されたが完了しなかった、この TC をトランザクションコーディネータとして使用した主キーまたはスキャン操作数です。 このカウンタは、操作が開始されるとインクリメントされ、操作が完了するとデクリメントされます。これは、トランザクションのコミット後に行われます。 このカウンタは失敗した操作だけでなく、ダーティー読み取りおよび書き込みでもデクリメントされます。 
            </p><p>
            <code class="literal">Concurrent Operations</code> に指定可能な最大値は、TC ブロックでサポートできる操作の最大数です。現在、これは <code class="literal">(2 * MaxNoOfConcurrentOperations) + 16 + MaxNoOfConcurrentTransactions</code> です。 (これらの構成パラメータについての詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndbd-definition" title="23.3.3.6 NDB Cluster データノードの定義">セクション23.3.3.6「NDB Cluster データノードの定義」</a>の「<em class="citetitle">トランザクションパラメータ</em>」セクションを参照してください。) 
          </p></li><li class="listitem"><p><b>Abort count. </b>
              これは、最後のレポート期間中に中止された、この TC をトランザクションコーディネータとして使用したトランザクション数です。 最後のレポート期間で中止された一部のトランザクションは、前のレポート期間で開始された可能性があるため、<code class="literal">Abort count</code> が <code class="literal">Trans count</code> よりも大きくなる可能性もあります。 
            </p></li><li class="listitem"><p><b>Scans. </b>
              これは、最後のレポート期間中に開始された、この TC をトランザクションコーディネータとして使用したテーブルスキャン数です。 これには、範囲スキャン (つまり、順序付きインデックススキャン) は含まれません。 
            </p></li><li class="listitem"><p><b>Range scans. </b>
              これは、最後のレポート期間で開始された、この TC をトランザクションコーディネータとして使用した順序付きインデックススキャン数です。
            </p></li><li class="listitem"><p><b>ローカル読取り. </b>
              これは、レコードのプライマリフラグメントレプリカも保持するノードでトランザクションコーディネータを使用して実行される主キー読取り操作の数です。 この数は、<code class="literal">ndbinfo.counters</code> テーブルの <code class="literal">LOCAL_READS</code> カウンタからも取得できます。 
            </p></li><li class="listitem"><p><b>ローカル書込み. </b>
              これには、レコードのプライマリフラグメントレプリカも保持するノードでトランザクションコーディネータを使用して実行された主キー読取り操作の数が含まれます。 この数は、<code class="literal">ndbinfo.counters</code> テーブルの <code class="literal">LOCAL_WRITES</code> カウンタからも取得できます。 
            </p></li></ul></div><p><b>ローカルクエリーハンドラの統計 (操作). </b>
          ローカルクエリーハンドラブロックごとに、1 つのクラスタイベント (つまり、データノードプロセスごとに 1 つずつ) があります。 操作は、それらが操作しているデータが存在する LQH に記録されます。 
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
          単一のトランザクションが複数の LQH ブロックに格納されたデータを操作する場合もあります。
        </p></div><p>
        <code class="literal">Operations</code> 統計には、最後のレポート期間で、この LQH ブロックによって実行されたローカル操作数が表示され、すべてのタイプの読み取りおよび書き込み操作 (挿入、更新、書き込み、および削除の操作) が含まれます。 これには、書き込みをレプリケートするために使用される操作も含まれます。 たとえば、2 つのフラグメントレプリカを持つクラスタでは、プライマリフラグメントレプリカへの書込みはプライマリ LQH に記録され、バックアップへの書込みはバックアップ LQH に記録されます。 一意のキー操作では、複数のローカル操作が発生する可能性があります。ただし、これには、テーブルスキャンまたは順序付きインデックススキャンの結果として発生するローカル操作は<span class="emphasis"><em>含まれず</em></span>、カウントもされません。 
      </p><p><b>プロセススケジューラの統計. </b>
          <a class="indexterm" name="idm45563211425552"></a>各 <span class="command"><strong>ndbd</strong></span> プロセスには、トランザクションコーディネータおよびローカルクエリーハンドラによって報告される統計に加えて、NDB Cluster のパフォーマンスに関連する有用なメトリックも提供するスケジューラがあります。 このスケジューラは、無限ループ時に実行されます。各ループ中に、スケジューラは次のタスクを実行します。 
        </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
            ソケットからジョブバッファーに受信メッセージを読み込みます。
          </p></li><li class="listitem"><p>
            時間指定のメッセージが実行されたかどうかをチェックします。実行された場合は、これらのメッセージもジョブバッファーに配置します。
          </p></li><li class="listitem"><p>
            ジョブバッファー内のメッセージを (ループ内で) 実行します。
          </p></li><li class="listitem"><p>
            ジョブバッファー内のメッセージを実行することで生成された配信されるメッセージを送信します。
          </p></li><li class="listitem"><p>
            新しい受信メッセージを待機します。
          </p></li></ol></div><p>
        プロセススケジューラの統計には、次の情報が含まれています。
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><b>Mean Loop Counter. </b>
              これは、上記のリストの 3 番目のステップで実行されたループの数です。 TCP/IP バッファーの使用率が改善されると、この統計のサイズが増加します。 これを使用すると、新しいデータノードプロセスを追加したときにパフォーマンスの変化をモニターできます。 
            </p></li><li class="listitem"><p><b>Mean send size と Mean receive size. </b>
              これらの統計を使用すると、ノード間の書き込みと読み取りのそれぞれの効率性を測定できます。 値はバイト単位で指定されます。 値が大きいほど、送受信される 1 バイト当たりのコストが小さくなることを意味します。最大値は 64K です。 
            </p></li></ul></div><p>
        <code class="literal">NDB</code> 管理クライアントで次のコマンドを使用すると、クラスタログの統計をすべて記録できます。
      </p><pre class="programlisting">ndb_mgm&gt; <strong class="userinput"><code>ALL CLUSTERLOG STATISTICS=15</code></strong>
</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
          <code class="literal">STATISTICS</code> のしきい値を 15 に設定すると、クラスタログが非常に冗長になり、NDB Cluster 内のクラスタノードの数とアクティビティーの量に直接比例してサイズが大幅に大きくなります。
        </p></div><p>
        ロギングおよびレポートに関連する NDB Cluster 管理クライアントコマンドの詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-logging-management-commands" title="23.5.3.1 NDB Cluster ロギング管理コマンド">セクション23.5.3.1「NDB Cluster ロギング管理コマンド」</a> を参照してください。
      </p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-cluster-start-phases"></a>23.5.4 NDB Cluster 起動フェーズのサマリー</h3></div></div></div><a class="indexterm" name="idm45563211402000"></a><a class="indexterm" name="idm45563211399872"></a><p>
      このセクションでは、NDB Cluster データノードの起動時に必要な手順の簡単な概要を示します。 『<em class="citetitle"><code class="literal">NDB</code> Internals Guide</em>』の<a class="ulink" href="https://dev.mysql.com/doc/ndb-internals/en/ndb-internals-start-phases.html" target="_top">NDB Cluster Start Phases</a>では、さらに完全な情報を見つけることができます。 
    </p><p>
      これらのフェーズは、管理クライアントで <code class="literal"><em class="replaceable"><code>node_id</code></em> STATUS</code> コマンドからの出力にレポートされるものと同じです (<a class="xref" href="mysql-cluster.html#mysql-cluster-mgm-client-commands" title="23.5.1 NDB Cluster 管理クライアントのコマンド">セクション23.5.1「NDB Cluster 管理クライアントのコマンド」</a>を参照してください)。 これらの起動フェーズは、<code class="literal">ndbinfo.nodes</code> テーブルの <code class="literal">start_phase</code> カラムにもレポートされます。 
    </p><p><b>起動のタイプ. </b>
        次のリストに示すように、さまざまな起動のタイプおよびモードがあります。
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><b>初期起動. </b>
            すべてのデータノード上のクリーンなファイルシステムでクラスタが起動します。 これは、まったくはじめてクラスタが起動されるとき、または <code class="option">--initial</code> オプションを使用してすべてのデータノードが再起動されるときに発生します。 
          </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
            <code class="option">--initial</code> を使用してノードを再起動すると、ディスクデータファイルが削除されません。
          </p></div></li><li class="listitem"><p><b>システムの再起動. </b>
            クラスタが起動し、データノードに格納されたデータを読み取ります。 これは、クラスタが使用されたあとにシャットダウンされたとき、およびクラスタが操作を中止した時点から再開することが望ましいときに発生します。 
          </p></li><li class="listitem"><p><b>ノードの再起動. </b>
            これは、クラスタ自体が実行しているときのクラスタノードのオンライン再起動です。
          </p></li><li class="listitem"><p><b>ノードの初期再起動. </b>
            これは、クリーンなファイルシステムでノードが再初期化および起動される点を除いて、ノードの再起動と同じです。
          </p></li></ul></div><p><b>設定と初期化 (フェーズ -1). </b>
        起動する前に、各データノード (<span class="command"><strong>ndbd</strong></span> プロセス) が初期化されている必要があります。 初期化は次のステップで構成されます。 
      </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
          ノード ID を取得します
        </p></li><li class="listitem"><p>
          構成データをフェッチします
        </p></li><li class="listitem"><p>
          ノード間通信で使用されるポートを割り当てます
        </p></li><li class="listitem"><p>
          構成ファイルから取得された設定に従って、メモリーを割り当てます
        </p></li></ol></div><p>
      データノードまたは SQL ノードがはじめて管理ノードに接続すると、クラスタノード ID を予約します。 ほかのノードによって同じノード ID が割り当てられないように、この ID は、ノードからクラスタへの接続が完了し、このノードが接続されたことが少なくとも 1 つの <span class="command"><strong>ndbd</strong></span> でレポートされるまで保持されます。 このようなノード ID の保持は、該当するノードと <span class="command"><strong>ndb_mgmd</strong></span> 間の接続で保護されます。 
    </p><p>
      各データノードが初期化されたら、クラスタの起動プロセスに進むことができます。 このプロセス中にクラスタが進む段階を次に示します。 
    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><b>フェーズ 0. </b>
            <code class="literal">NDBFS</code> および <code class="literal">NDBCNTR</code> ブロックが起動します。 <code class="option">--initial</code> オプションを付けて起動されたデータノード上で、データノードファイルシステムがクリアされます。 
          </p></li><li class="listitem"><p><b>フェーズ 1. </b>
            この段階では、残りのすべての <code class="literal">NDB</code> カーネルブロックが起動されます。 NDB Cluster 接続が設定され、ブロック間通信が確立され、ハートビートが開始されます。 ノードの再起動の場合は、API ノードの接続もチェックされます。 
          </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
            フェーズ 1 で 1 つ以上のノードがハングアップし、フェーズ 2 で残りの 1 つまたは複数のノードがハングアップするときは、多くの場合にネットワークの問題を示しています。 このような問題が発生する原因の 1 つとして、複数のネットワークインタフェースを持つ 1 つ以上のクラスタホストが考えられます。 このような状況が発生する問題のもう 1 つの一般的な原因は、クラスタノード間の通信に必要な TCP/IP ポートのブロックです。 後者では、これは多くの場合に、ファイアウォールが誤って構成されているためです。 
          </p></div></li><li class="listitem"><p><b>フェーズ 2. </b>
            <code class="literal">NDBCNTR</code> カーネルブロックは、既存のすべてのノードの状態をチェックします。 マスターノードが選択され、クラスタスキーマファイルが初期化されます。 
          </p></li><li class="listitem"><p><b>フェーズ 3. </b>
            <code class="literal">DBLQH</code> および <code class="literal">DBTC</code> カーネルブロックは、それらの間の通信を設定します。 起動タイプが特定されます。これが再起動の場合、<code class="literal">DBDIH</code> ブロックは再起動を実行するための権限を取得します。 
          </p></li><li class="listitem"><p><b>フェーズ 4. </b>
            初期起動またはノードの初期再起動の場合、Redo ログファイルが作成されます。 これらのファイルの数は、<code class="literal">NoOfFragmentLogFiles</code> に等しいです。 
          </p><p>
          システムの再起動の場合:
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
              1 つまたは複数のスキーマを読み取ります。
            </p></li><li class="listitem"><p>
              ローカルチェックポイントからデータを読み取ります。
            </p></li><li class="listitem"><p>
              最新のリストア可能なグローバルチェックポイントに達するまで、すべての Redo 情報を適用します。
            </p></li></ul></div><p>
          ノードの再起動の場合、Redo ログの末尾を検索します。
        </p></li><li class="listitem"><p><b>フェーズ 5. </b>
            このフェーズ中に、データノード起動のデータベース関連部分のほとんどが実行されます。 初期起動またはシステムの再起動の場合、ローカルチェックポイントに続いて、グローバルチェックポイントが実行されます。 このフェーズ中に、メモリー使用率の定期的なチェックが開始され、必要なノードのテイクオーバーが実行されます。 
          </p></li><li class="listitem"><p><b>フェーズ 6. </b>
            このフェーズでは、ノードグループが定義および設定されます。
          </p></li><li class="listitem"><p><b>フェーズ 7. </b>
            アービトレータノードが選択され、動作が開始されます。 次のバックアップ ID、およびバックアップディスクの書き込み速度が設定されます。 この起動フェーズに到達したノードは、<code class="literal">Started</code> とマークされます。 この時点で、API ノード (SQL ノードを含む) はクラスタに接続できます。 
          </p></li><li class="listitem"><p><b>フェーズ 8. </b>
            これがシステムの再起動の場合、すべてのインデックスが (<code class="literal">DBDIH</code> によって) 再構築されます。
          </p></li><li class="listitem"><p><b>フェーズ 9. </b>
            ノード内部の起動変数がリセットされます。
          </p></li><li class="listitem"><p><b>フェーズ 100 (廃止). </b>
            以前は、ノードの再起動またはノードの初期再起動のこの時点で、API ノードはノードに接続し、イベントの受信を開始できました。 現在は、このフェーズが空になっています。 
          </p></li><li class="listitem"><p><b>フェーズ 101. </b>
            ノードの再起動またはノードの初期再起動のこの時点で、クラスタに参加するノードにイベント配信が渡されます。 新たに参加したノードは、そのプライマリデータをサブスクライバに配信する責任を引き受けます。 このフェーズは、<span class="firstterm"><code class="literal">SUMA</code> ハンドオーバーフェーズ</span>とも呼ばれます。 
          </p></li></ul></div><p>
      初期起動またはシステムの再起動の場合、このプロセスが完了すると、トランザクションの処理が有効になります。 ノードの再起動またはノードの初期再起動の場合、起動プロセスが完了したことは、現在ノードがトランザクションコーディネータとして動作している可能性があることを意味します。 
    </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-cluster-rolling-restart"></a>23.5.5 NDB Cluster のローリング再起動の実行</h3></div></div></div><a class="indexterm" name="idm45563211321888"></a><a class="indexterm" name="idm45563211319680"></a><a class="indexterm" name="idm45563211318208"></a><a class="indexterm" name="idm45563211316288"></a><a class="indexterm" name="idm45563211314256"></a><p>
      このセクションでは、NDB Cluster インストールの<span class="firstterm">ローリング再起動</span>を実行する方法について説明します。これは、クラスタ自体が動作したままになるように、各ノードを順番に停止して起動 (または再起動) するためです。 これは多くの場合に、<span class="firstterm">ローリングアップグレード</span>または<span class="firstterm">ローリングダウングレード</span>の一部として実行されます。ここでは、クラスタの高可用性が必須であり、クラスタ全体の停止時間は許可されません。 一般に、ここで提供しているアップグレードについての情報は、ダウングレードにも適用されます。 
    </p><p>
      ローリング再起動が望ましい理由は、いくつかあります。 次のいくつかの段落で、これらについて説明します。 
    </p><p><b>構成の変更. </b><a class="indexterm" name="idm45563211307936"></a>
        クラスタへの SQL ノードの追加や、構成パラメータの新しい値への設定などのクラスタ構成の変更を行うため。
      </p><p><b>NDB Cluster ソフトウェアアップグレードまたはダウングレード. </b>
        NDB Cluster ソフトウェアの新しいバージョンにクラスタをアップグレードする (または古いバージョンにダウングレードする)。 これは通常、古いバージョンの NDB Cluster に戻す場合、<span class="quote">「<span class="quote">「ローリングアップグレード」</span>」</span> (または<span class="quote">「<span class="quote">「ローリングダウングレード」</span>」</span>) と呼ばれます。 
      </p><p><b>ノードホスト上での変更. </b>
        1 つまたは複数の NDB Cluster ノードプロセスが実行されているハードウェアまたはオペレーティングシステムに変更を加えるため。
      </p><p><b>システムのリセット (クラスタのリセット). </b><a class="indexterm" name="idm45563211300000"></a>
        望ましくない状態に達したために、クラスタをリセットするため。 このような場合は、多くの場合に 1 つ以上のデータノードのデータおよびメタデータを再ロードすることが望ましいと考えられます。 これは、次の 3 つの方法のいずれかで実行できます。 
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          <code class="option">--initial</code> オプションを使用して各データノードプロセス (<span class="command"><strong>ndbd</strong></span> または場合によっては <span class="command"><strong>ndbmtd</strong></span>) を起動します。これにより、データノードはそのファイルシステムを強制的にクリアし、ほかのデータノードからすべての NDB Cluster データおよびメタデータをリロードします。
        </p><p>
          NDB 8.0.21 以降では、これらのオブジェクトに関連付けられたすべてのディスクデータオブジェクトおよびファイルも強制的に削除されます。
        </p></li><li class="listitem"><p>
          再起動を実行する前に、<span class="command"><strong>ndb_mgm</strong></span> クライアントの <code class="literal">START BACKUP</code> コマンドを使用してバックアップを作成します。 アップグレード後に、<span class="command"><strong>ndb_restore</strong></span> を使用して、1 つまたは複数のノードをリストアします。 
        </p><p>
          詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-backup" title="23.5.8 NDB Cluster のオンラインバックアップ">セクション23.5.8「NDB Cluster のオンラインバックアップ」</a>および<a class="xref" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="23.4.23 ndb_restore — NDB Cluster バックアップの復元">セクション23.4.23「ndb_restore — NDB Cluster バックアップの復元」</a>を参照してください。
        </p></li><li class="listitem"><p>
          <span class="command"><strong>mysqldump</strong></span> を使用して、アップグレード前にバックアップを作成します。その後、<code class="literal">LOAD DATA</code> を使用してダンプをリストアします。
        </p></li></ul></div><p><b>リソースのリカバリ. </b><a class="indexterm" name="idm45563211283440"></a>
        他の「NDB Cluster」テーブルで再利用するために、<code class="literal">INSERT</code> および <code class="literal">DELETE</code> の連続した操作によって以前にテーブルに割り当てられたメモリーを解放します。
      </p><p>
      ローリング再起動を実行するプロセスは、次のように一般化できます。
    </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
          すべてのクラスタ管理ノード (<span class="command"><strong>ndb_mgmd</strong></span> プロセス) を停止し、再構成し、再起動します。 (<a class="xref" href="mysql-cluster.html#mysql-cluster-rolling-restart-multiple-ndb-mgmd" title="複数の管理サーバーでのローリング再起動">複数の管理サーバーでのローリング再起動</a>を参照してください。) 
        </p></li><li class="listitem"><p>
          各クラスタデータノード (<span class="command"><strong>ndbd</strong></span> プロセス) を順番に停止し、再構成し、再起動します。
        </p><p>
          一部のノード構成パラメータは、前のステップに従って <span class="command"><strong>ndb_mgm</strong></span> クライアントの各データノードに対して <code class="literal">RESTART</code> を発行することで更新できます。 その他のパラメータでは、管理クライアントの <code class="literal">STOP</code> コマンドを使用してデータノードを完全に停止してから、必要に応じて <span class="command"><strong>ndbd</strong></span> または <span class="command"><strong>ndbmtd</strong></span> 実行可能ファイルを呼び出してシステムシェルから再度起動する必要があります。 (ほとんどの Unix システムでは、<span class="command"><strong>kill</strong></span> などのシェルコマンドを使用してデータノードのプロセスを停止することもできますが、<code class="literal">STOP</code> コマンドが推奨され、通常はより簡単です。) 
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
            Windows では、<span class="command"><strong>SC STOP</strong></span> および <span class="command"><strong>SC START</strong></span> コマンド、<code class="literal">NET STOP</code> および <code class="literal">NET START</code> コマンド、または Windows サービスマネージャーを使用して、Windows サービスとしてインストールされているノードを停止および起動することもできます (<a class="xref" href="mysql-cluster.html#mysql-cluster-install-windows-service" title="23.2.2.4 NDB Cluster プロセスを Windows サービスとしてインストール">セクション23.2.2.4「NDB Cluster プロセスを Windows サービスとしてインストール」</a> を参照)。
          </p></div><p>
          必要な再起動のタイプは、各ノード構成パラメータのドキュメントに示されています。 <a class="xref" href="mysql-cluster.html#mysql-cluster-config-file" title="23.3.3 NDB Cluster 構成ファイル">セクション23.3.3「NDB Cluster 構成ファイル」</a>を参照してください。 
        </p></li><li class="listitem"><p>
          各クラスタ SQL ノード (<span class="command"><strong>mysqld</strong></span> プロセス) を順番に停止し、再構成し、再起動します。
        </p></li></ol></div><a class="indexterm" name="idm45563211257088"></a><p>
      NDB Cluster は、ノードをアップグレードするためにある程度柔軟な順序をサポートしています。 NDB Cluster をアップグレードするときは、管理ノード、データノード、またはその両方をアップグレードする前に、API ノード (SQL ノードを含む) をアップグレードできます。 言い換えると、API ノードおよび SQL ノードを任意の順序でアップグレードすることが許可されています。 これには、次のような条件が課せられます。 
    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          この機能は、オンラインアップグレードの一部として使用することのみを目的としています。 異なる NDB Cluster リリースからのノードバイナリの混在は、本番設定での継続的な長期的な使用を目的としておらず、サポートされていません。 
        </p></li><li class="listitem"><p>
          データノードをアップグレードする前に、すべての管理ノードをアップグレードする必要があります。 このことは、クラスタの API ノードおよび SQL ノードをアップグレードする順序に関係なく当てはまります。 
        </p></li><li class="listitem"><p>
          すべての管理ノードおよびデータノードがアップグレードされるまで、<span class="quote">「<span class="quote">新しい</span>」</span>バージョンに固有の機能は使用しないでください。
        </p><p>
          このことは、NDB エンジンバージョンの変更に加えて、適用される可能性のある任意の MySQL サーバーバージョンの変更にも適用されます。したがって、アップグレードを計画する際には、これを考慮に入れることを忘れないでください。 (これは、NDB Cluster のオンラインアップグレード全般に当てはまります。) 
        </p></li></ul></div><p>
      どの API ノードでも、ノードの再起動時にスキーマ操作 (データ定義ステートメントなど) を実行できません。 この制限の一部であるため、オンラインでのアップグレードまたはダウングレード中にスキーマ操作もサポートされません。 
    </p><p><a name="mysql-cluster-rolling-restart-multiple-ndb-mgmd"></a><b>複数の管理サーバーでのローリング再起動. </b>
        <a class="indexterm" name="idm45563211245952"></a> <a class="indexterm" name="idm45563211243792"></a>複数の管理ノードを持つ NDB Cluster のローリング再起動を実行する場合、<span class="command"><strong>ndb_mgmd</strong></span> はほかの管理ノードが実行されているかどうかを確認し、実行されている場合はそのノード構成データを使用しようとすることに注意してください。 これが発生することを回避し、<span class="command"><strong>ndb_mgmd</strong></span> にその構成ファイルを強制的に再読み取りさせるには、次のステップを実行します。 
      </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
          すべての NDB Cluster <span class="command"><strong>ndb_mgmd</strong></span> プロセスを停止します。
        </p></li><li class="listitem"><p>
          すべての <code class="filename">config.ini</code> ファイルを更新します。
        </p></li><li class="listitem"><p>
          必要に応じて、<code class="option">--reload</code>、<code class="option">--initial</code>、またはその両方のオプションを付けて単一の <span class="command"><strong>ndb_mgmd</strong></span> を起動します。
        </p></li><li class="listitem"><p>
          最初の <span class="command"><strong>ndb_mgmd</strong></span> を <code class="option">--initial</code> オプションを付けて起動した場合は、残りの <span class="command"><strong>ndb_mgmd</strong></span> プロセスもすべて <code class="option">--initial</code> を使用して起動する必要があります。
        </p><p>
          最初の <span class="command"><strong>ndb_mgmd</strong></span> を起動するときに使用されたその他のオプションに関係なく、最初の <span class="command"><strong>ndb_mgmd</strong></span> プロセスのあとに、<code class="option">--reload</code> を使用して残りのプロセスを再起動しないようにしてください。
        </p></li><li class="listitem"><p>
          通常どおりに、データノードおよび API ノードのローリング再起動を完了します。
        </p></li></ol></div><p>
      ローリング再起動を実行してクラスタの構成を更新する際に、<code class="literal">ndbinfo.nodes</code> テーブルの <code class="literal">config_generation</code> カラムを使用して、新しい構成で正常に再起動されたデータノードを追跡できます。 <a class="xref" href="mysql-cluster.html#mysql-cluster-ndbinfo-nodes" title="23.5.14.38 ndbinfo nodes テーブル">セクション23.5.14.38「ndbinfo nodes テーブル」</a>を参照してください。 
    </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-cluster-single-user-mode"></a>23.5.6 NDB Cluster のシングルユーザーモード</h3></div></div></div><a class="indexterm" name="idm45563211219536"></a><a class="indexterm" name="idm45563211217408"></a><p>
      <span class="firstterm">シングルユーザーモード</span>により、データベース管理者はデータベースシステムへのアクセスを、MySQL サーバー (SQL ノード) や <span class="command"><strong>ndb_restore</strong></span> のインスタンスなど単一の API ノードに制限できます。 シングルユーザーモードに入ると、その他のすべての API ノードへの接続が正常に閉じられ、実行中のトランザクションがすべて中止されます。 新しいトランザクションの開始は許可されません。 
    </p><p>
      クラスタがシングルユーザーモードに入ると、指定された API ノードにのみデータベースへのアクセス権が付与されます。
    </p><p>
      <span class="command"><strong>ndb_mgm</strong></span> クライアントで <code class="literal">ALL STATUS</code> コマンドを使用すると、クラスタがシングルユーザーモードに入ったタイミングを確認できます。 また、<code class="literal">ndbinfo.nodes</code> テーブルの <code class="literal">status</code> カラムをチェックすることもできます (詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndbinfo-nodes" title="23.5.14.38 ndbinfo nodes テーブル">セクション23.5.14.38「ndbinfo nodes テーブル」</a>を参照してください)。 
    </p><p>
      例:
    </p><pre class="programlisting">ndb_mgm&gt; <strong class="userinput"><code>ENTER SINGLE USER MODE 5</code></strong>
</pre><p>
      このコマンドが実行され、クラスタがシングルユーザーモードに入ると、ノード ID が <code class="literal">5</code> の API ノードがクラスタのみに許可されたユーザーになります。
    </p><p>
      前述のコマンドで指定したノードは API ノードである必要があります。他のタイプのノードを指定しようとすると拒否されます。
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
        前述のコマンドが呼び出されると、指定されたノードで実行されているすべてのトランザクションが中止され、接続が閉じられるため、サーバーを再起動する必要があります。
      </p></div><p>
      コマンド <code class="literal">EXIT SINGLE USER MODE</code> は、クラスタデータノードの状態をシングルユーザーモードから通常モードに変更します。 接続を待機している (つまり、クラスタの準備ができ、使用可能になるまで待機している) MySQL サーバーなどの API ノードは、接続が再度許可されます。 単一ユーザーノードとして指定された API ノードは、状態の変更中および変更後も引き続き実行されます (まだ接続されている場合)。 
    </p><p>
      例:
    </p><pre class="programlisting">ndb_mgm&gt; <strong class="userinput"><code>EXIT SINGLE USER MODE</code></strong>
</pre><a class="indexterm" name="idm45563211198624"></a><p>
      シングルユーザーモードでの実行時にノードの障害を処理する際には、次の 2 つの方法が推奨されています。
    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          方法 1:
        </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
              シングルユーザーモードのトランザクションをすべて終了します
            </p></li><li class="listitem"><p>
              <code class="literal">EXIT SINGLE USER MODE</code> コマンドを発行します
            </p></li><li class="listitem"><p>
              クラスタのデータノードを再起動します
            </p></li></ol></div></li><li class="listitem"><p>
          方法 2:
        </p><p>
          シングルユーザーモードに入る前に、ストレージノードを再起動します。
        </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-cluster-online-add-node"></a>23.5.7 NDB Cluster データノードのオンラインでの追加</h3></div></div></div><div class="toc"><dl class="toc"><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-online-add-node-remarks">23.5.7.1 NDB Cluster データノードのオンラインでの追加: 一般的な問題</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-online-add-node-basics">23.5.7.2 NDB Cluster データノードのオンラインでの追加: 基本手順</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-online-add-node-example">23.5.7.3 NDB Cluster データノードのオンラインでの追加: 詳細な例</a></span></dt></dl></div><p>
      このセクションでは、NDB Cluster データノード<span class="quote">「<span class="quote">「オンライン」</span>」</span>を追加する方法について説明します。つまり、クラスタを完全にシャットダウンし、プロセスの一環として再起動する必要はありません。
    </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">重要</div><p>
        現在、新しいノードグループの一部として NDB Cluster に新しいデータノードを追加する必要があります。 また、フラグメントレプリカの数 (またはノードグループごとのノード数) をオンラインに変更することはできません。 
      </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-online-add-node-remarks"></a>23.5.7.1 NDB Cluster データノードのオンラインでの追加: 一般的な問題</h4></div></div></div><p>
        このセクションでは、NDB Cluster ノードをオンラインで追加する際の動作および現在の制限に関する一般的な情報を提供します。
      </p><p><b>データの再配布. </b>
          新しいノードをオンラインで追加する機能には、<code class="literal">ALTER TABLE ... REORGANIZE PARTITION</code> ステートメントを使用して、新しいノードを含むすべてのデータノードに分散されるように <code class="literal">NDBCLUSTER</code> テーブルのデータおよびインデックスを再編成する手段が含まれます。 インメモリーとディスクデータの両方のテーブルの再編成がサポートされています。 現在、この再配布には一意のインデックスが含まれていません (順序付きインデックスのみが再配布されます)。 
        </p><p>
        新しいデータノードが追加される前にすでに存在していた <code class="literal">NDBCLUSTER</code> テーブルの再配布は、自動的に実行されませんが、<span class="command"><strong>mysql</strong></span> または別の MySQL クライアントアプリケーションで単純な SQL ステートメントを使用して実現できます。 ただし、新しいノードグループが追加されたあとに作成されたテーブルに追加されたすべてのデータおよびインデックスは、すべてのクラスタデータノード (新しいノードグループの一部として追加されたものを含む) 間で自動的に配布されます。 
      </p><p><b>部分的な起動. </b>
          新しいデータノードがすべて起動されていなくても、新しいノードグループを追加できます。 また、新しいノードグループを機能低下状態のクラスタ (つまり、部分的にしか起動されていないクラスタや、1 つ以上のデータノードが実行されていないクラスタ) に追加することもできます。 後者の場合、新しいノードグループを追加する前に、クラスタで十分な数のノードが実行可能になっている必要があります。 
        </p><p><b>進行中の操作への影響. </b>
          NDB Cluster データを使用する通常の DML 操作は、新しいノードグループの作成や追加、またはテーブルの再編成によって妨げられることはありません。 ただし、テーブルの再編成と同時に DDL を実行することはできません。つまり、<code class="literal">ALTER TABLE ... REORGANIZE PARTITION</code> ステートメントの実行中は、ほかの DDL ステートメントを発行できません。 さらに、<code class="literal">ALTER TABLE ... REORGANIZE PARTITION</code> の実行 (またはその他の DDL ステートメントの実行) 中は、クラスタデータノードを再起動できません。 
        </p><p><b>エラー処理. </b>
          ノードグループの作成中およびテーブルの再編成中のデータノードの障害は、次のテーブルに示すように処理されます:
        </p><div class="table"><a name="idm45563211167792"></a><p class="title"><b>表 23.64 ノードグループの作成およびテーブルの再編成中のデータノード障害処理</b></p><div class="table-contents"><table><col style="width: 25%"><col style="width: 25%"><col style="width: 25%"><col style="width: 25%"><thead><tr>
            <th scope="col">失敗期間</th>
            <th scope="col"><span class="quote">「<span class="quote">「旧」</span>」</span>データノードで障害が発生しました</th>
            <th scope="col"><span class="quote">「<span class="quote">「新規」</span>」</span>データノードで障害が発生しました</th>
            <th scope="col">システム障害</th>
          </tr></thead><tbody><tr>
            <th scope="row">ノードグループの作成</th>
            <td><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><b>マスター以外のノードでエラーが発生した場合: </b>
                      ノードグループの作成は常にロールフォワードされます。
                    </p></li><li class="listitem"><p><b>マスターでエラーが発生した場合: </b></p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><b>内部コミットポイントに達した場合: </b>
                          ノードグループの作成はロールフォワードされます。
                        </p></li><li class="listitem"><p><b>内部コミットポイントにまだ達していない場合: </b>
                          ノードグループの作成はロールバックされます。
                        </p></li></ul></div></li></ul></div></td>
            <td><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><b>マスター以外のノードでエラーが発生した場合: </b>
                      ノードグループの作成は常にロールフォワードされます。
                    </p></li><li class="listitem"><p><b>マスターでエラーが発生した場合: </b></p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><b>内部コミットポイントに達した場合: </b>
                          ノードグループの作成はロールフォワードされます。
                        </p></li><li class="listitem"><p><b>内部コミットポイントにまだ達していない場合: </b>
                          ノードグループの作成はロールバックされます。
                        </p></li></ul></div></li></ul></div></td>
            <td><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><b>CREATE NODEGROUP の実行が内部コミットポイントに達した場合: </b>
                      再起動時に、クラスタは新しいノードグループを含みます。 それ以外の場合は、含みません。 
                    </p></li><li class="listitem"><p><b>CREATE NODEGROUP の実行が内部コミットポイントにまだ達していない場合: </b>
                      再起動時に、クラスタは新しいノードグループを含みません。
                    </p></li></ul></div></td>
          </tr><tr>
            <th scope="row">テーブルの再編成</th>
            <td><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><b>マスター以外のノードでエラーが発生した場合: </b>
                      テーブルの再編成は常にロールフォワードされます。
                    </p></li><li class="listitem"><p><b>マスターでエラーが発生した場合: </b></p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><b>内部コミットポイントに達した場合: </b>
                          テーブルの再編成はロールフォワードされます。
                        </p></li><li class="listitem"><p><b>内部コミットポイントにまだ達していない場合: </b>
                          テーブルの再編成はロールバックされます。
                        </p></li></ul></div></li></ul></div></td>
            <td><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><b>マスター以外のノードでエラーが発生した場合: </b>
                      テーブルの再編成は常にロールフォワードされます。
                    </p></li><li class="listitem"><p><b>マスターでエラーが発生した場合: </b></p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p><b>内部コミットポイントに達した場合: </b>
                          テーブルの再編成はロールフォワードされます。
                        </p></li><li class="listitem"><p><b>内部コミットポイントにまだ達していない場合: </b>
                          テーブルの再編成はロールバックされます。
                        </p></li></ul></div></li></ul></div></td>
            <td><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><b>ALTER TABLE ... REORGANIZE PARTITION ステートメントの実行が内部コミットポイントに達した場合: </b>
                      クラスタの再起動時に、<em class="replaceable"><code>table</code></em> に属するデータおよびインデックスが<span class="quote">「<span class="quote">新しい</span>」</span>データノードを使用して配布されます。
                    </p></li><li class="listitem"><p><b>ALTER TABLE ... REORGANIZE PARTITION ステートメントの実行がまだ内部コミットポイントに達していない場合: </b>
                      クラスタの再起動時に、<em class="replaceable"><code>table</code></em> に属するデータおよびインデックスが<span class="quote">「<span class="quote">古い</span>」</span>データノードのみを使用して配布されます。
                    </p></li></ul></div></td>
          </tr></tbody></table></div></div><br class="table-break"><p><b>ノードグループの削除. </b>
          <span class="command"><strong>ndb_mgm</strong></span> クライアントは、<code class="literal">DROP NODEGROUP</code> コマンドをサポートしていますが、ノードグループ内のデータノードにどのデータも含まれていない場合にのみ削除できます。 現在、特定のデータノードまたはノードグループを<span class="quote">「<span class="quote">空にする</span>」</span>方法がないため、このコマンドは次の 2 つのケースでしか機能しません。 
        </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
            <span class="command"><strong>ndb_mgm</strong></span> クライアントで <code class="literal">CREATE NODEGROUP</code> を発行した後、<span class="command"><strong>mysql</strong></span> クライアントで <code class="literal">ALTER TABLE ... REORGANIZE PARTITION</code> ステートメントを発行する前。
          </p></li><li class="listitem"><p>
            <code class="literal">DROP TABLE</code> を使用してすべての <code class="literal">NDBCLUSTER</code> テーブルを削除したあと。
          </p><p>
            データノードには引き続きテーブルの定義が格納されるため、この目的では <code class="literal">TRUNCATE TABLE</code> は機能しません。
          </p></li></ol></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-online-add-node-basics"></a>23.5.7.2 NDB Cluster データノードのオンラインでの追加: 基本手順</h4></div></div></div><p>
        このセクションでは、NDB Cluster に新しいデータノードを追加するために必要な基本的な手順を示します。 この手順は、データノードのプロセスに <span class="command"><strong>ndbd</strong></span> バイナリと <span class="command"><strong>ndbmtd</strong></span> バイナリのどちらを使用する場合でも適用されます。 詳細な例については、<a class="xref" href="mysql-cluster.html#mysql-cluster-online-add-node-example" title="23.5.7.3 NDB Cluster データノードのオンラインでの追加: 詳細な例">セクション23.5.7.3「NDB Cluster データノードのオンラインでの追加: 詳細な例」</a>を参照してください。 
      </p><p>
        NDB Cluster がすでに実行されていると仮定すると、データノードをオンラインで追加するには、次の手順が必要です:
      </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
            追加対象のノードに対応する新しい <code class="literal">[ndbd]</code> セクションを追加して、クラスタ構成 <code class="filename">config.ini</code> ファイルを編集します。 クラスタで複数の管理サーバーが使用されている場合は、管理サーバーで使用されるすべての <code class="filename">config.ini</code> ファイルに、これらの変更を加える必要があります。 
          </p><p>
            <code class="filename">config.ini</code> ファイルに追加される新しいデータノードのノード ID が、既存のノードで使用されるノード ID と重複しないように注意する必要があります。 動的に割り当てられたノード ID を使用している API ノードがあり、それらの ID が新しいノードに使用するノード ID と一致する場合は、この手順の後半で説明するように、このような API ノードを強制的に<span class="quote">「<span class="quote">移行</span>」</span>できます。 
          </p></li><li class="listitem"><p>
            すべての NDB Cluster 管理サーバーのローリング再起動を実行します。
          </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">重要</div><p>
              新しい構成を強制的に読み取るには、すべての管理サーバーを <code class="option">--reload</code> または <code class="option">--initial</code> オプションを付けて再起動する必要があります。
            </p></div></li><li class="listitem"><p>
            すべての既存の NDB Cluster データノードのローリング再起動を実行します。 既存のデータノードを再起動するときは、<code class="option">--initial</code> を使用する必要がありません (通常は望ましくもありません)。 
          </p><p>
            新しいデータノードに割り当てるいずれかのノード ID と一致する動的に割り当てられた ID を持つ API ノードを使用している場合は、このステップでデータノードプロセスのいずれかを再起動する前に、すべての API ノード (SQL ノードを含む) を再起動する必要があります。 これにより、事前に明示的に割り当てられなかったノード ID を持つ API ノードは、このようなノード ID を放棄し、新しい ID を取得します。 
          </p></li><li class="listitem"><p>
            NDB Cluster に接続されている SQL または API ノードのローリング再起動を実行します。
          </p></li><li class="listitem"><p>
            新しいデータノードを起動します。
          </p><p>
            新しいデータノードは、任意の順序で起動できます。 またそれらは、既存のすべてのデータノードのローリング再起動が完了してから、次のステップに進むまでの間に起動されるかぎり、同時に起動することもできます。 
          </p></li><li class="listitem"><p>
            NDB Cluster 管理クライアントで 1 つまたは複数の <code class="literal">CREATE NODEGROUP</code> コマンドを実行して、新しいデータノードが属する新しいノードグループまたはノードグループを作成します。
          </p></li><li class="listitem"><p>
            新しいデータノードを含め、すべてのデータノード間でクラスタデータを再配布します。 通常、これを行うには、<code class="literal">NDBCLUSTER</code> テーブルごとに <span class="command"><strong>mysql</strong></span> クライアントで <code class="literal">ALTER TABLE ... ALGORITHM=INPLACE, REORGANIZE PARTITION</code> ステートメントを発行します。 
          </p><p>
            <span class="emphasis"><em>例外</em></span>: <code class="literal">MAX_ROWS</code> オプションを使用して作成されたテーブルの場合、このステートメントは機能しません。かわりに、<code class="literal">ALTER TABLE ... ALGORITHM=INPLACE MAX_ROWS=...</code> を使用してこのようなテーブルを再編成します。 また、<code class="literal">MAX_ROWS</code> を使用してパーティション数をこの方法で設定することは非推奨であり、かわりに <code class="literal">PARTITION_BALANCE</code> を使用する必要があります。詳細は、<a class="xref" href="sql-statements.html#create-table-ndb-table-comment-options" title="13.1.20.11 NDB_TABLE オプションの設定">セクション13.1.20.11「NDB_TABLE オプションの設定」</a> を参照してください。 
          </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
              これは、新しいノードグループを追加する時点ですでに存在しているテーブルに対してのみ実行する必要があります。 新しいノードグループが追加された後に作成されたテーブルのデータは自動的に分散されますが、新しいノードが追加される前に存在していた特定のテーブル <code class="literal">tbl</code> に追加されたデータは、そのテーブルが再編成されるまで新しいノードを使用して分散されません。 
            </p></div></li><li class="listitem"><p>
            <code class="literal">ALTER TABLE ... REORGANIZE PARTITION ALGORITHM=INPLACE</code> はパーティションを再編成しますが、<span class="quote">「<span class="quote">old</span>」</span> ノードで解放された領域は再利用しません。 これを行うには、<span class="command"><strong>mysql</strong></span> クライアントで <code class="literal">NDBCLUSTER</code> テーブルごとに <code class="literal">OPTIMIZE TABLE</code> ステートメントを発行します。 
          </p><p>
            これは、インメモリー <code class="literal">NDB</code> テーブルの可変幅カラムで使用される領域に対して機能します。 <code class="literal">OPTIMIZE TABLE</code> は、インメモリーテーブルの固定幅カラムではサポートされていません。「ディスクデータ」テーブルでもサポートされていません。 
          </p></li></ol></div><p>
        目的のノードをすべて追加してから、複数の <code class="literal">CREATE NODEGROUP</code> コマンドを連続して発行し、新しいノードグループをクラスタに追加できます。
      </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-online-add-node-example"></a>23.5.7.3 NDB Cluster データノードのオンラインでの追加: 詳細な例</h4></div></div></div><p>
        このセクションでは、単一ノードグループ内に 2 つのデータノードを持つ NDB Cluster から開始し、2 つのノードグループ内に 4 つのデータノードを持つクラスタと結論付けて、新しい NDB Cluster データノードをオンラインで追加する方法を示す詳細な例を示します。
      </p><p><b>構成の開始. </b>
          説明のために、最小限の構成とし、次の情報のみを含む <code class="filename">config.ini</code> ファイルをクラスタで使用すると仮定します。
        </p><pre class="programlisting">[ndbd default]
DataMemory = 100M
IndexMemory = 100M
NoOfReplicas = 2
DataDir = /usr/local/mysql/var/mysql-cluster

[ndbd]
Id = 1
HostName = 198.51.100.1

[ndbd]
Id = 2
HostName = 198.51.100.2

[mgm]
HostName = 198.51.100.10
Id = 10

[api]
Id=20
HostName = 198.51.100.20

[api]
Id=21
HostName = 198.51.100.21
</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
          データノード ID とその他のノード間のシーケンスにギャップを残しています。 これにより、あとで新たに追加されるデータノードに、まだ使用されていないノード ID を簡単に割り当てることができます。 
        </p></div><p>
        また、適切なコマンド行または <code class="filename">my.cnf</code> オプションを使用して、クラスタをすでに起動しており、管理クライアントで <code class="literal">SHOW</code> を実行すると、次に示すものと同様の出力が生成されると仮定します。
      </p><pre class="programlisting">-- NDB Cluster -- Management Client --
ndb_mgm&gt; <strong class="userinput"><code>SHOW</code></strong>
Connected to Management Server at: 198.51.100.10:1186
Cluster Configuration
---------------------
[ndbd(NDB)]     2 node(s)
id=1    @198.51.100.1  (8.0.23-ndb-8.0.23, Nodegroup: 0, *)
id=2    @198.51.100.2  (8.0.23-ndb-8.0.23, Nodegroup: 0)

[ndb_mgmd(MGM)] 1 node(s)
id=10   @198.51.100.10  (8.0.23-ndb-8.0.23)

[mysqld(API)]   2 node(s)
id=20   @198.51.100.20  (8.0.23-ndb-8.0.23)
id=21   @198.51.100.21  (8.0.23-ndb-8.0.23)
</pre><p>
        最後に、次に示すように作成された単一の <code class="literal">NDBCLUSTER</code> テーブルがクラスタに含まれていると仮定します。
      </p><pre class="programlisting">USE n;

CREATE TABLE ips (
    id BIGINT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    country_code CHAR(2) NOT NULL,
    type CHAR(4) NOT NULL,
    ip_address VARCHAR(15) NOT NULL,
    addresses BIGINT UNSIGNED DEFAULT NULL,
    date BIGINT UNSIGNED DEFAULT NULL
)   ENGINE NDBCLUSTER;
</pre><p>
        このセクションの後半で示すメモリーの使用率および関連情報は、このテーブルに約 50000 行挿入したあとに生成されました。
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
          この例では、データノードプロセスに、シングルスレッド <span class="command"><strong>ndbd</strong></span> を使用することを示します。 この例は、マルチスレッド <span class="command"><strong>ndbmtd</strong></span> を使用している場合にも適用できます。そのためには、次のステップに示されている箇所で <span class="command"><strong>ndbmtd</strong></span> を <span class="command"><strong>ndbd</strong></span> に置き換えます。 
        </p></div><p><b>ステップ 1: 構成ファイルの更新. </b>
          テキストエディタでクラスタのグローバル構成ファイルを開き、2 つの新しいデータノードに対応する <code class="literal">[ndbd]</code> セクションを追加します。 (これらのデータノードに ID 3 と 4 を付与し、それらがそれぞれ 198.51.100.3 と 198.51.100.4 のアドレスにあるホストマシンで実行されると仮定します。) 新しいセクションを追加したら、<code class="filename">config.ini</code> ファイルの内容が次に示すように見えます。ここで、ファイルに追加した部分は太字で示しています。 
        </p><pre class="programlisting">[ndbd default]
DataMemory = 100M
IndexMemory = 100M
NoOfReplicas = 2
DataDir = /usr/local/mysql/var/mysql-cluster

[ndbd]
Id = 1
HostName = 198.51.100.1

[ndbd]
Id = 2
HostName = 198.51.100.2

<span class="bold"><strong>[ndbd]
Id = 3
HostName = 198.51.100.3

[ndbd]
Id = 4
HostName = 198.51.100.4</strong></span>

[mgm]
HostName = 198.51.100.10
Id = 10

[api]
Id=20
HostName = 198.51.100.20

[api]
Id=21
HostName = 198.51.100.21
</pre><p>
        必要な変更が完了したら、ファイルを保存します。
      </p><p><b>ステップ 2: 管理サーバーの再起動. </b>
          クラスタ管理サーバーを再起動するには、次のように別々のコマンドを発行して、管理サーバーを停止してから再起動する必要があります。
        </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
            次に示すように管理クライアントの <code class="literal">STOP</code> コマンドを使用して、管理サーバーを停止します。
          </p><pre class="programlisting">ndb_mgm&gt; <strong class="userinput"><code>10 STOP</code></strong>
Node 10 has shut down.
Disconnecting to allow Management Server to shutdown

shell&gt;
</pre></li><li class="listitem"><p>
            管理サーバーをシャットダウンすると管理クライアントが終了するため、システムシェルから管理サーバーを起動する必要があります。 単純にするために、<code class="filename">config.ini</code> は管理サーバーバイナリと同じディレクトリにあると仮定していますが、実際には、構成ファイルの正確なパスを指定する必要があります。 また、管理サーバーがその構成キャッシュからではなく、ファイルから新しい構成を読み取るように、<code class="option">--reload</code> または <code class="option">--initial</code> オプションも指定する必要があります。 シェルの現在のディレクトリも管理サーバーバイナリが配置されているディレクトリと同じである場合は、次に示すように管理サーバーを呼び出すことができます。 
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>ndb_mgmd -f config.ini --reload</code></strong>
2008-12-08 17:29:23 [MgmSrvr] INFO     -- NDB Cluster Management Server. 8.0.23-ndb-8.0.23
2008-12-08 17:29:23 [MgmSrvr] INFO     -- Reading cluster configuration from 'config.ini'
</pre></li></ol></div><p>
        <span class="command"><strong>ndb_mgm</strong></span> プロセスが再起動されたあとに、管理クライアントで <code class="literal">SHOW</code> の出力をチェックすると、次に示すように表示されます。
      </p><pre class="programlisting">-- NDB Cluster -- Management Client --
ndb_mgm&gt; <strong class="userinput"><code>SHOW</code></strong>
Connected to Management Server at: 198.51.100.10:1186
Cluster Configuration
---------------------
[ndbd(NDB)]     2 node(s)
id=1    @198.51.100.1  (8.0.23-ndb-8.0.23, Nodegroup: 0, *)
id=2    @198.51.100.2  (8.0.23-ndb-8.0.23, Nodegroup: 0)
id=3 (not connected, accepting connect from 198.51.100.3)
id=4 (not connected, accepting connect from 198.51.100.4)

[ndb_mgmd(MGM)] 1 node(s)
id=10   @198.51.100.10  (8.0.23-ndb-8.0.23)

[mysqld(API)]   2 node(s)
id=20   @198.51.100.20  (8.0.23-ndb-8.0.23)
id=21   @198.51.100.21  (8.0.23-ndb-8.0.23)
</pre><p><b>ステップ 3: 既存のデータノードのローリング再起動の実行. </b>
          次に示すように <code class="literal">RESTART</code> コマンドを使用すると、このステップを完全にクラスタ管理クライアント内で実現できます。
        </p><pre class="programlisting">ndb_mgm&gt; <strong class="userinput"><code>1 RESTART</code></strong>
Node 1: Node shutdown initiated
Node 1: Node shutdown completed, restarting, no start.
Node 1 is being restarted

ndb_mgm&gt; Node 1: Start initiated (version 8.0.23)
Node 1: Started (version 8.0.23)

ndb_mgm&gt; <strong class="userinput"><code>2 RESTART</code></strong>
Node 2: Node shutdown initiated
Node 2: Node shutdown completed, restarting, no start.
Node 2 is being restarted

ndb_mgm&gt; Node 2: Start initiated (version 8.0.23)

ndb_mgm&gt; Node 2: Started (version 8.0.23)
</pre><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">重要</div><p>
          各 <code class="literal"><em class="replaceable"><code>X</code></em> RESTART</code> コマンドを発行したら、管理クライアントによって<code class="literal">「Node <em class="replaceable"><code>X</code></em>: Started (version ...)」</code>というレポートが出力されるまで待機して<span class="emphasis"><em>から</em></span>、先に進みます。
        </p></div><p>
        <span class="command"><strong>mysql</strong></span> クライアントで <code class="literal">ndbinfo.nodes</code> テーブルをチェックすると、既存のデータノードがすべて更新済みの構成を使用して再起動されたことを確認できます。
      </p><p><b>ステップ 4: すべてのクラスタ API ノードのローリング再起動の実行. </b>
          <span class="command"><strong>mysqladmin shutdown</strong></span> に続いて、<span class="command"><strong>mysqld_safe</strong></span> (または別の起動スクリプト) を使用して、クラスタ内の SQL ノードとして機能している各 MySQL サーバーをシャットダウンし、再起動します。 これは、次に示すものと同様になります。ここで、<em class="replaceable"><code>password</code></em> は特定の MySQL サーバーインスタンスの MySQL <code class="literal">root</code> パスワードです。 
        </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>mysqladmin -uroot -p<em class="replaceable"><code>password</code></em> shutdown</code></strong>
081208 20:19:56 mysqld_safe mysqld from pid file
/usr/local/mysql/var/tonfisk.pid ended
shell&gt; <strong class="userinput"><code>mysqld_safe --ndbcluster --ndb-connectstring=198.51.100.10 &amp;</code></strong>
081208 20:20:06 mysqld_safe Logging to '/usr/local/mysql/var/tonfisk.err'.
081208 20:20:06 mysqld_safe Starting mysqld daemon with databases
from /usr/local/mysql/var
</pre><p>
        当然、正確な入力および出力は、MySQL がシステムにインストールされている方法や場所、および起動する際に選択したオプション (およびこれらのオプションの一部またはすべてを <code class="filename">my.cnf</code> ファイルに指定しているかどうか) によって異なります。
      </p><p><b>ステップ 5: 新しいデータノードの初期起動の実行. </b>
          次に示すように、新しいデータノードの各ホスト上のシステムシェルから <code class="option">--initial</code> オプションを使用して、データノードを起動します。
        </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>ndbd -c 198.51.100.10 --initial</code></strong>
</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
          既存のデータノードを再起動する場合とは異なり、新しいデータノードは同時に起動できます。あるデータノードの起動が完了するまで待機してから、別のデータノードを起動する必要はありません。
        </p></div><p>
        <span class="emphasis"><em>新しいデータノードの両方が起動されるまで待機してから、次のステップに進みます</em></span>。 新しいデータノードが起動されたら、管理クライアントの <code class="literal">SHOW</code> コマンドの出力で、(次に太字で示されているように) それらがどのノードグループにも属していないことを確認できます。 
      </p><pre class="programlisting">ndb_mgm&gt; <strong class="userinput"><code>SHOW</code></strong>
Connected to Management Server at: 198.51.100.10:1186
Cluster Configuration
---------------------
[ndbd(NDB)]     2 node(s)
id=1    @198.51.100.1  (8.0.23-ndb-8.0.23, Nodegroup: 0, *)
id=2    @198.51.100.2  (8.0.23-ndb-8.0.23, Nodegroup: 0)
id=3    @198.51.100.3  (8.0.23-ndb-8.0.23, <span class="bold"><strong>no nodegroup</strong></span>)
id=4    @198.51.100.4  (8.0.23-ndb-8.0.23, <span class="bold"><strong>no nodegroup</strong></span>)

[ndb_mgmd(MGM)] 1 node(s)
id=10   @198.51.100.10  (8.0.23-ndb-8.0.23)

[mysqld(API)]   2 node(s)
id=20   @198.51.100.20  (8.0.23-ndb-8.0.23)
id=21   @198.51.100.21  (8.0.23-ndb-8.0.23)
</pre><p><b>ステップ 6: 新しいノードグループの作成. </b>
          これは、クラスタ管理クライアントで <code class="literal">CREATE NODEGROUP</code> コマンドを発行することで実行できます。 次に示すように、このコマンドは、引数として、新しいノードグループに含むデータノードのノード ID をカンマで区切ったリストを取ります。 
        </p><pre class="programlisting">ndb_mgm&gt; <strong class="userinput"><code>CREATE NODEGROUP 3,4</code></strong>
Nodegroup 1 created
</pre><p>
        再度 <code class="literal">SHOW</code> を発行すると、(同様に太字に示されているように) データノード 3 と 4 が新しいノードグループに参加したことを確認できます。
      </p><pre class="programlisting">ndb_mgm&gt; <strong class="userinput"><code>SHOW</code></strong>
Connected to Management Server at: 198.51.100.10:1186
Cluster Configuration
---------------------
[ndbd(NDB)]     2 node(s)
id=1    @198.51.100.1  (8.0.23-ndb-8.0.23, Nodegroup: 0, *)
id=2    @198.51.100.2  (8.0.23-ndb-8.0.23, Nodegroup: 0)
id=3    @198.51.100.3  (8.0.23-ndb-8.0.23, <span class="bold"><strong>Nodegroup: 1</strong></span>)
id=4    @198.51.100.4  (8.0.23-ndb-8.0.23, <span class="bold"><strong>Nodegroup: 1</strong></span>)

[ndb_mgmd(MGM)] 1 node(s)
id=10   @198.51.100.10  (8.0.23-ndb-8.0.23)

[mysqld(API)]   2 node(s)
id=20   @198.51.100.20  (8.0.23-ndb-8.0.23)
id=21   @198.51.100.21  (8.0.23-ndb-8.0.23)
</pre><p><b>ステップ 7: クラスタデータの再配布. </b>
          ノードグループが作成されても、管理クライアントで適切な <code class="literal">REPORT</code> コマンドを発行することで確認できるように、既存のデータおよびインデックスは新しいノードグループのデータノードに自動的に配布されません:
        </p><pre class="programlisting">ndb_mgm&gt; <strong class="userinput"><code>ALL REPORT MEMORY</code></strong>

Node 1: Data usage is 5%(177 32K pages of total 3200)
Node 1: Index usage is 0%(108 8K pages of total 12832)
Node 2: Data usage is 5%(177 32K pages of total 3200)
Node 2: Index usage is 0%(108 8K pages of total 12832)
<span class="bold"><strong>Node 3: Data usage is 0%(0 32K pages of total 3200)
Node 3: Index usage is 0%(0 8K pages of total 12832)
Node 4: Data usage is 0%(0 32K pages of total 3200)
Node 4: Index usage is 0%(0 8K pages of total 12832)</strong></span>
</pre><p>
        <code class="option">-p</code> オプションを付けて <span class="command"><strong>ndb_desc</strong></span> を使用すると、出力にパーティション化の情報が含まれるため、テーブルではまだ 2 つのパーティションしか使用されていないことを (ここに太字のテキストで示されている、出力の<code class="literal">「Per partition info」</code>セクションで) 確認できます。
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>ndb_desc -c 198.51.100.10 -d n ips -p</code></strong>
-- ips --
Version: 1
Fragment type: 9
K Value: 6
Min load factor: 78
Max load factor: 80
Temporary table: no
Number of attributes: 6
Number of primary keys: 1
Length of frm data: 340
Row Checksum: 1
Row GCI: 1
SingleUserMode: 0
ForceVarPart: 1
FragmentCount: 2
TableStatus: Retrieved
-- Attributes --
id Bigint PRIMARY KEY DISTRIBUTION KEY AT=FIXED ST=MEMORY AUTO_INCR
country_code Char(2;latin1_swedish_ci) NOT NULL AT=FIXED ST=MEMORY
type Char(4;latin1_swedish_ci) NOT NULL AT=FIXED ST=MEMORY
ip_address Varchar(15;latin1_swedish_ci) NOT NULL AT=SHORT_VAR ST=MEMORY
addresses Bigunsigned NULL AT=FIXED ST=MEMORY
date Bigunsigned NULL AT=FIXED ST=MEMORY

-- Indexes --
PRIMARY KEY(id) - UniqueHashIndex
PRIMARY(id) - OrderedIndex

<span class="bold"><strong>-- Per partition info --
Partition   Row count   Commit count  Frag fixed memory   Frag varsized memory
0           26086       26086         1572864             557056
1           26329       26329         1605632             557056</strong></span>

NDBT_ProgramExit: 0 - OK
</pre><p>
        <span class="command"><strong>mysql</strong></span> クライアントで <code class="literal">NDB</code> テーブルごとに <code class="literal">ALTER TABLE ... ALGORITHM=INPLACE, REORGANIZE PARTITION</code> ステートメントを実行することで、すべてのデータノード間でデータを再分散できます。
      </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">重要</div><p>
          <code class="literal">ALTER TABLE ... ALGORITHM=INPLACE, REORGANIZE PARTITION</code> は、<code class="literal">MAX_ROWS</code> オプションで作成されたテーブルでは機能しません。 かわりに、<code class="literal">ALTER TABLE ... ALGORITHM=INPLACE, MAX_ROWS=...</code> を使用してこのようなテーブルを再編成します。 
        </p><p>
          <code class="literal">MAX_ROWS</code> を使用してテーブル当たりのパーティション数を設定することは非推奨であり、かわりに <code class="literal">PARTITION_BALANCE</code> を使用する必要があります。詳細は、<a class="xref" href="sql-statements.html#create-table-ndb-table-comment-options" title="13.1.20.11 NDB_TABLE オプションの設定">セクション13.1.20.11「NDB_TABLE オプションの設定」</a> を参照してください。
        </p></div><p>
        <code class="literal">ALTER TABLE ips ALGORITHM=INPLACE, REORGANIZE PARTITION</code> ステートメントを発行した後、<span class="command"><strong>ndb_desc</strong></span> を使用して、このテーブルのデータが 4 つのパーティションを使用して格納されるようになったことを確認できます (出力の関連部分は太字で示されています):
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>ndb_desc -c 198.51.100.10 -d n ips -p</code></strong>
-- ips --
Version: 16777217
Fragment type: 9
K Value: 6
Min load factor: 78
Max load factor: 80
Temporary table: no
Number of attributes: 6
Number of primary keys: 1
Length of frm data: 341
Row Checksum: 1
Row GCI: 1
SingleUserMode: 0
ForceVarPart: 1
FragmentCount: 4
TableStatus: Retrieved
-- Attributes --
id Bigint PRIMARY KEY DISTRIBUTION KEY AT=FIXED ST=MEMORY AUTO_INCR
country_code Char(2;latin1_swedish_ci) NOT NULL AT=FIXED ST=MEMORY
type Char(4;latin1_swedish_ci) NOT NULL AT=FIXED ST=MEMORY
ip_address Varchar(15;latin1_swedish_ci) NOT NULL AT=SHORT_VAR ST=MEMORY
addresses Bigunsigned NULL AT=FIXED ST=MEMORY
date Bigunsigned NULL AT=FIXED ST=MEMORY

-- Indexes --
PRIMARY KEY(id) - UniqueHashIndex
PRIMARY(id) - OrderedIndex

<span class="bold"><strong>-- Per partition info --
Partition   Row count   Commit count  Frag fixed memory   Frag varsized memory
0           12981       52296         1572864             557056
1           13236       52515         1605632             557056
2           13105       13105         819200              294912
3           13093       13093         819200              294912</strong></span>

NDBT_ProgramExit: 0 - OK
</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
          通常、<code class="literal">ALTER TABLE <em class="replaceable"><code>table_name</code></em> [ALGORITHM=INPLACE,] REORGANIZE PARTITION</code> は、パーティション識別子のリストおよびパーティション定義のセットとともに使用され、すでに明示的にパーティション化されているテーブルの新しいパーティション化スキームを作成します。 ここでは、データを新しい NDB Cluster ノードグループに再配布するために使用することは例外です。この方法で使用する場合、<code class="literal">REORGANIZE PARTITION</code> に続くほかのキーワードや識別子はありません。 
        </p><p>
          詳細は、<a class="xref" href="sql-statements.html#alter-table" title="13.1.9 ALTER TABLE ステートメント">セクション13.1.9「ALTER TABLE ステートメント」</a>を参照してください。
        </p></div><p>
        また、無駄な領域を再利用するには、テーブルごとに <code class="literal">ALTER TABLE</code> ステートメントの後に <code class="literal">OPTIMIZE TABLE</code> を続ける必要があります。 <code class="literal">INFORMATION_SCHEMA.TABLES</code> テーブルに対して次のクエリーを使用すると、すべての <code class="literal">NDBCLUSTER</code> テーブルのリストを取得できます。 
      </p><pre class="programlisting">SELECT TABLE_SCHEMA, TABLE_NAME
    FROM INFORMATION_SCHEMA.TABLES
    WHERE ENGINE = 'NDBCLUSTER';
</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
          「NDB Cluster」テーブルの <code class="literal">INFORMATION_SCHEMA.TABLES.ENGINE</code> 値は、テーブル (または、既存のテーブルを別のストレージエンジンから変換するために使用される <code class="literal">ALTER TABLE</code> ステートメント) の作成に使用された <code class="literal">CREATE TABLE</code> ステートメントの <code class="literal">ENGINE</code> オプションで <code class="literal">NDB</code> と <code class="literal">NDBCLUSTER</code> のどちらが使用されたかに関係なく、常に <code class="literal">NDBCLUSTER</code> です。
        </p></div><p>
        これらのステートメントを実行したあとは、次に示すように <code class="literal">ALL REPORT MEMORY</code> の出力で、データおよびインデックスがすべてのデータノード間で再配布されたことを確認できます。
      </p><pre class="programlisting">ndb_mgm&gt; <strong class="userinput"><code>ALL REPORT MEMORY</code></strong>

Node 1: Data usage is 5%(176 32K pages of total 3200)
Node 1: Index usage is 0%(76 8K pages of total 12832)
Node 2: Data usage is 5%(176 32K pages of total 3200)
Node 2: Index usage is 0%(76 8K pages of total 12832)
Node 3: Data usage is 2%(80 32K pages of total 3200)
Node 3: Index usage is 0%(51 8K pages of total 12832)
Node 4: Data usage is 2%(80 32K pages of total 3200)
Node 4: Index usage is 0%(50 8K pages of total 12832)
</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
          <code class="literal">NDBCLUSTER</code> テーブルに対して一度に実行できる DDL 操作は 1 つのみであるため、次の DDL 操作を発行する前に、各 <code class="literal">ALTER TABLE ... REORGANIZE PARTITION</code> ステートメントが終了するまで待機する必要があります。
        </p></div><p>
        新しいデータノードが追加されたあとに作成された <code class="literal">NDBCLUSTER</code> テーブルに対して <code class="literal">ALTER TABLE ... REORGANIZE PARTITION</code> ステートメントを発行する必要はありません。このようなテーブルに追加されたデータは、すべてのデータノードに自動的に分散されます。 ただし、<span class="emphasis"><em>次より前</em></span>に存在する <code class="literal">NDBCLUSTER</code> テーブルでは、<code class="literal">ALTER TABLE ... REORGANIZE PARTITION</code> を使用してこれらのテーブルが再編成されるまで、既存のデータも新しいデータも新しいノードを使用して分散されません。 
      </p><p><b>ローリング再起動を使用しない代替の手順. </b>
          はじめてクラスタを起動するときに、余分なデータノードを構成するが、それらを起動しないことによって、ローリング再起動の必要性を回避できます。 前のように、まず 1 つのノードグループ内の 2 つのデータノード (ノード 1 と 2) から開始し、あとでノード 3 と 4 で構成される 2 つめのノードグループを追加することで、クラスタを 4 つのデータノードまで拡張すると仮定します。 
        </p><pre class="programlisting">[ndbd default]
DataMemory = 100M
IndexMemory = 100M
NoOfReplicas = 2
DataDir = /usr/local/mysql/var/mysql-cluster

[ndbd]
Id = 1
HostName = 198.51.100.1

[ndbd]
Id = 2
HostName = 198.51.100.2

[ndbd]
Id = 3
HostName = 198.51.100.3
Nodegroup = 65536

[ndbd]
Id = 4
HostName = 198.51.100.4
Nodegroup = 65536

[mgm]
HostName = 198.51.100.10
Id = 10

[api]
Id=20
HostName = 198.51.100.20

[api]
Id=21
HostName = 198.51.100.21
</pre><p>
        あとでオンラインになるデータノード (ノード 3 と 4) を <code class="literal">NodeGroup = 65536</code> で構成できます。この場合、ノード 1 と 2 はそれぞれ次のように起動できます。
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>ndbd -c 198.51.100.10 --initial</code></strong>
</pre><p>
        <code class="literal">NodeGroup = 65536</code> で構成されたデータノードは、<code class="literal">StartNoNodeGroupTimeout</code> データノード構成パラメータの設定によって指定された期間待機してから、<code class="option">--nowait-nodes=3,4</code> を使用してノード 1 と 2 を起動したかのように、管理サーバーによって扱われます。 デフォルトでは、これは 15 秒 (15000 ミリ秒) です。 
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
          <code class="literal">StartNoNodegroupTimeout</code> はクラスタ内のすべてのデータノードで同じである必要があります。そのため、これは個々のデータノードではなく、常に <code class="filename">config.ini</code> ファイルの <code class="literal">[ndbd default]</code> セクションに設定するようにしてください。
        </p></div><p>
        2 つめのノードグループを追加する準備ができたら、次の追加ステップを実行する必要があるだけです。
      </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
            データノード 3 と 4 を起動し、新しいノードごとにデータノードのプロセスを 1 回ずつ呼び出します。
          </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>ndbd -c 198.51.100.10 --initial</code></strong>
</pre></li><li class="listitem"><p>
            管理クライアントで適切な <code class="literal">CREATE NODEGROUP</code> コマンドを発行します。
          </p><pre class="programlisting">ndb_mgm&gt; <strong class="userinput"><code>CREATE NODEGROUP 3,4</code></strong>
</pre></li><li class="listitem"><p>
            <span class="command"><strong>mysql</strong></span> クライアントで、既存の <code class="literal">NDBCLUSTER</code> テーブルごとに <code class="literal">ALTER TABLE ... REORGANIZE PARTITION</code> および <code class="literal">OPTIMIZE TABLE</code> ステートメントを発行します。 (このセクションの他の場所で説明されているように、既存の「NDB Cluster」テーブルでは、これが完了するまでデータ分散に新しいノードを使用できません。) 
          </p></li></ol></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-cluster-backup"></a>23.5.8 NDB Cluster のオンラインバックアップ</h3></div></div></div><div class="toc"><dl class="toc"><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-backup-concepts">23.5.8.1 NDB Cluster バックアップの概念</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-backup-using-management-client">23.5.8.2 NDB Cluster 管理クライアントを使用したバックアップの作成</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-backup-configuration">23.5.8.3 NDB Cluster バックアップの構成</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-backup-troubleshooting">23.5.8.4 NDB Cluster バックアップのトラブルシューティング</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-backup-parallel-data-nodes">23.5.8.5 並列データノードを使用した NDB バックアップの作成</a></span></dt></dl></div><a class="indexterm" name="idm45563210874848"></a><a class="indexterm" name="idm45563210873104"></a><p>
      次のいくつかのセクションでは、<span class="command"><strong>ndb_mgm</strong></span> 管理クライアントにあるこの目的のための機能を使用して NDB Cluster バックアップを準備してから作成する方法について説明します。 このタイプのバックアップを <span class="command"><strong>mysqldump</strong></span> を使用して作成されたバックアップと区別するために、<span class="quote">「<span class="quote">native</span>」</span> NDB Cluster バックアップと呼ばれることもあります。 (<span class="command"><strong>mysqldump</strong></span> を使用したバックアップの作成については、<a class="xref" href="programs.html#mysqldump" title="4.5.4 mysqldump — データベースバックアッププログラム">セクション4.5.4「mysqldump — データベースバックアッププログラム」</a>を参照してください。) NDB Cluster バックアップの復元は、NDB Cluster 配布で提供される <span class="command"><strong>ndb_restore</strong></span> ユーティリティーを使用して実行されます。<span class="command"><strong>ndb_restore</strong></span> と NDB Cluster バックアップの復元でのその使用については、<a class="xref" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="23.4.23 ndb_restore — NDB Cluster バックアップの復元">セクション23.4.23「ndb_restore — NDB Cluster バックアップの復元」</a> を参照してください。 
    </p><p>
      NDB 8.0.16 以降では、データノードで並列性を実現するために、複数の LDM を使用してバックアップを作成できます。 <a class="xref" href="mysql-cluster.html#mysql-cluster-backup-parallel-data-nodes" title="23.5.8.5 並列データノードを使用した NDB バックアップの作成">セクション23.5.8.5「並列データノードを使用した NDB バックアップの作成」</a>を参照してください。 
    </p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-backup-concepts"></a>23.5.8.1 NDB Cluster バックアップの概念</h4></div></div></div><a class="indexterm" name="idm45563210861232"></a><a class="indexterm" name="idm45563210859456"></a><p>
        バックアップとは、特定の時点でのデータベースのスナップショットです。 バックアップは次の 3 つの主な部分で構成されます。 
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><b>メタデータ. </b>
              すべてのデータベーステーブルの名前と定義
            </p></li><li class="listitem"><p><b>テーブルレコード. </b>
              バックアップが作成された時点でデータベーステーブルに実際に格納されたデータ
            </p></li><li class="listitem"><p><b>トランザクションログ. </b>
              データがデータベースに格納された方法と日時を示す順次レコード
            </p></li></ul></div><p>
        これらの各部分は、バックアップに参加しているすべてのノード上に保存されます。 バックアップ中に、各ノードはこれらの 3 つの部分をディスク上の 3 つのファイルに保存します。 
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="filename">BACKUP-<em class="replaceable"><code>backup_id</code></em>.<em class="replaceable"><code>node_id</code></em>.ctl</code>
          </p><p>
            制御情報およびメタデータを含む制御ファイルです。 各ノードは、このファイルの各ノード独自のバージョンに、(クラスタ内のすべてのテーブルの) 同じテーブル定義を保存します。 
          </p></li><li class="listitem"><p>
            <code class="filename">BACKUP-<em class="replaceable"><code>backup_id</code></em>-0.<em class="replaceable"><code>node_id</code></em>.data</code>
          </p><p>
            フラグメントごとに保存され、テーブルレコードを含むデータファイルです。 つまり、バックアップ中にノードによって異なるフラグメントを保存します。 各ノードによって保存されたファイルは、レコードが属するテーブルを示すヘッダーで始まります。 レコードのリストのあとに、すべてのレコードのチェックサムを含むフッターが続きます。 
          </p></li><li class="listitem"><p>
            <code class="filename">BACKUP-<em class="replaceable"><code>backup_id</code></em>.<em class="replaceable"><code>node_id</code></em>.log</code>
          </p><p>
            コミットされたトランザクションのレコードを含むログファイルです。 このログには、バックアップに格納されたテーブル上のトランザクションのみが格納されます。 ノードによって異なるデータベースのフラグメントをホストするため、バックアップに関与するノードはさまざまなレコードを保存します。 
          </p></li></ul></div><p>
        前述のリストで、<em class="replaceable"><code>backup_id</code></em> はバックアップ識別子を表し、<em class="replaceable"><code>node_id</code></em> はファイルを作成するノードの一意の識別子です。
      </p><p>
        バックアップファイルの場所は、<code class="literal">BackupDataDir</code> パラメータによって決まります。
      </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-backup-using-management-client"></a>23.5.8.2 NDB Cluster 管理クライアントを使用したバックアップの作成</h4></div></div></div><a class="indexterm" name="idm45563210834944"></a><a class="indexterm" name="idm45563210833168"></a><p>
        バックアップを開始する前に、バックアップを実行するためにクラスタが適切に構成されていることを確認します。 (<a class="xref" href="mysql-cluster.html#mysql-cluster-backup-configuration" title="23.5.8.3 NDB Cluster バックアップの構成">セクション23.5.8.3「NDB Cluster バックアップの構成」</a>を参照してください。) 
      </p><a class="indexterm" name="idm45563210829664"></a><p>
        <code class="literal">START BACKUP</code> コマンドは、バックアップを作成するために使用されます。
      </p><pre class="programlisting">START BACKUP [<em class="replaceable"><code>backup_id</code></em>]
    [<em class="replaceable"><code>encryption_option</code></em>]
    [<em class="replaceable"><code>wait_option</code></em>]
    [<em class="replaceable"><code>snapshot_option</code></em>]

<em class="replaceable"><code>encryption_option</code></em>:
ENCRYPT PASSWORD=<em class="replaceable"><code>password</code></em>

<em class="replaceable"><code>password</code></em>:
{'<em class="replaceable"><code>password_string</code></em>' | "<em class="replaceable"><code>password_string</code></em>"}

<em class="replaceable"><code>wait_option</code></em>:
WAIT {STARTED | COMPLETED} | NOWAIT

<em class="replaceable"><code>snapshot_option</code></em>:
SNAPSHOTSTART | SNAPSHOTEND
</pre><p>
        連続したバックアップは自動的に順次識別されるため、<em class="replaceable"><code>backup_id</code></em> (1 以上の整数) はオプションです。これを省略すると、次に使用可能な値が使用されます。 既存の <em class="replaceable"><code>backup_id</code></em> 値が使用されると、 <span class="errortext">Backup failed: file already exists</span>というエラーでバックアップに失敗します。 これを使用する場合は、その他のオプションを使用する前に、<code class="literal">START BACKUP</code> の直後に <em class="replaceable"><code>backup_id</code></em> を指定する必要があります。 
      </p><p>
        NDB 8.0.22 以降では、<code class="literal">ENCRYPT PASSWORD=<em class="replaceable"><code>password</code></em></code> を使用した暗号化バックアップの作成がサポートされています。<em class="replaceable"><code>password</code></em> は、次の要件をすべて満たす必要があります:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">!</code>, <code class="literal">'</code>, <code class="literal">"</code>, <code class="literal">$</code>, <code class="literal">%</code>, <code class="literal">\</code>および <code class="literal">^</code> 以外の印刷可能な ASCII 文字を使用
          </p></li><li class="listitem"><p>
            256 文字以下
          </p></li><li class="listitem"><p>
            一重引用符または二重引用符で囲みます
          </p></li></ul></div><p>
        空のパスワード (<code class="literal">''</code>または<code class="literal">""</code>) を使用することは可能ですが、お薦めしません。
      </p><p>
        暗号化バックアップは、次のいずれかのコマンドを使用して復号化できます:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <span class="command"><strong>ndb_restore</strong></span> <code class="option">--decrypt</code> <code class="option">--backup-password=<em class="replaceable"><code>password</code></em></code>
          </p></li><li class="listitem"><p>
            <span class="command"><strong>ndbxfrm</strong></span> <code class="option">--decrypt-password=<em class="replaceable"><code>password</code></em></code> <em class="replaceable"><code>input_file</code></em> <em class="replaceable"><code>output_file</code></em>
          </p></li><li class="listitem"><p>
            <span class="command"><strong>ndb_print_backup_file</strong></span> <code class="option">-P</code> <em class="replaceable"><code>password</code></em> <em class="replaceable"><code>file_name</code></em>
          </p></li></ul></div><p>
        必要な追加オプションなどの詳細は、これらのプログラムの説明を参照してください。
      </p><p>
        <em class="replaceable"><code>wait_option</code></em> を使用すると、次のリストに示すように、<code class="literal">START BACKUP</code> コマンドを発行したあとに、管理クライアントに制御が返されるタイミングを判断できます。
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <a class="indexterm" name="idm45563210791568"></a> <a class="indexterm" name="idm45563210789536"></a> <code class="literal">NOWAIT</code> を指定すると、すぐに次に示すようなプロンプトが管理クライアントに表示されます。
          </p><pre class="programlisting">ndb_mgm&gt; <strong class="userinput"><code>START BACKUP NOWAIT</code></strong>
ndb_mgm&gt;
</pre><p>
            この場合、バックアッププロセスから進行状況の情報が出力されている間でも、管理クライアントを使用できます。
          </p></li><li class="listitem"><p>
            <a class="indexterm" name="idm45563210783952"></a> <a class="indexterm" name="idm45563210781920"></a> <code class="literal">WAIT STARTED</code> を指定すると、次に示すように、管理クライアントはバックアップが開始されるまで待機してから、ユーザーに制御を返します。
          </p><pre class="programlisting">ndb_mgm&gt; <strong class="userinput"><code>START BACKUP WAIT STARTED</code></strong>
Waiting for started, this may take several minutes
Node 2: Backup 3 started from node 1
ndb_mgm&gt;
</pre></li><li class="listitem"><p>
            <a class="indexterm" name="idm45563210776832"></a> <a class="indexterm" name="idm45563210774800"></a> <strong class="userinput"><code>WAIT COMPLETED</code></strong> を指定すると、管理クライアントはバックアッププロセスが完了するまで待機してから、ユーザーに制御を返します。
          </p></li></ul></div><p>
        <code class="literal">WAIT COMPLETED</code> はデフォルトです。
      </p><p>
        <a class="indexterm" name="idm45563210770528"></a> <a class="indexterm" name="idm45563210768496"></a> <a class="indexterm" name="idm45563210766944"></a> <a class="indexterm" name="idm45563210765024"></a> <em class="replaceable"><code>snapshot_option</code></em> を使用すると、<code class="literal">START BACKUP</code> が発行されたとき、またはそれが完了したときのクラスタの状態とバックアップが一致するかどうかを判断できます。 <code class="literal">SNAPSHOTSTART</code> を使用すると、バックアップがバックアップを開始したときのクラスタの状態と一致します。<code class="literal">SNAPSHOTEND</code> を使用すると、バックアップはバックアップが終了したときのクラスタの状態を反映します。 <code class="literal">SNAPSHOTEND</code> がデフォルトであり、以前の NDB Cluster リリースで検出された動作と一致します。 
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
          <code class="literal">START BACKUP</code> を付けて <code class="literal">SNAPSHOTSTART</code> を使用するときに、<code class="literal">CompressedBackup</code> パラメータが有効になっている場合、データファイルおよび制御ファイルのみが圧縮され、ログファイルは圧縮されません。
        </p></div><p>
        <em class="replaceable"><code>wait_option</code></em> と <em class="replaceable"><code>snapshot_option</code></em> の両方を使用する場合、それらはいずれの順序でも指定できます。 たとえば、ID として 4 を持つ既存のバックアップが存在しないと仮定すると、次のコマンドはすべて有効です。 
      </p><pre class="programlisting">START BACKUP WAIT STARTED SNAPSHOTSTART
START BACKUP SNAPSHOTSTART WAIT STARTED
START BACKUP 4 WAIT COMPLETED SNAPSHOTSTART
START BACKUP SNAPSHOTEND WAIT COMPLETED
START BACKUP 4 NOWAIT SNAPSHOTSTART
</pre><p>
        バックアップを作成する手順は、次のステップで構成されます。
      </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
            管理クライアント (<span class="command"><strong>ndb_mgm</strong></span>) がまだ実行されていない場合は、起動します。
          </p></li><li class="listitem"><p>
            <strong class="userinput"><code>START BACKUP</code></strong> コマンドを実行します。 これにより、次に示すように、バックアップの進行状況を示す複数行の出力が生成されます。 
          </p><pre class="programlisting">ndb_mgm&gt; <strong class="userinput"><code>START BACKUP</code></strong>
Waiting for completed, this may take several minutes
Node 2: Backup 1 started from node 1
Node 2: Backup 1 started from node 1 completed
 StartGCP: 177 StopGCP: 180
 #Records: 7362 #LogRecords: 0
 Data: 453648 bytes Log: 0 bytes
ndb_mgm&gt;
</pre></li><li class="listitem"><p>
            <a class="indexterm" name="idm45563210744976"></a> <a class="indexterm" name="idm45563210742736"></a>バックアップが開始されると、次のメッセージが管理クライアントに表示されます。
          </p><pre class="programlisting">Backup <em class="replaceable"><code>backup_id</code></em> started from node <em class="replaceable"><code>node_id</code></em>
</pre><p>
            <em class="replaceable"><code>backup_id</code></em> は、特定のバックアップを表す一意の識別子です。 ほかに構成されていない場合、この識別子はクラスタログに保存されます。<em class="replaceable"><code>node_id</code></em> は、データノードとバックアップを調整する管理サーバーの識別子です。 バックアッププロセスのこの時点で、クラスタはバックアップリクエストを受信して処理しています。 バックアップが終了したことを意味するわけではありません。 次に、このステートメントの例を示します。 
          </p><pre class="programlisting">Node 2: Backup 1 started from node 1
</pre></li><li class="listitem"><p>
            管理クライアントは、次のようなメッセージでバックアップが開始されたことを示します。
          </p><pre class="programlisting">Backup <em class="replaceable"><code>backup_id</code></em> started from node <em class="replaceable"><code>node_id</code></em> completed
</pre><p>
            バックアップが開始されたことを示す通知の場合も同様に、<em class="replaceable"><code>backup_id</code></em> は、この特定のバックアップを表す一意の識別子であり、<em class="replaceable"><code>node_id</code></em> は、データノードとバックアップを調整する管理サーバーのノード ID です。 この出力には、次に示すように、関連するグローバルチェックポイント、バックアップされたレコードの数、およびデータのサイズを含む追加情報が記載されます。 
          </p><pre class="programlisting">Node 2: Backup 1 started from node 1 completed
 StartGCP: 177 StopGCP: 180
 #Records: 7362 #LogRecords: 0
 Data: 453648 bytes Log: 0 bytes
</pre></li></ol></div><p>
        また、次の例に示すように、<code class="option">-e</code> または <code class="option">--execute</code> オプションを付けて <span class="command"><strong>ndb_mgm</strong></span> を呼び出して、システムシェルからバックアップを実行することもできます。
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>ndb_mgm -e "START BACKUP 6 WAIT COMPLETED SNAPSHOTSTART"</code></strong>
</pre><p>
        この方法で <code class="literal">START BACKUP</code> を使用する際は、バックアップ ID を指定する必要があります。
      </p><p>
        クラスタのバックアップは、デフォルトで各データノード上の <code class="literal">DataDir</code> の <code class="filename">BACKUP</code> サブディレクトリに作成されます。 これは、1 つ以上のデータノードごとに個別にオーバーライドすることも、<code class="literal">BackupDataDir</code> 構成パラメータを使用することで、<code class="filename">config.ini</code> ファイル内のすべてのクラスタデータノードに対してオーバーライドすることもできます。 特定の <em class="replaceable"><code>backup_id</code></em> を持つバックアップ用に作成されたバックアップファイルは、バックアップディレクトリ内の <code class="filename">BACKUP-<em class="replaceable"><code>backup_id</code></em></code> という名前のサブディレクトリに格納されます。 
      </p><p><a name="ndbclient-abort-backup"></a><b>バックアップの取消し. </b>
          すでに進行中のバックアップを取り消すか中断するには、次のステップを実行します:
        </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
            管理クライアントを起動します。
          </p></li><li class="listitem"><p>
            次のコマンドを実行します。
          </p><pre class="programlisting">ndb_mgm&gt; <strong class="userinput"><code>ABORT BACKUP <em class="replaceable"><code>backup_id</code></em></code></strong>
</pre><p>
            数値 <em class="replaceable"><code>backup_id</code></em> は、バックアップが開始されたときに管理クライアントの応答 (<code class="literal">「Backup <em class="replaceable"><code>backup_id</code></em> started from node <em class="replaceable"><code>management_node_id」</code></em></code>メッセージ内) に含まれていたバックアップの識別子です。
          </p></li><li class="listitem"><p>
            管理クライアントは、<code class="literal">Abort of backup <em class="replaceable"><code>backup_id</code></em> ordered</code> で中断リクエストを確認します。
          </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
              この時点で、管理クライアントはまだクラスタデータノードからこのリクエストへの応答を受信していないため、実際にはバックアップはまだ中止されていません。
            </p></div></li><li class="listitem"><p>
            バックアップが中断されると、管理クライアントは次のような方法でこの事実を報告します:
          </p><pre class="programlisting">Node 1: Backup 3 started from 5 has been aborted.
  Error: 1321 - Backup aborted by user request: Permanent error: User defined error
Node 3: Backup 3 started from 5 has been aborted.
  Error: 1323 - 1323: Permanent error: Internal error
Node 2: Backup 3 started from 5 has been aborted.
  Error: 1323 - 1323: Permanent error: Internal error
Node 4: Backup 3 started from 5 has been aborted.
  Error: 1323 - 1323: Permanent error: Internal error
</pre><p>
            この例では、4 つのデータノードを持つクラスタのサンプル出力を示します。ここで、中止されるバックアップのシーケンス番号は <code class="literal">3</code> で、クラスタ管理クライアントが接続される管理ノードのノード ID は <code class="literal">5</code> です。 バックアップの中止時にその役割を最初に完了したノードは、中止の理由がユーザーからのリクエストのためであったことをレポートします。 (残りのノードは、不明な内部エラーが原因でバックアップが中止されたことをレポートします。) 
          </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
              クラスタノードが特定の順序で <code class="literal">ABORT BACKUP</code> コマンドに応答する保証はありません。
            </p></div><p>
            <code class="literal">「Backup <em class="replaceable"><code>backup_id</code></em> started from node <em class="replaceable"><code>management_node_id</code></em> has been aborted」</code>というメッセージは、バックアップが終了し、このバックアップに関連するすべてのファイルがクラスタファイルシステムから削除されたことを示しています。
          </p></li></ol></div><p>
        このコマンドを使用すると、システムシェルから進行中のバックアップを中止することもできます。
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>ndb_mgm -e "ABORT BACKUP <em class="replaceable"><code>backup_id</code></em>"</code></strong>
</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
          <code class="literal">ABORT BACKUP</code> の発行時に、ID <em class="replaceable"><code>backup_id</code></em> を持つバックアップが実行されていない場合は、管理クライアントが応答することも、クラスタログに無効な中止コマンドが送信されたことが表示されることもありません。
        </p></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-backup-configuration"></a>23.5.8.3 NDB Cluster バックアップの構成</h4></div></div></div><a class="indexterm" name="idm45563210688256"></a><a class="indexterm" name="idm45563210686480"></a><a class="indexterm" name="idm45563210684320"></a><a class="indexterm" name="idm45563210682288"></a><p>
        バックアップには、次の 5 つの構成パラメータが不可欠です。
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <a class="indexterm" name="idm45563210678880"></a> <code class="literal">BackupDataBufferSize</code>
          </p><p>
            ディスクに書き込む前のデータをバッファーに入れる際に使用されるメモリーの量。
          </p></li><li class="listitem"><p>
            <a class="indexterm" name="idm45563210675248"></a> <code class="literal">BackupLogBufferSize</code>
          </p><p>
            ディスクに書き込む前のログレコードをバッファーに入れる際に使用されるメモリーの量。
          </p></li><li class="listitem"><p>
            <a class="indexterm" name="idm45563210671488"></a> <code class="literal">BackupMemory</code>
          </p><p>
            バックアップ用にデータノードに割り当てられた合計メモリー。 これは、バックアップデータバッファーとバックアップログバッファー用に割り当てられたメモリーの合計になります。 
          </p></li><li class="listitem"><p>
            <a class="indexterm" name="idm45563210667472"></a> <code class="literal">BackupWriteSize</code>
          </p><p>
            ディスクに書き込まれたブロックのデフォルトサイズ。 これは、バックアップデータバッファーとバックアップログバッファーの両方に適用されます。 
          </p></li><li class="listitem"><p>
            <a class="indexterm" name="idm45563210663536"></a> <code class="literal">BackupMaxWriteSize</code>
          </p><p>
            ディスクに書き込まれたブロックの最大サイズ。 これは、バックアップデータバッファーとバックアップログバッファーの両方に適用されます。 
          </p></li></ul></div><p>
        また、<code class="literal">CompressedBackup</code> では、バックアップファイルの作成時およびバックアップファイルへの書込み時に <code class="literal">NDB</code> で圧縮が使用されます。
      </p><p>
        これらのパラメータに関する詳細は、<a class="link" href="mysql-cluster.html#mysql-cluster-backup-parameters" title="バックアップパラメータ">「バックアップパラメータ」</a>で見つかります。
      </p><p>
        <code class="literal">BackupDataDir</code> 構成パラメータを使用して、バックアップファイルの場所を設定することもできます。 デフォルトは <code class="literal">FileSystemPath</code> <code class="filename">/BACKUP/BACKUP-<em class="replaceable"><code>backup_id</code></em></code> です。 
      </p><p>
        NDB 8.0.22 以降では、<code class="literal">RequireEncryptedBackup</code> を有効にすることによってバックアップファイルの暗号化を強制できます。 このパラメータを 1 に設定すると、<code class="literal">START BACKUP</code> コマンドの一部として <code class="literal">ENCRYPT PASSWORD=<em class="replaceable"><code>password</code></em></code> を指定せずにバックアップを作成することはできません。 
      </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-backup-troubleshooting"></a>23.5.8.4 NDB Cluster バックアップのトラブルシューティング</h4></div></div></div><a class="indexterm" name="idm45563210647344"></a><a class="indexterm" name="idm45563210645568"></a><a class="indexterm" name="idm45563210643360"></a><p>
        バックアップリクエストを発行した際にエラーコードが返される場合は、不十分なメモリーまたはディスク容量が原因である可能性がもっとも高いです。 バックアップ用に十分なメモリーが割り当てられていることを確認するようにしてください。 
      </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">重要</div><p>
          <code class="literal">BackupDataBufferSize</code> および <code class="literal">BackupLogBufferSize</code> を設定していて、それらの合計が 4M バイトよりも大きい場合は、<code class="literal">BackupMemory</code> も設定する必要があります。
        </p></div><p>
        バックアップ対象のハードドライブパーティション上に十分な容量があることも確認するようにしてください。
      </p><p>
        <code class="literal">NDB</code> では反復可能読み取りがサポートされていないため、リストアプロセスで問題が発生する可能性があります。 バックアッププロセスは<span class="quote">「<span class="quote">「ホット」</span>」</span>ですが、NDB Cluster をバックアップから復元することは 100% の<span class="quote">「<span class="quote">「ホット」</span>」</span>プロセスではありません。 その理由は、リストアプロセス中にトランザクションを実行すると、リストアされたデータから反復不可能読み取りが発生するためです。 つまり、リストアの進行中は、データの状態に一貫性がありません。 
      </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-backup-parallel-data-nodes"></a>23.5.8.5 並列データノードを使用した NDB バックアップの作成</h4></div></div></div><p>
        NDB 8.0.16 以降では、データノード上で並列に動作する複数のローカルデータマネージャー (LDM) を使用してバックアップを作成できます。 これが機能するには、クラスタ内のすべてのデータノードが複数の LDM を使用し、各データノードが同じ数の LDM を使用する必要があります。 つまり、すべてのデータノードで <span class="command"><strong>ndbmtd</strong></span> を実行する必要があり (<span class="command"><strong>ndbd</strong></span> はシングルスレッドであるため、常に LDM が 1 つしかありません)、バックアップを取得する前に複数の LDM を使用するように構成する必要があります。ndbmtd はデフォルトでシングルスレッドモードで実行されます。 マルチスレッドデータノード構成パラメータ <code class="literal">MaxNoOfExecutionThreads</code> または <code class="literal">ThreadConfig</code> のいずれかに適切な設定を選択することで、複数の LDM を使用させることができます。 これらのパラメータを変更すると、クラスタの再起動が必要になることに注意してください。これはローリング再起動である場合があります。 
      </p><p>
        LDM の数やその他の要因によっては、<code class="literal">NoOfFragmentLogParts</code> を増やすことも必要になる場合があります。 大規模な「ディスクデータ」テーブルを使用している場合は、<code class="literal">DiskPageBufferMemory</code> も増やす必要がある場合があります。 シングルスレッドバックアップと同様に、<code class="literal">BackupDataBufferSize</code>、<code class="literal">BackupMemory</code> およびバックアップに関連するその他の構成パラメータの設定も必要または調整する必要があります (<a class="xref" href="mysql-cluster.html#mysql-cluster-backup-parameters" title="バックアップパラメータ">バックアップパラメータ</a> を参照)。 
      </p><p>
        すべてのデータノードが複数の LDM を使用している場合は、NDB 管理クライアントで <code class="literal">START BACKUP</code> コマンドを使用して並列バックアップを取ることができます。これは、データノードが <span class="command"><strong>ndbd</strong></span> (またはシングルスレッドモードで <span class="command"><strong>ndbmtd</strong></span> を実行している場合と同様です。追加または特殊な構文は必要なく、必要に応じて任意の組み合わせでバックアップ ID、待機オプション、またはスナップショットオプションを指定できます。
      </p><p>
        複数の LDM を使用したバックアップでは、サブディレクトリが作成されます。サブディレクトリは LDM ごとに、各データノードのディレクトリ <code class="filename">BACKUP/BACKUP-<em class="replaceable"><code>backup_id</code></em>/</code> (<code class="literal">BackupDataDir</code> の下にあります) の下に作成されます。これらのサブディレクトリの名前は <code class="filename">BACKUP-<em class="replaceable"><code>backup_id</code></em>-PART-1-OF-<em class="replaceable"><code>N</code></em>/</code>、<code class="filename">BACKUP-<em class="replaceable"><code>backup_id</code></em>-PART-2-OF-<em class="replaceable"><code>N</code></em>/</code>などで、<code class="filename">BACKUP-<em class="replaceable"><code>backup_id</code></em>-PART-<em class="replaceable"><code>N</code></em>-OF-<em class="replaceable"><code>N</code></em>/</code>までです。<em class="replaceable"><code>backup_id</code></em> は、このバックアップに使用されるバックアップ ID で、<em class="replaceable"><code>N</code></em> はデータノードごとの LDM の数です。 これらの各サブディレクトリには、通常のバックアップファイル <code class="literal">BACKUP-<em class="replaceable"><code>backup_id</code></em>-0.<em class="replaceable"><code>node_id</code></em>.Data</code>、<code class="literal">BACKUP-<em class="replaceable"><code>backup_id</code></em>.<em class="replaceable"><code>node_id</code></em>.ctl</code> および <code class="literal">BACKUP-backup_id.node_id.log</code> が含まれます。ここで、<em class="replaceable"><code>node_id</code></em> はこのデータノードのノード ID です。 
      </p><p>
        NDB 8.0.16 以降では、<span class="command"><strong>ndb_restore</strong></span> は、先ほど説明したサブディレクトリの存在を自動的にチェックします。見つかった場合は、バックアップの並列復元を試みます。 複数の LDM で作成されたバックアップのリストアの詳細は、<a class="xref" href="mysql-cluster.html#ndb-restore-parallel-data-node-backup" title="23.4.23.3 パラレルで作成されたバックアップからのリストア">セクション23.4.23.3「パラレルで作成されたバックアップからのリストア」</a> を参照してください。 
      </p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-cluster-mysqld"></a>23.5.9 NDB Cluster での MySQL Server の使用</h3></div></div></div><a class="indexterm" name="idm45563210597744"></a><a class="indexterm" name="idm45563210595616"></a><a class="indexterm" name="idm45563210593568"></a><a class="indexterm" name="idm45563210591520"></a><a class="indexterm" name="idm45563210590128"></a><p>
      <span class="command"><strong>mysqld</strong></span> は従来の MySQL サーバーのプロセスです。 NDB Cluster で使用するには、<a class="ulink" href="https://dev.mysql.com/downloads/" target="_top">https://dev.mysql.com/downloads/</a> から使用可能なプリコンパイル済みバイナリ内にあるため、<code class="literal">NDB</code> ストレージエンジンをサポートするように <span class="command"><strong>mysqld</strong></span> を構築する必要があります。 ソースから MySQL を構築する場合は、<code class="option">-DWITH_NDBCLUSTER=1</code> オプションを付けて <span class="command"><strong>CMake</strong></span> を呼び出して、<code class="literal">NDB</code> のサポートを含める必要があります。 
    </p><p>
      ソースから NDB Cluster をコンパイルする方法の詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-install-linux-source" title="23.2.1.4 Linux でのソースからの NDB Cluster の構築">セクション23.2.1.4「Linux でのソースからの NDB Cluster の構築」</a>、および <a class="xref" href="mysql-cluster.html#mysql-cluster-install-windows-source" title="23.2.2.2 Windows でのソースからの NDB Cluster のコンパイルとインストール">セクション23.2.2.2「Windows でのソースからの NDB Cluster のコンパイルとインストール」</a> を参照してください。
    </p><p>
      (NDB Cluster に関連するこのセクションで説明されているオプションと変数に加えて、<span class="command"><strong>mysqld</strong></span> のオプションと変数については、<a class="xref" href="mysql-cluster.html#mysql-cluster-options-variables" title="23.3.3.9 NDB Cluster の MySQL Server オプションおよび変数">セクション23.3.3.9「NDB Cluster の MySQL Server オプションおよび変数」</a> を参照してください。)
    </p><p>
      Cluster サポートを使用して <span class="command"><strong>mysqld</strong></span> バイナリを構築した場合、<code class="literal">NDBCLUSTER</code> ストレージエンジンはまだデフォルトで無効になっています。 次の 2 つの指定可能なオプションのいずれかを使用すると、このエンジンを有効にできます。 
    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          <span class="command"><strong>mysqld</strong></span> を起動する際に、コマンド行で起動オプションとして <code class="option">--ndbcluster</code> を使用します。
        </p></li><li class="listitem"><p>
          <code class="filename">my.cnf</code> ファイルの <code class="literal">[mysqld]</code> セクションに <code class="literal">ndbcluster</code> を含む行を挿入します。
        </p></li></ul></div><p>
      <code class="literal">NDBCLUSTER</code> ストレージエンジンを有効にしてサーバーが実行されていることを確認する簡単な方法は、MySQL Monitor (<span class="command"><strong>mysql</strong></span>) で <code class="literal">SHOW ENGINES</code> ステートメントを発行することです。 <code class="literal">NDBCLUSTER</code> の行に、<code class="literal">Support</code> 値として値 <code class="literal">YES</code> が表示されます。 この行に <code class="literal">NO</code> が表示される場合や、このような行が出力に表示されない場合は、<code class="literal">NDB</code> 対応の MySQL バージョンが動作していません。 この行に <code class="literal">DISABLED</code> が表示される場合は、先ほど説明した 2 つの方法のいずれかを使用して有効にする必要があります。 
    </p><a class="indexterm" name="idm45563210560592"></a><a class="indexterm" name="idm45563210558816"></a><a class="indexterm" name="idm45563210557360"></a><p>
      クラスタ構成データを読み取るには、MySQL サーバーに少なくとも次の 3 つの情報が必要です。
    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          MySQL サーバー自身のクラスタノード ID
        </p></li><li class="listitem"><p>
          管理サーバーのホスト名または IP アドレス
        </p></li><li class="listitem"><p>
          管理サーバーに接続できる TCP/IP ポートの数
        </p></li></ul></div><p>
      ノード ID は動的に割り当てられるため、明示的に指定する必要は厳密にはありません。
    </p><p>
      接続文字列を指定するには、<span class="command"><strong>mysqld</strong></span> の起動時にコマンド行で、または <code class="filename">my.cnf</code> 内に、<span class="command"><strong>mysqld</strong></span> パラメータ <code class="literal">ndb-connectstring</code> を使用します。 接続文字列には、管理サーバーを検出できるホスト名または IP アドレス、および使用される TCP/IP ポートが含まれます。 
    </p><p>
      次の例では、<code class="literal">ndb_mgmd.mysql.com</code> は管理サーバーが存在するホストであり、管理サーバーはポート 1186 でクラスタメッセージを待機します。
    </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>mysqld --ndbcluster --ndb-connectstring=ndb_mgmd.mysql.com:1186</code></strong>
</pre><p>
      接続文字列の詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-connection-strings" title="23.3.3.3 NDB Cluster 接続文字列">セクション23.3.3.3「NDB Cluster 接続文字列」</a>を参照してください。
    </p><p>
      この情報を指定すると、MySQL サーバーはクラスタの完全な参加者として機能できます。 (この方法で実行している <span class="command"><strong>mysqld</strong></span> プロセスは、多くの場合 SQL ノードと呼んでいます。) すべてのクラスタデータノードとそのステータスを完全に認識し、すべてのデータノードへの接続を確立します。 この場合、任意のデータノードをトランザクションコーディネータとして使用し、ノードデータを読み取って更新できます。 
    </p><p>
      <span class="command"><strong>mysql</strong></span> クライアントで <code class="literal">SHOW PROCESSLIST</code> を使用すると、MySQL サーバーがクラスタに接続されているかどうかを確認できます。 MySQL サーバーがクラスタに接続されていて、<code class="literal">PROCESS</code> 権限を持っている場合は、出力の最初の行が次のように表示されます。 
    </p><pre class="programlisting">mysql&gt; SHOW PROCESSLIST \G
*************************** 1. row ***************************
     Id: 1
   User: system user
   Host:
     db:
Command: Daemon
   Time: 1
  State: Waiting for event from ndbcluster
   Info: NULL
</pre><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">重要</div><p>
        NDB Cluster に参加するには、オプション <code class="option">--ndbcluster</code> および <code class="option">--ndb-connectstring</code> (または <code class="filename">my.cnf</code> での同等のもの) を <span class="emphasis"><em>both</em></span> で <span class="command"><strong>mysqld</strong></span> プロセスを起動する必要があります。 <code class="option">--ndbcluster</code> オプションのみを付けて <span class="command"><strong>mysqld</strong></span> が起動された場合や、それがクラスタに接続できない場合は、ストレージエンジンに関係なく、<code class="literal">NDB</code> テーブルを操作することも、<span class="emphasis"><em>新しいテーブルを作成することもできません</em></span>。 後者の制約は、SQL ノードがクラスタに接続されていない間に、<code class="literal">NDB</code> テーブルと同じ名前を持つテーブルが作成されることを防ぐ目的の安全対策です。 <span class="command"><strong>mysqld</strong></span> プロセスが NDB Cluster に参加していないときに別のストレージエンジンを使用してテーブルを作成する場合は、サーバー<span class="emphasis"><em>なし</em></span>を <code class="option">--ndbcluster</code> オプションで再起動する必要があります。 
      </p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-cluster-disk-data"></a>23.5.10 NDB Cluster ディスクデータテーブル</h3></div></div></div><div class="toc"><dl class="toc"><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-disk-data-objects">23.5.10.1 NDB Cluster ディスクデータオブジェクト</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-disk-data-storage-requirements">23.5.10.2 NDB Cluster ディスクデータストレージの要件</a></span></dt></dl></div><a class="indexterm" name="idm45563210523232"></a><a class="indexterm" name="idm45563210521744"></a><a class="indexterm" name="idm45563210519216"></a><p>
      NDB Cluster は、RAM ではなく、<code class="literal">NDB</code> テーブルのインデックスなしカラムのディスクへの格納をサポートしています。 次のセクションで説明するように、カラムデータおよびロギングメタデータは、テーブルスペースおよびログファイルグループとして概念化されたデータファイルおよび undo ログファイルに保持されます。<a class="xref" href="mysql-cluster.html#mysql-cluster-disk-data-objects" title="23.5.10.1 NDB Cluster ディスクデータオブジェクト">セクション23.5.10.1「NDB Cluster ディスクデータオブジェクト」</a> を参照してください。 
    </p><p>
      NDB Cluster ディスクデータのパフォーマンスは、多数の構成パラメータの影響を受ける可能性があります。 これらのパラメータとその効果の詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndbd-definition-disk-data-parameters" title="ディスクデータの構成パラメータ">ディスクデータの構成パラメータ</a> および <a class="xref" href="mysql-cluster.html#mysql-cluster-ndbd-definition-gcp-stop-errors" title="ディスクデータと GCP 停止エラー">ディスクデータと GCP 停止エラー</a> を参照してください。 
    </p><p>
      NDB 8.0.19 以降では、ディスクデータファイルに個別のディスクを使用する場合は、<code class="literal">DiskDataUsingSameDisk</code> データノード構成パラメータも <code class="literal">false</code> に設定するようにしてください。
    </p><p>
      <a class="xref" href="mysql-cluster.html#mysql-cluster-ndbd-disk-data-filesystem-parameters" title="ディスクデータのファイルシステムパラメータ">ディスクデータのファイルシステムパラメータ</a>も参照してください。
    </p><p>
      NDB 8.0.19 以降では、ソリッドステートドライブ、特に NVMe を使用するドライブで「ディスクデータ」テーブルを使用する場合のサポートが向上しています。 詳細は、次のドキュメントを参照してください: 
    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          <a class="xref" href="mysql-cluster.html#mysql-cluster-ndbd-definition-disk-data-latency-parameters" title="ディスクデータ待機時間パラメータ">ディスクデータ待機時間パラメータ</a>
        </p></li><li class="listitem"><p>
          <a class="xref" href="mysql-cluster.html#mysql-cluster-ndbinfo-diskstat" title="23.5.14.28 ndbinfo diskstat テーブル">セクション23.5.14.28「ndbinfo diskstat テーブル」</a>
        </p></li><li class="listitem"><p>
          <a class="xref" href="mysql-cluster.html#mysql-cluster-ndbinfo-diskstats-1sec" title="23.5.14.29 ndbinfo diskstats_1sec テーブル">セクション23.5.14.29「ndbinfo diskstats_1sec テーブル」</a>
        </p></li><li class="listitem"><p>
          <a class="xref" href="mysql-cluster.html#mysql-cluster-ndbinfo-pgman-time-track-stats" title="23.5.14.40 ndbinfo pgman_time_track_stats テーブル">セクション23.5.14.40「ndbinfo pgman_time_track_stats テーブル」</a>
        </p></li></ul></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-disk-data-objects"></a>23.5.10.1 NDB Cluster ディスクデータオブジェクト</h4></div></div></div><p>
        NDB Cluster ディスクデータストレージは、次のオブジェクトを使用して実装されます:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <span class="firstterm">テーブルスペース</span>: ほかのディスクデータオブジェクトのコンテナとして機能します。 テーブルスペースには、1 つ以上のデータファイルと 1 つ以上の undo ログファイルグループが含まれます。 
          </p></li><li class="listitem"><p>
            <span class="firstterm">データファイル</span>: カラムデータを格納します。 データファイルは、テーブルスペースに直接割り当てられます。 
          </p></li><li class="listitem"><p>
            <span class="firstterm">undo ログファイル</span>: トランザクションのロールバックに必要な undo 情報が含まれます。 undo ログファイルグループに割り当てられます。 
          </p></li><li class="listitem"><p>
            <span class="firstterm">log file group</span>: 1 つ以上の undo ログファイルが含まれています。 テーブルスペースに割り当てられます。 
          </p></li></ul></div><p>
        undo ログファイルとデータファイルは、各データノードのファイルシステム内の実際のファイルです。デフォルトでは、NDB Cluster <code class="filename">config.ini</code> ファイルで指定された <em class="replaceable"><code>DataDir</code></em> 内の <code class="literal">ndb_<em class="replaceable"><code>node_id</code></em>_fs</code> に配置され、<em class="replaceable"><code>node_id</code></em> はデータノードのノード ID です。 Undo ログファイルまたはデータファイルの作成時に、ファイル名の一部として絶対パスまたは相対パスを指定すると、これらを別の場所に配置できます。 これらのファイルを作成するステートメントは、このセクションの後半で示します。 
      </p><p>
        undo ログファイルは「ディスクデータ」テーブルでのみ使用され、メモリーにのみ格納されている <code class="literal">NDB</code> テーブルでは不要または使用されません。
      </p><p>
        「NDB Cluster」テーブルスペースおよびログファイルグループは、ファイルとして実装されません。
      </p><p>
        すべてのディスクデータオブジェクトがファイルとして実装されるとはかぎりませんが、すべてが同じ名前空間を共有します。 つまり、<span class="emphasis"><em>各ディスクデータオブジェクト</em></span>は (単に、特定の型の各ディスクデータオブジェクトというだけでなく)、一意の名前が付けられている必要があります。 たとえば、テーブルスペースとログファイルグループの両方に <code class="literal">dd1</code> という名前を付けることはできません。 
      </p><p>
        すべてのノード (管理ノードおよび SQL ノードを含む) で「NDB Cluster」をすでに設定している場合、ディスクに「NDB Cluster」テーブルを作成する基本的なステップは次のとおりです:
      </p><a class="indexterm" name="idm45563210481392"></a><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
            ログファイルグループを作成し、それに 1 つ以上の Undo ログファイルを割り当てます (Undo ログファイルは、<span class="firstterm">undofile</span> と呼ばれることもあります)。
          </p></li><li class="listitem"><p>
            テーブルスペースを作成し、そのテーブルスペースにログファイルグループおよび 1 つ以上のデータファイルを割り当てます。
          </p></li><li class="listitem"><p>
            データストレージ用に、このテーブルスペースを使用するディスクデータテーブルを作成します。
          </p></li></ol></div><p>
        これらの各タスクは、次の例に示すように、<span class="command"><strong>mysql</strong></span> クライアントまたはその他の MySQL クライアントアプリケーションで SQL ステートメントを使用することで実現できます。
      </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
            <a class="indexterm" name="idm45563210470864"></a> <code class="literal">CREATE LOGFILE GROUP</code> を使用して、<code class="literal">lg_1</code> という名前のログファイルグループを作成します。 このログファイルグループは、<code class="filename">undo_1.log</code> および <code class="filename">undo_2.log</code> という名前の 2 つの Undo ログファイルで構成されます。初期サイズは、それぞれ 16M バイトと 12M バイトです。 (Undo ログファイルのデフォルト初期サイズは128M バイトです。) 必要に応じて、ログファイルグループの undo バッファのサイズを指定したり、デフォルト値の 8 MB を想定することもできます。 この例では、UNDO バッファサイズを 2 MB に設定します。 ログファイルグループは、Undo ログファイルとともに作成する必要があります。そのため、次の <code class="literal">CREATE LOGFILE GROUP</code> ステートメントで <code class="filename">undo_1.log</code> を <code class="literal">lg_1</code> に追加しています。 
          </p><pre class="programlisting">CREATE LOGFILE GROUP lg_1
    ADD UNDOFILE 'undo_1.log'
    INITIAL_SIZE 16M
    UNDO_BUFFER_SIZE 2M
    ENGINE NDBCLUSTER;
</pre><p>
            ログファイルグループに <code class="filename">undo_2.log</code> を追加するには、次の <code class="literal">ALTER LOGFILE GROUP</code> ステートメントを使用します。
          </p><pre class="programlisting">ALTER LOGFILE GROUP lg_1
    ADD UNDOFILE 'undo_2.log'
    INITIAL_SIZE 12M
    ENGINE NDBCLUSTER;
</pre><p>
            いくつかの注意事項:
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                ここで使用される <code class="filename">.log</code> ファイル拡張子は必須ではありません。 ログファイルを簡単に認識できるようにするだけで済みます。 
              </p></li><li class="listitem"><p>
                すべての <code class="literal">CREATE LOGFILE GROUP</code> および <code class="literal">ALTER LOGFILE GROUP</code> ステートメントに <code class="literal">ENGINE</code> オプションが含まれている必要があります。 このオプションに指定できる値は、<code class="literal">NDBCLUSTER</code> および <code class="literal">NDB</code> のみです。 
              </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">重要</div><p>
                  常に同じ NDB Cluster 内に最大 1 つのログファイルグループが存在できます。
                </p></div></li><li class="listitem"><p>
                <code class="literal">ADD UNDOFILE '<em class="replaceable"><code>filename</code></em>'</code> を使用して、ログファイルグループに Undo ログファイルを追加すると、クラスタ内の各データノードの <code class="literal">DataDir</code> 内にある <code class="literal">ndb_<em class="replaceable"><code>node_id</code></em>_fs</code> ディレクトリに、<em class="replaceable"><code>filename</code></em> という名前のファイルが作成されます。ここで、<em class="replaceable"><code>node_id</code></em> はデータノードのノード ID です。 各 Undo ログファイルのサイズは、SQL ステートメントで指定されます。 たとえば、NDB Cluster に 4 つのデータノードがある場合、示されている <code class="literal">ALTER LOGFILE GROUP</code> ステートメントは 4 つの undo ログファイルを作成し、それぞれ 4 つのデータノードのデータディレクトリに 1 つずつ作成します。これらの各ファイルの名前は <code class="filename">undo_2.log</code> で、各ファイルのサイズは 12 MB です。 
              </p></li><li class="listitem"><p>
                <code class="literal">UNDO_BUFFER_SIZE</code> は、使用可能なシステムメモリーの量によって制限されます。
              </p></li><li class="listitem"><p>
                これらのステートメントの詳細は、<a class="xref" href="sql-statements.html#create-logfile-group" title="13.1.16 CREATE LOGFILE GROUP ステートメント">セクション13.1.16「CREATE LOGFILE GROUP ステートメント」</a> および <a class="xref" href="sql-statements.html#alter-logfile-group" title="13.1.6 ALTER LOGFILE GROUP ステートメント">セクション13.1.6「ALTER LOGFILE GROUP ステートメント」</a> を参照してください。
              </p></li></ul></div></li><li class="listitem"><p>
            <a class="indexterm" name="idm45563210434608"></a>では、「ディスクデータ」テーブルがデータを格納するために使用するファイルの抽象コンテナであるテーブルスペースを作成できるようになりました。 テーブルスペースは特定のログファイルグループに関連付けられます。新しいテーブルスペースを作成する場合は、undo ロギングに使用するログファイルグループを指定する必要があります。 少なくとも 1 つのデータファイルを指定する必要もあります。テーブルスペースの作成後に、テーブルスペースにデータファイルを追加できます。 テーブルスペースからデータファイルを削除することもできます (このセクションの後半の例を参照)。 
          </p><p>
            ログファイルグループとして <code class="literal">lg_1</code> を使用する <code class="literal">ts_1</code> という名前のテーブルスペースを作成すると仮定します。 テーブルスペースには、初期サイズがそれぞれ 32 MB および 48 MB の <code class="filename">data_1.dat</code> および <code class="filename">data_2.dat</code> という名前の 2 つのデータファイルが含まれるようにします。 (<code class="literal">INITIAL_SIZE</code> のデフォルトの値は 128M バイトです。) これは、次に示すように、2 つの SQL ステートメントを使用することで実行できます。 
          </p><pre class="programlisting">CREATE TABLESPACE ts_1
    ADD DATAFILE 'data_1.dat'
    USE LOGFILE GROUP lg_1
    INITIAL_SIZE 32M
    ENGINE NDBCLUSTER;

ALTER TABLESPACE ts_1
    ADD DATAFILE 'data_2.dat'
    INITIAL_SIZE 48M;
</pre><p>
            <code class="literal">CREATE TABLESPACE</code> ステートメントは、データファイル <code class="filename">data_1.dat</code> を含むテーブルスペース <code class="literal">ts_1</code> を作成し、<code class="literal">ts_1</code> をログファイルグループ <code class="literal">lg_1</code> に関連付けます。 <code class="literal">ALTER TABLESPACE</code> は、2 つめのデータファイル (<code class="filename">data_2.dat</code>) を追加します。 
          </p><p>
            いくつかの注意事項:
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                undo ログファイルにこの例で使用されている <code class="filename">.log</code> ファイル拡張子と同様に、<code class="filename">.dat</code> ファイル拡張子には特別な意味はなく、認識しやすいようにのみ使用されます。
              </p></li><li class="listitem"><p>
                <code class="literal">ADD DATAFILE '<em class="replaceable"><code>filename</code></em>'</code> を使用して、テーブルスペースにデータファイルを追加すると、クラスタ内の各データノードの <code class="literal">DataDir</code> 内にある <code class="literal">ndb_<em class="replaceable"><code>node_id</code></em>_fs</code> ディレクトリに、<em class="replaceable"><code>filename</code></em> という名前のファイルが作成されます。ここで、<em class="replaceable"><code>node_id</code></em> はデータノードのノード ID です。 各データファイルのサイズは、SQL ステートメントで指定します。 たとえば、NDB Cluster に 4 つのデータノードがある場合、示されている <code class="literal">ALTER TABLESPACE</code> ステートメントは、4 つのデータファイルを作成し、それぞれ 4 つの各データノードのデータディレクトリに 1 つずつ作成します。これらの各ファイルの名前は <code class="filename">data_2.dat</code> で、各ファイルのサイズは 48 MB です。 
              </p></li><li class="listitem"><p>
                <code class="literal">NDB</code> は、データノードの再起動時に使用するために各テーブルスペースの 4% を予約します。 この領域はデータの格納には使用できません。 
              </p></li><li class="listitem"><p>
                <code class="literal">CREATE TABLESPACE</code> ステートメントには <code class="literal">ENGINE</code> 句を含める必要があります。テーブルスペースに作成できるのは、テーブルスペースと同じストレージエンジンを使用するテーブルのみです。 <code class="literal">ALTER TABLESPACE</code> では、<code class="literal">ENGINE</code> 句は受け入れられますが、非推奨であり、将来のリリースで削除される可能性があります。 <code class="literal">NDB</code> テーブルスペースの場合、このオプションに使用できる値は <code class="literal">NDBCLUSTER</code> および <code class="literal">NDB</code> のみです。 
              </p></li><li class="listitem"><p>
                NDB 8.0.20 以降では、エクステントの割り当ては、特定のテーブルスペースで使用されるすべてのデータファイル間でラウンドロビン方式で実行されます。
              </p></li><li class="listitem"><p>
                <code class="literal">CREATE TABLESPACE</code> および <code class="literal">ALTER TABLESPACE</code> ステートメントについての詳細は、<a class="xref" href="sql-statements.html#create-tablespace" title="13.1.21 CREATE TABLESPACE ステートメント">セクション13.1.21「CREATE TABLESPACE ステートメント」</a>および<a class="xref" href="sql-statements.html#alter-tablespace" title="13.1.10 ALTER TABLESPACE ステートメント">セクション13.1.10「ALTER TABLESPACE ステートメント」</a>を参照してください。
              </p></li></ul></div></li><li class="listitem"><p>
            <a class="indexterm" name="idm45563210392064"></a>テーブルスペース <code class="literal">ts_1</code> のファイルを使用して、インデックス付けされていないカラムがディスクに格納されているテーブルを作成できるようになりました:
          </p><pre class="programlisting">CREATE TABLE dt_1 (
    member_id INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
    last_name VARCHAR(50) NOT NULL,
    first_name VARCHAR(50) NOT NULL,
    dob DATE NOT NULL,
    joined DATE NOT NULL,
    INDEX(last_name, first_name)
    )
    TABLESPACE ts_1 STORAGE DISK
    ENGINE NDBCLUSTER;
</pre><p>
            <code class="literal">TABLESPACE ts_1 STORAGE DISK</code> は、ディスク上のデータ記憶域にテーブルスペース <code class="literal">ts_1</code> を使用するように <code class="literal">NDB</code> ストレージエンジンに指示します。
          </p><p>
            次のようにテーブル <code class="literal">ts_1</code> が作成されたら、その他の MySQL テーブルの場合と同様に、<code class="literal">INSERT</code>、<code class="literal">SELECT</code>、<code class="literal">UPDATE</code>、および <code class="literal">DELETE</code> ステートメントを実行できます。
          </p><p>
            <code class="literal">CREATE TABLE</code> ステートメントまたは <code class="literal">ALTER TABLE</code> ステートメントのカラム定義の一部として <code class="literal">STORAGE</code> 句を使用して、個々のカラムをディスクに格納するかメモリーに格納するかを指定することもできます。 <code class="literal">STORAGE DISK</code> を指定するとカラムはディスク上に格納され、<code class="literal">STORAGE MEMORY</code> を指定するとインメモリーストレージが使用されます。 詳細は、<a class="xref" href="sql-statements.html#create-table" title="13.1.20 CREATE TABLE ステートメント">セクション13.1.20「CREATE TABLE ステートメント」</a>を参照してください。 
          </p></li></ol></div><p>
        次に示すように、<code class="literal">INFORMATION_SCHEMA</code> データベースの <code class="literal">FILES</code> テーブルをクエリーすることで、作成した <code class="literal">NDB</code> ディスクデータファイルおよび undo ログファイルに関する情報を取得できます:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT</code></strong>
              <strong class="userinput"><code>FILE_NAME AS File, FILE_TYPE AS Type,</code></strong>
              <strong class="userinput"><code>TABLESPACE_NAME AS Tablespace, TABLE_NAME AS Name,</code></strong>
              <strong class="userinput"><code>LOGFILE_GROUP_NAME AS 'File group',</code></strong>
              <strong class="userinput"><code>FREE_EXTENTS AS Free, TOTAL_EXTENTS AS Total</code></strong>
          <strong class="userinput"><code>FROM INFORMATION_SCHEMA.FILES</code></strong>
          <strong class="userinput"><code>WHERE ENGINE='ndbcluster';</code></strong>
+--------------+----------+------------+------+------------+------+---------+
| File         | Type     | Tablespace | Name | File group | Free | Total   |
+--------------+----------+------------+------+------------+------+---------+
| ./undo_1.log | UNDO LOG | lg_1       | NULL | lg_1       |    0 | 4194304 |
| ./undo_2.log | UNDO LOG | lg_1       | NULL | lg_1       |    0 | 3145728 |
| ./data_1.dat | DATAFILE | ts_1       | NULL | lg_1       |   32 |      32 |
| ./data_2.dat | DATAFILE | ts_1       | NULL | lg_1       |   48 |      48 |
+--------------+----------+------------+------+------------+------+---------+
4 rows in set (0.00 sec)
</pre><p>
        詳細および例については、<a class="xref" href="information-schema.html#information-schema-files-table" title="26.15 INFORMATION_SCHEMA FILES テーブル">セクション26.15「INFORMATION_SCHEMA FILES テーブル」</a>を参照してください。
      </p><p><b>ディスクに暗黙的に格納されたカラムのインデックス付け. </b>
          前述の例で定義されているテーブル <code class="literal">dt_1</code> の場合、<code class="literal">dob</code> および <code class="literal">joined</code> カラムのみがディスクに格納されます。 この理由は、<code class="literal">id</code>、<code class="literal">last_name</code>、および <code class="literal">first_name</code> カラムにインデックスがあるため、これらのカラムに属するデータが RAM 内に格納されるためです。 インデックス付けされていないカラムのみをディスクに保持できます。インデックスおよびインデックス付けされたカラムデータは引き続きメモリーに格納されます。 インデックスの使用と RAM の保存のこのようなトレードオフは、ディスクデータテーブルを設計する際に留意する必要があります。 
        </p><p>
        最初に記憶域タイプを <code class="literal">MEMORY</code> に変更しないと、明示的に宣言された <code class="literal">STORAGE DISK</code> のカラムにインデックスを追加できません。追加しようとすると、エラーで失敗します。 <span class="emphasis"><em>暗黙的</em></span>がディスク記憶域を使用するカラムにはインデックスを付けることができます。その場合、カラム記憶域タイプは自動的に <code class="literal">MEMORY</code> に変更されます。 <span class="quote">「<span class="quote">「暗黙的」</span>」</span>では、記憶域タイプが宣言されていないが、親テーブルから継承されるカラムを意味します。 次の CREATE TABLE ステートメント (以前に定義したテーブルスペース <code class="literal">ts_1</code> を使用) では、カラム <code class="literal">c2</code> および <code class="literal">c3</code> は暗黙的にディスク記憶域を使用します: 
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>CREATE TABLE ti (</code></strong>
    -&gt;     <strong class="userinput"><code>c1 INT PRIMARY KEY,</code></strong>
    -&gt;     <strong class="userinput"><code>c2 INT,</code></strong>
    -&gt;     <strong class="userinput"><code>c3 INT,</code></strong>
    -&gt;     <strong class="userinput"><code>c4 INT</code></strong>
    -&gt; <strong class="userinput"><code>)</code></strong>
    -&gt;     <strong class="userinput"><code>STORAGE DISK</code></strong>
    -&gt;     <strong class="userinput"><code>TABLESPACE ts_1</code></strong>
    -&gt;     <strong class="userinput"><code>ENGINE NDBCLUSTER;</code></strong>
Query OK, 0 rows affected (1.31 sec)
</pre><p>
        <code class="literal">c2</code>、<code class="literal">c3</code> および <code class="literal">c4</code> 自体は <code class="literal">STORAGE DISK</code> で宣言されていないため、インデックス付けできます。 ここでは、<code class="literal">CREATE INDEX</code> および <code class="literal">ALTER TABLE</code> をそれぞれ使用して、<code class="literal">c2</code> および <code class="literal">c3</code> にインデックスを追加します: 
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>CREATE INDEX i1 ON ti(c2);</code></strong>
Query OK, 0 rows affected (2.72 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql&gt; <strong class="userinput"><code>ALTER TABLE ti ADD INDEX i2(c3);</code></strong>
Query OK, 0 rows affected (0.92 sec)
Records: 0  Duplicates: 0  Warnings: 0
</pre><p>
        <code class="literal">SHOW CREATE TABLE</code> により、インデックスが追加されたことが確認されます。
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW CREATE TABLE ti\G</code></strong>
*************************** 1. row ***************************
       Table: ti
Create Table: CREATE TABLE `ti` (
  `c1` int(11) NOT NULL,
  `c2` int(11) DEFAULT NULL,
  `c3` int(11) DEFAULT NULL,
  `c4` int(11) DEFAULT NULL,
  PRIMARY KEY (`c1`),
  KEY `i1` (`c2`),
  KEY `i2` (`c3`)
) /*!50100 TABLESPACE `ts_1` STORAGE DISK */ ENGINE=ndbcluster DEFAULT CHARSET=latin1
1 row in set (0.00 sec)
</pre><p>
        インデックス付けされたカラム (強調されたテキスト) がディスク上の記憶域ではなくインメモリーを使用するようになったことを、<span class="command"><strong>ndb_desc</strong></span> を使用して確認できます:
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>./ndb_desc -d test t1</code></strong>
-- t1 --
Version: 33554433
Fragment type: HashMapPartition
K Value: 6
Min load factor: 78
Max load factor: 80
Temporary table: no
Number of attributes: 4
Number of primary keys: 1
Length of frm data: 317
Max Rows: 0
Row Checksum: 1
Row GCI: 1
SingleUserMode: 0
ForceVarPart: 1
PartitionCount: 4
FragmentCount: 4
PartitionBalance: FOR_RP_BY_LDM
ExtraRowGciBits: 0
ExtraRowAuthorBits: 0
TableStatus: Retrieved
Table options:
HashMap: DEFAULT-HASHMAP-3840-4
-- Attributes --
c1 Int PRIMARY KEY DISTRIBUTION KEY AT=FIXED ST=MEMORY
<span class="emphasis"><em>c2 Int NULL AT=FIXED ST=MEMORY
c3 Int NULL AT=FIXED ST=MEMORY</em></span>
c4 Int NULL AT=FIXED ST=DISK
-- Indexes --
PRIMARY KEY(c1) - UniqueHashIndex
i2(c3) - OrderedIndex
PRIMARY(c1) - OrderedIndex
i1(c2) - OrderedIndex

NDBT_ProgramExit: 0 - OK
</pre><p><b>パフォーマンスに関する注意. </b>
          データノードファイルシステムから分離された物理ディスク上にディスクデータファイルが保持されている場合、ディスクデータストレージを使用しているクラスタのパフォーマンスが大幅に改善されます。 顕著な利点を引き出すには、クラスタ内のデータノードごとに、これを実行する必要があります。 
        </p><p>
        <code class="literal">ADD UNDOFILE</code> および <code class="literal">ADD DATAFILE</code> では、絶対および相対ファイルシステムパスを使用できます。相対パスは、データノードデータディレクトリに関して計算されます。
      </p><p>
        これらを使用しているログファイルグループ、テーブルスペース、およびディスクデータテーブルは、特定の順序で作成する必要があります。 これは、これらのオブジェクト (次の制約の対象) を削除する場合にも当てはまります: 
      </p><a class="indexterm" name="idm45563210320000"></a><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            ログファイルグループは、テーブルスペースで使用されているかぎり削除できません。
          </p></li><li class="listitem"><p>
            テーブルスペースは、データファイルを格納しているかぎり、削除できません。
          </p></li><li class="listitem"><p>
            テーブルスペースを使用しているテーブルが残っているかぎり、テーブルスペースからどのデータファイルも削除できません。
          </p></li><li class="listitem"><p>
            ファイルが作成されたテーブルスペース以外の別のテーブルスペースと関連して作成されたファイルは削除できません。
          </p></li></ul></div><p>
        たとえば、このセクションでこれまでに作成したすべてのオブジェクトを削除するには、次のステートメントを使用できます:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>DROP TABLE dt_1;</code></strong>

mysql&gt; <strong class="userinput"><code>ALTER TABLESPACE ts_1</code></strong>
    -&gt; <strong class="userinput"><code>DROP DATAFILE 'data_2.dat'</code></strong>
    -&gt; <strong class="userinput"><code>ENGINE NDBCLUSTER;</code></strong>

mysql&gt; <strong class="userinput"><code>ALTER TABLESPACE ts_1</code></strong>
    -&gt; <strong class="userinput"><code>DROP DATAFILE 'data_1.dat'</code></strong>
    -&gt; <strong class="userinput"><code>ENGINE NDBCLUSTER;</code></strong>

mysql&gt; <strong class="userinput"><code>DROP TABLESPACE ts_1</code></strong>
    -&gt; <strong class="userinput"><code>ENGINE NDBCLUSTER;</code></strong>

mysql&gt; <strong class="userinput"><code>DROP LOGFILE GROUP lg_1</code></strong>
    -&gt; <strong class="userinput"><code>ENGINE NDBCLUSTER;</code></strong>
</pre><p>
        これらのステートメントは、ここで示した順序で実行する必要があります。ただし、2 つの <code class="literal">ALTER TABLESPACE ... DROP DATAFILE</code> ステートメントは、どちらの順序でも実行できます。
      </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-disk-data-storage-requirements"></a>23.5.10.2 NDB Cluster ディスクデータストレージの要件</h4></div></div></div><p>
        <a class="indexterm" name="idm45563210300400"></a>ディスクデータストレージの要件には、次の項目が適用されます:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            ディスクデータテーブルの可変長カラムは、固定の容量を占有します。 これは、行ごとに、そのカラムで可能性のある最大値を格納するために必要な容量に等しくなります。 
          </p><p>
            このような値の計算に関する一般的な情報については、<a class="xref" href="data-types.html#storage-requirements" title="11.7 データ型のストレージ要件">セクション11.7「データ型のストレージ要件」</a>を参照してください。
          </p><p>
            <code class="literal">INFORMATION_SCHEMA.FILES</code> テーブルをクエリーして、データファイルおよび Undo ログファイルで使用可能な推定容量を取得できます。 詳細および例については、<a class="xref" href="information-schema.html#information-schema-files-table" title="26.15 INFORMATION_SCHEMA FILES テーブル">セクション26.15「INFORMATION_SCHEMA FILES テーブル」</a>を参照してください。 
          </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
              <code class="literal">OPTIMIZE TABLE</code> ステートメントを実行しても、ディスクデータテーブルは影響を受けません。
            </p></div></li><li class="listitem"><p>
            ディスクデータテーブルでは、<code class="literal">TEXT</code> または <code class="literal">BLOB</code> カラムの最初の 256 バイトがメモリー内に格納され、その残りだけがディスク上に格納されます。
          </p></li><li class="listitem"><p>
            ディスクデータテーブル内の各行では、ディスク上に格納されたデータを指すためにメモリー内の 8 バイトが使用されます。 つまり、場合によっては、インメモリーカラムをディスクベースの形式に変換すれば、実際にメモリーの使用率を改善できます。 たとえば、<code class="literal">CHAR(4)</code> カラムをメモリーベースの形式からディスクベースの形式に変換すると、1 行当たりに使用される <code class="literal">DataMemory</code> の量が 4 バイトから 8 バイトに増加します。 
          </p></li></ul></div><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">重要</div><p>
          <code class="option">--initial</code> オプションを付けてクラスタを起動しても、ディスクデータファイルは削除され<span class="emphasis"><em>ません</em></span>。 クラスタの初期再起動を実行する前に、これらを手動で削除する必要があります。 
        </p></div><p>
        <code class="literal">DiskPageBufferMemory</code> のサイズが十分にあることを確認して、ディスクシークの回数を最小限に抑えると、ディスクデータテーブルのパフォーマンスを改善できます。 <code class="literal">diskpagebuffer</code> テーブルをクエリーすると、このパラメータの値を大きくする必要があるかどうかを判断する際に役立ちます。 
      </p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-cluster-online-operations"></a>23.5.11 NDB Cluster での ALTER TABLE を使用したオンライン操作</h3></div></div></div><p>
      MySQL NDB Cluster 8.0 は、MySQL Server (<code class="literal">ALGORITHM=DEFAULT|INPLACE|COPY</code>) で採用され、ほかで説明されている標準の <code class="literal">ALTER TABLE</code> 構文を使用して、オンラインテーブルスキーマの変更をサポートします。
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
        NDB Cluster の一部の旧リリースでは、オンライン <code class="literal">ALTER TABLE</code> 操作に <code class="literal">NDB</code> 固有の構文が使用されていました。 その構文は削除されました。 
      </p></div><p>
      <code class="literal">NDB</code> テーブルの可変幅カラム上のインデックスを追加および削除する操作はオンラインで実行されます。 オンライン操作はコピーなしです。つまり、インデックスを再作成する必要はありません。 NDB Cluster 内のほかの API ノードによるアクセスから変更されるテーブルはロックされません (ただし、このセクションの後半の <a class="xref" href="mysql-cluster.html#mysql-cluster-online-limitations" title="NDB オンライン操作の制限">NDB オンライン操作の制限</a> を参照してください)。 このような操作では、複数の API ノードを含む NDB クラスタで行われた <code class="literal">NDB</code> テーブルの変更にシングルユーザーモードは必要ありません。トランザクションは、オンライン DDL 操作中も中断なく続行できます。 
    </p><p>
      <code class="literal">ALGORITHM=INPLACE</code> を使用して、<code class="literal">NDB</code> テーブルに対してオンラインの <code class="literal">ADD COLUMN</code>、<code class="literal">ADD INDEX</code> (<code class="literal">CREATE INDEX</code> ステートメントを含む) および <code class="literal">DROP INDEX</code> 操作を実行できます。 また、<code class="literal">NDB</code> テーブルのオンラインでの名前変更もサポートされます。 
    </p><p>
      以前は、<code class="literal">NDB</code> テーブルのカラムの名前をオンラインで変更できませんでした。この制限は NDB 8.0.18 では削除されています。
    </p><p>
      現在、ディスクベースのカラムを <code class="literal">NDB</code> テーブルにオンラインで追加することはできません。 つまり、テーブルレベルの <code class="literal">STORAGE DISK</code> オプションを使用する <code class="literal">NDB</code> テーブルにインメモリーカラムを追加する場合は、新しいカラムをメモリーベースのストレージの使用として明示的に宣言する必要があります。 たとえば、すでにテーブルスペース <code class="literal">ts1</code> を作成していると仮定して、テーブル <code class="literal">t1</code> を次のように作成するとします。 
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>CREATE TABLE t1 (</code></strong>
     &gt;     <strong class="userinput"><code>c1 INT NOT NULL PRIMARY KEY,</code></strong>
     &gt;     <strong class="userinput"><code>c2 VARCHAR(30)</code></strong>
     &gt;     <strong class="userinput"><code>)</code></strong>
     &gt;     <strong class="userinput"><code>TABLESPACE ts1 STORAGE DISK</code></strong>
     &gt;     <strong class="userinput"><code>ENGINE NDB;</code></strong>
Query OK, 0 rows affected (1.73 sec)
Records: 0  Duplicates: 0  Warnings: 0
</pre><p>
      次に示すように、新しいインメモリーカラムをこのテーブルにオンラインで追加できます。
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>ALTER TABLE t1</code></strong>
     &gt;     <strong class="userinput"><code>ADD COLUMN c3 INT COLUMN_FORMAT DYNAMIC STORAGE MEMORY,</code></strong>
     &gt;     <strong class="userinput"><code>ALGORITHM=INPLACE;</code></strong>
Query OK, 0 rows affected (1.25 sec)
Records: 0  Duplicates: 0  Warnings: 0
</pre><p>
      <code class="literal">STORAGE MEMORY</code> オプションが省略されている場合、このステートメントは失敗します。
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>ALTER TABLE t1</code></strong>
     &gt;     <strong class="userinput"><code>ADD COLUMN c4 INT COLUMN_FORMAT DYNAMIC,</code></strong>
     &gt;     <strong class="userinput"><code>ALGORITHM=INPLACE;</code></strong>
<span class="errortext">ERROR 1846 (0A000): ALGORITHM=INPLACE is not supported. Reason:
Adding column(s) or add/reorganize partition not supported online. Try
ALGORITHM=COPY.</span>
</pre><p>
      <code class="literal">COLUMN_FORMAT DYNAMIC</code> オプションを省略した場合は、動的なカラムフォーマットが自動的に使用されますが、次に示すような警告が発行されます。
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>ALTER ONLINE TABLE t1 ADD COLUMN c4 INT STORAGE MEMORY;</code></strong>
Query OK, 0 rows affected, 1 warning (1.17 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql&gt; <strong class="userinput"><code>SHOW WARNINGS\G</code></strong>
*************************** 1. row ***************************
  Level: Warning
   Code: 1478
Message: DYNAMIC column c4 with STORAGE DISK is not supported, column will
become FIXED


mysql&gt; <strong class="userinput"><code>SHOW CREATE TABLE t1\G</code></strong>
*************************** 1. row ***************************
       Table: t1
Create Table: CREATE TABLE `t1` (
  `c1` int(11) NOT NULL,
  `c2` varchar(30) DEFAULT NULL,
  `c3` int(11) /*!50606 STORAGE MEMORY */ /*!50606 COLUMN_FORMAT DYNAMIC */ DEFAULT NULL,
  `c4` int(11) /*!50606 STORAGE MEMORY */ DEFAULT NULL,
  PRIMARY KEY (`c1`)
) /*!50606 TABLESPACE ts_1 STORAGE DISK */ ENGINE=ndbcluster DEFAULT CHARSET=latin1
1 row in set (0.03 sec)
</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
        <code class="literal">STORAGE</code> および <code class="literal">COLUMN_FORMAT</code> キーワードは NDB Cluster でのみサポートされます。ほかのバージョンの MySQL では、<code class="literal">CREATE TABLE</code> または <code class="literal">ALTER TABLE</code> ステートメントでこれらのキーワードのいずれかを使用しようとするとエラーになります。
      </p></div><p>
      <code class="literal">NDB</code> テーブルでは、<code class="literal"><em class="replaceable"><code>partition_names</code></em> INTO (<em class="replaceable"><code>partition_definitions</code></em>)</code> オプションを指定せずに <code class="literal">ALTER TABLE ... REORGANIZE PARTITION, ALGORITHM=INPLACE</code> ステートメントを使用することもできます。 これは、クラスタにオンラインで追加された新しいデータノード間で NDB Cluster データを再配布するために使用できます。 これによりデフラグは実行されず、<code class="literal">OPTIMIZE TABLE</code> または null の <code class="literal">ALTER TABLE</code> ステートメントが必要になります。 詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-online-add-node" title="23.5.7 NDB Cluster データノードのオンラインでの追加">セクション23.5.7「NDB Cluster データノードのオンラインでの追加」</a>を参照してください。 
    </p><h4><a name="mysql-cluster-online-limitations"></a>NDB オンライン操作の制限</h4><p>
      オンライン <code class="literal">DROP COLUMN</code> 操作はサポートされていません。
    </p><p>
      カラムを追加するか、あるいはインデックスを追加または削除するオンライン <code class="literal">ALTER TABLE</code>、<code class="literal">CREATE INDEX</code>、または <code class="literal">DROP INDEX</code> ステートメントは、次の制限に従います。
    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          特定のオンライン <code class="literal">ALTER TABLE</code> では、<code class="literal">ADD COLUMN</code>、<code class="literal">ADD INDEX</code>、<code class="literal">DROP INDEX</code> のいずれか 1 つのみを使用できます。 1 つのステートメントで、1 つ以上のカラムをオンラインで追加できます。1 つのステートメントで、1 つのインデックスのみをオンラインで作成または削除できます。 
        </p></li><li class="listitem"><p>
          変更されるテーブルは、オンライン <code class="literal">ALTER TABLE</code> <code class="literal">ADD COLUMN</code>、<code class="literal">ADD INDEX</code>、または <code class="literal">DROP INDEX</code> 操作 (あるいは <code class="literal">CREATE INDEX</code> または <code class="literal">DROP INDEX</code> ステートメント) が実行されている API ノード以外の API ノードに対してロックされません。 ただし、オンライン操作が実行されている間、このテーブルは<span class="emphasis"><em>同じ</em></span> API ノードから発信されているほかのすべての操作に対してロックされます。 
        </p></li><li class="listitem"><p>
          変更されるテーブルには明示的な主キーが存在する必要があります。<code class="literal">NDB</code> ストレージエンジンによって作成された非表示の主キーは、この目的には不十分です。
        </p></li><li class="listitem"><p>
          テーブルで使用されるストレージエンジンをオンラインで変更することはできません。
        </p></li><li class="listitem"><p>
          テーブルで使用されるテーブルスペースはオンラインで変更できません。 NDB 8.0.21 以降では、<code class="literal">ALTER TABLE <em class="replaceable"><code>ndb_table</code></em> ... ALGORITHM=INPLACE, TABLESPACE=<em class="replaceable"><code>new_tablespace</code></em></code> などのステートメントは特に許可されません。 (Bug #99269、Bug #31180526) 
        </p></li><li class="listitem"><p>
          「NDB Cluster ディスクデータ」テーブルで使用する場合、カラムの記憶域タイプ (<code class="literal">DISK</code> または <code class="literal">MEMORY</code>) をオンラインで変更することはできません。 つまり、操作がオンラインで実行されるような方法でインデックスを追加または削除し、カラムの記憶域タイプを変更する場合は、インデックスを追加または削除するステートメントで <code class="literal">ALGORITHM=COPY</code> を使用する必要があります。 
        </p></li></ul></div><p>
      オンラインで追加されるカラムは <code class="literal">BLOB</code> または <code class="literal">TEXT</code> 型を使用できず、次の条件を満たす必要があります。
    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          このカラムは動的である必要があります。つまり、<code class="literal">COLUMN_FORMAT DYNAMIC</code> を使用して作成できる必要があります。 <code class="literal">COLUMN_FORMAT DYNAMIC</code> オプションを省略した場合は、動的なカラムフォーマットが自動的に使用されます。 
        </p></li><li class="listitem"><p>
          このカラムは <code class="literal">NULL</code> 値を許可する必要があり、<code class="literal">NULL</code> 以外の明示的なデフォルト値があってはなりません。 オンラインで追加されるカラムは、次に示すように、<code class="literal">DEFAULT NULL</code> として自動的に作成されます。 
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>CREATE TABLE t2 (</code></strong>
     &gt;     <strong class="userinput"><code>c1 INT NOT NULL AUTO_INCREMENT PRIMARY KEY</code></strong>
     &gt;     <strong class="userinput"><code>) ENGINE=NDB;</code></strong>
Query OK, 0 rows affected (1.44 sec)

mysql&gt; <strong class="userinput"><code>ALTER TABLE t2</code></strong>
     &gt;     <strong class="userinput"><code>ADD COLUMN c2 INT,</code></strong>
     &gt;     <strong class="userinput"><code>ADD COLUMN c3 INT,</code></strong>
     &gt;     <strong class="userinput"><code>ALGORITHM=INPLACE;</code></strong>
Query OK, 0 rows affected, 2 warnings (0.93 sec)

mysql&gt; <strong class="userinput"><code>SHOW CREATE TABLE t1\G</code></strong>
*************************** 1. row ***************************
       Table: t1
Create Table: CREATE TABLE `t2` (
  `c1` int(11) NOT NULL AUTO_INCREMENT,
  `c2` int(11) DEFAULT NULL,
  `c3` int(11) DEFAULT NULL,
  PRIMARY KEY (`c1`)
) ENGINE=ndbcluster DEFAULT CHARSET=latin1
1 row in set (0.00 sec)
</pre></li><li class="listitem"><p>
          このカラムは、既存のすべてのカラムのあとに追加する必要があります。 既存のいずれかのカラムの前に、または <code class="literal">FIRST</code> キーワードを使用してオンラインでカラムを追加しようとすると、このステートメントはエラーで失敗します。 
        </p></li><li class="listitem"><p>
          既存のテーブルカラムをオンラインで並べ替えることはできません。
        </p></li></ul></div><p>
      <code class="literal">NDB</code> テーブルでのオンライン <code class="literal">ALTER TABLE</code> 操作の場合、固定形式のカラムは、オンラインで追加されたとき、またはオンラインでインデックスが作成または削除されたときに動的に変換されます (わかりやすくするために、<code class="literal">CREATE TABLE</code> および <code class="literal">ALTER TABLE</code> ステートメントを繰り返します):
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>CREATE TABLE t2 (</code></strong>
     &gt;     <strong class="userinput"><code>c1 INT NOT NULL AUTO_INCREMENT PRIMARY KEY</code></strong>
     &gt;     <strong class="userinput"><code>) ENGINE=NDB;</code></strong>
Query OK, 0 rows affected (1.44 sec)

mysql&gt; <strong class="userinput"><code>ALTER TABLE t2</code></strong>
     &gt;     <strong class="userinput"><code>ADD COLUMN c2 INT,</code></strong>
     &gt;     <strong class="userinput"><code>ADD COLUMN c3 INT,</code></strong>
     &gt;     <strong class="userinput"><code>ALGORITHM=INPLACE;</code></strong>
Query OK, 0 rows affected, 2 warnings (0.93 sec)

mysql&gt; <strong class="userinput"><code>SHOW WARNINGS;</code></strong>
*************************** 1. row ***************************
  Level: Warning
   Code: 1478
Message: Converted FIXED field 'c2' to DYNAMIC to enable online ADD COLUMN
*************************** 2. row ***************************
  Level: Warning
   Code: 1478
Message: Converted FIXED field 'c3' to DYNAMIC to enable online ADD COLUMN
2 rows in set (0.00 sec)
</pre><p>
      オンラインで追加するカラムのみが動的である必要があります。 既存のカラムは必須ではありません。これには、次に示すように、<code class="literal">FIXED</code> でもある可能性があるテーブル主キーが含まれます: 
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>CREATE TABLE t3 (</code></strong>
     &gt;     <strong class="userinput"><code>c1 INT NOT NULL AUTO_INCREMENT PRIMARY KEY COLUMN_FORMAT FIXED</code></strong>
     &gt;     <strong class="userinput"><code>) ENGINE=NDB;</code></strong>
Query OK, 0 rows affected (2.10 sec)

mysql&gt; <strong class="userinput"><code>ALTER TABLE t3 ADD COLUMN c2 INT, ALGORITHM=INPLACE;</code></strong>
Query OK, 0 rows affected, 1 warning (0.78 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql&gt; <strong class="userinput"><code>SHOW WARNINGS;</code></strong>
*************************** 1. row ***************************
  Level: Warning
   Code: 1478
Message: Converted FIXED field 'c2' to DYNAMIC to enable online ADD COLUMN
1 row in set (0.00 sec)
</pre><p>
      名前の変更操作によって、カラムが <code class="literal">FIXED</code> から <code class="literal">DYNAMIC</code> のカラムフォーマットに変換されることはありません。 <code class="literal">COLUMN_FORMAT</code> の詳細は、<a class="xref" href="sql-statements.html#create-table" title="13.1.20 CREATE TABLE ステートメント">セクション13.1.20「CREATE TABLE ステートメント」</a>を参照してください。 
    </p><p>
      <code class="literal">KEY</code>、<code class="literal">CONSTRAINT</code> および <code class="literal">IGNORE</code> キーワードは、<code class="literal">ALGORITHM=INPLACE</code> を使用する <code class="literal">ALTER TABLE</code> ステートメントでサポートされています。
    </p><p>
      オンラインの <code class="literal">ALTER TABLE</code> ステートメントを使用して <code class="literal">MAX_ROWS</code> を 0 に設定することはできません。 この操作を実行するには、<code class="literal">ALTER TABLE</code> のコピーを使用する必要があります。 (Bug #21960004) 
    </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-cluster-privilege-distribution"></a>23.5.12 NDB_STORED_USER での分散 MySQL 権限</h3></div></div></div><a class="indexterm" name="idm45563210145296"></a><a class="indexterm" name="idm45563210143856"></a><p>
      NDB 8.0.18 では、NDB Cluster に接続された SQL ノード間でユーザー、役割、および特権を共有および同期するための新しいメカニズムが導入されました。 これを有効にするには、<code class="literal">NDB_STORED_USER</code> 権限を付与します。 使用方法の詳細は、権限の説明を参照してください。 
    </p><p>
      <code class="literal">NDB_STORED_USER</code> は、他の権限と同様に <code class="literal">SHOW GRANTS</code> の出力に出力されます。 特権が共有されていることを確認するには、NDB Cluster ディストリビューションに付属の <span class="command"><strong>ndb_select_all</strong></span> ユーティリティーを使用します (フォーマットを保持するためにラップされた出力の一部): 
    </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>ndb_select_all -d mysql ndb_sql_metadata</code></strong>
type    name    seq     note    sql_ddl_text
11      "'jon'@'localhost'"     0       4       "CREATE USER 'jon'@'localhost'
IDENTIFIED WITH 'caching_sha2_password' AS
'$A$005${B];3!?tI\".EFy\ZA5K5DQHrWiBvuRNYTIMeO0YeBlPpZotFRPjVTYzTA5b0' REQUIRE
NONE PASSWORD EXPIRE DEFAULT ACCOUNT UNLOCK PASSWORD HISTORY DEFAULT PASSWORD
REUSE INTERVAL DEFAULT PASSWORD REQUIRE CURRENT DEFAULT"
12      "'jon'@'localhost'"     0       [NULL]  "GRANT USAGE ON *.* TO `jon`@`localhost`"
12      "'jon'@'localhost'"     3       [NULL]  "GRANT ALL PRIVILEGES ON `test`.* TO `jon`@`localhost`"
12      "'jon'@'localhost'"     2       [NULL]  "GRANT ALL PRIVILEGES ON `mydb`.* TO `jon`@`localhost`"
12      "'jon'@'localhost'"     1       [NULL]  "GRANT NDB_STORED_USER ON *.* TO `jon`@`localhost`"
5 rows returned
</pre><p>
      <code class="literal">ndb_sql_metadata</code> は、<span class="command"><strong>mysql</strong></span> または他の MySQL クライアントを使用して表示できない特別な <code class="literal">NDB</code> テーブルです。
    </p><p>
      <code class="literal">GRANT NDB_STORED_USER ON *.* TO 'cluster_app_user'@'localhost'</code>などの <code class="literal">NDB_STORED_USER</code> 権限を付与するステートメントは、<code class="literal">SHOW CREATE USER cluster_app_user@localhost</code> および <code class="literal">SHOW GRANTS FOR cluster_app_user@localhost</code> のクエリーを使用してスナップショットを作成し、その結果を <code class="literal">ndb_sql_metadata</code> に格納するように <code class="literal">NDB</code> に指示することで機能します。 その後、他の SQL ノードはスナップショットの読取りおよび適用をリクエストされます。 MySQL サーバーは、クラスタを起動して SQL ノードとして結合するたびに、これらのストアド <code class="literal">CREATE USER</code> および <code class="literal">GRANT</code> ステートメントをクラスタスキーマの同期プロセスの一環として実行します。 
    </p><p>
      元の SQL ノード以外の SQL ノードで SQL ステートメントが実行されると、そのステートメントは <code class="literal">NDBCLUSTER</code> ストレージエンジンのユーティリティスレッドで実行されます。これは、MySQL レプリケーションレプリカアプリケーションスレッドと同等のセキュリティ環境内で実行されます。
    </p><p>
      <code class="literal">NDB_STORED_USER</code> を使用したユーザーへの変更は、非同期に分散されることに注意してください。 分散スキーマの変更操作は同期的に実行されるため、分散ユーザーまたはユーザーに対する変更後の次の分散スキーマの変更は同期ポイントとして機能します。 保留中のユーザー変更は、スキーマ変更分散が開始される前に完了まで実行されます。この後、スキーマ変更自体が同期的に実行されます。 たとえば、<code class="literal">DROP DATABASE</code> ステートメントが分散ユーザーの <code class="literal">DROP USER</code> に続く場合、ユーザーの削除がすべての SQL ノードで完了するまで、データベースの削除は実行されません。 
    </p><p>
      複数の <code class="literal">GRANT</code>、<code class="literal">REVOKE</code> または複数の SQL ノードからの他のユーザー管理ステートメントによって、特定のユーザーの権限が異なる SQL ノードで相違する場合は、権限が正しいことがわかっている SQL ノードでこのユーザーに対して <code class="literal">GRANT NDB_STORED_USER</code> を発行することで、この問題を修正できます。これにより、権限の新しいスナップショットが取得され、他の SQL ノードと同期されます。
    </p><p>
      NDB Cluster 8.0 は、NDB 7.6 以前のリリースで実装されているように、<code class="literal">NDB</code> ストレージエンジンを使用するように MySQL 特権テーブルを変換することによって、NDB Cluster 内の SQL ノード間での MySQL ユーザーおよび特権の配布をサポートしていません (<a class="ulink" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-cluster-privilege-distribution.html" target="_top">Distributed Privileges Using Shared Grant Tables</a> を参照)。 以前のリリースから NDB 8.0 へのアップグレードに対するこの変更の影響については、<a class="xref" href="mysql-cluster.html#mysql-cluster-upgrade-downgrade" title="23.2.7 NDB Cluster のアップグレードおよびダウングレード">セクション23.2.7「NDB Cluster のアップグレードおよびダウングレード」</a> を参照してください。 
    </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-cluster-ndb-api-statistics"></a>23.5.13 NDB API 統計のカウンタと変数</h3></div></div></div><a class="indexterm" name="idm45563210109792"></a><a class="indexterm" name="idm45563210107648"></a><a class="indexterm" name="idm45563210106288"></a><p>
      <code class="literal">Ndb</code> オブジェクトによって実行されるアクションや、これらのオブジェクトに影響を与えるアクションに関する多くのタイプの統計カウンタを使用できます。 このようなアクションには、トランザクションの開始と終了 (または中止)、主キーおよび一意のキーの操作、テーブルスキャン、範囲スキャン、およびプルーニングスキャン、さまざまな操作が完了するまで待機している間にブロックされたスレッド、<code class="literal">NDBCLUSTER</code> によって送受信されたデータおよびイベントが含まれます。 NDB API 呼び出しが行われるか、データノードがデータを送受信するたびに、NDB カーネル内でカウンタが増分されます。<span class="command"><strong>mysqld</strong></span> は、これらのカウンタをシステムステータス変数として公開します。それらの値は、<code class="literal">SHOW STATUS</code> の出力で読み取るか、パフォーマンススキーマ <code class="literal">session_status</code> または <code class="literal">global_status</code> テーブルをクエリーすることによって読み取ることができます。 <code class="literal">NDB</code> テーブルを操作するステートメントの前後で値を比較すると、API レベルで実行された対応するアクション、およびステートメントを実行するコストを確認できます。 
    </p><p>
      次の <code class="literal">SHOW STATUS</code> ステートメントを使用すると、これらのステータス変数をすべて一覧表示できます。
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW STATUS LIKE 'ndb_api%';</code></strong>
+--------------------------------------------+----------+
| Variable_name                              | Value    |
+--------------------------------------------+----------+
| Ndb_api_wait_exec_complete_count_session   | 0        |
| Ndb_api_wait_scan_result_count_session     | 0        |
| Ndb_api_wait_meta_request_count_session    | 0        |
| Ndb_api_wait_nanos_count_session           | 0        |
| Ndb_api_bytes_sent_count_session           | 0        |
| Ndb_api_bytes_received_count_session       | 0        |
| Ndb_api_trans_start_count_session          | 0        |
| Ndb_api_trans_commit_count_session         | 0        |
| Ndb_api_trans_abort_count_session          | 0        |
| Ndb_api_trans_close_count_session          | 0        |
| Ndb_api_pk_op_count_session                | 0        |
| Ndb_api_uk_op_count_session                | 0        |
| Ndb_api_table_scan_count_session           | 0        |
| Ndb_api_range_scan_count_session           | 0        |
| Ndb_api_pruned_scan_count_session          | 0        |
| Ndb_api_scan_batch_count_session           | 0        |
| Ndb_api_read_row_count_session             | 0        |
| Ndb_api_trans_local_read_row_count_session | 0        |
| Ndb_api_event_data_count_injector          | 0        |
| Ndb_api_event_nondata_count_injector       | 0        |
| Ndb_api_event_bytes_count_injector         | 0        |
| Ndb_api_wait_exec_complete_count_slave     | 0        |
| Ndb_api_wait_scan_result_count_slave       | 0        |
| Ndb_api_wait_meta_request_count_slave      | 0        |
| Ndb_api_wait_nanos_count_slave             | 0        |
| Ndb_api_bytes_sent_count_slave             | 0        |
| Ndb_api_bytes_received_count_slave         | 0        |
| Ndb_api_trans_start_count_slave            | 0        |
| Ndb_api_trans_commit_count_slave           | 0        |
| Ndb_api_trans_abort_count_slave            | 0        |
| Ndb_api_trans_close_count_slave            | 0        |
| Ndb_api_pk_op_count_slave                  | 0        |
| Ndb_api_uk_op_count_slave                  | 0        |
| Ndb_api_table_scan_count_slave             | 0        |
| Ndb_api_range_scan_count_slave             | 0        |
| Ndb_api_pruned_scan_count_slave            | 0        |
| Ndb_api_scan_batch_count_slave             | 0        |
| Ndb_api_read_row_count_slave               | 0        |
| Ndb_api_trans_local_read_row_count_slave   | 0        |
| Ndb_api_wait_exec_complete_count           | 2        |
| Ndb_api_wait_scan_result_count             | 3        |
| Ndb_api_wait_meta_request_count            | 27       |
| Ndb_api_wait_nanos_count                   | 45612023 |
| Ndb_api_bytes_sent_count                   | 992      |
| Ndb_api_bytes_received_count               | 9640     |
| Ndb_api_trans_start_count                  | 2        |
| Ndb_api_trans_commit_count                 | 1        |
| Ndb_api_trans_abort_count                  | 0        |
| Ndb_api_trans_close_count                  | 2        |
| Ndb_api_pk_op_count                        | 1        |
| Ndb_api_uk_op_count                        | 0        |
| Ndb_api_table_scan_count                   | 1        |
| Ndb_api_range_scan_count                   | 0        |
| Ndb_api_pruned_scan_count                  | 0        |
| Ndb_api_scan_batch_count                   | 0        |
| Ndb_api_read_row_count                     | 1        |
| Ndb_api_trans_local_read_row_count         | 1        |
| Ndb_api_event_data_count                   | 0        |
| Ndb_api_event_nondata_count                | 0        |
| Ndb_api_event_bytes_count                  | 0        |
+--------------------------------------------+----------+
60 rows in set (0.02 sec)
</pre><p>
      これらのステータス変数は、次に示すように、パフォーマンススキーマ <code class="literal">session_status</code> および <code class="literal">global_status</code> テーブルからも使用できます:
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT * FROM performance_schema.session_status</code></strong>
    -&gt;   <strong class="userinput"><code>WHERE VARIABLE_NAME LIKE 'ndb_api%';</code></strong>
+--------------------------------------------+----------------+
| VARIABLE_NAME                              | VARIABLE_VALUE |
+--------------------------------------------+----------------+
| NDB_API_WAIT_EXEC_COMPLETE_COUNT_SESSION   | 2              |
| NDB_API_WAIT_SCAN_RESULT_COUNT_SESSION     | 0              |
| NDB_API_WAIT_META_REQUEST_COUNT_SESSION    | 1              |
| NDB_API_WAIT_NANOS_COUNT_SESSION           | 8144375        |
| NDB_API_BYTES_SENT_COUNT_SESSION           | 68             |
| NDB_API_BYTES_RECEIVED_COUNT_SESSION       | 84             |
| NDB_API_TRANS_START_COUNT_SESSION          | 1              |
| NDB_API_TRANS_COMMIT_COUNT_SESSION         | 1              |
| NDB_API_TRANS_ABORT_COUNT_SESSION          | 0              |
| NDB_API_TRANS_CLOSE_COUNT_SESSION          | 1              |
| NDB_API_PK_OP_COUNT_SESSION                | 1              |
| NDB_API_UK_OP_COUNT_SESSION                | 0              |
| NDB_API_TABLE_SCAN_COUNT_SESSION           | 0              |
| NDB_API_RANGE_SCAN_COUNT_SESSION           | 0              |
| NDB_API_PRUNED_SCAN_COUNT_SESSION          | 0              |
| NDB_API_SCAN_BATCH_COUNT_SESSION           | 0              |
| NDB_API_READ_ROW_COUNT_SESSION             | 1              |
| NDB_API_TRANS_LOCAL_READ_ROW_COUNT_SESSION | 1              |
| NDB_API_EVENT_DATA_COUNT_INJECTOR          | 0              |
| NDB_API_EVENT_NONDATA_COUNT_INJECTOR       | 0              |
| NDB_API_EVENT_BYTES_COUNT_INJECTOR         | 0              |
| NDB_API_WAIT_EXEC_COMPLETE_COUNT_SLAVE     | 0              |
| NDB_API_WAIT_SCAN_RESULT_COUNT_SLAVE       | 0              |
| NDB_API_WAIT_META_REQUEST_COUNT_SLAVE      | 0              |
| NDB_API_WAIT_NANOS_COUNT_SLAVE             | 0              |
| NDB_API_BYTES_SENT_COUNT_SLAVE             | 0              |
| NDB_API_BYTES_RECEIVED_COUNT_SLAVE         | 0              |
| NDB_API_TRANS_START_COUNT_SLAVE            | 0              |
| NDB_API_TRANS_COMMIT_COUNT_SLAVE           | 0              |
| NDB_API_TRANS_ABORT_COUNT_SLAVE            | 0              |
| NDB_API_TRANS_CLOSE_COUNT_SLAVE            | 0              |
| NDB_API_PK_OP_COUNT_SLAVE                  | 0              |
| NDB_API_UK_OP_COUNT_SLAVE                  | 0              |
| NDB_API_TABLE_SCAN_COUNT_SLAVE             | 0              |
| NDB_API_RANGE_SCAN_COUNT_SLAVE             | 0              |
| NDB_API_PRUNED_SCAN_COUNT_SLAVE            | 0              |
| NDB_API_SCAN_BATCH_COUNT_SLAVE             | 0              |
| NDB_API_READ_ROW_COUNT_SLAVE               | 0              |
| NDB_API_TRANS_LOCAL_READ_ROW_COUNT_SLAVE   | 0              |
| NDB_API_WAIT_EXEC_COMPLETE_COUNT           | 4              |
| NDB_API_WAIT_SCAN_RESULT_COUNT             | 3              |
| NDB_API_WAIT_META_REQUEST_COUNT            | 28             |
| NDB_API_WAIT_NANOS_COUNT                   | 53756398       |
| NDB_API_BYTES_SENT_COUNT                   | 1060           |
| NDB_API_BYTES_RECEIVED_COUNT               | 9724           |
| NDB_API_TRANS_START_COUNT                  | 3              |
| NDB_API_TRANS_COMMIT_COUNT                 | 2              |
| NDB_API_TRANS_ABORT_COUNT                  | 0              |
| NDB_API_TRANS_CLOSE_COUNT                  | 3              |
| NDB_API_PK_OP_COUNT                        | 2              |
| NDB_API_UK_OP_COUNT                        | 0              |
| NDB_API_TABLE_SCAN_COUNT                   | 1              |
| NDB_API_RANGE_SCAN_COUNT                   | 0              |
| NDB_API_PRUNED_SCAN_COUNT                  | 0              |
| NDB_API_SCAN_BATCH_COUNT                   | 0              |
| NDB_API_READ_ROW_COUNT                     | 2              |
| NDB_API_TRANS_LOCAL_READ_ROW_COUNT         | 2              |
| NDB_API_EVENT_DATA_COUNT                   | 0              |
| NDB_API_EVENT_NONDATA_COUNT                | 0              |
| NDB_API_EVENT_BYTES_COUNT                  | 0              |
+--------------------------------------------+----------------+
60 rows in set (0.00 sec)

mysql&gt; <strong class="userinput"><code>SELECT * FROM performance_schema.global_status</code></strong>
    -&gt;     <strong class="userinput"><code>WHERE VARIABLE_NAME LIKE 'ndb_api%';</code></strong>
+--------------------------------------------+----------------+
| VARIABLE_NAME                              | VARIABLE_VALUE |
+--------------------------------------------+----------------+
| NDB_API_WAIT_EXEC_COMPLETE_COUNT_SESSION   | 2              |
| NDB_API_WAIT_SCAN_RESULT_COUNT_SESSION     | 0              |
| NDB_API_WAIT_META_REQUEST_COUNT_SESSION    | 1              |
| NDB_API_WAIT_NANOS_COUNT_SESSION           | 8144375        |
| NDB_API_BYTES_SENT_COUNT_SESSION           | 68             |
| NDB_API_BYTES_RECEIVED_COUNT_SESSION       | 84             |
| NDB_API_TRANS_START_COUNT_SESSION          | 1              |
| NDB_API_TRANS_COMMIT_COUNT_SESSION         | 1              |
| NDB_API_TRANS_ABORT_COUNT_SESSION          | 0              |
| NDB_API_TRANS_CLOSE_COUNT_SESSION          | 1              |
| NDB_API_PK_OP_COUNT_SESSION                | 1              |
| NDB_API_UK_OP_COUNT_SESSION                | 0              |
| NDB_API_TABLE_SCAN_COUNT_SESSION           | 0              |
| NDB_API_RANGE_SCAN_COUNT_SESSION           | 0              |
| NDB_API_PRUNED_SCAN_COUNT_SESSION          | 0              |
| NDB_API_SCAN_BATCH_COUNT_SESSION           | 0              |
| NDB_API_READ_ROW_COUNT_SESSION             | 1              |
| NDB_API_TRANS_LOCAL_READ_ROW_COUNT_SESSION | 1              |
| NDB_API_EVENT_DATA_COUNT_INJECTOR          | 0              |
| NDB_API_EVENT_NONDATA_COUNT_INJECTOR       | 0              |
| NDB_API_EVENT_BYTES_COUNT_INJECTOR         | 0              |
| NDB_API_WAIT_EXEC_COMPLETE_COUNT_SLAVE     | 0              |
| NDB_API_WAIT_SCAN_RESULT_COUNT_SLAVE       | 0              |
| NDB_API_WAIT_META_REQUEST_COUNT_SLAVE      | 0              |
| NDB_API_WAIT_NANOS_COUNT_SLAVE             | 0              |
| NDB_API_BYTES_SENT_COUNT_SLAVE             | 0              |
| NDB_API_BYTES_RECEIVED_COUNT_SLAVE         | 0              |
| NDB_API_TRANS_START_COUNT_SLAVE            | 0              |
| NDB_API_TRANS_COMMIT_COUNT_SLAVE           | 0              |
| NDB_API_TRANS_ABORT_COUNT_SLAVE            | 0              |
| NDB_API_TRANS_CLOSE_COUNT_SLAVE            | 0              |
| NDB_API_PK_OP_COUNT_SLAVE                  | 0              |
| NDB_API_UK_OP_COUNT_SLAVE                  | 0              |
| NDB_API_TABLE_SCAN_COUNT_SLAVE             | 0              |
| NDB_API_RANGE_SCAN_COUNT_SLAVE             | 0              |
| NDB_API_PRUNED_SCAN_COUNT_SLAVE            | 0              |
| NDB_API_SCAN_BATCH_COUNT_SLAVE             | 0              |
| NDB_API_READ_ROW_COUNT_SLAVE               | 0              |
| NDB_API_TRANS_LOCAL_READ_ROW_COUNT_SLAVE   | 0              |
| NDB_API_WAIT_EXEC_COMPLETE_COUNT           | 4              |
| NDB_API_WAIT_SCAN_RESULT_COUNT             | 3              |
| NDB_API_WAIT_META_REQUEST_COUNT            | 28             |
| NDB_API_WAIT_NANOS_COUNT                   | 53756398       |
| NDB_API_BYTES_SENT_COUNT                   | 1060           |
| NDB_API_BYTES_RECEIVED_COUNT               | 9724           |
| NDB_API_TRANS_START_COUNT                  | 3              |
| NDB_API_TRANS_COMMIT_COUNT                 | 2              |
| NDB_API_TRANS_ABORT_COUNT                  | 0              |
| NDB_API_TRANS_CLOSE_COUNT                  | 3              |
| NDB_API_PK_OP_COUNT                        | 2              |
| NDB_API_UK_OP_COUNT                        | 0              |
| NDB_API_TABLE_SCAN_COUNT                   | 1              |
| NDB_API_RANGE_SCAN_COUNT                   | 0              |
| NDB_API_PRUNED_SCAN_COUNT                  | 0              |
| NDB_API_SCAN_BATCH_COUNT                   | 0              |
| NDB_API_READ_ROW_COUNT                     | 2              |
| NDB_API_TRANS_LOCAL_READ_ROW_COUNT         | 2              |
| NDB_API_EVENT_DATA_COUNT                   | 0              |
| NDB_API_EVENT_NONDATA_COUNT                | 0              |
| NDB_API_EVENT_BYTES_COUNT                  | 0              |
+--------------------------------------------+----------------+
60 rows in set (0.00 sec)
</pre><a class="indexterm" name="idm45563210062624"></a><a class="indexterm" name="idm45563210060416"></a><p>
      各 <code class="literal">Ndb</code> オブジェクトは、それぞれに独自のカウンタを持っています。 NDB API アプリケーションは、最適化やモニタリングで使用するためにカウンタの値を読み取ることができます。 複数の <code class="literal">Ndb</code> オブジェクトを同時に使用するマルチスレッドクライアントの場合、特定の <code class="literal">Ndb_cluster_connection</code> に属するすべての <code class="literal">Ndb</code> オブジェクトからカウンタの合計ビューを取得することもできます。 
    </p><p>
      4 セットのカウンタが表示されます。 1 セットは、現在のセッションにのみ適用されます。その他の 3 セットはグローバルです。 <span class="emphasis"><em>これは、<span class="command"><strong>mysql</strong></span> クライアントでは、これらの値をセッションとグローバルのどちらのステータス変数としても取得できることに関係ありません</em></span>。 つまり、<code class="literal">SHOW STATUS</code> で <code class="literal">SESSION</code> または <code class="literal">GLOBAL</code> キーワードを指定しても NDB API 統計ステータス変数について報告される値には影響せず、これらの各変数の値は、<code class="literal">session_status</code> または <code class="literal">global_status</code> テーブルの同等のカラムから取得されるかどうかにかかわらず同じです。 
    </p><a class="indexterm" name="idm45563210046128"></a><a class="indexterm" name="idm45563210044032"></a><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          <span class="emphasis"><em>セッションカウンタ (セッションに固有)</em></span>
        </p><p>
          セッションカウンタは、現在のセッションで (のみ) 使用される <code class="literal">Ndb</code> オブジェクトに関連します。 このようなオブジェクトをほかの MySQL クライアントが使用しても、これらのカウンタは影響を受けません。 
        </p><p>
          標準の MySQL セッション変数との混同を最小限にするために、これらの NDB API セッションに対応する変数は、先頭に下線を付けた <span class="quote">「<span class="quote"><code class="literal">_session</code> 変数</span>」</span>と呼んでいます。
        </p></li><li class="listitem"><p>
          <span class="emphasis"><em>レプリカカウンタ (グローバル)</em></span>
        </p><p>
          このカウンタセットは、レプリカ SQL スレッドで使用される <code class="literal">Ndb</code> オブジェクト (存在する場合) に関連します。 この <span class="command"><strong>mysqld</strong></span> がレプリカとして機能しない場合、または <code class="literal">NDB</code> テーブルを使用しない場合、これらのカウントはすべて 0 になります。 
        </p><p>
          関連するステータス変数は、(先頭に下線を付けた) <span class="quote">「<span class="quote"><code class="literal">_slave</code> 変数</span>」</span>と呼んでいます。
        </p></li><li class="listitem"><p>
          <span class="emphasis"><em>インジェクタカウンタ (グローバル)</em></span>
        </p><p>
          インジェクタカウンタは、バイナリログインジェクタスレッドがクラスタイベントを待機するために使用する <code class="literal">Ndb</code> オブジェクトに関連します。 バイナリログを書き込まない場合でも、NDB Cluster に接続された <span class="command"><strong>mysqld</strong></span> プロセスは、スキーマの変更などの一部のイベントを引き続き待機します。 
        </p><p>
          NDB API インジェクタカウンタに対応するステータス変数は、(先頭に下線を付けた) <span class="quote">「<span class="quote"><code class="literal">_injector</code> 変数</span>」</span>と呼んでいます。
        </p></li><li class="listitem"><p>
          <span class="emphasis"><em>サーバー (グローバル) カウンタ (グローバル)</em></span>
        </p><p>
          このカウンタセットは、この <span class="command"><strong>mysqld</strong></span> によって現在使用されているすべての <code class="literal">Ndb</code> オブジェクトに関連します。 これには、すべての MySQL クライアントアプリケーション、レプリカ SQL スレッド (存在する場合)、バイナリログインジェクタおよび <code class="literal">NDB</code> ユーティリティスレッドが含まれます。 
        </p><p>
          これらのカウンタに対応するステータス変数は、<span class="quote">「<span class="quote">グローバル変数</span>」</span>または <span class="quote">「<span class="quote"><span class="command"><strong>mysqld</strong></span> レベルの変数</span>」</span>と呼んでいます。
        </p></li></ul></div><p>
      (一般的なプリフィクス <code class="literal">Ndb_api</code> とともに) 変数名の部分文字列 <code class="literal">session</code>、<code class="literal">slave</code>、または <code class="literal">injector</code> で追加でフィルタ処理すると、特定の変数セットの値を取得できます。 <code class="literal">_session</code> 変数の場合は、これを次に示すように実行できます。 
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW STATUS LIKE 'ndb_api%session';</code></strong>
+--------------------------------------------+---------+
| Variable_name                              | Value   |
+--------------------------------------------+---------+
| Ndb_api_wait_exec_complete_count_session   | 2       |
| Ndb_api_wait_scan_result_count_session     | 0       |
| Ndb_api_wait_meta_request_count_session    | 1       |
| Ndb_api_wait_nanos_count_session           | 8144375 |
| Ndb_api_bytes_sent_count_session           | 68      |
| Ndb_api_bytes_received_count_session       | 84      |
| Ndb_api_trans_start_count_session          | 1       |
| Ndb_api_trans_commit_count_session         | 1       |
| Ndb_api_trans_abort_count_session          | 0       |
| Ndb_api_trans_close_count_session          | 1       |
| Ndb_api_pk_op_count_session                | 1       |
| Ndb_api_uk_op_count_session                | 0       |
| Ndb_api_table_scan_count_session           | 0       |
| Ndb_api_range_scan_count_session           | 0       |
| Ndb_api_pruned_scan_count_session          | 0       |
| Ndb_api_scan_batch_count_session           | 0       |
| Ndb_api_read_row_count_session             | 1       |
| Ndb_api_trans_local_read_row_count_session | 1       |
+--------------------------------------------+---------+
18 rows in set (0.50 sec)
</pre><p>
      NDB API <span class="command"><strong>mysqld</strong></span> レベルのステータス変数のリストを取得するには、次のように、<code class="literal">ndb_api</code> で始まり、<code class="literal">_count</code> で終わる変数名でフィルタ処理します。
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT * FROM performance_schema.session_status</code></strong>
    -&gt;     <strong class="userinput"><code>WHERE VARIABLE_NAME LIKE 'ndb_api%count';</code></strong>
+------------------------------------+----------------+
| VARIABLE_NAME                      | VARIABLE_VALUE |
+------------------------------------+----------------+
| NDB_API_WAIT_EXEC_COMPLETE_COUNT   | 4              |
| NDB_API_WAIT_SCAN_RESULT_COUNT     | 3              |
| NDB_API_WAIT_META_REQUEST_COUNT    | 28             |
| NDB_API_WAIT_NANOS_COUNT           | 53756398       |
| NDB_API_BYTES_SENT_COUNT           | 1060           |
| NDB_API_BYTES_RECEIVED_COUNT       | 9724           |
| NDB_API_TRANS_START_COUNT          | 3              |
| NDB_API_TRANS_COMMIT_COUNT         | 2              |
| NDB_API_TRANS_ABORT_COUNT          | 0              |
| NDB_API_TRANS_CLOSE_COUNT          | 3              |
| NDB_API_PK_OP_COUNT                | 2              |
| NDB_API_UK_OP_COUNT                | 0              |
| NDB_API_TABLE_SCAN_COUNT           | 1              |
| NDB_API_RANGE_SCAN_COUNT           | 0              |
| NDB_API_PRUNED_SCAN_COUNT          | 0              |
| NDB_API_SCAN_BATCH_COUNT           | 0              |
| NDB_API_READ_ROW_COUNT             | 2              |
| NDB_API_TRANS_LOCAL_READ_ROW_COUNT | 2              |
| NDB_API_EVENT_DATA_COUNT           | 0              |
| NDB_API_EVENT_NONDATA_COUNT        | 0              |
| NDB_API_EVENT_BYTES_COUNT          | 0              |
+------------------------------------+----------------+
21 rows in set (0.09 sec)
</pre><p>
      4 セットすべてのステータス変数に、すべてのカウンタが反映されるとはかぎりません。 イベントカウンタ <code class="literal">DataEventsRecvdCount</code>、<code class="literal">NondataEventsRecvdCount</code>、および <code class="literal">EventBytesRecvdCount</code> の場合は、<code class="literal">_injector</code> と <span class="command"><strong>mysqld</strong></span> レベルの NDB API ステータス変数のみを使用できます。 
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW STATUS LIKE 'ndb_api%event%';</code></strong>
+--------------------------------------+-------+
| Variable_name                        | Value |
+--------------------------------------+-------+
| Ndb_api_event_data_count_injector    | 0     |
| Ndb_api_event_nondata_count_injector | 0     |
| Ndb_api_event_bytes_count_injector   | 0     |
| Ndb_api_event_data_count             | 0     |
| Ndb_api_event_nondata_count          | 0     |
| Ndb_api_event_bytes_count            | 0     |
+--------------------------------------+-------+
6 rows in set (0.00 sec)
</pre><p>
      次に示すように、その他の NDB API カウンタには、<code class="literal">_injector</code> ステータス変数が実装されていません。
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW STATUS LIKE 'ndb_api%injector%';</code></strong>
+--------------------------------------+-------+
| Variable_name                        | Value |
+--------------------------------------+-------+
| Ndb_api_event_data_count_injector    | 0     |
| Ndb_api_event_nondata_count_injector | 0     |
| Ndb_api_event_bytes_count_injector   | 0     |
+--------------------------------------+-------+
3 rows in set (0.00 sec)
</pre><a class="indexterm" name="idm45563209991904"></a><a class="indexterm" name="idm45563209989632"></a><p>
      ステータス変数の名前は、対応するカウンタの名前に簡単に関連付けることができます。 次の表に、各 NDB API 統計カウンタを、説明およびこのカウンタに対応する MySQL サーバーステータス変数の名前とともに一覧表示しています。 
    </p><div class="table"><a name="idm45563209986512"></a><p class="title"><b>表 23.65 NDB API 統計カウンタ</b></p><div class="table-contents"><table><col style="width: 30%"><col style="width: 35%"><col style="width: 40%"><thead><tr>
          <th scope="col">カウンタ名</th>
          <th scope="col">説明</th>
          <th scope="col">ステータス変数 (統計タイプ別):<div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                  セッション
                </p></li><li class="listitem"><p>
                  スレーブ (レプリカ)
                </p></li><li class="listitem"><p>
                  インジェクタ
                </p></li><li class="listitem"><p>
                  サーバー
                </p></li></ul></div></th>
        </tr></thead><tbody><tr>
          <th scope="row"><code class="literal">WaitExecCompleteCount</code></th>
          <td>操作の実行が完了するまで待機する間にスレッドがブロックされた回数。 すべての <code class="literal">execute()</code> 呼び出しと、クライアントから見えない BLOB および自動インクリメント操作の暗黙的な実行が含まれます。 </td>
          <td><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                  <code class="literal">Ndb_api_wait_exec_complete_count_session</code>
                </p></li><li class="listitem"><p>
                  <code class="literal">Ndb_api_wait_exec_complete_count_slave</code>
                </p></li><li class="listitem"><p>
                  [none]
                </p></li><li class="listitem"><p>
                  <code class="literal">Ndb_api_wait_exec_complete_count</code>
                </p></li></ul></div></td>
        </tr><tr>
          <th scope="row"><code class="literal">WaitScanResultCount</code></th>
          <td>追加の結果やスキャンが閉じるまで待機するなど、スキャンベースの信号を待機する間にスレッドがブロックされた回数。</td>
          <td><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                  <code class="literal">Ndb_api_wait_scan_result_count_session</code>
                </p></li><li class="listitem"><p>
                  <code class="literal">Ndb_api_wait_scan_result_count_slave</code>
                </p></li><li class="listitem"><p>
                  [none]
                </p></li><li class="listitem"><p>
                  <code class="literal">Ndb_api_wait_scan_result_count</code>
                </p></li></ul></div></td>
        </tr><tr>
          <th scope="row"><code class="literal">WaitMetaRequestCount</code></th>
          <td>メタベースの信号を待機する間にスレッドがブロックされた回数。これは、DDL 操作またはエポックが開始される (または終了する) まで待機しているときに発生する可能性があります。</td>
          <td><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                  <code class="literal">Ndb_api_wait_meta_request_count_session</code>
                </p></li><li class="listitem"><p>
                  <code class="literal">Ndb_api_wait_meta_request_count_slave</code>
                </p></li><li class="listitem"><p>
                  [none]
                </p></li><li class="listitem"><p>
                  <code class="literal">Ndb_api_wait_meta_request_count</code>
                </p></li></ul></div></td>
        </tr><tr>
          <th scope="row"><code class="literal">WaitNanosCount</code></th>
          <td>データノードからの何らかのタイプの信号の待機にかかった合計時間 (ナノ秒)。</td>
          <td><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                  <code class="literal">Ndb_api_wait_nanos_count_session</code>
                </p></li><li class="listitem"><p>
                  <code class="literal">Ndb_api_wait_nanos_count_slave</code>
                </p></li><li class="listitem"><p>
                  [none]
                </p></li><li class="listitem"><p>
                  <code class="literal">Ndb_api_wait_nanos_count</code>
                </p></li></ul></div></td>
        </tr><tr>
          <th scope="row"><code class="literal">BytesSentCount</code></th>
          <td>データノードに送信されたデータ量 (バイト単位)。</td>
          <td><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                  <code class="literal">Ndb_api_bytes_sent_count_session</code>
                </p></li><li class="listitem"><p>
                  <code class="literal">Ndb_api_bytes_sent_count_slave</code>
                </p></li><li class="listitem"><p>
                  [none]
                </p></li><li class="listitem"><p>
                  <code class="literal">Ndb_api_bytes_sent_count</code>
                </p></li></ul></div></td>
        </tr><tr>
          <th scope="row"><code class="literal">BytesRecvdCount</code></th>
          <td>データノードから受信されたデータ量 (バイト単位)。</td>
          <td><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                  <code class="literal">Ndb_api_bytes_received_count_session</code>
                </p></li><li class="listitem"><p>
                  <code class="literal">Ndb_api_bytes_received_count_slave</code>
                </p></li><li class="listitem"><p>
                  [none]
                </p></li><li class="listitem"><p>
                  <code class="literal">Ndb_api_bytes_received_count</code>
                </p></li></ul></div></td>
        </tr><tr>
          <th scope="row"><code class="literal">TransStartCount</code></th>
          <td>開始されたトランザクションの数。</td>
          <td><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                  <code class="literal">Ndb_api_trans_start_count_session</code>
                </p></li><li class="listitem"><p>
                  <code class="literal">Ndb_api_trans_start_count_slave</code>
                </p></li><li class="listitem"><p>
                  [none]
                </p></li><li class="listitem"><p>
                  <code class="literal">Ndb_api_trans_start_count</code>
                </p></li></ul></div></td>
        </tr><tr>
          <th scope="row"><code class="literal">TransCommitCount</code></th>
          <td>コミットされたトランザクションの数。</td>
          <td><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                  <code class="literal">Ndb_api_trans_commit_count_session</code>
                </p></li><li class="listitem"><p>
                  <code class="literal">Ndb_api_trans_commit_count_slave</code>
                </p></li><li class="listitem"><p>
                  [none]
                </p></li><li class="listitem"><p>
                  <code class="literal">Ndb_api_trans_commit_count</code>
                </p></li></ul></div></td>
        </tr><tr>
          <th scope="row"><code class="literal">TransAbortCount</code></th>
          <td>中止されたトランザクションの数。</td>
          <td><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                  <code class="literal">Ndb_api_trans_abort_count_session</code>
                </p></li><li class="listitem"><p>
                  <code class="literal">Ndb_api_trans_abort_count_slave</code>
                </p></li><li class="listitem"><p>
                  [none]
                </p></li><li class="listitem"><p>
                  <code class="literal">Ndb_api_trans_abort_count</code>
                </p></li></ul></div></td>
        </tr><tr>
          <th scope="row"><code class="literal">TransCloseCount</code></th>
          <td>中止されたトランザクションの数。 (この値は、<code class="literal">TransCommitCount</code> と <code class="literal">TransAbortCount</code> との合計より大きい場合があります。) </td>
          <td><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                  <code class="literal">Ndb_api_trans_close_count_session</code>
                </p></li><li class="listitem"><p>
                  <code class="literal">Ndb_api_trans_close_count_slave</code>
                </p></li><li class="listitem"><p>
                  [none]
                </p></li><li class="listitem"><p>
                  <code class="literal">Ndb_api_trans_close_count</code>
                </p></li></ul></div></td>
        </tr><tr>
          <th scope="row"><code class="literal">PkOpCount</code></th>
          <td>主キーに基づいた操作または主キーを使用した操作の数。 このカウントには、BLOB 部分テーブル操作、暗黙的なロック解除操作、自動インクリメント操作、および通常 MySQL クライアントから見える主キー操作が含まれます。 </td>
          <td><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                  <code class="literal">Ndb_api_pk_op_count_session</code>
                </p></li><li class="listitem"><p>
                  <code class="literal">Ndb_api_pk_op_count_slave</code>
                </p></li><li class="listitem"><p>
                  [none]
                </p></li><li class="listitem"><p>
                  <code class="literal">Ndb_api_pk_op_count</code>
                </p></li></ul></div></td>
        </tr><tr>
          <th scope="row"><code class="literal">UkOpCount</code></th>
          <td>一意のキーに基づいた操作または一意のキーを使用した操作の数。</td>
          <td><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                  <code class="literal">Ndb_api_uk_op_count_session</code>
                </p></li><li class="listitem"><p>
                  <code class="literal">Ndb_api_uk_op_count_slave</code>
                </p></li><li class="listitem"><p>
                  [none]
                </p></li><li class="listitem"><p>
                  <code class="literal">Ndb_api_uk_op_count</code>
                </p></li></ul></div></td>
        </tr><tr>
          <th scope="row"><code class="literal">TableScanCount</code></th>
          <td>開始されたテーブルスキャンの数。 これには、内部テーブルのスキャンが含まれます。 </td>
          <td><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                  <code class="literal">Ndb_api_table_scan_count_session</code>
                </p></li><li class="listitem"><p>
                  <code class="literal">Ndb_api_table_scan_count_slave</code>
                </p></li><li class="listitem"><p>
                  [none]
                </p></li><li class="listitem"><p>
                  <code class="literal">Ndb_api_table_scan_count</code>
                </p></li></ul></div></td>
        </tr><tr>
          <th scope="row"><code class="literal">RangeScanCount</code></th>
          <td>開始された範囲スキャンの数。</td>
          <td><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                  <code class="literal">Ndb_api_range_scan_count_session</code>
                </p></li><li class="listitem"><p>
                  <code class="literal">Ndb_api_range_scan_count_slave</code>
                </p></li><li class="listitem"><p>
                  [none]
                </p></li><li class="listitem"><p>
                  <code class="literal">Ndb_api_range_scan_count</code>
                </p></li></ul></div></td>
        </tr><tr>
          <th scope="row"><code class="literal">PrunedScanCount</code></th>
          <td>単一パーティションにプルーニングされたスキャンの数。</td>
          <td><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                  <code class="literal">Ndb_api_pruned_scan_count_session</code>
                </p></li><li class="listitem"><p>
                  <code class="literal">Ndb_api_pruned_scan_count_slave</code>
                </p></li><li class="listitem"><p>
                  [none]
                </p></li><li class="listitem"><p>
                  <code class="literal">Ndb_api_pruned_scan_count</code>
                </p></li></ul></div></td>
        </tr><tr>
          <th scope="row"><code class="literal">ScanBatchCount</code></th>
          <td>受信された行のバッチの数。 (このコンテキストで、<span class="firstterm">バッチ</span>とは単一フラグメントからのスキャン結果のセットです。) </td>
          <td><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                  <code class="literal">Ndb_api_scan_batch_count_session</code>
                </p></li><li class="listitem"><p>
                  <code class="literal">Ndb_api_scan_batch_count_slave</code>
                </p></li><li class="listitem"><p>
                  [none]
                </p></li><li class="listitem"><p>
                  <code class="literal">Ndb_api_scan_batch_count</code>
                </p></li></ul></div></td>
        </tr><tr>
          <th scope="row"><code class="literal">ReadRowCount</code></th>
          <td>読み取られた行の合計数。 主キー、一意のキー、またはスキャン操作を使用して読み取られた行が含まれます。 </td>
          <td><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                  <code class="literal">Ndb_api_read_row_count_session</code>
                </p></li><li class="listitem"><p>
                  <code class="literal">Ndb_api_read_row_count_slave</code>
                </p></li><li class="listitem"><p>
                  [none]
                </p></li><li class="listitem"><p>
                  <code class="literal">Ndb_api_read_row_count</code>
                </p></li></ul></div></td>
        </tr><tr>
          <th scope="row"><code class="literal">TransLocalReadRowCount</code></th>
          <td>トランザクションが実行された同じデータノードから読み取られた行数。</td>
          <td><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                  <code class="literal">Ndb_api_trans_local_read_row_count_session</code>
                </p></li><li class="listitem"><p>
                  <code class="literal">Ndb_api_trans_local_read_row_count_slave</code>
                </p></li><li class="listitem"><p>
                  [none]
                </p></li><li class="listitem"><p>
                  <code class="literal">Ndb_api_trans_local_read_row_count</code>
                </p></li></ul></div></td>
        </tr><tr>
          <th scope="row"><code class="literal">DataEventsRecvdCount</code></th>
          <td>受信された行変更イベントの数。</td>
          <td><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                  [none]
                </p></li><li class="listitem"><p>
                  [none]
                </p></li><li class="listitem"><p>
                  <code class="literal">Ndb_api_event_data_count_injector</code>
                </p></li><li class="listitem"><p>
                  <code class="literal">Ndb_api_event_data_count</code>
                </p></li></ul></div></td>
        </tr><tr>
          <th scope="row"><code class="literal">NondataEventsRecvdCount</code></th>
          <td>受信された行変更イベント以外のイベントの数。</td>
          <td><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                  [none]
                </p></li><li class="listitem"><p>
                  [none]
                </p></li><li class="listitem"><p>
                  <code class="literal">Ndb_api_event_nondata_count_injector</code>
                </p></li><li class="listitem"><p>
                  <code class="literal">Ndb_api_event_nondata_count</code>
                </p></li></ul></div></td>
        </tr><tr>
          <th scope="row"><code class="literal">EventBytesRecvdCount</code></th>
          <td>受信されたイベントのバイト数。</td>
          <td><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                  [none]
                </p></li><li class="listitem"><p>
                  [none]
                </p></li><li class="listitem"><p>
                  <code class="literal">Ndb_api_event_bytes_count_injector</code>
                </p></li><li class="listitem"><p>
                  <code class="literal">Ndb_api_event_bytes_count</code>
                </p></li></ul></div></td>
        </tr></tbody></table></div></div><br class="table-break"><p>
      コミットされたトランザクションのすべてのカウント、つまり <code class="literal">TransCommitCount</code> カウンタのステータス変数を確認するには、次のように、<code class="literal">SHOW STATUS</code> の結果を部分文字列 <code class="literal">trans_commit_count</code> でフィルタ処理できます。
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW STATUS LIKE '%trans_commit_count%';</code></strong>
+------------------------------------+-------+
| Variable_name                      | Value |
+------------------------------------+-------+
| Ndb_api_trans_commit_count_session | 1     |
| Ndb_api_trans_commit_count_slave   | 0     |
| Ndb_api_trans_commit_count         | 2     |
+------------------------------------+-------+
3 rows in set (0.00 sec)
</pre><p>
      ここから、現在の <span class="command"><strong>mysql</strong></span> クライアントセッションで 1 つのトランザクションがコミットされ、この <span class="command"><strong>mysqld</strong></span> で、それが最後に再起動されてから、2 つのトランザクションがコミットされたことを判断できます。
    </p><p>
      ステートメントを実行した直前と直後で、対応する <code class="literal">_session</code> ステータス変数の値を比較すると、特定の SQL ステートメントによって、さまざまな NDB API カウンタがどのように増分されているかを確認できます。 この例では、<code class="literal">SHOW STATUS</code> から初期値を取得したあとに、<code class="literal">test</code> データベースに、単一のカラムを持つ <code class="literal">t</code> という名前の <code class="literal">NDB</code> テーブルを作成します。 
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW STATUS LIKE 'ndb_api%session%';</code></strong>
+--------------------------------------------+--------+
| Variable_name                              | Value  |
+--------------------------------------------+--------+
| Ndb_api_wait_exec_complete_count_session   | 2      |
| Ndb_api_wait_scan_result_count_session     | 0      |
| Ndb_api_wait_meta_request_count_session    | 3      |
| Ndb_api_wait_nanos_count_session           | 820705 |
| Ndb_api_bytes_sent_count_session           | 132    |
| Ndb_api_bytes_received_count_session       | 372    |
| Ndb_api_trans_start_count_session          | 1      |
| Ndb_api_trans_commit_count_session         | 1      |
| Ndb_api_trans_abort_count_session          | 0      |
| Ndb_api_trans_close_count_session          | 1      |
| Ndb_api_pk_op_count_session                | 1      |
| Ndb_api_uk_op_count_session                | 0      |
| Ndb_api_table_scan_count_session           | 0      |
| Ndb_api_range_scan_count_session           | 0      |
| Ndb_api_pruned_scan_count_session          | 0      |
| Ndb_api_scan_batch_count_session           | 0      |
| Ndb_api_read_row_count_session             | 1      |
| Ndb_api_trans_local_read_row_count_session | 1      |
+--------------------------------------------+--------+
18 rows in set (0.00 sec)

mysql&gt; <strong class="userinput"><code>USE test;</code></strong>
Database changed
mysql&gt; <strong class="userinput"><code>CREATE TABLE t (c INT) ENGINE NDBCLUSTER;</code></strong>
Query OK, 0 rows affected (0.85 sec)
</pre><p>
      この時点で、次に示す (出力で変更された行を強調表示しています) ように、新しい <code class="literal">SHOW STATUS</code> ステートメントを実行し、変更を確認できます。
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW STATUS LIKE 'ndb_api%session%';</code></strong>
+--------------------------------------------+-----------+
| Variable_name                              | Value     |
+--------------------------------------------+-----------+<span class="emphasis"><em>
| Ndb_api_wait_exec_complete_count_session   | 8         |</em></span>
| Ndb_api_wait_scan_result_count_session     | 0         |
<span class="emphasis"><em>| Ndb_api_wait_meta_request_count_session    | 17        |</em></span>
<span class="emphasis"><em>| Ndb_api_wait_nanos_count_session           | 706871709 |</em></span>
<span class="emphasis"><em>| Ndb_api_bytes_sent_count_session           | 2376      |</em></span>
<span class="emphasis"><em>| Ndb_api_bytes_received_count_session       | 3844      |</em></span>
<span class="emphasis"><em>| Ndb_api_trans_start_count_session          | 4         |</em></span>
<span class="emphasis"><em>| Ndb_api_trans_commit_count_session         | 4         |</em></span>
| Ndb_api_trans_abort_count_session          | 0         |
<span class="emphasis"><em>| Ndb_api_trans_close_count_session          | 4         |</em></span>
<span class="emphasis"><em>| Ndb_api_pk_op_count_session                | 6         |</em></span>
| Ndb_api_uk_op_count_session                | 0         |
| Ndb_api_table_scan_count_session           | 0         |
| Ndb_api_range_scan_count_session           | 0         |
| Ndb_api_pruned_scan_count_session          | 0         |
| Ndb_api_scan_batch_count_session           | 0         |
<span class="emphasis"><em>| Ndb_api_read_row_count_session             | 2         |</em></span>
| Ndb_api_trans_local_read_row_count_session | 1         |
+--------------------------------------------+-----------+
18 rows in set (0.00 sec)
</pre><p>
      同様に、<code class="literal">t</code> に行を挿入することで発生した NDB API 統計カウンタの変更も確認できます。次に示すように、行を挿入してから、前の例で使用したものと同じ <code class="literal">SHOW STATUS</code> ステートメントを実行します。
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>INSERT INTO t VALUES (100);</code></strong>
Query OK, 1 row affected (0.00 sec)

mysql&gt; <strong class="userinput"><code>SHOW STATUS LIKE 'ndb_api%session%';</code></strong>
+--------------------------------------------+-----------+
| Variable_name                              | Value     |
+--------------------------------------------+-----------+
<span class="emphasis"><em>| Ndb_api_wait_exec_complete_count_session   | 11        |</em></span>
<span class="emphasis"><em>| Ndb_api_wait_scan_result_count_session     | 6         |</em></span>
<span class="emphasis"><em>| Ndb_api_wait_meta_request_count_session    | 20        |</em></span>
<span class="emphasis"><em>| Ndb_api_wait_nanos_count_session           | 707370418 |</em></span>
<span class="emphasis"><em>| Ndb_api_bytes_sent_count_session           | 2724      |</em></span>
<span class="emphasis"><em>| Ndb_api_bytes_received_count_session       | 4116      |</em></span>
<span class="emphasis"><em>| Ndb_api_trans_start_count_session          | 7         |</em></span>
<span class="emphasis"><em>| Ndb_api_trans_commit_count_session         | 6         |</em></span>
| Ndb_api_trans_abort_count_session          | 0         |
<span class="emphasis"><em>| Ndb_api_trans_close_count_session          | 7         |</em></span>
<span class="emphasis"><em>| Ndb_api_pk_op_count_session                | 8         |</em></span>
| Ndb_api_uk_op_count_session                | 0         |
<span class="emphasis"><em>| Ndb_api_table_scan_count_session           | 1         |</em></span>
| Ndb_api_range_scan_count_session           | 0         |
| Ndb_api_pruned_scan_count_session          | 0         |
| Ndb_api_scan_batch_count_session           | 0         |
<span class="emphasis"><em>| Ndb_api_read_row_count_session             | 3         |</em></span>
<span class="emphasis"><em>| Ndb_api_trans_local_read_row_count_session | 2         |</em></span>
+--------------------------------------------+-----------+
18 rows in set (0.00 sec)
</pre><p>
      これらの結果から、いくつかのことを観察できます。
    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          明示的な主キーなしで <code class="literal">t</code> を作成しましたが、その際に 5 つの主キー操作が実行されました (<code class="literal">Ndb_api_pk_op_count_session</code> の<span class="quote">「<span class="quote">前</span>」</span>と<span class="quote">「<span class="quote">後</span>」</span>の値の差、つまり 6 から 1 を引く)。 これは、<code class="literal">NDB</code> ストレージエンジンを使用しているすべてのテーブルの機能である非表示の主キーの作成を反映しています。 
        </p></li><li class="listitem"><p>
          <code class="literal">Ndb_api_wait_nanos_count_session</code> の連続した値を比較すると、<code class="literal">CREATE TABLE</code> ステートメントを実装している NDB API 操作が、<code class="literal">INSERT</code> によって実行された操作 (707370418 - 706871709 = 498709 ナノ秒、つまり約 0.0005 秒) よりも大幅に長い時間 (706871709 - 820705 = 706051004 ナノ秒、つまり約 0.7 秒)、データノードからの応答を待機したことを確認できます。 <span class="command"><strong>mysql</strong></span> クライアントでこれらのステートメントについてレポートされた実行時間は、これらの数値に大まかに関連しています。 
        </p><p>
          十分な (ナノ秒) 時間解決がないプラットフォームでは、非常に迅速に実行される SQL ステートメントが <code class="literal">Ndb_api_wait_nanos_count_session</code>、<code class="literal">Ndb_api_wait_nanos_count_slave</code>、または <code class="literal">Ndb_api_wait_nanos_count</code> の値に表示されないことがあるため、<code class="literal">WaitNanosCount</code> NDB API カウンタの値の小さな変更がある場合があります。
        </p></li><li class="listitem"><p>
          <code class="literal">Ndb_api_read_row_count_session</code> と <code class="literal">Ndb_api_trans_local_read_row_count_session</code> の値が増加したことを反映して、<code class="literal">INSERT</code> ステートメントによって <code class="literal">ReadRowCount</code> と <code class="literal">TransLocalReadRowCount</code> の両方の NDB API 統計カウンタが増分されています。
        </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-cluster-ndbinfo"></a>23.5.14 ndbinfo: NDB Cluster 情報データベース</h3></div></div></div><div class="toc"><dl class="toc"><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-arbitrator-validity-detail">23.5.14.1 ndbinfo arbitrator_validity_detail テーブル</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-arbitrator-validity-summary">23.5.14.2 ndbinfo arbitrator_validity_summary テーブル</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-backup-id">23.5.14.3 ndbinfo backup_id テーブル</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-blocks">23.5.14.4 ndbinfo blocks テーブル</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-cluster-locks">23.5.14.5 ndbinfo cluster_locks テーブル</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-cluster-operations">23.5.14.6 ndbinfo cluster_operations テーブル</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-cluster-transactions">23.5.14.7 ndbinfo cluster_transactions テーブル</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-config-nodes">23.5.14.8 ndbinfo config_nodes テーブル</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-config-params">23.5.14.9 ndbinfo config_params テーブル</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-config-values">23.5.14.10 ndbinfo config_values テーブル</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-counters">23.5.14.11 ndbinfo counters テーブル</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-cpudata">23.5.14.12 ndbinfo cpudata テーブル</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-cpudata-1sec">23.5.14.13 ndbinfo cpudata_1sec テーブル</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-cpudata-20sec">23.5.14.14 ndbinfo cpudata_20sec テーブル</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-cpudata-50ms">23.5.14.15 ndbinfo cpudata_50ms テーブル</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-cpuinfo">23.5.14.16 ndbinfo cpuinfo テーブル</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-cpustat">23.5.14.17 ndbinfo cpustat テーブル</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-cpustat-50ms">23.5.14.18 ndbinfo cpustat_50ms テーブル</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-cpustat-1sec">23.5.14.19 ndbinfo cpustat_1sec テーブル</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-cpustat-20sec">23.5.14.20 ndbinfo cpustat_20sec テーブル</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-dict-obj-info">23.5.14.21 ndbinfo dict_obj_info テーブル</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-dict-obj-tree">23.5.14.22 ndbinfo dict_obj_tree テーブル</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-dict-obj-types">23.5.14.23 ndbinfo dict_obj_types テーブル</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-disk-write-speed-base">23.5.14.24 ndbinfo disk_write_speed_base テーブル</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-disk-write-speed-aggregate">23.5.14.25 ndbinfo disk_write_speed_aggregate テーブル</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-disk-write-speed-aggregate-node">23.5.14.26 ndbinfo disk_write_speed_aggregate_node テーブル</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-diskpagebuffer">23.5.14.27 ndbinfo diskpagebuffer テーブル</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-diskstat">23.5.14.28 ndbinfo diskstat テーブル</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-diskstats-1sec">23.5.14.29 ndbinfo diskstats_1sec テーブル</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-error-messages">23.5.14.30 ndbinfo error_messages テーブル</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-hwinfo">23.5.14.31 ndbinfo hwinfo テーブル</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-locks-per-fragment">23.5.14.32 ndbinfo locks_per_fragment テーブル</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-logbuffers">23.5.14.33 ndbinfo logbuffers テーブル</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-logspaces">23.5.14.34 ndbinfo logspaces テーブル</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-membership">23.5.14.35 ndbinfo membership テーブル</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-memoryusage">23.5.14.36 ndbinfo memoryusage テーブル</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-memory-per-fragment">23.5.14.37 ndbinfo memory_per_fragment テーブル</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-nodes">23.5.14.38 ndbinfo nodes テーブル</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-operations-per-fragment">23.5.14.39 ndbinfo operations_per_fragment テーブル</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-pgman-time-track-stats">23.5.14.40 ndbinfo pgman_time_track_stats テーブル</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-processes">23.5.14.41 ndbinfo processes テーブル</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-resources">23.5.14.42 ndbinfo resources テーブル</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-restart-info">23.5.14.43 ndbinfo restart_info テーブル</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-server-locks">23.5.14.44 ndbinfo server_locks テーブル</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-server-operations">23.5.14.45 ndbinfo server_operations テーブル</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-server-transactions">23.5.14.46 ndbinfo server_transactions テーブル</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-table-distribution-status">23.5.14.47 ndbinfo table_distribution_status テーブル</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-table-fragments">23.5.14.48 ndbinfo table_fragments テーブル</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-table-info">23.5.14.49 ndbinfo table_info テーブル</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-table-replicas">23.5.14.50 ndbinfo table_replicas テーブル</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-tc-time-track-stats">23.5.14.51 ndbinfo tc_time_track_stats テーブル</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-threadblocks">23.5.14.52 ndbinfo threadblocks テーブル</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-threads">23.5.14.53 ndbinfo threads テーブル</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-threadstat">23.5.14.54 ndbinfo threadstat テーブル</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-ndbinfo-transporters">23.5.14.55 ndbinfo transporters テーブル</a></span></dt></dl></div><a class="indexterm" name="idm45563209701904"></a><p>
      <code class="literal">ndbinfo</code> は NDB Cluster に固有の情報を含むデータベースです。
    </p><p>
      このデータベースには多数のテーブルが含まれており、それぞれ NDB Cluster ノードのステータス、リソース使用率、および操作に関する異なる種類のデータを提供します。 次のいくつかのセクションで、これらの各テーブルに関する詳細な情報を見つけることができます。 
    </p><a class="indexterm" name="idm45563209697552"></a><p>
      <code class="literal">ndbinfo</code> は NDB Cluster のサポートとともに MySQL Server に含まれており、特別なコンパイルや構成の手順は必要ありません。テーブルは、クラスタへの接続時に MySQL Server によって作成されます。 <code class="literal">SHOW PLUGINS</code> を使用すると、特定の MySQL サーバーインスタンスで <code class="literal">ndbinfo</code> サポートがアクティブになっていることを確認できます。<code class="literal">ndbinfo</code> サポートが有効になっている場合は、次に (強調表示したテキストで) 示すように、<code class="literal">Name</code> カラムに <code class="literal">ndbinfo</code> が含まれ、<code class="literal">Status</code> カラムに <code class="literal">ACTIVE</code> が含まれる行が表示されます。 
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW PLUGINS;</code></strong>
+----------------------------------+--------+--------------------+---------+---------+
| Name                             | Status | Type               | Library | License |
+----------------------------------+--------+--------------------+---------+---------+
| binlog                           | ACTIVE | STORAGE ENGINE     | NULL    | GPL     |
| mysql_native_password            | ACTIVE | AUTHENTICATION     | NULL    | GPL     |
| sha256_password                  | ACTIVE | AUTHENTICATION     | NULL    | GPL     |
| MRG_MYISAM                       | ACTIVE | STORAGE ENGINE     | NULL    | GPL     |
| MEMORY                           | ACTIVE | STORAGE ENGINE     | NULL    | GPL     |
| CSV                              | ACTIVE | STORAGE ENGINE     | NULL    | GPL     |
| MyISAM                           | ACTIVE | STORAGE ENGINE     | NULL    | GPL     |
| InnoDB                           | ACTIVE | STORAGE ENGINE     | NULL    | GPL     |
| INNODB_TRX                       | ACTIVE | INFORMATION SCHEMA | NULL    | GPL     |
| INNODB_LOCKS                     | ACTIVE | INFORMATION SCHEMA | NULL    | GPL     |
| INNODB_LOCK_WAITS                | ACTIVE | INFORMATION SCHEMA | NULL    | GPL     |
| INNODB_CMP                       | ACTIVE | INFORMATION SCHEMA | NULL    | GPL     |
| INNODB_CMP_RESET                 | ACTIVE | INFORMATION SCHEMA | NULL    | GPL     |
| INNODB_CMPMEM                    | ACTIVE | INFORMATION SCHEMA | NULL    | GPL     |
| INNODB_CMPMEM_RESET              | ACTIVE | INFORMATION SCHEMA | NULL    | GPL     |
| INNODB_CMP_PER_INDEX             | ACTIVE | INFORMATION SCHEMA | NULL    | GPL     |
| INNODB_CMP_PER_INDEX_RESET       | ACTIVE | INFORMATION SCHEMA | NULL    | GPL     |
| INNODB_BUFFER_PAGE               | ACTIVE | INFORMATION SCHEMA | NULL    | GPL     |
| INNODB_BUFFER_PAGE_LRU           | ACTIVE | INFORMATION SCHEMA | NULL    | GPL     |
| INNODB_BUFFER_POOL_STATS         | ACTIVE | INFORMATION SCHEMA | NULL    | GPL     |
| INNODB_TEMP_TABLE_INFO           | ACTIVE | INFORMATION SCHEMA | NULL    | GPL     |
| INNODB_METRICS                   | ACTIVE | INFORMATION SCHEMA | NULL    | GPL     |
| INNODB_FT_DEFAULT_STOPWORD       | ACTIVE | INFORMATION SCHEMA | NULL    | GPL     |
| INNODB_FT_DELETED                | ACTIVE | INFORMATION SCHEMA | NULL    | GPL     |
| INNODB_FT_BEING_DELETED          | ACTIVE | INFORMATION SCHEMA | NULL    | GPL     |
| INNODB_FT_CONFIG                 | ACTIVE | INFORMATION SCHEMA | NULL    | GPL     |
| INNODB_FT_INDEX_CACHE            | ACTIVE | INFORMATION SCHEMA | NULL    | GPL     |
| INNODB_FT_INDEX_TABLE            | ACTIVE | INFORMATION SCHEMA | NULL    | GPL     |
| INNODB_SYS_TABLES                | ACTIVE | INFORMATION SCHEMA | NULL    | GPL     |
| INNODB_SYS_TABLESTATS            | ACTIVE | INFORMATION SCHEMA | NULL    | GPL     |
| INNODB_SYS_INDEXES               | ACTIVE | INFORMATION SCHEMA | NULL    | GPL     |
| INNODB_SYS_COLUMNS               | ACTIVE | INFORMATION SCHEMA | NULL    | GPL     |
| INNODB_SYS_FIELDS                | ACTIVE | INFORMATION SCHEMA | NULL    | GPL     |
| INNODB_SYS_FOREIGN               | ACTIVE | INFORMATION SCHEMA | NULL    | GPL     |
| INNODB_SYS_FOREIGN_COLS          | ACTIVE | INFORMATION SCHEMA | NULL    | GPL     |
| INNODB_SYS_TABLESPACES           | ACTIVE | INFORMATION SCHEMA | NULL    | GPL     |
| INNODB_SYS_DATAFILES             | ACTIVE | INFORMATION SCHEMA | NULL    | GPL     |
| INNODB_SYS_VIRTUAL               | ACTIVE | INFORMATION SCHEMA | NULL    | GPL     |
| PERFORMANCE_SCHEMA               | ACTIVE | STORAGE ENGINE     | NULL    | GPL     |
| ndbCluster                      | ACTIVE | STORAGE ENGINE     | NULL    | GPL     |
<span class="emphasis"><em>| ndbinfo                          | ACTIVE | STORAGE ENGINE     | NULL    | GPL     |</em></span>
| ndb_transid_mysql_connection_map | ACTIVE | INFORMATION SCHEMA | NULL    | GPL     |
| BLACKHOLE                        | ACTIVE | STORAGE ENGINE     | NULL    | GPL     |
| ARCHIVE                          | ACTIVE | STORAGE ENGINE     | NULL    | GPL     |
| partition                        | ACTIVE | STORAGE ENGINE     | NULL    | GPL     |
| ngram                            | ACTIVE | FTPARSER           | NULL    | GPL     |
+----------------------------------+--------+--------------------+---------+---------+
46 rows in set (0.00 sec)
</pre><p>
      また、次に (強調表示されたテキストで) 示すように、<code class="literal">Engine</code> カラムに <code class="literal">ndbinfo</code> が含まれ、<code class="literal">Support</code> カラムに <code class="literal">YES</code> が含まれる行があるかどうかについて、<code class="literal">SHOW ENGINES</code> の出力をチェックすることで、これを実行することもできます。
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW ENGINES\G</code></strong>
*************************** 1. row ***************************
      Engine: ndbcluster
     Support: YES
     Comment: Clustered, fault-tolerant tables
Transactions: YES
          XA: NO
  Savepoints: NO
*************************** 2. row ***************************
      Engine: CSV
     Support: YES
     Comment: CSV storage engine
Transactions: NO
          XA: NO
  Savepoints: NO
*************************** 3. row ***************************
      Engine: InnoDB
     Support: DEFAULT
     Comment: Supports transactions, row-level locking, and foreign keys
Transactions: YES
          XA: YES
  Savepoints: YES
*************************** 4. row ***************************
      Engine: BLACKHOLE
     Support: YES
     Comment: /dev/null storage engine (anything you write to it disappears)
Transactions: NO
          XA: NO
  Savepoints: NO
*************************** 5. row ***************************
      Engine: MyISAM
     Support: YES
     Comment: MyISAM storage engine
Transactions: NO
          XA: NO
  Savepoints: NO
*************************** 6. row ***************************
      Engine: MRG_MYISAM
     Support: YES
     Comment: Collection of identical MyISAM tables
Transactions: NO
          XA: NO
  Savepoints: NO
*************************** 7. row ***************************
      Engine: ARCHIVE
     Support: YES
     Comment: Archive storage engine
Transactions: NO
          XA: NO
  Savepoints: NO
<span class="emphasis"><em>*************************** 8. row ***************************
      Engine: ndbinfo
     Support: YES
     Comment: NDB Cluster system information storage engine
Transactions: NO
          XA: NO
  Savepoints: NO</em></span>
*************************** 9. row ***************************
      Engine: PERFORMANCE_SCHEMA
     Support: YES
     Comment: Performance Schema
Transactions: NO
          XA: NO
  Savepoints: NO
*************************** 10. row ***************************
      Engine: MEMORY
     Support: YES
     Comment: Hash based, stored in memory, useful for temporary tables
Transactions: NO
          XA: NO
  Savepoints: NO
10 rows in set (0.00 sec)
</pre><p>
      <code class="literal">ndbinfo</code> サポートが有効になっている場合は、<span class="command"><strong>mysql</strong></span> や別の MySQL クライアントで SQL ステートメントを使用して、<code class="literal">ndbinfo</code> にアクセスできます。 たとえば、次に示すように、<code class="literal">SHOW DATABASES</code> の出力に <code class="literal">ndbinfo</code> がリストされます (強調表示されたテキスト): 
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW DATABASES;</code></strong>
+--------------------+
| Database           |
+--------------------+
| information_schema |
| mysql              |
<span class="emphasis"><em>| ndbinfo            |</em></span>
| performance_schema |
| sys                |
+--------------------+
5 rows in set (0.04 sec)
</pre><p>
      <code class="option">--ndbcluster</code> オプションを付けて <span class="command"><strong>mysqld</strong></span> プロセスが起動されなかった場合は、<code class="literal">ndbinfo</code> を使用できず、<code class="literal">SHOW DATABASES</code> によって表示されません。 <span class="command"><strong>mysqld</strong></span> が以前 NDB Cluster に接続されていたものの、クラスタが使用できなくなった場合 (クラスタのシャットダウン、ネットワーク接続の損失などのイベントのため)、<code class="literal">ndbinfo</code> とそのテーブルは表示されたままですが、(<code class="literal">blocks</code> や <code class="literal">config_params</code> 以外の) テーブルにアクセスしようとすると<span class="errortext">「NDBINFO からエラー 157NDB への接続に失敗しましたが発生しました」</span>で失敗します。 
    </p><p>
      <code class="literal">blocks</code> および <code class="literal">config_params</code> テーブルを除いて、<code class="literal">ndbinfo</code> <span class="quote">「<span class="quote">テーブル</span>」</span>と呼ばれるものは、実際には、MySQL サーバーから通常見えない内部 <code class="literal">NDB</code> テーブルから生成されるビューです。
    </p><p>
      <code class="literal">ndbinfo</code> テーブルはすべて読み取り専用であり、クエリーの実行時に要求に応じて生成されます。 これらの多くはデータノードによって並列して生成されますが、その他は特定の SQL ノードに固有であるため、一貫性のあるスナップショットを提供する保証はありません。 
    </p><p>
      さらに、<code class="literal">ndbinfo</code> テーブルでは、結合のプッシュダウンがサポートされていません。そのため、クエリーで <code class="literal">WHERE</code> 句を使用している場合でも、大きな <code class="literal">ndbinfo</code> テーブルの結合には、リクエスト元の API ノードに大量のデータを転送する必要があることがあります。
    </p><a class="indexterm" name="idm45563209645088"></a><a class="indexterm" name="idm45563209642864"></a><p>
      クエリーキャッシュに、<code class="literal">ndbinfo</code> テーブルが含まれていません。 (Bug #59831) 
    </p><p>
      その他のデータベースの場合と同様に、<code class="literal">USE</code> ステートメントで <code class="literal">ndbinfo</code> データベースを選択してから、<code class="literal">SHOW TABLES</code> ステートメントを発行すると、次のようなテーブルのリストを取得できます。
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>USE ndbinfo;</code></strong>
Database changed

mysql&gt; <strong class="userinput"><code>SHOW TABLES;</code></strong>
+---------------------------------+
| Tables_in_ndbinfo               |
+---------------------------------+
| arbitrator_validity_detail      |
| arbitrator_validity_summary     |
| blocks                          |
| cluster_locks                   |
| cluster_operations              |
| cluster_transactions            |
| config_nodes                    |
| config_params                   |
| config_values                   |
| counters                        |
| cpustat                         |
| cpustat_1sec                    |
| cpustat_20sec                   |
| cpustat_50ms                    |
| dict_obj_info                   |
| dict_obj_types                  |
| disk_write_speed_aggregate      |
| disk_write_speed_aggregate_node |
| disk_write_speed_base           |
| diskpagebuffer                  |
| error_messages                  |
| locks_per_fragment              |
| logbuffers                      |
| logspaces                       |
| membership                      |
| memory_per_fragment             |
| memoryusage                     |
| nodes                           |
| operations_per_fragment         |
| processes                       |
| resources                       |
| restart_info                    |
| server_locks                    |
| server_operations               |
| server_transactions             |
| table_distribution_status       |
| table_fragments                 |
| table_info                      |
| table_replicas                  |
| tc_time_track_stats             |
| threadblocks                    |
| threads                         |
| threadstat                      |
| transporters                    |
+---------------------------------+
44 rows in set (0.00 sec)
</pre><p>
      NDB 8.0 では、すべての <code class="literal">ndbinfo</code> テーブルが <code class="literal">NDB</code> ストレージエンジンを使用しますが、前に説明したように、<code class="literal">SHOW ENGINES</code> および <code class="literal">SHOW PLUGINS</code> の出力には引き続き <code class="literal">ndbinfo</code> エントリが表示されます。
    </p><a class="indexterm" name="idm45563209627024"></a><p>
      通常の想定どおりに、これらのテーブルに対して <code class="literal">SELECT</code> ステートメントを実行できます。
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT * FROM memoryusage;</code></strong>
+---------+---------------------+--------+------------+------------+-------------+
| node_id | memory_type         | used   | used_pages | total      | total_pages |
+---------+---------------------+--------+------------+------------+-------------+
|       5 | Data memory         | 753664 |         23 | 1073741824 |       32768 |
|       5 | Index memory        | 163840 |         20 | 1074003968 |      131104 |
|       5 | Long message buffer |   2304 |          9 |   67108864 |      262144 |
|       6 | Data memory         | 753664 |         23 | 1073741824 |       32768 |
|       6 | Index memory        | 163840 |         20 | 1074003968 |      131104 |
|       6 | Long message buffer |   2304 |          9 |   67108864 |      262144 |
+---------+---------------------+--------+------------+------------+-------------+
6 rows in set (0.02 sec)
</pre><p>
      <code class="literal">memoryusage</code> テーブルを使用する次の 2 つの <code class="literal">SELECT</code> ステートメントのような、さらに複雑なクエリーも実行できます。
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT SUM(used) as 'Data Memory Used, All Nodes'</code></strong>
     &gt;     <strong class="userinput"><code>FROM memoryusage</code></strong>
     &gt;     <strong class="userinput"><code>WHERE memory_type = 'Data memory';</code></strong>
+-----------------------------+
| Data Memory Used, All Nodes |
+-----------------------------+
|                        6460 |
+-----------------------------+
1 row in set (0.37 sec)

mysql&gt; <strong class="userinput"><code>SELECT SUM(max) as 'Total IndexMemory Available'</code></strong>
     &gt;     <strong class="userinput"><code>FROM memoryusage</code></strong>
     &gt;     <strong class="userinput"><code>WHERE memory_type = 'Index memory';</code></strong>
+-----------------------------+
| Total IndexMemory Available |
+-----------------------------+
|                       25664 |
+-----------------------------+
1 row in set (0.33 sec)
</pre><p>
      <code class="literal">ndbinfo</code> のテーブル名およびカラム名では、大/小文字が区別されます (<code class="literal">ndbinfo</code> データベース自体の名前と同様)。 これらの識別子は小文字です。 大文字と小文字を誤って使用すると、次の例で示すようなエラーが発生します。 
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT * FROM nodes;</code></strong>
+---------+--------+---------+-------------+
| node_id | uptime | status  | start_phase |
+---------+--------+---------+-------------+
|       1 |  13602 | STARTED |           0 |
|       2 |     16 | STARTED |           0 |
+---------+--------+---------+-------------+
2 rows in set (0.04 sec)

mysql&gt; <strong class="userinput"><code>SELECT * FROM Nodes;</code></strong>
<span class="errortext">ERROR 1146 (42S02): Table 'ndbinfo.Nodes' doesn't exist</span>
</pre><p>
      <span class="command"><strong>mysqldump</strong></span> は、<code class="literal">ndbinfo</code> データベースを完全に無視し、どの出力からも除外します。 このことは、<code class="option">--databases</code> または <code class="option">--all-databases</code> オプションを使用する場合でも当てはまります。 
    </p><p>
      NDB Cluster は、NDB Cluster ディスクデータストレージに使用されるファイルに関する情報を含む <code class="literal">FILES</code> テーブルや、トランザクション、トランザクションコーディネータ、NDB Cluster API ノード間の関係を示す <code class="literal">ndb_transid_mysql_connection_map</code> テーブルなど、<code class="literal">INFORMATION_SCHEMA</code> 情報データベース内のテーブルも保持します。 詳細は、テーブルまたは <a class="xref" href="mysql-cluster.html#mysql-cluster-information-schema-tables" title="23.5.15 NDB Cluster の INFORMATION_SCHEMA テーブル">セクション23.5.15「NDB Cluster の INFORMATION_SCHEMA テーブル」</a> の説明を参照してください。 
    </p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-ndbinfo-arbitrator-validity-detail"></a>23.5.14.1 ndbinfo arbitrator_validity_detail テーブル</h4></div></div></div><a class="indexterm" name="idm45563209596032"></a><p>
        <code class="literal">arbitrator_validity_detail</code> テーブルには、クラスタ内の各データノードがアービトレータを持っているビューが表示されます。 これは、<code class="literal">membership</code> テーブルのサブセットです。 
      </p><p>
        <code class="literal">arbitrator_validity_detail</code> テーブルには、次のカラムがあります:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">node_id</code>
          </p><p>
            このノードのノード ID
          </p></li><li class="listitem"><p>
            <code class="literal">arbitrator</code>
          </p><p>
            アービトレータのノード ID
          </p></li><li class="listitem"><p>
            <code class="literal">arb_ticket</code>
          </p><p>
            アービトレーションを追跡するために使用される内部識別子
          </p></li><li class="listitem"><p>
            <code class="literal">arb_connected</code>
          </p><p>
            このノードがアービトレータに接続されているかどうか (<code class="literal">Yes</code> または <code class="literal">No</code> のいずれか)
          </p></li><li class="listitem"><p>
            <code class="literal">arb_state</code>
          </p><p>
            アービトレーションの状態
          </p></li></ul></div><h5><a name="idm45563209578272"></a>メモ</h5><p>
        このノード ID は、<span class="command"><strong>ndb_mgm -e "SHOW"</strong></span> でレポートされるものと同じです。
      </p><p>
        すべてのノードで <code class="literal">arb_state</code> の値が同じであるだけでなく、<code class="literal">arbitrator</code> と <code class="literal">arb_ticket</code> の値も同じです。 可能性のある <code class="literal">arb_state</code> の値は <code class="literal">ARBIT_NULL</code>、<code class="literal">ARBIT_INIT</code>、<code class="literal">ARBIT_FIND</code>、<code class="literal">ARBIT_PREP1</code>、<code class="literal">ARBIT_PREP2</code>、<code class="literal">ARBIT_START</code>、<code class="literal">ARBIT_RUN</code>、<code class="literal">ARBIT_CHOOSE</code>、<code class="literal">ARBIT_CRASH</code>、および <code class="literal">UNKNOWN</code> です。 
      </p><p>
        <code class="literal">arb_connected</code> は、現在のノードが <code class="literal">arbitrator</code> に接続されているかどうかを示します。
      </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-ndbinfo-arbitrator-validity-summary"></a>23.5.14.2 ndbinfo arbitrator_validity_summary テーブル</h4></div></div></div><a class="indexterm" name="idm45563209562368"></a><p>
        <code class="literal">arbitrator_validity_summary</code> テーブルは、クラスタのデータノードに関するアービトレータの複合ビューを示します。
      </p><p>
        <code class="literal">arbitrator_validity_summary</code> テーブルには、次のカラムがあります:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">arbitrator</code>
          </p><p>
            アービトレータのノード ID
          </p></li><li class="listitem"><p>
            <code class="literal">arb_ticket</code>
          </p><p>
            アービトレーションを追跡するために使用される内部識別子
          </p></li><li class="listitem"><p>
            <code class="literal">arb_connected</code>
          </p><p>
            このアービトレータがクラスタに接続されているかどうか
          </p></li><li class="listitem"><p>
            <code class="literal">consensus_count</code>
          </p><p>
            このノードがアービトレータとして表示されるデータノードの数 (<code class="literal">Yes</code> または <code class="literal">No</code> のいずれか)
          </p></li></ul></div><h5><a name="idm45563209547584"></a>メモ</h5><p>
        通常の操作では、このテーブルには、相当に長い期間でも 1 行しか含まれません。 やや長い期間で複数行が含まれる場合は、一部のノードがアービトレータに接続されていないか、またはすべてのノードが接続されているが、同じアービトレータを承認していません。 
      </p><p>
        <code class="literal">arbitrator</code> カラムは、アービトレータのノード ID を示します。
      </p><p>
        <code class="literal">arb_ticket</code> は、このアービトレータで使用される内部識別子です。
      </p><p>
        <code class="literal">arb_connected</code> は、このノードがアービトレータとしてクラスタに接続されているかどうかを示します。
      </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-ndbinfo-backup-id"></a>23.5.14.3 ndbinfo backup_id テーブル</h4></div></div></div><p>
        このテーブルでは、このクラスタに対して最近開始されたバックアップの ID を確認できます。
      </p><p>
        <code class="literal">backup_id</code> テーブルには、<span class="command"><strong>ndb_mgm</strong></span> クライアントの <code class="literal">START BACKUP</code> コマンドを使用して作成されたバックアップ ID に対応する単一カラムの <code class="literal">id</code> が含まれます。 このテーブルには単一行が含まれます。 
      </p><p>
        <span class="emphasis"><em>例</em></span>: NDB 管理クライアントで次の一連の <code class="literal">START BACKUP</code> コマンドが発行され、クラスタが最初に起動されてからほかのバックアップが作成されていないとします:
      </p><pre class="programlisting">ndb_mgm&gt; <strong class="userinput"><code>START BACKUP</code></strong>
Waiting for completed, this may take several minutes
Node 5: Backup 1 started from node 50
Node 5: Backup 1 started from node 50 completed
 StartGCP: 27894 StopGCP: 27897
 #Records: 2057 #LogRecords: 0
 Data: 51580 bytes Log: 0 bytes
ndb_mgm&gt; <strong class="userinput"><code>START BACKUP 5</code></strong>
Waiting for completed, this may take several minutes
Node 5: Backup 5 started from node 50
Node 5: Backup 5 started from node 50 completed
 StartGCP: 27905 StopGCP: 27908
 #Records: 2057 #LogRecords: 0
 Data: 51580 bytes Log: 0 bytes
ndb_mgm&gt; <strong class="userinput"><code>START BACKUP</code></strong>
Waiting for completed, this may take several minutes
Node 5: Backup 6 started from node 50
Node 5: Backup 6 started from node 50 completed
 StartGCP: 27912 StopGCP: 27915
 #Records: 2057 #LogRecords: 0
 Data: 51580 bytes Log: 0 bytes
ndb_mgm&gt; <strong class="userinput"><code>START BACKUP 3</code></strong>
Connected to Management Server at: localhost:1186
Waiting for completed, this may take several minutes
Node 5: Backup 3 started from node 50
Node 5: Backup 3 started from node 50 completed
 StartGCP: 28149 StopGCP: 28152
 #Records: 2057 #LogRecords: 0
 Data: 51580 bytes Log: 0 bytes
ndb_mgm&gt;
</pre><p>
        この後、<code class="literal">backup_id</code> テーブルには、<span class="command"><strong>mysql</strong></span> クライアントを使用して、次に示す単一行が含まれます:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>USE ndbinfo;</code></strong>

Database changed
mysql&gt; <strong class="userinput"><code>SELECT * FROM backup_id;</code></strong>
+------+
| id   |
+------+
|    3 |
+------+
1 row in set (0.00 sec)
</pre><p>
        バックアップが見つからない場合、テーブルには <code class="literal">0</code> を <code class="literal">id</code> 値として含む単一行が含まれます。
      </p><p>
        NDB 8.0.24 に <code class="literal">backup_id</code> テーブルが追加されました。
      </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-ndbinfo-blocks"></a>23.5.14.4 ndbinfo blocks テーブル</h4></div></div></div><a class="indexterm" name="idm45563209519440"></a><p>
        <code class="literal">blocks</code> テーブルは、すべての NDB カーネルブロックの名前と内部 ID を単に格納する静的テーブルです (<a class="ulink" href="https://dev.mysql.com/doc/ndb-internals/en/ndb-internals-kernel-blocks.html" target="_top">NDB Kernel Blocks</a>を参照してください)。 これは、人間が読める出力を生成するためにブロック番号をブロック名にマップする際に、その他の <code class="literal">ndbinfo</code> テーブル (大部分が実際にはビューです) で使用されます。 
      </p><p>
        <code class="literal">blocks</code> テーブルには、次のカラムがあります:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">block_number</code>
          </p><p>
            ブロック番号
          </p></li><li class="listitem"><p>
            <code class="literal">block_name</code>
          </p><p>
            ブロック名
          </p></li></ul></div><h5><a name="idm45563209508352"></a>メモ</h5><p>
        すべてのブロック名のリストを取得するには、<code class="literal">SELECT block_name FROM ndbinfo.blocks</code> を実行するだけです。 これは静的テーブルですが、NDB Cluster のリリースによって内容が異なる場合があります。 
      </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-ndbinfo-cluster-locks"></a>23.5.14.5 ndbinfo cluster_locks テーブル</h4></div></div></div><a class="indexterm" name="idm45563209504832"></a><p>
        <code class="literal">cluster_locks</code> テーブルは NDB Cluster 内の <code class="literal">NDB</code> テーブルのロックを保持および待機している現在のロックリクエストに関する情報を提供し、<code class="literal">cluster_operations</code> へのコンパニオンテーブルとして使用されます。 <code class="literal">cluster_locks</code> テーブルから取得した情報は、ストールおよびデッドロックの調査に役立つ場合があります。 
      </p><p>
        <code class="literal">cluster_locks</code> テーブルには、次のカラムがあります:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">node_id</code>
          </p><p>
            レポートノードの ID
          </p></li><li class="listitem"><p>
            <code class="literal">block_instance</code>
          </p><p>
            レポート LDM インスタンスの ID
          </p></li><li class="listitem"><p>
            <code class="literal">tableid</code>
          </p><p>
            この行を含むテーブルの ID
          </p></li><li class="listitem"><p>
            <code class="literal">fragmentid</code>
          </p><p>
            ロックされた行を含むフラグメントの ID
          </p></li><li class="listitem"><p>
            <code class="literal">rowid</code>
          </p><p>
            ロックされた行の ID
          </p></li><li class="listitem"><p>
            <code class="literal">transid</code>
          </p><p>
            トランザクション ID
          </p></li><li class="listitem"><p>
            <code class="literal">mode</code>
          </p><p>
            ロックリクエストモード
          </p></li><li class="listitem"><p>
            <code class="literal">state</code>
          </p><p>
            ロック状態
          </p></li><li class="listitem"><p>
            <code class="literal">detail</code>
          </p><p>
            これが行ロックキューで最初にロックを保持しているかどうか
          </p></li><li class="listitem"><p>
            <code class="literal">op</code>
          </p><p>
            操作タイプ
          </p></li><li class="listitem"><p>
            <code class="literal">duration_millis</code>
          </p><p>
            ロックの待機または保持にかかったミリ秒
          </p></li><li class="listitem"><p>
            <code class="literal">lock_num</code>
          </p><p>
            ロックオブジェクトの ID
          </p></li><li class="listitem"><p>
            <code class="literal">waiting_for</code>
          </p><p>
            この ID のロックを待機中
          </p></li></ul></div><h5><a name="idm45563209471440"></a>メモ</h5><p>
        テーブル ID (<code class="literal">tableid</code> カラム) は内部的に割り当てられ、他の <code class="literal">ndbinfo</code> テーブルで使用されているものと同じです。 また、<span class="command"><strong>ndb_show_tables</strong></span> の出力にも表示されます。 
      </p><p>
        トランザクション ID (<code class="literal">transid</code> カラム) は、NDB API によって生成された、現在のロックを要求または保持しているトランザクションの識別子です。
      </p><p>
        <code class="literal">mode</code> カラムにはロックモードが表示されます。これは常に、<code class="literal">S</code> (共有ロックを示す) または <code class="literal">X</code> (排他ロック) のいずれかです。 トランザクションが特定の行の排他ロックを保持している場合、その行の他のすべてのロックは同じトランザクション ID を持ちます。 
      </p><p>
        <code class="literal">state</code> カラムにはロック状態が表示されます。 その値は、常に <code class="literal">H</code> (保持) または <code class="literal">W</code> (待機) のいずれかです。 待機中のロックリクエストは、別のトランザクションによって保持されているロックを待機します。 
      </p><p>
        <code class="literal">detail</code> カラムに <code class="literal">*</code> (アスタリスク文字) が含まれている場合、これは、このロックが影響を受ける行ロックキューの最初の保持ロックであることを意味します。それ以外の場合、このカラムは空です。 この情報は、ロックリクエストのリスト内の一意のエントリを識別するのに役立ちます。 
      </p><p>
        <code class="literal">op</code> カラムには、ロックをリクエストしている操作のタイプが表示されます。 これは常に、<code class="literal">READ</code>, <code class="literal">INSERT</code>, <code class="literal">UPDATE</code>, <code class="literal">DELETE</code>, <code class="literal">SCAN</code> または <code class="literal">REFRESH</code> のいずれかの値です。 
      </p><p>
        <code class="literal">duration_millis</code> カラムには、このロックリクエストがロックを待機または保持しているミリ秒数が表示されます。 待機中のリクエストに対してロックが付与されると、これは 0 にリセットされます。 
      </p><p>
        ロック ID (<code class="literal">lockid</code> カラム) は、このノードおよびブロックインスタンスに対して一意です。
      </p><p>
        ロック状態は <code class="literal">lock_state</code> カラムに表示されます。これが <code class="literal">W</code> の場合、ロックは付与を待機しており、<code class="literal">waiting_for</code> カラムには、このリクエストが待機しているロックオブジェクトのロック ID が表示されます。 それ以外の場合、<code class="literal">waiting_for</code> カラムは空です。<code class="literal">waiting_for</code> は、<code class="literal">node_id</code>, <code class="literal">block_instance</code>, <code class="literal">tableid</code>, <code class="literal">fragmentid</code> および <code class="literal">rowid</code> で識別される同じ行のロックのみを参照できます。 
      </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-ndbinfo-cluster-operations"></a>23.5.14.6 ndbinfo cluster_operations テーブル</h4></div></div></div><a class="indexterm" name="idm45563209439872"></a><p>
        <code class="literal">cluster_operations</code> テーブルは、NDB Cluster 内のすべてのアクティビティーの操作ごとの (ステートフル主キー op) ビューを、ローカルデータ管理 (LQH) ブロックの観点から提供します (<a class="ulink" href="https://dev.mysql.com/doc/ndb-internals/en/ndb-internals-kernel-blocks-dblqh.html" target="_top">The DBLQH Block</a> を参照)。
      </p><p>
        <code class="literal">cluster_operations</code> テーブルには、次のカラムがあります:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">node_id</code>
          </p><p>
            レポート LQH ブロックのノード ID
          </p></li><li class="listitem"><p>
            <code class="literal">block_instance</code>
          </p><p>
            LQH ブロックインスタンス
          </p></li><li class="listitem"><p>
            <code class="literal">transid</code>
          </p><p>
            トランザクション ID
          </p></li><li class="listitem"><p>
            <code class="literal">operation_type</code>
          </p><p>
            操作のタイプ (可能性のある値についてはテキストを参照)
          </p></li><li class="listitem"><p>
            <code class="literal">state</code>
          </p><p>
            操作の状態 (可能性のある値についてはテキストを参照)
          </p></li><li class="listitem"><p>
            <code class="literal">tableid</code>
          </p><p>
            テーブル ID
          </p></li><li class="listitem"><p>
            <code class="literal">fragmentid</code>
          </p><p>
            フラグメント ID
          </p></li><li class="listitem"><p>
            <code class="literal">client_node_id</code>
          </p><p>
            クライアントノード ID
          </p></li><li class="listitem"><p>
            <code class="literal">client_block_ref</code>
          </p><p>
            クライアントのブロック参照
          </p></li><li class="listitem"><p>
            <code class="literal">tc_node_id</code>
          </p><p>
            トランザクションコーディネータノード ID
          </p></li><li class="listitem"><p>
            <code class="literal">tc_block_no</code>
          </p><p>
            トランザクションコーディネータブロック番号
          </p></li><li class="listitem"><p>
            <code class="literal">tc_block_instance</code>
          </p><p>
            トランザクションコーディネータブロックインスタンス
          </p></li></ul></div><h5><a name="idm45563209409792"></a>メモ</h5><p>
        トランザクション ID は、NDB API の <code class="literal">getTransactionId()</code> メソッドを使用して取得できる一意の 64 ビット数値です。 (現在、MySQL サーバーは進行中のトランザクションの NDB API トランザクション ID を公開しません。) 
      </p><p>
        <code class="literal">operation_type</code> カラムは、<code class="literal">READ</code>、<code class="literal">READ-SH</code>、<code class="literal">READ-EX</code>、<code class="literal">INSERT</code>、<code class="literal">UPDATE</code>、<code class="literal">DELETE</code>、<code class="literal">WRITE</code>、<code class="literal">UNLOCK</code>、<code class="literal">REFRESH</code>、<code class="literal">SCAN</code>、<code class="literal">SCAN-SH</code>、<code class="literal">SCAN-EX</code>、または <code class="literal">&lt;unknown&gt;</code> のいずれかの値を取ることができます。
      </p><p>
        <code class="literal">state</code> カラムは、<code class="literal">ABORT_QUEUED</code>、<code class="literal">ABORT_STOPPED</code>、<code class="literal">COMMITTED</code>、<code class="literal">COMMIT_QUEUED</code>、<code class="literal">COMMIT_STOPPED</code>、<code class="literal">COPY_CLOSE_STOPPED</code>、<code class="literal">COPY_FIRST_STOPPED</code>、<code class="literal">COPY_STOPPED</code>、<code class="literal">COPY_TUPKEY</code>、<code class="literal">IDLE</code>、<code class="literal">LOG_ABORT_QUEUED</code>、<code class="literal">LOG_COMMIT_QUEUED</code>、<code class="literal">LOG_COMMIT_QUEUED_WAIT_SIGNAL</code>、<code class="literal">LOG_COMMIT_WRITTEN</code>、<code class="literal">LOG_COMMIT_WRITTEN_WAIT_SIGNAL</code>、<code class="literal">LOG_QUEUED</code>、<code class="literal">PREPARED</code>、<code class="literal">PREPARED_RECEIVED_COMMIT</code>、<code class="literal">SCAN_CHECK_STOPPED</code>、<code class="literal">SCAN_CLOSE_STOPPED</code>、<code class="literal">SCAN_FIRST_STOPPED</code>、<code class="literal">SCAN_RELEASE_STOPPED</code>、<code class="literal">SCAN_STATE_USED</code>、<code class="literal">SCAN_STOPPED</code>、<code class="literal">SCAN_TUPKEY</code>、<code class="literal">STOPPED</code>、<code class="literal">TC_NOT_CONNECTED</code>、<code class="literal">WAIT_ACC</code>、<code class="literal">WAIT_ACC_ABORT</code>、<code class="literal">WAIT_AI_AFTER_ABORT</code>、<code class="literal">WAIT_ATTR</code>、<code class="literal">WAIT_SCAN_AI</code>、<code class="literal">WAIT_TUP</code>、<code class="literal">WAIT_TUPKEYINFO</code>、<code class="literal">WAIT_TUP_COMMIT</code>、または <code class="literal">WAIT_TUP_TO_ABORT</code> のいずれかの値を取ることができます。 (<code class="literal">ndbinfo_show_hidden</code> を有効にして MySQL サーバーが実行されている場合は、通常は非表示になっている <code class="literal">ndb$dblqh_tcconnect_state</code> テーブルから選択することで、この状態のリストを表示できます。) 
      </p><p>
        <span class="command"><strong>ndb_show_tables</strong></span> の出力をチェックして、テーブル ID から <code class="literal">NDB</code> テーブルの名前を取得できます。
      </p><p>
        <code class="literal">fragid</code> は、<span class="command"><strong>ndb_desc</strong></span> <code class="option">--extra-partition-info</code> (短縮形式 <code class="option">-p</code>) の出力で見られるパーティション番号と同じです。
      </p><p>
        <code class="literal">client_node_id</code> および <code class="literal">client_block_ref</code> では、<code class="literal">client</code> は NDB Cluster API または SQL ノード (つまり、NDB API クライアントまたはクラスタに接続された MySQL Server) を指します。
      </p><p>
        <code class="literal">block_instance</code> および <code class="literal">tc_block_instance</code> カラムには、それぞれ <code class="literal">DBLQH</code> および <code class="literal">DBTC</code> ブロックインスタンス番号が表示されます。 これらをブロック名とともに使用して、<code class="literal">threadblocks</code> テーブルから特定のスレッドに関する情報を取得できます。 
      </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-ndbinfo-cluster-transactions"></a>23.5.14.7 ndbinfo cluster_transactions テーブル</h4></div></div></div><a class="indexterm" name="idm45563209352880"></a><p>
        <code class="literal">cluster_transactions</code> テーブルには、NDB Cluster 内で進行中のすべてのトランザクションに関する情報が表示されます。
      </p><p>
        <code class="literal">cluster_transactions</code> テーブルには、次のカラムがあります:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">node_id</code>
          </p><p>
            トランザクションコーディネータのノード ID
          </p></li><li class="listitem"><p>
            <code class="literal">block_instance</code>
          </p><p>
            TC ブロックインスタンス
          </p></li><li class="listitem"><p>
            <code class="literal">transid</code>
          </p><p>
            トランザクション ID
          </p></li><li class="listitem"><p>
            <code class="literal">state</code>
          </p><p>
            操作の状態 (可能性のある値についてはテキストを参照)
          </p></li><li class="listitem"><p>
            <code class="literal">count_operations</code>
          </p><p>
            トランザクション内のステートフルな主キー操作 (DML 操作に加えて、ロックを伴う読み取りを含む) の数
          </p></li><li class="listitem"><p>
            <code class="literal">outstanding_operations</code>
          </p><p>
            ローカルデータ管理ブロックでまだ実行されている操作
          </p></li><li class="listitem"><p>
            <code class="literal">inactive_seconds</code>
          </p><p>
            API の待機に要した時間
          </p></li><li class="listitem"><p>
            <code class="literal">client_node_id</code>
          </p><p>
            クライアントノード ID
          </p></li><li class="listitem"><p>
            <code class="literal">client_block_ref</code>
          </p><p>
            クライアントのブロック参照
          </p></li></ul></div><h5><a name="idm45563209329584"></a>メモ</h5><p>
        トランザクション ID は、NDB API の <code class="literal">getTransactionId()</code> メソッドを使用して取得できる一意の 64 ビット数値です。 (現在、MySQL サーバーは進行中のトランザクションの NDB API トランザクション ID を公開しません。) 
      </p><p>
        <code class="literal">block_instance</code> は、カーネルブロックのインスタンスを指します。 この番号は、ブロック名とともに使用して、<code class="literal">threadblocks</code> テーブル内の特定のインスタンスを検索できます。 
      </p><p>
        <code class="literal">state</code> カラムは、<code class="literal">CS_ABORTING</code>、<code class="literal">CS_COMMITTING</code>、<code class="literal">CS_COMMIT_SENT</code>、<code class="literal">CS_COMPLETE_SENT</code>、<code class="literal">CS_COMPLETING</code>、<code class="literal">CS_CONNECTED</code>、<code class="literal">CS_DISCONNECTED</code>、<code class="literal">CS_FAIL_ABORTED</code>、<code class="literal">CS_FAIL_ABORTING</code>、<code class="literal">CS_FAIL_COMMITTED</code>、<code class="literal">CS_FAIL_COMMITTING</code>、<code class="literal">CS_FAIL_COMPLETED</code>、<code class="literal">CS_FAIL_PREPARED</code>、<code class="literal">CS_PREPARE_TO_COMMIT</code>、<code class="literal">CS_RECEIVING</code>、<code class="literal">CS_REC_COMMITTING</code>、<code class="literal">CS_RESTART</code>、<code class="literal">CS_SEND_FIRE_TRIG_REQ</code>、<code class="literal">CS_STARTED</code>、<code class="literal">CS_START_COMMITTING</code>、<code class="literal">CS_START_SCAN</code>、<code class="literal">CS_WAIT_ABORT_CONF</code>、<code class="literal">CS_WAIT_COMMIT_CONF</code>、<code class="literal">CS_WAIT_COMPLETE_CONF</code>、<code class="literal">CS_WAIT_FIRE_TRIG_REQ</code> のいずれかの値を持つ可能性があります。 (<code class="literal">ndbinfo_show_hidden</code> を有効にして MySQL サーバーが実行されている場合は、通常は非表示になっている <code class="literal">ndb$dbtc_apiconnect_state</code> テーブルから選択することで、この状態のリストを表示できます。) 
      </p><p>
        <code class="literal">client_node_id</code> および <code class="literal">client_block_ref</code> では、<code class="literal">client</code> は NDB Cluster API または SQL ノード (つまり、NDB API クライアントまたはクラスタに接続された MySQL Server) を指します。
      </p><p>
        <code class="literal">tc_block_instance</code> カラムには、<code class="literal">DBTC</code> ブロックインスタンス番号が表示されます。 これをブロック名とともに使用して、<code class="literal">threadblocks</code> テーブルから特定のスレッドに関する情報を取得できます。 
      </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-ndbinfo-config-nodes"></a>23.5.14.8 ndbinfo config_nodes テーブル</h4></div></div></div><a class="indexterm" name="idm45563209295568"></a><p>
        <code class="literal">config_nodes</code> テーブルには、NDB Cluster <code class="filename">config.ini</code> ファイルで構成されたノードが表示されます。 ノードごとに、ノード ID、ノードのタイプ (管理ノード、データノード、または API ノード)、およびノードが実行されるように構成されているホストの名前または IP アドレスを含む行がテーブルに表示されます。 
      </p><p>
        このテーブルには、特定のノードが実際に実行されているかどうか、または現在クラスタに接続されているかどうかは示されません。 NDB Cluster に接続されているノードに関する情報は、<code class="literal">nodes</code> および <code class="literal">processes</code> テーブルから取得できます。 
      </p><p>
        <code class="literal">config_nodes</code> テーブルには、次のカラムがあります:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">node_id</code>
          </p><p>
            ノード ID
          </p></li><li class="listitem"><p>
            <code class="literal">node_type</code>
          </p><p>
            ノードのタイプ
          </p></li><li class="listitem"><p>
            <code class="literal">node_hostname</code>
          </p><p>
            ノードが存在するホストの名前または IP アドレス
          </p></li></ul></div><h5><a name="idm45563209280688"></a>メモ</h5><p>
        <code class="literal">node_id</code> カラムには、このノードの <code class="filename">config.ini</code> ファイルで使用されるノード ID が表示されます。何も指定されていない場合は、このノードに自動的に割り当てられるノード ID が表示されます。
      </p><p>
        <code class="literal">node_type</code> カラムには、次のいずれかの値が表示されます:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">MGM</code>: 管理ノード。
          </p></li><li class="listitem"><p>
            <code class="literal">NDB</code>: データノード。
          </p></li><li class="listitem"><p>
            <code class="literal">API</code>: API ノード。これには SQL ノードが含まれます。
          </p></li></ul></div><p>
        <code class="literal">node_hostname</code> カラムには、<code class="filename">config.ini</code> ファイルで指定されているノードホストが表示されます。 クラスタ構成ファイルで <code class="literal">HostName</code> が設定されていない場合、API ノードでは空にできます。 構成ファイルのデータノードに <code class="literal">HostName</code> が設定されていない場合は、ここで <code class="literal">localhost</code> が使用されます。<code class="literal">localhost</code> は、<code class="literal">HostName</code> が管理ノードに指定されていない場合にも使用されます。 
      </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-ndbinfo-config-params"></a>23.5.14.9 ndbinfo config_params テーブル</h4></div></div></div><a class="indexterm" name="idm45563209263232"></a><p>
        <code class="literal">config_params</code> テーブルは、NDB Cluster 構成パラメータの名前と内部 ID 番号、およびその他の情報を提供する静的テーブルです。 このテーブルを <code class="literal">config_values</code> テーブルとともに使用して、ノード構成パラメータに関するリアルタイム情報を取得することもできます。 
      </p><p>
        <code class="literal">config_params</code> テーブルには、次のカラムがあります:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">param_number</code>
          </p><p>
            パラメータの内部 ID 番号
          </p></li><li class="listitem"><p>
            <code class="literal">param_name</code>
          </p><p>
            パラメータの名前
          </p></li><li class="listitem"><p>
            <code class="literal">param_description</code>
          </p><p>
            パラメータの簡単な説明
          </p></li><li class="listitem"><p>
            <code class="literal">param_type</code>
          </p><p>
            パラメータのデータ型
          </p></li><li class="listitem"><p>
            <code class="literal">param_default</code>
          </p><p>
            パラメータのデフォルト値 (存在する場合)
          </p></li><li class="listitem"><p>
            <code class="literal">param_min</code>
          </p><p>
            パラメータの最大値 (存在する場合)
          </p></li><li class="listitem"><p>
            <code class="literal">param_max</code>
          </p><p>
            パラメータの最小値 (存在する場合)
          </p></li><li class="listitem"><p>
            <code class="literal">param_mandatory</code>
          </p><p>
            パラメータが必要な場合は 1、それ以外の場合は 0
          </p></li><li class="listitem"><p>
            <code class="literal">param_status</code>
          </p><p>
            現在未使用
          </p></li></ul></div><h5><a name="idm45563209238896"></a>メモ</h5><p>
        このテーブルは読取り専用です。
      </p><p>
        これは静的テーブルですが、サポートされているパラメータはソフトウェアリリース、クラスタハードウェア構成、およびその他の要因によって異なる可能性があるため、NDB Cluster インストールによって内容が異なる場合があります。
      </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-ndbinfo-config-values"></a>23.5.14.10 ndbinfo config_values テーブル</h4></div></div></div><a class="indexterm" name="idm45563209235472"></a><p>
        <code class="literal">config_values</code> テーブルには、ノード構成パラメータ値の現在の状態に関する情報が表示されます。 テーブルの各行は、特定のノードのパラメータの現在の値に対応します。 
      </p><p>
        <code class="literal">config_values</code> テーブルには、次のカラムがあります:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">node_id</code>
          </p><p>
            クラスタ内のノードの ID
          </p></li><li class="listitem"><p>
            <code class="literal">config_param</code>
          </p><p>
            パラメータの内部 ID 番号
          </p></li><li class="listitem"><p>
            <code class="literal">config_value</code>
          </p><p>
            パラメータの現在の値
          </p></li></ul></div><h5><a name="idm45563209224512"></a>メモ</h5><p>
        このテーブルの <code class="literal">config_param</code> カラムと <code class="literal">config_params</code> テーブルの <code class="literal">param_number</code> カラムでは、同じパラメータ識別子が使用されます。 これらのカラムで 2 つのテーブルを結合することで、必要なノード構成パラメータに関する詳細情報を取得できます。 ここに示すクエリーでは、クラスタ内の各データノード上のすべてのパラメータの現在の値が、ノード ID とパラメータ名順に表示されます: 
      </p><pre class="programlisting">SELECT    v.node_id AS 'Node Id',
          p.param_name AS 'Parameter',
          v.config_value AS 'Value'
FROM      config_values v
JOIN      config_params p
ON        v.config_param=p.param_number
WHERE     p.param_name NOT LIKE '\_\_%'
ORDER BY  v.node_id, p.param_name;
</pre><p>
        単純なテストに使用される小規模なサンプルクラスタで実行した場合の、前のクエリーからの出力の一部:
      </p><pre class="programlisting">+---------+------------------------------------------+----------------+
| Node Id | Parameter                                | Value          |
+---------+------------------------------------------+----------------+
|       2 | Arbitration                              | 1              |
|       2 | ArbitrationTimeout                       | 7500           |
|       2 | BackupDataBufferSize                     | 16777216       |
|       2 | BackupDataDir                            | /home/jon/data |
|       2 | BackupDiskWriteSpeedPct                  | 50             |
|       2 | BackupLogBufferSize                      | 16777216       |

...

|       3 | TotalSendBufferMemory                    | 0              |
|       3 | TransactionBufferMemory                  | 1048576        |
|       3 | TransactionDeadlockDetectionTimeout      | 1200           |
|       3 | TransactionInactiveTimeout               | 4294967039     |
|       3 | TwoPassInitialNodeRestartCopy            | 0              |
|       3 | UndoDataBuffer                           | 16777216       |
|       3 | UndoIndexBuffer                          | 2097152        |
+---------+------------------------------------------+----------------+
248 rows in set (0.02 sec)
</pre><p>
        <code class="literal">WHERE</code> 句は、名前が二重アンダースコア (<code class="literal">__</code>) で始まるパラメータをフィルタで除外します。これらのパラメータは NDB 開発者によるテストおよびその他の内部使用のために予約されており、本番 NDB Cluster での使用を目的としていません。
      </p><p>
        適切なクエリーを発行することで、より具体的で詳細な出力、またはその両方を取得できます。 この例では、クラスタ内のすべてのデータノードに現在設定されている、<code class="literal">NodeId</code>, <code class="literal">NoOfReplicas</code>, <code class="literal">HostName</code>, <code class="literal">DataMemory</code>, <code class="literal">IndexMemory</code> および <code class="literal">TotalSendBufferMemory</code> パラメータに関する使用可能なすべてのタイプの情報を提供します: 
      </p><pre class="programlisting">SELECT  p.param_name AS Name,
        v.node_id AS Node,
        p.param_type AS Type,
        p.param_default AS 'Default',
        p.param_min AS Minimum,
        p.param_max AS Maximum,
        CASE p.param_mandatory WHEN 1 THEN 'Y' ELSE 'N' END AS 'Required',
        v.config_value AS Current
FROM    config_params p
JOIN    config_values v
ON      p.param_number = v.config_param
WHERE   p. param_name
  IN ('NodeId', 'NoOfReplicas', 'HostName',
      'DataMemory', 'IndexMemory', 'TotalSendBufferMemory')\G
</pre><p>
        単純なテストに使用される 2 つのデータノードを持つ小さい NDB Cluster で実行された場合のこのクエリーからの出力を次に示します (NDB 8.0.18 以降):
      </p><pre class="programlisting">*************************** 1. row ***************************
    Name: NodeId
    Node: 2
    Type: unsigned
 Default:
 Minimum: 1
 Maximum: 144
Required: Y
 Current: 2
*************************** 2. row ***************************
    Name: HostName
    Node: 2
    Type: string
 Default: localhost
 Minimum:
 Maximum:
Required: N
 Current: 127.0.0.1
*************************** 3. row ***************************
    Name: TotalSendBufferMemory
    Node: 2
    Type: unsigned
 Default: 0
 Minimum: 262144
 Maximum: 4294967039
Required: N
 Current: 0
*************************** 4. row ***************************
    Name: NoOfReplicas
    Node: 2
    Type: unsigned
 Default: 2
 Minimum: 1
 Maximum: 4
Required: N
 Current: 2
*************************** 5. row ***************************
    Name: DataMemory
    Node: 2
    Type: unsigned
 Default: 102760448
 Minimum: 1048576
 Maximum: 1099511627776
Required: N
 Current: 524288000
*************************** 6. row ***************************
    Name: NodeId
    Node: 3
    Type: unsigned
 Default:
 Minimum: 1
 Maximum: 144
Required: Y
 Current: 3
*************************** 7. row ***************************
    Name: HostName
    Node: 3
    Type: string
 Default: localhost
 Minimum:
 Maximum:
Required: N
 Current: 127.0.0.1
*************************** 8. row ***************************
    Name: TotalSendBufferMemory
    Node: 3
    Type: unsigned
 Default: 0
 Minimum: 262144
 Maximum: 4294967039
Required: N
 Current: 0
*************************** 9. row ***************************
    Name: NoOfReplicas
    Node: 3
    Type: unsigned
 Default: 2
 Minimum: 1
 Maximum: 4
Required: N
 Current: 2
*************************** 10. row ***************************
    Name: DataMemory
    Node: 3
    Type: unsigned
 Default: 102760448
 Minimum: 1048576
 Maximum: 1099511627776
Required: N
 Current: 524288000
10 rows in set (0.01 sec)
</pre></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-ndbinfo-counters"></a>23.5.14.11 ndbinfo counters テーブル</h4></div></div></div><a class="indexterm" name="idm45563209198736"></a><p>
        <code class="literal">counters</code> テーブルは、特定のカーネルブロックおよびデータノードに対する読み取りや書き込みなどのイベントの現在までの合計数を示します。 最近のノードの起動または再起動はカウントされません。ノードを起動または再起動すると、そのノード上のすべてのカウンタがリセットされます。 すべてのカーネルブロックですべてのタイプのカウンタを使用しているとはかぎりません。 
      </p><p>
        <code class="literal">counters</code> テーブルには、次のカラムがあります:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">node_id</code>
          </p><p>
            データノード ID
          </p></li><li class="listitem"><p>
            <code class="literal">block_name</code>
          </p><p>
            関連付けられた NDB カーネルブロックの名前 (<a class="ulink" href="https://dev.mysql.com/doc/ndb-internals/en/ndb-internals-kernel-blocks.html" target="_top">NDB Kernel Blocks</a>を参照してください)。
          </p></li><li class="listitem"><p>
            <code class="literal">block_instance</code>
          </p><p>
            ブロックインスタンス
          </p></li><li class="listitem"><p>
            <code class="literal">counter_id</code>
          </p><p>
            カウンタの内部 ID 番号。通常は 1 から 10 までの整数。
          </p></li><li class="listitem"><p>
            <code class="literal">counter_name</code>
          </p><p>
            カウンタの名前。 各カウンタが関連付けられている個々のカウンタおよび NDB カーネルブロックの名前については、テキストを参照してください。 
          </p></li><li class="listitem"><p>
            <code class="literal">val</code>
          </p><p>
            カウンタの値
          </p></li></ul></div><h5><a name="idm45563209180272"></a>メモ</h5><p>
        各カウンタは、特定の NDB カーネルブロックに関連付けられています。
      </p><p>
        <code class="literal">OPERATIONS</code> カウンタは、<code class="literal">DBLQH</code> (ローカルクエリーハンドラ) カーネルブロックに関連付けられます。 主キーの読み取りは、主キーの更新と同様に、1 操作としてカウントされます。 読み取りの場合、<code class="literal">DBTC</code> での操作ごとに <code class="literal">DBLQH</code> での操作が 1 回発生します。 書込みの場合、フラグメントレプリカごとに 1 つの操作がカウントされます。 
      </p><p>
        <code class="literal">ATTRINFO</code>, <code class="literal">TRANSACTIONS</code>, <code class="literal">COMMITS</code>, <code class="literal">READS</code>, <code class="literal">LOCAL_READS</code>, <code class="literal">SIMPLE_READS</code>, <code class="literal">WRITES</code>, <code class="literal">LOCAL_WRITES</code>, <code class="literal">ABORTS</code>, <code class="literal">TABLE_SCANS</code> および <code class="literal">RANGE_SCANS</code> カウンタは、<code class="literal">DBTC</code> (トランザクション座標) カーネルブロックに関連付けられています。
      </p><p>
        <code class="literal">LOCAL_WRITES</code> および <code class="literal">LOCAL_READS</code> は、レコードのプライマリフラグメントレプリカも保持するノードでトランザクションコーディネータを使用する主キー操作です。
      </p><p>
        <code class="literal">READS</code> カウンタには、すべての読み取りが含まれます。 <code class="literal">LOCAL_READS</code> には、このトランザクションコーディネータと同じノード上のプライマリフラグメントレプリカの読取りのみが含まれます。 <code class="literal">SIMPLE_READS</code> には、読取り操作が特定のトランザクションの開始および終了操作である読取りのみが含まれます。 単純読取りではロックは保持されませんが、ロックはトランザクションの一部であり、ロックを含むトランザクションによって行われたコミットされていない変更は監視されますが、コミットされていない他のトランザクションは監視されません。 このような読取りは TC ブロックの観点からの<span class="quote">「<span class="quote">「シンプル」</span>」</span>です。ロックは保持されないため、永続的ではなく、<code class="literal">DBTC</code> が関連する LQH ブロックにルーティングすると、それらの状態は保持されません。 
      </p><p>
        <code class="literal">ATTRINFO</code> には、解釈済みプログラムがデータノードに送信される回数のカウントが保持されます。 <code class="literal">NDB</code> カーネルの <code class="literal">ATTRINFO</code> メッセージについての詳細は、<a class="ulink" href="https://dev.mysql.com/doc/ndb-internals/en/ndb-internals-ndb-protocol-messages.html" target="_top">NDB Protocol Messages</a>を参照してください。 
      </p><p>
        <code class="literal">LOCAL_TABLE_SCANS_SENT</code>, <code class="literal">READS_RECEIVED</code>, <code class="literal">PRUNED_RANGE_SCANS_RECEIVED</code>, <code class="literal">RANGE_SCANS_RECEIVED</code>, <code class="literal">LOCAL_READS_SENT</code>, <code class="literal">CONST_PRUNED_RANGE_SCANS_RECEIVED</code>, <code class="literal">LOCAL_RANGE_SCANS_SENT</code>, <code class="literal">REMOTE_READS_SENT</code>, <code class="literal">REMOTE_RANGE_SCANS_SENT</code>, <code class="literal">READS_NOT_FOUND</code>, <code class="literal">SCAN_BATCHES_RETURNED</code>, <code class="literal">TABLE_SCANS_RECEIVED</code> および <code class="literal">SCAN_ROWS_RETURNED</code> カウンタは、<code class="literal">DBSPJ</code> (選択プッシュダウン結合) カーネルブロックに関連付けられています。
      </p><p>
        <code class="literal">block_name</code> および <code class="literal">block_instance</code> カラムはそれぞれ、適用可能な NDB カーネルブロック名とインスタンス番号を提供します。 これらを使用して、<code class="literal">threadblocks</code> テーブルから特定のスレッドに関する情報を取得できます。 
      </p><p>
        このような問題のトラブルシューティングを行う際に、いくつかのカウンタによってトランスポータの過負荷および送信バッファーのサイズに関する情報が提供されます。 LQH インスタンスごとに、次のリストに示す各カウンタのインスタンスが 1 つ存在します。 
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">LQHKEY_OVERLOAD</code>: トランスポータの過負荷が原因で、LQH ブロックインスタンスで拒否された主キーリクエストの数
          </p></li><li class="listitem"><p>
            <code class="literal">LQHKEY_OVERLOAD_TC</code>: TC ノードのトランスポータが過負荷状態になった <code class="literal">LQHKEY_OVERLOAD</code> のインスタンス数
          </p></li><li class="listitem"><p>
            <code class="literal">LQHKEY_OVERLOAD_READER</code>: API リーダー (読み取り専用) ノードが過負荷状態になった <code class="literal">LQHKEY_OVERLOAD</code> のインスタンス数。
          </p></li><li class="listitem"><p>
            <code class="literal">LQHKEY_OVERLOAD_NODE_PEER</code>: 次のバックアップデータノード (書き込み専用) が過負荷状態になった <code class="literal">LQHKEY_OVERLOAD</code> のインスタンス数
          </p></li><li class="listitem"><p>
            <code class="literal">LQHKEY_OVERLOAD_SUBSCRIBER</code>: イベントサブスクライバ (書き込み専用) が過負荷状態になった <code class="literal">LQHKEY_OVERLOAD</code> のインスタンス数。
          </p></li><li class="listitem"><p>
            <code class="literal">LQHSCAN_SLOWDOWNS</code>: スキャン中の API トランスポータの過負荷が原因で、フラグメントスキャンのバッチサイズが減少したインスタンスの数。
          </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-ndbinfo-cpudata"></a>23.5.14.12 ndbinfo cpudata テーブル</h4></div></div></div><a class="indexterm" name="idm45563209123056"></a><p>
        <code class="literal">cpudata</code> テーブルには、最後の秒の CPU 使用率に関するデータが表示されます。
      </p><p>
        <code class="literal">cpustat</code> テーブルには、次のカラムがあります:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">node_id</code>
          </p><p>
            ノード ID
          </p></li><li class="listitem"><p>
            <code class="literal">cpu_no</code>
          </p><p>
            CPU ID
          </p></li><li class="listitem"><p>
            <code class="literal">cpu_online</code>
          </p><p>
            CPU が現在オンラインの場合は 1、それ以外の場合は 0
          </p></li><li class="listitem"><p>
            <code class="literal">cpu_userspace_time</code>
          </p><p>
            ユーザー領域で費やされた CPU 時間
          </p></li><li class="listitem"><p>
            <code class="literal">cpu_idle_time</code>
          </p><p>
            アイドルに費やされた CPU 時間
          </p></li><li class="listitem"><p>
            <code class="literal">cpu_system_time</code>
          </p><p>
            システム時間に要した CPU 時間
          </p></li><li class="listitem"><p>
            <code class="literal">cpu_interrupt_time</code>
          </p><p>
            割込み (ハードウェアおよびソフトウェア) の処理に費やされた CPU 時間
          </p></li><li class="listitem"><p>
            <code class="literal">cpu_exec_vm_time</code>
          </p><p>
            仮想マシンの実行に要した CPU 時間
          </p></li></ul></div><h5><a name="idm45563209102352"></a>メモ</h5><p>
        <code class="literal">cpudata</code> テーブルは、Linux および Solaris オペレーティングシステムでのみ使用できます。
      </p><p>
        このテーブルは NDB 8.0.23 で追加されました。
      </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-ndbinfo-cpudata-1sec"></a>23.5.14.13 ndbinfo cpudata_1sec テーブル</h4></div></div></div><a class="indexterm" name="idm45563209098480"></a><p>
        <code class="literal">cpudata_1sec</code> テーブルには、過去 20 秒間の CPU 使用率/秒に関するデータが表示されます。
      </p><p>
        <code class="literal">cpustat</code> テーブルには、次のカラムがあります:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">node_id</code>
          </p><p>
            ノード ID
          </p></li><li class="listitem"><p>
            <code class="literal">measurement_id</code>
          </p><p>
            測定シーケンス ID;後の測定には低い ID があります
          </p></li><li class="listitem"><p>
            <code class="literal">cpu_no</code>
          </p><p>
            CPU ID
          </p></li><li class="listitem"><p>
            <code class="literal">cpu_online</code>
          </p><p>
            CPU が現在オンラインの場合は 1、それ以外の場合は 0
          </p></li><li class="listitem"><p>
            <code class="literal">cpu_userspace_time</code>
          </p><p>
            ユーザー領域で費やされた CPU 時間
          </p></li><li class="listitem"><p>
            <code class="literal">cpu_idle_time</code>
          </p><p>
            アイドルに費やされた CPU 時間
          </p></li><li class="listitem"><p>
            <code class="literal">cpu_system_time</code>
          </p><p>
            システム時間に要した CPU 時間
          </p></li><li class="listitem"><p>
            <code class="literal">cpu_interrupt_time</code>
          </p><p>
            割込み (ハードウェアおよびソフトウェア) の処理に費やされた CPU 時間
          </p></li><li class="listitem"><p>
            <code class="literal">cpu_exec_vm_time</code>
          </p><p>
            仮想マシンの実行に要した CPU 時間
          </p></li><li class="listitem"><p>
            <code class="literal">elapsed_time</code>
          </p><p>
            この測定に使用される時間 (マイクロ秒)
          </p></li></ul></div><h5><a name="idm45563209073696"></a>メモ</h5><p>
        <code class="literal">cpudata_1sec</code> テーブルは、Linux および Solaris オペレーティングシステムでのみ使用できます。
      </p><p>
        このテーブルは NDB 8.0.23 で追加されました。
      </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-ndbinfo-cpudata-20sec"></a>23.5.14.14 ndbinfo cpudata_20sec テーブル</h4></div></div></div><a class="indexterm" name="idm45563209069824"></a><p>
        <code class="literal">cpudata_20sec</code> テーブルには、過去 400 秒間の 20 秒間隔ごとの CPU 使用率に関するデータが表示されます。
      </p><p>
        <code class="literal">cpustat</code> テーブルには、次のカラムがあります:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">node_id</code>
          </p><p>
            ノード ID
          </p></li><li class="listitem"><p>
            <code class="literal">measurement_id</code>
          </p><p>
            測定シーケンス ID;後の測定には低い ID があります
          </p></li><li class="listitem"><p>
            <code class="literal">cpu_no</code>
          </p><p>
            CPU ID
          </p></li><li class="listitem"><p>
            <code class="literal">cpu_online</code>
          </p><p>
            CPU が現在オンラインの場合は 1、それ以外の場合は 0
          </p></li><li class="listitem"><p>
            <code class="literal">cpu_userspace_time</code>
          </p><p>
            ユーザー領域で費やされた CPU 時間
          </p></li><li class="listitem"><p>
            <code class="literal">cpu_idle_time</code>
          </p><p>
            アイドルに費やされた CPU 時間
          </p></li><li class="listitem"><p>
            <code class="literal">cpu_system_time</code>
          </p><p>
            システム時間に要した CPU 時間
          </p></li><li class="listitem"><p>
            <code class="literal">cpu_interrupt_time</code>
          </p><p>
            割込み (ハードウェアおよびソフトウェア) の処理に費やされた CPU 時間
          </p></li><li class="listitem"><p>
            <code class="literal">cpu_exec_vm_time</code>
          </p><p>
            仮想マシンの実行に要した CPU 時間
          </p></li><li class="listitem"><p>
            <code class="literal">elapsed_time</code>
          </p><p>
            この測定に使用される時間 (マイクロ秒)
          </p></li></ul></div><h5><a name="idm45563209045008"></a>メモ</h5><p>
        <code class="literal">cpudata_20sec</code> テーブルは、Linux および Solaris オペレーティングシステムでのみ使用できます。
      </p><p>
        このテーブルは NDB 8.0.23 で追加されました。
      </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-ndbinfo-cpudata-50ms"></a>23.5.14.15 ndbinfo cpudata_50ms テーブル</h4></div></div></div><a class="indexterm" name="idm45563209041200"></a><p>
        <code class="literal">cpudata_50ms</code> テーブルには、過去 1 秒間の 50 ミリ秒間隔当たりの CPU 使用率に関するデータが表示されます。
      </p><p>
        <code class="literal">cpustat</code> テーブルには、次のカラムがあります:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">node_id</code>
          </p><p>
            ノード ID
          </p></li><li class="listitem"><p>
            <code class="literal">measurement_id</code>
          </p><p>
            測定シーケンス ID;後の測定には低い ID があります
          </p></li><li class="listitem"><p>
            <code class="literal">cpu_no</code>
          </p><p>
            CPU ID
          </p></li><li class="listitem"><p>
            <code class="literal">cpu_online</code>
          </p><p>
            CPU が現在オンラインの場合は 1、それ以外の場合は 0
          </p></li><li class="listitem"><p>
            <code class="literal">cpu_userspace_time</code>
          </p><p>
            ユーザー領域で費やされた CPU 時間
          </p></li><li class="listitem"><p>
            <code class="literal">cpu_idle_time</code>
          </p><p>
            アイドルに費やされた CPU 時間
          </p></li><li class="listitem"><p>
            <code class="literal">cpu_system_time</code>
          </p><p>
            システム時間に要した CPU 時間
          </p></li><li class="listitem"><p>
            <code class="literal">cpu_interrupt_time</code>
          </p><p>
            割込み (ハードウェアおよびソフトウェア) の処理に費やされた CPU 時間
          </p></li><li class="listitem"><p>
            <code class="literal">cpu_exec_vm_time</code>
          </p><p>
            仮想マシンの実行に要した CPU 時間
          </p></li><li class="listitem"><p>
            <code class="literal">elapsed_time</code>
          </p><p>
            この測定に使用される時間 (マイクロ秒)
          </p></li></ul></div><h5><a name="idm45563209016368"></a>メモ</h5><p>
        <code class="literal">cpudata_50ms</code> テーブルは、Linux および Solaris オペレーティングシステムでのみ使用できます。
      </p><p>
        このテーブルは NDB 8.0.23 で追加されました。
      </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-ndbinfo-cpuinfo"></a>23.5.14.16 ndbinfo cpuinfo テーブル</h4></div></div></div><a class="indexterm" name="idm45563209012560"></a><p>
        <code class="literal">cpuinfo</code> テーブルには、特定のデータノードが実行される CPU に関する情報が表示されます。
      </p><p>
        <code class="literal">cpuinfo</code> テーブルには、次のカラムがあります:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">node_id</code>
          </p><p>
            ノード ID
          </p></li><li class="listitem"><p>
            <code class="literal">cpu_no</code>
          </p><p>
            CPU ID
          </p></li><li class="listitem"><p>
            <code class="literal">cpu_online</code>
          </p><p>
            CPU がオンラインの場合は 1、それ以外の場合は 0
          </p></li><li class="listitem"><p>
            <code class="literal">core_id</code>
          </p><p>
            CPU コア ID
          </p></li><li class="listitem"><p>
            <code class="literal">socket_id</code>
          </p><p>
            CPU ソケット ID
          </p></li></ul></div><h5><a name="idm45563208998032"></a>メモ</h5><p>
        <code class="literal">cpuinfo</code> テーブルは、MacOS および FreeBSD を除き、<code class="literal">NDB</code> でサポートされているすべてのオペレーティングシステムで使用できます。
      </p><p>
        このテーブルは NDB 8.0.23 で追加されました。
      </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-ndbinfo-cpustat"></a>23.5.14.17 ndbinfo cpustat テーブル</h4></div></div></div><a class="indexterm" name="idm45563208993456"></a><p>
        <code class="literal">cpustat</code> テーブルには、<code class="literal">NDB</code> カーネルで実行されているスレッドごとに、毎秒収集されたスレッドごとの CPU 統計が示されます。
      </p><p>
        <code class="literal">cpustat</code> テーブルには、次のカラムがあります:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">node_id</code>
          </p><p>
            スレッドが実行中のノードの ID
          </p></li><li class="listitem"><p>
            <code class="literal">thr_no</code>
          </p><p>
            スレッド ID (このノードに固有)
          </p></li><li class="listitem"><p>
            <code class="literal">OS_user</code>
          </p><p>
            OS ユーザー時間
          </p></li><li class="listitem"><p>
            <code class="literal">OS_system</code>
          </p><p>
            OS システム時間
          </p></li><li class="listitem"><p>
            <code class="literal">OS_idle</code>
          </p><p>
            OS アイドル時間
          </p></li><li class="listitem"><p>
            <code class="literal">thread_exec</code>
          </p><p>
            スレッド実行時間
          </p></li><li class="listitem"><p>
            <code class="literal">thread_sleeping</code>
          </p><p>
            スレッドスリープ時間
          </p></li><li class="listitem"><p>
            <code class="literal">thread_spinning</code>
          </p><p>
            スレッドスピン時間
          </p></li><li class="listitem"><p>
            <code class="literal">thread_send</code>
          </p><p>
            スレッド送信時間
          </p></li><li class="listitem"><p>
            <code class="literal">thread_buffer_full</code>
          </p><p>
            スレッドバッファ一杯時間
          </p></li><li class="listitem"><p>
            <code class="literal">elapsed_time</code>
          </p><p>
            経過時間
          </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-ndbinfo-cpustat-50ms"></a>23.5.14.18 ndbinfo cpustat_50ms テーブル</h4></div></div></div><a class="indexterm" name="idm45563208965088"></a><p>
        <code class="literal">cpustat_50ms</code> テーブルには、<code class="literal">NDB</code> カーネルで実行されているスレッドごとに、50 ミリ秒ごとに取得されたスレッドごとの RAW CPU データが表示されます。
      </p><p>
        <code class="literal">cpustat_1sec</code> および <code class="literal">cpustat_20sec</code> と同様に、このテーブルにはスレッドごとに 20 個の測定セットが表示され、それぞれが指定された期間の期間を参照します。 したがって、<code class="literal">cpsustat_50ms</code> では 1 秒分の履歴が提供されます。 
      </p><p>
        <code class="literal">cpustat_50ms</code> テーブルには、次のカラムがあります:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">node_id</code>
          </p><p>
            スレッドが実行中のノードの ID
          </p></li><li class="listitem"><p>
            <code class="literal">thr_no</code>
          </p><p>
            スレッド ID (このノードに固有)
          </p></li><li class="listitem"><p>
            <code class="literal">OS_user_time</code>
          </p><p>
            OS ユーザー時間
          </p></li><li class="listitem"><p>
            <code class="literal">OS_system_time</code>
          </p><p>
            OS システム時間
          </p></li><li class="listitem"><p>
            <code class="literal">OS_idle_time</code>
          </p><p>
            OS アイドル時間
          </p></li><li class="listitem"><p>
            <code class="literal">exec_time</code>
          </p><p>
            スレッド実行時間
          </p></li><li class="listitem"><p>
            <code class="literal">sleep_time</code>
          </p><p>
            スレッドスリープ時間
          </p></li><li class="listitem"><p>
            <code class="literal">spin_time</code>
          </p><p>
            スレッドスピン時間
          </p></li><li class="listitem"><p>
            <code class="literal">send_time</code>
          </p><p>
            スレッド送信時間
          </p></li><li class="listitem"><p>
            <code class="literal">buffer_full_time</code>
          </p><p>
            スレッドバッファ一杯時間
          </p></li><li class="listitem"><p>
            <code class="literal">elapsed_time</code>
          </p><p>
            経過時間
          </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-ndbinfo-cpustat-1sec"></a>23.5.14.19 ndbinfo cpustat_1sec テーブル</h4></div></div></div><a class="indexterm" name="idm45563208933120"></a><p>
        <code class="literal">cpustat-1sec</code> テーブルには、<code class="literal">NDB</code> カーネルで実行されているスレッドごとに取得されるスレッドごとの RAW CPU データが表示されます。
      </p><p>
        <code class="literal">cpustat_50ms</code> および <code class="literal">cpustat_20sec</code> と同様に、このテーブルにはスレッドごとに 20 個の測定セットが表示され、それぞれが指定された期間の期間を参照します。 したがって、<code class="literal">cpsustat_1sec</code> には 20 秒の履歴が用意されています。 
      </p><p>
        <code class="literal">cpustat_1sec</code> テーブルには、次のカラムがあります:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">node_id</code>
          </p><p>
            スレッドが実行中のノードの ID
          </p></li><li class="listitem"><p>
            <code class="literal">thr_no</code>
          </p><p>
            スレッド ID (このノードに固有)
          </p></li><li class="listitem"><p>
            <code class="literal">OS_user_time</code>
          </p><p>
            OS ユーザー時間
          </p></li><li class="listitem"><p>
            <code class="literal">OS_system_time</code>
          </p><p>
            OS システム時間
          </p></li><li class="listitem"><p>
            <code class="literal">OS_idle_time</code>
          </p><p>
            OS アイドル時間
          </p></li><li class="listitem"><p>
            <code class="literal">exec_time</code>
          </p><p>
            スレッド実行時間
          </p></li><li class="listitem"><p>
            <code class="literal">sleep_time</code>
          </p><p>
            スレッドスリープ時間
          </p></li><li class="listitem"><p>
            <code class="literal">spin_time</code>
          </p><p>
            スレッドスピン時間
          </p></li><li class="listitem"><p>
            <code class="literal">send_time</code>
          </p><p>
            スレッド送信時間
          </p></li><li class="listitem"><p>
            <code class="literal">buffer_full_time</code>
          </p><p>
            スレッドバッファ一杯時間
          </p></li><li class="listitem"><p>
            <code class="literal">elapsed_time</code>
          </p><p>
            経過時間
          </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-ndbinfo-cpustat-20sec"></a>23.5.14.20 ndbinfo cpustat_20sec テーブル</h4></div></div></div><a class="indexterm" name="idm45563208901120"></a><p>
        <code class="literal">cpustat_20sec</code> テーブルは、<code class="literal">NDB</code> カーネルで実行されているスレッドごとに、20 秒ごとに取得されるスレッドごとの RAW CPU データを提供します。
      </p><p>
        <code class="literal">cpustat_50ms</code> および <code class="literal">cpustat_1sec</code> と同様に、このテーブルにはスレッドごとに 20 個の測定セットが表示され、それぞれが指定された期間の期間を参照します。 したがって、<code class="literal">cpsustat_20sec</code> では 400 秒の履歴が提供されます。 
      </p><p>
        <code class="literal">cpustat_20sec</code> テーブルには、次のカラムがあります:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">node_id</code>
          </p><p>
            スレッドが実行中のノードの ID
          </p></li><li class="listitem"><p>
            <code class="literal">thr_no</code>
          </p><p>
            スレッド ID (このノードに固有)
          </p></li><li class="listitem"><p>
            <code class="literal">OS_user_time</code>
          </p><p>
            OS ユーザー時間
          </p></li><li class="listitem"><p>
            <code class="literal">OS_system_time</code>
          </p><p>
            OS システム時間
          </p></li><li class="listitem"><p>
            <code class="literal">OS_idle_time</code>
          </p><p>
            OS アイドル時間
          </p></li><li class="listitem"><p>
            <code class="literal">exec_time</code>
          </p><p>
            スレッド実行時間
          </p></li><li class="listitem"><p>
            <code class="literal">sleep_time</code>
          </p><p>
            スレッドスリープ時間
          </p></li><li class="listitem"><p>
            <code class="literal">spin_time</code>
          </p><p>
            スレッドスピン時間
          </p></li><li class="listitem"><p>
            <code class="literal">send_time</code>
          </p><p>
            スレッド送信時間
          </p></li><li class="listitem"><p>
            <code class="literal">buffer_full_time</code>
          </p><p>
            スレッドバッファ一杯時間
          </p></li><li class="listitem"><p>
            <code class="literal">elapsed_time</code>
          </p><p>
            経過時間
          </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-ndbinfo-dict-obj-info"></a>23.5.14.21 ndbinfo dict_obj_info テーブル</h4></div></div></div><a class="indexterm" name="idm45563208869120"></a><p>
        <code class="literal">dict_obj_info</code> テーブルは、テーブルやインデックスなどの <code class="literal">NDB</code> データディクショナリ (<code class="literal">DICT</code>) オブジェクトに関する情報を提供します。 (<code class="literal">dict_obj_types</code> テーブルでは、すべてのタイプのリストをクエリーすることができます。) この情報には、オブジェクトタイプ、状態、親オブジェクト (存在する場合) および完全修飾名が含まれます。 
      </p><p>
        <code class="literal">dict_obj_info</code> テーブルには、次のカラムがあります:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">type</code>
          </p><p>
            <code class="literal">DICT</code> オブジェクトのタイプ。<code class="literal">dict_obj_types</code> で結合して名前を取得
          </p></li><li class="listitem"><p>
            <code class="literal">id</code>
          </p><p>
            オブジェクト識別子。ディスクデータ undo ログファイルおよびデータファイルの場合、これは <code class="literal">INFORMATION_SCHEMA.FILES</code> テーブルの <code class="literal">LOGFILE_GROUP_NUMBER</code> カラムに表示される値と同じです。undo ログファイルの場合、<code class="literal">ndbinfo</code> <code class="literal">logbuffers</code> および <code class="literal">logspaces</code> テーブルの <code class="literal">log_id</code> カラムに表示される値と同じです
          </p></li><li class="listitem"><p>
            <code class="literal">version</code>
          </p><p>
            オブジェクトバージョン
          </p></li><li class="listitem"><p>
            <code class="literal">state</code>
          </p><p>
            オブジェクトの状態
          </p></li><li class="listitem"><p>
            <code class="literal">parent_obj_type</code>
          </p><p>
            親オブジェクトタイプ (<code class="literal">dict_obj_types</code> タイプ ID)。0 はオブジェクトに親がないことを示します
          </p></li><li class="listitem"><p>
            <code class="literal">parent_obj_id</code>
          </p><p>
            親オブジェクト ID (実テーブルなど)。0 は、オブジェクトに親がないことを示します
          </p></li><li class="listitem"><p>
            <code class="literal">fq_name</code>
          </p><p>
            完全修飾オブジェクト名。テーブルの場合は <code class="literal"><em class="replaceable"><code>database_name</code></em>/def/<em class="replaceable"><code>table_name</code></em></code> 形式、主キーの場合は <code class="literal">sys/def/<em class="replaceable"><code>table_id</code></em>/PRIMARY</code> 形式、一意キーの場合は <code class="literal">sys/def/<em class="replaceable"><code>table_id</code></em>/<em class="replaceable"><code>uk_name</code></em>$unique</code> 形式です
          </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-ndbinfo-dict-obj-tree"></a>23.5.14.22 ndbinfo dict_obj_tree テーブル</h4></div></div></div><a class="indexterm" name="idm45563208832704"></a><p>
        <code class="literal">dict_obj_tree</code> テーブルは、<code class="literal">dict_obj_info</code> テーブルからのテーブル情報のツリーベースのビューを提供します。 これは主にテストでの使用を目的としていますが、<code class="literal">NDB</code> データベースオブジェクトの階層を視覚化する場合に役立ちます。 
      </p><p>
        <code class="literal">dict_obj_tree</code> テーブルには、次のカラムがあります:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">type</code>
          </p><p>
            <code class="literal">DICT</code> オブジェクトのタイプ。オブジェクトタイプの名前を取得するには、<code class="literal">dict_obj_types</code> で結合
          </p></li><li class="listitem"><p>
            <code class="literal">id</code>
          </p><p>
            オブジェクト識別子 (<code class="literal">dict_obj_info</code> の <code class="literal">id</code> カラムと同じ)
          </p><p>
            ディスクデータの Undo ログファイルおよびデータファイルの場合、これは <code class="literal">INFORMATION_SCHEMA.FILES</code> テーブルの <code class="literal">LOGFILE_GROUP_NUMBER</code> カラムに表示される値と同じです。Undo ログファイルの場合、ndbinfo <code class="literal">logbuffers</code> および <code class="literal">logspaces</code> テーブルの <code class="literal">log_id</code> カラムに表示される値とも同じです
          </p></li><li class="listitem"><p>
            <code class="literal">name</code>
          </p><p>
            オブジェクトの完全修飾名 (<code class="literal">dict_obj_info</code> の <code class="literal">fq_name</code> カラムと同じ)
          </p><p>
            テーブルの場合、これは <code class="literal"><em class="replaceable"><code>database_name</code></em>/def/<em class="replaceable"><code>table_name</code></em></code> (<em class="replaceable"><code>parent_name</code></em> と同じ) です。すべてのタイプのインデックスの場合、これは <code class="literal">NDB$INDEX_<em class="replaceable"><code>index_id</code></em>_CUSTOM</code> という形式になります
          </p></li><li class="listitem"><p>
            <code class="literal">parent_type</code>
          </p><p>
            このオブジェクト親オブジェクトの <em class="replaceable"><code>DICT</code></em> オブジェクト型。オブジェクト型の名前を取得するには、<code class="literal">dict_obj_types</code> で結合
          </p></li><li class="listitem"><p>
            <code class="literal">parent_id</code>
          </p><p>
            このオブジェクトの親オブジェクトの識別子 (<code class="literal">dict_obj_info</code> テーブルの <code class="literal">id</code> カラムと同じ)
          </p></li><li class="listitem"><p>
            <code class="literal">parent_name</code>
          </p><p>
            このオブジェクト親オブジェクトの完全修飾名。<code class="literal">dict_obj_info</code> テーブルの <code class="literal">fq_name</code> カラムと同じです
          </p><p>
            テーブルの場合、これは <code class="literal"><em class="replaceable"><code>database_name</code></em>/def/<em class="replaceable"><code>table_name</code></em></code> 形式になります。 インデックスの場合、名前は <code class="literal">sys/def/<em class="replaceable"><code>table_id</code></em>/<em class="replaceable"><code>index_name</code></em></code> です。 主キーの場合は <code class="literal">sys/def/<em class="replaceable"><code>table_id</code></em>/PRIMARY</code>、一意キーの場合は <code class="literal">sys/def/<em class="replaceable"><code>table_id</code></em>/<em class="replaceable"><code>uk_name</code></em>$unique</code> です 
          </p></li><li class="listitem"><p>
            <code class="literal">root_type</code>
          </p><p>
            ルートオブジェクトの <em class="replaceable"><code>DICT</code></em> オブジェクト型。オブジェクト型の名前を取得するには、<code class="literal">dict_obj_types</code> で結合
          </p></li><li class="listitem"><p>
            <code class="literal">root_id</code>
          </p><p>
            ルートオブジェクトの識別子 (<code class="literal">dict_obj_info</code> テーブルの <code class="literal">id</code> カラムと同じ)
          </p></li><li class="listitem"><p>
            <code class="literal">root_name</code>
          </p><p>
            ルートオブジェクトの完全修飾名 (<code class="literal">dict_obj_info</code> テーブルの <code class="literal">fq_name</code> カラムと同じ)
          </p></li><li class="listitem"><p>
            <code class="literal">level</code>
          </p><p>
            階層内のオブジェクトのレベル
          </p></li><li class="listitem"><p>
            <code class="literal">パス</code>
          </p><p>
            <em class="replaceable"><code>NDB</code></em> オブジェクト階層内のオブジェクトへの完全なパス。オブジェクトは、左のルートオブジェクトから右矢印 (<code class="literal">-&gt;</code>) で区切られます
          </p></li><li class="listitem"><p>
            <code class="literal">indented_name</code>
          </p><p>
            階層内のオブジェクトの深さに対応する、(<code class="literal">-&gt;</code> として表される) 右矢印の前に複数のスペースがある <code class="literal">name</code>
          </p></li></ul></div><p>
        <code class="literal">path</code> カラムは、特定の <code class="literal">NDB</code> データベースオブジェクトへの完全なパスを単一行で取得する場合に便利ですが、<code class="literal">indented_name</code> カラムを使用すると、目的のオブジェクトの完全な階層情報のツリー形式のレイアウトを取得できます。
      </p><p>
        <span class="emphasis"><em>例</em></span>: <code class="literal">test</code> データベースが存在し、このデータベースに <code class="literal">t1</code> という名前の既存のテーブルがないと仮定して、次の SQL ステートメントを実行します:
      </p><pre class="programlisting">CREATE TABLE test.t1 (
    a INT PRIMARY KEY,
    b INT,
    UNIQUE KEY(b)
)   ENGINE = NDB;
</pre><p>
        ここに示すクエリーを使用して、作成したテーブルへのパスを取得できます:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT path FROM ndbinfo.dict_obj_tree</code></strong>
    -&gt; <strong class="userinput"><code>WHERE name LIKE 'test%t1';</code></strong>
+-------------+
| path        |
+-------------+
| test/def/t1 |
+-------------+
1 row in set (0.14 sec)
</pre><p>
        次のようなクエリーで、テーブルへのパスをルート名として使用して、このテーブルのすべての依存オブジェクトへのパスを表示できます:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT path FROM ndbinfo.dict_obj_tree</code></strong>
    -&gt; <strong class="userinput"><code>WHERE root_name = 'test/def/t1';</code></strong>
+----------------------------------------------------------+
| path                                                     |
+----------------------------------------------------------+
| test/def/t1                                              |
| test/def/t1 -&gt; sys/def/13/b                              |
| test/def/t1 -&gt; sys/def/13/b -&gt; NDB$INDEX_15_CUSTOM       |
| test/def/t1 -&gt; sys/def/13/b$unique                       |
| test/def/t1 -&gt; sys/def/13/b$unique -&gt; NDB$INDEX_16_UI    |
| test/def/t1 -&gt; sys/def/13/PRIMARY                        |
| test/def/t1 -&gt; sys/def/13/PRIMARY -&gt; NDB$INDEX_14_CUSTOM |
+----------------------------------------------------------+
7 rows in set (0.16 sec)
</pre><p>
        すべての依存オブジェクトを含む <code class="literal">t1</code> テーブルの階層ビューを取得するには、次のようなクエリーを実行します。このクエリーでは、ルートオブジェクトの名前として <code class="literal">test/def/t1</code> を持つ各オブジェクトのインデント名が選択されます:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT indented_name FROM ndbinfo.dict_obj_tree</code></strong>
    -&gt; <strong class="userinput"><code>WHERE root_name = 'test/def/t1';</code></strong>
+----------------------------+
| indented_name              |
+----------------------------+
| test/def/t1                |
|   -&gt; sys/def/13/b          |
|     -&gt; NDB$INDEX_15_CUSTOM |
|   -&gt; sys/def/13/b$unique   |
|     -&gt; NDB$INDEX_16_UI     |
|   -&gt; sys/def/13/PRIMARY    |
|     -&gt; NDB$INDEX_14_CUSTOM |
+----------------------------+
7 rows in set (0.15 sec)
</pre><p>
        「ディスクデータ」テーブルを操作する場合、このコンテキストではテーブルスペースまたはログファイルグループがルートオブジェクトとみなされることに注意してください。 つまり、特定のテーブルに関連付けられているテーブルスペースまたはログファイルグループの名前を知っているか、<code class="literal">SHOW CREATE TABLE</code> からこの情報を取得してから <code class="literal">INFORMATION_SCHEMA.FILES</code> をクエリーするか、次に示すような方法が必要です: 
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW CREATE TABLE test.dt_1\G</code></strong>
*************************** 1. row ***************************
       Table: dt_1
Create Table: CREATE TABLE `dt_1` (
  `member_id` int unsigned NOT NULL AUTO_INCREMENT,
  `last_name` varchar(50) NOT NULL,
  `first_name` varchar(50) NOT NULL,
  `dob` date NOT NULL,
  `joined` date NOT NULL,
  PRIMARY KEY (`member_id`),
  KEY `last_name` (`last_name`,`first_name`)
) /*!50100 TABLESPACE `ts_1` STORAGE DISK */ ENGINE=ndbcluster DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci
1 row in set (0.00 sec)

mysql&gt; <strong class="userinput"><code>SELECT DISTINCT TABLESPACE_NAME, LOGFILE_GROUP_NAME</code></strong>
    -&gt; <strong class="userinput"><code>FROM INFORMATION_SCHEMA.FILES WHERE TABLESPACE_NAME='ts_1';</code></strong>
+-----------------+--------------------+
| TABLESPACE_NAME | LOGFILE_GROUP_NAME |
+-----------------+--------------------+
| ts_1            | lg_1               |
+-----------------+--------------------+
1 row in set (0.00 sec)
</pre><p>
        これで、次のようにテーブル、テーブルスペースおよびログファイルグループの階層情報を取得できます:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT indented_name FROM ndbinfo.dict_obj_tree</code></strong>
    -&gt; <strong class="userinput"><code>WHERE root_name = 'test/def/dt_1';</code></strong>
+----------------------------+
| indented_name              |
+----------------------------+
| test/def/dt_1              |
|   -&gt; sys/def/23/last_name  |
|     -&gt; NDB$INDEX_25_CUSTOM |
|   -&gt; sys/def/23/PRIMARY    |
|     -&gt; NDB$INDEX_24_CUSTOM |
+----------------------------+
5 rows in set (0.15 sec)

mysql&gt; <strong class="userinput"><code>SELECT indented_name FROM ndbinfo.dict_obj_tree</code></strong>
    -&gt; <strong class="userinput"><code>WHERE root_name = 'ts_1';</code></strong>
+-----------------+
| indented_name   |
+-----------------+
| ts_1            |
|   -&gt; data_1.dat |
|   -&gt; data_2.dat |
+-----------------+
3 rows in set (0.17 sec)

mysql&gt; <strong class="userinput"><code>SELECT indented_name FROM ndbinfo.dict_obj_tree</code></strong>
    -&gt; <strong class="userinput"><code>WHERE root_name LIKE 'lg_1';</code></strong>
+-----------------+
| indented_name   |
+-----------------+
| lg_1            |
|   -&gt; undo_1.log |
|   -&gt; undo_2.log |
+-----------------+
3 rows in set (0.16 sec)
</pre><p>
        NDB 8.0.24 に <code class="literal">dict_obj_tree</code> テーブルが追加されました。
      </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-ndbinfo-dict-obj-types"></a>23.5.14.23 ndbinfo dict_obj_types テーブル</h4></div></div></div><a class="indexterm" name="idm45563208731760"></a><p>
        <code class="literal">dict_obj_types</code> テーブルは、NDB カーネルで使用される可能性のあるディクショナリオブジェクトのタイプを一覧表示した静的なテーブルです。 これらは、NDB API の <code class="literal">Object::Type</code> で定義されるタイプと同じです。 
      </p><p>
        <code class="literal">dict_obj_types</code> テーブルには、次のカラムがあります:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">type_id</code>
          </p><p>
            このタイプのタイプ ID
          </p></li><li class="listitem"><p>
            <code class="literal">type_name</code>
          </p><p>
            このタイプの名前
          </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-ndbinfo-disk-write-speed-base"></a>23.5.14.24 ndbinfo disk_write_speed_base テーブル</h4></div></div></div><a class="indexterm" name="idm45563208720176"></a><p>
        <code class="literal">disk_write_speed_base</code> テーブルは、LCP、バックアップ、およびリストア操作時のディスク書き込みの速度に関する基本情報を示します。
      </p><p>
        <code class="literal">disk_write_speed_base</code> テーブルには、次のカラムがあります:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">node_id</code>
          </p><p>
            このノードのノード ID
          </p></li><li class="listitem"><p>
            <code class="literal">thr_no</code>
          </p><p>
            この LDM スレッドのスレッド ID
          </p></li><li class="listitem"><p>
            <code class="literal">millis_ago</code>
          </p><p>
            このレポート期間が終了してからのミリ秒数
          </p></li><li class="listitem"><p>
            <code class="literal">millis_passed</code>
          </p><p>
            このレポート期間内に経過したミリ秒数
          </p></li><li class="listitem"><p>
            <code class="literal">backup_lcp_bytes_written</code>
          </p><p>
            この期間中にローカルチェックポイントおよびバックアッププロセスによってディスクに書き込まれたバイト数
          </p></li><li class="listitem"><p>
            <code class="literal">redo_bytes_written</code>
          </p><p>
            この期間中に Redo ログに書き込まれたバイト数
          </p></li><li class="listitem"><p>
            <code class="literal">target_disk_write_speed</code>
          </p><p>
            LDM スレッド (基本データ) ごとの実際のディスク書き込み速度
          </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-ndbinfo-disk-write-speed-aggregate"></a>23.5.14.25 ndbinfo disk_write_speed_aggregate テーブル</h4></div></div></div><a class="indexterm" name="idm45563208699424"></a><p>
        <code class="literal">disk_write_speed_aggregate</code> テーブルは、LCP、バックアップ、およびリストア操作時のディスク書き込みの速度に関して集計された情報を示します。
      </p><p>
        <code class="literal">disk_write_speed_aggregate</code> テーブルには、次のカラムがあります:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">node_id</code>
          </p><p>
            このノードのノード ID
          </p></li><li class="listitem"><p>
            <code class="literal">thr_no</code>
          </p><p>
            この LDM スレッドのスレッド ID
          </p></li><li class="listitem"><p>
            <code class="literal">backup_lcp_speed_last_sec</code>
          </p><p>
            過去 1 秒間にバックアップおよび LCP プロセスによってディスクに書き込まれたバイト数
          </p></li><li class="listitem"><p>
            <code class="literal">redo_speed_last_sec</code>
          </p><p>
            過去 1 秒間に Redo ログに書き込まれたバイト数
          </p></li><li class="listitem"><p>
            <code class="literal">backup_lcp_speed_last_10sec</code>
          </p><p>
            バックアップおよび LCP プロセスによってディスクに書き込まれた 1 秒当たりのバイト数 (過去 10 秒間の平均値)
          </p></li><li class="listitem"><p>
            <code class="literal">redo_speed_last_10sec</code>
          </p><p>
            Redo ログにディスクに書き込まれた 1 秒当たりのバイト数 (過去 10 秒間の平均値)
          </p></li><li class="listitem"><p>
            <code class="literal">std_dev_backup_lcp_speed_last_10sec</code>
          </p><p>
            バックアップおよび LCP プロセスによってディスクに書き込まれた 1 秒当たりのバイト数の標準偏差 (過去 10 秒間の平均値)
          </p></li><li class="listitem"><p>
            <code class="literal">std_dev_redo_speed_last_10sec</code>
          </p><p>
            Redo ログにディスクに書き込まれた 1 秒当たりのバイト数の標準偏差 (過去 10 秒間の平均値)
          </p></li><li class="listitem"><p>
            <code class="literal">backup_lcp_speed_last_60sec</code>
          </p><p>
            バックアップおよび LCP プロセスによってディスクに書き込まれた 1 秒当たりのバイト数 (過去 60 秒間の平均値)
          </p></li><li class="listitem"><p>
            <code class="literal">redo_speed_last_60sec</code>
          </p><p>
            Redo ログにディスクに書き込まれた 1 秒当たりのバイト数 (過去 10 秒間の平均値)
          </p></li><li class="listitem"><p>
            <code class="literal">std_dev_backup_lcp_speed_last_60sec</code>
          </p><p>
            バックアップおよび LCP プロセスによってディスクに書き込まれた 1 秒当たりのバイト数の標準偏差 (過去 60 秒間の平均値)
          </p></li><li class="listitem"><p>
            <code class="literal">std_dev_redo_speed_last_60sec</code>
          </p><p>
            Redo ログにディスクに書き込まれた 1 秒当たりのバイト数の標準偏差 (過去 60 秒間の平均値)
          </p></li><li class="listitem"><p>
            <code class="literal">slowdowns_due_to_io_lag</code>
          </p><p>
            REDO ログの I/O ラグが原因でディスク書込みが遅くなった最後のノード起動以降の秒数
          </p></li><li class="listitem"><p>
            <code class="literal">slowdowns_due_to_high_cpu</code>
          </p><p>
            最後のノード起動以降、CPU 使用率が高いためにディスク書込みが遅くなった秒数
          </p></li><li class="listitem"><p>
            <code class="literal">disk_write_speed_set_to_min</code>
          </p><p>
            最後のノードが起動してからディスク書込み速度が最小に設定された秒数
          </p></li><li class="listitem"><p>
            <code class="literal">current_target_disk_write_speed</code>
          </p><p>
            LDM スレッドごとの実際のディスク書き込み速度 (集計値)
          </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-ndbinfo-disk-write-speed-aggregate-node"></a>23.5.14.26 ndbinfo disk_write_speed_aggregate_node テーブル</h4></div></div></div><a class="indexterm" name="idm45563208658752"></a><p>
        <code class="literal">disk_write_speed_aggregate_node</code> テーブルは、LCP、バックアップ、およびリストア操作時のディスク書き込みの速度に関して集計された情報を示します。
      </p><p>
        <code class="literal">disk_write_speed_aggregate_node</code> テーブルには、次のカラムがあります:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">node_id</code>
          </p><p>
            このノードのノード ID
          </p></li><li class="listitem"><p>
            <code class="literal">backup_lcp_speed_last_sec</code>
          </p><p>
            過去 1 秒間にバックアップおよび LCP プロセスによってディスクに書き込まれたバイト数
          </p></li><li class="listitem"><p>
            <code class="literal">redo_speed_last_sec</code>
          </p><p>
            過去 1 秒間に Redo ログに書き込まれたバイト数
          </p></li><li class="listitem"><p>
            <code class="literal">backup_lcp_speed_last_10sec</code>
          </p><p>
            バックアップおよび LCP プロセスによってディスクに書き込まれた 1 秒当たりのバイト数 (過去 10 秒間の平均値)
          </p></li><li class="listitem"><p>
            <code class="literal">redo_speed_last_10sec</code>
          </p><p>
            Redo ログにディスクに書き込まれた 1 秒当たりのバイト数 (過去 10 秒間の平均値)
          </p></li><li class="listitem"><p>
            <code class="literal">backup_lcp_speed_last_60sec</code>
          </p><p>
            バックアップおよび LCP プロセスによってディスクに書き込まれた 1 秒当たりのバイト数 (過去 60 秒間の平均値)
          </p></li><li class="listitem"><p>
            <code class="literal">redo_speed_last_60sec</code>
          </p><p>
            バックアップおよび LCP プロセスによってディスクに書き込まれた 1 秒当たりのバイト数 (過去 60 秒間の平均値)
          </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-ndbinfo-diskpagebuffer"></a>23.5.14.27 ndbinfo diskpagebuffer テーブル</h4></div></div></div><a class="indexterm" name="idm45563208637424"></a><p>
        <code class="literal">diskpagebuffer</code> テーブルには、「NDB Cluster ディスクデータ」テーブルによるディスクページバッファの使用状況に関する統計が表示されます。
      </p><p>
        <code class="literal">diskpagebuffer</code> テーブルには、次のカラムがあります:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">node_id</code>
          </p><p>
            データノード ID
          </p></li><li class="listitem"><p>
            <code class="literal">block_instance</code>
          </p><p>
            ブロックインスタンス
          </p></li><li class="listitem"><p>
            <code class="literal">pages_written</code>
          </p><p>
            ディスクに書き込まれたページ数。
          </p></li><li class="listitem"><p>
            <code class="literal">pages_written_lcp</code>
          </p><p>
            ローカルチェックポイントによって書き込まれたページ数。
          </p></li><li class="listitem"><p>
            <code class="literal">pages_read</code>
          </p><p>
            ディスクから読み取られたページ数
          </p></li><li class="listitem"><p>
            <code class="literal">log_waits</code>
          </p><p>
            ログがディスクに書き込まれるまで待機しているページ書き込みの数
          </p></li><li class="listitem"><p>
            <code class="literal">page_requests_direct_return</code>
          </p><p>
            バッファー内で使用可能だったページに対するリクエストの数
          </p></li><li class="listitem"><p>
            <code class="literal">page_requests_wait_queue</code>
          </p><p>
            ページがバッファー内で使用可能になるまで待機する必要があったリクエストの数
          </p></li><li class="listitem"><p>
            <code class="literal">page_requests_wait_io</code>
          </p><p>
            ディスク上のページから読み取る必要があった (バッファー内のページを使用できなかった) リクエストの数
          </p></li></ul></div><h5><a name="idm45563208613744"></a>メモ</h5><p>
        このテーブルを「NDB Cluster ディスクデータ」テーブルとともに使用すると、<code class="literal">DiskPageBufferMemory</code> がディスクからではなくバッファからデータを読み取るのに十分な大きさであるかどうかを判断できます。ディスクシークを最小限に抑えると、このようなテーブルのパフォーマンスを向上させることができます。
      </p><p>
        このようなクエリーを使用すると、読み取りの合計回数に対する <code class="literal">DiskPageBufferMemory</code> からの読み取りの比率を特定できます。この比率は、パーセンテージとして取得されます。
      </p><pre class="programlisting">SELECT
  node_id,
  100 * page_requests_direct_return /
    (page_requests_direct_return + page_requests_wait_io)
      AS hit_ratio
FROM ndbinfo.diskpagebuffer;
</pre><p>
        このクエリーによる結果は、クラスタ内のデータノード (この例では、クラスタには 4 つのデータノードがあります) ごとに 1 行で、次に示すものと同様になります。
      </p><pre class="programlisting">+---------+-----------+
| node_id | hit_ratio |
+---------+-----------+
|       5 |   97.6744 |
|       6 |   97.6879 |
|       7 |   98.1776 |
|       8 |   98.1343 |
+---------+-----------+
4 rows in set (0.00 sec)
</pre><p>
        <code class="literal">hit_ratio</code> の値が 100% に近付いていることは、バッファーからではなく、ディスクから行われている読み取りの数が非常にわずかしかないことを示します。つまり、ディスクデータの読み取りパフォーマンスが最適なレベルに近付いています。 これらの値のいずれかが 95% 未満である場合は、<code class="filename">config.ini</code> ファイルで <code class="literal">DiskPageBufferMemory</code> の設定を大きくする必要があることを強く示しています。 
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
          <code class="literal">DiskPageBufferMemory</code> の変更が有効になる前に、クラスタのすべてのデータノードのローリング再起動が必要です。
        </p></div><p>
        <code class="literal">block_instance</code> は、カーネルブロックのインスタンスを指します。 この番号は、ブロック名とともに使用して、<code class="literal">threadblocks</code> テーブル内の特定のインスタンスを検索できます。 この情報を使用すると、個々のスレッドに関連するディスクページバッファメトリックに関する情報を取得できます。<code class="literal">LIMIT 1</code> を使用して出力を単一スレッドに制限するクエリーの例を次に示します: 
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT</code></strong>
     &gt;   <strong class="userinput"><code>node_id, thr_no, block_name, thread_name, pages_written,</code></strong>
     &gt;   <strong class="userinput"><code>pages_written_lcp, pages_read, log_waits,</code></strong>
     &gt;   <strong class="userinput"><code>page_requests_direct_return, page_requests_wait_queue,</code></strong>
     &gt;   <strong class="userinput"><code>page_requests_wait_io</code></strong>
     &gt; <strong class="userinput"><code>FROM ndbinfo.diskpagebuffer</code></strong>
     &gt;   <strong class="userinput"><code>INNER JOIN ndbinfo.threadblocks USING (node_id, block_instance)</code></strong>
     &gt;   <strong class="userinput"><code>INNER JOIN ndbinfo.threads USING (node_id, thr_no)</code></strong>
     &gt; <strong class="userinput"><code>WHERE block_name = 'PGMAN' LIMIT 1\G</code></strong>
*************************** 1. row ***************************
                    node_id: 1
                     thr_no: 1
                 block_name: PGMAN
                thread_name: rep
              pages_written: 0
          pages_written_lcp: 0
                 pages_read: 1
                  log_waits: 0
page_requests_direct_return: 4
   page_requests_wait_queue: 0
      page_requests_wait_io: 1
1 row in set (0.01 sec)
</pre></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-ndbinfo-diskstat"></a>23.5.14.28 ndbinfo diskstat テーブル</h4></div></div></div><a class="indexterm" name="idm45563208587424"></a><p>
        <code class="literal">diskstat</code> テーブルには、過去 1 秒間の「ディスクデータ」テーブルスペースへの書込みに関する情報が表示されます。
      </p><p>
        <code class="literal">diskstat</code> テーブルには、次のカラムがあります:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">node_id</code>
          </p><p>
            このノードのノード ID
          </p></li><li class="listitem"><p>
            <code class="literal">block_instance</code>
          </p><p>
            <code class="literal">PGMAN</code> のレポートインスタンスの ID
          </p></li><li class="listitem"><p>
            <code class="literal">pages_made_dirty</code>
          </p><p>
            過去 1 秒間にダーティになったページ数
          </p></li><li class="listitem"><p>
            <code class="literal">reads_issued</code>
          </p><p>
            過去 1 秒間に発行された読取り
          </p></li><li class="listitem"><p>
            <code class="literal">reads_completed</code>
          </p><p>
            過去 1 秒間に完了した読取り
          </p></li><li class="listitem"><p>
            <code class="literal">writes_issued</code>
          </p><p>
            過去 1 秒間に発行された書込み
          </p></li><li class="listitem"><p>
            <code class="literal">writes_completed</code>
          </p><p>
            過去 1 秒間に完了した書き込み
          </p></li><li class="listitem"><p>
            <code class="literal">log_writes_issued</code>
          </p><p>
            過去 1 秒間にページ書込みにログ書込みが必要だった回数
          </p></li><li class="listitem"><p>
            <code class="literal">log_writes_completed</code>
          </p><p>
            最後の秒の間に完了したログ書込み数
          </p></li><li class="listitem"><p>
            <code class="literal">get_page_calls_issued</code>
          </p><p>
            過去 1 秒間に発行された <code class="literal">get_page()</code> コールの数
          </p></li><li class="listitem"><p>
            <code class="literal">get_page_reqs_issued</code>
          </p><p>
            <code class="literal">get_page()</code> コールで I/O の待機または過去 1 秒間にすでに開始された I/O の完了が発生した回数
          </p></li><li class="listitem"><p>
            <code class="literal">get_page_reqs_completed</code>
          </p><p>
            過去 1 秒間に完了した I/O または I/O の完了を待機している <code class="literal">get_page()</code> コールの数
          </p></li></ul></div><h5><a name="idm45563208555312"></a>メモ</h5><p>
        このテーブルの各行は、<code class="literal">PGMAN</code> のインスタンスに対応しています。LDM スレッドごとに 1 つのインスタンスに加えて、データノードごとに追加のインスタンスがあります。
      </p><p>
        NDB 8.0.19 に <code class="literal">diskstat</code> テーブルが追加されました。
      </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-ndbinfo-diskstats-1sec"></a>23.5.14.29 ndbinfo diskstats_1sec テーブル</h4></div></div></div><a class="indexterm" name="idm45563208550400"></a><p>
        <code class="literal">diskstats_1sec</code> テーブルには、過去 20 秒間の「ディスクデータ」テーブルスペースへの書込みに関する情報が表示されます。
      </p><p>
        <code class="literal">diskstat</code> テーブルには、次のカラムがあります:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">node_id</code>
          </p><p>
            このノードのノード ID
          </p></li><li class="listitem"><p>
            <code class="literal">block_instance</code>
          </p><p>
            <code class="literal">PGMAN</code> のレポートインスタンスの ID
          </p></li><li class="listitem"><p>
            <code class="literal">pages_made_dirty</code>
          </p><p>
            指定された 1 秒間隔でダーティになったページ
          </p></li><li class="listitem"><p>
            <code class="literal">reads_issued</code>
          </p><p>
            指定された 1 秒間隔中に発行された読取り
          </p></li><li class="listitem"><p>
            <code class="literal">reads_completed</code>
          </p><p>
            指定された 1 秒間隔で読取りが完了しました
          </p></li><li class="listitem"><p>
            <code class="literal">writes_issued</code>
          </p><p>
            指定された 1 秒間隔中に発行された書込み
          </p></li><li class="listitem"><p>
            <code class="literal">writes_completed</code>
          </p><p>
            指定された 1 秒間隔で書込みが完了しました
          </p></li><li class="listitem"><p>
            <code class="literal">log_writes_issued</code>
          </p><p>
            指定された 1 秒間隔の間にページ書込みでログ書込みが必要になった回数
          </p></li><li class="listitem"><p>
            <code class="literal">log_writes_completed</code>
          </p><p>
            指定された 1 秒間隔中に完了したログ書込み数
          </p></li><li class="listitem"><p>
            <code class="literal">get_page_calls_issued</code>
          </p><p>
            指定された 1 秒間隔中に発行された <code class="literal">get_page()</code> コールの数
          </p></li><li class="listitem"><p>
            <code class="literal">get_page_reqs_issued</code>
          </p><p>
            指定された 1 秒間隔中に、<code class="literal">get_page()</code> コールが I/O の待機または I/O の完了をすでに開始した回数
          </p></li><li class="listitem"><p>
            <code class="literal">get_page_reqs_completed</code>
          </p><p>
            指定された 1 秒間隔中に完了した I/O または I/O の完了を待機している <code class="literal">get_page()</code> コールの数
          </p></li><li class="listitem"><p>
            <code class="literal">seconds_ago</code>
          </p><p>
            この行が適用される間隔の過去の 1 秒間隔の数
          </p></li></ul></div><h5><a name="idm45563208515904"></a>メモ</h5><p>
        このテーブルの各行は、0 から 19 秒前に発生する 1 秒間隔の間の <code class="literal">PGMAN</code> のインスタンスに対応します。LDM スレッドごとにそのようなインスタンスが 1 つあり、データノードごとに追加のインスタンスがあります。
      </p><p>
        NDB 8.0.19 に <code class="literal">diskstats_1sec</code> テーブルが追加されました。
      </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-ndbinfo-error-messages"></a>23.5.14.30 ndbinfo error_messages テーブル</h4></div></div></div><a class="indexterm" name="idm45563208510816"></a><p>
        <code class="literal">error_messages</code> テーブルには、次の情報が表示されます
      </p><p>
        <code class="literal">error_messages</code> テーブルには、次のカラムがあります:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">error_code</code>
          </p><p>
            数値エラーコード
          </p></li><li class="listitem"><p>
            <code class="literal">error_description</code>
          </p><p>
            エラーの説明
          </p></li><li class="listitem"><p>
            <code class="literal">error_status</code>
          </p><p>
            Error status code
          </p></li><li class="listitem"><p>
            <code class="literal">error_classification</code>
          </p><p>
            エラー分類コード
          </p></li></ul></div><h5><a name="idm45563208498336"></a>メモ</h5><p>
        <code class="literal">error_code</code> は数値の NDB エラーコードです。 これは、<span class="command"><strong>ndb_perror</strong></span> (NDB 8.0.13 より前の場合は <span class="command"><strong>perror</strong></span> <code class="option">--ndb</code>) に提供できるエラーコードと同じです。 
      </p><p>
        <code class="literal">error_description</code> では、エラーの原因となった条件の基本的な説明が提供されます。
      </p><p>
        <code class="literal">error_status</code> カラムには、エラーに関連するステータス情報が表示されます。 このカラムに使用可能な値は次のとおりです: 
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">No error</code>
          </p></li><li class="listitem"><p>
            <code class="literal">Illegal connect string</code>
          </p></li><li class="listitem"><p>
            <code class="literal">Illegal server handle</code>
          </p></li><li class="listitem"><p>
            <code class="literal">Illegal reply from server</code>
          </p></li><li class="listitem"><p>
            <code class="literal">Illegal number of nodes</code>
          </p></li><li class="listitem"><p>
            <code class="literal">Illegal node status</code>
          </p></li><li class="listitem"><p>
            <code class="literal">メモリー不足</code>
          </p></li><li class="listitem"><p>
            <code class="literal">Management server not connected</code>
          </p></li><li class="listitem"><p>
            <code class="literal">Could not connect to socket</code>
          </p></li><li class="listitem"><p>
            <code class="literal">Start failed</code>
          </p></li><li class="listitem"><p>
            <code class="literal">Stop failed</code>
          </p></li><li class="listitem"><p>
            <code class="literal">Restart failed</code>
          </p></li><li class="listitem"><p>
            <code class="literal">Could not start backup</code>
          </p></li><li class="listitem"><p>
            <code class="literal">Could not abort backup</code>
          </p></li><li class="listitem"><p>
            <code class="literal">Could not enter single user mode</code>
          </p></li><li class="listitem"><p>
            <code class="literal">Could not exit single user mode</code>
          </p></li><li class="listitem"><p>
            <code class="literal">Failed to complete configuration change</code>
          </p></li><li class="listitem"><p>
            <code class="literal">Failed to get configuration</code>
          </p></li><li class="listitem"><p>
            <code class="literal">Usage error</code>
          </p></li><li class="listitem"><p>
            <code class="literal">成功</code>
          </p></li><li class="listitem"><p>
            <code class="literal">Permanent error</code>
          </p></li><li class="listitem"><p>
            <code class="literal">Temporary error</code>
          </p></li><li class="listitem"><p>
            <code class="literal">Unknown result</code>
          </p></li><li class="listitem"><p>
            <code class="literal">Temporary error, restart node</code>
          </p></li><li class="listitem"><p>
            <code class="literal">Permanent error, external action needed</code>
          </p></li><li class="listitem"><p>
            <code class="literal">Ndbd file system error, restart node initial</code>
          </p></li><li class="listitem"><p>
            <code class="literal">Unknown</code>
          </p></li></ul></div><p>
        error_classification カラムには、エラーの分類が表示されます。 分類コードとその意味の詳細は、<a class="ulink" href="https://dev.mysql.com/doc/ndbapi/en/ndb-error-classifications.html" target="_top">NDB Error Classifications</a> を参照してください。 
      </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-ndbinfo-hwinfo"></a>23.5.14.31 ndbinfo hwinfo テーブル</h4></div></div></div><a class="indexterm" name="idm45563208448912"></a><p>
        <code class="literal">hwinfo</code> テーブルには、特定のデータノードが実行されるハードウェアに関する情報が表示されます。
      </p><p>
        <code class="literal">hwinfo</code> テーブルには、次のカラムがあります:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">node_id</code>
          </p><p>
            ノード ID
          </p></li><li class="listitem"><p>
            <code class="literal">cpu_cnt_max</code>
          </p><p>
            このホスト上のプロセッサの数
          </p></li><li class="listitem"><p>
            <code class="literal">cpu_cnt</code>
          </p><p>
            このノードで使用可能なプロセッサの数
          </p></li><li class="listitem"><p>
            <code class="literal">num_cpu_cores</code>
          </p><p>
            このホスト上の CPU コアの数
          </p></li><li class="listitem"><p>
            <code class="literal">num_cpu_sockets</code>
          </p><p>
            このホスト上の CPU ソケットの数
          </p></li><li class="listitem"><p>
            <code class="literal">HW_memory_size</code>
          </p><p>
            このホストで使用可能なメモリー量
          </p></li><li class="listitem"><p>
            <code class="literal">model_name</code>
          </p><p>
            CPU モデル名
          </p></li></ul></div><h5><a name="idm45563208430176"></a>メモ</h5><p>
        <code class="literal">hwinfo</code> テーブルは、<code class="literal">NDB</code> でサポートされているすべてのオペレーティングシステムで使用できます。
      </p><p>
        このテーブルは NDB 8.0.23 で追加されました。
      </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-ndbinfo-locks-per-fragment"></a>23.5.14.32 ndbinfo locks_per_fragment テーブル</h4></div></div></div><a class="indexterm" name="idm45563208425664"></a><p>
        <code class="literal">locks_per_fragment</code> テーブルには、<code class="literal">operations_per_fragment</code> および <code class="literal">memory_per_fragment</code> へのコンパニオンテーブルとして機能する、ロック要求リクエストの数およびこれらのリクエストの結果に関する情報がフラグメント単位で表示されます。 このテーブルには、フラグメントまたはテーブルの作成以降、または最後の再起動以降にロックの待機に成功した時間と失敗した時間の合計も表示されます。 
      </p><p>
        <code class="literal">locks_per_fragment</code> テーブルには、次のカラムがあります:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">fq_name</code>
          </p><p>
            完全修飾テーブル名
          </p></li><li class="listitem"><p>
            <code class="literal">parent_fq_name</code>
          </p><p>
            親オブジェクトの完全修飾名
          </p></li><li class="listitem"><p>
            <code class="literal">type</code>
          </p><p>
            テーブルタイプ。使用可能な値についてはテキストを参照してください
          </p></li><li class="listitem"><p>
            <code class="literal">table_id</code>
          </p><p>
            テーブル ID
          </p></li><li class="listitem"><p>
            <code class="literal">node_id</code>
          </p><p>
            レポートノード ID
          </p></li><li class="listitem"><p>
            <code class="literal">block_instance</code>
          </p><p>
            LDM インスタンス ID
          </p></li><li class="listitem"><p>
            <code class="literal">fragment_num</code>
          </p><p>
            フラグメント識別子
          </p></li><li class="listitem"><p>
            <code class="literal">ex_req</code>
          </p><p>
            排他ロックリクエストが開始されました
          </p></li><li class="listitem"><p>
            <code class="literal">ex_imm_ok</code>
          </p><p>
            排他ロック要求がすぐに付与されました
          </p></li><li class="listitem"><p>
            <code class="literal">ex_wait_ok</code>
          </p><p>
            待機後に付与された排他ロックリクエスト
          </p></li><li class="listitem"><p>
            <code class="literal">ex_wait_fail</code>
          </p><p>
            排他ロックリクエストが付与されていません
          </p></li><li class="listitem"><p>
            <code class="literal">sh_req</code>
          </p><p>
            共有ロック要求が開始されました
          </p></li><li class="listitem"><p>
            <code class="literal">sh_imm_ok</code>
          </p><p>
            共有ロックリクエストがすぐに付与されました
          </p></li><li class="listitem"><p>
            <code class="literal">sh_wait_ok</code>
          </p><p>
            次の待機後に許可される共有ロックリクエスト
          </p></li><li class="listitem"><p>
            <code class="literal">sh_wait_fail</code>
          </p><p>
            共有ロックリクエストが付与されていません
          </p></li><li class="listitem"><p>
            <code class="literal">wait_ok_millis</code>
          </p><p>
            付与されたロックリクエストの待機にかかった時間 (ミリ秒)
          </p></li><li class="listitem"><p>
            <code class="literal">wait_fail_millis</code>
          </p><p>
            失敗したロックリクエストの待機時間 (ミリ秒)
          </p></li></ul></div><h5><a name="idm45563208384336"></a>メモ</h5><p>
        <code class="literal">block_instance</code> は、カーネルブロックのインスタンスを指します。 この番号は、ブロック名とともに使用して、<code class="literal">threadblocks</code> テーブル内の特定のインスタンスを検索できます。 
      </p><p>
        <code class="literal">fq_name</code> は、<code class="literal">test/def/t1</code>、<code class="literal">sys/def/10/b$unique</code> など、<em class="replaceable"><code>database</code></em> / <em class="replaceable"><code>schema</code></em> / <em class="replaceable"><code>name</code></em> 形式の完全修飾データベースオブジェクト名です。
      </p><p>
        <code class="literal">parent_fq_name</code> は、このオブジェクト親オブジェクト (テーブル) の完全修飾名です。
      </p><p>
        <code class="literal">table_id</code> は、<code class="literal">NDB</code> によって生成されるテーブルの内部 ID です。 これは、他の <code class="literal">ndbinfo</code> テーブルに表示されるのと同じ内部テーブル ID で、<span class="command"><strong>ndb_show_tables</strong></span> の出力にも表示されます。 
      </p><p>
        <code class="literal">type</code> カラムには、テーブルのタイプが表示されます。 これは常に <code class="literal">System table</code>, <code class="literal">User table</code>, <code class="literal">Unique hash index</code>, <code class="literal">Hash index</code>, <code class="literal">Unique ordered index</code>, <code class="literal">Ordered index</code>, <code class="literal">Hash index trigger</code>, <code class="literal">Subscription trigger</code>, <code class="literal">Read only constraint</code>, <code class="literal">Index trigger</code>, <code class="literal">Reorganize trigger</code>, <code class="literal">Tablespace</code>, <code class="literal">Log file group</code>, <code class="literal">Data file</code>, <code class="literal">Undo file</code>, <code class="literal">Hash map</code>, <code class="literal">Foreign key definition</code>, <code class="literal">Foreign key parent trigger</code>, <code class="literal">Foreign key child trigger</code> または <code class="literal">Schema transaction</code> のいずれかです。 
      </p><p>
        <code class="literal">ex_req</code>, <code class="literal">ex_req_imm_ok</code>, <code class="literal">ex_wait_ok</code>, <code class="literal">ex_wait_fail</code>, <code class="literal">sh_req</code>, <code class="literal">sh_req_imm_ok</code>, <code class="literal">sh_wait_ok</code> および <code class="literal">sh_wait_fail</code> のすべてのカラムに表示される値は、テーブルまたはフラグメントが作成されてから、またはこのノードが最後に再起動されてからのいずれか後で発生したリクエストの累積数をテーブルします。 これは、<code class="literal">wait_ok_millis</code> カラムおよび <code class="literal">wait_fail_millis</code> カラムに表示される時間値にも当てはまります。 
      </p><p>
        すべてのロックリクエストは、進行中であるか、なんらかの方法 (成功または失敗) で完了したとみなされます。 これは、次の関係が真であることを意味します: 
      </p><pre class="programlisting">ex_req &gt;= (ex_req_imm_ok + ex_wait_ok + ex_wait_fail)

sh_req &gt;= (sh_req_imm_ok + sh_wait_ok + sh_wait_fail)
</pre><p>
        現在進行中のリクエストの数は、次に示すように、不完全なリクエストの現在の数です:
      </p><pre class="programlisting">[exclusive lock requests in progress] =
    ex_req - (ex_req_imm_ok + ex_wait_ok + ex_wait_fail)

[shared lock requests in progress] =
    sh_req - (sh_req_imm_ok + sh_wait_ok + sh_wait_fail)
</pre><p>
        失敗した待機は中断されたトランザクションを示しますが、中断はロック待機タイムアウトによって発生する場合と発生しない場合があります。 次に示すように、ロック待機中の中断の合計数を取得できます: 
      </p><pre class="programlisting">[aborts while waiting for locks] = ex_wait_fail + sh_wait_fail
</pre></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-ndbinfo-logbuffers"></a>23.5.14.33 ndbinfo logbuffers テーブル</h4></div></div></div><a class="indexterm" name="idm45563208342176"></a><p>
        <code class="literal">logbuffer</code> テーブルは NDB Cluster ログバッファーの使用状況に関する情報を提供します。
      </p><p>
        <code class="literal">logbuffers</code> テーブルには、次のカラムがあります:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">node_id</code>
          </p><p>
            このデータノードの ID。
          </p></li><li class="listitem"><p>
            <code class="literal">log_type</code>
          </p><p>
            ログのタイプ。 次のいずれか: <code class="literal">REDO</code>, <code class="literal">DD-UNDO</code>, <code class="literal">BACKUP-DATA</code> または <code class="literal">BACKUP-LOG</code>。 
          </p></li><li class="listitem"><p>
            <code class="literal">log_id</code>
          </p><p>
            ログ ID。ディスクデータ undo ログファイルの場合、これは <code class="literal">INFORMATION_SCHEMA.FILES</code> テーブルの <code class="literal">LOGFILE_GROUP_NUMBER</code> カラムに表示される値および <code class="literal">ndbinfo</code> <code class="literal">logspaces</code> テーブルの <code class="literal">log_id</code> カラムに表示される値と同じです
          </p></li><li class="listitem"><p>
            <code class="literal">log_part</code>
          </p><p>
            ログパート番号
          </p></li><li class="listitem"><p>
            <code class="literal">total</code>
          </p><p>
            このログに使用可能な合計容量
          </p></li><li class="listitem"><p>
            <code class="literal">used</code>
          </p><p>
            このログによって使用された容量
          </p></li></ul></div><h5><a name="idm45563208318112"></a>メモ</h5><p>
        NDB バックアップの実行時には、2 つの追加のログタイプを反映する <code class="literal">logbuffers</code> テーブル行を使用できます。 これらのいずれかの行のログタイプは <code class="literal">BACKUP-DATA</code> で、バックアップ中にフラグメントをバックアップファイルにコピーするために使用されるデータバッファの量が表示されます。 もう一方の行のログタイプは <code class="literal">BACKUP-LOG</code> で、バックアップの開始後に行われた変更を記録するためにバックアップ中に使用されたログバッファの量が表示されます。 これらの <code class="literal">log_type</code> 行のそれぞれが、クラスタ内の各データノードの <code class="literal">logbuffers</code> テーブルに表示されます。 NDB バックアップが現在実行されていないかぎり、これらの行は存在しません。 
      </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-ndbinfo-logspaces"></a>23.5.14.34 ndbinfo logspaces テーブル</h4></div></div></div><a class="indexterm" name="idm45563208310560"></a><p>
        このテーブルは、NDB Cluster のログ領域使用量に関する情報を提供します。
      </p><p>
        <code class="literal">logspaces</code> テーブルには、次のカラムがあります:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">node_id</code>
          </p><p>
            このデータノードの ID。
          </p></li><li class="listitem"><p>
            <code class="literal">log_type</code>
          </p><p>
            ログのタイプ。<code class="literal">REDO</code> または <code class="literal">DD-UNDO</code> のいずれか。
          </p></li><li class="listitem"><p>
            <code class="literal">node_id</code>
          </p><p>
            ログ ID。ディスクデータ undo ログファイルの場合、これは <code class="literal">INFORMATION_SCHEMA.FILES</code> テーブルの <code class="literal">LOGFILE_GROUP_NUMBER</code> カラムに表示される値および <code class="literal">ndbinfo</code> <code class="literal">logbuffers</code> テーブルの <code class="literal">log_id</code> カラムに表示される値と同じです
          </p></li><li class="listitem"><p>
            <code class="literal">log_part</code>
          </p><p>
            ログパート番号。
          </p></li><li class="listitem"><p>
            <code class="literal">total</code>
          </p><p>
            このログに使用可能な合計容量。
          </p></li><li class="listitem"><p>
            <code class="literal">used</code>
          </p><p>
            このログによって使用された容量。
          </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-ndbinfo-membership"></a>23.5.14.35 ndbinfo membership テーブル</h4></div></div></div><a class="indexterm" name="idm45563208287248"></a><p>
        <code class="literal">membership</code> テーブルは、ノードグループのメンバーシップ、プレジデントノード、アービトレータ、アービトレータの後継ノード、アービトレータの接続状態、およびその他の情報を含む、各データノードがクラスタ内のほかのすべてのノードについて保持するビューを示します。
      </p><p>
        <code class="literal">membership</code> テーブルには、次のカラムがあります:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">node_id</code>
          </p><p>
            このノードのノード ID
          </p></li><li class="listitem"><p>
            <code class="literal">group_id</code>
          </p><p>
            このノードが属するノードグループ
          </p></li><li class="listitem"><p>
            <code class="literal">left node</code>
          </p><p>
            前のノードのノード ID
          </p></li><li class="listitem"><p>
            <code class="literal">right_node</code>
          </p><p>
            次のノードのノード ID
          </p></li><li class="listitem"><p>
            <code class="literal">president</code>
          </p><p>
            プレジデントのノード ID
          </p></li><li class="listitem"><p>
            <code class="literal">successor</code>
          </p><p>
            プレジデントの後継ノードのノード ID
          </p></li><li class="listitem"><p>
            <code class="literal">succession_order</code>
          </p><p>
            このノードがプレジデントの任務を継承する順序
          </p></li><li class="listitem"><p>
            <code class="literal">Conf_HB_order</code>
          </p><p>
            -
          </p></li><li class="listitem"><p>
            <code class="literal">arbitrator</code>
          </p><p>
            アービトレータのノード ID
          </p></li><li class="listitem"><p>
            <code class="literal">arb_ticket</code>
          </p><p>
            アービトレーションを追跡するために使用される内部識別子
          </p></li><li class="listitem"><p>
            <code class="literal">arb_state</code>
          </p><p>
            アービトレーションの状態
          </p></li><li class="listitem"><p>
            <code class="literal">arb_connected</code>
          </p><p>
            このノードがアービトレータに接続されているかどうか (<code class="literal">Yes</code> または <code class="literal">No</code> のいずれか)
          </p></li><li class="listitem"><p>
            <code class="literal">connected_rank1_arbs</code>
          </p><p>
            接続されたランク 1 のアービトレータ
          </p></li><li class="listitem"><p>
            <code class="literal">connected_rank2_arbs</code>
          </p><p>
            接続されたランク 1 のアービトレータ
          </p></li></ul></div><h5><a name="idm45563208252544"></a>メモ</h5><p>
        ノード ID およびノードグループ ID は、<span class="command"><strong>ndb_mgm -e "SHOW"</strong></span> でレポートされるものと同じです。
      </p><p>
        <code class="literal">left_node</code> および <code class="literal">right_node</code> は、次に示すように、時計文字板上の数字の順序と同様に、すべてのデータノードを、それらのノード ID の順序で円形に接続するモデルに関して定義されます。
      </p><div class="figure"><a name="fig-mysql-cluster-circular-left-right"></a><p class="title"><b>図 23.27 NDB Cluster ノードの循環配置</b></p><div class="figure-contents"><div class="mediaobject"><img src="images/cluster-left-right.png" width="275" height="250" alt="内容は周囲のテキストで説明されています。"></div></div></div><br class="figure-break"><p>
        この例では、円形に右回りの順序で、5、6、7、8、12、13、14、15 の番号が付けられた 8 つのデータノードがあります。 <span class="quote">「<span class="quote">左</span>」</span>と<span class="quote">「<span class="quote">右</span>」</span>は、円の内側から判断します。 ノード 5 の左側にあるノードはノード 15 であり、ノード 5 の右側にあるノードはノード 6 です。 次のクエリーを実行し、その出力を調査することで、これらの関係をすべて確認できます。 
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT node_id,left_node,right_node</code></strong>
    -&gt; <strong class="userinput"><code>FROM ndbinfo.membership;</code></strong>
+---------+-----------+------------+
| node_id | left_node | right_node |
+---------+-----------+------------+
|       5 |        15 |          6 |
|       6 |         5 |          7 |
|       7 |         6 |          8 |
|       8 |         7 |         12 |
|      12 |         8 |         13 |
|      13 |        12 |         14 |
|      14 |        13 |         15 |
|      15 |        14 |          5 |
+---------+-----------+------------+
8 rows in set (0.00 sec)
</pre><p>
        <span class="quote">「<span class="quote">左</span>」</span>と<span class="quote">「<span class="quote">右</span>」</span>の指定は、イベントログでも同様に使用されます。
      </p><p>
        <code class="literal">president</code> ノードは、現在のノードから、アービトレータを設定する責任を持つものとして見られるノードです (<a class="ulink" href="https://dev.mysql.com/doc/ndb-internals/en/ndb-internals-start-phases.html" target="_top">NDB Cluster Start Phases</a>を参照してください)。 プレジデントで障害が発生したり、切断されたりすると、現在のノードは、<code class="literal">successor</code> カラムに ID が示されたノードが新しいプレジデントになることを期待します。 <code class="literal">succession_order</code> カラムは、現在のノードが自分自身で持っているとみなす後継キュー内の場所を示します。 
      </p><p>
        通常の NDB Cluster では、すべてのデータノードに <code class="literal">president</code> と同じノードが表示され、その <code class="literal">successor</code> と同じノード (社長以外) が表示されます。 さらに、現在のプレジデントは、自分自身を後継順序の <code class="literal">1</code> とみなし、<code class="literal">successor</code> ノードは、自分自身を <code class="literal">2</code> とみなす、というようにするべきです。 
      </p><p>
        すべてのノードで同じ <code class="literal">arb_state</code> の値、および同じ <code class="literal">arb_ticket</code> の値を示すべきです。 可能性のある <code class="literal">arb_state</code> の値は <code class="literal">ARBIT_NULL</code>、<code class="literal">ARBIT_INIT</code>、<code class="literal">ARBIT_FIND</code>、<code class="literal">ARBIT_PREP1</code>、<code class="literal">ARBIT_PREP2</code>、<code class="literal">ARBIT_START</code>、<code class="literal">ARBIT_RUN</code>、<code class="literal">ARBIT_CHOOSE</code>、<code class="literal">ARBIT_CRASH</code>、および <code class="literal">UNKNOWN</code> です。 
      </p><p>
        <code class="literal">arb_connected</code> は、このノードの <code class="literal">arbitrator</code> として示されているノードに、このノードが接続されているかどうかを示します。
      </p><p>
        <code class="literal">connected_rank1_arbs</code> および <code class="literal">connected_rank2_arbs</code> の各カラムには、<code class="literal">ArbitrationRank</code> がそれぞれ 1 または 2 と等しい 0 個以上のアービトレータのリストが表示されます。
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
          管理ノードと API ノードの両方に、アービトレータになる資格があります。
        </p></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-ndbinfo-memoryusage"></a>23.5.14.36 ndbinfo memoryusage テーブル</h4></div></div></div><a class="indexterm" name="idm45563208208992"></a><p>
        このテーブルをクエリーすると、<span class="command"><strong>ndb_mgm</strong></span> クライアントで <code class="literal">ALL REPORT MemoryUsage</code> コマンドによって提供されるものや、<code class="literal">ALL DUMP 1000</code> によってログに記録されるものと同様の情報が提供されます。
      </p><p>
        <code class="literal">memoryusage</code> テーブルには、次のカラムがあります:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">node_id</code>
          </p><p>
            このデータノードのノード ID。
          </p></li><li class="listitem"><p>
            <code class="literal">memory_type</code>
          </p><p>
            <code class="literal">Data memory</code>、<code class="literal">Index memory</code> または <code class="literal">Long message buffer</code> のいずれか。
          </p></li><li class="listitem"><p>
            <code class="literal">used</code>
          </p><p>
            このデータノードでデータメモリーまたはインデックスメモリーに現在使用されているバイト数。
          </p></li><li class="listitem"><p>
            <code class="literal">used_pages</code>
          </p><p>
            このデータノードでデータメモリーまたはインデックスメモリーに現在使用されているページ数 (テキストを参照してください)。
          </p></li><li class="listitem"><p>
            <code class="literal">total</code>
          </p><p>
            このデータノードに使用可能なデータメモリーまたはインデックスメモリーの合計バイト数 (テキストを参照してください)。
          </p></li><li class="listitem"><p>
            <code class="literal">total_pages</code>
          </p><p>
            このデータノード上のデータメモリーまたはインデックスメモリーに使用可能なメモリーページの合計数 (テキストを参照してください)。
          </p></li></ul></div><h5><a name="idm45563208186720"></a>メモ</h5><p>
        <code class="literal">total</code> カラムは、特定のデータノード上の特定のリソース (データメモリーまたはインデックスメモリ) に使用可能なメモリーの合計量をバイト単位で表します。 この数値は、<code class="filename">config.ini</code> ファイル内の対応する構成パラメータの設定にほぼ等しいです。 
      </p><p>
        クラスタにノード ID <code class="literal">5</code> と <code class="literal">6</code> を持つ 2 つのデータノードがあり、<code class="filename">config.ini</code> ファイルに次が含まれると仮定します。
      </p><pre class="programlisting">[ndbd default]
DataMemory = 1G
IndexMemory = 1G
</pre><p>
        また、<code class="literal">LongMessageBuffer</code> 構成パラメータの値がデフォルト (64 MB) であるとします。
      </p><p>
        次のクエリーでは、ほぼ同じ値が表示されます。
      </p><pre class="programlisting">mysql&gt; SELECT node_id, memory_type, total
     &gt; FROM ndbinfo.memoryusage;
+---------+---------------------+------------+
| node_id | memory_type         | total      |
+---------+---------------------+------------+
|       5 | Data memory         | 1073741824 |
|       5 | Index memory        | 1074003968 |
|       5 | Long message buffer |   67108864 |
|       6 | Data memory         | 1073741824 |
|       6 | Index memory        | 1074003968 |
|       6 | Long message buffer |   67108864 |
+---------+---------------------+------------+
6 rows in set (0.00 sec)
</pre><p>
        この場合、インデックスメモリーの <code class="literal">total</code> カラムの値は、内部の丸め処理によって <code class="literal">IndexMemory</code> の値セットよりもわずかに大きくなります。
      </p><p>
        <code class="literal">used_pages</code> および <code class="literal">total_pages</code> カラムでは、リソースがページ単位で計測されます。これらのサイズは、<code class="literal">DataMemory</code> では 32K、<code class="literal">IndexMemory</code> では 8K です。 長いメッセージバッファーメモリーの場合、ページサイズは 256 バイトです。 
      </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-ndbinfo-memory-per-fragment"></a>23.5.14.37 ndbinfo memory_per_fragment テーブル</h4></div></div></div><a class="indexterm" name="idm45563208167504"></a><p>
        <code class="literal">memory_per_fragment</code> テーブルには、個々のフラグメントによるメモリーの使用状況に関する情報が表示されます。
      </p><p>
        <code class="literal">memory_per_fragment</code> テーブルには、次のカラムがあります:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">fq_name</code>
          </p><p>
            このフラグメントの名前
          </p></li><li class="listitem"><p>
            <code class="literal">parent_fq_name</code>
          </p><p>
            このフラグメントの親の名前
          </p></li><li class="listitem"><p>
            <code class="literal">type</code>
          </p><p>
            オブジェクトのタイプ (可能性のある値についてはテキストを参照してください)
          </p></li><li class="listitem"><p>
            <code class="literal">table_id</code>
          </p><p>
            このテーブルのテーブル ID
          </p></li><li class="listitem"><p>
            <code class="literal">node_id</code>
          </p><p>
            このノードのノード ID
          </p></li><li class="listitem"><p>
            <code class="literal">block_instance</code>
          </p><p>
            カーネルブロックインスタンス ID
          </p></li><li class="listitem"><p>
            <code class="literal">fragment_num</code>
          </p><p>
            フラグメント ID (番号)
          </p></li><li class="listitem"><p>
            <code class="literal">fixed_elem_alloc_bytes</code>
          </p><p>
            固定サイズの要素に割り当てられたバイト数
          </p></li><li class="listitem"><p>
            <code class="literal">fixed_elem_free_bytes</code>
          </p><p>
            固定サイズの要素に割り当てられたページ単位の残りの空きバイト数
          </p></li><li class="listitem"><p>
            <code class="literal">fixed_elem_size_bytes</code>
          </p><p>
            固定サイズの各要素のバイト単位の長さ
          </p></li><li class="listitem"><p>
            <code class="literal">fixed_elem_count</code>
          </p><p>
            固定サイズの要素の数
          </p></li><li class="listitem"><p>
            <code class="literal">fixed_elem_free_count</code>
          </p><p>
            固定サイズの要素用の空き行数
          </p></li><li class="listitem"><p>
            <code class="literal">var_elem_alloc_bytes</code>
          </p><p>
            可変サイズの要素に割り当てられたバイト数
          </p></li><li class="listitem"><p>
            <code class="literal">var_elem_free_bytes</code>
          </p><p>
            可変サイズの要素に割り当てられたページ単位の残りの空きバイト数
          </p></li><li class="listitem"><p>
            <code class="literal">var_elem_count</code>
          </p><p>
            可変サイズの要素の数
          </p></li><li class="listitem"><p>
            <code class="literal">hash_index_alloc_bytes</code>
          </p><p>
            ハッシュインデックスに割り当てられたバイト数
          </p></li></ul></div><h5><a name="idm45563208130144"></a>メモ</h5><p>
        このテーブルの <code class="literal">type</code> カラムは、このフラグメントで使用されるディクショナリオブジェクトのタイプ (NDB API では <code class="literal">Object::Type</code>) を示し、次のリストに示す値のいずれかを取る可能性があります。
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            System table
          </p></li><li class="listitem"><p>
            User table
          </p></li><li class="listitem"><p>
            Unique hash index
          </p></li><li class="listitem"><p>
            Hash index
          </p></li><li class="listitem"><p>
            Unique ordered index
          </p></li><li class="listitem"><p>
            Ordered index
          </p></li><li class="listitem"><p>
            Hash index trigger
          </p></li><li class="listitem"><p>
            Subscription trigger
          </p></li><li class="listitem"><p>
            Read only constraint
          </p></li><li class="listitem"><p>
            Index trigger
          </p></li><li class="listitem"><p>
            Reorganize trigger
          </p></li><li class="listitem"><p>
            テーブルスペース
          </p></li><li class="listitem"><p>
            Log file group
          </p></li><li class="listitem"><p>
            データファイル
          </p></li><li class="listitem"><p>
            Undo file
          </p></li><li class="listitem"><p>
            Hash map
          </p></li><li class="listitem"><p>
            Foreign key definition
          </p></li><li class="listitem"><p>
            Foreign key parent trigger
          </p></li><li class="listitem"><p>
            Foreign key child trigger
          </p></li><li class="listitem"><p>
            Schema transaction
          </p></li></ul></div><p>
        このリストは、<span class="command"><strong>mysql</strong></span> クライアントで <code class="literal">SELECT * FROM</code> <code class="literal">ndbinfo.dict_obj_types</code> を実行して取得することもできます。
      </p><p>
        <code class="literal">block_instance</code> カラムは NDB カーネルブロックのインスタンス番号を提供します。 これを使用して、<code class="literal">threadblocks</code> テーブルから特定のスレッドに関する情報を取得できます。 
      </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-ndbinfo-nodes"></a>23.5.14.38 ndbinfo nodes テーブル</h4></div></div></div><a class="indexterm" name="idm45563208102768"></a><p>
        このテーブルには、データノードのステータスに関する情報が格納されます。 このテーブルの対応する行には、クラスタ内で実行されているデータノードごとに、ノードのノード ID、ステータス、および稼働時間が示されます。 起動中のノードごとに、現在の起動フェーズも示されます。 
      </p><p>
        <code class="literal">nodes</code> テーブルには、次のカラムがあります:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">node_id</code>
          </p><p>
            クラスタ内のデータノードの一意のノード ID。
          </p></li><li class="listitem"><p>
            <code class="literal">uptime</code>
          </p><p>
            ノードが最後に起動されてからの秒単位の時間。
          </p></li><li class="listitem"><p>
            <code class="literal">status</code>
          </p><p>
            データノードの現在のステータス。可能性のある値についてはテキストを参照してください。
          </p></li><li class="listitem"><p>
            <code class="literal">start_phase</code>
          </p><p>
            データノードが起動中の場合、現在の起動フェーズ。
          </p></li><li class="listitem"><p>
            <code class="literal">config_generation</code>
          </p><p>
            このデータノードで使用中のクラスタ構成ファイルのバージョン。
          </p></li></ul></div><h5><a name="idm45563208087616"></a>メモ</h5><p>
        <code class="literal">uptime</code> カラムは、このノードが最後に起動または再起動されてから実行している時間を秒単位で示します。 これは <code class="literal">BIGINT</code> 値です。 この図には、ノードの起動に実際に必要な時間が含まれています。つまり、このカウンタは、<span class="command"><strong>ndbd</strong></span> または <span class="command"><strong>ndbmtd</strong></span> が最初に起動された時点の実行を開始します。したがって、まだ起動が終了していないノードの場合でも、<code class="literal">uptime</code> にゼロ以外の値が表示されることがあります。 
      </p><p>
        <code class="literal">status</code> カラムは、ノードの現在のステータスを示します。 これは、<code class="literal">NOTHING</code>、<code class="literal">CMVMI</code>、<code class="literal">STARTING</code>、<code class="literal">STARTED</code>、<code class="literal">SINGLEUSER</code>、<code class="literal">STOPPING_1</code>、<code class="literal">STOPPING_2</code>、<code class="literal">STOPPING_3</code>、または <code class="literal">STOPPING_4</code> のいずれかです。 ステータスが <code class="literal">STARTING</code> の場合は、<code class="literal">start_phase</code> カラムで現在の起動フェーズを確認できます (このセクションの後半を参照してください)。 クラスタがシングルユーザーモードになっているときは、すべてのデータノードの <code class="literal">status</code> カラムに <code class="literal">SINGLEUSER</code> が表示されます (<a class="xref" href="mysql-cluster.html#mysql-cluster-single-user-mode" title="23.5.6 NDB Cluster のシングルユーザーモード">セクション23.5.6「NDB Cluster のシングルユーザーモード」</a>を参照してください)。 いずれかの <code class="literal">STOPPING</code> 状態が表示されていることは必ずしもノードが停止していることを意味するわけではありませんが、新しい状態になることを意味する場合があります。 たとえば、クラスタをシングルユーザーモードにすると、ステータスが <code class="literal">SINGLEUSER</code> に変更される前に、データノードがその状態を <code class="literal">STOPPING_2</code> として簡単にレポートする場合があります。 
      </p><p>
        <code class="literal">start_phase</code> カラムでは、<span class="command"><strong>ndb_mgm</strong></span> クライアントの <code class="literal"><em class="replaceable"><code>node_id</code></em> STATUS</code> コマンドの出力で使用されるものと同じ範囲の値が使用されます (<a class="xref" href="mysql-cluster.html#mysql-cluster-mgm-client-commands" title="23.5.1 NDB Cluster 管理クライアントのコマンド">セクション23.5.1「NDB Cluster 管理クライアントのコマンド」</a>を参照してください)。 ノードが現在起動中でない場合、このカラムは <code class="literal">0</code> を示します。 NDB Cluster の起動フェーズと説明の一覧については、<a class="xref" href="mysql-cluster.html#mysql-cluster-start-phases" title="23.5.4 NDB Cluster 起動フェーズのサマリー">セクション23.5.4「NDB Cluster 起動フェーズのサマリー」</a> を参照してください。 
      </p><p>
        <code class="literal">config_generation</code> カラムは、各データノードで有効になっているクラスタ構成のバージョンを示します。 これは、構成パラメータの変更を行うために、クラスタのローリング再起動を実行する際に役立つことがあります。 たとえば、次の <code class="literal">SELECT</code> ステートメントの出力から、ノード 1、2、4 では最新バージョンのクラスタ構成 (<code class="literal">6</code>) が使用されているが、ノード 3 ではまだ使用されていないことを確認できます。 
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>USE ndbinfo;</code></strong>
Database changed
mysql&gt; <strong class="userinput"><code>SELECT * FROM nodes;</code></strong>
+---------+--------+---------+-------------+-------------------+
| node_id | uptime | status  | start_phase | config_generation |
+---------+--------+---------+-------------+-------------------+
|       1 |  10462 | STARTED |           0 |                 6 |
|       2 |  10460 | STARTED |           0 |                 6 |
|       3 |  10457 | STARTED |           0 |                 5 |
|       4 |  10455 | STARTED |           0 |                 6 |
+---------+--------+---------+-------------+-------------------+
2 rows in set (0.04 sec)
</pre><p>
        したがって、上記で示したケースでは、クラスタのローリング再起動を完了するために、ノード 3 を再起動するようにしてください。
      </p><p>
        このテーブルでは、停止されたノードは考慮されません。 NDB Cluster に 4 つのデータノード (ノード ID 1、2、3、および 4) があり、すべてのノードが正常に実行されているとします。このテーブルには、データノードごとに 1 つずつ 4 つの行が含まれます: 
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>USE ndbinfo;</code></strong>
Database changed
mysql&gt; <strong class="userinput"><code>SELECT * FROM nodes;</code></strong>
+---------+--------+---------+-------------+-------------------+
| node_id | uptime | status  | start_phase | config_generation |
+---------+--------+---------+-------------+-------------------+
|       1 |  11776 | STARTED |           0 |                 6 |
|       2 |  11774 | STARTED |           0 |                 6 |
|       3 |  11771 | STARTED |           0 |                 6 |
|       4 |  11769 | STARTED |           0 |                 6 |
+---------+--------+---------+-------------+-------------------+
4 rows in set (0.04 sec)
</pre><p>
        ノードのいずれかをシャットダウンすると、この <code class="literal">SELECT</code> ステートメントの出力には、次に示すように、まだ実行中のノードのみが表示されます。
      </p><pre class="programlisting">ndb_mgm&gt; <strong class="userinput"><code>2 STOP</code></strong>
Node 2: Node shutdown initiated
Node 2: Node shutdown completed.
Node 2 has shutdown.
</pre><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT * FROM nodes;</code></strong>
+---------+--------+---------+-------------+-------------------+
| node_id | uptime | status  | start_phase | config_generation |
+---------+--------+---------+-------------+-------------------+
|       1 |  11807 | STARTED |           0 |                 6 |
|       3 |  11802 | STARTED |           0 |                 6 |
|       4 |  11800 | STARTED |           0 |                 6 |
+---------+--------+---------+-------------+-------------------+
3 rows in set (0.02 sec)
</pre></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-ndbinfo-operations-per-fragment"></a>23.5.14.39 ndbinfo operations_per_fragment テーブル</h4></div></div></div><a class="indexterm" name="idm45563208042688"></a><p>
        <code class="literal">operations_per_fragment</code> テーブルには、個々のフラグメントおよびフラグメントレプリカに対して実行された操作と、これらの操作の結果の一部に関する情報が表示されます。
      </p><p>
        <code class="literal">operations_per_fragment</code> テーブルには、次のカラムがあります:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">fq_name</code>
          </p><p>
            このフラグメントの名前
          </p></li><li class="listitem"><p>
            <code class="literal">parent_fq_name</code>
          </p><p>
            このフラグメントの親の名前
          </p></li><li class="listitem"><p>
            <code class="literal">type</code>
          </p><p>
            オブジェクトのタイプ (可能性のある値についてはテキストを参照してください)
          </p></li><li class="listitem"><p>
            <code class="literal">table_id</code>
          </p><p>
            このテーブルのテーブル ID
          </p></li><li class="listitem"><p>
            <code class="literal">node_id</code>
          </p><p>
            このノードのノード ID
          </p></li><li class="listitem"><p>
            <code class="literal">block_instance</code>
          </p><p>
            カーネルブロックインスタンス ID
          </p></li><li class="listitem"><p>
            <code class="literal">fragment_num</code>
          </p><p>
            フラグメント ID (番号)
          </p></li><li class="listitem"><p>
            <code class="literal">tot_key_reads</code>
          </p><p>
            このフラグメントレプリカのキー読取りの合計数
          </p></li><li class="listitem"><p>
            <code class="literal">tot_key_inserts</code>
          </p><p>
            このフラグメントレプリカのキー挿入の合計数
          </p></li><li class="listitem"><p>
            <code class="literal">tot_key_updates</code>
          </p><p>
            このフラグメントレプリカのキー更新の合計数
          </p></li><li class="listitem"><p>
            <code class="literal">tot_key_writes</code>
          </p><p>
            このフラグメントレプリカに対するキー書込みの合計数
          </p></li><li class="listitem"><p>
            <code class="literal">tot_key_deletes</code>
          </p><p>
            このフラグメントレプリカのキー削除の合計数
          </p></li><li class="listitem"><p>
            <code class="literal">tot_key_refs</code>
          </p><p>
            拒否されたキー操作の数
          </p></li><li class="listitem"><p>
            <code class="literal">tot_key_attrinfo_bytes</code>
          </p><p>
            すべての <code class="literal">attrinfo</code> 属性の合計サイズ
          </p></li><li class="listitem"><p>
            <code class="literal">tot_key_keyinfo_bytes</code>
          </p><p>
            すべての <code class="literal">keyinfo</code> 属性の合計サイズ
          </p></li><li class="listitem"><p>
            <code class="literal">tot_key_prog_bytes</code>
          </p><p>
            <code class="literal">attrinfo</code> 属性によって実行されるすべての解釈済プログラムの合計サイズ
          </p></li><li class="listitem"><p>
            <code class="literal">tot_key_inst_exec</code>
          </p><p>
            キー操作のために解釈済プログラムによって実行された命令の合計数
          </p></li><li class="listitem"><p>
            <code class="literal">tot_key_bytes_returned</code>
          </p><p>
            キー読取り操作から返されたすべてのデータおよびメタデータの合計サイズ
          </p></li><li class="listitem"><p>
            <code class="literal">tot_frag_scans</code>
          </p><p>
            このフラグメントレプリカで実行されたスキャンの合計数
          </p></li><li class="listitem"><p>
            <code class="literal">tot_scan_rows_examined</code>
          </p><p>
            スキャンによって検査された行の合計数
          </p></li><li class="listitem"><p>
            <code class="literal">tot_scan_rows_returned</code>
          </p><p>
            クライアントに返された行の合計数
          </p></li><li class="listitem"><p>
            <code class="literal">tot_scan_bytes_returned</code>
          </p><p>
            クライアントに返されるデータおよびメタデータの合計サイズ
          </p></li><li class="listitem"><p>
            <code class="literal">tot_scan_prog_bytes</code>
          </p><p>
            スキャン操作用の解釈されたプログラムの合計サイズ
          </p></li><li class="listitem"><p>
            <code class="literal">tot_scan_bound_bytes</code>
          </p><p>
            順序付けされたインデックススキャンで使用されるすべての境界の合計サイズ
          </p></li><li class="listitem"><p>
            <code class="literal">tot_scan_inst_exec</code>
          </p><p>
            スキャンで実行された命令の合計数
          </p></li><li class="listitem"><p>
            <code class="literal">tot_qd_frag_scans</code>
          </p><p>
            このフラグメントレプリカのスキャンがキューに入れられた回数
          </p></li><li class="listitem"><p>
            <code class="literal">conc_frag_scans</code>
          </p><p>
            このフラグメントレプリカで現在アクティブなスキャンの数 (キューに入れられたスキャンを除く)
          </p></li><li class="listitem"><p>
            <code class="literal">conc_qd_frag_scans</code>
          </p><p>
            このフラグメントレプリカに対して現在キューに入っているスキャンの数
          </p></li><li class="listitem"><p>
            tot_commits
          </p><p>
            このフラグメントレプリカにコミットされた行変更の合計数
          </p></li></ul></div><h5><a name="idm45563207977088"></a>メモ</h5><p>
        <code class="literal">fq_name</code> には、このフラグメントレプリカが属するスキーマオブジェクトの完全修飾名が含まれます。 現在の形式は次のとおりです: 
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            ベーステーブル: <code class="literal"><em class="replaceable"><code>DbName</code></em>/def/<em class="replaceable"><code>TblName</code></em></code>
          </p></li><li class="listitem"><p>
            <code class="literal">BLOB</code> テーブル: <code class="literal"><em class="replaceable"><code>DbName</code></em>/def/NDB$BLOB_<em class="replaceable"><code>BaseTblId</code></em>_<em class="replaceable"><code>ColNo</code></em></code>
          </p></li><li class="listitem"><p>
            順序付きインデックス: <code class="literal">sys/def/<em class="replaceable"><code>BaseTblId</code></em>/<em class="replaceable"><code>IndexName</code></em></code>
          </p></li><li class="listitem"><p>
            一意インデックス: <code class="literal">sys/def/<em class="replaceable"><code>BaseTblId</code></em>/<em class="replaceable"><code>IndexName</code></em>$unique</code>
          </p></li></ul></div><p>
        一意のインデックスに表示される <code class="literal">$unique</code> 接尾辞は <span class="command"><strong>mysqld</strong></span> によって追加されます。別の NDB API クライアントアプリケーションによって作成されたインデックスの場合は、これが異なるか、存在しない可能性があります。
      </p><p>
        完全修飾オブジェクト名に示されている構文は、将来のリリースで変更される可能性がある内部インタフェースです。
      </p><p>
        次の SQL ステートメントによって作成および変更されたテーブル <code class="literal">t1</code> について考えてみます:
      </p><pre class="programlisting">CREATE DATABASE mydb;

USE mydb;

CREATE TABLE t1 (
  a INT NOT NULL,
  b INT NOT NULL,
  t TEXT NOT NULL,
  PRIMARY KEY (b)
) ENGINE=ndbcluster;

CREATE UNIQUE INDEX ix1 ON t1(b) USING HASH;
</pre><p>
        <code class="literal">t1</code> にテーブル ID 11 が割り当てられている場合、次に示す <code class="literal">fq_name</code> 値が生成されます:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            ベーステーブル: <code class="literal">mydb/def/t1</code>
          </p></li><li class="listitem"><p>
            <code class="literal">BLOB</code> テーブル: <code class="literal">mydb/def/NDB$BLOB_11_2</code>
          </p></li><li class="listitem"><p>
            順序付きインデックス (主キー): <code class="literal">sys/def/11/PRIMARY</code>
          </p></li><li class="listitem"><p>
            一意インデックス: <code class="literal">sys/def/11/ix1$unique</code>
          </p></li></ul></div><p>
        インデックスまたは <code class="literal">BLOB</code> テーブルの場合、<code class="literal">parent_fq_name</code> カラムには対応する実テーブルの <code class="literal">fq_name</code> が含まれます。 実テーブルの場合、このカラムは常に <code class="literal">NULL</code> です。 
      </p><p>
        <code class="literal">type</code> カラムには、このフラグメントに使用されるスキーマオブジェクトタイプが表示され、<code class="literal">System table</code>, <code class="literal">User table</code>, <code class="literal">Unique hash index</code> または <code class="literal">Ordered index</code> のいずれかの値を取ることができます。 <code class="literal">BLOB</code> テーブルは、<code class="literal">User table</code> として表示されます。 
      </p><p>
        <code class="literal">table_id</code> カラムの値はいつでも一意ですが、対応するオブジェクトが削除されている場合は再利用できます。 同じ ID は、<span class="command"><strong>ndb_show_tables</strong></span> ユーティリティを使用して表示できます。 
      </p><p>
        <code class="literal">block_instance</code> カラムには、このフラグメントレプリカが属する LDM インスタンスが表示されます。 これを使用して、<code class="literal">threadblocks</code> テーブルから特定のスレッドに関する情報を取得できます。 このような最初のインスタンスには、常に 0 という番号が付けられます。 
      </p><p>
        通常、2 つのフラグメントレプリカがあり、そのような場合は、同じノードグループの 2 つの異なるデータノードで、各 <code class="literal">fragment_num</code> 値がテーブルに 2 回表示される必要があります。
      </p><p>
        <code class="literal">NDB</code> は順序付けされたインデックスに単一キーアクセスを使用しないため、<code class="literal">tot_key_reads</code>, <code class="literal">tot_key_inserts</code>, <code class="literal">tot_key_updates</code>, <code class="literal">tot_key_writes</code> および <code class="literal">tot_key_deletes</code> の数は順序付けられたインデックス操作によって増分されません。
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
          <code class="literal">tot_key_writes</code> を使用する場合、このコンテキストの書込み操作では、キーが存在する場合は行が更新され、それ以外の場合は新しい行が挿入されることに注意してください。 (これは、<code class="literal">REPLACE</code> SQL ステートメントの <code class="literal">NDB</code> 実装で使用します。) 
        </p></div><p>
        <code class="literal">tot_key_refs</code> カラムには、LDM によって拒否されたキー操作の数が表示されます。 通常、このような拒否は、キー (挿入)、<span class="errortext">「キーが見つかりません」</span>エラー (更新、削除および読取り) が原因であるか、キーに一致する行の述語として使用される解釈済プログラムによって操作が拒否されたことが原因です。 
      </p><p>
        <code class="literal">tot_key_attrinfo_bytes</code> および <code class="literal">tot_key_keyinfo_bytes</code> カラムによってカウントされる <code class="literal">attrinfo</code> および <code class="literal">keyinfo</code> 属性は、LDM による鍵操作の開始に使用される <code class="literal">LQHKEYREQ</code> シグナルの属性です (<a class="ulink" href="https://dev.mysql.com/doc/ndb-internals/en/ndb-internals-ndb-protocol.html" target="_top">The NDB Communication Protocol</a> を参照)。 <code class="literal">attrinfo</code> には、通常、タプルフィールド値 (挿入および更新) または投影仕様 (読取り用) が含まれます。<code class="literal">keyinfo</code> には、このスキーマオブジェクト内で特定のタプルを検索するために必要な主キーまたは一意キーが含まれます。 
      </p><p>
        <code class="literal">tot_frag_scans</code> で表示される値には、全体スキャン (各行を調べる) とサブセットのスキャンの両方が含まれます。 一意インデックスおよび <code class="literal">BLOB</code> テーブルはスキャンされないため、これらのフラグメントレプリカの場合、この値は他のスキャン関連数と同様に 0 になります。 
      </p><p>
        順序付けされたインデックススキャンは境界によって制限される可能性があるため、<code class="literal">tot_scan_rows_examined</code> では、指定されたフラグメントレプリカの行の合計数より少ない数が表示される場合があります。 また、クライアントは、一致する可能性のあるすべての行が調査される前にスキャンを終了することもできます。これは、たとえば、<code class="literal">LIMIT</code> または <code class="literal">EXISTS</code> 句を含む SQL ステートメントを使用する場合に発生します。<code class="literal">tot_scan_rows_returned</code> は、常に <code class="literal">tot_scan_rows_examined</code> 以下です。 
      </p><p>
        <code class="literal">tot_scan_bytes_returned</code> には、プッシュされた結合の場合、NDB カーネルの <code class="literal">DBSPJ</code> ブロックに返される投影が含まれます。
      </p><p>
        <code class="literal">tot_qd_frag_scans</code> は、単一フラグメントレプリカで同時に実行できるスキャンの数を制限する <code class="literal">MaxParallelScansPerFragment</code> データノード構成パラメータの設定によって影響を受ける可能性があります。
      </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-ndbinfo-pgman-time-track-stats"></a>23.5.14.40 ndbinfo pgman_time_track_stats テーブル</h4></div></div></div><a class="indexterm" name="idm45563207902496"></a><p>
        このテーブルは、「NDB Cluster ディスクデータ」テーブルスペースのディスク操作のレイテンシに関する情報を示します。
      </p><p>
        <code class="literal">pgman_time_track_stats</code> テーブルには、次のカラムがあります:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">node_id</code>
          </p><p>
            クラスタ内のこのノードの一意のノード ID
          </p></li><li class="listitem"><p>
            <code class="literal">block_number</code>
          </p><p>
            ブロック番号 (<code class="literal">blocks</code> テーブルから)
          </p></li><li class="listitem"><p>
            <code class="literal">block_instance</code>
          </p><p>
            ブロックインスタンス番号
          </p></li><li class="listitem"><p>
            <code class="literal">upper_bound</code>
          </p><p>
            上限
          </p></li><li class="listitem"><p>
            <code class="literal">page_reads</code>
          </p><p>
            ページ読取りレイテンシ (ミリ秒)
          </p></li><li class="listitem"><p>
            <code class="literal">page_writes</code>
          </p><p>
            ページ書込みレイテンシ (ミリ秒)
          </p></li><li class="listitem"><p>
            <code class="literal">log_waits</code>
          </p><p>
            ログ待機時間 (ミリ秒)
          </p></li><li class="listitem"><p>
            <code class="literal">get_page</code>
          </p><p>
            <code class="literal">get_page()</code> コールのレイテンシ (ミリ秒)
          </p></li></ul></div><h5><a name="idm45563207880736"></a>メモ</h5><p>
        読取りレイテンシ (<code class="literal">page_reads</code> カラム) は、読取りリクエストがファイルシステムスレッドに送信されてから読取りが完了して実行スレッドにレポートされるまでの時間を測定します。 書込みレイテンシ (<code class="literal">page_writes</code>) は、同様の方法で計算されます。 「ディスクデータ」テーブルスペースに対して読取りまたは書込みを行うページのサイズは、常に 32 KB です。 
      </p><p>
        ログ待機待機時間 (<code class="literal">log_waits</code> カラム) は、undo ログがフラッシュされるまでページ書込みが待機する必要がある時間の長さで、各ページ書込みの前に実行する必要があります。
      </p><p>
        NDB 8.0.19 に <code class="literal">pgman_time_track_stats</code> テーブルが追加されました。
      </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-ndbinfo-processes"></a>23.5.14.41 ndbinfo processes テーブル</h4></div></div></div><a class="indexterm" name="idm45563207873296"></a><p>
        このテーブルには NDB Cluster ノードプロセスに関する情報が含まれています。各ノードはテーブル内の行で表されます。 このテーブルには、クラスタに接続されているノードのみが表示されます。 構成されているが、クラスタに接続されていないノードに関する情報は、<code class="literal">nodes</code> テーブルおよび <code class="literal">config_nodes</code> テーブルから取得できます。 
      </p><p>
        <code class="literal">processes</code> テーブルには、次のカラムがあります:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">node_id</code>
          </p><p>
            クラスタ内の一意のノード ID
          </p></li><li class="listitem"><p>
            <code class="literal">node_type</code>
          </p><p>
            ノードのタイプ (管理、データまたは API ノード。テキストを参照)
          </p></li><li class="listitem"><p>
            <code class="literal">node_version</code>
          </p><p>
            このノードで実行されている <code class="literal">NDB</code> ソフトウェアプログラムのバージョン。
          </p></li><li class="listitem"><p>
            <code class="literal">process_id</code>
          </p><p>
            このノードプロセス ID
          </p></li><li class="listitem"><p>
            <code class="literal">angel_process_id</code>
          </p><p>
            このノード angel プロセスのプロセス ID
          </p></li><li class="listitem"><p>
            <code class="literal">process_name</code>
          </p><p>
            実行可能ファイルの名前
          </p></li><li class="listitem"><p>
            <code class="literal">service_URI</code>
          </p><p>
            このノードのサービス URI (テキストを参照)
          </p></li></ul></div><h5><a name="idm45563207851856"></a>メモ</h5><p>
        <code class="literal">node_id</code> は、クラスタ内のこのノードに割り当てられた ID です。
      </p><p>
        <code class="literal">node_type</code> カラムには、次のいずれかの値が表示されます:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">MGM</code>: 管理ノード。
          </p></li><li class="listitem"><p>
            <code class="literal">NDB</code>: データノード。
          </p></li><li class="listitem"><p>
            <code class="literal">API</code>: API または SQL ノード。
          </p></li></ul></div><p>
        NDB Cluster ディストリビューションに同梱されている実行可能ファイルの場合、<code class="literal">node_version</code> は <code class="literal">8.0.23-ndb-8.0.23</code> などのソフトウェアクラスタのバージョン文字列を表示します。
      </p><p>
        <code class="literal">process_id</code> は、Linux では <span class="command"><strong>top</strong></span>、Windows プラットフォームではタスクマネージャなどのプロセス表示アプリケーションを使用して、ホストオペレーティングシステムによって表示されるノード実行可能プロセス ID です。
      </p><p>
        <code class="literal">angel_process_id</code> は、ノードアンジェルプロセスのシステムプロセス ID です。これにより、障害発生時にデータノードまたは SQL が自動的に再起動されます。 管理ノードおよび SQL ノード以外の API ノードの場合、このカラムの値は <code class="literal">NULL</code> です。 
      </p><p>
        <code class="literal">process_name</code> カラムには、実行中の実行可能ファイルの名前が表示されます。 管理ノードの場合、これは <code class="literal">ndb_mgmd</code> です。 データノードの場合、これは <code class="literal">ndbd</code> (シングルスレッド) または <code class="literal">ndbmtd</code> (マルチスレッド) です。 SQL ノードの場合、これは <code class="literal">mysqld</code> です。 その他のタイプの API ノードの場合は、クラスタに接続されている実行可能プログラムの名前です。NDB API アプリケーションは、<code class="literal">Ndb_cluster_connection::set_name()</code> を使用してこのカスタム値を設定できます。 
      </p><p>
        <code class="literal">service_URI</code> には、サービスネットワークアドレスが表示されます。 管理ノードおよびデータノードの場合、使用されるスキームは <code class="literal">ndb://</code>です。 SQL ノードの場合、これは <code class="literal">mysql://</code>です。 デフォルトでは、SQL ノード以外の API ノードはスキームに <code class="literal">ndb://</code>を使用します。NDB API アプリケーションは、<code class="literal">Ndb_cluster_connection::set_service_uri()</code> を使用してこれをカスタム値に設定できます。このスキームのあとには、ノードタイプに関係なく、該当するノードの NDB トランスポータで使用される IP アドレスが続きます。 管理ノードおよび SQL ノードの場合、このアドレスにはポート番号が含まれます (通常、管理ノードの場合は 1186、SQL ノードの場合は 3306)。 SQL ノードが <code class="literal">bind_address</code> システム変数セットで起動された場合、バインドアドレスが <code class="literal">*</code>、<code class="literal">0.0.0.0</code> または<code class="literal">::</code>に設定されていないかぎり、このアドレスがトランスポータアドレスのかわりに使用されます。 
      </p><p>
        様々な構成オプションを反映する SQL ノードの <code class="literal">service_URI</code> 値に、追加のパス情報を含めることができます。 たとえば、<code class="literal">mysql://198.51.100.3/tmp/mysql.sock</code> は SQL ノードが <code class="literal">skip_networking</code> システム変数を有効にして起動されたことを示し、<code class="literal">mysql://198.51.100.3:3306/?server-id=1</code> はこの SQL ノードに対してレプリケーションが有効になっていることを示します。 
      </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-ndbinfo-resources"></a>23.5.14.42 ndbinfo resources テーブル</h4></div></div></div><a class="indexterm" name="idm45563207817200"></a><p>
        このテーブルは、データノードリソースの可用性および使用状況に関する情報を示します。
      </p><p>
        これらのリソースは、<span class="firstterm">スーパープール</span>と呼ばれることがあります。
      </p><p>
        <code class="literal">resources</code> テーブルには、次のカラムがあります:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">node_id</code>
          </p><p>
            このデータノードの一意のノード ID。
          </p></li><li class="listitem"><p>
            <code class="literal">resource_name</code>
          </p><p>
            リソースの名前。テキストを参照してください。
          </p></li><li class="listitem"><p>
            <code class="literal">reserved</code>
          </p><p>
            このリソース用に予約された量。
          </p></li><li class="listitem"><p>
            <code class="literal">used</code>
          </p><p>
            このリソースで実際に使用された量。
          </p></li><li class="listitem"><p>
            <code class="literal">max</code>
          </p><p>
            ノードが最後に起動されてから使用されたこのリソースの最大量。
          </p></li></ul></div><h5><a name="idm45563207801440"></a>メモ</h5><p>
        <code class="literal">resource_name</code> には、次のテーブルに示すいずれかの名前を指定できます:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">RESERVED</code>: システムによって予約されています。上書きできません。
          </p></li><li class="listitem"><p>
            <code class="literal">DISK_OPERATIONS</code>: ログファイルグループが割り当てられている場合は、undo ログバッファのサイズを使用してこのリソースのサイズが設定されます。 このリソースは、undo ログファイルグループに undo ログバッファを割り当てるためにのみ使用されます。そのようなグループは 1 つのみです。 超過割当ては、<code class="literal">CREATE LOGFILE GROUP</code> で必要に応じて発生します。 
          </p></li><li class="listitem"><p>
            <code class="literal">DISK_RECORDS</code>: ディスクデータ操作に割り当てられたレコード。
          </p></li><li class="listitem"><p>
            <code class="literal">DATA_MEMORY</code>: メインメモリータプル、インデックス、およびハッシュインデックスに使用されます。 DataMemory と IndexMemory の合計に、それぞれ 32 KB の 8 ページを加えたもの (IndexMemory が設定されている場合)。 超過割当できません。 
          </p></li><li class="listitem"><p>
            <code class="literal">JOBBUFFER</code>: NDB スケジューラによるジョブバッファーの割り当てに使用されます。過剰に割り当てることはできません。 これは、スレッド当たり約 2 MB と、通信可能なすべてのスレッドの双方向の 1 MB バッファです。 大規模な構成の場合、これは数 GB を消費します。 
          </p></li><li class="listitem"><p>
            <code class="literal">FILE_BUFFERS</code>: <code class="literal">DBLQH</code> カーネルブロックの redo ログハンドラによって使用されます。過剰割当てはできません。 サイズは <code class="literal">NoOfFragmentLogParts</code> * <code class="literal">RedoBuffer</code> にログファイル部分ごとに 1 MB を加えたものです。 
          </p></li><li class="listitem"><p>
            <code class="literal">TRANSPORTER_BUFFERS</code> : <span class="command"><strong>ndbmtd</strong></span> によるバッファの送信に使用され、<code class="literal">TotalSendBufferMemory</code> と <code class="literal">ExtraSendBufferMemory</code> の合計です。 最大 25% 超過割当可能なこのリソース。 <code class="literal">TotalSendBufferMemory</code> は、ノード当たりの送信バッファメモリー (デフォルト値は 2 MB) を合計して計算されます。 したがって、4 つのデータノードと 8 つの API ノードを持つシステムでは、データノードに 12 * 2 MB の送信バッファーメモリーがあります。 <code class="literal">ExtraSendBufferMemory</code> は、<span class="command"><strong>ndbmtd</strong></span> で使用され、スレッド当たり最大 2 MB の追加メモリーを使用します。 したがって、4 つの LDM スレッド、2 つの TC スレッド、1 つのメインスレッド、1 つのレプリケーションスレッド、および 2 つの受信スレッドでは、<code class="literal">ExtraSendBufferMemory</code> は 10 * 2 MB です。 このリソースの超過割り当ては、<code class="literal">SharedGlobalMemory</code> データノード構成パラメータを設定することによって実行できます。 
          </p></li><li class="listitem"><p>
            <code class="literal">DISK_PAGE_BUFFER</code> : ディスクページバッファに使用され、<code class="literal">DiskPageBufferMemory</code> 構成パラメータによって決定されます。 超過割当できません。 
          </p></li><li class="listitem"><p>
            <code class="literal">QUERY_MEMORY</code>: <code class="literal">DBSPJ</code> カーネルブロックによって使用されます。
          </p></li><li class="listitem"><p>
            <code class="literal">SCHEMA_TRANS_MEMORY</code>: 最小値は 2 MB で、残りの使用可能なメモリーを使用するように過剰に割り当てることができます。
          </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-ndbinfo-restart-info"></a>23.5.14.43 ndbinfo restart_info テーブル</h4></div></div></div><a class="indexterm" name="idm45563207764848"></a><p>
        <code class="literal">restart_info</code> テーブルには、ノードの再起動操作に関する情報が含まれます。 テーブルの各エントリは、指定されたノード ID を持つデータノードからのリアルタイムのノード再起動ステータスレポートに対応します。 特定のノードの最新のレポートのみが表示されます。 
      </p><p>
        <code class="literal">restart_info</code> テーブルには、次のカラムがあります:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">node_id</code>
          </p><p>
            クラスタ内のノード ID
          </p></li><li class="listitem"><p>
            <code class="literal">node_restart_status</code>
          </p><p>
            ノードステータス。値についてはテキストを参照してください。 これらはそれぞれ、<code class="literal">node_restart_status_int</code> の可能な値に対応しています。 
          </p></li><li class="listitem"><p>
            <code class="literal">node_restart_status_int</code>
          </p><p>
            ノードステータスコード。値についてはテキストを参照してください。
          </p></li><li class="listitem"><p>
            <code class="literal">secs_to_complete_node_failure</code>
          </p><p>
            ノード障害処理が完了するまでの時間 (秒)
          </p></li><li class="listitem"><p>
            <code class="literal">secs_to_allocate_node_id</code>
          </p><p>
            ノード障害の完了からノード ID の割当てまでの時間 (秒)
          </p></li><li class="listitem"><p>
            <code class="literal">secs_to_include_in_heartbeat_protocol</code>
          </p><p>
            ノード ID の割当てからハートビートプロトコルに含めるまでの時間 (秒)
          </p></li><li class="listitem"><p>
            <code class="literal">secs_until_wait_for_ndbcntr_master</code>
          </p><p>
            ハートビートプロトコルに含まれてから <code class="literal">NDBCNTR</code> マスターが開始されるまでの時間 (秒)
          </p></li><li class="listitem"><p>
            <code class="literal">secs_wait_for_ndbcntr_master</code>
          </p><p>
            <code class="literal">NDBCNTR</code> マスターによる起動の受入れの待機に費やされた時間 (秒)
          </p></li><li class="listitem"><p>
            <code class="literal">secs_to_get_start_permitted</code>
          </p><p>
            マスターからの起動権限の受信から、すべてのノードがこのノードの起動を受け入れられるまでの経過時間 (秒)
          </p></li><li class="listitem"><p>
            <code class="literal">secs_to_wait_for_lcp_for_copy_meta_data</code>
          </p><p>
            メタデータをコピーするまでの LCP 完了の待機時間 (秒)
          </p></li><li class="listitem"><p>
            <code class="literal">secs_to_copy_meta_data</code>
          </p><p>
            マスターから新規起動ノードへのメタデータのコピーに必要な時間 (秒)
          </p></li><li class="listitem"><p>
            <code class="literal">secs_to_include_node</code>
          </p><p>
            GCP を待機し、すべてのノードをプロトコルに含める時間 (秒)
          </p></li><li class="listitem"><p>
            <code class="literal">secs_starting_node_to_request_local_recovery</code>
          </p><p>
            ノードの起動時にローカルリカバリのリクエストの待機に費やされた時間 (秒)
          </p></li><li class="listitem"><p>
            <code class="literal">secs_for_local_recovery</code>
          </p><p>
            ノードによるローカルリカバリの開始に必要な時間 (秒)
          </p></li><li class="listitem"><p>
            <code class="literal">secs_restore_fragments</code>
          </p><p>
            LCP ファイルからフラグメントをリストアするために必要な時間 (秒)
          </p></li><li class="listitem"><p>
            <code class="literal">secs_undo_disk_data</code>
          </p><p>
            レコードのディスクデータ部分で undo ログを実行するために必要な時間 (秒)
          </p></li><li class="listitem"><p>
            <code class="literal">secs_exec_redo_log</code>
          </p><p>
            リストアされたすべてのフラグメントで redo ログを実行するために必要な時間 (秒)
          </p></li><li class="listitem"><p>
            <code class="literal">secs_index_rebuild</code>
          </p><p>
            リストアされたフラグメントでインデックスを再構築するために必要な時間 (秒)
          </p></li><li class="listitem"><p>
            <code class="literal">secs_to_synchronize_starting_node</code>
          </p><p>
            ライブノードからの開始ノードの同期に必要な時間 (秒)
          </p></li><li class="listitem"><p>
            <code class="literal">secs_wait_lcp_for_restart</code>
          </p><p>
            LCP の起動および再起動が完了するまでに必要な時間 (秒)
          </p></li><li class="listitem"><p>
            <code class="literal">secs_wait_subscription_handover</code>
          </p><p>
            レプリケーションサブスクリプションのハンドオーバーの待機に費やされた時間 (秒)
          </p></li><li class="listitem"><p>
            <code class="literal">total_restart_secs</code>
          </p><p>
            ノード障害からノードが再起動されるまでの合計秒数
          </p></li></ul></div><h5><a name="idm45563207710912"></a>メモ</h5><p>
        次のリストには、<code class="literal">node_restart_status_int</code> カラムに定義された値とその内部ステータス名 (カッコ内) および <code class="literal">node_restart_status</code> カラムに表示される対応するメッセージが含まれています:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">0</code> (<code class="literal">ALLOCATED_NODE_ID</code>)
          </p><p>
            <code class="literal">Allocated node id</code>
          </p></li><li class="listitem"><p>
            <code class="literal">1</code> (<code class="literal">INCLUDED_IN_HB_PROTOCOL</code>)
          </p><p>
            <code class="literal">Included in heartbeat protocol</code>
          </p></li><li class="listitem"><p>
            <code class="literal">2</code> (<code class="literal">NDBCNTR_START_WAIT</code>)
          </p><p>
            <code class="literal">Wait for NDBCNTR master to permit us to start</code>
          </p></li><li class="listitem"><p>
            <code class="literal">3</code> (<code class="literal">NDBCNTR_STARTED</code>)
          </p><p>
            <code class="literal">NDBCNTR master permitted us to start</code>
          </p></li><li class="listitem"><p>
            <code class="literal">4</code> (<code class="literal">START_PERMITTED</code>)
          </p><p>
            <code class="literal">All nodes permitted us to start</code>
          </p></li><li class="listitem"><p>
            <code class="literal">5</code> (<code class="literal">WAIT_LCP_TO_COPY_DICT</code>)
          </p><p>
            <code class="literal">Wait for LCP completion to start copying metadata</code>
          </p></li><li class="listitem"><p>
            <code class="literal">6</code> (<code class="literal">COPY_DICT_TO_STARTING_NODE</code>)
          </p><p>
            <code class="literal">Copying metadata to starting node</code>
          </p></li><li class="listitem"><p>
            <code class="literal">7</code> (<code class="literal">INCLUDE_NODE_IN_LCP_AND_GCP</code>)
          </p><p>
            <code class="literal">Include node in LCP and GCP protocols</code>
          </p></li><li class="listitem"><p>
            <code class="literal">8</code> (<code class="literal">LOCAL_RECOVERY_STARTED</code>)
          </p><p>
            <code class="literal">Restore fragments ongoing</code>
          </p></li><li class="listitem"><p>
            <code class="literal">9</code> (<code class="literal">COPY_FRAGMENTS_STARTED</code>)
          </p><p>
            <code class="literal">Synchronizing starting node with live nodes</code>
          </p></li><li class="listitem"><p>
            <code class="literal">10</code> (<code class="literal">WAIT_LCP_FOR_RESTART</code>)
          </p><p>
            <code class="literal">Wait for LCP to ensure durability</code>
          </p></li><li class="listitem"><p>
            <code class="literal">11</code> (<code class="literal">WAIT_SUMA_HANDOVER</code>)
          </p><p>
            <code class="literal">Wait for handover of subscriptions</code>
          </p></li><li class="listitem"><p>
            <code class="literal">12</code> (<code class="literal">RESTART_COMPLETED</code>)
          </p><p>
            <code class="literal">Restart completed</code>
          </p></li><li class="listitem"><p>
            <code class="literal">13</code> (<code class="literal">NODE_FAILED</code>)
          </p><p>
            <code class="literal">Node failed, failure handling in progress</code>
          </p></li><li class="listitem"><p>
            <code class="literal">14</code> (<code class="literal">NODE_FAILURE_COMPLETED</code>)
          </p><p>
            <code class="literal">Node failure handling completed</code>
          </p></li><li class="listitem"><p>
            <code class="literal">15</code> (<code class="literal">NODE_GETTING_PERMIT</code>)
          </p><p>
            <code class="literal">All nodes permitted us to start</code>
          </p></li><li class="listitem"><p>
            <code class="literal">16</code> (<code class="literal">NODE_GETTING_INCLUDED</code>)
          </p><p>
            <code class="literal">Include node in LCP and GCP protocols</code>
          </p></li><li class="listitem"><p>
            <code class="literal">17</code> (<code class="literal">NODE_GETTING_SYNCHED</code>)
          </p><p>
            <code class="literal">Synchronizing starting node with live nodes</code>
          </p></li><li class="listitem"><p>
            <code class="literal">18</code> (<code class="literal">NODE_GETTING_LCP_WAITED</code>)
          </p><p>
            [none]
          </p></li><li class="listitem"><p>
            <code class="literal">19</code> (<code class="literal">NODE_ACTIVE</code>)
          </p><p>
            <code class="literal">Restart completed</code>
          </p></li><li class="listitem"><p>
            <code class="literal">20</code> (<code class="literal">NOT_DEFINED_IN_CLUSTER</code>)
          </p><p>
            [none]
          </p></li><li class="listitem"><p>
            <code class="literal">21</code> (<code class="literal">NODE_NOT_RESTARTED_YET</code>)
          </p><p>
            <code class="literal">Initial state</code>
          </p></li></ul></div><p>
        ステータス番号 0 から 12 はマスターノードにのみ適用されます。テーブルに示されている残りの番号は、再起動するすべてのデータノードに適用されます。 ステータス番号 13 および 14 は、ノード障害状態を定義します。20 および 21 は、特定のノードの再起動に関する情報がない場合に発生します。 
      </p><p>
        <a class="xref" href="mysql-cluster.html#mysql-cluster-start-phases" title="23.5.4 NDB Cluster 起動フェーズのサマリー">セクション23.5.4「NDB Cluster 起動フェーズのサマリー」</a>も参照してください。
      </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-ndbinfo-server-locks"></a>23.5.14.44 ndbinfo server_locks テーブル</h4></div></div></div><a class="indexterm" name="idm45563207633184"></a><p>
        <code class="literal">server_locks</code> テーブルの構造は <code class="literal">cluster_locks</code> テーブルと似ており、後者のテーブルにある情報のサブセットを提供しますが、これはそれが存在する SQL ノード (MySQL サーバー) に固有のものです。 (<code class="literal">cluster_locks</code> テーブルには、クラスタ内のすべてのロックに関する情報が表示されます。) より正確には、<code class="literal">server_locks</code> には、現在の <span class="command"><strong>mysqld</strong></span> インスタンスに属するスレッドによってリクエストされたロックに関する情報が含まれ、<code class="literal">server_operations</code> へのコンパニオンテーブルとして機能します。 これは、ロックパターンを特定の MySQL ユーザーセッション、クエリーまたはユースケースと相関させる場合に役立ちます。 
      </p><p>
        <code class="literal">server_locks</code> テーブルには、次のカラムがあります:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">mysql_connection_id</code>
          </p><p>
            MySQL 接続 ID
          </p></li><li class="listitem"><p>
            <code class="literal">node_id</code>
          </p><p>
            レポートノードの ID
          </p></li><li class="listitem"><p>
            <code class="literal">block_instance</code>
          </p><p>
            レポート LDM インスタンスの ID
          </p></li><li class="listitem"><p>
            <code class="literal">tableid</code>
          </p><p>
            この行を含むテーブルの ID
          </p></li><li class="listitem"><p>
            <code class="literal">fragmentid</code>
          </p><p>
            ロックされた行を含むフラグメントの ID
          </p></li><li class="listitem"><p>
            <code class="literal">rowid</code>
          </p><p>
            ロックされた行の ID
          </p></li><li class="listitem"><p>
            <code class="literal">transid</code>
          </p><p>
            トランザクション ID
          </p></li><li class="listitem"><p>
            <code class="literal">mode</code>
          </p><p>
            ロックリクエストモード
          </p></li><li class="listitem"><p>
            <code class="literal">state</code>
          </p><p>
            ロック状態
          </p></li><li class="listitem"><p>
            <code class="literal">detail</code>
          </p><p>
            これが行ロックキューで最初にロックを保持しているかどうか
          </p></li><li class="listitem"><p>
            <code class="literal">op</code>
          </p><p>
            操作タイプ
          </p></li><li class="listitem"><p>
            <code class="literal">duration_millis</code>
          </p><p>
            ロックの待機または保持にかかったミリ秒
          </p></li><li class="listitem"><p>
            <code class="literal">lock_num</code>
          </p><p>
            ロックオブジェクトの ID
          </p></li><li class="listitem"><p>
            <code class="literal">waiting_for</code>
          </p><p>
            この ID のロックを待機中
          </p></li></ul></div><h5><a name="idm45563207595680"></a>メモ</h5><p>
        <code class="literal">mysql_connection_id</code> カラムには、<code class="literal">SHOW PROCESSLIST</code> に示されている MySQL 接続またはスレッド ID が表示されます。
      </p><p>
        <code class="literal">block_instance</code> は、カーネルブロックのインスタンスを指します。 この番号は、ブロック名とともに使用して、<code class="literal">threadblocks</code> テーブル内の特定のインスタンスを検索できます。 
      </p><p>
        <code class="literal">tableid</code> は、<code class="literal">NDB</code> によってテーブルに割り当てられます。<span class="command"><strong>ndb_show_tables</strong></span> の出力と同様に、他の <code class="literal">ndbinfo</code> テーブルのこのテーブルにも同じ ID が使用されます。
      </p><p>
        <code class="literal">transid</code> カラムに表示されるトランザクション ID は、NDB API によって生成された、現在のロックを要求または保持しているトランザクションの識別子です。
      </p><p>
        <code class="literal">mode</code> カラムには、常に <code class="literal">S</code> (共有ロック) または <code class="literal">X</code> (排他ロック) のいずれかのロックモードが表示されます。 トランザクションが特定の行に対して排他ロックを持っている場合、その行に対する他のすべてのロックは同じトランザクション ID を持ちます。 
      </p><p>
        <code class="literal">state</code> カラムにはロック状態が表示されます。 その値は、常に <code class="literal">H</code> (保持) または <code class="literal">W</code> (待機) のいずれかです。 待機中のロックリクエストは、別のトランザクションによって保持されているロックを待機します。 
      </p><p>
        <code class="literal">detail</code> カラムは、このロックが、影響を受ける行ロックキューで最初に保持しているロックかどうかを示します。この場合、このカラムには <code class="literal">*</code> (アスタリスク文字) が含まれます。それ以外の場合、このカラムは空です。 この情報は、ロックリクエストのリスト内の一意のエントリを識別するのに役立ちます。 
      </p><p>
        <code class="literal">op</code> カラムには、ロックをリクエストしている操作のタイプが表示されます。 これは常に、<code class="literal">READ</code>, <code class="literal">INSERT</code>, <code class="literal">UPDATE</code>, <code class="literal">DELETE</code>, <code class="literal">SCAN</code> または <code class="literal">REFRESH</code> のいずれかの値です。 
      </p><p>
        <code class="literal">duration_millis</code> カラムには、このロックリクエストがロックを待機または保持しているミリ秒数が表示されます。 待機中のリクエストに対してロックが付与されると、これは 0 にリセットされます。 
      </p><p>
        ロック ID (<code class="literal">lockid</code> カラム) は、このノードおよびブロックインスタンスに対して一意です。
      </p><p>
        <code class="literal">lock_state</code> カラムの値が <code class="literal">W</code> の場合、このロックは付与を待機しており、<code class="literal">waiting_for</code> カラムには、このリクエストが待機しているロックオブジェクトのロック ID が表示されます。 それ以外の場合、<code class="literal">waiting_for</code> は空です。<code class="literal">waiting_for</code> は、(<code class="literal">node_id</code>, <code class="literal">block_instance</code>, <code class="literal">tableid</code>, <code class="literal">fragmentid</code> および <code class="literal">rowid</code> で識別される) 同じ行のロックのみを参照できます。 
      </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-ndbinfo-server-operations"></a>23.5.14.45 ndbinfo server_operations テーブル</h4></div></div></div><a class="indexterm" name="idm45563207557952"></a><p>
        <code class="literal">server_operations</code> テーブルは、現在の SQL ノード (MySQL サーバー) が現在関与している進行中のすべての <code class="literal">NDB</code> 操作を表すエントリを格納します。 それは事実上、その他の SQL ノードおよび API ノードに対する操作が表示されない <code class="literal">cluster_operations</code> テーブルのサブセットです。 
      </p><p>
        <code class="literal">server_operations</code> テーブルには、次のカラムがあります:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">mysql_connection_id</code>
          </p><p>
            MySQL Server 接続 ID
          </p></li><li class="listitem"><p>
            <code class="literal">node_id</code>
          </p><p>
            ノード ID
          </p></li><li class="listitem"><p>
            <code class="literal">block_instance</code>
          </p><p>
            ブロックインスタンス
          </p></li><li class="listitem"><p>
            <code class="literal">transid</code>
          </p><p>
            トランザクション ID
          </p></li><li class="listitem"><p>
            <code class="literal">operation_type</code>
          </p><p>
            操作のタイプ (可能性のある値についてはテキストを参照)
          </p></li><li class="listitem"><p>
            <code class="literal">state</code>
          </p><p>
            操作の状態 (可能性のある値についてはテキストを参照)
          </p></li><li class="listitem"><p>
            <code class="literal">tableid</code>
          </p><p>
            テーブル ID
          </p></li><li class="listitem"><p>
            <code class="literal">fragmentid</code>
          </p><p>
            フラグメント ID
          </p></li><li class="listitem"><p>
            <code class="literal">client_node_id</code>
          </p><p>
            クライアントノード ID
          </p></li><li class="listitem"><p>
            <code class="literal">client_block_ref</code>
          </p><p>
            クライアントのブロック参照
          </p></li><li class="listitem"><p>
            <code class="literal">tc_node_id</code>
          </p><p>
            トランザクションコーディネータノード ID
          </p></li><li class="listitem"><p>
            <code class="literal">tc_block_no</code>
          </p><p>
            トランザクションコーディネータブロック番号
          </p></li><li class="listitem"><p>
            <code class="literal">tc_block_instance</code>
          </p><p>
            トランザクションコーディネータブロックインスタンス
          </p></li></ul></div><h5><a name="idm45563207524688"></a>メモ</h5><p>
        <code class="literal">mysql_connection_id</code> は、<code class="literal">SHOW PROCESSLIST</code> の出力に示された接続またはセッション ID と同じです。 それは <code class="literal">INFORMATION_SCHEMA</code> のテーブル <code class="literal">NDB_TRANSID_MYSQL_CONNECTION_MAP</code> から取得されます。 
      </p><p>
        <code class="literal">block_instance</code> は、カーネルブロックのインスタンスを指します。 この番号は、ブロック名とともに使用して、<code class="literal">threadblocks</code> テーブル内の特定のインスタンスを検索できます。 
      </p><p>
        トランザクション ID (<code class="literal">transid</code>) は一意の 64 ビット番号で、NDB API <code class="literal">getTransactionId()</code> メソッドを使用して取得できます。 (現在、MySQL サーバーは進行中のトランザクションの NDB API トランザクション ID を公開しません。) 
      </p><p>
        <code class="literal">operation_type</code> カラムは、<code class="literal">READ</code>、<code class="literal">READ-SH</code>、<code class="literal">READ-EX</code>、<code class="literal">INSERT</code>、<code class="literal">UPDATE</code>、<code class="literal">DELETE</code>、<code class="literal">WRITE</code>、<code class="literal">UNLOCK</code>、<code class="literal">REFRESH</code>、<code class="literal">SCAN</code>、<code class="literal">SCAN-SH</code>、<code class="literal">SCAN-EX</code>、または <code class="literal">&lt;unknown&gt;</code> のいずれかの値を取ることができます。
      </p><p>
        <code class="literal">state</code> カラムは、<code class="literal">ABORT_QUEUED</code>、<code class="literal">ABORT_STOPPED</code>、<code class="literal">COMMITTED</code>、<code class="literal">COMMIT_QUEUED</code>、<code class="literal">COMMIT_STOPPED</code>、<code class="literal">COPY_CLOSE_STOPPED</code>、<code class="literal">COPY_FIRST_STOPPED</code>、<code class="literal">COPY_STOPPED</code>、<code class="literal">COPY_TUPKEY</code>、<code class="literal">IDLE</code>、<code class="literal">LOG_ABORT_QUEUED</code>、<code class="literal">LOG_COMMIT_QUEUED</code>、<code class="literal">LOG_COMMIT_QUEUED_WAIT_SIGNAL</code>、<code class="literal">LOG_COMMIT_WRITTEN</code>、<code class="literal">LOG_COMMIT_WRITTEN_WAIT_SIGNAL</code>、<code class="literal">LOG_QUEUED</code>、<code class="literal">PREPARED</code>、<code class="literal">PREPARED_RECEIVED_COMMIT</code>、<code class="literal">SCAN_CHECK_STOPPED</code>、<code class="literal">SCAN_CLOSE_STOPPED</code>、<code class="literal">SCAN_FIRST_STOPPED</code>、<code class="literal">SCAN_RELEASE_STOPPED</code>、<code class="literal">SCAN_STATE_USED</code>、<code class="literal">SCAN_STOPPED</code>、<code class="literal">SCAN_TUPKEY</code>、<code class="literal">STOPPED</code>、<code class="literal">TC_NOT_CONNECTED</code>、<code class="literal">WAIT_ACC</code>、<code class="literal">WAIT_ACC_ABORT</code>、<code class="literal">WAIT_AI_AFTER_ABORT</code>、<code class="literal">WAIT_ATTR</code>、<code class="literal">WAIT_SCAN_AI</code>、<code class="literal">WAIT_TUP</code>、<code class="literal">WAIT_TUPKEYINFO</code>、<code class="literal">WAIT_TUP_COMMIT</code>、または <code class="literal">WAIT_TUP_TO_ABORT</code> のいずれかの値を取ることができます。 (<code class="literal">ndbinfo_show_hidden</code> を有効にして MySQL サーバーが実行されている場合は、通常は非表示になっている <code class="literal">ndb$dblqh_tcconnect_state</code> テーブルから選択することで、この状態のリストを表示できます。) 
      </p><p>
        <span class="command"><strong>ndb_show_tables</strong></span> の出力をチェックして、テーブル ID から <code class="literal">NDB</code> テーブルの名前を取得できます。
      </p><p>
        <code class="literal">fragid</code> は、<span class="command"><strong>ndb_desc</strong></span> <code class="option">--extra-partition-info</code> (短縮形式 <code class="option">-p</code>) の出力で見られるパーティション番号と同じです。
      </p><p>
        <code class="literal">client_node_id</code> および <code class="literal">client_block_ref</code> では、<code class="literal">client</code> は NDB Cluster API または SQL ノード (つまり、NDB API クライアントまたはクラスタに接続された MySQL Server) を指します。
      </p><p>
        <code class="literal">block_instance</code> および <code class="literal">tc_block_instance</code> カラムは NDB カーネルブロックのインスタンス番号を提供します。 これらを使用して、<code class="literal">threadblocks</code> テーブルから特定のスレッドに関する情報を取得できます。 
      </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-ndbinfo-server-transactions"></a>23.5.14.46 ndbinfo server_transactions テーブル</h4></div></div></div><a class="indexterm" name="idm45563207462624"></a><p>
        <code class="literal">server_transactions</code> テーブルは、<code class="literal">cluster_transactions</code> テーブルのサブセットですが、このテーブルに関連する接続 ID が含まれている場合は、現在の SQL ノード (MySQL サーバー) が参加しているトランザクションのみが含まれます。
      </p><p>
        <code class="literal">server_transactions</code> テーブルには、次のカラムがあります:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">mysql_connection_id</code>
          </p><p>
            MySQL Server 接続 ID
          </p></li><li class="listitem"><p>
            <code class="literal">node_id</code>
          </p><p>
            トランザクションコーディネータノード ID
          </p></li><li class="listitem"><p>
            <code class="literal">block_instance</code>
          </p><p>
            トランザクションコーディネータブロックインスタンス
          </p></li><li class="listitem"><p>
            <code class="literal">transid</code>
          </p><p>
            トランザクション ID
          </p></li><li class="listitem"><p>
            <code class="literal">state</code>
          </p><p>
            操作の状態 (可能性のある値についてはテキストを参照)
          </p></li><li class="listitem"><p>
            <code class="literal">count_operations</code>
          </p><p>
            トランザクションでのステートフル操作の数
          </p></li><li class="listitem"><p>
            <code class="literal">outstanding_operations</code>
          </p><p>
            ローカルデータ管理レイヤー (LQH ブロック) でまだ実行されている操作
          </p></li><li class="listitem"><p>
            <code class="literal">inactive_seconds</code>
          </p><p>
            API の待機に要した時間
          </p></li><li class="listitem"><p>
            <code class="literal">client_node_id</code>
          </p><p>
            クライアントノード ID
          </p></li><li class="listitem"><p>
            <code class="literal">client_block_ref</code>
          </p><p>
            クライアントのブロック参照
          </p></li></ul></div><h5><a name="idm45563207436208"></a>メモ</h5><p>
        <code class="literal">mysql_connection_id</code> は、<code class="literal">SHOW PROCESSLIST</code> の出力に示された接続またはセッション ID と同じです。 それは <code class="literal">INFORMATION_SCHEMA</code> のテーブル <code class="literal">NDB_TRANSID_MYSQL_CONNECTION_MAP</code> から取得されます。 
      </p><p>
        <code class="literal">block_instance</code> は、カーネルブロックのインスタンスを指します。 この番号は、ブロック名とともに使用して、<code class="literal">threadblocks</code> テーブル内の特定のインスタンスを検索できます。 
      </p><p>
        トランザクション ID (<code class="literal">transid</code>) は一意の 64 ビット番号で、NDB API <code class="literal">getTransactionId()</code> メソッドを使用して取得できます。 (現在、MySQL サーバーは進行中のトランザクションの NDB API トランザクション ID を公開しません。) 
      </p><p>
        <code class="literal">state</code> カラムは、<code class="literal">CS_ABORTING</code>、<code class="literal">CS_COMMITTING</code>、<code class="literal">CS_COMMIT_SENT</code>、<code class="literal">CS_COMPLETE_SENT</code>、<code class="literal">CS_COMPLETING</code>、<code class="literal">CS_CONNECTED</code>、<code class="literal">CS_DISCONNECTED</code>、<code class="literal">CS_FAIL_ABORTED</code>、<code class="literal">CS_FAIL_ABORTING</code>、<code class="literal">CS_FAIL_COMMITTED</code>、<code class="literal">CS_FAIL_COMMITTING</code>、<code class="literal">CS_FAIL_COMPLETED</code>、<code class="literal">CS_FAIL_PREPARED</code>、<code class="literal">CS_PREPARE_TO_COMMIT</code>、<code class="literal">CS_RECEIVING</code>、<code class="literal">CS_REC_COMMITTING</code>、<code class="literal">CS_RESTART</code>、<code class="literal">CS_SEND_FIRE_TRIG_REQ</code>、<code class="literal">CS_STARTED</code>、<code class="literal">CS_START_COMMITTING</code>、<code class="literal">CS_START_SCAN</code>、<code class="literal">CS_WAIT_ABORT_CONF</code>、<code class="literal">CS_WAIT_COMMIT_CONF</code>、<code class="literal">CS_WAIT_COMPLETE_CONF</code>、<code class="literal">CS_WAIT_FIRE_TRIG_REQ</code> のいずれかの値を持つ可能性があります。 (<code class="literal">ndbinfo_show_hidden</code> を有効にして MySQL サーバーが実行されている場合は、通常は非表示になっている <code class="literal">ndb$dbtc_apiconnect_state</code> テーブルから選択することで、この状態のリストを表示できます。) 
      </p><p>
        <code class="literal">client_node_id</code> および <code class="literal">client_block_ref</code> では、<code class="literal">client</code> は NDB Cluster API または SQL ノード (つまり、NDB API クライアントまたはクラスタに接続された MySQL Server) を指します。
      </p><p>
        <code class="literal">block_instance</code> カラムには、<code class="literal">DBTC</code> カーネルブロックインスタンス番号が表示されます。 これを使用して、<code class="literal">threadblocks</code> テーブルから特定のスレッドに関する情報を取得できます。 
      </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-ndbinfo-table-distribution-status"></a>23.5.14.47 ndbinfo table_distribution_status テーブル</h4></div></div></div><a class="indexterm" name="idm45563207397472"></a><p>
        <code class="literal">table_distribution_status</code> テーブルには、<code class="literal">NDB</code> テーブルのテーブル分散の進行状況に関する情報が表示されます。
      </p><p>
        <code class="literal">table_distribution_status</code> テーブルには、次のカラムがあります:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">node_id</code>
          </p><p>
            ノード ID
          </p></li><li class="listitem"><p>
            <code class="literal">table_id</code>
          </p><p>
            テーブル ID
          </p></li><li class="listitem"><p>
            <code class="literal">tab_copy_status</code>
          </p><p>
            ディスクへのテーブル配布データのコピーのステータス (<code class="literal">IDLE</code>, <code class="literal">SR_PHASE1_READ_PAGES</code>, <code class="literal">SR_PHASE2_READ_TABLE</code>, <code class="literal">SR_PHASE3_COPY_TABLE</code>, <code class="literal">REMOVE_NODE</code>, <code class="literal">LCP_READ_TABLE</code>, <code class="literal">COPY_TAB_REQ</code>, <code class="literal">COPY_NODE_STATE</code>, <code class="literal">ADD_TABLE_COORDINATOR</code> (<span class="emphasis"><em>NDB 8.0.23 より前</em></span>) のいずれか): <code class="literal">ADD_TABLE_MASTER</code> ), <code class="literal">ADD_TABLE_PARTICIPANT</code> ( <span class="emphasis"><em>NDB 8.0.23 より前</em></span>: <code class="literal">ADD_TABLE_SLAVE</code>、<code class="literal">INVALIDATE_NODE_LCP</code>, <code class="literal">ALTER_TABLE</code>, <code class="literal">COPY_TO_SAVE</code> または <code class="literal">GET_TABINFO</code>
          </p></li><li class="listitem"><p>
            <code class="literal">tab_update_status</code>
          </p><p>
            テーブル分散データの更新のステータス (<code class="literal">IDLE</code>, <code class="literal">LOCAL_CHECKPOINT</code>, <code class="literal">LOCAL_CHECKPOINT_QUEUED</code>, <code class="literal">REMOVE_NODE</code>, <code class="literal">COPY_TAB_REQ</code>, <code class="literal">ADD_TABLE_MASTER</code>, <code class="literal">ADD_TABLE_SLAVE</code>, <code class="literal">INVALIDATE_NODE_LCP</code> または <code class="literal">CALLBACK</code> のいずれか)
          </p></li><li class="listitem"><p>
            <code class="literal">tab_lcp_status</code>
          </p><p>
            テーブル LCP のステータス。<code class="literal">ACTIVE</code> (ローカルチェックポイントの実行を待機中)、<code class="literal">WRITING_TO_FILE</code> (チェックポイントは実行されましたが、まだディスクに書き込まれていません) または <code class="literal">COMPLETED</code> (チェックポイントは実行され、ディスクに永続化されます) のいずれか
          </p></li><li class="listitem"><p>
            <code class="literal">tab_status</code>
          </p><p>
            テーブルの内部ステータス。<code class="literal">ACTIVE</code> (テーブルが存在)、<code class="literal">CREATING</code> (テーブルを作成中) または <code class="literal">DROPPING</code> (テーブルを削除中) のいずれかです
          </p></li><li class="listitem"><p>
            <code class="literal">tab_storage</code>
          </p><p>
            テーブルのリカバリ可能性。<code class="literal">NORMAL</code> (redo ロギングおよびチェックポイントを使用して完全にリカバリ可能)、<code class="literal">NOLOGGING</code> (ノードクラッシュからリカバリ可能、次の空のクラスタクラッシュから空)、または <code class="literal">TEMPORARY</code> (リカバリ不可) のいずれか
          </p></li><li class="listitem"><p>
            <code class="literal">tab_partitions</code>
          </p><p>
            テーブル内のパーティション数
          </p></li><li class="listitem"><p>
            <code class="literal">tab_fragments</code>
          </p><p>
            <code class="literal">tab_partitions * [number of node groups]</code>と等しい完全にレプリケートされたテーブルの場合、テーブル内のフラグメントの数 (通常は <code class="literal">tab_partitions</code> と同じ)
          </p></li><li class="listitem"><p>
            <code class="literal">current_scan_count</code>
          </p><p>
            アクティブなスキャンの現在の数
          </p></li><li class="listitem"><p>
            <code class="literal">scan_count_wait</code>
          </p><p>
            <code class="literal">ALTER TABLE</code> が完了するまでに実行を待機しているスキャンの現在の数。
          </p></li><li class="listitem"><p>
            <code class="literal">is_reorg_ongoing</code>
          </p><p>
            テーブルが現在再編成されているかどうか (true の場合は 1)
          </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-ndbinfo-table-fragments"></a>23.5.14.48 ndbinfo table_fragments テーブル</h4></div></div></div><a class="indexterm" name="idm45563207338608"></a><p>
        <code class="literal">table_fragments</code> テーブルは、<code class="literal">NDB</code> テーブルの断片化、パーティション化、分散および (内部) レプリケーションに関する情報を提供します。
      </p><p>
        <code class="literal">table_fragments</code> テーブルには、次のカラムがあります:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">node_id</code>
          </p><p>
            ノード ID (<code class="literal">DIH</code> マスター)
          </p></li><li class="listitem"><p>
            <code class="literal">table_id</code>
          </p><p>
            テーブル ID
          </p></li><li class="listitem"><p>
            <code class="literal">partition_id</code>
          </p><p>
            パーティション ID
          </p></li><li class="listitem"><p>
            <code class="literal">fragment_id</code>
          </p><p>
            フラグメント ID (テーブルが完全にレプリケートされないかぎり、パーティション ID と同じ)
          </p></li><li class="listitem"><p>
            <code class="literal">partition_order</code>
          </p><p>
            パーティション内のフラグメントの順序
          </p></li><li class="listitem"><p>
            <code class="literal">log_part_id</code>
          </p><p>
            フラグメントのログ部分 ID
          </p></li><li class="listitem"><p>
            <code class="literal">no_of_replicas</code>
          </p><p>
            フラグメントレプリカの数
          </p></li><li class="listitem"><p>
            <code class="literal">current_primary</code>
          </p><p>
            現在のプライマリノード ID
          </p></li><li class="listitem"><p>
            <code class="literal">preferred_primary</code>
          </p><p>
            優先プライマリノード ID
          </p></li><li class="listitem"><p>
            <code class="literal">current_first_backup</code>
          </p><p>
            現在の最初のバックアップノード ID
          </p></li><li class="listitem"><p>
            <code class="literal">current_second_backup</code>
          </p><p>
            現在の 2 番目のバックアップノード ID
          </p></li><li class="listitem"><p>
            <code class="literal">current_third_backup</code>
          </p><p>
            現在の 3 番目のバックアップノード ID
          </p></li><li class="listitem"><p>
            <code class="literal">num_alive_replicas</code>
          </p><p>
            ライブフラグメントレプリカの現在の数
          </p></li><li class="listitem"><p>
            <code class="literal">num_dead_replicas</code>
          </p><p>
            デッドフラグメントレプリカの現在の数
          </p></li><li class="listitem"><p>
            <code class="literal">num_lcp_replicas</code>
          </p><p>
            チェックポイントを実行するフラグメントレプリカの数
          </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-ndbinfo-table-info"></a>23.5.14.49 ndbinfo table_info テーブル</h4></div></div></div><a class="indexterm" name="idm45563207300736"></a><p>
        <code class="literal">table_info</code> テーブルには、個々の <code class="literal">NDB</code> テーブルに対して有効なロギング、チェックポイント、分散および記憶域オプションに関する情報が表示されます。
      </p><p>
        <code class="literal">table_info</code> テーブルには、次のカラムがあります:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">table_id</code>
          </p><p>
            テーブル ID
          </p></li><li class="listitem"><p>
            <code class="literal">logged_table</code>
          </p><p>
            テーブルがログに記録されるか (1) または否か (0)
          </p></li><li class="listitem"><p>
            <code class="literal">row_contains_gci</code>
          </p><p>
            テーブルの行に GCI が含まれているかどうか (1 true、0 false)
          </p></li><li class="listitem"><p>
            <code class="literal">row_contains_checksum</code>
          </p><p>
            テーブルの行にチェックサムが含まれるかどうか (1 true、0 false)
          </p></li><li class="listitem"><p>
            <code class="literal">read_backup</code>
          </p><p>
            バックアップフラグメントの複製が読み取られた場合は 1、それ以外の場合は 0
          </p></li><li class="listitem"><p>
            <code class="literal">fully_replicated</code>
          </p><p>
            テーブルが完全にレプリケートされている場合は 1、それ以外の場合は 0
          </p></li><li class="listitem"><p>
            <code class="literal">storage_type</code>
          </p><p>
            テーブル記憶域タイプ (<code class="literal">MEMORY</code> または <code class="literal">DISK</code> のいずれか)
          </p></li><li class="listitem"><p>
            <code class="literal">hashmap_id</code>
          </p><p>
            ハッシュマップ ID
          </p></li><li class="listitem"><p>
            <code class="literal">partition_balance</code>
          </p><p>
            テーブルに使用されるパーティションバランス (フラグメント数タイプ)。<code class="literal">FOR_RP_BY_NODE</code>, <code class="literal">FOR_RA_BY_NODE</code>, <code class="literal">FOR_RP_BY_LDM</code> または <code class="literal">FOR_RA_BY_LDM</code> のいずれか
          </p></li><li class="listitem"><p>
            <code class="literal">create_gci</code>
          </p><p>
            テーブルが作成された GCI
          </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-ndbinfo-table-replicas"></a>23.5.14.50 ndbinfo table_replicas テーブル</h4></div></div></div><a class="indexterm" name="idm45563207269264"></a><p>
        <code class="literal">table_replicas</code> テーブルは、<code class="literal">NDB</code> テーブルフラグメントおよびフラグメントレプリカのコピー、配布およびチェックポイントに関する情報を提供します。
      </p><p>
        <code class="literal">table_replicas</code> テーブルには、次のカラムがあります:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">node_id</code>
          </p><p>
            データのフェッチ元ノードの ID (<code class="literal">DIH</code> マスター)
          </p></li><li class="listitem"><p>
            <code class="literal">table_id</code>
          </p><p>
            テーブル ID
          </p></li><li class="listitem"><p>
            <code class="literal">fragment_id</code>
          </p><p>
            フラグメント ID
          </p></li><li class="listitem"><p>
            <code class="literal">initial_gci</code>
          </p><p>
            テーブルの初期 GCI
          </p></li><li class="listitem"><p>
            <code class="literal">replica_node_id</code>
          </p><p>
            フラグメントレプリカが格納されるノードの ID
          </p></li><li class="listitem"><p>
            <code class="literal">is_lcp_ongoing</code>
          </p><p>
            LCP がこのフラグメントで進行中の場合は 1、それ以外の場合は 0
          </p></li><li class="listitem"><p>
            <code class="literal">num_crashed_replicas</code>
          </p><p>
            クラッシュしたフラグメントレプリカインスタンスの数
          </p></li><li class="listitem"><p>
            <code class="literal">last_max_gci_started</code>
          </p><p>
            最新 LCP で最も高い GCI が開始されました
          </p></li><li class="listitem"><p>
            <code class="literal">last_max_gci_completed</code>
          </p><p>
            最新の LCP で完了した最高 GCI
          </p></li><li class="listitem"><p>
            <code class="literal">last_lcp_id</code>
          </p><p>
            最新 LCP の ID
          </p></li><li class="listitem"><p>
            <code class="literal">prev_lcp_id</code>
          </p><p>
            前の LCP の ID
          </p></li><li class="listitem"><p>
            <code class="literal">prev_max_gci_started</code>
          </p><p>
            前の LCP で開始された最高 GCI
          </p></li><li class="listitem"><p>
            <code class="literal">prev_max_gci_completed</code>
          </p><p>
            前の LCP で完了した最高 GCI
          </p></li><li class="listitem"><p>
            <code class="literal">last_create_gci</code>
          </p><p>
            最後にクラッシュしたフラグメントレプリカインスタンスの GCI の最終作成
          </p></li><li class="listitem"><p>
            <code class="literal">last_replica_gci</code>
          </p><p>
            最後にクラッシュしたフラグメントレプリカインスタンスの最後の GCI
          </p></li><li class="listitem"><p>
            <code class="literal">is_replica_alive</code>
          </p><p>
            このフラグメントレプリカが有効な場合は 1、そうでない場合は 0
          </p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-ndbinfo-tc-time-track-stats"></a>23.5.14.51 ndbinfo tc_time_track_stats テーブル</h4></div></div></div><a class="indexterm" name="idm45563207229280"></a><p>
        <code class="literal">tc_time_track_stats</code> テーブルは、API ノードが <code class="literal">NDB</code> にアクセスすることで、データノード内の <code class="literal">DBTC</code> ブロック (TC) インスタンスから取得されたタイムトラッキング情報を提供します。 各 TC インスタンスは、API ノードまたは他のデータノードのかわりに実行される一連のアクティビティのレイテンシを追跡します。これらのアクティビティには、トランザクション、トランザクションエラー、キー読取り、キー書込み、一意インデックス操作、任意のタイプの失敗したキー操作、スキャン、失敗したスキャン、フラグメントスキャンおよび失敗したフラグメントスキャンが含まれます。 
      </p><p>
        カウンタのセットはアクティビティごとに保持され、各カウンタは上限以下の待機時間の範囲をカバーします。 各アクティビティの終了時に、その待機時間が決定され、適切なカウンタが増分されます。<code class="literal">tc_time_track_stats</code> では、この情報が行として表示され、次の各インスタンスの行が表示されます: 
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            ID を使用したデータノード
          </p></li><li class="listitem"><p>
            TC ブロックインスタンス
          </p></li><li class="listitem"><p>
            ID を使用したその他の通信データノードまたは API ノード
          </p></li><li class="listitem"><p>
            上限値
          </p></li></ul></div><p>
        各行には、アクティビティタイプごとの値が含まれます。 これは、行で指定された範囲内 (つまり、待機時間が上限を超えない範囲) でこのアクティビティが発生した回数です。 
      </p><p>
        <code class="literal">tc_time_track_stats</code> テーブルには、次のカラムがあります:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">node_id</code>
          </p><p>
            要求ノード ID
          </p></li><li class="listitem"><p>
            <code class="literal">block_number</code>
          </p><p>
            TC ブロック番号
          </p></li><li class="listitem"><p>
            <code class="literal">block_instance</code>
          </p><p>
            TC ブロックインスタンス番号
          </p></li><li class="listitem"><p>
            <code class="literal">comm_node_id</code>
          </p><p>
            通信 API またはデータノードのノード ID
          </p></li><li class="listitem"><p>
            <code class="literal">upper_bound</code>
          </p><p>
            間隔の上限 (マイクロ秒)
          </p></li><li class="listitem"><p>
            <code class="literal">scans</code>
          </p><p>
            スキャンのオープンからクローズまでの成功期間に基づいて、スキャンをリクエストしている API またはデータノードに対して追跡されます。
          </p></li><li class="listitem"><p>
            <code class="literal">scan_errors</code>
          </p><p>
            失敗したスキャンのオープンからクローズまでの期間に基づいて、スキャンをリクエストしている API またはデータノードに対して追跡されます。
          </p></li><li class="listitem"><p>
            <code class="literal">scan_fragments</code>
          </p><p>
            オープンからクローズまでの正常なフラグメントスキャンの期間に基づいて、それらを実行しているデータノードに対して追跡されます
          </p></li><li class="listitem"><p>
            <code class="literal">scan_fragment_errors</code>
          </p><p>
            失敗したフラグメントスキャンのオープンからクローズまでの期間に基づいて、それらを実行しているデータノードに対して追跡されます
          </p></li><li class="listitem"><p>
            <code class="literal">transactions</code>
          </p><p>
            成功したトランザクションの開始からコミット <code class="literal">ACK</code> の送信までの期間に基づいて、トランザクションをリクエストしている API またはデータノードに対して追跡されます。 ステートレストランザクションは含まれません。 
          </p></li><li class="listitem"><p>
            <code class="literal">transaction_errors</code>
          </p><p>
            失敗したトランザクションの開始から失敗までの期間に基づいて、トランザクションをリクエストしている API またはデータノードに対して追跡されます。
          </p></li><li class="listitem"><p>
            <code class="literal">read_key_ops</code>
          </p><p>
            ロック付きの正常な主キー読取りの期間に基づきます。 リクエストしている API またはデータノードと、それらを実行しているデータノードの両方に対して追跡されます。 
          </p></li><li class="listitem"><p>
            <code class="literal">write_key_ops</code>
          </p><p>
            主キーの書込みが成功した期間に基づいて、それらをリクエストしている API またはデータノードと、それらを実行しているデータノードの両方に対して追跡されます。
          </p></li><li class="listitem"><p>
            <code class="literal">index_key_ops</code>
          </p><p>
            一意インデックスキー操作が成功した期間に基づいて、それらをリクエストしている API またはデータノードと、実テーブルの読取りを実行しているデータノードの両方に対して追跡されます。
          </p></li><li class="listitem"><p>
            <code class="literal">key_op_errors</code>
          </p><p>
            失敗したすべてのキー読取りまたは書込み操作の期間に基づいて、それらをリクエストしている API またはデータノードと、それらを実行しているデータノードの両方に対して追跡されます。
          </p></li></ul></div><h5><a name="idm45563207180576"></a>メモ</h5><p>
        <code class="literal">block_instance</code> カラムには、<code class="literal">DBTC</code> カーネルブロックインスタンス番号が表示されます。 これをブロック名とともに使用して、<code class="literal">threadblocks</code> テーブルから特定のスレッドに関する情報を取得できます。 
      </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-ndbinfo-threadblocks"></a>23.5.14.52 ndbinfo threadblocks テーブル</h4></div></div></div><a class="indexterm" name="idm45563207175216"></a><p>
        <code class="literal">threadblocks</code> テーブルは、<code class="literal">NDB</code> カーネルブロックのデータノード、スレッド、およびインスタンスを関連付けます。
      </p><p>
        <code class="literal">threadblocks</code> テーブルには、次のカラムがあります:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">node_id</code>
          </p><p>
            ノード ID
          </p></li><li class="listitem"><p>
            <code class="literal">thr_no</code>
          </p><p>
            スレッド ID
          </p></li><li class="listitem"><p>
            <code class="literal">block_name</code>
          </p><p>
            ブロック名
          </p></li><li class="listitem"><p>
            <code class="literal">block_instance</code>
          </p><p>
            ブロックインスタンス番号
          </p></li></ul></div><h5><a name="idm45563207161616"></a>メモ</h5><p>
        このテーブルの <code class="literal">block_name</code> の値は、<code class="literal">ndbinfo.blocks</code> テーブルから選択したときに <code class="literal">block_name</code> カラムに表示される値のいずれかです。 可能な値のリストは、特定の NDB Cluster リリースで静的ですが、リストはリリースによって異なる場合があります。 
      </p><p>
        <code class="literal">block_instance</code> カラムには、カーネルブロックインスタンス番号が表示されます。
      </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-ndbinfo-threads"></a>23.5.14.53 ndbinfo threads テーブル</h4></div></div></div><a class="indexterm" name="idm45563207155072"></a><p>
        <code class="literal">threads</code> テーブルは、<code class="literal">NDB</code> カーネルで実行されているスレッドに関する情報を提供します。
      </p><p>
        <code class="literal">threads</code> テーブルには、次のカラムがあります:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">node_id</code>
          </p><p>
            スレッドが実行中のノードの ID
          </p></li><li class="listitem"><p>
            <code class="literal">thr_no</code>
          </p><p>
            スレッド ID (このノードに固有)
          </p></li><li class="listitem"><p>
            <code class="literal">thread_name</code>
          </p><p>
            スレッド名 (スレッドのタイプ)
          </p></li><li class="listitem"><p>
            <code class="literal">thread_description</code>
          </p><p>
            スレッド (タイプ) の説明
          </p></li></ul></div><h5><a name="idm45563207141648"></a>メモ</h5><p>
        スレッドの説明を含む、2 ノードのサンプルクラスタからの出力例を次に示します:
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT * FROM threads;</code></strong>
+---------+--------+-------------+------------------------------------------------------------------+
| node_id | thr_no | thread_name | thread_description                                               |
+---------+--------+-------------+------------------------------------------------------------------+
|       5 |      0 | main        | main thread, schema and distribution handling                    |
|       5 |      1 | rep         | rep thread, asynch replication and proxy block handling          |
|       5 |      2 | ldm         | ldm thread, handling a set of data partitions                    |
|       5 |      3 | recv        | receive thread, performing receive and polling for new receives  |
|       6 |      0 | main        | main thread, schema and distribution handling                    |
|       6 |      1 | rep         | rep thread, asynch replication and proxy block handling          |
|       6 |      2 | ldm         | ldm thread, handling a set of data partitions                    |
|       6 |      3 | recv        | receive thread, performing receive and polling for new receives  |
+---------+--------+-------------+------------------------------------------------------------------+
8 rows in set (0.01 sec)
</pre><p>
        NDB 8.0.23 では、<code class="literal">ThreadConfig</code> 引数 <code class="literal">main</code> または <code class="literal">rep</code> のいずれかを 0 に設定し、もう一方を 1 のままにする可能性が導入されています。この場合、スレッド名は <code class="literal">main_rep</code> で、その説明は <code class="literal">main and rep thread, schema, distribution, proxy block and asynch replication handling</code> です。 NDB 8.0.23 以降では、<code class="literal">main</code> と <code class="literal">rep</code> の両方を 0 に設定することもできます。この場合、生成されるスレッドの名前は <code class="literal">main_rep_recv</code> としてこのテーブルに表示され、その説明は <code class="literal">main, rep and recv thread, schema, distribution, proxy block and asynch replication handling and handling receive and polling for new receives</code> です。 
      </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-ndbinfo-threadstat"></a>23.5.14.54 ndbinfo threadstat テーブル</h4></div></div></div><a class="indexterm" name="idm45563207128128"></a><p>
        <code class="literal">threadstat</code> テーブルは、<code class="literal">NDB</code> カーネルで実行されているスレッドの統計の概略のスナップショットを示します。
      </p><p>
        <code class="literal">threadstat</code> テーブルには、次のカラムがあります:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">node_id</code>
          </p><p>
            ノード ID
          </p></li><li class="listitem"><p>
            <code class="literal">thr_no</code>
          </p><p>
            スレッド ID
          </p></li><li class="listitem"><p>
            <code class="literal">thr_nm</code>
          </p><p>
            スレッド名
          </p></li><li class="listitem"><p>
            <code class="literal">c_loop</code>
          </p><p>
            メインループ内のループ数
          </p></li><li class="listitem"><p>
            <code class="literal">c_exec</code>
          </p><p>
            実行されたシグナルの数
          </p></li><li class="listitem"><p>
            <code class="literal">c_wait</code>
          </p><p>
            追加入力を待機している回数
          </p></li><li class="listitem"><p>
            <code class="literal">c_l_sent_prioa</code>
          </p><p>
            独自のノードに送信された優先度 A のシグナルの数
          </p></li><li class="listitem"><p>
            <code class="literal">c_l_sent_priob</code>
          </p><p>
            独自のノードに送信された優先度 B のシグナルの数
          </p></li><li class="listitem"><p>
            <code class="literal">c_r_sent_prioa</code>
          </p><p>
            リモートノードに送信された優先度 A のシグナルの数
          </p></li><li class="listitem"><p>
            <code class="literal">c_r_sent_priob</code>
          </p><p>
            リモートノードに送信された優先度 B のシグナルの数
          </p></li><li class="listitem"><p>
            <code class="literal">os_tid</code>
          </p><p>
            OS スレッド ID
          </p></li><li class="listitem"><p>
            <code class="literal">os_now</code>
          </p><p>
            OS 時間 (ms)
          </p></li><li class="listitem"><p>
            <code class="literal">os_ru_utime</code>
          </p><p>
            OS ユーザーの CPU 時間 (µs)
          </p></li><li class="listitem"><p>
            <code class="literal">os_ru_stime</code>
          </p><p>
            OS システムの CPU 時間 (µs)
          </p></li><li class="listitem"><p>
            <code class="literal">os_ru_minflt</code>
          </p><p>
            OS ページ再利用 (ソフトページフォルト)
          </p></li><li class="listitem"><p>
            <code class="literal">os_ru_majflt</code>
          </p><p>
            OS ページフォルト (ハードページフォルト)
          </p></li><li class="listitem"><p>
            <code class="literal">os_ru_nvcsw</code>
          </p><p>
            OS の自発的コンテキストスイッチ
          </p></li><li class="listitem"><p>
            <code class="literal">os_ru_nivcsw</code>
          </p><p>
            OS の非自発的コンテキストスイッチ
          </p></li></ul></div><h5><a name="idm45563207086544"></a>メモ</h5><p>
        <code class="literal">os_time</code> では、<code class="function">gettimeofday()</code> システムコールが使用されます。
      </p><p>
        <code class="literal">os_ru_utime</code>、<code class="literal">os_ru_stime</code>、<code class="literal">os_ru_minflt</code>、<code class="literal">os_ru_majflt</code>、<code class="literal">os_ru_nvcsw</code>、および <code class="literal">os_ru_nivcsw</code> カラムの値は、<code class="function">getrusage()</code> システムコールまたは同等のものを使用することで取得されます。
      </p><p>
        このテーブルには特定の時点で取得されたカウントが格納されるため、最適な結果を得るには、このテーブルでクエリーを定期的に実行し、その結果を 1 つまたは複数の中間テーブルに格納する必要があります。 MySQL サーバーのイベントスケジューラを採用して、このようなモニタリングを自動化できます。 詳細は、<a class="xref" href="stored-objects.html#event-scheduler" title="25.4 イベントスケジューラの使用">セクション25.4「イベントスケジューラの使用」</a>を参照してください。 
      </p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-ndbinfo-transporters"></a>23.5.14.55 ndbinfo transporters テーブル</h4></div></div></div><a class="indexterm" name="idm45563207075424"></a><p>
        このテーブルには、NDB トランスポータに関する情報が格納されます。
      </p><p>
        <code class="literal">transporters</code> テーブルには、次のカラムがあります:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">node_id</code>
          </p><p>
            クラスタ内のこのデータノードの一意のノード ID
          </p></li><li class="listitem"><p>
            <code class="literal">remote_node_id</code>
          </p><p>
            リモートデータノードのノード ID
          </p></li><li class="listitem"><p>
            <code class="literal">status</code>
          </p><p>
            接続のステータス
          </p></li><li class="listitem"><p>
            <code class="literal">remote_address</code>
          </p><p>
            リモートホストの名前または IP アドレス
          </p></li><li class="listitem"><p>
            <code class="literal">bytes_sent</code>
          </p><p>
            この接続を使用して送信されたバイト数
          </p></li><li class="listitem"><p>
            <code class="literal">bytes_received</code>
          </p><p>
            この接続を使用して受信されたバイト数
          </p></li><li class="listitem"><p>
            <code class="literal">connect_count</code>
          </p><p>
            このトランスポータ上で確立された接続の回数
          </p></li><li class="listitem"><p>
            <code class="literal">overloaded</code>
          </p><p>
            このトランスポータが現在過負荷状態である場合は 1、それ以外の場合は 0
          </p></li><li class="listitem"><p>
            <code class="literal">overload_count</code>
          </p><p>
            このトランスポータが接続してから過負荷状態になった回数
          </p></li><li class="listitem"><p>
            <code class="literal">slowdown</code>
          </p><p>
            このトランスポータが低速状態の場合は 1、それ以外の場合は 0
          </p></li><li class="listitem"><p>
            <code class="literal">slowdown_count</code>
          </p><p>
            接続以降、このトランスポータが低速状態になった回数
          </p></li></ul></div><h5><a name="idm45563207048688"></a>メモ</h5><p>
        <code class="literal">transporters</code> テーブルには、クラスタ内で実行中のデータノードごとに、そのノードとクラスタ内のすべてのノード (<span class="emphasis"><em>自分自身を含む</em></span>) との各接続のステータスを示す行が表示されます。 この情報は、テーブルの <span class="emphasis"><em>status</em></span> カラムに示されます。このカラムは、<code class="literal">CONNECTING</code>、<code class="literal">CONNECTED</code>、<code class="literal">DISCONNECTING</code>、または <code class="literal">DISCONNECTED</code> のいずれかの値になる可能性があります。 
      </p><p>
        構成されているが、現在はクラスタに接続されていない API および管理ノードへの接続は、<code class="literal">DISCONNECTED</code> のステータスで示されます。 <code class="literal">node_id</code> が、現在接続されていないデータノードの行である場合、このテーブルには表示されません。 (これは、<code class="literal">ndbinfo.nodes</code> テーブルの切断されたノードの省略に似ています。 
      </p><p>
        <code class="literal">remote_address</code> は、<code class="literal">remote_node_id</code> カラムに ID が表示されないノードのホスト名またはアドレスです。 このノードからの <code class="literal">bytes_sent</code> およびこのノードによる <code class="literal">bytes_received</code> はそれぞれ、接続が確立されてから、この接続を使用してノードによって送信されたバイト数と受信されたバイト数です。 ステータスが <code class="literal">CONNECTING</code> または <code class="literal">DISCONNECTED</code> であるノードの場合、これらのカラムには常に <code class="literal">0</code> が表示されます。 
      </p><p>
        <span class="command"><strong>ndb_mgm</strong></span> クライアントの <code class="literal">SHOW</code> コマンドの出力に示されるように、2 つのデータノード、2 つの SQL ノード、および 1 つの管理ノードで構成される 5 ノードクラスタがあると仮定します。
      </p><pre class="programlisting">ndb_mgm&gt; <strong class="userinput"><code>SHOW</code></strong>
Connected to Management Server at: localhost:1186
Cluster Configuration
---------------------
[ndbd(NDB)]     2 node(s)
id=1    @10.100.10.1  (8.0.23-ndb-8.0.23, Nodegroup: 0, *)
id=2    @10.100.10.2  (8.0.23-ndb-8.0.23, Nodegroup: 0)

[ndb_mgmd(MGM)] 1 node(s)
id=10   @10.100.10.10  (8.0.23-ndb-8.0.23)

[mysqld(API)]   2 node(s)
id=20   @10.100.10.20  (8.0.23-ndb-8.0.23)
id=21   @10.100.10.21  (8.0.23-ndb-8.0.23)
</pre><p>
        すべてのデータノードが実行されていると仮定すると、次に示すように、<code class="literal">transporters</code> テーブルには 10 行 (1 番目のデータノード用に 5 行、2 番目のデータノード用に 5 行) が表示されます。
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT node_id, remote_node_id, status</code></strong>
    -&gt;   <strong class="userinput"><code>FROM ndbinfo.transporters;</code></strong>
+---------+----------------+---------------+
| node_id | remote_node_id | status        |
+---------+----------------+---------------+
|       1 |              1 | DISCONNECTED  |
|       1 |              2 | CONNECTED     |
|       1 |             10 | CONNECTED     |
|       1 |             20 | CONNECTED     |
|       1 |             21 | CONNECTED     |
|       2 |              1 | CONNECTED     |
|       2 |              2 | DISCONNECTED  |
|       2 |             10 | CONNECTED     |
|       2 |             20 | CONNECTED     |
|       2 |             21 | CONNECTED     |
+---------+----------------+---------------+
10 rows in set (0.04 sec)
</pre><p>
        <span class="command"><strong>ndb_mgm</strong></span> クライアントで <code class="literal">2 STOP</code> コマンドを使用して、このクラスタ内のデータノードのいずれかをシャットダウンしてから、(再度 <span class="command"><strong>mysql</strong></span> クライアントを使用して) 前のクエリーを繰り返すと、次に示すように、このテーブルには、5 行 (残りの管理ノードから別のノードへの接続 (そのデータノード自体と現在オフラインになっているデータノードの両方を含む) ごとに 1 行) のみが表示され、現在オフラインになっているデータノードへの残りの各接続のステータスを表す <code class="literal">CONNECTING</code> が表示されます。
      </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT node_id, remote_node_id, status</code></strong>
    -&gt;   <strong class="userinput"><code>FROM ndbinfo.transporters;</code></strong>
+---------+----------------+---------------+
| node_id | remote_node_id | status        |
+---------+----------------+---------------+
|       1 |              1 | DISCONNECTED  |
|       1 |              2 | CONNECTING    |
|       1 |             10 | CONNECTED     |
|       1 |             20 | CONNECTED     |
|       1 |             21 | CONNECTED     |
+---------+----------------+---------------+
5 rows in set (0.02 sec)
</pre><p>
        <code class="literal">connect_count</code>, <code class="literal">overloaded</code>, <code class="literal">overload_count</code>, <code class="literal">slowdown</code> および <code class="literal">slowdown_count</code> カウンタは接続時にリセットされ、リモートノードが切断された後も値が保持されます。 <code class="literal">bytes_sent</code> および <code class="literal">bytes_received</code> カウンタも接続時にリセットされるため、切断後も値は保持されます (次の接続がリセットされるまで)。 
      </p><p>
        <code class="literal">overloaded</code> カラムおよび <code class="literal">overload_count</code> カラムで参照される<span class="emphasis"><em>過負荷</em></span>の状態は、このトランスポータの送信バッファに <code class="literal">OVerloadLimit</code> バイトを超える値が含まれている場合に発生します (デフォルトは <code class="literal">SendBufferMemory</code> の 80%、つまり 0.8 * 2097152 = 1677721 バイト)。 特定のトランスポータが過負荷状態にある場合、このトランスポータを使用しようとする新しいトランザクションはエラー 1218 (<span class="errortext">「NDB カーネルでオーバーロードされたバッファーの送信」</span>) で失敗します。 これは、スキャンと主キー操作の両方に影響します。 
      </p><p>
        このテーブルの <code class="literal">slowdown</code> カラムおよび <code class="literal">slowdown_count</code> カラムによって参照される<span class="emphasis"><em>低速</em></span>の状態は、トランスポータの送信バッファにオーバーロード制限の 60% を超える値が含まれている場合に発生します (デフォルトでは 0.6*2097152 = 1258291 バイトと等しくなります)。 この状態では、このトランスポータを使用する新しいスキャンのバッチサイズが小さくなり、トランスポータの負荷が最小限に抑えられます。 
      </p><p>
        送信バッファの速度低下またはオーバーロードの一般的な原因は、次のとおりです:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            データサイズ。特に、<code class="literal">TEXT</code> カラムまたは <code class="literal">BLOB</code> カラム (あるいはその両方のタイプのカラム) に格納されるデータの量
          </p></li><li class="listitem"><p>
            バイナリロギングに関与する SQL ノードと同じホスト上にデータノード (ndbd または ndbmtd) がある
          </p></li><li class="listitem"><p>
            トランザクションまたはトランザクションバッチ当たりの多数の行
          </p></li><li class="listitem"><p>
            <code class="literal">SendBufferMemory</code> の不足などの構成の問題
          </p></li><li class="listitem"><p>
            RAM 不足やネットワーク接続の低下などのハードウェアの問題
          </p></li></ul></div><p>
        <a class="xref" href="mysql-cluster.html#mysql-cluster-config-send-buffers" title="23.3.3.14 NDB Cluster 送信バッファーパラメータの構成">セクション23.3.3.14「NDB Cluster 送信バッファーパラメータの構成」</a>も参照してください。
      </p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-cluster-information-schema-tables"></a>23.5.15 NDB Cluster の INFORMATION_SCHEMA テーブル</h3></div></div></div><p>
      2 つの <code class="literal">INFORMATION_SCHEMA</code> テーブルは、NDB Cluster を管理するときに特に使用される情報を提供します。 <code class="literal">FILES</code> テーブルは NDB Cluster ディスクデータファイルに関する情報を提供します (<a class="xref" href="mysql-cluster.html#mysql-cluster-disk-data-objects" title="23.5.10.1 NDB Cluster ディスクデータオブジェクト">セクション23.5.10.1「NDB Cluster ディスクデータオブジェクト」</a> を参照)。 <code class="literal">ndb_transid_mysql_connection_map</code> テーブルは、トランザクション、トランザクションコーディネータおよび API ノード間のマッピングを提供します。 
    </p><p>
      NDB Cluster のトランザクション、操作、スレッド、ブロック、およびパフォーマンスのその他の側面に関する追加の統計およびその他のデータは、<code class="literal">ndbinfo</code> データベース内のテーブルから取得できます。 これらのテーブルの詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-ndbinfo" title="23.5.14 ndbinfo: NDB Cluster 情報データベース">セクション23.5.14「ndbinfo: NDB Cluster 情報データベース」</a> を参照してください。 
    </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-cluster-sql-statements"></a>23.5.16 クイックリファレンス: NDB Cluster SQL ステートメント</h3></div></div></div><a class="indexterm" name="idm45563206980688"></a><a class="indexterm" name="idm45563206978576"></a><p>
      このセクションでは、NDB Cluster に接続されている MySQL サーバーの管理およびモニタリングに役立つことがあるいくつかの SQL ステートメントについて説明し、場合によってはクラスタ自体に関する情報を提供します。
    </p><div class="itemizedlist"><a class="indexterm" name="idm45563206975824"></a><a class="indexterm" name="idm45563206973904"></a><a class="indexterm" name="idm45563206972560"></a><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          <code class="literal">SHOW ENGINE NDB STATUS</code>、<code class="literal">SHOW ENGINE NDBCLUSTER STATUS</code>
        </p><p>
          このステートメントの出力には、クラスタへのサーバー接続、NDB Cluster オブジェクトの作成と使用、NDB Cluster レプリケーションのバイナリロギングに関する情報が含まれています。
        </p><p>
          使用例および詳細な情報については、<a class="xref" href="sql-statements.html#show-engine" title="13.7.7.15 SHOW ENGINE ステートメント">セクション13.7.7.15「SHOW ENGINE ステートメント」</a>を参照してください。
        </p></li><li class="listitem"><p>
          <a class="indexterm" name="idm45563206965216"></a> <code class="literal">SHOW ENGINES</code>
        </p><p>
          このステートメントを使用すると、MySQL サーバーでクラスタ化のサポートが有効になっているかどうか、およびその場合はアクティブであるかどうかを確認できます。
        </p><p>
          詳細は、<a class="xref" href="sql-statements.html#show-engines" title="13.7.7.16 SHOW ENGINES ステートメント">セクション13.7.7.16「SHOW ENGINES ステートメント」</a>を参照してください。
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
            このステートメントでは、<code class="literal">LIKE</code> 句がサポートされていません。 ただし、次の項目で説明するように、<code class="literal">LIKE</code> を使用すれば、<code class="literal">INFORMATION_SCHEMA.ENGINES</code> テーブルに対するクエリーをフィルタ処理できます。 
          </p></div></li><li class="listitem"><p>
          <a class="indexterm" name="idm45563206955312"></a> <code class="literal">SELECT * FROM INFORMATION_SCHEMA.ENGINES [WHERE ENGINE LIKE 'NDB%']</code>
        </p><p>
          これは、<code class="literal">SHOW ENGINES</code> と同等ですが、<code class="literal">INFORMATION_SCHEMA</code> の <code class="literal">ENGINES</code> テーブルを使用します。 <code class="literal">SHOW ENGINES</code> ステートメントを使用する場合とは異なり、<code class="literal">LIKE</code> 句を使用して結果をフィルタ処理したり、特定のカラムを選択してスクリプトで役立つ可能性のある情報を取得したりできます。 たとえば、次のクエリーは、<code class="literal">NDB</code> サポートを使用してサーバーが構築されたかどうか、およびその場合は有効になっているかどうかを表示します。 
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT ENGINE, SUPPORT FROM INFORMATION_SCHEMA.ENGINES</code></strong>
    -&gt;   <strong class="userinput"><code>WHERE ENGINE LIKE 'NDB%';</code></strong>
+------------+---------+
| ENGINE     | SUPPORT |
+------------+---------+
| ndbcluster | YES     |
| ndbinfo    | YES     |
+------------+---------+
</pre><p>
          <code class="literal">NDB</code> サポートが有効になっていない場合、前述のクエリーは空のセットを返します。 詳しくは<a class="xref" href="information-schema.html#information-schema-engines-table" title="26.13 INFORMATION_SCHEMA ENGINES テーブル">セクション26.13「INFORMATION_SCHEMA ENGINES テーブル」</a>,をご覧ください。 
        </p></li><li class="listitem"><p>
          <a class="indexterm" name="idm45563206940128"></a> <code class="literal">SHOW VARIABLES LIKE 'NDB%'</code>
        </p><p>
          このステートメントは、次に示すように、<code class="literal">NDB</code> ストレージエンジンに関するほとんどのサーバーシステム変数、およびそれらの値のリストを表示します。
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW VARIABLES LIKE 'NDB%';</code></strong>
+--------------------------------------+---------------------------------------+
| Variable_name                        | Value                                 |
+--------------------------------------+---------------------------------------+
| ndb_allow_copying_alter_table        | ON                                    |
| ndb_autoincrement_prefetch_sz        | 512                                   |
| ndb_batch_size                       | 32768                                 |
| ndb_blob_read_batch_bytes            | 65536                                 |
| ndb_blob_write_batch_bytes           | 65536                                 |
| ndb_clear_apply_status               | ON                                    |
| ndb_cluster_connection_pool          | 1                                     |
| ndb_cluster_connection_pool_nodeids  |                                       |
| ndb_connectstring                    | 127.0.0.1                             |
| ndb_data_node_neighbour              | 0                                     |
| ndb_default_column_format            | FIXED                                 |
| ndb_deferred_constraints             | 0                                     |
| ndb_distribution                     | KEYHASH                               |
| ndb_eventbuffer_free_percent         | 20                                    |
| ndb_eventbuffer_max_alloc            | 0                                     |
| ndb_extra_logging                    | 1                                     |
| ndb_force_send                       | ON                                    |
| ndb_fully_replicated                 | OFF                                   |
| ndb_index_stat_enable                | ON                                    |
| ndb_index_stat_option                | loop_enable=1000ms,loop_idle=1000ms,
loop_busy=100ms,update_batch=1,read_batch=4,idle_batch=32,check_batch=8,
check_delay=10m,delete_batch=8,clean_delay=1m,error_batch=4,error_delay=1m,
evict_batch=8,evict_delay=1m,cache_limit=32M,cache_lowpct=90,zero_total=0      |
| ndb_join_pushdown                    | ON                                    |
| ndb_log_apply_status                 | OFF                                   |
| ndb_log_bin                          | OFF                                   |
| ndb_log_binlog_index                 | ON                                    |
| ndb_log_empty_epochs                 | OFF                                   |
| ndb_log_empty_update                 | OFF                                   |
| ndb_log_exclusive_reads              | OFF                                   |
| ndb_log_orig                         | OFF                                   |
| ndb_log_transaction_id               | OFF                                   |
| ndb_log_update_as_write              | ON                                    |
| ndb_log_update_minimal               | OFF                                   |
| ndb_log_updated_only                 | ON                                    |
| ndb_metadata_check                   | ON                                    |
| ndb_metadata_check_interval          | 60                                    |
| ndb_metadata_sync                    | OFF                                   |
| ndb_mgmd_host                        | 127.0.0.1                             |
| ndb_nodeid                           | 0                                     |
| ndb_optimization_delay               | 10                                    |
| ndb_optimized_node_selection         | 3                                     |
| ndb_read_backup                      | ON                                    |
| ndb_recv_thread_activation_threshold | 8                                     |
| ndb_recv_thread_cpu_mask             |                                       |
| ndb_report_thresh_binlog_epoch_slip  | 10                                    |
| ndb_report_thresh_binlog_mem_usage   | 10                                    |
| ndb_row_checksum                     | 1                                     |
| ndb_schema_dist_lock_wait_timeout    | 30                                    |
| ndb_schema_dist_timeout              | 120                                   |
| ndb_schema_dist_upgrade_allowed      | ON                                    |
| ndb_show_foreign_key_mock_tables     | OFF                                   |
| ndb_slave_conflict_role              | NONE                                  |
| ndb_table_no_logging                 | OFF                                   |
| ndb_table_temporary                  | OFF                                   |
| ndb_use_copying_alter_table          | OFF                                   |
| ndb_use_exact_count                  | OFF                                   |
| ndb_use_transactions                 | ON                                    |
| ndb_version                          | 524308                                |
| ndb_version_string                   | ndb-8.0.23                            |
| ndb_wait_connected                   | 30                                    |
| ndb_wait_setup                       | 30                                    |
| ndbinfo_database                     | ndbinfo                               |
| ndbinfo_max_bytes                    | 0                                     |
| ndbinfo_max_rows                     | 10                                    |
| ndbinfo_offline                      | OFF                                   |
| ndbinfo_show_hidden                  | OFF                                   |
| ndbinfo_table_prefix                 | ndb$                                  |
| ndbinfo_version                      | 524308                                |
+--------------------------------------+---------------------------------------+
</pre><p>
          詳細は、<a class="xref" href="server-administration.html#server-system-variables" title="5.1.8 サーバーシステム変数">セクション5.1.8「サーバーシステム変数」</a>を参照してください。
        </p></li><li class="listitem"><p>
          <a class="indexterm" name="idm45563206920304"></a> <code class="literal">SELECT * FROM performance_schema.global_variables WHERE VARIABLE_NAME LIKE 'NDB%'</code>
        </p><p>
          このステートメントは、前の項目で説明した <code class="literal">SHOW VARIABLES</code> ステートメントと同等で、次に示すようにほぼ同一の出力を提供します:
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT * FROM performance_schema.global_variables</code></strong>
    -&gt;   <strong class="userinput"><code>WHERE VARIABLE_NAME LIKE 'NDB%';</code></strong>
+--------------------------------------+---------------------------------------+
| VARIABLE_NAME                        | VARIABLE_VALUE                        |
+--------------------------------------+---------------------------------------+
| ndb_allow_copying_alter_table        | ON                                    |
| ndb_autoincrement_prefetch_sz        | 512                                   |
| ndb_batch_size                       | 32768                                 |
| ndb_blob_read_batch_bytes            | 65536                                 |
| ndb_blob_write_batch_bytes           | 65536                                 |
| ndb_clear_apply_status               | ON                                    |
| ndb_cluster_connection_pool          | 1                                     |
| ndb_cluster_connection_pool_nodeids  |                                       |
| ndb_connectstring                    | 127.0.0.1                             |
| ndb_data_node_neighbour              | 0                                     |
| ndb_default_column_format            | FIXED                                 |
| ndb_deferred_constraints             | 0                                     |
| ndb_distribution                     | KEYHASH                               |
| ndb_eventbuffer_free_percent         | 20                                    |
| ndb_eventbuffer_max_alloc            | 0                                     |
| ndb_extra_logging                    | 1                                     |
| ndb_force_send                       | ON                                    |
| ndb_fully_replicated                 | OFF                                   |
| ndb_index_stat_enable                | ON                                    |
| ndb_index_stat_option                | loop_enable=1000ms,loop_idle=1000ms,
loop_busy=100ms,update_batch=1,read_batch=4,idle_batch=32,check_batch=8,
check_delay=10m,delete_batch=8,clean_delay=1m,error_batch=4,error_delay=1m,
evict_batch=8,evict_delay=1m,cache_limit=32M,cache_lowpct=90,zero_total=0      |
| ndb_join_pushdown                    | ON                                    |
| ndb_log_apply_status                 | OFF                                   |
| ndb_log_bin                          | OFF                                   |
| ndb_log_binlog_index                 | ON                                    |
| ndb_log_empty_epochs                 | OFF                                   |
| ndb_log_empty_update                 | OFF                                   |
| ndb_log_exclusive_reads              | OFF                                   |
| ndb_log_orig                         | OFF                                   |
| ndb_log_transaction_id               | OFF                                   |
| ndb_log_update_as_write              | ON                                    |
| ndb_log_update_minimal               | OFF                                   |
| ndb_log_updated_only                 | ON                                    |
| ndb_metadata_check                   | ON                                    |
| ndb_metadata_check_interval          | 60                                    |
| ndb_metadata_sync                    | OFF                                   |
| ndb_mgmd_host                        | 127.0.0.1                             |
| ndb_nodeid                           | 0                                     |
| ndb_optimization_delay               | 10                                    |
| ndb_optimized_node_selection         | 3                                     |
| ndb_read_backup                      | ON                                    |
| ndb_recv_thread_activation_threshold | 8                                     |
| ndb_recv_thread_cpu_mask             |                                       |
| ndb_report_thresh_binlog_epoch_slip  | 10                                    |
| ndb_report_thresh_binlog_mem_usage   | 10                                    |
| ndb_row_checksum                     | 1                                     |
| ndb_schema_dist_lock_wait_timeout    | 30                                    |
| ndb_schema_dist_timeout              | 120                                   |
| ndb_schema_dist_upgrade_allowed      | ON                                    |
| ndb_show_foreign_key_mock_tables     | OFF                                   |
| ndb_slave_conflict_role              | NONE                                  |
| ndb_table_no_logging                 | OFF                                   |
| ndb_table_temporary                  | OFF                                   |
| ndb_use_copying_alter_table          | OFF                                   |
| ndb_use_exact_count                  | OFF                                   |
| ndb_use_transactions                 | ON                                    |
| ndb_version                          | 524308                                |
| ndb_version_string                   | ndb-8.0.23                            |
| ndb_wait_connected                   | 30                                    |
| ndb_wait_setup                       | 30                                    |
| ndbinfo_database                     | ndbinfo                               |
| ndbinfo_max_bytes                    | 0                                     |
| ndbinfo_max_rows                     | 10                                    |
| ndbinfo_offline                      | OFF                                   |
| ndbinfo_show_hidden                  | OFF                                   |
| ndbinfo_table_prefix                 | ndb$                                  |
| ndbinfo_version                      | 524308                                |
+--------------------------------------+---------------------------------------+
</pre><p>
          <code class="literal">SHOW VARIABLES</code> ステートメントの場合とは異なり、個々のカラムを選択できます。 例: 
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT VARIABLE_VALUE </code></strong>
    -&gt;   <strong class="userinput"><code>FROM performance_schema.global_variables</code></strong>
    -&gt;   <strong class="userinput"><code>WHERE VARIABLE_NAME = 'ndb_force_send';</code></strong>
+----------------+
| VARIABLE_VALUE |
+----------------+
| ON             |
+----------------+
</pre><p>
          より有用なクエリーを次に示します:
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT VARIABLE_NAME AS Name, VARIABLE_VALUE AS Value</code></strong>
     &gt;   <strong class="userinput"><code>FROM performance_schema.global_variables</code></strong>
     &gt;   <strong class="userinput"><code>WHERE VARIABLE_NAME</code></strong>
     &gt;     <strong class="userinput"><code>IN ('version', 'ndb_version',</code></strong>
     &gt;       <strong class="userinput"><code>'ndb_version_string', 'ndbinfo_version');</code></strong>

+--------------------+----------------+
| Name               | Value          |
+--------------------+----------------+
| ndb_version        | 524308         |
| ndb_version_string | ndb-8.0.20     |
| ndbinfo_version    | 524308         |
| version            | 8.0.20-cluster |
+--------------------+----------------+
4 rows in set (0.00 sec)
</pre><p>
          詳細は、<a class="xref" href="performance-schema.html#performance-schema-status-variable-tables" title="27.12.15 パフォーマンススキーマのステータス変数のテーブル">セクション27.12.15「パフォーマンススキーマのステータス変数のテーブル」</a>および<a class="xref" href="server-administration.html#server-system-variables" title="5.1.8 サーバーシステム変数">セクション5.1.8「サーバーシステム変数」</a>を参照してください。
        </p></li><li class="listitem"><p>
          <a class="indexterm" name="idm45563206890944"></a> <code class="literal">SHOW STATUS LIKE 'NDB%'</code>
        </p><p>
          このステートメントは、MySQL サーバーがクラスタ SQL ノードとして動作しているかどうかをひと目でわかるように表示し、その場合は次に示すように、MySQL サーバーのクラスタノード ID、接続先のクラスタ管理サーバーのホスト名とポート、およびクラスタ内のデータノードの数を表示します。
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW STATUS LIKE 'NDB%';</code></strong>
+----------------------------------------------+-------------------------------+
| Variable_name                                | Value                         |
+----------------------------------------------+-------------------------------+
| Ndb_metadata_detected_count                  | 0                             |
| Ndb_cluster_node_id                          | 100                           |
| Ndb_config_from_host                         | 127.0.0.1                     |
| Ndb_config_from_port                         | 1186                          |
| Ndb_number_of_data_nodes                     | 2                             |
| Ndb_number_of_ready_data_nodes               | 2                             |
| Ndb_connect_count                            | 0                             |
| Ndb_execute_count                            | 0                             |
| Ndb_scan_count                               | 0                             |
| Ndb_pruned_scan_count                        | 0                             |
| Ndb_schema_locks_count                       | 0                             |
| Ndb_api_wait_exec_complete_count_session     | 0                             |
| Ndb_api_wait_scan_result_count_session       | 0                             |
| Ndb_api_wait_meta_request_count_session      | 1                             |
| Ndb_api_wait_nanos_count_session             | 163446                        |
| Ndb_api_bytes_sent_count_session             | 60                            |
| Ndb_api_bytes_received_count_session         | 28                            |
| Ndb_api_trans_start_count_session            | 0                             |
| Ndb_api_trans_commit_count_session           | 0                             |
| Ndb_api_trans_abort_count_session            | 0                             |
| Ndb_api_trans_close_count_session            | 0                             |
| Ndb_api_pk_op_count_session                  | 0                             |
| Ndb_api_uk_op_count_session                  | 0                             |
| Ndb_api_table_scan_count_session             | 0                             |
| Ndb_api_range_scan_count_session             | 0                             |
| Ndb_api_pruned_scan_count_session            | 0                             |
| Ndb_api_scan_batch_count_session             | 0                             |
| Ndb_api_read_row_count_session               | 0                             |
| Ndb_api_trans_local_read_row_count_session   | 0                             |
| Ndb_api_adaptive_send_forced_count_session   | 0                             |
| Ndb_api_adaptive_send_unforced_count_session | 0                             |
| Ndb_api_adaptive_send_deferred_count_session | 0                             |
| Ndb_trans_hint_count_session                 | 0                             |
| Ndb_sorted_scan_count                        | 0                             |
| Ndb_pushed_queries_defined                   | 0                             |
| Ndb_pushed_queries_dropped                   | 0                             |
| Ndb_pushed_queries_executed                  | 0                             |
| Ndb_pushed_reads                             | 0                             |
| Ndb_last_commit_epoch_server                 | 37632503447571                |
| Ndb_last_commit_epoch_session                | 0                             |
| Ndb_system_name                              | MC_20191126162038             |
| Ndb_api_event_data_count_injector            | 0                             |
| Ndb_api_event_nondata_count_injector         | 0                             |
| Ndb_api_event_bytes_count_injector           | 0                             |
| Ndb_api_wait_exec_complete_count_slave       | 0                             |
| Ndb_api_wait_scan_result_count_slave         | 0                             |
| Ndb_api_wait_meta_request_count_slave        | 0                             |
| Ndb_api_wait_nanos_count_slave               | 0                             |
| Ndb_api_bytes_sent_count_slave               | 0                             |
| Ndb_api_bytes_received_count_slave           | 0                             |
| Ndb_api_trans_start_count_slave              | 0                             |
| Ndb_api_trans_commit_count_slave             | 0                             |
| Ndb_api_trans_abort_count_slave              | 0                             |
| Ndb_api_trans_close_count_slave              | 0                             |
| Ndb_api_pk_op_count_slave                    | 0                             |
| Ndb_api_uk_op_count_slave                    | 0                             |
| Ndb_api_table_scan_count_slave               | 0                             |
| Ndb_api_range_scan_count_slave               | 0                             |
| Ndb_api_pruned_scan_count_slave              | 0                             |
| Ndb_api_scan_batch_count_slave               | 0                             |
| Ndb_api_read_row_count_slave                 | 0                             |
| Ndb_api_trans_local_read_row_count_slave     | 0                             |
| Ndb_api_adaptive_send_forced_count_slave     | 0                             |
| Ndb_api_adaptive_send_unforced_count_slave   | 0                             |
| Ndb_api_adaptive_send_deferred_count_slave   | 0                             |
| Ndb_slave_max_replicated_epoch               | 0                             |
| Ndb_api_wait_exec_complete_count             | 4                             |
| Ndb_api_wait_scan_result_count               | 7                             |
| Ndb_api_wait_meta_request_count              | 172                           |
| Ndb_api_wait_nanos_count                     | 1083548094028                 |
| Ndb_api_bytes_sent_count                     | 4640                          |
| Ndb_api_bytes_received_count                 | 109356                        |
| Ndb_api_trans_start_count                    | 4                             |
| Ndb_api_trans_commit_count                   | 1                             |
| Ndb_api_trans_abort_count                    | 1                             |
| Ndb_api_trans_close_count                    | 4                             |
| Ndb_api_pk_op_count                          | 2                             |
| Ndb_api_uk_op_count                          | 0                             |
| Ndb_api_table_scan_count                     | 1                             |
| Ndb_api_range_scan_count                     | 1                             |
| Ndb_api_pruned_scan_count                    | 0                             |
| Ndb_api_scan_batch_count                     | 1                             |
| Ndb_api_read_row_count                       | 3                             |
| Ndb_api_trans_local_read_row_count           | 2                             |
| Ndb_api_adaptive_send_forced_count           | 1                             |
| Ndb_api_adaptive_send_unforced_count         | 5                             |
| Ndb_api_adaptive_send_deferred_count         | 0                             |
| Ndb_api_event_data_count                     | 0                             |
| Ndb_api_event_nondata_count                  | 0                             |
| Ndb_api_event_bytes_count                    | 0                             |
| Ndb_metadata_excluded_count                  | 0                             |
| Ndb_metadata_synced_count                    | 0                             |
| Ndb_conflict_fn_max                          | 0                             |
| Ndb_conflict_fn_old                          | 0                             |
| Ndb_conflict_fn_max_del_win                  | 0                             |
| Ndb_conflict_fn_epoch                        | 0                             |
| Ndb_conflict_fn_epoch_trans                  | 0                             |
| Ndb_conflict_fn_epoch2                       | 0                             |
| Ndb_conflict_fn_epoch2_trans                 | 0                             |
| Ndb_conflict_trans_row_conflict_count        | 0                             |
| Ndb_conflict_trans_row_reject_count          | 0                             |
| Ndb_conflict_trans_reject_count              | 0                             |
| Ndb_conflict_trans_detect_iter_count         | 0                             |
| Ndb_conflict_trans_conflict_commit_count     | 0                             |
| Ndb_conflict_epoch_delete_delete_count       | 0                             |
| Ndb_conflict_reflected_op_prepare_count      | 0                             |
| Ndb_conflict_reflected_op_discard_count      | 0                             |
| Ndb_conflict_refresh_op_count                | 0                             |
| Ndb_conflict_last_conflict_epoch             | 0                             |
| Ndb_conflict_last_stable_epoch               | 0                             |
| Ndb_index_stat_status                        | allow:1,enable:1,busy:0,
loop:1000,list:(new:0,update:0,read:0,idle:0,check:0,delete:0,error:0,total:0),
analyze:(queue:0,wait:0),stats:(nostats:0,wait:0),total:(analyze:(all:0,error:0),
query:(all:0,nostats:0,error:0),event:(act:0,skip:0,miss:0),cache:(refresh:0,
clean:0,pinned:0,drop:0,evict:0)),cache:(query:0,clean:0,drop:0,evict:0,
usedpct:0.00,highpct:0.00)                                                     |
| Ndb_index_stat_cache_query                   | 0                             |
| Ndb_index_stat_cache_clean                   | 0                             |
+----------------------------------------------+-------------------------------+
</pre><p>
          MySQL サーバーが <code class="literal">NDB</code> サポートを使用して構築されているが、現在クラスタに接続されていない場合、このステートメントの出力の各行には、<code class="literal">Value</code> カラムのゼロまたは空の文字列が含まれます。
        </p><p>
          <a class="xref" href="sql-statements.html#show-status" title="13.7.7.37 SHOW STATUS ステートメント">セクション13.7.7.37「SHOW STATUS ステートメント」</a>も参照してください。
        </p></li><li class="listitem"><p>
          <a class="indexterm" name="idm45563206865184"></a> <code class="literal">SELECT * FROM performance_schema.global_status WHERE VARIABLE_NAME LIKE 'NDB%'</code>
        </p><p>
          このステートメントは、前の項目で説明した <code class="literal">SHOW STATUS</code> ステートメントと同様の出力を提供します。 <code class="literal">SHOW STATUS</code> の場合とは異なり、<code class="literal">SELECT</code> ステートメントを使用して SQL で値を抽出し、監視および自動化のためにスクリプトで使用できます。 
        </p><p>
          詳細は、<a class="xref" href="performance-schema.html#performance-schema-status-variable-tables" title="27.12.15 パフォーマンススキーマのステータス変数のテーブル">セクション27.12.15「パフォーマンススキーマのステータス変数のテーブル」</a>を参照してください。
        </p></li><li class="listitem"><p>
          <a class="indexterm" name="idm45563206856384"></a> <code class="literal">SELECT * FROM INFORMATION_SCHEMA.PLUGINS WHERE PLUGIN_NAME LIKE 'NDB%'</code>
        </p><p>
          このステートメントは、次に示すように、NDB Cluster に関連付けられたプラグイン (バージョン、作成者、ライセンスなど) に関する <code class="literal">INFORMATION_SCHEMA.PLUGINS</code> テーブルからの情報を表示します:
        </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT * FROM INFORMATION_SCHEMA.PLUGINS</code></strong>
     &gt;     <strong class="userinput"><code>WHERE PLUGIN_NAME LIKE 'NDB%'\G</code></strong>
*************************** 1. row ***************************
           PLUGIN_NAME: ndbcluster
        PLUGIN_VERSION: 1.0
         PLUGIN_STATUS: ACTIVE
           PLUGIN_TYPE: STORAGE ENGINE
   PLUGIN_TYPE_VERSION: 80025.0
        PLUGIN_LIBRARY: NULL
PLUGIN_LIBRARY_VERSION: NULL
         PLUGIN_AUTHOR: Oracle Corporation
    PLUGIN_DESCRIPTION: Clustered, fault-tolerant tables
        PLUGIN_LICENSE: GPL
           LOAD_OPTION: ON
*************************** 2. row ***************************
           PLUGIN_NAME: ndbinfo
        PLUGIN_VERSION: 0.1
         PLUGIN_STATUS: ACTIVE
           PLUGIN_TYPE: STORAGE ENGINE
   PLUGIN_TYPE_VERSION: 80025.0
        PLUGIN_LIBRARY: NULL
PLUGIN_LIBRARY_VERSION: NULL
         PLUGIN_AUTHOR: Oracle Corporation
    PLUGIN_DESCRIPTION: MySQL Cluster system information storage engine
        PLUGIN_LICENSE: GPL
           LOAD_OPTION: ON
*************************** 3. row ***************************
           PLUGIN_NAME: ndb_transid_mysql_connection_map
        PLUGIN_VERSION: 0.1
         PLUGIN_STATUS: ACTIVE
           PLUGIN_TYPE: INFORMATION SCHEMA
   PLUGIN_TYPE_VERSION: 80025.0
        PLUGIN_LIBRARY: NULL
PLUGIN_LIBRARY_VERSION: NULL
         PLUGIN_AUTHOR: Oracle Corporation
    PLUGIN_DESCRIPTION: Map between MySQL connection ID and NDB transaction ID
        PLUGIN_LICENSE: GPL
           LOAD_OPTION: ON
</pre><p>
          <code class="literal">SHOW PLUGINS</code> ステートメントを使用してこの情報を表示することもできますが、そのステートメントからの出力は簡単にフィルタできません。 <code class="literal">PLUGINS</code> テーブルの情報を取得する場所と方法について説明している <a class="ulink" href="https://dev.mysql.com/doc/extending-mysql/8.0/en/plugin-api.html" target="_top">The MySQL Plugin API</a> も参照してください。 
        </p></li></ul></div><p>
      <code class="literal">ndbinfo</code> 情報データベース内のテーブルをクエリーして、多数の NDB Cluster 操作に関するリアルタイムデータを取得することもできます。 <a class="xref" href="mysql-cluster.html#mysql-cluster-ndbinfo" title="23.5.14 ndbinfo: NDB Cluster 情報データベース">セクション23.5.14「ndbinfo: NDB Cluster 情報データベース」</a>を参照してください。 
    </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-cluster-security"></a>23.5.17 NDB Cluster のセキュリティーの問題</h3></div></div></div><div class="toc"><dl class="toc"><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-security-networking-issues">23.5.17.1 NDB Cluster のセキュリティーおよびネットワークの問題</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-security-mysql-privileges">23.5.17.2 NDB Cluster および MySQL の権限</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-security-mysql-security-procedures">23.5.17.3 NDB Cluster および MySQL セキュリティー手順</a></span></dt></dl></div><a class="indexterm" name="idm45563206840256"></a><p>
      このセクションでは、NDB Cluster を設定および実行するときに考慮すべきセキュリティー上の考慮事項について説明します。
    </p><p>
      このセクションで説明するトピックは、次のとおりです。
    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          NDB Cluster およびネットワークのセキュリティーの問題
        </p></li><li class="listitem"><p>
          NDB Cluster のセキュアな実行に関連する構成の問題
        </p></li><li class="listitem"><p>
          NDB Cluster および MySQL 特権システム
        </p></li><li class="listitem"><p>
          NDB Cluster に適用可能な MySQL 標準セキュリティー手順
        </p></li></ul></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-security-networking-issues"></a>23.5.17.1 NDB Cluster のセキュリティーおよびネットワークの問題</h4></div></div></div><a class="indexterm" name="idm45563206831440"></a><p>
        このセクションでは、NDB Cluster に関連する基本的なネットワークセキュリティーの問題について説明します。 NDB Cluster <span class="quote">「<span class="quote">「即時利用可能」</span>」</span>はセキュリティー保護されていないことを覚えておくことが非常に重要です。ユーザーまたはネットワーク管理者は、クラスタがネットワーク上で危険にさらされないように適切な手順を実行する必要があります。 
      </p><a class="indexterm" name="idm45563206827344"></a><p>
        クラスタの通信プロトコルは本質的にセキュアではなく、クラスタ内のノード間の通信では暗号化や同様のセキュリティー対策が使用されません。 ネットワーク速度と待機時間はクラスタの効率に直接影響するため、ノード間のネットワーク接続に SSL またはその他の暗号化を使用することもお薦めしません。このようなスキームを使用すると、通信が遅くなります。 
      </p><p>
        NDB Cluster への API ノードアクセスの制御に認証が使用されないことも当てはまります。 暗号化と同様に、認証の要件を課すオーバーヘッドによって、クラスタのパフォーマンスが影響を受けることがあります。 
      </p><p>
        さらに、クラスタへのアクセス時に、次のいずれに対するソース IP アドレスのチェックも実行されません。
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="filename">config.ini</code> ファイル内の空の <code class="literal">[mysqld]</code> または <code class="literal">[api]</code> セクションによって作成される<span class="quote">「<span class="quote">空きスロット</span>」</span>を使用している SQL ノードまたは API ノード
          </p><p>
            つまり、<code class="filename">config.ini</code> ファイルに空の<code class="literal">[mysqld]</code>または<code class="literal">[api]</code>セクションがある場合、管理サーバーのホスト名 (または IP アドレス) とポートを認識する API ノード (SQL ノードを含む) は、制限なしでクラスタに接続し、そのデータにアクセスできます。 (このことおよび関連する問題についての詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-security-mysql-privileges" title="23.5.17.2 NDB Cluster および MySQL の権限">セクション23.5.17.2「NDB Cluster および MySQL の権限」</a>を参照してください。) 
          </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
              <a class="indexterm" name="idm45563206814720"></a> <a class="indexterm" name="idm45563206811888"></a> <a class="indexterm" name="idm45563206809120"></a> <code class="filename">config.ini</code> ファイルのすべての<code class="literal">[mysqld]</code>および<code class="literal">[api]</code>セクションに <code class="literal">HostName</code> パラメータを指定することで、クラスタへの SQL および API ノードアクセスをある程度制御できます。 ただし、これは、これまで使用されていないホストからクラスタに API ノードを接続する場合、そのホスト名を含む <code class="literal">[api]</code> セクションを <code class="filename">config.ini</code> ファイルに追加する必要があることも意味します。 
            </p><p>
              詳細は、<code class="literal">HostName</code> パラメータについての<a class="link" href="mysql-cluster.html#ndbparam-api-hostname">この章のほかの場所</a>で説明しています。 API ノードで <code class="literal">HostName</code> を使用する構成例について、<a class="xref" href="mysql-cluster.html#mysql-cluster-quick" title="23.3.1 NDB Cluster のクイックテスト設定">セクション23.3.1「NDB Cluster のクイックテスト設定」</a>も参照してください。 
            </p></div></li><li class="listitem"><p>
            任意の <span class="command"><strong>ndb_mgm</strong></span> クライアント
          </p><p>
            つまり、管理サーバーのホスト名 (または IP アドレス) とポート (標準ポートでない場合) が指定されたクラスタ管理クライアントは、クラスタに接続して任意の管理クライアントコマンドを実行できます。 これには、<code class="literal">ALL STOP</code> や <code class="literal">SHUTDOWN</code> などのコマンドが含まれます。 
          </p></li></ul></div><p>
        <a class="indexterm" name="idm45563206793968"></a> <a class="indexterm" name="idm45563206791104"></a>これらの理由から、ネットワークレベルでクラスタを保護する必要があります。 もっとも安全なクラスタのネットワーク構成は、クラスタノード間の接続をその他のネットワーク通信から分離する構成です。 これは、次の方法のいずれかによって実現できます。 
      </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
            どのパブリックネットワークからも物理的に分離されたネットワーク上にクラスタノードを保持します。 このオプションは、信頼性がもっとも高いですが、実装するコストももっとも高くなります。 
          </p><p>
            このような物理的に分離されたネットワークを使用した NDB Cluster 設定の例を次に示します:
          </p><div class="figure"><a name="fig-mysql-cluster-hardware-firewall"></a><p class="title"><b>図 23.28 ハードウェアファイアウォールを備えた NDB Cluster</b></p><div class="figure-contents"><div class="mediaobject"><img src="images/cluster-security-network-1.png" width="550" height="347" alt="内容は周囲のテキストで説明されています。"></div></div></div><br class="figure-break"><p>
            この設定には、クラスタ管理サーバーおよびデータノードの 1 つのプライベート (実線の四角形) と、SQL ノードが存在する 1 つのパブリック (点線の四角形) の 2 つのネットワークがあります。 (ギガビットスイッチは最高のパフォーマンスが実現されるため、これを使用して接続された管理ノードとデータノードを示しています。) どちらのネットワークも、ハードウェアファイアウォール (<span class="firstterm">ネットワークベースのファイアウォール</span>と呼ばれることもあります) によって外部から保護されています。 
          </p><p>
            SQL ノードでパケットの転送が許可されていなければ、パケットは SQL ノードを通過せずに、ネットワーク外部からクラスタの管理ノードまたはデータノードに到達できない (どのクラスタの内部通信も外部に到達できない) ため、このネットワーク設定がもっとも安全です。 これは、当然、すべての SQL ノードをハッキングの試みに対して、セキュリティー保護する必要があることを意味します。 
          </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">重要</div><p>
              潜在的なセキュリティーの脆弱性に関しては、SQL ノードとその他の MySQL サーバーとの間に相違はありません。 MySQL サーバーをセキュリティー保護するために使用できる技法については、<a class="xref" href="security.html#security-against-attack" title="6.1.3 攻撃者に対する MySQL のセキュアな状態の維持">セクション6.1.3「攻撃者に対する MySQL のセキュアな状態の維持」</a>を参照してください。 
            </p></div></li><li class="listitem"><p>
            <a class="indexterm" name="idm45563206772368"></a> <a class="indexterm" name="idm45563206769536"></a> 1 つ以上のソフトウェアファイアウォール (<span class="firstterm">ホストベースのファイアウォール</span>とも呼ばれる) を使用して、ネットワークのアクセスを必要としない部分からクラスタに通過するパケットを制御します。 このタイプの設定では、それがなければローカルネットワークの外部からアクセスできてしまう可能性のあるクラスタ内のすべてのホストに、ソフトウェアファイアウォールをインストールする必要があります。 
          </p><p>
            ホストベースのオプションは、実装するコストがもっとも低いですが、保護を提供するソフトウェアに完全に依存しているため、セキュアな状態を維持することがもっとも困難です。
          </p><p>
            NDB Cluster のこのタイプのネットワーク設定を次に示します:
          </p><div class="figure"><a name="fig-mysql-cluster-software-firewalls"></a><p class="title"><b>図 23.29 ソフトウェアファイアウォールを備えた NDB Cluster</b></p><div class="figure-contents"><div class="mediaobject"><img src="images/cluster-security-network-2.png" width="550" height="489" alt="内容は周囲のテキストで説明されています。"></div></div></div><br class="figure-break"><p>
            このタイプのネットワーク設定を使用することは、NDB Cluster ホストに 2 つのゾーンがあることを意味します。 各クラスタホストは、クラスタ内のその他のすべてのマシンと通信できる必要がありますが、SQL ノードをホストしているマシン (点線の四角形) のみ、外部との接続を許可でき、データノードおよび管理ノードを含むゾーン内のマシン (実線の四角形) は、クラスタに含まれないすべてのマシンから分離する必要があります。 クラスタを使用するアプリケーションとそれらのアプリケーションのユーザーには、管理ノードおよびデータノードホストへの直接アクセスを許可<span class="emphasis"><em>しない</em></span>でください。 
          </p><p>
            これを実現するには、各クラスタホストコンピュータ上で実行されているノードのタイプに応じて、次の表に示す 1 つまたは複数のタイプにトラフィックを制限するソフトウェアファイアウォールを設定する必要があります。
          </p><div class="table"><a name="idm45563206753888"></a><p class="title"><b>表 23.66 ホストベースのファイアウォールクラスタ構成のノードタイプ</b></p><div class="table-contents"><table><col style="width: 25%"><col style="width: 75%"><thead><tr>
                <th>ノードタイプ</th>
                <th>許可されるトラフィック</th>
              </tr></thead><tbody><tr>
                <td>SQL ノードまたは API ノード</td>
                <td><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        それは、管理ノードまたはデータノードの IP アドレスから (任意の TCP または UDP ポートを使用して) 発信されています。
                      </p></li><li class="listitem"><p>
                        それは、クラスタが存在し、アプリケーションで使用されているポート上にあるネットワーク内から発信されています。
                      </p></li></ul></div></td>
              </tr><tr>
                <td>データノードまたは管理ノード</td>
                <td><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
                        それは、管理ノードまたはデータノードの IP アドレスから (任意の TCP または UDP ポートを使用して) 発信されています。
                      </p></li><li class="listitem"><p>
                        それは、SQL ノードまたは API ノードの IP アドレスから発信されています。
                      </p></li></ul></div></td>
              </tr></tbody></table></div></div><br class="table-break"><p>
            特定のノードタイプの、表に示した以外のトラフィックはすべて拒否されるべきです。
          </p><p>
            ファイアウォール構成の仕様は、ファイアウォールアプリケーションごとに異なるため、このマニュアルのスコープ外です。<span class="command"><strong>iptables</strong></span> は非常に一般的で、信頼性の高いファイアウォールアプリケーションであるため、多くの場合に構成をより簡単にするためにフロントエンドとして <span class="command"><strong>APF</strong></span> とともに使用されます。 採用するソフトウェアファイアウォール、このタイプの NDB Cluster ネットワーク設定の実装を選択した場合、または次の項目で説明する <span class="quote">「<span class="quote">mixed</span>」</span> タイプのドキュメントを参照してください。 
          </p></li><li class="listitem"><p>
            <a class="indexterm" name="idm45563206734272"></a> <a class="indexterm" name="idm45563206731408"></a>ハードウェアとソフトウェアの両方を使用してクラスタを保護する、つまり、ネットワークベースとホストベースの両方のファイアウォールを使用して、最初の 2 つの方法を組み合せて使用することもできます。 これは、セキュリティーレベルとコストの両方の点で、最初の 2 つのスキームの中間に位置するものです。 このタイプのネットワーク設定では、クラスタがハードウェアファイアウォールの背後に配置されますが、受信パケットは SQL ノードに到達するために、すべてのクラスタホストに接続しているルータを通過することが許可されます。 
          </p><p>
            ハードウェアファイアウォールとソフトウェアファイアウォールを組み合わせて使用した NDB Cluster の可能なネットワーク配備の 1 つを次に示します:
          </p><div class="figure"><a name="fig-mysql-cluster-combination-firewalls"></a><p class="title"><b>図 23.30 ハードウェアファイアウォールとソフトウェアファイアウォールの組み合わせを使用した NDB Cluster</b></p><div class="figure-contents"><div class="mediaobject"><img src="images/cluster-security-network-3.png" width="550" height="410" alt="内容は周囲のテキストで説明されています。"></div></div></div><br class="figure-break"><p>
            この場合、SQL ノードおよび API ノードへのトラフィックを除くすべての外部トラフィックを拒否し、アプリケーションで必要とするポート上でのみそれらのノードへのトラフィックを許可するように、ハードウェアファイアウォールにルールを設定できます。
          </p></li></ol></div><p>
        どのネットワーク構成を使用する場合でも、クラスタのセキュリティーを維持するという観点からの目標は同じであることは忘れないでください。つまり、クラスタ内のノード間でもっとも効率的な通信を確保しながら、不要なトラフィックがクラスタに到達することを妨げます。
      </p><p>
        <a class="indexterm" name="idm45563206717920"></a> <a class="indexterm" name="idm45563206715056"></a> NDB Cluster では、ノード間の通信用に多数のポートを開く必要があるため、分離されたネットワークを使用することをお勧めします。 これは、不要なトラフィックがクラスタに到達することを防ぐためのもっとも簡単な方法です。 
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
          <a class="indexterm" name="idm45563206711824"></a> <a class="indexterm" name="idm45563206708992"></a> NDB Cluster をリモートで (つまり、ローカルネットワーク外から) 管理する場合は、<span class="command"><strong>ssh</strong></span> または別のセキュアログインシェルを使用して SQL ノードホストにアクセスすることをお勧めします。 このホストから、管理クライアントを実行して、クラスタ独自のローカルネットワーク内から安全に管理サーバーにアクセスできます。 
        </p><p>
          <span class="command"><strong>ndb_mgm</strong></span> を使用して、クラスタが実行されているローカルネットワーク外部から直接クラスタを管理することは理論上可能ですが、推奨されて<span class="emphasis"><em>いません</em></span>。 管理クライアントと管理サーバー間では認証も暗号化も行われないため、これはクラスタを管理するきわめてセキュアでない方法であり、遅かれ早かれ、ほぼ確実に危険にさらされます。 
        </p></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-security-mysql-privileges"></a>23.5.17.2 NDB Cluster および MySQL の権限</h4></div></div></div><a class="indexterm" name="idm45563206701712"></a><p>
        このセクションでは、NDB Cluster に関連して MySQL 特権システムがどのように機能するか、および NDB Cluster をセキュアに保つためのこれの影響について説明します。
      </p><p>
        <a class="indexterm" name="idm45563206698688"></a>標準 MySQL 権限は、「NDB Cluster」テーブルに適用されます。 これには、データベース、テーブル、およびカラムのレベルで付与されるすべての MySQL 権限タイプ (<code class="literal">SELECT</code> 権限、<code class="literal">UPDATE</code> 権限、<code class="literal">DELETE</code> 権限など) が含まれます。 その他の MySQL サーバーの場合と同様に、ユーザーおよび権限の情報は <code class="literal">mysql</code> システムデータベースに格納されます。 <code class="literal">NDB</code> テーブル、このようなテーブルを含むデータベース、およびこのようなテーブル内のカラムに対する権限を付与および取り消すために使用される SQL ステートメントは、(その他の) MySQL ストレージエンジンを含むデータベースオブジェクトとの接続に使用される <code class="literal">GRANT</code> および <code class="literal">REVOKE</code> ステートメントとすべての点で同じです。 <code class="literal">CREATE USER</code> および <code class="literal">DROP USER</code> ステートメントについても、同じことが当てはまります。 
      </p><p>
        <a class="indexterm" name="idm45563206686352"></a>デフォルトでは、MySQL 付与テーブルは <code class="literal">MyISAM</code> ストレージエンジンを使用することに注意してください。 このため、これらのテーブルは通常、NDB Cluster 内の SQL ノードとして機能する MySQL サーバー間で複製または共有されません。 言い換えると、デフォルトでは、ユーザーおよびそれらの権限を変更しても自動的に SQL ノード間に反映されません。 必要に応じて、NDB Cluster SQL ノード間での MySQL ユーザーおよび特権の自動配布を有効にできます。詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-privilege-distribution" title="23.5.12 NDB_STORED_USER での分散 MySQL 権限">セクション23.5.12「NDB_STORED_USER での分散 MySQL 権限」</a> を参照してください。 
      </p><p>
        <a class="indexterm" name="idm45563206681488"></a> <a class="indexterm" name="idm45563206679296"></a>逆に、MySQL には権限を拒否する方法がないため (権限は最初の場所で取り消すことも付与しないこともできますが、拒否することもできません)、ある SQL ノード上の <code class="literal">NDB</code> テーブルに対する特別な保護はありません (これは、ユーザー権限の自動配布を使用していない場合でも当てはまります)。 これを示す明確な例として、任意のデータベースオブジェクトに対して任意のアクションを実行できる MySQL の <code class="literal">root</code> アカウントが挙げられます。 このアカウントを <code class="filename">config.ini</code> ファイルの空の <code class="literal">[mysqld]</code> または <code class="literal">[api]</code> セクションと組み合わせると、著しく危険になる可能性があります。 その理由を理解するために、次のようなシナリオを検討します。 
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="filename">config.ini</code> ファイルには、少なくとも 1 つの空の <code class="literal">[mysqld]</code> または <code class="literal">[api]</code> セクションが含まれています。 つまり、NDB Cluster 管理サーバーは、MySQL Server (またはほかの API ノード) が NDB Cluster にアクセスするホストのチェックを実行しません。 
          </p></li><li class="listitem"><p>
            ファイアウォールが存在しないか、ファイアウォールが NDB Cluster へのアクセスをネットワーク外部のホストから保護できません。
          </p></li><li class="listitem"><p>
            NDB Cluster 管理サーバーのホスト名または IP アドレスは既知であるか、ネットワークの外部から決定できます。
          </p></li></ul></div><p>
        これらの条件が true の場合、だれでも <code class="option">--ndbcluster</code> <code class="option">--ndb-connectstring=<em class="replaceable"><code>management_host</code></em></code> を使用して MySQL Server を起動し、この NDB Cluster にアクセスできます。 MySQL <code class="literal">root</code> アカウントを使用すると、このユーザーは次のアクションを実行できます。 
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">SHOW DATABASES</code> ステートメント (サーバー上のすべての <code class="literal">NDB</code> データベースのリストを取得する) または <code class="literal">SHOW TABLES FROM <em class="replaceable"><code>some_ndb_database</code></em></code> ステートメントなどのメタデータステートメントを実行して、特定のデータベース内のすべての <code class="literal">NDB</code> テーブルのリストを取得します。
          </p></li><li class="listitem"><p>
            <a class="indexterm" name="idm45563206656064"></a> <a class="indexterm" name="idm45563206653968"></a>検出された任意のテーブルに対して、次のような有効な MySQL ステートメントを実行します:
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
                任意のテーブルからすべてのデータを読み取る <code class="literal">SELECT * FROM <em class="replaceable"><code>some_table</code></em></code>
              </p></li><li class="listitem"><p>
                テーブルからすべてのデータを削除する <code class="literal">DELETE FROM <em class="replaceable"><code>some_table</code></em></code>
              </p></li><li class="listitem"><p>
                テーブルスキーマを確認する <code class="literal">DESCRIBE <em class="replaceable"><code>some_table</code></em></code> または <code class="literal">SHOW CREATE TABLE <em class="replaceable"><code>some_table</code></em></code>
              </p></li><li class="listitem"><p>
                テーブルカラムに<span class="quote">「<span class="quote">不正</span>」</span>データを入力する <code class="literal">UPDATE <em class="replaceable"><code>some_table</code></em> SET <em class="replaceable"><code>column1</code></em> = <em class="replaceable"><code>some_value</code></em></code>。これは実際に、単にすべてのデータを削除するよりも、はるかに大きな損害が発生する可能性があります
              </p><p>
                より狡猾なバリエーションには、次のようなステートメントが含まれることがあります。
              </p><pre class="programlisting">UPDATE <em class="replaceable"><code>some_table</code></em> SET <em class="replaceable"><code>an_int_column</code></em> = <em class="replaceable"><code>an_int_column</code></em> + 1
</pre><p>
                または
              </p><pre class="programlisting">UPDATE <em class="replaceable"><code>some_table</code></em> SET <em class="replaceable"><code>a_varchar_column</code></em> = REVERSE(<em class="replaceable"><code>a_varchar_column</code></em>)
</pre><p>
                このような悪意のあるステートメントは、攻撃者の想像力でしか制限されません。
              </p></li></ul></div><p>
            このような種類の攻撃を受けるおそれのない唯一のテーブルは、<code class="literal">NDB</code> 以外のストレージエンジンを使用して作成され、そのために<span class="quote">「<span class="quote">不正な</span>」</span> SQL ノードから見えないテーブルです。
          </p><p>
            <a class="indexterm" name="idm45563206632368"></a> <a class="indexterm" name="idm45563206630192"></a> <code class="literal">root</code> としてログインできるユーザーは、<code class="literal">INFORMATION_SCHEMA</code> データベースとそのテーブルにもアクセスできるため、データベース、テーブル、ストアドルーチン、スケジュール済イベント、およびメタデータが <code class="literal">INFORMATION_SCHEMA</code> に格納されているその他のデータベースオブジェクトに関する情報を取得できます。
          </p><p>
            また、分散特権を使用していないかぎり、異なる NDB Cluster SQL ノード上の <code class="literal">root</code> アカウントに異なるパスワードを使用することをお勧めします。
          </p></li></ul></div><p>
        つまり、ローカルネットワークの外部から直接アクセスできる場合は、安全な NDB Cluster を持つことはできません。
      </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">重要</div><p>
          <span class="emphasis"><em>MySQL の root アカウントのパスワードは空のままにしないでください</em></span>。 これは、NDB Cluster SQL ノードとして MySQL を実行している場合と同様に、スタンドアロン (非クラスタ) MySQL Server として実行している場合にも当てはまり、NDB Cluster で MySQL Server を SQL ノードとして構成する前に、MySQL インストールプロセスの一部として実行するようにしてください。 
        </p></div><p>
        NDB Cluster 分散特権機能を採用する場合は、<code class="literal">NDB</code> ストレージエンジンを手動で使用するように <code class="literal">mysql</code> データベース内のシステムテーブルを変換するだけではありません。 代わりに、この目的のために提供されているストアドプロシージャーを使用してください。<a class="xref" href="mysql-cluster.html#mysql-cluster-privilege-distribution" title="23.5.12 NDB_STORED_USER での分散 MySQL 権限">セクション23.5.12「NDB_STORED_USER での分散 MySQL 権限」</a>を参照してください。 
      </p><p>
        それ以外の場合、SQL ノード間で <code class="literal">mysql</code> システムテーブルを同期する必要がある場合は、標準の MySQL レプリケーションを使用してこれを実行することも、スクリプトを使用して MySQL サーバー間でテーブルエントリをコピーすることもできます。
      </p><p><b>サマリー. </b>
          NDB Cluster に関する MySQL 特権システムについて覚えておくべきもっとも重要な点を次に示します:
        </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
            ある SQL ノード上で確立されたユーザーおよび権限は、クラスタ内のその他の SQL ノードで自動的に存在することも、有効になることもありません。 逆に、クラスタ内のある SQL ノード上のユーザーまたは権限を削除しても、その他の SQL ノードからユーザーまたは権限は削除されません。 
          </p></li><li class="listitem"><p>
            NDB Cluster 配布でこの目的のために提供されている SQL スクリプトとそれに含まれているストアドプロシージャーを使用して、MySQL ユーザーおよび権限を SQL ノード間で配布できます。
          </p></li><li class="listitem"><p>
            NDB Cluster 内のある SQL ノードから <code class="literal">NDB</code> テーブルに対する権限が MySQL ユーザーに付与されると、そのユーザーは、権限配布を使用していない場合でも、データの元となった SQL ノードに関係なく、そのテーブル内の任意のデータを<span class="quote">「<span class="quote">「参照」</span>」</span>できます。
          </p></li></ol></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-security-mysql-security-procedures"></a>23.5.17.3 NDB Cluster および MySQL セキュリティー手順</h4></div></div></div><a class="indexterm" name="idm45563206606000"></a><a class="indexterm" name="idm45563206603824"></a><p>
        このセクションでは、NDB Cluster の実行に適用される MySQL 標準セキュリティー手順について説明します。
      </p><p>
        一般に、MySQL をセキュアに実行するための標準の手順は、NDB Cluster の一部として MySQL Server を実行する場合にも適用されます。 まず、MySQL Server は常に <code class="literal">mysql</code> オペレーティングシステムユーザーとして実行する必要があります。これは、標準 (非クラスタ) 環境での MySQL の実行とは異なりません。 <code class="literal">mysql</code> システムアカウントは、一意かつ明確に定義されるべきです。 幸運にも、これは新しい MySQL インストールのデフォルトの動作です。 次に示すようなシステムコマンドを使用して、<span class="command"><strong>mysqld</strong></span> プロセスが <code class="literal">mysql</code> オペレーティングシステムユーザーとして実行されていることを確認できます: 
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>ps aux | grep mysql</code></strong>
root     10467  0.0  0.1   3616  1380 pts/3    S    11:53   0:00 \
  /bin/sh ./mysqld_safe --ndbcluster --ndb-connectstring=localhost:1186
mysql    10512  0.2  2.5  58528 26636 pts/3    Sl   11:53   0:00 \
  /usr/local/mysql/libexec/mysqld --basedir=/usr/local/mysql \
  --datadir=/usr/local/mysql/var --user=mysql --ndbcluster \
  --ndb-connectstring=localhost:1186 --pid-file=/usr/local/mysql/var/mothra.pid \
  --log-error=/usr/local/mysql/var/mothra.err
jon      10579  0.0  0.0   2736   688 pts/0    S+   11:54   0:00 grep mysql
</pre><p>
        <span class="command"><strong>mysqld</strong></span> プロセスが <code class="literal">mysql</code> 以外のユーザーとして実行されている場合は、それをすぐにシャットダウンしてから、<code class="literal">mysql</code> ユーザーとして再起動するようにしてください。 このユーザーがシステムに存在しない場合は、<code class="literal">mysql</code> ユーザーアカウントを作成し、このユーザーを <code class="literal">mysql</code> ユーザーグループの一部にする必要があります。この場合は、このシステム上の MySQL データディレクトリ (<span class="command"><strong>mysqld</strong></span> の <code class="option">--datadir</code> オプションを使用して設定) が <code class="literal">mysql</code> ユーザーによって所有されていること、および SQL ノードの <code class="filename">my.cnf</code> ファイルの<code class="literal">[mysqld]</code>セクションに <code class="literal">user=mysql</code> が含まれていることも確認する必要があります。 また、コマンド行で <code class="option">--user=mysql</code> を付けて MySQL サーバープロセスを起動できますが、コマンド行オプションを使用することを忘れたために、意図せずに <span class="command"><strong>mysqld</strong></span> が別のユーザーとして実行されている可能性もあるため、<code class="filename">my.cnf</code> オプションを使用することをお勧めします。 <span class="command"><strong>mysqld_safe</strong></span> 起動スクリプトを使用すると、MySQL が強制的に <code class="literal">mysql</code> ユーザーとして実行されます。 
      </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">重要</div><p>
          絶対に <span class="command"><strong>mysqld</strong></span> をシステムの root ユーザーとして実行しないでください。 これを行うと、システム上の任意のファイルが MySQL によって読み取られる可能性があるため、攻撃者によって MySQL が危険にさらされます。 
        </p></div><p>
        <a class="indexterm" name="idm45563206578624"></a>前のセクション (<a class="xref" href="mysql-cluster.html#mysql-cluster-security-mysql-privileges" title="23.5.17.2 NDB Cluster および MySQL の権限">セクション23.5.17.2「NDB Cluster および MySQL の権限」</a> を参照) で説明したように、MySQL Server を実行したらすぐに root パスワードを設定する必要があります。 また、デフォルトでインストールされている匿名ユーザーアカウントを削除するようにしてください。 次のステートメントを使用すると、これらのタスクを実現できます。 
      </p><pre class="programlisting">shell&gt; <strong class="userinput"><code>mysql -u root</code></strong>

mysql&gt; <strong class="userinput"><code>UPDATE mysql.user</code></strong>
    -&gt;     <strong class="userinput"><code>SET Password=PASSWORD('<em class="replaceable"><code>secure_password</code></em>')</code></strong>
    -&gt;     <strong class="userinput"><code>WHERE User='root';</code></strong>

mysql&gt; <strong class="userinput"><code>DELETE FROM mysql.user</code></strong>
    -&gt;     <strong class="userinput"><code>WHERE User='';</code></strong>

mysql&gt; <strong class="userinput"><code>FLUSH PRIVILEGES;</code></strong>
</pre><p>
        <code class="literal">DELETE</code> ステートメントを実行する際は、<code class="literal">WHERE</code> 句を省略しないように注意してください。そうしないと、<span class="emphasis"><em>すべての</em></span> MySQL ユーザーが削除される危険性があります。 <code class="literal">mysql.user</code> テーブルを変更したら、その変更が即座に有効になるように、すぐに <code class="literal">FLUSH PRIVILEGES</code> ステートメントを実行してください。 <code class="literal">FLUSH PRIVILEGES</code> を実行しなければ、次回サーバーを再起動するまで、変更が有効になりません。 
      </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
          <a class="indexterm" name="idm45563206562112"></a> <a class="indexterm" name="idm45563206559952"></a> <span class="command"><strong>ndb_show_tables</strong></span>、<span class="command"><strong>ndb_desc</strong></span>、<span class="command"><strong>ndb_select_all</strong></span> などの NDB Cluster ユーティリティーの多くも認証なしで動作し、テーブル名、スキーマ、およびデータを表示できます。 デフォルトで、これらは Unix スタイルのシステムにアクセス権 <code class="literal">wxr-xr-x</code> (755) でインストールされます。これは、<code class="filename">mysql/bin</code> ディレクトリにアクセスできる任意のユーザーが実行できることを意味します。 
        </p><p>
          これらのユーティリティーについての詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-programs" title="23.4 NDB Cluster プログラム">セクション23.4「NDB Cluster プログラム」</a>を参照してください。
        </p></div></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-cluster-replication"></a>23.6 NDB Cluster レプリケーション</h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-replication-abbreviations">23.6.1 NDB Cluster レプリケーション: 省略形と記号</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-replication-general">23.6.2 NDB Cluster レプリケーションの一般的な要件</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-replication-issues">23.6.3 NDB Cluster レプリケーションの既知の問題</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-replication-schema">23.6.4 NDB Cluster レプリケーションスキーマおよびテーブル</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-replication-preparation">23.6.5 NDB Cluster のレプリケーションの準備</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-replication-starting">23.6.6 NDB Cluster レプリケーションの開始 (シングルレプリケーションチャネル)</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-replication-two-channels">23.6.7 NDB Cluster レプリケーションでの 2 つのレプリケーションチャネルの使用</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-replication-failover">23.6.8 NDB Cluster レプリケーションによるフェイルオーバーの実装</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-replication-backups">23.6.9 NDB Cluster レプリケーションによる NDB Cluster バックアップ</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-replication-multi-source">23.6.10 NDB Cluster レプリケーション: 双方向および循環レプリケーション</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-replication-conflict-resolution">23.6.11 NDB Cluster レプリケーションの競合解決</a></span></dt></dl></div><a class="indexterm" name="idm45563206550448"></a><a class="indexterm" name="idm45563206547872"></a><a class="indexterm" name="idm45563206545312"></a><a class="indexterm" name="idm45563206543888"></a><a class="indexterm" name="idm45563206542032"></a><p>
    NDB Cluster は<span class="firstterm">非同期レプリケーション</span>をサポートしており、通常は単に<span class="quote">「<span class="quote">「レプリケーション」</span>」</span>と呼ばれます。 このセクションでは、NDB Cluster として動作しているコンピュータの 1 つのグループが 2 つ目のコンピュータまたはコンピュータのグループにレプリケートする構成を設定および管理する方法について説明します。 標準の MySQL レプリケーションに関してはこのマニュアルで別途説明しています。 (<a class="xref" href="replication.html" title="第 17 章 レプリケーション">第17章「<i>レプリケーション</i>」</a>を参照してください。) 
  </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
      NDB Cluster は GTID を使用したレプリケーションをサポートしていません。準同期レプリケーションおよびグループレプリケーションも <code class="literal">NDB</code> ストレージエンジンでサポートされていません。
    </p></div><p>
    通常の (クラスタ化されていない) レプリケーションには、ソースサーバーとレプリカサーバー、レプリケートされる操作とデータの発生元であるために名前が付けられているソース、およびレプリカがこれらの受信者になります。 NDB Cluster では、レプリケーションは概念的に非常に似ていますが、2 つの完全なクラスタ間のレプリケーションを含む多数の異なる構成に対応するように拡張できるため、実際には複雑になることがあります。 NDB Cluster 自体はクラスタリング機能のために <code class="literal">NDB</code> ストレージエンジンに依存しますが、レプリケートされたテーブルのレプリカコピーのストレージエンジンとして <code class="literal">NDB</code> を使用する必要はありません (<a class="xref" href="mysql-cluster.html#mysql-cluster-replication-ndb-to-non-ndb" title="NDB から別のストレージエンジンへのレプリケーション">NDB から別のストレージエンジンへのレプリケーション</a> を参照)。 ただし、可用性を最大限に高めるために、NDB Cluster 間でレプリケートすることが可能であり、次の図に示すように、このシナリオについて説明します: 
  </p><div class="figure"><a name="fig-mysql-cluster-cluster-replication"></a><p class="title"><b>図 23.31 NDB Cluster 間レプリケーションのレイアウト</b></p><div class="figure-contents"><div class="mediaobject"><img src="images/cluster-replication-overview.png" width="700" height="500" alt="内容の多くは周囲のテキストで説明されています。 MySQL ソースのレプリケート方法を視覚化します。 レプリカは、SQL スレッドを指すリレーバイナリログを指す I/O スレッドを示す点が異なります。 また、バイナリログはソースサーバー上の NDBCLUSTER エンジンを指し示し、NDBCLUSTER エンジンはレプリカ上の SQL ノード (MySQL サーバー) を指し示します。"></div></div></div><br class="figure-break"><p>
    このシナリオでは、レプリケーションプロセスは、ソースクラスタの連続した状態がログに記録され、レプリカクラスタに保存されるプロセスです。 このプロセスは NDB バイナリログインジェクタスレッドとして知られる特別なスレッドによって実行されます。このスレッドは各 MySQL サーバーで動作し、バイナリログ (<code class="literal">binlog</code>) を作成します。 このスレッドは、バイナリログを作成するクラスタのすべての変更 (MySQL Server を介して影響を受けた変更だけではありません) を、シリアライゼーションの正しい順序でバイナリログに挿入します。 MySQL ソースサーバーとレプリカサーバーをレプリケーションサーバーまたはレプリケーションノードと呼び、それらの間のデータフローまたは通信回線を<span class="firstterm">レプリケーションチャネル</span>と呼びます。 
  </p><p>
    NDB Cluster および NDB Cluster レプリケーションを使用したポイントインタイムリカバリの実行については、<a class="xref" href="mysql-cluster.html#mysql-cluster-replication-pitr" title="23.6.9.2 NDB Cluster レプリケーションを使用したポイントインタイムリカバリ">セクション23.6.9.2「NDB Cluster レプリケーションを使用したポイントインタイムリカバリ」</a> を参照してください。
  </p><a class="indexterm" name="idm45563206517504"></a><a class="indexterm" name="idm45563206515232"></a><p><b>NDB API レプリカステータス変数. </b>
      NDB API カウンタは、レプリカクラスタで拡張モニタリング機能を提供できます。 これらのカウンタは、<code class="literal">SHOW STATUS</code> の出力に表示される NDB 統計<code class="literal">_slave</code> ステータス変数として、または NDB Cluster レプリケーションでレプリカとして機能している MySQL Server に接続されている <span class="command"><strong>mysql</strong></span> クライアントセッションのパフォーマンススキーマ <code class="literal">session_status</code> または <code class="literal">global_status</code> テーブルに対するクエリーの結果として実装されます。 レプリケートされた <code class="literal">NDB</code> テーブルに影響を与えるステートメントの実行前後にこれらのステータス変数の値を比較することで、NDB Cluster のレプリケーションをモニタリングまたはトラブルシューティングするときに役立つ可能性のある、NDB API レベルで実行された対応するアクションをレプリカで監視できます。<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-api-statistics" title="23.5.13 NDB API 統計のカウンタと変数">セクション23.5.13「NDB API 統計のカウンタと変数」</a> では、追加情報が提供されます。 
    </p><p><b>NDB テーブルから非 NDB テーブルへのレプリケーション. </b>
      レプリケーションソースとして機能する NDB Cluster から、複製 <span class="command"><strong>mysqld</strong></span> 上のほかの MySQL ストレージエンジン (<code class="literal">InnoDB</code> や <code class="literal">MyISAM</code> など) を使用してテーブルに <code class="literal">NDB</code> テーブルを複製できます。 これには多くの条件が適用されます。詳細については、<a class="xref" href="mysql-cluster.html#mysql-cluster-replication-ndb-to-non-ndb" title="NDB から別のストレージエンジンへのレプリケーション">NDB から別のストレージエンジンへのレプリケーション</a>および<a class="xref" href="mysql-cluster.html#mysql-cluster-replication-ndb-to-nontransactional" title="NDB から非トランザクションストレージエンジンへのレプリケーション">NDB から非トランザクションストレージエンジンへのレプリケーション</a>を参照してください。 
    </p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-cluster-replication-abbreviations"></a>23.6.1 NDB Cluster レプリケーション: 省略形と記号</h3></div></div></div><a class="indexterm" name="idm45563206495856"></a><p>
      このセクションでは、ソースクラスタとレプリカクラスタ、およびクラスタまたはクラスタノードで実行されるプロセスとコマンドを参照するために、次の省略形または記号を使用します:
    </p><div class="table"><a name="idm45563206493008"></a><p class="title"><b>表 23.67 このセクションでは、ソースクラスタとレプリカクラスタ、およびクラスタノードで実行されるプロセスとコマンドの略称を示します</b></p><div class="table-contents"><table><col style="width: 25%"><col style="width: 75%"><thead><tr>
          <th>記号または略語</th>
          <th>説明 (... を参照)</th>
        </tr></thead><tbody><tr>
          <td><em class="replaceable"><code>S</code></em></td>
          <td>(プライマリ) レプリケーションソースとして機能するクラスタ</td>
        </tr><tr>
          <td><em class="replaceable"><code>R</code></em></td>
          <td>(プライマリ) レプリカとして機能するクラスタ</td>
        </tr><tr>
          <td><code class="literal">shell<em class="replaceable"><code>S</code></em>&gt;</code></td>
          <td>ソースクラスタで発行されるシェルコマンド</td>
        </tr><tr>
          <td><code class="literal">mysql<em class="replaceable"><code>S</code></em>&gt;</code></td>
          <td>ソースクラスタで SQL ノードとして実行されている単一の MySQL サーバーで発行された MySQL クライアントコマンド</td>
        </tr><tr>
          <td><code class="literal">mysql<em class="replaceable"><code>S*</code></em>&gt;</code></td>
          <td>レプリケーションソースクラスタに参加しているすべての SQL ノードで発行される MySQL クライアントコマンド</td>
        </tr><tr>
          <td><code class="literal">shell<em class="replaceable"><code>R</code></em>&gt;</code></td>
          <td>レプリカクラスタで発行されるシェルコマンド</td>
        </tr><tr>
          <td><code class="literal">mysql<em class="replaceable"><code>R</code></em>&gt;</code></td>
          <td>レプリカクラスタで SQL ノードとして実行されている単一の MySQL サーバーで発行された MySQL クライアントコマンド</td>
        </tr><tr>
          <td><code class="literal">mysql<em class="replaceable"><code>R*</code></em>&gt;</code></td>
          <td>レプリカクラスタに参加しているすべての SQL ノードで発行される MySQL クライアントコマンド</td>
        </tr><tr>
          <td><em class="replaceable"><code>C</code></em></td>
          <td>プライマリレプリケーションチャネル</td>
        </tr><tr>
          <td><em class="replaceable"><code>C'</code></em></td>
          <td>セカンダリレプリケーションチャネル</td>
        </tr><tr>
          <td><em class="replaceable"><code>S'</code></em></td>
          <td>セカンダリレプリケーションソース</td>
        </tr><tr>
          <td><em class="replaceable"><code>R'</code></em></td>
          <td>セカンダリレプリカ</td>
        </tr></tbody></table></div></div><br class="table-break"></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-cluster-replication-general"></a>23.6.2 NDB Cluster レプリケーションの一般的な要件</h3></div></div></div><a class="indexterm" name="idm45563206453520"></a><a class="indexterm" name="idm45563206451344"></a><p>
      レプリケーションチャネルには、レプリケーションサーバーとして機能する 2 つの MySQL サーバーが必要です (それぞれがソースおよびレプリカ用です)。 たとえば、2 つのレプリケーションチャネルを持つレプリケーション設定の場合 (冗長性のための追加チャネルを提供するため)、合計 4 つのレプリケーションノードがクラスタごとに 2 つあります。 
    </p><p>
      このセクションで説明されている NDB Cluster のレプリケーションと、次のレプリケーションは行ベースレプリケーションに依存します。 これは、<a class="xref" href="mysql-cluster.html#mysql-cluster-replication-starting" title="23.6.6 NDB Cluster レプリケーションの開始 (シングルレプリケーションチャネル)">セクション23.6.6「NDB Cluster レプリケーションの開始 (シングルレプリケーションチャネル)」</a> で説明されているように、レプリケーションソースの MySQL サーバーが <code class="option">--binlog-format=ROW</code> または <code class="option">--binlog-format=MIXED</code> で実行されている必要があることを意味します。 行ベースのレプリケーションの一般的な情報は、<a class="xref" href="replication.html#replication-formats" title="17.2.1 レプリケーション形式">セクション17.2.1「レプリケーション形式」</a>を参照してください。 
    </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">重要</div><p>
        NDB Cluster レプリケーションを <code class="option">--binlog-format=STATEMENT</code> で使用しようとすると、ソースクラスタ上の <code class="literal">ndb_binlog_index</code> テーブルおよびレプリカクラスタ上の <code class="literal">ndb_apply_status</code> テーブルの <code class="literal">epoch</code> カラムが更新されないため、レプリケーションは正しく機能しません (<a class="xref" href="mysql-cluster.html#mysql-cluster-replication-schema" title="23.6.4 NDB Cluster レプリケーションスキーマおよびテーブル">セクション23.6.4「NDB Cluster レプリケーションスキーマおよびテーブル」</a> を参照)。 かわりに、レプリケーションソースとして機能する MySQL サーバー上の更新のみがレプリカに伝播され、ソースクラスタ内の他の SQL ノードからの更新はレプリケートされません。 
      </p><p>
        <code class="option">--binlog-format</code> オプションのデフォルト値は <code class="literal">MIXED</code> です。
      </p></div><p>
      いずれかのクラスタでレプリケーションに使用される各 MySQL サーバーは、いずれかのクラスタに参加しているすべての MySQL レプリケーションサーバー間で一意に識別される必要があります (ソースクラスタとレプリカクラスタの両方で同じ ID を共有するレプリケーションサーバーを持つことはできません)。 これは、<code class="option">--server-id=<em class="replaceable"><code>id</code></em></code> オプションを使用して各 SQL ノードを起動して、実行できます。ここで、<em class="replaceable"><code>id</code></em> は一意の整数です。 厳密には必要ありませんが、この説明では、すべての NDB Cluster バイナリが同じリリースバージョンであることを前提としています。 
    </p><p>
      MySQL レプリケーションでは通常、使用するレプリケーションプロトコルおよびサーバーがサポートする SQL 機能セットの両方のバージョンに関与する両方の MySQL サーバー (<span class="command"><strong>mysqld</strong></span> プロセス) に互換性がある必要があります (<a class="xref" href="replication.html#replication-compatibility" title="17.5.2 MySQL バージョン間のレプリケーション互換性">セクション17.5.2「MySQL バージョン間のレプリケーション互換性」</a>を参照してください)。 NDB Cluster と MySQL Server 8.0 ディストリビューションのバイナリの違いにより、NDB Cluster Replication には、両方の <span class="command"><strong>mysqld</strong></span> バイナリが NDB Cluster ディストリビューションからのものであるという追加要件があります。 <span class="command"><strong>mysqld</strong></span> サーバーに互換性があることを保証するもっとも簡単で簡単な方法は、すべてのソースおよびレプリカ <span class="command"><strong>mysqld</strong></span> バイナリに同じ NDB Cluster 配布を使用することです。 
    </p><p>
      レプリカサーバーまたはクラスタがソースクラスタのレプリケーション専用であり、他のデータが格納されていないことを前提としています。
    </p><a class="indexterm" name="idm45563206427984"></a><a class="indexterm" name="idm45563206425696"></a><p>
      レプリケートされるすべての <code class="literal">NDB</code> テーブルは、MySQL サーバーおよびクライアントを使用して作成する必要があります。 NDB API を使用して (たとえば、<code class="literal">Dictionary::createTable()</code> を使用して) 作成されたテーブルおよびその他のデータベースオブジェクトは、MySQL サーバーに表示されないため、レプリケートされません。 NDB API アプリケーションによる、MySQL サーバーを使用して作成された既存のテーブルへの更新はレプリケートできます。 
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
        ステートメントベースレプリケーションを使用して NDB Cluster をレプリケートできます。 ただし、この場合、次の制限が適用されます。 
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            ソースとして機能するクラスタ上のデータ行に対するすべての更新は、単一の MySQL サーバーに転送する必要があります。
          </p></li><li class="listitem"><p>
            複数の同時 MySQL レプリケーションプロセスを使用してクラスタを複製することはできません。
          </p></li><li class="listitem"><p>
            SQL レベルで行われた変更のみが複製されます。
          </p></li></ul></div><p>
        これらは、行ベースのレプリケーションと対照的に、ステートメントベースのレプリケーションのその他の制限事項に追加されます。2 つのレプリケーション形式の間の違いに関する詳細な情報については、<a class="xref" href="replication.html#replication-sbr-rbr" title="17.2.1.1 ステートメントベースおよび行ベースレプリケーションのメリットとデメリット">セクション17.2.1.1「ステートメントベースおよび行ベースレプリケーションのメリットとデメリット」</a>を参照してください。
      </p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-cluster-replication-issues"></a>23.6.3 NDB Cluster レプリケーションの既知の問題</h3></div></div></div><a class="indexterm" name="idm45563206412624"></a><p>
      このセクションでは、NDB Cluster でレプリケーションを使用するときの既知の問題について説明します。
    </p><p><b>ソースとレプリカ間の接続が失われました. </b>
        <a class="indexterm" name="idm45563206409056"></a>ソースクラスタの SQL ノードとレプリカクラスタの SQL ノード間、またはソース SQL ノードとソースクラスタのデータノード間で接続が失われる可能性があります。 後者の場合にこの発生は、物理的な接続が喪失した結果 (たとえば、ネットワークケーブルの破損など) だけではなく、データノードイベントのバッファーのオーバーフローによる可能性もあります。SQL ノードは、応答が遅すぎると、クラスタでドロップされる可能性があります (これは、<code class="literal">MaxBufferedEpochs</code> および <code class="literal">TimeBetweenEpochs</code> 構成パラメータを調整することで、ある程度まで制御が可能です)。 これが発生した場合は、<span class="emphasis"><em>ソース SQL ノードのバイナリログに記録されずに、ソースクラスタに新しいデータを挿入することも完全に可能です</em></span>。 このため、高可用性を保証するには、バックアップレプリケーションチャネルを維持し、プライマリチャネルを監視し、必要に応じてセカンダリレプリケーションチャネルにフェイルオーバーしてレプリカクラスタとソースの同期を保つことが非常に重要です。 NDB Cluster は、そのようなモニタリングを単独で実行するようには設計されていません。このためには、外部アプリケーションが必要です。 
      </p><p>
      <a class="indexterm" name="idm45563206401408"></a> <a class="indexterm" name="idm45563206399152"></a>ソース SQL ノードは、ソースクラスタへの接続または再接続時に <span class="quote">「<span class="quote">gap</span>」</span> イベントを発行します。 (ギャップイベントは一種の<span class="quote">「<span class="quote">インシデントイベント</span>」</span>であり、データベースの内容に影響を与えるが、一連の変更として容易に表現できないインシデントが発生したことを示します。 インシデントの例としては、サーバー障害、データベースの再同期化、一部のソフトウェア更新および一部のハードウェア変更があります。) レプリカは、レプリケーションログにギャップが発生すると、エラーメッセージとともに停止します。 このメッセージは <code class="literal">SHOW REPLICA | SLAVE STATUS</code> の出力で使用可能で、レプリケーションストリームに登録されたインシデントのために SQL スレッドが停止し、手動操作が必要であることを示します。 このような状況での対処の詳細については、<a class="xref" href="mysql-cluster.html#mysql-cluster-replication-failover" title="23.6.8 NDB Cluster レプリケーションによるフェイルオーバーの実装">セクション23.6.8「NDB Cluster レプリケーションによるフェイルオーバーの実装」</a>を参照してください。 
    </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">重要</div><p>
        NDB Cluster はレプリケーションステータスをモニターしたりフェイルオーバーを提供したりするように独自に設計されていないため、レプリケーションサーバーまたはクラスタの高可用性が要件である場合は、複数のレプリケーションラインを設定し、プライマリレプリケーションラインでソース <span class="command"><strong>mysqld</strong></span> をモニターして、必要に応じてセカンダリ行にフェイルオーバーするように準備する必要があります。 これは、手動や、場合によってはサードパーティーのアプリケーションによって行う必要があります。 この種のセットアップの実装に関する情報については、<a class="xref" href="mysql-cluster.html#mysql-cluster-replication-two-channels" title="23.6.7 NDB Cluster レプリケーションでの 2 つのレプリケーションチャネルの使用">セクション23.6.7「NDB Cluster レプリケーションでの 2 つのレプリケーションチャネルの使用」</a>および <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-failover" title="23.6.8 NDB Cluster レプリケーションによるフェイルオーバーの実装">セクション23.6.8「NDB Cluster レプリケーションによるフェイルオーバーの実装」</a>を参照してください。 
      </p><p>
        スタンドアロン MySQL サーバーから NDB Cluster にレプリケートする場合、通常は 1 つのチャネルで十分です。
      </p></div><p><b>循環レプリケーション. </b>
        次の例に示すように、<a class="indexterm" name="idm45563206386832"></a> <a class="indexterm" name="idm45563206384640"></a> <a class="indexterm" name="idm45563206382576"></a> NDB Cluster Replication は循環レプリケーションをサポートします。 レプリケーションの設定には、1、2、および 3 という番号が付けられた 3 つの NDB Cluster が含まれます。クラスタ 1 はクラスタ 2 のレプリケーションソースとして機能し、クラスタ 2 はクラスタ 3 のソースとして機能し、クラスタ 3 はクラスタ 1 のソースとして機能するため、円が完成します。 各 NDB Cluster には 2 つの SQL ノードがあり、SQL ノード A と B はクラスタ 1 に属し、SQL ノード C と D はクラスタ 2 に属し、SQL ノード E と F はクラスタ 3 に属します。 
      </p><p>
      これらのクラスタを使用する循環レプリケーションは、次の条件を満たすかぎり、サポートされます。
    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          すべてのソースクラスタとレプリカクラスタの SQL ノードが同じです。
        </p></li><li class="listitem"><p>
          ソースおよびレプリカとして機能するすべての SQL ノードは、<code class="literal">log_slave_updates</code> システム変数を有効にして起動されます。
        </p></li></ul></div><p>
      このタイプの循環レプリケーションのセットアップは、次の図に示すとおりです。
    </p><div class="figure"><a name="fig-mysql-cluster-circular-all-sources-replicas"></a><p class="title"><b>図 23.32 すべてのソースをレプリカとして使用する NDB Cluster 循環レプリケーション</b></p><div class="figure-contents"><div class="mediaobject"><img src="images/cluster-circular-replication-1.png" width="550" height="646" alt="一部のコンテンツは周囲のテキストで説明されています。 図は、それぞれ 2 つのノードを持つ 3 つのクラスタを示しています。 異なるクラスタ内の SQL ノードを接続する矢印は、すべてのソースがレプリカでもあることを示しています。"></div></div></div><br class="figure-break"><p>
      このシナリオでは、クラスタ 1 の SQL ノード A はクラスタ 2 の SQL ノード C に複製し、SQL ノード C はクラスタ 3 の SQL ノード E に複製し、SQL ノード E は SQL ノード A に複製します。 つまり、レプリケーション線 (ダイアグラムの曲線矢印で示される) は、ソースおよびレプリカとして使用されるすべての SQL ノードを直接接続します。 
    </p><p>
      次に示すように、すべてのソース SQL ノードがレプリカであるわけではない循環レプリケーションを設定することもできます:
    </p><div class="figure"><a name="fig-mysql-cluster-circular-not-all-sources-replicas"></a><p class="title"><b>図 23.33 すべてのソースがレプリカではない NDB Cluster 循環レプリケーション</b></p><div class="figure-contents"><div class="mediaobject"><img src="images/cluster-circular-replication-2.png" width="550" height="622" alt="一部のコンテンツは周囲のテキストで説明されています。 図は、それぞれ 2 つのノードを持つ 3 つのクラスタを示しています。 異なるクラスタ内の SQL ノードを接続する矢印は、すべてのソースがレプリカであるわけではないことを示しています。"></div></div></div><br class="figure-break"><p>
      この場合、各クラスタ内の異なる SQL ノードがソースおよびレプリカとして使用されます。 ただし、<code class="literal">log_slave_updates</code> システム変数を有効にして SQL ノードを起動しないでください。 NDB Cluster のこのタイプの循環レプリケーションスキームでは、レプリケーションの行 (図の曲線矢印で再度示されています) が不連続である可能性がありますが、まだ徹底的にテストされていないため、実験的とみなす必要があることに注意してください。 
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
        <code class="literal">NDB</code> ストレージエンジンは、NDB Cluster の循環レプリケーションを中断する重複キーおよびその他のエラーを抑制する<span class="firstterm">多重呼出し不変実行モード</span>を使用します。 これはグローバル <code class="literal">slave_exec_mode</code> システム変数を <code class="literal">IDEMPOTENT</code> に設定することと同等ですが、NDB Cluster レプリケーションでは必要ありません。NDB Cluster はこの変数を自動的に設定し、明示的に設定しようとする試みを無視するためです。 
      </p></div><p><b>NDB Cluster のレプリケーションと主キー. </b>
        <a class="indexterm" name="idm45563206349248"></a>ノードに障害が発生した場合でも、このような場合に重複行が挿入される可能性があるため、主キーのない <code class="literal">NDB</code> テーブルのレプリケーションでエラーが発生する可能性があります。 このため、レプリケートされるすべての <code class="literal">NDB</code> テーブルに明示的な主キーを設定することを強くお薦めします。 
      </p><p><b>NDB Cluster レプリケーションと一意キー. </b>
        <a class="indexterm" name="idm45563206343392"></a>古いバージョンの NDB Cluster では、<code class="literal">NDB</code> テーブルの一意キーカラムの値を更新する操作を複製すると、重複キーエラーが発生する可能性がありました。 <code class="literal">NDB</code> テーブル間のレプリケーションに関するこの問題は、すべてのテーブル行の更新が実行されるまで一意キーのチェックを保留することで解決されます。 
      </p><p>
      この方法で制約を保留することは、現在 <code class="literal">NDB</code> でのみサポートされています。 したがって、<code class="literal">NDB</code> から <code class="literal">InnoDB</code> や <code class="literal">MyISAM</code> などの別のストレージエンジンにレプリケートする場合、一意の鍵の更新はまだサポートされていません。 
    </p><p>
      一意キー更新の遅延チェックなしでレプリケートする場合に発生する問題は、次に示すように、<code class="literal">t</code> などの <code class="literal">NDB</code> テーブルを使用してソースで作成および移入され、遅延一意キー更新をサポートしないレプリカに転送されます:
    </p><pre class="programlisting">CREATE TABLE t (
    p INT PRIMARY KEY,
    c INT,
    UNIQUE KEY u (c)
)   ENGINE NDB;

INSERT INTO t
    VALUES (1,1), (2,2), (3,3), (4,4), (5,5);
</pre><p>
      影響を受ける行は <code class="literal">ORDER BY</code> オプションで決定された順序で処理されるため、<code class="literal">t</code> での次の <code class="literal">UPDATE</code> ステートメントはソースで、テーブル全体での実行で、成功します:
    </p><pre class="programlisting">UPDATE t SET c = c - 1 ORDER BY p;
</pre><p>
      テーブル全体ではなく一度に 1 つのパーティションに対して行の更新の順序が実行されるため、同じステートメントが複製キーエラーまたは他の制約違反で失敗します。
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
        各 <code class="literal">NDB</code> テーブルは、作成時に、キーで無条件にパーティション化されます。 詳細については、<a class="xref" href="partitioning.html#partitioning-key" title="24.2.5 KEY パーティショニング">セクション24.2.5「KEY パーティショニング」</a>を参照してください。 
      </p></div><p><b>GTID は未サポート. </b>
        グローバルトランザクション ID を使用するレプリケーションは、<code class="literal">NDB</code> ストレージエンジンと互換性がなく、サポートされていません。 GTID を有効にすると、NDB Cluster レプリケーションが失敗する可能性があります。 
      </p><p><b>マルチスレッド複製はサポートされていません. </b>
        NDB Cluster はマルチスレッドレプリカをサポートせず、<code class="literal">slave_parallel_workers</code>、<code class="literal">slave_checkpoint_group</code>、<code class="literal">slave_checkpoint_group</code> (または同等の <span class="command"><strong>mysqld</strong></span> 起動オプション) などの関連するシステム変数を設定しても効果はありません。
      </p><p>
      これは、レプリカが同じエポック内に書き込まれた場合、あるデータベースで発生しているトランザクションを別のデータベースで発生しているトランザクションから分離できない可能性があるためです。 また、<code class="literal">NDB</code> ストレージエンジンによって処理されるすべてのトランザクションには、少なくとも 2 つのデータベース (ターゲットデータベースと <code class="literal">mysql</code> システムデータベース) が含まれ、<code class="literal">mysql.ndb_apply_status</code> テーブルを更新するための要件が満たされます (<a class="xref" href="mysql-cluster.html#mysql-cluster-replication-schema" title="23.6.4 NDB Cluster レプリケーションスキーマおよびテーブル">セクション23.6.4「NDB Cluster レプリケーションスキーマおよびテーブル」</a> を参照)。 これにより、トランザクションが特定のデータベースに固有であるというマルチスレッドの要件が解消されます。 
    </p><p><b>--initial での再起動. </b>
        <a class="indexterm" name="idm45563206308592"></a> <code class="option">--initial</code> オプションを使用してクラスタを再起動すると、GCI 番号とエポック番号のシーケンスが <code class="literal">0</code> からやり直されます。 (これは通常 NDB Cluster に当てはまり、クラスタに関連するレプリケーションシナリオに限定されません。) この場合、レプリケーションに関与する MySQL サーバーは再起動されます。 この後、<code class="literal">RESET MASTER</code> ステートメントと <code class="literal">RESET REPLICA | SLAVE</code> ステートメントを使用して、無効な <code class="literal">ndb_binlog_index</code> テーブルと <code class="literal">ndb_apply_status</code> テーブルをそれぞれクリアする必要があります。 
      </p><p><a name="mysql-cluster-replication-ndb-to-non-ndb"></a><b>NDB から別のストレージエンジンへのレプリケーション. </b>
        ここに示す制限を考慮して、レプリカ上の別のストレージエンジンを使用して、ソース上の <code class="literal">NDB</code> テーブルをテーブルにレプリケートできます:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          マルチソースレプリケーションおよび循環レプリケーションはサポートされていません (これが機能するには、ソースとレプリカの両方のテーブルで <code class="literal">NDB</code> ストレージエンジンを使用する必要があります)。
        </p></li><li class="listitem"><p>
          レプリカ上のテーブルのバイナリロギングを実行しないストレージエンジンを使用するには、特別な処理が必要です。
        </p></li><li class="listitem"><p>
          レプリカ上のテーブルに非トランザクションストレージエンジンを使用するには、特別な処理も必要です。
        </p></li><li class="listitem"><p>
          ソース <span class="command"><strong>mysqld</strong></span> は、<code class="option">--ndb-log-update-as-write=0</code> または <code class="option">--ndb-log-update-as-write=OFF</code> で起動する必要があります。
        </p></li></ul></div><p>
      次のいくつかのパラグラフでは、ここで説明したそれぞれの問題の追加情報を示します。
    </p><p><b>NDB をほかのストレージエンジンにレプリケートする場合、複数のソースはサポートされません. </b>
        <code class="literal">NDB</code> から別のストレージエンジンへのレプリケーションの場合、2 つのデータベース間の関係は 1 対 1 である必要があります。 つまり、NDB Cluster とほかのストレージエンジンの間では双方向または循環レプリケーションはサポートされていません。 
      </p><p>
      また、<code class="literal">NDB</code> および別のストレージエンジン間で複製する場合、複数のレプリケーションチャネルを構成できません。 (NDB Cluster データベースは、複数の NDB Cluster データベースに同時に複製できます。) ソースで <code class="literal">NDB</code> テーブルが使用されている場合でも、すべての変更のバイナリログを複数の MySQL Server で保持できますが、レプリカでソースを変更 (フェイルオーバー) するには、レプリカで新しいソースとレプリケーションの関係を明示的に定義する必要があります。 
    </p><p><b>バイナリロギングを実行しないストレージエンジンへの「NDB の複製」テーブル. </b>
        <a class="indexterm" name="idm45563206281120"></a> NDB Cluster から、独自のバイナリロギングを処理しないストレージエンジンを使用するレプリカに複製しようとすると、レプリケーションプロセスはエラー<span class="errortext">「バイナリロギングができません ... 複数のエンジンが関与し、少なくとも 1 つのエンジンがセルフロギングであるため、ステートメントをアトミックに書き込めません」</span> (Error <span class="errorcode"> 1595 </span>) で中止されます。 次の方法のいずれかで、この問題を回避できます。 
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><b>レプリカのバイナリロギングをオフにします. </b>
            これを実現するには、<code class="literal">sql_log_bin = 0</code> を設定します。
          </p></li><li class="listitem"><p><b>mysql.ndb_apply_status テーブルに使用されるストレージエンジンを変更します. </b>
            このテーブルが独自のバイナリロギングを処理しないエンジンを使用することになるため、競合も解消できます。 これを行うには、レプリカで <code class="literal">ALTER TABLE mysql.ndb_apply_status ENGINE=MyISAM</code> などのステートメントを発行します。 レプリカで <code class="literal">NDB</code> 以外のストレージエンジンを使用する場合は、複数のレプリカの同期を維持する必要がないため、これを安全に行うことができます。 
          </p></li><li class="listitem"><p><b>レプリカの mysql.ndb_apply_status テーブルに対する変更を除外. </b>
            これを行うには、<code class="option">--replicate-ignore-table=mysql.ndb_apply_status</code> を使用してレプリカを起動します。 レプリケーションでほかのテーブルを無視する必要がある場合、代わりに適切な <code class="option">--replicate-wild-ignore-table</code> オプションを使用することをお勧めします。 
          </p></li></ul></div><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">重要</div><p>
        NDB Cluster 間でレプリケートする場合は、<code class="literal">mysql.ndb_apply_status</code> のレプリケーションまたはバイナリロギングを無効にしたり、このテーブルに使用されるストレージエンジンを変更したりしないでください。 詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-replication-issues-filtering" title="NDB Cluster 間のレプリケーションを使用したレプリケーションおよびバイナリログフィルタリング規則">NDB Cluster 間のレプリケーションを使用したレプリケーションおよびバイナリログフィルタリング規則</a>,を参照してください。 
      </p></div><p><a name="mysql-cluster-replication-ndb-to-nontransactional"></a><b>NDB から非トランザクションストレージエンジンへのレプリケーション. </b>
        <code class="literal">MyISAM</code> などの非トランザクションストレージエンジンに <code class="literal">NDB</code> から複製する場合、<code class="literal">INSERT ... ON DUPLICATE KEY UPDATE</code> ステートメントを複製するときに、不要な重複キーエラーが発生することがあります。 これらを抑制するには、<code class="option">--ndb-log-update-as-write=0</code> を使用します。これにより、更新は更新としてではなく書込みとして強制的に記録されます。 
      </p><p><a name="mysql-cluster-replication-issues-filtering"></a><b>NDB Cluster 間のレプリケーションを使用したレプリケーションおよびバイナリログフィルタリング規則. </b>
        レプリケートされるデータベースまたはテーブルのフィルタリングにオプション <code class="option">--replicate-do-*</code>, <code class="option">--replicate-ignore-*</code>, <code class="option">--binlog-do-db</code> または <code class="option">--binlog-ignore-db</code> を使用している場合は、NDB Cluster 間のレプリケーションが正しく動作するために必要な <code class="literal">mysql.ndb_apply_status</code> のレプリケーションまたはバイナリロギングをブロックしないように注意する必要があります。 特に、次の点に留意しておく必要があります。 
      </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
          <code class="option">--replicate-do-db=<em class="replaceable"><code>db_name</code></em></code> を使用すると (およびほかの <code class="option">--replicate-do-*</code> または <code class="option">--replicate-ignore-*</code> オプションを使用しない)、データベース <em class="replaceable"><code>db_name</code></em> にあるテーブル<span class="emphasis"><em>だけ</em></span>が複製されます。 この場合は、<code class="option">--replicate-do-db=mysql</code>、<code class="option">--binlog-do-db=mysql</code> または <code class="option">--replicate-do-table=mysql.ndb_apply_status</code> を使用して、<code class="literal">mysql.ndb_apply_status</code> がレプリカに移入されていることも確認する必要があります。 
        </p><p>
          <code class="option">--binlog-do-db=<em class="replaceable"><code>db_name</code></em></code> を使用すると (およびほかの <code class="option">--binlog-do-db</code> オプションを使用しない)、データベース <em class="replaceable"><code>db_name</code></em> にあるテーブルへの変更<span class="emphasis"><em>のみ</em></span>がバイナリログに書き込まれます。 この場合は、<code class="option">--replicate-do-db=mysql</code>、<code class="option">--binlog-do-db=mysql</code> または <code class="option">--replicate-do-table=mysql.ndb_apply_status</code> を使用して、<code class="literal">mysql.ndb_apply_status</code> がレプリカに移入されていることも確認する必要があります。 
        </p></li><li class="listitem"><p>
          <code class="option">--replicate-ignore-db=mysql</code> を使用すると、<code class="literal">mysql</code> データベースにあるテーブルは複製されません。 この場合、<code class="option">--replicate-do-table=mysql.ndb_apply_status</code> も使用して、確実に <code class="literal">mysql.ndb_apply_status</code> を複製する必要があります。 
        </p><p>
          <code class="option">--binlog-ignore-db=mysql</code> を使用すると、<code class="literal">mysql</code> データベースにあるテーブルへの変更はバイナリログに書き込まれません。 この場合、<code class="option">--replicate-do-table=mysql.ndb_apply_status</code> も使用して、確実に <code class="literal">mysql.ndb_apply_status</code> を複製する必要があります。 
        </p></li></ol></div><p>
      各レプリケーションルールには次のことも必要になります。
    </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
          独自の <code class="option">--replicate-do-*</code> または <code class="option">--replicate-ignore-*</code> オプション。複数のルールはレプリケーションの 1 つのフィルタリングオプションで表現できません。 これらのルールについての情報は、<a class="xref" href="replication.html#replication-options" title="17.1.6 レプリケーションおよびバイナリロギングのオプションと変数">セクション17.1.6「レプリケーションおよびバイナリロギングのオプションと変数」</a>を参照してください。 
        </p></li><li class="listitem"><p>
          独自の <code class="option">--binlog-do-db</code> または <code class="option">--binlog-ignore-db</code> オプション。複数のルールはバイナリログの 1 つのフィルタリングオプションで表現できません。 これらのルールについての情報は、<a class="xref" href="server-administration.html#binary-log" title="5.4.4 バイナリログ">セクション5.4.4「バイナリログ」</a>を参照してください。 
        </p></li></ol></div><p>
      NDB Cluster を、<code class="literal">NDB</code> 以外のストレージエンジンを使用するレプリカにレプリケートする場合は、このセクションのほかの場所で説明されているように、以前に指定した考慮事項が適用されないことがあります。
    </p><p><a name="mysql-cluster-replication-ipv6"></a><b>NDB Cluster レプリケーションと IPv6. </b>
        NDB 8.0.22 以降では、すべてのタイプの NDB Cluster ノードが IPv6 をサポートします。これには、管理ノード、データノード、および API または SQL ノードが含まれます。
      </p><p>
      NDB 8.0.22 より前では、NDB API および MGM API (およびデータノードと管理ノード) は IPv6 をサポートしていませんが、NDB Cluster 内で SQL ノードとして機能する MySQL Servers-including は IPv6 を使用してほかの MySQL Servers に接続できます。 8.0.22 より前のバージョンの NDB Cluster では、次の図の点線矢印で示されているように、IPv6 を使用してソースおよびレプリカとして機能する SQL ノードを接続し、クラスタ間で複製できます: 
    </p><div class="figure"><a name="fig-mysql-cluster-replication-ipv6"></a><p class="title"><b>図 23.34 IPv6 を使用して接続された SQL ノード間のレプリケーション</b></p><div class="figure-contents"><div class="mediaobject"><img src="images/cluster-replication-ipv6.png" width="625" height="400" alt="ほとんどのコンテンツは周囲のテキストで説明されています。 MySQL-to-MySQL IPv6 接続を表す点線は、ソースクラスタとレプリカクラスタのそれぞれのノード間にあります。 データノードからデータノードへの接続やデータノードから管理ノードへの接続など、クラスタ内のすべての接続は、IPv4 接続のみを示す実線で接続されます。"></div></div></div><br class="figure-break"><p>
      NDB 8.0.22 より前は、<span class="emphasis"><em>範囲内</em></span>を起点とするすべての接続で、前の図で実線矢印で示されている NDB Cluster が IPv4 を使用する必要があります。 つまり、NDB Cluster データノード、管理サーバー、および管理クライアントはすべて、IPv4 を使用して相互にアクセスできる必要があります。 また、SQL ノードは IPv4 を使用してクラスタと通信する必要があります。 NDB 8.0.22 以降では、これらの制限は適用されなくなりました。また、NDB および MGM API を使用して記述されたアプリケーションは、IPv6 のみの環境を想定して記述および配備できます。 
    </p><p><b>属性の昇格と降格. </b>
        NDB Cluster レプリケーションには、属性の昇格と降格のサポートが含まれます。 後者の実装では、不可逆型変換と非不可逆型変換が区別され、レプリカでのそれらの使用は、<code class="literal">slave_type_conversions</code> グローバルサーバーシステム変数を設定することで制御できます。 
      </p><p>
      NDB Cluster での属性の昇格および降格の詳細は、<a class="xref" href="replication.html#replication-features-attribute-promotion" title="行ベースレプリケーション: 属性の昇格と降格">行ベースレプリケーション: 属性の昇格と降格</a> を参照してください。
    </p><p>
      <code class="literal">NDB</code> は、<code class="literal">InnoDB</code> や <code class="literal">MyISAM</code> とは異なり、仮想カラムへの変更をバイナリログに書き込みませんが、NDB Cluster レプリケーションまたは <code class="literal">NDB</code> とほかのストレージエンジン間のレプリケーションに悪影響はありません。 格納された生成カラムに対する変更がログに記録されます。 
    </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-cluster-replication-schema"></a>23.6.4 NDB Cluster レプリケーションスキーマおよびテーブル</h3></div></div></div><a class="indexterm" name="idm45563206194672"></a><a class="indexterm" name="idm45563206192448"></a><a class="indexterm" name="idm45563206190560"></a><a class="indexterm" name="idm45563206188624"></a><a class="indexterm" name="idm45563206186720"></a><a class="indexterm" name="idm45563206184720"></a><a class="indexterm" name="idm45563206182784"></a><a class="indexterm" name="idm45563206180896"></a><a class="indexterm" name="idm45563206178768"></a><p>
      NDB Cluster 内のレプリケーションでは、レプリケートされるクラスタとレプリカの両方で SQL ノードとして機能する各 MySQL Server インスタンス上の <code class="literal">mysql</code> データベース内の多数の専用テーブルが使用されます。 これは、レプリカが単一サーバーであるかクラスタであるかに関係なく当てはまります。 これらのテーブルは、MySQL のインストールプロセス中に作成され、バイナリログのインデックス作成データを格納するためのテーブルを含みます。 <code class="literal">ndb_binlog_index</code> テーブルは各 MySQL サーバーに対してローカルであり、クラスタ化には関与しないため、<code class="literal">InnoDB</code> ストレージエンジンを使用します。 つまり、ソースクラスタに参加している各 <span class="command"><strong>mysqld</strong></span> に個別に作成する必要があります。 (バイナリログ自体には、レプリケートされるクラスタ内のすべての MySQL サーバーからの更新が含まれます。) このテーブルは次のように定義されます。 
    </p><pre class="programlisting">CREATE TABLE `ndb_binlog_index` (
    `Position` BIGINT(20) UNSIGNED NOT NULL,
    `File` VARCHAR(255) NOT NULL,
    `epoch` BIGINT(20) UNSIGNED NOT NULL,
    `inserts` INT(10) UNSIGNED NOT NULL,
    `updates` INT(10) UNSIGNED NOT NULL,
    `deletes` INT(10) UNSIGNED NOT NULL,
    `schemaops` INT(10) UNSIGNED NOT NULL,
    `orig_server_id` INT(10) UNSIGNED NOT NULL,
    `orig_epoch` BIGINT(20) UNSIGNED NOT NULL,
    `gci` INT(10) UNSIGNED NOT NULL,
    `next_position` bigint(20) unsigned NOT NULL,
    `next_file` varchar(255) NOT NULL,
    PRIMARY KEY (`epoch`,`orig_server_id`,`orig_epoch`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;
</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
        古いリリース (NDB 7.5.2 より前) からアップグレードする場合は、MySQL のアップグレード手順を実行して、システムテーブルがアップグレードされていることを確認します。 (MySQL 8.0.16 の時点で、<code class="option">--upgrade=FORCE</code> オプションを使用してサーバーを起動します。 MySQL 8.0.16 より前は、サーバーの起動後に <code class="option">--force</code> および <code class="option">--upgrade-system-tables</code> オプションを指定して <span class="command"><strong>mysql_upgrade</strong></span> を起動してください。) システムテーブルのアップグレードにより、このテーブルに対して <code class="literal">ALTER TABLE ... ENGINE=INNODB</code> ステートメントが実行されます。 このテーブルに対する <code class="literal">MyISAM</code> ストレージエンジンの使用は、下位互換性のために引き続きサポートされています。 
      </p><p>
        <code class="literal">ndb_binlog_index</code> では、<code class="literal">InnoDB</code> への変換後に追加のディスク領域が必要になる場合があります。 これが問題になった場合は、このテーブルの <code class="literal">InnoDB</code> テーブルスペースを使用するか、<code class="literal">ROW_FORMAT</code> を <code class="literal">COMPRESSED</code> に変更するか、またはその両方を行うことで、領域を節約できます。 詳細は、<a class="xref" href="sql-statements.html#create-tablespace" title="13.1.21 CREATE TABLESPACE ステートメント">セクション13.1.21「CREATE TABLESPACE ステートメント」</a>、<a class="xref" href="sql-statements.html#create-table" title="13.1.20 CREATE TABLE ステートメント">セクション13.1.20「CREATE TABLE ステートメント」</a> および <a class="xref" href="innodb-storage-engine.html#innodb-tablespace" title="15.6.3 テーブルスペース">セクション15.6.3「テーブルスペース」</a> を参照してください。 
      </p></div><p>
      <code class="literal">ndb_binlog_index</code> テーブルのサイズは、バイナリログファイルごとのエポックの数とバイナリログファイルの数によって異なります。 一般的に、バイナリログファイル当たりのエポック数は、エポックごとに作成されるバイナリログの量とバイナリログファイルのサイズに依存し、エポックが小さくなるとファイル当たりのエポックが増えます。 <code class="option">--ndb-log-empty-epochs</code> オプションが <code class="literal">OFF</code> の場合でも、空のエポックによって <code class="filename">ndb_binlog_index</code> テーブルへの挿入が生成されることに注意してください。つまり、ファイル当たりのエントリ数は、ファイルが使用されている時間の長さによって異なります。この関係は、次の式で表すことができます: 
    </p><pre class="programlisting">[number of epochs per file] = [time spent per file] / <code class="literal">TimeBetweenEpochs</code>
</pre><p>
      ビジー状態の NDB Cluster はバイナリログに定期的に書き込み、おそらく静かなバイナリログファイルよりも速くバイナリログファイルをローテーションします。 つまり、<code class="option">--ndb-log-empty-epochs=ON</code> を使用した <span class="quote">「<span class="quote">quiet</span>」</span> NDB Cluster は、実際には、多数のアクティビティーを持つものよりも、ファイルあたりの <code class="literal">ndb_binlog_index</code> 行数が多くなる可能性があります。 
    </p><p>
      <code class="option">--ndb-log-orig</code> オプションを指定して <span class="command"><strong>mysqld</strong></span> を起動すると、<code class="literal">orig_server_id</code> および <code class="literal">orig_epoch</code> カラムにはそれぞれ、イベントが発生したサーバーの ID と、元のサーバーでイベントが発生したエポックが格納されます。これは、複数のソースを使用する NDB Cluster レプリケーション設定で役立ちます。 マルチソース設定 (<a class="xref" href="mysql-cluster.html#mysql-cluster-replication-multi-source" title="23.6.10 NDB Cluster レプリケーション: 双方向および循環レプリケーション">セクション23.6.10「NDB Cluster レプリケーション: 双方向および循環レプリケーション」</a> を参照) でレプリカに適用されたエポックに最も近いバイナリログ位置を見つけるために使用される <code class="literal">SELECT</code> ステートメントでは、インデックス付けされていないこれらの 2 つのカラムが使用されます。 特にソースが <code class="option">--ndb-log-empty-epochs=ON</code> で実行されている場合、クエリーでテーブルスキャンを実行する必要があるため、フェイルオーバーを試行するとパフォーマンスの問題が発生する可能性があります。 マルチソースのフェイルオーバー時間を改善するには、次に示すように、これらのカラムにインデックスを追加します: 
    </p><pre class="programlisting">ALTER TABLE mysql.ndb_binlog_index
    ADD INDEX orig_lookup USING BTREE (orig_server_id, orig_epoch);
</pre><p>
      このような場合、バイナリログの位置を取得するために使用されるクエリーは <code class="literal">orig_server_id</code> または <code class="literal">orig_epoch</code> を使用しないため、単一のソースから単一のレプリカにレプリケートするときにこのインデックスを追加しても利点はありません。
    </p><p>
      <code class="literal">next_position</code> および <code class="literal">next_file</code> カラムの使用についての詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-replication-failover" title="23.6.8 NDB Cluster レプリケーションによるフェイルオーバーの実装">セクション23.6.8「NDB Cluster レプリケーションによるフェイルオーバーの実装」</a>を参照してください。
    </p><p>
      次の図は、NDB Cluster レプリケーションソースサーバー、バイナリログインジェクタスレッド、および <code class="literal">mysql.ndb_binlog_index</code> テーブルの関係を示しています。
    </p><div class="figure"><a name="fig-mysql-cluster-replication-source-cluster"></a><p class="title"><b>図 23.35 レプリケーションソースクラスタ</b></p><div class="figure-contents"><div class="mediaobject"><img src="images/cluster-replication-binlog-injector.png" width="640" height="481" alt="ほとんどの概念は周囲のテキストで説明されています。 この複合イメージには、主に 3 つの領域があります。 上部の領域は 3 つのセクションに分かれています: MySQL Server (mysqld)、NDBCLUSTER テーブルハンドラ、および mutex。 接続スレッドはこれらを接続し、レシーバスレッドとインジェクタスレッドは NDBCLUSTER テーブルハンドラと mutex を接続します。 下部の領域には、4 つのデータノード (ndbd) が表示されます。 これらはすべて、受信側スレッドを指す矢印で表されるイベントを生成し、受信側スレッドも接続スレッドおよびインジェクタスレッドを指します。 1 つのノードが mutex 領域に対して送受信を行います。 インジェクタスレッドを表す矢印は、周囲のテキストで説明されているバイナリログおよび ndb_binlog_index テーブルを指します。"></div></div></div><br class="figure-break"><a class="indexterm" name="idm45563206124400"></a><a class="indexterm" name="idm45563206122288"></a><p>
      <code class="literal">ndb_apply_status</code> という名前の追加のテーブルを使用して、ソースからレプリカにレプリケートされた操作のレコードを保持します。 <code class="literal">ndb_binlog_index</code> の場合とは異なり、このテーブルのデータは (レプリカ) クラスタ内のいずれの SQL ノードにも固有ではないため、<code class="literal">ndb_apply_status</code> では次に示すように <code class="literal">NDBCLUSTER</code> ストレージエンジンを使用できます: 
    </p><pre class="programlisting">CREATE TABLE `ndb_apply_status` (
    `server_id`   INT(10) UNSIGNED NOT NULL,
    `epoch`       BIGINT(20) UNSIGNED NOT NULL,
    `log_name`    VARCHAR(255) CHARACTER SET latin1 COLLATE latin1_bin NOT NULL,
    `start_pos`   BIGINT(20) UNSIGNED NOT NULL,
    `end_pos`     BIGINT(20) UNSIGNED NOT NULL,
    PRIMARY KEY (`server_id`) USING HASH
) ENGINE=NDBCLUSTER   DEFAULT CHARSET=latin1;
</pre><p>
      <code class="literal">ndb_apply_status</code> テーブルはレプリカにのみ移入されるため、ソースではこのテーブルに行が含まれることはありません。したがって、そこで <code class="literal">DataMemory</code> を <code class="literal">ndb_apply_status</code> に割り当てる必要はありません。
    </p><p>
      このテーブルはソース上で生成されたデータから移入されるため、レプリケートを許可するようにしてください。誤ってレプリカが <code class="literal">ndb_apply_status</code> を更新できないようにしたり、ソースがバイナリログに書き込まれないようにしたりするレプリケーションフィルタリングまたはバイナリログフィルタリングの規則によって、クラスタ間のレプリケーションが正しく動作しなくなる可能性があります。 このようなフィルタリングルールに起因する潜在的な問題の詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-replication-issues-filtering" title="NDB Cluster 間のレプリケーションを使用したレプリケーションおよびバイナリログフィルタリング規則">NDB Cluster 間のレプリケーションを使用したレプリケーションおよびバイナリログフィルタリング規則</a>を参照してください。 
    </p><a class="indexterm" name="idm45563206109088"></a><p>
      <code class="literal">ndb_binlog_index</code> と <code class="literal">ndb_apply_status</code> のテーブルは、ユーザーによって明示的に複製されることはないため、<code class="literal">mysql</code> データベースに作成されます。 これらのテーブルはどちらも <code class="literal">NDB</code> バイナリログ (binlog) インジェクタスレッドによって保守されるため、通常、どちらのテーブルの作成または保守にもユーザーの介入は必要ありません。 これにより、ソース <span class="command"><strong>mysqld</strong></span> プロセスが <code class="literal">NDB</code> ストレージエンジンによって実行された変更に更新されたままになります。 <code class="literal">NDB</code> <span class="firstterm">binlog インジェクタスレッド</span>は <code class="literal">NDB</code> ストレージエンジンから直接イベントを受け取ります。 <code class="literal">NDB</code> インジェクタは、クラスタ内のすべてのデータイベントを取得する役割を担い、データを変更、挿入、または削除するすべてのイベントが <code class="literal">ndb_binlog_index</code> テーブルに記録されたかを確認します。 レプリカ I/O スレッドは、ソースバイナリログからレプリカリレーログにイベントを転送します。 
    </p><p>
      <code class="literal">ndb_binlog_index</code> および <code class="literal">ndb_apply_status</code> は自動的に作成および保守されますが、NDB Cluster をレプリケーション用に準備する最初の手順として、これらのテーブルの存在と整合性をチェックすることをお勧めします。 バイナリログに記録されたイベントデータを表示するには、ソースで <code class="literal">mysql.ndb_binlog_index</code> テーブルを直接クエリーします。 これは、ソースまたはレプリカ SQL ノードのいずれかで <code class="literal">SHOW BINLOG EVENTS</code> ステートメントを使用して実行することもできます。 (<a class="xref" href="sql-statements.html#show-binlog-events" title="13.7.7.2 SHOW BINLOG EVENTS ステートメント">セクション13.7.7.2「SHOW BINLOG EVENTS ステートメント」</a>を参照してください。) 
    </p><p>
      <code class="literal">SHOW ENGINE NDB STATUS</code> の出力から有効な情報を取得することもできます。
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
        <code class="literal">NDB</code> テーブルでスキーマの変更を行う場合、アプリケーションは <code class="literal">ALTER TABLE</code> ステートメントを発行した MySQL クライアント接続でこのステートメントが戻るまで待ってから、更新されたテーブル定義の使用を試みます。
      </p></div><p>
      <code class="literal">ndb_apply_status</code> テーブルがレプリカに存在しない場合は、<span class="command"><strong>ndb_restore</strong></span> によって再作成されます。
    </p><p>
      NDB Cluster レプリケーションの競合解決には、追加の <code class="literal">mysql.ndb_replication</code> テーブルが存在する必要があります。 現在、このテーブルは手動で作成する必要があります。 これを行う方法については、<a class="xref" href="mysql-cluster.html#mysql-cluster-replication-conflict-resolution" title="23.6.11 NDB Cluster レプリケーションの競合解決">セクション23.6.11「NDB Cluster レプリケーションの競合解決」</a>を参照してください。 
    </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-cluster-replication-preparation"></a>23.6.5 NDB Cluster のレプリケーションの準備</h3></div></div></div><a class="indexterm" name="idm45563206080576"></a><a class="indexterm" name="idm45563206078400"></a><p>
      NDB Cluster のレプリケーションの準備には、次の手順が含まれます:
    </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
          すべての MySQL サーバーに対してバージョンの互換性を確認します (<a class="xref" href="mysql-cluster.html#mysql-cluster-replication-general" title="23.6.2 NDB Cluster レプリケーションの一般的な要件">セクション23.6.2「NDB Cluster レプリケーションの一般的な要件」</a>を参照してください)。
        </p></li><li class="listitem"><p>
          次の 2 つの SQL ステートメントを使用して、適切な権限でソースクラスタにレプリケーションアカウントを作成します:
        </p><pre class="programlisting">mysql<em class="replaceable"><code>S</code></em>&gt; <strong class="userinput"><code>CREATE USER '<em class="replaceable"><code>replica_user</code></em>'@'<em class="replaceable"><code>replica_host</code></em>'</code></strong>
     -&gt; <strong class="userinput"><code>IDENTIFIED BY '<em class="replaceable"><code>replica_password</code></em>';</code></strong>

mysql<em class="replaceable"><code>S</code></em>&gt; <strong class="userinput"><code>GRANT REPLICATION SLAVE ON *.*</code></strong>
     -&gt; <strong class="userinput"><code>TO '<em class="replaceable"><code>replica_user</code></em>'@'<em class="replaceable"><code>replica_host</code></em>';</code></strong>
</pre><p>
          前述のステートメントで、<em class="replaceable"><code>replica_user</code></em> はレプリケーションアカウントユーザー名、<em class="replaceable"><code>replica_host</code></em> はレプリカのホスト名または IP アドレス、<em class="replaceable"><code>replica_password</code></em> はこのアカウントに割り当てるパスワードです。
        </p><p>
          たとえば、<code class="literal">myreplica</code> という名前のレプリカユーザーアカウントを作成し、<code class="literal">replica-host</code> という名前のホストからログインし、パスワード <code class="literal">53cr37</code> を使用するには、次の <code class="literal">CREATE USER</code> および <code class="literal">GRANT</code> ステートメントを使用します:
        </p><pre class="programlisting">mysql<em class="replaceable"><code>S</code></em>&gt; <strong class="userinput"><code>CREATE USER 'myreplica'@'replica-host'</code></strong>
     -&gt; <strong class="userinput"><code>IDENTIFIED BY '53cr37';</code></strong>

mysql<em class="replaceable"><code>S</code></em>&gt; <strong class="userinput"><code>GRANT REPLICATION SLAVE ON *.*</code></strong>
     -&gt; <strong class="userinput"><code>TO 'myreplica'@'replica-host';</code></strong>
</pre><p>
          セキュリティ上の理由から、レプリケーションアカウントには、他の目的には使用されない一意のユーザーアカウントを使用することをお薦めします。
        </p></li><li class="listitem"><p>
          <a class="indexterm" name="idm45563206052288"></a> <a class="indexterm" name="idm45563206050128"></a>ソースを使用するようにレプリカを設定します。 これは、<span class="command"><strong>mysql</strong></span> クライアントを使用して、<code class="literal">CHANGE REPLICATION SOURCE TO</code> ステートメント (MySQL 8.0.23 の場合) または <code class="literal">CHANGE MASTER TO</code> ステートメント (MySQL 8.0.23 の場合) で実行できます: 
        </p><pre class="programlisting">mysql<em class="replaceable"><code>R</code></em>&gt; <strong class="userinput"><code>CHANGE MASTER TO</code></strong>
     -&gt; <strong class="userinput"><code>MASTER_HOST='<em class="replaceable"><code>source_host</code></em>',</code></strong>
     -&gt; <strong class="userinput"><code>MASTER_PORT=<em class="replaceable"><code>source_port</code></em>,</code></strong>
     -&gt; <strong class="userinput"><code>MASTER_USER='<em class="replaceable"><code>replica_user</code></em>',</code></strong>
     -&gt; <strong class="userinput"><code>MASTER_PASSWORD='<em class="replaceable"><code>replica_password</code></em>';</code></strong>

Or from MySQL 8.0.23:
mysql<em class="replaceable"><code>R</code></em>&gt; <strong class="userinput"><code>CHANGE REPLICATION SOURCE TO</code></strong>
     -&gt; <strong class="userinput"><code>SOURCE_HOST='<em class="replaceable"><code>source_host</code></em>',</code></strong>
     -&gt; <strong class="userinput"><code>SOURCE_PORT=<em class="replaceable"><code>source_port</code></em>,</code></strong>
     -&gt; <strong class="userinput"><code>SOURCE_USER='<em class="replaceable"><code>replica_user</code></em>',</code></strong>
     -&gt; <strong class="userinput"><code>SOURCE_PASSWORD='<em class="replaceable"><code>replica_password</code></em>';</code></strong>
</pre><p>
          前述のステートメントで、<em class="replaceable"><code>source_host</code></em> はレプリケーションソースのホスト名または IP アドレス、<em class="replaceable"><code>source_port</code></em> はソースへの接続時に使用するレプリカのポート、<em class="replaceable"><code>replica_user</code></em> はソースのレプリカに設定されたユーザー名、<em class="replaceable"><code>replica_password</code></em> は前のステップでそのユーザーアカウントに設定されたパスワードです。
        </p><p>
          たとえば、前のステップで作成したレプリケーションアカウントでホスト名が <code class="literal">rep-source</code> の MySQL サーバーを使用するようレプリカに指示するには、次のステートメントを使用します:
        </p><pre class="programlisting">mysql<em class="replaceable"><code>R</code></em>&gt; <strong class="userinput"><code>CHANGE MASTER TO</code></strong>
     -&gt; <strong class="userinput"><code>MASTER_HOST='rep-source',</code></strong>
     -&gt; <strong class="userinput"><code>MASTER_PORT=3306,</code></strong>
     -&gt; <strong class="userinput"><code>MASTER_USER='myreplica',</code></strong>
     -&gt; <strong class="userinput"><code>MASTER_PASSWORD='53cr37';</code></strong>

Or from MySQL 8.0.23:
mysql<em class="replaceable"><code>R</code></em>&gt; <strong class="userinput"><code>CHANGE REPLICATION SOURCE TO</code></strong>
     -&gt; <strong class="userinput"><code>SOURCE_HOST='rep-source',</code></strong>
     -&gt; <strong class="userinput"><code>SOURCE_PORT=3306,</code></strong>
     -&gt; <strong class="userinput"><code>SOURCE_USER='myreplica',</code></strong>
     -&gt; <strong class="userinput"><code>SOURCE_PASSWORD='53cr37';</code></strong>
</pre><p>
          このステートメントで使用できるオプションの完全なリストについては、<a class="xref" href="sql-statements.html#change-master-to" title="13.4.2.1 CHANGE MASTER TO ステートメント">セクション13.4.2.1「CHANGE MASTER TO ステートメント」</a>を参照してください。
        </p><p>
          レプリケーションバックアップ機能を提供するには、レプリケーションプロセスを開始する前に、レプリカ <code class="filename">my.cnf</code> ファイルに <code class="option">--ndb-connectstring</code> オプションを追加する必要もあります。 詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-replication-backups" title="23.6.9 NDB Cluster レプリケーションによる NDB Cluster バックアップ">セクション23.6.9「NDB Cluster レプリケーションによる NDB Cluster バックアップ」</a>,を参照してください。 
        </p><p>
          レプリカ用に <code class="filename">my.cnf</code> で設定できるその他のオプションについては、<a class="xref" href="replication.html#replication-options" title="17.1.6 レプリケーションおよびバイナリロギングのオプションと変数">セクション17.1.6「レプリケーションおよびバイナリロギングのオプションと変数」</a> を参照してください。
        </p></li><li class="listitem"><p>
          ソースクラスタがすでに使用されている場合は、ソースのバックアップを作成してレプリカにロードし、レプリカがソースと同期するのに必要な時間を短縮できます。 レプリカで NDB Cluster も実行されている場合は、<a class="xref" href="mysql-cluster.html#mysql-cluster-replication-backups" title="23.6.9 NDB Cluster レプリケーションによる NDB Cluster バックアップ">セクション23.6.9「NDB Cluster レプリケーションによる NDB Cluster バックアップ」</a> で説明されているバックアップおよび復元手順を使用してこれを実行できます。 
        </p><pre class="programlisting">ndb-connectstring=<em class="replaceable"><code>management_host</code></em>[:<em class="replaceable"><code>port</code></em>]
</pre><p>
          レプリカで NDB Cluster を使用していない場合は、ソースで次のコマンドを使用してバックアップを作成できます:
        </p><pre class="programlisting">shell<em class="replaceable"><code>S</code></em>&gt; <strong class="userinput"><code>mysqldump --master-data=1</code></strong>
</pre><p>
          次に、ダンプファイルをレプリカにコピーして、結果のデータダンプをレプリカにインポートします。 この後、次に示すように、<span class="command"><strong>mysql</strong></span> クライアントを使用してダンプファイルからレプリカデータベースにデータをインポートできます。ここで、<em class="replaceable"><code>dump_file</code></em> はソースで <span class="command"><strong>mysqldump</strong></span> を使用して生成されたファイルの名前、<em class="replaceable"><code>db_name</code></em> はレプリケートされるデータベースの名前です: 
        </p><pre class="programlisting">shell<em class="replaceable"><code>R</code></em>&gt; <strong class="userinput"><code>mysql -u root -p <em class="replaceable"><code>db_name</code></em> &lt; <em class="replaceable"><code>dump_file</code></em></code></strong>
</pre><p>
          <span class="command"><strong>mysqldump</strong></span> で使用するオプションの完全なリストは、<a class="xref" href="programs.html#mysqldump" title="4.5.4 mysqldump — データベースバックアッププログラム">セクション4.5.4「mysqldump — データベースバックアッププログラム」</a>を参照してください。
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
            この方法でレプリカにデータをコピーする場合は、コマンドラインで <code class="option">--skip-slave-start</code> オプションを使用してレプリカが起動されていることを確認するか、レプリカ <code class="filename">my.cnf</code> ファイルに <code class="literal">skip-slave-start</code> を含めて、すべてのデータがロードされる前にソースへの接続を試行してレプリケートを開始しないようにする必要があります。 データのロードが完了したら、次の 2 つのセクションで説明する追加ステップに従います。 
          </p></div></li><li class="listitem"><p>
          レプリケーションソースとして機能する各 MySQL サーバーに一意のサーバー ID が割り当てられ、行ベースの形式を使用してバイナリロギングが有効になっていることを確認します。 (<a class="xref" href="replication.html#replication-formats" title="17.2.1 レプリケーション形式">セクション17.2.1「レプリケーション形式」</a>を参照してください。) また、<code class="literal">slave_allow_batching</code> システム変数を有効にし、場合によっては <code class="option">--ndb-batch-size</code> および <code class="option">--ndb-blob-write-batch-bytes</code> オプションで使用される値も増やすことをお薦めします。 これらのオプションはすべて、ソースサーバーの <code class="filename">my.cnf</code> ファイルで設定することも、ソース <span class="command"><strong>mysqld</strong></span> プロセスの起動時にコマンドラインで設定することもできます。 詳しくは<a class="xref" href="mysql-cluster.html#mysql-cluster-replication-starting" title="23.6.6 NDB Cluster レプリケーションの開始 (シングルレプリケーションチャネル)">セクション23.6.6「NDB Cluster レプリケーションの開始 (シングルレプリケーションチャネル)」</a>,をご覧ください。 
        </p></li></ol></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-cluster-replication-starting"></a>23.6.6 NDB Cluster レプリケーションの開始 (シングルレプリケーションチャネル)</h3></div></div></div><a class="indexterm" name="idm45563205984384"></a><p>
      このセクションでは、単一のレプリケーションチャネルを使用して NDB Cluster レプリケーションを開始する手順の概要を示します。
    </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
          次のコマンドを発行して、MySQL レプリケーションソースサーバーを起動します:
        </p><pre class="programlisting">shell<em class="replaceable"><code>S</code></em>&gt; <strong class="userinput"><code>mysqld --ndbcluster --server-id=<em class="replaceable"><code>id</code></em> \</code></strong>
        <strong class="userinput"><code>--log-bin --ndb-log-bin &amp;</code></strong>
</pre><p>
          前述のステートメントで、<em class="replaceable"><code>id</code></em> はこのサーバーの一意の ID です (<a class="xref" href="mysql-cluster.html#mysql-cluster-replication-general" title="23.6.2 NDB Cluster レプリケーションの一般的な要件">セクション23.6.2「NDB Cluster レプリケーションの一般的な要件」</a> を参照)。 これにより、適切なロギング形式を使用してバイナリロギングを有効にして、サーバー <span class="command"><strong>mysqld</strong></span> プロセスが開始されます。 NDB 8.0 では、<code class="option">--ndb-log-bin</code> オプションを使用して <code class="literal">NDB</code> テーブルへの更新のロギングを明示的に有効にすることも必要です。これは NDB Cluster の以前のバージョンからの変更であり、このオプションはデフォルトで有効になっていました。 
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
            <code class="option">--binlog-format=MIXED</code> を使用してソースを起動することもできます。この場合、クラスタ間のレプリケート時に行ベースのレプリケーションが自動的に使用されます。 ステートメントベースのバイナリロギングは NDB Cluster レプリケーションではサポートされていません (<a class="xref" href="mysql-cluster.html#mysql-cluster-replication-general" title="23.6.2 NDB Cluster レプリケーションの一般的な要件">セクション23.6.2「NDB Cluster レプリケーションの一般的な要件」</a> を参照)。 
          </p></div></li><li class="listitem"><p>
          次に示すように、MySQL レプリカサーバーを起動します:
        </p><pre class="programlisting">shell<em class="replaceable"><code>R</code></em>&gt; <strong class="userinput"><code>mysqld --ndbcluster --server-id=<em class="replaceable"><code>id</code></em> &amp;</code></strong>
</pre><p>
          前述のコマンドで、<em class="replaceable"><code>id</code></em> はレプリカサーバーの一意の ID です。 レプリカでロギングを有効にする必要はありません。 
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
            このコマンドで <code class="option">--skip-slave-start</code> オプションを使用するか、レプリケーションをすぐに開始しないかぎり、<code class="literal">skip-slave-start</code> をレプリカサーバーの <code class="filename">my.cnf</code> ファイルに含める必要があります。 このオプションを使用すると、次のステップ 4 で説明するように、適切な <code class="literal">START REPLICA | SLAVE</code> ステートメントが発行されるまでレプリケーションの開始が遅延されます。 
          </p></div></li><li class="listitem"><p>
          レプリカサーバーをソースサーバーのレプリケーションバイナリログと同期化する必要があります。 バイナリロギングがソースで以前に実行されていない場合は、レプリカで次のステートメントを実行します: 
        </p><pre class="programlisting">mysql<em class="replaceable"><code>R</code></em>&gt; <strong class="userinput"><code>CHANGE MASTER TO</code></strong>
     -&gt; <strong class="userinput"><code>MASTER_LOG_FILE='',</code></strong>
     -&gt; <strong class="userinput"><code>MASTER_LOG_POS=4;</code></strong>

Or from MySQL 8.0.23:
mysql<em class="replaceable"><code>R</code></em>&gt; <strong class="userinput"><code>CHANGE REPLICATION SOURCE TO</code></strong>
     -&gt; <strong class="userinput"><code>SOURCE_LOG_FILE='',</code></strong>
     -&gt; <strong class="userinput"><code>SOURCE_LOG_POS=4;</code></strong>
</pre><p>
          これにより、レプリカはログの開始点からソースサーバーのバイナリログの読取りを開始するように指示されます。 その他:バックアップを使用してソースからデータをロードする場合。このような場合に <code class="literal">MASTER_LOG_FILE</code> および <code class="literal">MASTER_LOG_POS</code> に使用する正しい値を取得する方法の詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-replication-failover" title="23.6.8 NDB Cluster レプリケーションによるフェイルオーバーの実装">セクション23.6.8「NDB Cluster レプリケーションによるフェイルオーバーの実装」</a> を参照してください。 
        </p></li><li class="listitem"><p>
          最後に、レプリカ上の <span class="command"><strong>mysql</strong></span> クライアントから次のコマンドを発行して、レプリケーションの適用を開始するようにレプリカに指示します:
        </p><pre class="programlisting">mysql<em class="replaceable"><code>R</code></em>&gt; <strong class="userinput"><code>START SLAVE;</code></strong>
Or from MySQL 8.0.22:
mysql<em class="replaceable"><code>R</code></em>&gt; <strong class="userinput"><code>START REPLICA;</code></strong></pre><p>
          これにより、ソースからレプリカへのデータおよび変更の転送も開始されます。
        </p></li></ol></div><p>
      次のセクションで説明する手順に類似した方法で、2 つのレプリケーションチャネルを使用することも可能です。この方法と 1 つのレプリケーションチャネルを使用する方法との違いは<a class="xref" href="mysql-cluster.html#mysql-cluster-replication-two-channels" title="23.6.7 NDB Cluster レプリケーションでの 2 つのレプリケーションチャネルの使用">セクション23.6.7「NDB Cluster レプリケーションでの 2 つのレプリケーションチャネルの使用」</a>で説明しています。
    </p><a class="indexterm" name="idm45563205941488"></a><p>
      <span class="firstterm">バッチ更新</span>を有効にして、クラスタのレプリケーションのパフォーマンスを向上することも可能です。 これを行うには、レプリカ <span class="command"><strong>mysqld</strong></span> プロセスで <code class="literal">slave_allow_batching</code> システム変数を設定します。 通常、更新は受け取るとすぐに適用されます。 ただし、バッチ処理を使用すると、それぞれ 32 KB のバッチで更新が適用されます。特に個々の更新が比較的小さい場合、スループットが高くなり、CPU 使用率が低下する可能性があります。 
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
        バッチ処理はエポック単位で機能します。複数のトランザクションに属する更新は、同じバッチの一部として送信できます。
      </p><p>
        すべての未処理の更新は、その更新の合計が 32K バイト未満であっても、エポックの最後に達したときに適用されます。
      </p></div><a class="indexterm" name="idm45563205934848"></a><p>
      バッチ処理は、実行時にオンとオフを切り替えることができます。 実行時にこれを有効にするため、次の 2 つのステートメントのどちらかを使用できます。 
    </p><pre class="programlisting">SET GLOBAL slave_allow_batching = 1;
SET GLOBAL slave_allow_batching = ON;
</pre><p>
      特定のバッチによって問題が発生した場合 (効果が正しくレプリケートされていないように見えるステートメントなど)、次のいずれかのステートメントを使用してバッチ処理を非アクティブ化できます:
    </p><pre class="programlisting">SET GLOBAL slave_allow_batching = 0;
SET GLOBAL slave_allow_batching = OFF;
</pre><p>
      次のように、適切な <code class="literal">SHOW VARIABLES</code> ステートメントを使用して、バッチ処理が現在使用されているかどうかを確認できます:
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SHOW VARIABLES LIKE 'slave%';</code></strong>
+---------------------------+-------+
| Variable_name             | Value |
+---------------------------+-------+
| slave_allow_batching      | ON    |
| slave_compressed_protocol | OFF   |
| slave_load_tmpdir         | /tmp  |
| slave_net_timeout         | 3600  |
| slave_skip_errors         | OFF   |
| slave_transaction_retries | 10    |
+---------------------------+-------+
6 rows in set (0.00 sec)
</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-cluster-replication-two-channels"></a>23.6.7 NDB Cluster レプリケーションでの 2 つのレプリケーションチャネルの使用</h3></div></div></div><a class="indexterm" name="idm45563205924544"></a><a class="indexterm" name="idm45563205922336"></a><p>
      さらに完成された例のシナリオでは、2 つのレプリケーションチャネルを使用することで冗長性を提供し、これによって、1 つのレプリケーションチャネルで発生する可能性のある障害を防ぐことを想定しています。 これには、合計 4 台のレプリケーションサーバー、ソースクラスタに 2 台のソースサーバー、レプリカクラスタに 2 台のレプリカサーバーが必要です。 以後の説明では、一意の識別子が次のように割り当てられているものとします。 
    </p><div class="table"><a name="idm45563205919312"></a><p class="title"><b>表 23.68 テキストで説明されている NDB Cluster レプリケーションサーバー</b></p><div class="table-contents"><table><col style="width: 25%"><col style="width: 75%"><thead><tr>
          <th>サーバー ID</th>
          <th>説明</th>
        </tr></thead><tbody><tr>
          <td>1</td>
          <td>ソース - プライマリレプリケーションチャネル (<span class="emphasis"><em>S</em></span>)</td>
        </tr><tr>
          <td>2</td>
          <td>ソース - セカンダリレプリケーションチャネル (<span class="emphasis"><em>S'</em></span>)</td>
        </tr><tr>
          <td>3</td>
          <td>レプリカ - プライマリレプリケーションチャネル (<span class="emphasis"><em>R</em></span>)</td>
        </tr><tr>
          <td>4</td>
          <td>レプリカ - セカンダリレプリケーションチャネル (<span class="emphasis"><em>R'</em></span>)</td>
        </tr></tbody></table></div></div><br class="table-break"><p>
      2 つのチャネルを使用するレプリケーションの設定は、1 つのレプリケーションチャネルの設定と根本的に異なるわけではありません。 まず、プライマリおよびセカンダリのレプリケーションソースサーバーの <span class="command"><strong>mysqld</strong></span> プロセスを起動してから、プライマリおよびセカンダリの複製のプロセスを起動する必要があります。 レプリケーションプロセスは、各レプリカに対して <code class="literal">START REPLICA | SLAVE</code> ステートメントを発行することで開始できます。 コマンドと、そのコマンドの発行に必要な順序を次に示します。 
    </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
          プライマリレプリケーションソースを起動します:
        </p><pre class="programlisting">shell<em class="replaceable"><code>S</code></em>&gt; <strong class="userinput"><code>mysqld --ndbcluster --server-id=1 \</code></strong>
               <strong class="userinput"><code>--log-bin &amp;</code></strong>
</pre></li><li class="listitem"><p>
          セカンダリレプリケーションソースを起動します:
        </p><pre class="programlisting">shell<em class="replaceable"><code>S'</code></em>&gt; <strong class="userinput"><code>mysqld --ndbcluster --server-id=2 \</code></strong>
               <strong class="userinput"><code>--log-bin &amp;</code></strong>
</pre></li><li class="listitem"><p>
          プライマリレプリカサーバーを起動します:
        </p><pre class="programlisting">shell<em class="replaceable"><code>R</code></em>&gt; <strong class="userinput"><code>mysqld --ndbcluster --server-id=3 \</code></strong>
               <strong class="userinput"><code>--skip-slave-start &amp;</code></strong>
</pre></li><li class="listitem"><p>
          セカンダリレプリカサーバーを起動します:
        </p><pre class="programlisting">shell<em class="replaceable"><code>R'</code></em>&gt; <strong class="userinput"><code>mysqld --ndbcluster --server-id=4 \</code></strong>
                <strong class="userinput"><code>--skip-slave-start &amp;</code></strong>
</pre></li><li class="listitem"><p>
          最後に、次に示すように、プライマリレプリカで <code class="literal">START REPLICA | SLAVE</code> ステートメントを実行して、プライマリチャネルでレプリケーションを開始します:
        </p><pre class="programlisting">mysql<em class="replaceable"><code>R</code></em>&gt; <strong class="userinput"><code>START SLAVE;</code></strong>
Or from MySQL 8.0.22:
mysql<em class="replaceable"><code>R</code></em>&gt; <strong class="userinput"><code>START REPLICA;</code></strong>
</pre><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">警告</div><p>
            この時点ではプライマリチャネルのみを起動する必要があります。 セカンダリレプリケーションチャネルは、<a class="xref" href="mysql-cluster.html#mysql-cluster-replication-failover" title="23.6.8 NDB Cluster レプリケーションによるフェイルオーバーの実装">セクション23.6.8「NDB Cluster レプリケーションによるフェイルオーバーの実装」</a> で説明されているように、プライマリレプリケーションチャネルに障害が発生した場合にのみ起動する必要があります。 複数のレプリケーションチャネルを同時に実行すると、不要な重複レコードがレプリカに作成される可能性があります。 
          </p></div></li></ol></div><p>
      前述のように、レプリカでバイナリロギングを有効にする必要はありません。
    </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-cluster-replication-failover"></a>23.6.8 NDB Cluster レプリケーションによるフェイルオーバーの実装</h3></div></div></div><a class="indexterm" name="idm45563205873968"></a><a class="indexterm" name="idm45563205871904"></a><p>
      プライマリクラスタのレプリケーションプロセスが失敗した場合、セカンダリレプリケーションチャネルに切り替えることができます。 次に、この実現に必要なステップについて説明します。 
    </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
          <a class="indexterm" name="idm45563205867536"></a> <a class="indexterm" name="idm45563205865904"></a>最新のグローバルチェックポイント (GCP) の時刻を取得します。 つまり、次のクエリーを使用して、レプリカクラスタの <code class="literal">ndb_apply_status</code> テーブルから最新のエポックを判別する必要があります: 
        </p><pre class="programlisting">mysql<em class="replaceable"><code>R'</code></em>&gt; <strong class="userinput"><code>SELECT @latest:=MAX(epoch)</code></strong>
      -&gt;        <strong class="userinput"><code>FROM mysql.ndb_apply_status;</code></strong>
</pre><p>
          ソースとレプリカが各ホストで実行されている循環レプリケーショントポロジでは、<code class="literal">ndb_log_apply_status=1</code> を使用している場合、NDB Cluster エポックは複製バイナリログに書き込まれます。 つまり、<code class="literal">ndb_apply_status</code> テーブルには、このホスト上のレプリカおよびこのホストで実行されているレプリケーションソースサーバーのレプリカとして機能する他のホストのレプリカに関する情報が含まれます。 
        </p><p>
          この場合、このレプリカの最新のエポックを決定して、このレプリカの設定に使用された <code class="literal">CHANGE REPLICATION SOURCE TO</code> | <code class="literal">CHANGE MASTER TO</code> ステートメントの <code class="literal">IGNORE_SERVER_IDS</code> オプションにリストされていないエポックをこのレプリカバイナリログ内の他のレプリカから除外する必要があります。 このようなエポックを除外する理由は、このレプリカソースの準備に使用された <code class="literal">CHANGE REPLICATION SOURCE TO</code>|<code class="literal">CHANGE MASTER TO</code> ステートメントの <code class="literal">IGNORE_SERVER_IDS</code> リストに一致するサーバー ID を持つ <code class="literal">mysql.ndb_apply_status</code> テーブルの行も、レプリカ独自のサーバー ID を持つ行に加えて、ローカルサーバーからの行とみなされるためです。 このリストは、<code class="literal">SHOW REPLICA | SLAVE STATUS</code> の出力から <code class="literal">Replicate_Ignore_Server_Ids</code> として取得できます。 このリストを取得し、前のバージョンのクエリーと同様に、<code class="literal">@latest</code> という名前の変数に最大のエポックを選択する、ここに示すクエリーで <em class="replaceable"><code>ignore_server_ids</code></em> に置換することを前提としています: 
        </p><pre class="programlisting">mysql<em class="replaceable"><code>R'</code></em>&gt; <strong class="userinput"><code>SELECT @latest:=MAX(epoch)</code></strong>
      -&gt;        <strong class="userinput"><code>FROM mysql.ndb_apply_status</code></strong>
      -&gt;        <strong class="userinput"><code>WHERE server_id NOT IN (<em class="replaceable"><code>ignore_server_ids</code></em>);</code></strong>
</pre><p>
          場合によっては、前述のクエリーの <code class="literal">WHERE</code> 条件に含めるサーバー ID のリストと <code class="literal">server_id IN <em class="replaceable"><code>server_id_list</code></em></code> を使用する方が、より単純または効率的 (あるいはその両方) な場合があります。
        </p></li><li class="listitem"><p>
          <a class="indexterm" name="idm45563205839072"></a>ステップ 1 で示したクエリーから取得した情報を使用して、ソースクラスタの <code class="literal">ndb_binlog_index</code> テーブルから対応するレコードを取得します。
        </p><p>
          次のクエリーを使用して、ソースの <code class="literal">ndb_binlog_index</code> テーブルから必要なレコードを取得できます:
        </p><pre class="programlisting">mysql<em class="replaceable"><code>S'</code></em>&gt; <strong class="userinput"><code>SELECT</code></strong>
      -&gt;     <strong class="userinput"><code>@file:=SUBSTRING_INDEX(next_file, '/', -1),</code></strong>
      -&gt;     <strong class="userinput"><code>@pos:=next_position</code></strong>
      -&gt; <strong class="userinput"><code>FROM mysql.ndb_binlog_index</code></strong>
      -&gt; <strong class="userinput"><code>WHERE epoch &gt;= @latest</code></strong>
      -&gt; <strong class="userinput"><code>ORDER BY epoch ASC LIMIT 1;</code></strong>
</pre><p>
          これらは、プライマリレプリケーションチャネルの失敗以降にソースに保存されたレコードです。 ここでは、ユーザー変数 <code class="literal">@latest</code> を使用して、ステップ 1 で取得した値を表します。 もちろん、ある <span class="command"><strong>mysqld</strong></span> インスタンスが、ほかのサーバーインスタンスに設定されたユーザー変数には直接アクセスできません。 これらの値は、手動またはアプリケーションによる 2 番目のクエリーに対する<span class="quote">「<span class="quote">「プラグイン済」</span>」</span>である必要があります。 
        </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">重要</div><p>
            <code class="literal">START REPLICA | SLAVE</code> を実行する前に、レプリカ <span class="command"><strong>mysqld</strong></span> が <code class="option">--slave-skip-errors=ddl_exist_errors</code> で起動されていることを確認する必要があります。 そうしないと、レプリケーションが重複 DDL エラーで停止する可能性があります。 
          </p></div></li><li class="listitem"><p>
          セカンダリレプリカサーバーで次のクエリーを実行して、セカンダリチャネルを同期化できるようになりました:
        </p><pre class="programlisting">mysql<em class="replaceable"><code>R'</code></em>&gt; <strong class="userinput"><code>CHANGE MASTER TO</code></strong>
      -&gt;     <strong class="userinput"><code>MASTER_LOG_FILE='@file',</code></strong>
      -&gt;     <strong class="userinput"><code>MASTER_LOG_POS=@pos;</code></strong>

Or from MySQL 8.0.23:
mysql<em class="replaceable"><code>R'</code></em>&gt; <strong class="userinput"><code>CHANGE REPLICATION SOURCE TO</code></strong>
      -&gt;     <strong class="userinput"><code>SOURCE_LOG_FILE='@file',</code></strong>
      -&gt;     <strong class="userinput"><code>SOURCE_LOG_POS=@pos;</code></strong></pre><p>
          ここでも、ステップ 2 で取得してステップ 3 で適用した値を表すためにユーザー変数 (この場合は<code class="literal">@file</code> と<code class="literal">@pos</code>) を使用しています。実際には、これらの値を手動で挿入するか、関係する両方のサーバーにアクセスできるアプリケーションを使用して挿入する必要があります。
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
            <code class="literal">@file</code> は<code class="literal">'/var/log/mysql/replication-source-bin.00001'</code>などの文字列値であるため、SQL またはアプリケーションコードで使用する場合は引用符で囲む必要があります。 ただし、<code class="literal">@pos</code> で表される値は引用符で囲む必要は<span class="emphasis"><em>ありません</em></span>。 通常、MySQL は文字列を数字に変換しようとしますが、この場合は例外です。 
          </p></div></li><li class="listitem"><p>
          セカンダリレプリカ <span class="command"><strong>mysqld</strong></span> で適切なコマンドを発行して、セカンダリチャネルでレプリケーションを開始できるようになりました:
        </p><pre class="programlisting">mysql<em class="replaceable"><code>R'</code></em>&gt; <strong class="userinput"><code>START SLAVE;</code></strong>
Or from MySQL 8.0.22:
mysql<em class="replaceable"><code>R'</code></em>&gt; <strong class="userinput"><code>START REPLICA;</code></strong></pre></li></ol></div><p>
      セカンダリレプリケーションチャネルがアクティブになったら、プライマリの不具合を調べて、修復できます。 これを行うために必要な正確なアクションは、プライマリチャネルが失敗した理由によって異なります。 
    </p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">警告</div><p>
        セカンダリレプリケーションチャネルは、プライマリレプリケーションチャネルの停止時や停止した場合にのみ、起動されます。 複数のレプリケーションチャネルを同時に実行すると、不要な重複レコードがレプリカに作成される可能性があります。 
      </p></div><p>
      障害が単一のサーバーに制限されている場合は、理論上、<em class="replaceable"><code>S</code></em> から <em class="replaceable"><code>R'</code></em>または <em class="replaceable"><code>S'</code></em>から <em class="replaceable"><code>R</code></em> にレプリケートできる必要があります。
    </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-cluster-replication-backups"></a>23.6.9 NDB Cluster レプリケーションによる NDB Cluster バックアップ</h3></div></div></div><div class="toc"><dl class="toc"><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-replication-auto-sync">23.6.9.1 NDB Cluster レプリケーション: レプリカとソースバイナリログの同期の自動化</a></span></dt><dt><span class="section"><a href="mysql-cluster.html#mysql-cluster-replication-pitr">23.6.9.2 NDB Cluster レプリケーションを使用したポイントインタイムリカバリ</a></span></dt></dl></div><a class="indexterm" name="idm45563205797344"></a><a class="indexterm" name="idm45563205795280"></a><a class="indexterm" name="idm45563205793056"></a><a class="indexterm" name="idm45563205790912"></a><p>
      このセクションでは、NDB Cluster レプリケーションを使用してバックアップを作成し、そこから復元する方法について説明します。 レプリケーションサーバーは、前に説明したとおりにすでに構成されたものとします (<a class="xref" href="mysql-cluster.html#mysql-cluster-replication-preparation" title="23.6.5 NDB Cluster のレプリケーションの準備">セクション23.6.5「NDB Cluster のレプリケーションの準備」</a>およびその直後のセクションを参照してください)。 これがすでに行われている場合、バックアップを作成してそのバックアップからリストアする手順は次のとおりです。 
    </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
          バックアップを開始するには、2 つの異なる方法があります。
        </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><b>方法 A. </b>
                この方法では、レプリケーションプロセスを開始する前に、ソースサーバーでクラスタバックアッププロセスが有効になっている必要があります。 これを行うには、<code class="filename">my.cnf file</code> の<code class="literal">[mysql_cluster]</code>セクションに次の行を含めます。ここで、<em class="replaceable"><code>management_host</code></em> はソースクラスタの <code class="literal">NDB</code> 管理サーバーの IP アドレスまたはホスト名、<em class="replaceable"><code>port</code></em> は管理サーバーのポート番号です: 
              </p><pre class="programlisting">ndb-connectstring=<em class="replaceable"><code>management_host</code></em>[:<em class="replaceable"><code>port</code></em>]
</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
                ポート番号は、デフォルトのポート (1186) が使用されていない場合にのみ、指定する必要があります。 NDB Cluster でのポートおよびポート割り当ての詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-install-configuration" title="23.2.3 NDB Cluster の初期構成">セクション23.2.3「NDB Cluster の初期構成」</a> を参照してください。 
              </p></div><p>
              <a class="indexterm" name="idm45563205775312"></a>この場合、レプリケーションソースで次のステートメントを実行してバックアップを開始できます:
            </p><pre class="programlisting">shell<em class="replaceable"><code>S</code></em>&gt; <strong class="userinput"><code>ndb_mgm -e "START BACKUP"</code></strong>
</pre></li><li class="listitem"><p><b>方法 B. </b>
                <code class="filename">my.cnf</code> ファイルで、管理ホストを検出する場所が指定されていない場合、<code class="literal">START BACKUP</code> コマンドの一部としてこの情報を <code class="literal">NDB</code> 管理クライアントに渡すことで、バックアッププロセスを起動できます。 ここで示すように、これを実行できます。ここで、<em class="replaceable"><code>management_host</code></em> と <em class="replaceable"><code>port</code></em> は管理サーバーのホスト名とポート番号です。 
              </p><pre class="programlisting">shell<em class="replaceable"><code>S</code></em>&gt; <strong class="userinput"><code>ndb_mgm <em class="replaceable"><code>management_host</code></em>:<em class="replaceable"><code>port</code></em> -e "START BACKUP"</code></strong>
</pre><p>
              前に述べたようなシナリオの場合 (<a class="xref" href="mysql-cluster.html#mysql-cluster-replication-preparation" title="23.6.5 NDB Cluster のレプリケーションの準備">セクション23.6.5「NDB Cluster のレプリケーションの準備」</a>を参照してください)、これは次のように実行されます。
            </p><pre class="programlisting">shell<em class="replaceable"><code>S</code></em>&gt; <strong class="userinput"><code>ndb_mgm rep-source:1186 -e "START BACKUP"</code></strong>
</pre></li></ul></div></li><li class="listitem"><p>
          オンラインにするレプリカにクラスタバックアップファイルをコピーします。 ソースクラスタの <span class="command"><strong>ndbd</strong></span> プロセスを実行している各システムにはクラスタバックアップファイルが配置されており、これらのファイルの <span class="emphasis"><em>all</em></span> をレプリカにコピーして、リストアを正常に実行する必要があります。 バックアップファイルは、レプリカ管理ホストが存在するコンピュータ上の任意のディレクトリにコピーできます (MySQL および NDB バイナリにそのディレクトリでの読み取りアクセス権がある場合)。 この場合、これらのファイルはディレクトリ<code class="filename">/var/BACKUPS/BACKUP-1</code> にコピーされているものとします。 
        </p><p>
          レプリカクラスタにソースと同じ数の <span class="command"><strong>ndbd</strong></span> プロセス (データノード) がある必要はありませんが、この数は同じにすることを強くお薦めします。 レプリケーションプロセスの早期起動を防ぐには、<code class="option">--skip-slave-start</code> オプションを使用してレプリカを起動する必要があります。 
        </p></li><li class="listitem"><p>
          ソースクラスタに存在し、レプリケートするレプリカクラスタにデータベースを作成します。
        </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">重要</div><p>
            レプリケートする各データベースに対応する <code class="literal">CREATE DATABASE</code> (または <code class="literal">CREATE SCHEMA</code>) ステートメントは、レプリカクラスタ内の各 SQL ノードで実行する必要があります。
          </p></div></li><li class="listitem"><p>
          <span class="command"><strong>mysql</strong></span> クライアントで次のステートメントを使用して、レプリカクラスタをリセットします:
        </p><pre class="programlisting">mysql<em class="replaceable"><code>R</code></em>&gt; <strong class="userinput"><code>RESET SLAVE;</code></strong>
Or from MySQL 8.0.22:
mysql<em class="replaceable"><code>R</code></em>&gt; <strong class="userinput"><code>RESET REPLICA;</code></strong>
</pre></li><li class="listitem"><p>
          各バックアップファイルに対して <span class="command"><strong>ndb_restore</strong></span> コマンドを順番に使用して、レプリカでクラスタリストアプロセスを開始できるようになりました。 最初に、次に示すように、クラスタメタデータをリストアするための <code class="option">-m</code> オプションを含める必要があります: 
        </p><pre class="programlisting">shell<em class="replaceable"><code>R</code></em>&gt; <strong class="userinput"><code>ndb_restore -c <em class="replaceable"><code>replica_host</code></em>:<em class="replaceable"><code>port</code></em> -n <em class="replaceable"><code>node-id</code></em> \</code></strong>
        <strong class="userinput"><code>-b <em class="replaceable"><code>backup-id</code></em> -m -r <em class="replaceable"><code>dir</code></em></code></strong>
</pre><p>
          <em class="replaceable"><code>dir</code></em> は、バックアップファイルがレプリカに配置されているディレクトリへのパスです。 残りのバックアップファイルに対応する <span class="command"><strong>ndb_restore</strong></span> コマンドに、<code class="option">-m</code> オプションを使用<span class="emphasis"><em>しない</em></span>でください。 
        </p><p>
          バックアップファイルがディレクトリ<code class="filename">/var/BACKUPS/BACKUP-1</code> にコピーされている 4 つのデータノード (<a class="xref" href="mysql-cluster.html#mysql-cluster-replication" title="23.6 NDB Cluster レプリケーション">セクション23.6「NDB Cluster レプリケーション」</a> の図を参照) を含むソースクラスタからリストアする場合、レプリカで実行されるコマンドの適切な順序は次のようになります:
        </p><pre class="programlisting">shell<em class="replaceable"><code>R</code></em>&gt; <strong class="userinput"><code>ndb_restore -c replica-host:1186 -n 2 -b 1 -m \</code></strong>
        <strong class="userinput"><code>-r ./var/BACKUPS/BACKUP-1</code></strong>
shell<em class="replaceable"><code>R</code></em>&gt; <strong class="userinput"><code>ndb_restore -c replica-host:1186 -n 3 -b 1 \</code></strong>
        <strong class="userinput"><code>-r ./var/BACKUPS/BACKUP-1</code></strong>
shell<em class="replaceable"><code>R</code></em>&gt; <strong class="userinput"><code>ndb_restore -c replica-host:1186 -n 4 -b 1 \</code></strong>
        <strong class="userinput"><code>-r ./var/BACKUPS/BACKUP-1</code></strong>
shell<em class="replaceable"><code>R</code></em>&gt; <strong class="userinput"><code>ndb_restore -c replica-host:1186 -n 5 -b 1 -e \</code></strong>
        <strong class="userinput"><code>-r ./var/BACKUPS/BACKUP-1</code></strong>
</pre><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">重要</div><p>
            エポックがレプリカ <code class="literal">mysql.ndb_apply_status</code> テーブルに書き込まれるようにするには、この例で <span class="command"><strong>ndb_restore</strong></span> を最後に起動するときの <code class="option">-e</code> (または <code class="option">--restore-epoch</code>) オプションが必要です。 この情報がないと、レプリカはソースと適切に同期できません。 (<a class="xref" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="23.4.23 ndb_restore — NDB Cluster バックアップの復元">セクション23.4.23「ndb_restore — NDB Cluster バックアップの復元」</a>を参照してください。) 
          </p></div></li><li class="listitem"><p>
          ここで、レプリカの <code class="literal">ndb_apply_status</code> テーブルから最新のエポックを取得する必要があります (<a class="xref" href="mysql-cluster.html#mysql-cluster-replication-failover" title="23.6.8 NDB Cluster レプリケーションによるフェイルオーバーの実装">セクション23.6.8「NDB Cluster レプリケーションによるフェイルオーバーの実装」</a> を参照):
        </p><pre class="programlisting">mysql<em class="replaceable"><code>R</code></em>&gt; <strong class="userinput"><code>SELECT @latest:=MAX(epoch)</code></strong>
        <strong class="userinput"><code>FROM mysql.ndb_apply_status;</code></strong>
</pre></li><li class="listitem"><p>
          前のステップで取得したエポック値として<code class="literal">@latest</code> を使用すると、次に示すクエリーを使用して、正しいバイナリログファイル<code class="literal">@file</code> 内の正しい開始位置<code class="literal">@pos</code> をソースの <code class="literal">mysql.ndb_binlog_index</code> テーブルから取得できます:
        </p><pre class="programlisting">mysql<em class="replaceable"><code>S</code></em>&gt; <strong class="userinput"><code>SELECT</code></strong>
     -&gt;     <strong class="userinput"><code>@file:=SUBSTRING_INDEX(File, '/', -1),</code></strong>
     -&gt;     <strong class="userinput"><code>@pos:=Position</code></strong>
     -&gt; <strong class="userinput"><code>FROM mysql.ndb_binlog_index</code></strong>
     -&gt; <strong class="userinput"><code>WHERE epoch &gt;= @latest</code></strong>
     -&gt; <strong class="userinput"><code>ORDER BY epoch ASC LIMIT 1;</code></strong>
</pre><p>
          レプリケーショントラフィックが現在存在しない場合は、ソースで <code class="literal">SHOW MASTER STATUS</code> を実行し、<code class="literal">File</code> カラムに表示されるすべてのファイルの接尾辞が最大値のファイルの出力の <code class="literal">Position</code> カラムに表示される値を使用して、この情報を取得できます。 この場合、これがどのファイルであるかを判断し、次のステップで手動で、またはスクリプトを使用して出力を解析して名前を指定する必要があります。 
        </p></li><li class="listitem"><p>
          前のステップで取得した値を使用して、レプリカ <span class="command"><strong>mysql</strong></span> クライアントで適切な <code class="literal">CHANGE REPLICATION SOURCE TO</code> ステートメント (MySQL 8.0.23) または <code class="literal">CHANGE MASTER TO</code> ステートメント (MySQL 8.0.23 より前) を発行できるようになりました:
        </p><pre class="programlisting">mysql<em class="replaceable"><code>R</code></em>&gt; <strong class="userinput"><code>CHANGE MASTER TO</code></strong>
     -&gt;     <strong class="userinput"><code>MASTER_LOG_FILE='@file',</code></strong>
     -&gt;     <strong class="userinput"><code>MASTER_LOG_POS=@pos;</code></strong>

Or from MySQL 8.0.23:
mysql<em class="replaceable"><code>R</code></em>&gt; <strong class="userinput"><code>CHANGE REPLICATION SOURCE TO</code></strong>
     -&gt;     <strong class="userinput"><code>SOURCE_LOG_FILE='@file',</code></strong>
     -&gt;     <strong class="userinput"><code>SOURCE_LOG_POS=@pos;</code></strong>
</pre></li><li class="listitem"><p>
          ソースからのデータの読み取りを開始するバイナリログファイルのどの時点からレプリカが認識されるようになったので、次のステートメントを使用してレプリカのレプリケーションを開始できます:
        </p><pre class="programlisting">mysql<em class="replaceable"><code>R</code></em>&gt; <strong class="userinput"><code>START SLAVE;</code></strong>
Or from MySQL 8.0.22:
mysql<em class="replaceable"><code>R</code></em>&gt; <strong class="userinput"><code>START REPLICA;</code></strong></pre></li></ol></div><p>
      2 つ目のレプリケーションチャネルでバックアップおよびリストアを実行するには、必要に応じて、セカンダリソースおよびレプリカのホスト名と ID をプライマリソースおよびレプリカサーバーのホスト名と ID に置き換え、それらに対して前述のステートメントを実行して、これらのステップを繰り返す必要があります。
    </p><p>
      クラスタのバックアップの実行とバックアップからのクラスタのリストアに関する詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-backup" title="23.5.8 NDB Cluster のオンラインバックアップ">セクション23.5.8「NDB Cluster のオンラインバックアップ」</a>を参照してください。
    </p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-replication-auto-sync"></a>23.6.9.1 NDB Cluster レプリケーション: レプリカとソースバイナリログの同期の自動化</h4></div></div></div><a class="indexterm" name="idm45563205679664"></a><a class="indexterm" name="idm45563205677488"></a><p>
        前のセクションで説明した多くのプロセスを自動化できます (<a class="xref" href="mysql-cluster.html#mysql-cluster-replication-backups" title="23.6.9 NDB Cluster レプリケーションによる NDB Cluster バックアップ">セクション23.6.9「NDB Cluster レプリケーションによる NDB Cluster バックアップ」</a>参照してください)。 次の Perl スクリプト <code class="filename">reset-replica.pl</code> は、これを実行する方法の例として機能します。 
      </p><a class="indexterm" name="idm45563205673216"></a><a class="indexterm" name="idm45563205670896"></a><pre class="programlisting">#!/user/bin/perl -w

#  file: reset-replica.pl

#  Copyright (c) 2005, 2020, Oracle and/or its affiliates. All rights reserved.

#  This program is free software; you can redistribute it and/or modify
#  it under the terms of the GNU General Public License as published by
#  the Free Software Foundation; either version 2 of the License, or
#  (at your option) any later version.

#  This program is distributed in the hope that it will be useful,
#  but WITHOUT ANY WARRANTY; without even the implied warranty of
#  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
#  GNU General Public License for more details.

#  You should have received a copy of the GNU General Public License
#  along with this program; if not, write to:
#  Free Software Foundation, Inc.
#  59 Temple Place, Suite 330
#  Boston, MA 02111-1307 USA
#
#  Version 1.1


######################## Includes ###############################

use DBI;

######################## Globals ################################

my  $m_host='';
my  $m_port='';
my  $m_user='';
my  $m_pass='';
my  $s_host='';
my  $s_port='';
my  $s_user='';
my  $s_pass='';
my  $dbhM='';
my  $dbhS='';

####################### Sub Prototypes ##########################

sub CollectCommandPromptInfo;
sub ConnectToDatabases;
sub DisconnectFromDatabases;
sub GetReplicaEpoch;
sub GetSourceInfo;
sub UpdateReplica;

######################## Program Main ###########################

CollectCommandPromptInfo;
ConnectToDatabases;
GetReplicaEpoch;
GetSourceInfo;
UpdateReplica;
DisconnectFromDatabases;

################## Collect Command Prompt Info ##################

sub CollectCommandPromptInfo
{
  ### Check that user has supplied correct number of command line args
  die "Usage:\n
       reset-replica &gt;source MySQL host&lt; &gt;source MySQL port&lt; \n
                   &gt;source user&lt; &gt;source pass&lt; &gt;replica MySQL host&lt; \n
                   &gt;replica MySQL port&lt; &gt;replica user&lt; &gt;replica pass&lt; \n
       All 8 arguments must be passed. Use BLANK for NULL passwords\n"
       unless @ARGV == 8;

  $m_host  =  $ARGV[0];
  $m_port  =  $ARGV[1];
  $m_user  =  $ARGV[2];
  $m_pass  =  $ARGV[3];
  $s_host  =  $ARGV[4];
  $s_port  =  $ARGV[5];
  $s_user  =  $ARGV[6];
  $s_pass  =  $ARGV[7];

  if ($m_pass eq "BLANK") { $m_pass = '';}
  if ($s_pass eq "BLANK") { $s_pass = '';}
}

###############  Make connections to both databases #############

sub ConnectToDatabases
{
  ### Connect to both source and replica cluster databases

  ### Connect to source
  $dbhM
    = DBI-&gt;connect(
    "dbi:mysql:database=mysql;host=$m_host;port=$m_port",
    "$m_user", "$m_pass")
      or die "Can't connect to source cluster MySQL process!
              Error: $DBI::errstr\n";

  ### Connect to replica
  $dbhS
    = DBI-&gt;connect(
          "dbi:mysql:database=mysql;host=$s_host",
          "$s_user", "$s_pass")
    or die "Can't connect to replica cluster MySQL process!
            Error: $DBI::errstr\n";
}

################  Disconnect from both databases ################

sub DisconnectFromDatabases
{
  ### Disconnect from source

  $dbhM-&gt;disconnect
  or warn " Disconnection failed: $DBI::errstr\n";

  ### Disconnect from replica

  $dbhS-&gt;disconnect
  or warn " Disconnection failed: $DBI::errstr\n";
}

######################  Find the last good GCI ##################

sub GetReplicaEpoch
{
  $sth = $dbhS-&gt;prepare("SELECT MAX(epoch)
                         FROM mysql.ndb_apply_status;")
      or die "Error while preparing to select epoch from replica: ",
             $dbhS-&gt;errstr;

  $sth-&gt;execute
      or die "Selecting epoch from replica error: ", $sth-&gt;errstr;

  $sth-&gt;bind_col (1, \$epoch);
  $sth-&gt;fetch;
  print "\tReplica epoch =  $epoch\n";
  $sth-&gt;finish;
}

#######  Find the position of the last GCI in the binary log ########

sub GetSourceInfo
{
  $sth = $dbhM-&gt;prepare("SELECT
                           SUBSTRING_INDEX(File, '/', -1), Position
                         FROM mysql.ndb_binlog_index
                         WHERE epoch &gt; $epoch
                         ORDER BY epoch ASC LIMIT 1;")
      or die "Prepare to select from source error: ", $dbhM-&gt;errstr;

  $sth-&gt;execute
      or die "Selecting from source error: ", $sth-&gt;errstr;

  $sth-&gt;bind_col (1, \$binlog);
  $sth-&gt;bind_col (2, \$binpos);
  $sth-&gt;fetch;
  print "\tSource binary log file =  $binlog\n";
  print "\tSource binary log position =  $binpos\n";
  $sth-&gt;finish;
}

##########  Set the replica to process from that location #########

sub UpdateReplica
{
  $sth = $dbhS-&gt;prepare("CHANGE MASTER TO
                         MASTER_LOG_FILE='$binlog',
                         MASTER_LOG_POS=$binpos;")
      or die "Prepare to CHANGE MASTER error: ", $dbhS-&gt;errstr;

  $sth-&gt;execute
       or die "CHANGE MASTER on replica error: ", $sth-&gt;errstr;
  $sth-&gt;finish;
  print "\tReplica has been updated. You may now start the replica.\n";
}

# end reset-replica.pl
</pre></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mysql-cluster-replication-pitr"></a>23.6.9.2 NDB Cluster レプリケーションを使用したポイントインタイムリカバリ</h4></div></div></div><a class="indexterm" name="idm45563205659168"></a><a class="indexterm" name="idm45563205656944"></a><a class="indexterm" name="idm45563205654752"></a><p>
        <span class="firstterm">ポイントインタイム</span>リカバリ (つまり、特定の時点よりあとに行われたデータ変更のリカバリ) は、サーバーをバックアップが行われた時点の状態に戻す完全バックアップのリストア後に実行されます。 「NDB Cluster」および「NDB Cluster」レプリケーションを使用して「NDB Cluster」テーブルの point-in-time リカバリを実行するには、ネイティブの <code class="literal">NDB</code> データバックアップ (<span class="command"><strong>ndb_mgm</strong></span> クライアントで <code class="literal">CREATE BACKUP</code> を発行して取得) を使用し、<code class="literal">ndb_binlog_index</code> テーブルを (<span class="command"><strong>mysqldump</strong></span> を使用して作成したダンプからリストアします。 
      </p><p>
        NDB Cluster のポイントインタイムリカバリを実行するには、次に示す手順に従う必要があります:
      </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
            <span class="command"><strong>ndb_mgm</strong></span> クライアントで <code class="literal">START BACKUP</code> コマンドを使用して、クラスタ内のすべての <code class="literal">NDB</code> データベースをバックアップします (<a class="xref" href="mysql-cluster.html#mysql-cluster-backup" title="23.5.8 NDB Cluster のオンラインバックアップ">セクション23.5.8「NDB Cluster のオンラインバックアップ」</a>を参照してください)。
          </p></li><li class="listitem"><p>
            その後の時点でクラスタをリストアする前に、<code class="literal">mysql.ndb_binlog_index</code> テーブルのバックアップを作成します。 このタスクに <span class="command"><strong>mysqldump</strong></span> を使用することが、おそらくもっとも簡単です。 このときに、バイナリログファイルもバックアップします。 
          </p><p>
            このバックアップは、必要に応じて定期的 (等間隔で 1 時間ごとなど) に更新してください。
          </p></li><li class="listitem"><p>
            (<span class="emphasis"><em>重大な障害またはエラーが発生します</em></span>。)
          </p></li><li class="listitem"><p>
            最新の既知の良好なバックアップを探します。
          </p></li><li class="listitem"><p>
            データノードのファイルシステムをクリアします (<span class="command"><strong>ndbd</strong></span> <code class="option">--initial</code> または <span class="command"><strong>ndbmtd</strong></span> <code class="option">--initial</code> を使用します)。
          </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
              NDB 8.0.21 以降、「ディスクデータ」テーブルスペースおよびログファイルは <code class="option">--initial</code> によって削除されます。 以前は、これらを手動で削除する必要がありました。 
            </p></div></li><li class="listitem"><p>
            <code class="literal">mysql.ndb_binlog_index</code> テーブルで <code class="literal">DROP TABLE</code> または <code class="literal">TRUNCATE TABLE</code> を使用します。
          </p></li><li class="listitem"><p>
            <span class="command"><strong>ndb_restore</strong></span> を実行して、すべてのデータをリストアします。 <code class="literal">ndb_apply_status</code> テーブルが正しく移入されるように、<span class="command"><strong>ndb_restore</strong></span> の実行時に <code class="option">--restore-epoch</code> オプションを含める必要があります。 (詳細については、<a class="xref" href="mysql-cluster.html#mysql-cluster-programs-ndb-restore" title="23.4.23 ndb_restore — NDB Cluster バックアップの復元">セクション23.4.23「ndb_restore — NDB Cluster バックアップの復元」</a>を参照してください。) 
          </p></li><li class="listitem"><p>
            必要に応じて、<span class="command"><strong>mysqldump</strong></span> の出力から <code class="literal">ndb_binlog_index</code> テーブルをリストアしたり、バックアップからバイナリログファイルをリストアしたりします。
          </p></li><li class="listitem"><p>
            最後に適用されたエポック (すなわち、<code class="literal">ndb_apply_status</code> テーブルの <code class="literal">epoch</code> カラムの最大値) をユーザー変数 <code class="literal">@LATEST_EPOCH</code> として検索します (重要)。
          </p><pre class="programlisting">SELECT <span class="emphasis"><em>@LATEST_EPOCH</em></span>:=MAX(epoch)
    FROM mysql.ndb_apply_status;
</pre></li><li class="listitem"><p>
            <code class="literal">ndb_binlog_index</code> テーブルの <code class="literal">@LATEST_EPOCH</code> に対応する、最新のバイナリログファイル (<code class="literal">@FIRST_FILE</code>) と位置 (<code class="literal">Position</code> カラム値) をこのファイル内で検索します。
          </p><pre class="programlisting">SELECT Position, <span class="emphasis"><em>@FIRST_FILE</em></span>:=File
    FROM mysql.ndb_binlog_index
    WHERE epoch &gt; <span class="emphasis"><em>@LATEST_EPOCH</em></span> ORDER BY epoch ASC LIMIT 1;
</pre></li><li class="listitem"><p>
            <span class="command"><strong>mysqlbinlog</strong></span> を使用して、障害が発生した時点まで、特定のファイルと位置からバイナリログイベントを再現します。 (<a class="xref" href="programs.html#mysqlbinlog" title="4.6.8 mysqlbinlog — バイナリログファイルを処理するためのユーティリティー">セクション4.6.8「mysqlbinlog — バイナリログファイルを処理するためのユーティリティー」</a>を参照してください。) 
          </p></li></ol></div><p>
        バイナリログ、レプリケーション、および増分リカバリに関する詳細は、<a class="xref" href="backup-and-recovery.html#point-in-time-recovery" title="7.5 Point-in-Time (増分) リカバリ">セクション7.5「Point-in-Time (増分) リカバリ」</a>も参照してください。
      </p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-cluster-replication-multi-source"></a>23.6.10 NDB Cluster レプリケーション: 双方向および循環レプリケーション</h3></div></div></div><a class="indexterm" name="idm45563205602320"></a><a class="indexterm" name="idm45563205600128"></a><a class="indexterm" name="idm45563205597984"></a><a class="indexterm" name="idm45563205595888"></a><p>
      NDB Cluster は、2 つのクラスタ間の双方向レプリケーションや、任意の数のクラスタ間の循環レプリケーションに使用できます。
    </p><p><b>循環レプリケーションの例. </b>
        次のいくつかの段落では、クラスタ 1 がクラスタ 2 のレプリケーションソースとして機能し、クラスタ 3 がクラスタ 1 のソースとして機能する 3 つの NDB Cluster 番号 1、2、および 3 を含むレプリケーション設定の例を検討します。 各クラスタは 2 つの SQL ノードを持ち、SQL ノード A と B はクラスタ 1 に属し、SQL ノード C と D はクラスタ 2 に属し、SQL ノード E と F はクラスタ 3 に属しています。 
      </p><p>
      これらのクラスタを使用する循環レプリケーションは、次の条件を満たすかぎり、サポートされます。
    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          すべてのソースおよびレプリカの SQL ノードが同じです。
        </p></li><li class="listitem"><p>
          ソースおよびレプリカとして機能するすべての SQL ノードは、<code class="literal">log_slave_updates</code> システム変数を有効にして起動されます。
        </p></li></ul></div><p>
      このタイプの循環レプリケーションのセットアップは、次の図に示すとおりです。
    </p><div class="figure"><a name="fig-mysql-cluster-replication-circular-all-sources-as-replicas"></a><p class="title"><b>図 23.36 すべてのソースがレプリカである NDB Cluster 循環レプリケーション</b></p><div class="figure-contents"><div class="mediaobject"><img src="images/cluster-circular-replication-1.png" width="550" height="646" alt="一部のコンテンツは周囲のテキストで説明されています。 図は、それぞれ 2 つのノードを持つ 3 つのクラスタを示しています。 異なるクラスタ内の SQL ノードを接続する矢印は、すべてのソースがレプリカでもあることを示しています。"></div></div></div><br class="figure-break"><p>
      このシナリオでは、クラスタ 1 の SQL ノード A はクラスタ 2 の SQL ノード C に複製し、SQL ノード C はクラスタ 3 の SQL ノード E に複製し、SQL ノード E は SQL ノード A に複製します。 つまり、レプリケーションソースおよびレプリカとして使用されるすべての SQL ノードは、レプリケーション線 (図の曲線の矢印で示されています) によって直接接続されます。 
    </p><p>
      次に示すように、すべてのソース SQL ノードがレプリカであるわけではないような方法で循環レプリケーションを設定することもできます:
    </p><div class="figure"><a name="fig-mysql-cluster-replication-circular-not-all-sources-as-replicas"></a><p class="title"><b>図 23.37 すべてのソースがレプリカではない NDB Cluster 循環レプリケーション</b></p><div class="figure-contents"><div class="mediaobject"><img src="images/cluster-circular-replication-2.png" width="550" height="622" alt="一部のコンテンツは周囲のテキストで説明されています。 図は、それぞれ 2 つのノードを持つ 3 つのクラスタを示しています。 異なるクラスタ内の SQL ノードを接続する矢印は、すべてのソースがレプリカであるわけではないことを示しています。"></div></div></div><br class="figure-break"><p>
      この場合、各クラスタ内の異なる SQL ノードがレプリケーションソースおよびレプリカとして使用されます。 <code class="literal">log_slave_updates</code> システム変数を有効にして SQL ノードを起動しないでください。 NDB Cluster のこのタイプの循環レプリケーションスキームでは、レプリケーションの行 (図の曲線矢印で再度示されています) が不連続である可能性がありますが、まだ徹底的にテストされていないため、実験的とみなす必要があることに注意してください。 
    </p><p><b>NDB ネイティブのバックアップおよびリストアを使用したレプリカクラスタの初期化. </b>
        <a class="indexterm" name="idm45563205566560"></a>循環レプリケーションを設定する場合、ある NDB Cluster で管理クライアントの <code class="literal">START BACKUP</code> コマンドを使用してバックアップを作成し、<span class="command"><strong>ndb_restore</strong></span> を使用してこのバックアップを別の NDB Cluster に適用することによって、レプリカクラスタを初期化できます。 これにより、レプリカとして機能する 2 つ目の NDB Cluster SQL ノードにバイナリログが自動的に作成されることはありません。バイナリログを作成するには、その SQL ノードで <code class="literal">SHOW TABLES</code> ステートメントを発行する必要があります。これは、<code class="literal">START REPLICA | SLAVE</code> を実行する前に行う必要があります。 これは既知の問題です。 
      </p><p><b>マルチソースフェイルオーバーの例. </b>
        このセクションでは、サーバー ID 1、2、および 3 を持つ 3 つの NDB Cluster を持つマルチソース NDB Cluster レプリケーション設定でのフェイルオーバーについて説明します。 このシナリオでは、クラスタ 1 はクラスタ 2 および 3 に複製し、クラスタ 2 もクラスタ 3 に複製します。 この関係はここで示すとおりです。 
      </p><div class="figure"><a name="fig-mysql-cluster-replication-3-sources"></a><p class="title"><b>図 23.38 3 つのソースを持つ NDB Cluster マルチマスターレプリケーション</b></p><div class="figure-contents"><div class="mediaobject"><img src="images/cluster-replication-multi-source.png" width="350" height="275" alt="サーバー ID 1、2、および 3 を持つ 3 つの NDB Cluster を持つマルチソース NDB Cluster レプリケーション設定。クラスタ 1 はクラスタ 2 および 3 にレプリケートし、クラスタ 2 はクラスタ 3 にもレプリケートします。"></div></div></div><br class="figure-break"><p>
      つまり、データはクラスタ 1 からクラスタ 3 へ異なる 2 つのルートを介して (直接、およびクラスタ 2 経由で) 複製されます。
    </p><p>
      マルチソースレプリケーションに関与するすべての MySQL サーバーがソースとレプリカの両方として動作するわけではなく、特定の NDB Cluster がレプリケーションチャネルごとに異なる SQL ノードを使用する可能性があります。 このようなケースを次に示します。 
    </p><div class="figure"><a name="fig-mysql-cluster-replication-mysql-servers"></a><p class="title"><b>図 23.39 NDB Cluster マルチソースレプリケーション (MySQL Servers を使用)</b></p><div class="figure-contents"><div class="mediaobject"><img src="images/cluster-replication-multi-source-mysqlds.png" width="500" height="375" alt="概念は周囲のテキストで説明されています。 3 つのノードを表示: クラスタ 1 の SQL ノード A はクラスタ 3 の SQL ノード F にレプリケートし、クラスタ 1 の SQL ノード B はクラスタ 2 の SQL ノード C にレプリケートし、クラスタ 3 の SQL ノード E はクラスタ 3 の SQL ノード G にレプリケートします。 クラスタ 1 の SQL ノード A および B には --log-slave-updates=0 があり、クラスタ 2 の SQL ノード C、およびクラスタ 3 の SQL ノード F および G には --log-slave-updates=1 があり、クラスタ 2 の SQL ノード D および E には --log-slave-updates=0 があります。"></div></div></div><br class="figure-break"><p>
      レプリカとして機能する MySQL サーバーは、<code class="literal">log_slave_updates</code> システム変数を有効にして実行する必要があります。 また、どの <span class="command"><strong>mysqld</strong></span> プロセスでこのオプションが必要か、前の図に示されています。 
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
        <code class="literal">log_slave_updates</code> システム変数を使用しても、レプリカとして実行されていないサーバーには影響しません。
      </p></div><p>
      複製しているクラスタの 1 つが停止した場合、フェイルオーバーの必要性が生じます。 この例では、クラスタ 1 のサービスが失われ、そのためにクラスタ 3 がクラスタ 1 の更新の 2 つのソースを失うケースを検討します。 NDB Cluster 間のレプリケーションは非同期であるため、クラスタ 1 から直接発生したクラスタ 3 の更新が、クラスタ 2 を介して受信した更新よりも新しいことは保証されません。 クラスタ 1 からの更新に関して、クラスタ 3 が確実にクラスタ 2 に追いつくことで、これに対処できます。 すなわち、MySQL サーバーに関して、未処理の更新を MySQL サーバー C からサーバー F に複製する必要があります。 
    </p><p>
      サーバー C で、次のクエリーを実行します。
    </p><pre class="programlisting">mysqlC&gt; SELECT @latest:=MAX(epoch)
     -&gt;     FROM mysql.ndb_apply_status
     -&gt;     WHERE server_id=1;

mysqlC&gt; SELECT
     -&gt;     @file:=SUBSTRING_INDEX(File, '/', -1),
     -&gt;     @pos:=Position
     -&gt;     FROM mysql.ndb_binlog_index
     -&gt;     WHERE orig_epoch &gt;= @latest
     -&gt;     AND orig_server_id = 1
     -&gt;     ORDER BY epoch ASC LIMIT 1;
</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
        適切なインデックスを <code class="literal">ndb_binlog_index</code> テーブルに追加することで、このクエリーのパフォーマンスを向上できるため、フェイルオーバー時間が大幅に短縮される可能性があります。 詳細については、<a class="xref" href="mysql-cluster.html#mysql-cluster-replication-schema" title="23.6.4 NDB Cluster レプリケーションスキーマおよびテーブル">セクション23.6.4「NDB Cluster レプリケーションスキーマおよびテーブル」</a>を参照してください。 
      </p></div><p>
      <em class="replaceable"><code>@file</code></em> および <em class="replaceable"><code>@pos</code></em> の値を手動でサーバー C からサーバー F にコピーをします (またはアプリケーションで同様に実行させます)。 次に、サーバー F で、次の <code class="literal">CHANGE REPLICATION SOURCE TO</code> ステートメント (MySQL 8.0.23 の場合) または <code class="literal">CHANGE MASTER TO</code> ステートメント (MySQL 8.0.23 の場合) を実行します: 
    </p><pre class="programlisting">mysqlF&gt; CHANGE MASTER TO
     -&gt;     MASTER_HOST = 'serverC'
     -&gt;     MASTER_LOG_FILE='@file',
     -&gt;     MASTER_LOG_POS=@pos;

Or from MySQL 8.0.23:
mysqlF&gt; CHANGE REPLICATION SOURCE TO
     -&gt;     SOURCE_HOST = 'serverC'
     -&gt;     SOURCE_LOG_FILE='@file',
     -&gt;     SOURCE_LOG_POS=@pos;
</pre><p>
      これが完了したら、MySQL サーバー F で <code class="literal">START REPLICA | SLAVE</code> ステートメントを発行できます。これにより、サーバー B から発生した欠落している更新がサーバー F にレプリケートされます。
    </p><p>
      <code class="literal">CHANGE REPLICATION SOURCE TO</code> | <code class="literal">CHANGE MASTER TO</code> ステートメントは、サーバー ID のコンマ区切りリストを使用し、対応するサーバーから発生したイベントを無視する <code class="literal">IGNORE_SERVER_IDS</code> オプションもサポートしています。 詳細については、<a class="xref" href="sql-statements.html#change-master-to" title="13.4.2.1 CHANGE MASTER TO ステートメント">セクション13.4.2.1「CHANGE MASTER TO ステートメント」</a>および<a class="xref" href="sql-statements.html#show-slave-status" title="13.7.7.36 SHOW SLAVE | REPLICA STATUS ステートメント">セクション13.7.7.36「SHOW SLAVE | REPLICA STATUS ステートメント」</a>を参照してください。 このオプションと <code class="literal">ndb_log_apply_status</code> 変数との相互作用の詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-replication-failover" title="23.6.8 NDB Cluster レプリケーションによるフェイルオーバーの実装">セクション23.6.8「NDB Cluster レプリケーションによるフェイルオーバーの実装」</a> を参照してください。 
    </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mysql-cluster-replication-conflict-resolution"></a>23.6.11 NDB Cluster レプリケーションの競合解決</h3></div></div></div><a class="indexterm" name="idm45563205513328"></a><a class="indexterm" name="idm45563205511136"></a><a class="indexterm" name="idm45563205509008"></a><a class="indexterm" name="idm45563205506976"></a><a class="indexterm" name="idm45563205504864"></a><p>
      複数のソース (循環レプリケーションを含む) を含むレプリケーション設定を使用する場合、異なるソースがレプリカ上の同じ行を異なるデータで更新しようとする可能性があります。 NDB Cluster レプリケーションでの競合解決では、特定のソースの更新をレプリカに適用するかどうかを決定するためにユーザー定義の解決カラムを使用できるようにすることによって、このような競合を解決する手段が提供されます。 
    </p><p>
      NDB Cluster (<code class="literal">NDB$OLD()</code>, <code class="literal">NDB$MAX()</code>, <code class="literal">NDB$MAX_DELETE_WIN()</code>) でサポートされている一部のタイプの競合解決は、このユーザー定義カラムを <span class="quote">「<span class="quote">timestamp</span>」</span> カラムとして実装します (ただし、このセクションで後述するように、そのタイプを <code class="literal">TIMESTAMP</code> にすることはできません)。 このタイプの競合解決は、常に、トランザクションごとではなく、行ごとに適用されます。 エポックベースの競合解決関数 <code class="literal">NDB$EPOCH()</code> および <code class="literal">NDB$EPOCH_TRANS()</code> は、エポックが複製された順番を比較します (このため、これらの関数はトランザクション型です)。 このセクションの後半で説明するように、競合が発生したときにレプリカの解決カラムの値を比較するには、様々な方法を使用できます。使用する方法はテーブルごとに設定できます。 
    </p><p>
      更新を適用するかどうかを判断するときに解決関数で適切な選択を行えるように、解決カラムに適切な値で正しく移入されることを確認することは、アプリケーションの責任になります。
    </p><p><b>要件. </b>
        競合解消の準備は、ソースとレプリカの両方で行う必要があります。 これらのタスクは次のリストで説明します。 
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          バイナリログを書き込むソースで、送信するカラム (すべてのカラム、または更新されたカラムのみ) を決定する必要があります。 MySQL Server でこれを行うには、全体的には <span class="command"><strong>mysqld</strong></span> 起動オプション <code class="option">--ndb-log-updated-only</code> (このセクションの後半で説明します) を適用し、テーブル単位には <code class="literal">mysql.ndb_replication</code> テーブルのエントリによって実行します (<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-replication-table" title="ndb_replication システムテーブル">ndb_replication システムテーブル</a>を参照してください)。 
        </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
            非常に大きなカラム (<code class="literal">TEXT</code> や <code class="literal">BLOB</code> カラムなど) を持つテーブルをレプリケートする場合、<code class="option">--ndb-log-updated-only</code> は、バイナリログのサイズを小さくし、<code class="literal">max_allowed_packet</code> の超過によるレプリケーションの失敗を回避するためにも役立つことがあります。
          </p><p>
            この問題に関する詳細は、<a class="xref" href="replication.html#replication-features-max-allowed-packet" title="17.5.1.20 レプリケーションと max_allowed_packet">セクション17.5.1.20「レプリケーションと max_allowed_packet」</a>を参照してください。
          </p></div></li><li class="listitem"><p>
          レプリカで、適用する競合解消のタイプ (<span class="quote">「<span class="quote">「最新のタイムスタンプ優先」</span>」</span>、<span class="quote">「<span class="quote">「同じタイムスタンプを優先」</span>」</span>、<span class="quote">「<span class="quote">「プライマリ優先」</span>」</span>、<span class="quote">「<span class="quote">「プライマリ受注、トランザクションの完了」</span>」</span>またはなし) を決定する必要があります。 これは、<code class="literal">mysql.ndb_replication</code> システムテーブルを使用して、テーブルごとに行われます (<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-replication-table" title="ndb_replication システムテーブル">ndb_replication システムテーブル</a>を参照してください)。 
        </p></li><li class="listitem"><p>
          NDB Cluster は、読み取りの競合検出もサポートしています。つまり、あるクラスタ内の特定の行の読み取りと別のクラスタ内の同じ行の更新または削除の間の競合を検出します。 これには、レプリカで <code class="literal">ndb_log_exclusive_reads</code> を 1 に設定して取得した排他的読取りロックが必要です。 競合している読み取りによって読み取られたすべての行のログが、例外テーブルに記録されます。 詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-replication-examples-read-conflicts" title="読み取り競合の検出と解決">読み取り競合の検出と解決</a>を参照してください。 
        </p></li></ul></div><p>
      タイムスタンプベースの競合解決に関数 <code class="literal">NDB$OLD()</code>、<code class="literal">NDB$MAX()</code>、および <code class="literal">NDB$MAX_DELETE_WIN()</code> を使用する場合、更新を<span class="quote">「<span class="quote">タイムスタンプ</span>」</span>カラムとして指定するために使用されるカラムを参照するのが一般的です。 ただし、このカラムのデータ型は <code class="literal">TIMESTAMP</code> にしないでください。このデータ型は <code class="literal">INT</code> (<code class="literal">INTEGER</code>) または <code class="literal">BIGINT</code> にしてください。 また、<span class="quote">「<span class="quote">timestamp</span>」</span> カラムは <code class="literal">UNSIGNED</code> および <code class="literal">NOT NULL</code> にしてください。 
    </p><p>
      このセクションで後述する <code class="literal">NDB$EPOCH()</code> および <code class="literal">NDB$EPOCH_TRANS()</code> 関数は、プライマリ NDB Cluster とセカンダリ NDB Cluster に適用されるレプリケーションエポックの相対的な順序を比較することで機能し、タイムスタンプは使用しません。
    </p><a class="indexterm" name="idm45563205461488"></a><p><b>ソースカラムコントロール. </b>
        <span class="quote">「<span class="quote">前</span>」</span>のイメージおよび<span class="quote">「<span class="quote">後</span>」</span>のイメージ (すなわち、更新が適用される前と後のテーブルの状態) に関して、更新の操作を確認できます。 通常、主キーを使用してテーブルを更新する場合、ビフォアイメージは重要ではありません。ただし、更新された値をレプリカで使用するかどうかを更新ごとに決定する必要がある場合は、両方のイメージがソースバイナリログに書き込まれていることを確認する必要があります。 このセクションの後半で説明するように、これは <span class="command"><strong>mysqld</strong></span> の <code class="option">--ndb-log-update-as-write</code> オプションで実行されます。 
      </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">重要</div><p>
        行全体のロギングを行うか、更新されたカラムだけのロギングを行うかは、MySQL サーバーが起動されたときに決まり、オンラインでは変更できません。異なるロギングオプションを使用して、<span class="command"><strong>mysqld</strong></span> を再起動するか、新しい <span class="command"><strong>mysqld</strong></span> インスタンスを起動する必要があります。
      </p></div><a class="indexterm" name="idm45563205452304"></a><h4><a name="idm45563205450080"></a>すべてまたは一部の行のロギング (--ndb-log-updated-only オプション)</h4><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndb-log-updated-only"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--ndb-log-updated-only[={OFF|ON}]</code></td>
</tr><tr><th>システム変数</th>
<td><code class="literal">ndb_log_updated_only</code></td>
</tr><tr><th>スコープ</th>
<td>グローバル</td>
</tr><tr><th>動的</th>
<td>はい</td>
</tr><tr><th><code class="literal">SET_VAR</code> ヒントの適用</th>
<td>いいえ</td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">ON</code></td>
</tr></tbody></table></div><p><a name="option_mysqld_ndb-log-updated-only"></a>
      競合解決のために、行のログを取る基本的な方法は 2 つあり、その方法は <span class="command"><strong>mysqld</strong></span> の <code class="option">--ndb-log-updated-only</code> オプションを設定すると指定されます。
    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          行全体のログを取得します
        </p></li><li class="listitem"><p>
          更新されたカラムデータ (すなわち、値が設定されたカラムデータ) だけのログを取ります。この値が実際に変更されたかどうかには関係しません。 これはデフォルトの動作です。 
        </p></li></ul></div><p>
      通常、更新されたカラムのみのログを取るだけで十分 (しかも効率的) です。ただし、すべての行のログを取る必要がある場合、<code class="option">--ndb-log-updated-only</code> を <code class="literal">0</code> または <code class="literal">OFF</code> に設定すると、これを実行できます。
    </p><h4><a name="idm45563205421504"></a>--ndb-log-update-as-write オプション: 変更されたデータを更新としてログを取得</h4><div class="informaltable"><table frame="box" rules="all" summary="Properties for ndb-log-update-as-write"><col style="width: 30%"><col style="width: 70%"><tbody><tr><th>コマンド行形式</th>
<td><code class="literal">--ndb-log-update-as-write[={OFF|ON}]</code></td>
</tr><tr><th>システム変数</th>
<td><code class="literal">ndb_log_update_as_write</code></td>
</tr><tr><th>スコープ</th>
<td>グローバル</td>
</tr><tr><th>動的</th>
<td>はい</td>
</tr><tr><th><code class="literal">SET_VAR</code> ヒントの適用</th>
<td>いいえ</td>
</tr><tr><th>型</th>
<td>Boolean</td>
</tr><tr><th>デフォルト値</th>
<td><code class="literal">ON</code></td>
</tr></tbody></table></div><p><a name="option_mysqld_ndb-log-update-as-write"></a>
      MySQL Server の <code class="option">--ndb-log-update-as-write</code> オプションの設定では、ロギングが<span class="quote">「<span class="quote">前</span>」</span>のイメージがある状態で実行されるか、ない状態で実行されるかを指定します。 競合解消は MySQL Server 更新ハンドラで行われるため、更新が書込みではなく更新であるようにレプリケーションソースによって実行されるロギングを制御する必要があります。つまり、既存の行を置き換える場合でも、更新は既存の行の書込みではなく既存の行の変更として処理されます。 このオプションはデフォルトではオンです。つまり、更新は書き込みとして処理されます。 つまり、更新はデフォルトで、<code class="literal">update_row</code> イベントとしてではなくバイナリログに <code class="literal">write_row</code> イベントとして書き込まれます。 
    </p><p>
      このオプションを無効にするには、<code class="option">--ndb-log-update-as-write=0</code> または <code class="option">--ndb-log-update-as-write=OFF</code> を使用してソース <span class="command"><strong>mysqld</strong></span> を起動します。 NDB テーブルから異なるストレージエンジンを使用するテーブルに複製する場合は、これを行う必要があります。詳細は、<a class="xref" href="mysql-cluster.html#mysql-cluster-replication-ndb-to-non-ndb" title="NDB から別のストレージエンジンへのレプリケーション">NDB から別のストレージエンジンへのレプリケーション</a>および<a class="xref" href="mysql-cluster.html#mysql-cluster-replication-ndb-to-nontransactional" title="NDB から非トランザクションストレージエンジンへのレプリケーション">NDB から非トランザクションストレージエンジンへのレプリケーション</a>を参照してください。 
    </p><a class="indexterm" name="idm45563205392064"></a><p><b>競合解決の制御. </b>
        通常、競合解決は競合が発生する可能性のあるサーバーで有効になっています。 ロギング方法の選択と同様に、<code class="literal">mysql.ndb_replication</code> テーブル内のエントリによって有効化されます。 
      </p><p><a name="mysql-cluster-ndb-replication-table"></a><b>ndb_replication システムテーブル. </b>
        <a class="indexterm" name="idm45563205386272"></a> <a class="indexterm" name="idm45563205384720"></a>競合解消を有効にするには、使用する競合解消タイプおよび方法に応じて、ソースまたはレプリカ (あるいはその両方) の <code class="literal">mysql</code> システムデータベースに <code class="literal">ndb_replication</code> テーブルを作成する必要があります。 このテーブルは、ロギングと競合解決関数をテーブル単位に制御するために使用され、レプリケーションに関与する 1 つの行単位テーブルを持ちます。<code class="literal">ndb_replication</code> が作成され、競合を解決すべきサーバー上の制御情報が格納されます。 レプリカ上でデータをローカルに変更できる単純なソース - レプリケーション設定では、これは通常レプリカです。 双方向レプリケーションなどのより複雑なレプリケーションスキームでは、これは通常、関係するすべてのソースです。 <code class="literal">mysql.ndb_replication</code> の各行は複製されるテーブルに対応し、対象テーブルに対するログの取得方法と競合の解決方法 (すなわち、もし競合が発生した場合に、どの競合解決関数を使用するか) を指定します。 <code class="literal">mysql.ndb_replication</code> テーブルの定義は次のとおりです。 
      </p><pre class="programlisting">CREATE TABLE mysql.ndb_replication  (
    db VARBINARY(63),
    table_name VARBINARY(63),
    server_id INT UNSIGNED,
    binlog_type INT UNSIGNED,
    conflict_fn VARBINARY(128),
    PRIMARY KEY USING HASH (db, table_name, server_id)
)   ENGINE=NDB
PARTITION BY KEY(db,table_name);
</pre><p>
      このテーブルのカラムは、次のいくつかのパラグラフで説明します。
    </p><p><b>db. </b>
        複製されるテーブルを含むデータベースの名前です。 ワイルドカード <code class="literal">_</code> と <code class="literal">%</code> のどちらか、またはその両方を、データベース名の一部として使用できます。 マッチングは、<code class="literal">LIKE</code> 演算子に対して実装されたマッチングに似ています。 
      </p><p><b>table_name. </b>
        複製されるテーブルの名前です。 テーブル名に、ワイルドカード <code class="literal">_</code> と <code class="literal">%</code> のどちらか、またはその両方を含めることができます。 マッチングは、<code class="literal">LIKE</code> 演算子に対して実装されたマッチングに似ています。 
      </p><p><b>server_id. </b>
        テーブルが存在する MySQL インスタンス (SQL ノード) の一意のサーバー ID です。
      </p><p><b>binlog_type. </b>
        使用されるバイナリロギングのタイプです。 これは、次の表に示すように指定されます。 
      </p><div class="table"><a name="idm45563205364112"></a><p class="title"><b>表 23.69 binlog_type 値 (内部値と説明を含む)</b></p><div class="table-contents"><table><col style="width: 20%"><col style="width: 20%"><col style="width: 60%"><thead><tr>
          <th scope="col">値</th>
          <th scope="col">内部値</th>
          <th scope="col">説明</th>
        </tr></thead><tbody><tr>
          <th scope="row">0</th>
          <td><code class="literal">NBT_DEFAULT</code></td>
          <td>サーバーのデフォルトを使用します</td>
        </tr><tr>
          <th scope="row">1</th>
          <td><code class="literal">NBT_NO_LOGGING</code></td>
          <td>バイナリログにこのテーブルの記録を行いません</td>
        </tr><tr>
          <th scope="row">2</th>
          <td><code class="literal">NBT_UPDATED_ONLY</code></td>
          <td>更新された属性のみが記録されます</td>
        </tr><tr>
          <th scope="row">3</th>
          <td><code class="literal">NBT_FULL</code></td>
          <td>更新されない場合でも、行全体を記録します (MySQL サーバーのデフォルトの動作)</td>
        </tr><tr>
          <th scope="row">4</th>
          <td><code class="literal">NBT_USE_UPDATE</code></td>
          <td>(<code class="literal">NBT_UPDATED_ONLY_USE_UPDATE</code> および <code class="literal">NBT_FULL_USE_UPDATE</code> の値の生成のみを行い、単独では使用しません)</td>
        </tr><tr>
          <th scope="row">5</th>
          <td>[<span class="emphasis"><em>Not used</em></span>]</td>
          <td>---</td>
        </tr><tr>
          <th scope="row">6</th>
          <td><code class="literal">NBT_UPDATED_ONLY_USE_UPDATE</code> (<code class="literal">NBT_UPDATED_ONLY | NBT_USE_UPDATE</code> に相当)</td>
          <td>値が変更されていない場合でも、更新された属性を使用します</td>
        </tr><tr>
          <th scope="row">7</th>
          <td><code class="literal">NBT_FULL_USE_UPDATE</code> (<code class="literal">NBT_FULL | NBT_USE_UPDATE</code> に相当)</td>
          <td>値が変更されていない場合でも、行全体を使用します</td>
        </tr></tbody></table></div></div><br class="table-break"><p><b>conflict_fn. </b>
        適用される競合解決関数です。 この関数は、次のリストに示されたいずれかの関数として指定する必要があります。 
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-ndb-old" title="NDB$OLD(column_name)">NDB$OLD(column_name)</a>
        </p></li><li class="listitem"><p>
          <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-ndb-max" title="NDB$MAX(column_name)">NDB$MAX(column_name)</a>
        </p></li><li class="listitem"><p>
          <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-ndb-max-delete-win" title="NDB$MAX_DELETE_WIN()">NDB$MAX_DELETE_WIN()</a>
        </p></li><li class="listitem"><p>
          <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-ndb-epoch" title="NDB$EPOCH() および NDB$EPOCH_TRANS()">NDB$EPOCH() および NDB$EPOCH_TRANS()</a>
        </p></li><li class="listitem"><p>
          <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-ndb-epoch-trans" title="NDB$EPOCH_TRANS()">NDB$EPOCH_TRANS()</a>
        </p></li><li class="listitem"><p>
          <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-ndb-epoch2" title="NDB$EPOCH2()">NDB$EPOCH2()</a>
        </p></li><li class="listitem"><p>
          <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-ndb-epoch2-trans" title="NDB$EPOCH2_TRANS()">NDB$EPOCH2_TRANS()</a>
        </p></li><li class="listitem"><p>
          <code class="literal">NULL</code>: 競合解消が対応するテーブルに使用されないことを示します。
        </p></li></ul></div><p>
      これらの関数は、次のいくつかのパラグラフで説明します。
    </p><p><a name="mysql-cluster-replication-ndb-old"></a><b>NDB$OLD(column_name). </b>
        <a class="indexterm" name="idm45563205306800"></a> <em class="replaceable"><code>column_name</code></em> の値がソースとレプリカの両方で同じである場合、更新が適用されます。それ以外の場合、更新はレプリカに適用されず、例外がログに書き込まれます。 これは、次の擬似コードで説明します。 
      </p><pre class="programlisting">if (<em class="replaceable"><code>source_old_column_value</code></em> == <em class="replaceable"><code>replica_current_column_value</code></em>)
  apply_update();
else
  log_exception();
</pre><p>
      <a class="indexterm" name="idm45563205302368"></a> この関数は<span class="quote">「<span class="quote">同じ値が優先</span>」</span>競合解決に使用されます。 このタイプの競合解決では、誤ったソースからのレプリカに更新が適用されないようにします。 
    </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">重要</div><p>
        この関数では、ソースのビフォアイメージのカラム値が使用されます。
      </p></div><p><a name="mysql-cluster-replication-ndb-max"></a><b>NDB$MAX(column_name). </b>
        <a class="indexterm" name="idm45563205297792"></a> ソースからの特定の行の <span class="quote">「<span class="quote">timestamp</span>」</span> カラム値がレプリカの値より大きい場合は適用され、それ以外の場合はレプリカに適用されません。 これは、次の擬似コードで説明します。 
      </p><pre class="programlisting">if (<em class="replaceable"><code>source_new_column_value</code></em> &gt; <em class="replaceable"><code>replica_current_column_value</code></em>)
  apply_update();
</pre><p>
      <a class="indexterm" name="idm45563205293456"></a> この関数は<span class="quote">「<span class="quote">もっとも大きいタイムスタンプが優先</span>」</span>競合解決に使用できます。 このタイプの競合解決では、競合が発生した場合、最後に更新された行のバージョンが存続するバージョンになります。 
    </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">重要</div><p>
        この関数では、アフターイメージのソースのカラム値が使用されます。
      </p></div><p><a name="mysql-cluster-replication-ndb-max-delete-win"></a><b>NDB$MAX_DELETE_WIN(). </b>
        <a class="indexterm" name="idm45563205288928"></a> これは <code class="literal">NDB$MAX()</code> のバリエーションです。 削除操作に使用できるタイムスタンプがないため、<code class="literal">NDB$MAX()</code> を使用した削除は実際には <code class="literal">NDB$OLD</code> として処理されますが、一部のユースケースでは最適ではありません。 <code class="literal">NDB$MAX_DELETE_WIN()</code> では、ソースから取得された既存の行を追加または更新する特定の行の <span class="quote">「<span class="quote">timestamp</span>」</span> カラム値がレプリカの値より大きい場合、その値が適用されます。 ただし、削除操作は常に値が高いものとして処理されます。 これは、次の擬似コードで説明します。 
      </p><pre class="programlisting">if ( (<em class="replaceable"><code>source_new_column_value</code></em> &gt; <em class="replaceable"><code>replica_current_column_value</code></em>)
        ||
      <em class="replaceable"><code>operation.type</code></em> == "delete")
  apply_update();
</pre><p>
      <a class="indexterm" name="idm45563205280304"></a> この関数は<span class="quote">「<span class="quote">もっとも大きいタイムスタンプ、削除が優先</span>」</span>競合解決に使用できます。 このタイプの競合解決では、競合が発生した場合、削除された行のバージョン、または (そうでなければ) 最後に更新された行のバージョンが存続するバージョンになります。 
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
        <code class="literal">NDB$MAX()</code> と同様に、ソースのアフターイメージのカラム値は、この関数で使用される値です。
      </p></div><p><a name="mysql-cluster-replication-ndb-epoch"></a><b>NDB$EPOCH() および NDB$EPOCH_TRANS(). </b>
        <a class="indexterm" name="idm45563205274496"></a> <a class="indexterm" name="idm45563205273408"></a> <code class="literal">NDB$EPOCH()</code> 関数は、レプリカクラスタでレプリケートされたエポックが適用される順序を、レプリカで発生した変更と比較して追跡します。 この相対的な順序付けを使用して、レプリカで発生した変更がローカルで発生した変更と同時に行われ、競合が発生する可能性があるかどうかを判断します。 
      </p><p>
      <code class="literal">NDB$EPOCH()</code> の説明で従う内容のほとんどは、<code class="literal">NDB$EPOCH_TRANS()</code> にも適用されます。 例外は本文に記載されています。 
    </p><p>
      <code class="literal">NDB$EPOCH()</code> は非対称であり、双方向レプリケーション構成 (<span class="quote">「<span class="quote">active-active</span>」</span> レプリケーションとも呼ばれる) 内のいずれかの NDB Cluster で動作します。 ここで、プライマリとして動作するクラスタと、セカンダリとして動作するもう一方のクラスタについて言及します。 プライマリ上のレプリカは競合の検出および処理を担当しますが、セカンダリ上のレプリカは競合の検出または処理には関与しません。 
    </p><p>
      プライマリ上のレプリカは、競合を検出すると、これらを補正するためにイベントを独自のバイナリログに注入します。これにより、セカンダリ NDB Cluster が最終的にプライマリと再配置されるため、プライマリとセカンダリが相違しなくなります。 この補正および再編成メカニズムでは、プライマリ NDB Cluster がセカンダリとの競合を常に優先する必要があります。つまり、競合が発生した場合、プライマリ変更はセカンダリからの変更ではなく常に使用されます。 この<span class="quote">「<span class="quote">プライマリが常に勝つ</span>」</span>ルールには次の意味が込められています。 
    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          プライマリでコミットされたデータを変更する操作は完全に永続的であり、競合検出および解決によって元に戻されたりロールバックされることはありません。
        </p></li><li class="listitem"><p>
          プライマリから読み取られたデータには一貫性があります。 プライマリ (ローカルまたはレプリカから) でコミットされた変更は、後で元に戻されません。 
        </p></li><li class="listitem"><p>
          セカンダリでデータを変更する操作は、競合が発生しているとプライマリが判断した場合、あとで取り消される可能性があります。
        </p></li><li class="listitem"><p>
          セカンダリで読み取られた各行は、常に自己矛盾がなく、各行は、セカンダリでコミットされた状態、またはプライマリでコミットされた状態のいずれかを常に反映しています。
        </p></li><li class="listitem"><p>
          セカンダリで読み取られた一連の行は、任意の時点で必ずしも一貫しているわけではありません。 <code class="literal">NDB$EPOCH_TRANS()</code> の場合、これは一時的な状態であり、<code class="literal">NDB$EPOCH()</code> の場合は、永続的な状態となることがあります。 
        </p></li><li class="listitem"><p>
          競合のない十分な長さの期間を想定すると、セカンダリ NDB Cluster 上のすべてのデータ (最終的に) はプライマリデータと整合性がとれます。
        </p></li></ul></div><p>
      <code class="literal">NDB$EPOCH()</code> および <code class="literal">NDB$EPOCH_TRANS()</code> では、競合を検出するためにユーザースキーマを修正したり、アプリケーションを変更したりする必要はありません。 ただし、システム全体が指定された制限内で動作することを検証するために、使用するスキーマ、および使用するアクセスパターンを考慮する必要があります。 
    </p><p>
      <code class="literal">NDB$EPOCH()</code> および <code class="literal">NDB$EPOCH_TRANS()</code> の各関数は、オプションのパラメータを取ることができます。これはエポックの下位 32 ビットを表すために使用するビット数で、次に示すように計算された値以下に設定する必要があります:
    </p><pre class="programlisting">CEIL( LOG2( <code class="literal">TimeBetweenGlobalCheckpoints</code> / <code class="literal">TimeBetweenEpochs</code> ), 1)
</pre><p>
      これらの構成パラメータがデフォルト値 (それぞれ、2000 および 100 ミリ秒) である場合、値は 5 バイトになり、デフォルト値 (6) で十分です。ただし、ほかの値が <code class="literal">TimeBetweenGlobalCheckpoints</code>、<code class="literal">TimeBetweenEpochs</code>、またはその両方に使用される場合を除きます。 値が小さすぎると誤判定となる可能性があります。一方、値が大きすぎると、データベース内に無駄なスペースが増える可能性があります。 
    </p><p>
      競合する行のエントリは、このセクションの他の場所で説明されているのと同じ例外テーブルスキーマルールに従って定義されている場合、<code class="literal">NDB$EPOCH()</code> と <code class="literal">NDB$EPOCH_TRANS()</code> の両方によって関連する例外テーブルに挿入されます (<a class="xref" href="mysql-cluster.html#mysql-cluster-replication-ndb-old" title="NDB$OLD(column_name)">NDB$OLD(column_name)</a> を参照)。 使用するデータテーブルを作成する前に、例外テーブルを作成する必要があります。 
    </p><p>
      <code class="literal">NDB$EPOCH()</code> および <code class="literal">NDB$EPOCH_TRANS()</code> は、このセクションで説明したほかの競合検出関数と同様に、<code class="literal">mysql.ndb_replication</code> テーブルに関連するエントリを含めることで起動されます (<a class="xref" href="mysql-cluster.html#mysql-cluster-ndb-replication-table" title="ndb_replication システムテーブル">ndb_replication システムテーブル</a>を参照してください)。 このシナリオでのプライマリ NDB Cluster とセカンダリ NDB Cluster の役割は、<code class="literal">mysql.ndb_replication</code> テーブルエントリによって完全に決定されます。 
    </p><p>
      <code class="literal">NDB$EPOCH()</code> および <code class="literal">NDB$EPOCH_TRANS()</code> で使用される競合検出アルゴリズムは非対称であるため、プライマリレプリカとセカンダリレプリカの <code class="literal">server_id</code> エントリには異なる値を使用する必要があります。
    </p><p>
      <code class="literal">NDB$EPOCH()</code> または <code class="literal">NDB$EPOCH_TRANS()</code> を使用して競合をトリガーするには、<code class="literal">DELETE</code> 操作間の競合のみでは不十分であり、エポック内の相対的な配置は関係ありません。 (Bug #18459944) 
    </p><p><a name="mysql-cluster-replication-ndb-epoch-statvars"></a><b>競合検出ステータス変数. </b>
        <a class="indexterm" name="idm45563205229040"></a> <a class="indexterm" name="idm45563205226752"></a>競合検出の監視には、いくつかのステータス変数を使用できます。 このレプリカが <code class="literal">Ndb_conflict_fn_epoch</code> システムステータス変数の現在の値から最後に再起動されてから、<code class="literal">NDB$EPOCH()</code> によって競合が検出された行数を確認できます。 
      </p><p>
      <code class="literal">Ndb_conflict_fn_epoch_trans</code> には、<code class="literal">NDB$EPOCH_TRANS()</code> によって直接競合が検出された行数が用意されています。 <code class="literal">Ndb_conflict_fn_epoch2</code> および <code class="literal">Ndb_conflict_fn_epoch2_trans</code> には、<code class="literal">NDB$EPOCH2()</code> および <code class="literal">NDB$EPOCH2_TRANS()</code> によって競合が検出された行数がそれぞれ表示されます。 実際に再編成された行の数 (他の競合する行と同じトランザクションへのメンバーシップまたは同じトランザクションへの依存関係の影響を含む) は、<code class="literal">Ndb_conflict_trans_row_reject_count</code> によって指定されます。 
    </p><p>
      詳細については、<a class="xref" href="mysql-cluster.html#mysql-cluster-status-variables" title="23.3.3.9.3 NDB Cluster ステータス変数">セクション23.3.3.9.3「NDB Cluster ステータス変数」</a>を参照してください。
    </p><p><a name="mysql-cluster-replication-ndb-epoch-limitations"></a><b>NDB$EPOCH() の制約. </b>
        <a class="indexterm" name="idm45563205212304"></a> <code class="literal">NDB$EPOCH()</code> を使用して競合検出を実行する場合、現在次の制限が適用されます:
      </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          NDB Cluster のエポック境界を使用して競合が検出され、<code class="literal">TimeBetweenEpochs</code> に比例した粒度 (デフォルト) : 100 milliseconds). 最小競合ウィンドウは、両方のクラスタの同じデータへの並列更新が常に競合を報告する最小時間です。 これは、常にゼロでない時間であり、<code class="literal">2 * (latency + queueing + TimeBetweenEpochs)</code> にほぼ比例します。 これは、<code class="literal">TimeBetweenEpochs</code> にデフォルトを仮定し、またクラスタ間の待機時間 (およびキューイング遅延) を無視して、最小競合ウィンドウが約 200 ミリ秒であることを意味します。 この最小ウィンドウは、予期されたアプリケーション<span class="quote">「<span class="quote">競争</span>」</span>パターンを調べるときに考慮してください。 
        </p></li><li class="listitem"><p>
          <code class="literal">NDB$EPOCH()</code> および <code class="literal">NDB$EPOCH_TRANS()</code> 関数を使用するテーブルには、追加ストレージが必要です。関数に渡される値によって、1 行当たり 1 ビットから 32 ビットのスペースが必要です。
        </p></li><li class="listitem"><p>
          削除操作の競合は、プライマリとセカンダリの間の相違につながる可能性があります。 行が両方のクラスタ上で同時に削除される場合、競合は検出できますが、行が削除されるために競合は記録されません。 つまり、後続の再編成操作の伝播中にさらに競合が検出されないため、相違が発生する可能性があります。 
        </p><p>
          削除は外部シリアライズするか、1 つのクラスタだけにルーティングしてください。 また、行の削除の間の競合を追跡できるように、このような削除および削除に続く挿入でトランザクションごとに個々の行を更新してください。 これには、アプリケーションの変更が必要となる場合があります。 
        </p></li><li class="listitem"><p>
          競合検出に <code class="literal">NDB$EPOCH()</code> または <code class="literal">NDB$EPOCH_TRANS()</code> を使用している場合、現在、発生 <span class="quote">「<span class="quote">active-active</span>」</span> 構成内の 2 つの NDB Cluster のみがサポートされます。
        </p></li><li class="listitem"><p>
          <code class="literal">BLOB</code> または <code class="literal">TEXT</code> カラムを持つテーブルは、現在 <code class="literal">NDB$EPOCH()</code> または <code class="literal">NDB$EPOCH_TRANS()</code> ではサポートされていません。
        </p></li></ul></div><p><a name="mysql-cluster-replication-ndb-epoch-trans"></a><b>NDB$EPOCH_TRANS(). </b>
        <a class="indexterm" name="idm45563205189744"></a> <code class="literal">NDB$EPOCH_TRANS()</code> は、<code class="literal">NDB$EPOCH()</code> 関数を拡張します。 <span class="quote">「<span class="quote">プライマリがすべてに優先</span>」</span>ルール (<a class="xref" href="mysql-cluster.html#mysql-cluster-replication-ndb-epoch" title="NDB$EPOCH() および NDB$EPOCH_TRANS()">NDB$EPOCH() および NDB$EPOCH_TRANS()</a>を参照してください) を使用する同じ方法で競合が検出され、処理されますが、競合が発生した同じトランザクションで更新されたその他の行も競合していると見なす、という条件が追加されます。 つまり、<code class="literal">NDB$EPOCH()</code> がセカンダリの競合している各行を再編成するのに対して、<code class="literal">NDB$EPOCH_TRANS()</code> は競合しているトランザクションを再編成します。 
      </p><p>
      また、競合しているトランザクションへの依存が検出されたトランザクションも競合していると見なされ、これらの依存関係はセカンダリクラスタのバイナリログの内容によって判断されます。 バイナリログにはデータ変更操作だけ (挿入、更新、削除) が含まれるため、重複するデータの変更だけがトランザクション間の依存関係の判断に使用されます。 
    </p><p>
      <code class="literal">NDB$EPOCH_TRANS()</code> には、<code class="literal">NDB$EPOCH()</code> と同じ条件および制限が適用され、さらに、すべてのトランザクション ID がセカンダリバイナリログ (<code class="option">--ndb-log-transaction-id</code> オプション) に記録され、可変オーバーヘッド (行あたり最大 13 バイト) が追加される必要があります。 非推奨の <code class="literal">log_bin_use_v1_row_events</code> システム変数 (デフォルトは <code class="literal">OFF</code>) は、<code class="literal">NDB$EPOCH_TRANS()</code> を使用した <code class="literal">ON</code> に設定しないでください。 
    </p><p>
      <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-ndb-epoch" title="NDB$EPOCH() および NDB$EPOCH_TRANS()">NDB$EPOCH() および NDB$EPOCH_TRANS()</a>を参照してください。
    </p><p><b>ステータス情報. </b>
        サーバーステータス変数 <code class="literal">Ndb_conflict_fn_max</code> は、<span class="command"><strong>mysqld</strong></span> が最後に起動されてから、<span class="quote">「<span class="quote">もっとも大きいタイムスタンプが優先</span>」</span>競合解決によって現在の SQL ノードに行が適用されなかった回数のカウントを示します。
      </p><p>
      指定された <span class="command"><strong>mysqld</strong></span> が最後に再起動されたあとに<span class="quote">「<span class="quote">同じタイムスタンプが優先</span>」</span>競合解決の結果として行が挿入されなかった回数は、グローバルステータス変数 <code class="literal">Ndb_conflict_fn_old</code> によって取得されます。 <code class="literal">Ndb_conflict_fn_old</code> をインクリメントすること以外に、このセクションの後半の説明のように、使用されなかった行の主キーは <span class="firstterm">例外テーブル</span>に挿入されます。 
    </p><p><a name="mysql-cluster-replication-ndb-epoch2"></a><b>NDB$EPOCH2(). </b>
        <a class="indexterm" name="idm45563205165488"></a> <code class="literal">NDB$EPOCH2()</code> 関数は <code class="literal">NDB$EPOCH()</code> と似ていますが、<code class="literal">NDB$EPOCH2()</code> には双方向レプリケーショントポロジでの削除処理が用意されています。 このシナリオでは、<code class="literal">ndb_slave_conflict_role</code> システム変数を各ソース (通常は各 <code class="literal">PRIMARY</code>、<code class="literal">SECONDARY</code> のいずれか) で適切な値に設定することで、プライマリロールとセカンダリロールが 2 つのソースに割り当てられます。 これが行われると、セカンダリによる変更はプライマリによってセカンダリに反映され、セカンダリは条件付きで適用されます。 
      </p><p><a name="mysql-cluster-replication-ndb-epoch2-trans"></a><b>NDB$EPOCH2_TRANS(). </b>
        <a class="indexterm" name="idm45563205157184"></a> <code class="literal">NDB$EPOCH2_TRANS()</code> は、<code class="literal">NDB$EPOCH2()</code> 関数を拡張します。 競合は同じ方法で検出および処理され、プライマリロールとセカンダリロールがレプリケートクラスタに割り当てられますが、競合が発生した同じトランザクションで更新された他の行も競合とみなされる追加の条件があります。 つまり、<code class="literal">NDB$EPOCH2()</code> ではセカンダリで競合する個々の行が再編成され、<code class="literal">NDB$EPOCH_TRANS()</code> では競合するトランザクションが再編成されます。 
      </p><p>
      <code class="literal">NDB$EPOCH()</code> および <code class="literal">NDB$EPOCH_TRANS()</code> では、最後に変更されたエポックごとに行ごとに指定されたメタデータを使用して、セカンダリからの受信レプリケートされた行変更がローカルでコミットされた変更と並行しているかどうかをプライマリで判断します。同時変更は競合しているとみなされ、セカンダリの例外テーブルの更新および再編成が行われます。 プライマリで行が削除されると問題が発生するため、レプリケートされた操作が競合するかどうかを判断するために使用可能な最終変更エポックはなくなります。つまり、競合する削除操作は検出されません。 これにより相違が生じる可能性があります。たとえば、一方のクラスタでの削除は、他方での削除および挿入と並行しているため、<code class="literal">NDB$EPOCH()</code> および <code class="literal">NDB$EPOCH_TRANS()</code> の使用時に削除操作を一方のクラスタにのみルーティングできます。 
    </p><p>
      <code class="literal">NDB$EPOCH2()</code> では、削除 - 削除の競合を無視し、潜在的な結果の相違を回避することで、削除された行に関する情報を PRIMARY に格納するという問題は回避されます。 これは、セカンダリに正常に適用され、セカンダリからセカンダリにレプリケートされた操作を反映することで実現されます。 セカンダリに戻ると、プライマリから発生した操作によって削除されたセカンダリに操作を再適用するために使用できます。 
    </p><p>
      <code class="literal">NDB$EPOCH2()</code> を使用する場合、セカンダリはプライマリから削除を適用し、反映された操作によってリストアされるまで新しい行を削除することに注意する必要があります。 理論上、セカンダリでの後続の挿入または更新はプライマリからの削除と競合しますが、この場合、クラスタ間の相違を防ぐために、これを無視してセカンダリを <span class="quote">「<span class="quote">win</span>」</span> に許可することを選択します。 つまり、削除後、プライマリは競合を検出せず、すぐにセカンダリの次の変更を採用します。 このため、セカンダリ状態は最終 (安定) 状態に進むと、複数の前のコミット済状態に再アクセスでき、これらの一部が表示される場合があります。 
    </p><p>
      また、セカンダリからプライマリにすべての操作を反映すると、プライマリログバイナリログのサイズが増加し、帯域幅、CPU 使用率およびディスク I/O が必要になることにも注意してください。
    </p><p>
      セカンダリでの反映された操作の適用は、セカンダリのターゲット行の状態によって異なります。 セカンダリに反映された変更が適用されるかどうかは、<code class="literal">Ndb_conflict_reflected_op_prepare_count</code> および <code class="literal">Ndb_conflict_reflected_op_discard_count</code> のステータス変数をチェックすることで追跡できます。 適用される変更の数は、これらの値の違いにすぎません (<code class="literal">Ndb_conflict_reflected_op_prepare_count</code> は常に <code class="literal">Ndb_conflict_reflected_op_discard_count</code> 以上であることに注意してください)。 
    </p><p>
      イベントは、次の両方の条件に該当する場合にのみ適用されます:
    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
          行 (イベントのタイプに従って存在するかどうか) の存在。 削除および更新操作では、行がすでに存在している必要があります。 挿入操作の場合、行は存在していない必要があります。 
        </p></li><li class="listitem"><p>
          行はプライマリによって最後に変更されました。 反映された操作の実行によって変更が行われた可能性があります。 
        </p></li></ul></div><p>
      両方の条件が満たされない場合、反映された操作はセカンダリによって破棄されます。
    </p><p><a name="mysql-cluster-replication-exceptions-table"></a><b>競合解決の例外テーブル. </b>
        <a class="indexterm" name="idm45563205131280"></a> <a class="indexterm" name="idm45563205128992"></a> <code class="literal">NDB$OLD()</code> の競合解消機能を使用するには、このタイプの競合解消を使用する各 <code class="literal">NDB</code> テーブルに対応する例外テーブルも作成する必要があります。 これは、<code class="literal">NDB$EPOCH()</code> または <code class="literal">NDB$EPOCH_TRANS()</code> を使用する場合にも当てはまります。 このテーブルの名前は、競合解決が適用されるテーブルの名前に文字列 <code class="literal">$EX</code> を付加した名前です。 (たとえば、元のテーブルの名前が <code class="literal">mytable</code> である場合、対応する例外テーブルの名前は <code class="literal">mytable$EX</code> になります。) 例外テーブルを作成する構文は、次のとおりです: 
      </p><pre class="programlisting">CREATE TABLE <em class="replaceable"><code>original_table</code></em>$EX  (
    [NDB$]server_id INT UNSIGNED,
    [NDB$]source_server_id INT UNSIGNED,
    [NDB$]source_epoch BIGINT UNSIGNED,
    [NDB$]count INT UNSIGNED,

    [NDB$OP_TYPE ENUM('WRITE_ROW','UPDATE_ROW', 'DELETE_ROW',
      'REFRESH_ROW', 'READ_ROW') NOT NULL,]
    [NDB$CFT_CAUSE ENUM('ROW_DOES_NOT_EXIST', 'ROW_ALREADY_EXISTS',
      'DATA_IN_CONFLICT', 'TRANS_IN_CONFLICT') NOT NULL,]
    [NDB$ORIG_TRANSID BIGINT UNSIGNED NOT NULL,]

    <em class="replaceable"><code>original_table_pk_columns</code></em>,

    [<em class="replaceable"><code>orig_table_column</code></em>|<em class="replaceable"><code>orig_table_column</code></em>$OLD|<em class="replaceable"><code>orig_table_column</code></em>$NEW,]

    [<em class="replaceable"><code>additional_columns</code></em>,]

    PRIMARY KEY([NDB$]server_id, [NDB$]source_server_id, [NDB$]source_epoch, [NDB$]count)
) ENGINE=NDB;
</pre><p>
      最初の 4 つのカラムが必須です。 最初の 4 つのカラムの名前と元のテーブルの主キーカラムと一致するカラムは重要ではありません。ただし、わかりやすく一貫性のある理由から、ここに示す名前を <code class="literal">server_id</code>, <code class="literal">source_server_id</code>, <code class="literal">source_epoch</code> および <code class="literal">count</code> カラムに使用し、元のテーブルの主キーと一致するカラムに元のテーブルと同じ名前を使用することをお薦めします。 
    </p><p>
      例外テーブルで、このセクションの後半で説明するオプションのカラム <code class="literal">NDB$OP_TYPE</code>、<code class="literal">NDB$CFT_CAUSE</code> または <code class="literal">NDB$ORIG_TRANSID</code> を使用する場合は、必要な各カラムに接頭辞 <code class="literal">NDB$</code> を使用して名前を付ける必要があります。 必要に応じて、オプションカラムを定義しない場合でも <code class="literal">NDB$</code> プリフィクスを使用して必須カラムに名前を付けることができます。ただしこの場合、4 つすべての必須カラムにプリフィクスを使用して名前を付ける必要があります。 
    </p><p>
      このカラムに続き、元のテーブルの主キーを構成するカラムは、元のテーブルの主キーの定義に使用される順番でコピーをしてください。 元のテーブルの主キーカラムを複製するカラムのデータ型は、元のカラムと同じ (または大きい) データ型にしてください。 主キーカラムのサブセットを使用できます。 
    </p><p>
      例外テーブルでは、<code class="literal">NDB</code> ストレージエンジンを使用する必要があります。 (例外テーブルで <code class="literal">NDB$OLD()</code> を使用する例は、このセクションの後半で示します。) 
    </p><p>
      オプションで、コピーされる主キーカラムのあとに追加カラムを定義できますが、その前に追加カラムを定義することはできません。このような追加カラムは <code class="literal">NOT NULL</code> にはできません。 NDB Cluster は、次のいくつかの段落で説明する、3 つの事前定義された追加のオプションカラム <code class="literal">NDB$OP_TYPE</code>、<code class="literal">NDB$CFT_CAUSE</code>、および <code class="literal">NDB$ORIG_TRANSID</code> をサポートしています。 
    </p><p>
      <a class="indexterm" name="idm45563205099392"></a> <code class="literal">NDB$OP_TYPE</code>: このカラムを使用して、競合の原因となっている操作のタイプを取得できます。 このカラムを使用する場合、ここで示すように定義します。 
    </p><pre class="programlisting">NDB$OP_TYPE ENUM('WRITE_ROW', 'UPDATE_ROW', 'DELETE_ROW',
    'REFRESH_ROW', 'READ_ROW') NOT NULL
</pre><p>
      <code class="literal">WRITE_ROW</code>、<code class="literal">UPDATE_ROW</code>、および <code class="literal">DELETE_ROW</code> 操作タイプは、ユーザー起動の操作を表します。 <code class="literal">REFRESH_ROW</code> 操作は、競合を検出したクラスタから元のクラスタに戻されたトランザクションを相殺するときに、競合解決によって生成される操作です。 <code class="literal">READ_ROW</code> 操作は、排他的行ロックを使用して定義される、ユーザー起動の読み取り追跡操作です。 
    </p><p>
      <a class="indexterm" name="idm45563205091088"></a> <code class="literal">NDB$CFT_CAUSE</code>: 登録された競合の原因を示すオプションのカラム <code class="literal">NDB$CFT_CAUSE</code> を定義できます。 このカラムは、使用する場合、ここで示すように定義されます。 
    </p><pre class="programlisting">NDB$CFT_CAUSE ENUM('ROW_DOES_NOT_EXIST', 'ROW_ALREADY_EXISTS',
    'DATA_IN_CONFLICT', 'TRANS_IN_CONFLICT') NOT NULL
</pre><p>
      <code class="literal">ROW_DOES_NOT_EXIST</code> は <code class="literal">UPDATE_ROW</code> および <code class="literal">WRITE_ROW</code> 操作の原因として報告できます。<code class="literal">ROW_ALREADY_EXISTS</code> は <code class="literal">WRITE_ROW</code> イベントに対して報告できます。 <code class="literal">DATA_IN_CONFLICT</code> は、行ベースの競合関数が競合を検出した場合に報告されます。<code class="literal">TRANS_IN_CONFLICT</code> は、トランザクション競合関数がトランザクション全体に属するすべての操作を拒否する場合に報告されます。 
    </p><p>
      <a class="indexterm" name="idm45563205080752"></a> <code class="literal">NDB$ORIG_TRANSID</code>: <code class="literal">NDB$ORIG_TRANSID</code> カラム (使用する場合) には、元のトランザクションの ID が含まれます。 このカラムは次のように定義されます。 
    </p><pre class="programlisting">NDB$ORIG_TRANSID BIGINT UNSIGNED NOT NULL
</pre><p>
      <code class="literal">NDB$ORIG_TRANSID</code> は <code class="literal">NDB</code> によって生成される 64 ビットの値です。 この値は、同じまたは異なる例外テーブルから同じ競合トランザクションに属する複数の例外テーブルのエントリを相互に関連付けるために使用されます。 
    </p><p>
      元のテーブルの主キーの一部ではない追加の参照カラムには、<code class="literal"><em class="replaceable"><code>colname</code></em>$OLD</code> または <code class="literal"><em class="replaceable"><code>colname</code></em>$NEW</code> という名前を付けることができます。<code class="literal"><em class="replaceable"><code>colname</code></em>$OLD</code> は、更新および削除操作 (<code class="literal">DELETE_ROW</code> イベントを含む操作) で古い値を参照します。<code class="literal"><em class="replaceable"><code>colname</code></em>$NEW</code> を使用すると、挿入および更新操作、つまり <code class="literal">WRITE_ROW</code> イベント、<code class="literal">UPDATE_ROW</code> イベントまたは両方のタイプのイベントを使用した操作で新しい値を参照できます。 競合する操作で主キーではない特定の参照カラムの値が指定されていない場合、例外テーブルの行には、<code class="literal">NULL</code> またはそのカラムに定義されているデフォルト値が含まれます。 
    </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">重要</div><p>
        <code class="literal">mysql.ndb_replication</code> テーブルは、データテーブルがレプリケーション用にセットアップされたときに読み取られるため、複製されるテーブルに対応する行は、複製されるテーブルが作成される<span class="emphasis"><em>前</em></span>に <code class="literal">mysql.ndb_replication</code> に挿入する必要があります。
      </p></div><h4><a name="idm45563205061904"></a>例</h4><p>
      次の例では、<a class="xref" href="mysql-cluster.html#mysql-cluster-replication-preparation" title="23.6.5 NDB Cluster のレプリケーションの準備">セクション23.6.5「NDB Cluster のレプリケーションの準備」</a> および <a class="xref" href="mysql-cluster.html#mysql-cluster-replication-starting" title="23.6.6 NDB Cluster レプリケーションの開始 (シングルレプリケーションチャネル)">セクション23.6.6「NDB Cluster レプリケーションの開始 (シングルレプリケーションチャネル)」</a> で説明されているように、NDB Cluster レプリケーションがすでに機能していることを前提としています。
    </p><p><a name="mysql-cluster-replication-examples-ndbmax"></a><b>NDB$MAX() の例. </b>
        <span class="quote">「<span class="quote">タイムスタンプ</span>」</span> としてカラム <code class="literal">mycol</code> を使用して、テーブル <code class="literal">test.t1</code> で<span class="quote">「<span class="quote">もっとも大きいタイムスタンプが優先</span>」</span>競合解決を有効にするものとします。 これは、次のステップで実行できます。 
      </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
          ソース <span class="command"><strong>mysqld</strong></span> と <code class="option">--ndb-log-update-as-write=OFF</code> が起動されていることを確認します。
        </p></li><li class="listitem"><p>
          ソースで、次の <code class="literal">INSERT</code> ステートメントを実行します:
        </p><pre class="programlisting">INSERT INTO mysql.ndb_replication
    VALUES ('test', 't1', 0, NULL, 'NDB$MAX(mycol)');
</pre><p>
          <code class="literal">server_id</code> に 0 を挿入すると、このテーブルにアクセスするすべての SQL ノードが競合解決を使用します。 特定の <span class="command"><strong>mysqld</strong></span> だけで競合解決を使用する場合は、実際のサーバー ID を使用します。 
        </p><p>
          <code class="literal">binlog_type</code> カラムに <code class="literal">NULL</code> を挿入すると、0 (<code class="literal">NBT_DEFAULT</code>) の挿入と同じ効果があり、サーバーのデフォルトが使用されます。
        </p></li><li class="listitem"><p>
          <code class="literal">test.t1</code> テーブルを作成します。
        </p><pre class="programlisting">CREATE TABLE test.t1 (
    <em class="replaceable"><code>columns</code></em>
    mycol INT UNSIGNED,
    <em class="replaceable"><code>columns</code></em>
) ENGINE=NDB;
</pre><p>
          これで、このテーブルで更新が実行されると、競合解消が適用され、<code class="literal">mycol</code> の最大値を持つ行のバージョンがレプリカに書き込まれます。
        </p></li></ol></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
        コマンドラインオプションを使用するのではなく、<code class="literal">ndb_replication</code> テーブルを使用してソースのロギングを制御するには、<code class="literal">NBT_UPDATED_ONLY_USE_UPDATE</code> としてのその他の <code class="literal">binlog_type</code> オプションを使用する必要があります。
      </p></div><p><a name="mysql-cluster-replication-examples-ndbold"></a><b>NDB$OLD() の例. </b>
        <code class="literal">NDB</code> テーブル (ここで定義されたテーブルなど) が複製中であり、このテーブルへの更新に<span class="quote">「<span class="quote">同じタイムスタンプが優先</span>」</span>競合解決を有効にするものとします。
      </p><pre class="programlisting">CREATE TABLE test.t2  (
    a INT UNSIGNED NOT NULL,
    b CHAR(25) NOT NULL,
    <em class="replaceable"><code>columns</code></em>,
    mycol INT UNSIGNED NOT NULL,
    <em class="replaceable"><code>columns</code></em>,
    PRIMARY KEY pk (a, b)
)   ENGINE=NDB;
</pre><p>
      ここで示す順番で、次のステップが必要です。
    </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
          まず (<code class="literal">test.t2</code> を作成する<span class="emphasis"><em>前に</em></span>)、ここで示すように <a class="link" href="mysql-cluster.html#mysql-cluster-ndb-replication-table" title="ndb_replication システムテーブル"><code class="literal">mysql.ndb_replication</code></a> テーブルに行を挿入する必要があります。
        </p><pre class="programlisting">INSERT INTO mysql.ndb_replication
    VALUES ('test', 't2', 0, NULL, 'NDB$OLD(mycol)');
</pre><p>
          <code class="literal">binlog_type</code> カラムに可能な値は、このセクションの前半に示しています。 値 <code class="literal">'NDB$OLD(mycol)'</code> を <code class="literal">conflict_fn</code> カラムに挿入してください。 
        </p></li><li class="listitem"><p>
          <code class="literal">test.t2</code> に対応する例外テーブルを作成します。 ここに示すテーブル作成ステートメントには、必要なすべてのカラムが含まれます。これらのカラムの後、およびテーブル主キーの定義の前に、追加のカラムを宣言する必要があります。 
        </p><pre class="programlisting">CREATE TABLE test.t2$EX  (
    server_id INT UNSIGNED,
    source_server_id INT UNSIGNED,
    source_epoch BIGINT UNSIGNED,
    count INT UNSIGNED,
    a INT UNSIGNED NOT NULL,
    b CHAR(25) NOT NULL,

    [<em class="replaceable"><code>additional_columns</code></em>,]

    PRIMARY KEY(server_id, source_server_id, source_epoch, count)
)   ENGINE=NDB;
</pre><p>
          特定の競合のタイプ、原因および元のトランザクション ID に関する情報を示す追加のカラムを含めることができます。 元のテーブルのすべての主キーカラムに一致するカラムを提供する必要もありません。 つまり、次のような例外テーブルを作成できます: 
        </p><pre class="programlisting">CREATE TABLE test.t2$EX  (
    NDB$server_id INT UNSIGNED,
    NDB$source_server_id INT UNSIGNED,
    NDB$source_epoch BIGINT UNSIGNED,
    NDB$count INT UNSIGNED,
    a INT UNSIGNED NOT NULL,

    NDB$OP_TYPE ENUM('WRITE_ROW','UPDATE_ROW', 'DELETE_ROW',
      'REFRESH_ROW', 'READ_ROW') NOT NULL,
    NDB$CFT_CAUSE ENUM('ROW_DOES_NOT_EXIST', 'ROW_ALREADY_EXISTS',
      'DATA_IN_CONFLICT', 'TRANS_IN_CONFLICT') NOT NULL,
    NDB$ORIG_TRANSID BIGINT UNSIGNED NOT NULL,

    [<em class="replaceable"><code>additional_columns</code></em>,]

    PRIMARY KEY(NDB$server_id, NDB$source_server_id, NDB$source_epoch, NDB$count)
)   ENGINE=NDB;
</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><div class="admon-title">注記</div><p>
            テーブル定義に <code class="literal">NDB$OP_TYPE</code>、<code class="literal">NDB$CFT_CAUSE</code> または <code class="literal">NDB$ORIG_TRANSID</code> のいずれかのカラムが含まれているため、4 つの必須カラムには <code class="literal">NDB$</code> 接頭辞が必要です。
          </p></div></li><li class="listitem"><p>
          前に示したように、テーブル <code class="literal">test.t2</code> を作成します。
        </p></li></ol></div><p>
      <code class="literal">NDB$OLD()</code> を使用して競合解決を実行するテーブルごとに、これらのステップに従う必要があります。 このようなテーブルごとに、<code class="literal">mysql.ndb_replication</code> に対応する行があり、複製されているテーブルと同じデータベースに例外テーブルがある必要があります。 
    </p><a class="indexterm" name="idm45563205006448"></a><a class="indexterm" name="idm45563205004208"></a><p><a name="mysql-cluster-replication-examples-read-conflicts"></a><b>読み取り競合の検出と解決. </b>
        NDB Cluster は読み取り操作の追跡もサポートしているため、循環レプリケーション設定で、あるクラスタ内の特定の行の読み取りと別のクラスタ内の同じ行の更新または削除との間の競合を管理できます。 この例では、レプリカクラスタ (<span class="emphasis"><em>B</em></span>) がインターリーブされたトランザクションで従業員の前部門の従業員数を更新している間に、<code class="literal">employee</code> および <code class="literal">department</code> テーブルを使用して、従業員がソースクラスタ上のある部門から別の部門に異動されるシナリオをモデル化します (これ以降、クラスタ <span class="emphasis"><em>A</em></span> と呼びます)。 
      </p><p>
      データテーブルは次の SQL ステートメントで作成されました。
    </p><pre class="programlisting"># Employee table
CREATE TABLE employee (
    id INT PRIMARY KEY,
    name VARCHAR(2000),
    dept INT NOT NULL
)   ENGINE=NDB;

# Department table
CREATE TABLE department (
    id INT PRIMARY KEY,
    name VARCHAR(2000),
    members INT
)   ENGINE=NDB;
</pre><p>
      2 つのテーブルの内容は、次の <code class="literal">SELECT</code> ステートメントの出力 (一部) に示される行を含みます。
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT id, name, dept FROM employee;</code></strong>
+---------------+------+
| id   | name   | dept |
+------+--------+------+
...
| 998  |  Mike  | 3    |
| 999  |  Joe   | 3    |
| 1000 |  Mary  | 3    |
...
+------+--------+------+

mysql&gt; <strong class="userinput"><code>SELECT id, name, members FROM department;</code></strong>
+-----+-------------+---------+
| id  | name        | members |
+-----+-------------+---------+
...
| 3   | Old project | 24      |
...
+-----+-------------+---------+
</pre><p>
      4 つの必須カラム (これらはこのテーブルの主キーに使用されます)、操作タイプと原因用のオプションカラム、および元のテーブルの主キーカラムを含んだ、ここで示した SQL ステートメントで作成された例外テーブルをすでに使用しているものとします。
    </p><pre class="programlisting">CREATE TABLE employee$EX  (
    NDB$server_id INT UNSIGNED,
    NDB$source_server_id INT UNSIGNED,
    NDB$source_epoch BIGINT UNSIGNED,
    NDB$count INT UNSIGNED,

    NDB$OP_TYPE ENUM( 'WRITE_ROW','UPDATE_ROW', 'DELETE_ROW',
                      'REFRESH_ROW','READ_ROW') NOT NULL,
    NDB$CFT_CAUSE ENUM( 'ROW_DOES_NOT_EXIST',
                        'ROW_ALREADY_EXISTS',
                        'DATA_IN_CONFLICT',
                        'TRANS_IN_CONFLICT') NOT NULL,

    id INT NOT NULL,

    PRIMARY KEY(NDB$server_id, NDB$source_server_id, NDB$source_epoch, NDB$count)
)   ENGINE=NDB;
</pre><p>
      2 つのクラスタ上で同時に 2 つのトランザクションが発生するものとします。 クラスタ <span class="emphasis"><em>A</em></span> では、新しい部門を作成してから、従業員番号 999 をその部門に移動します。次の SQL ステートメントを使用します。 
    </p><pre class="programlisting"><code class="literal">BEGIN</code>;
  <code class="literal">INSERT</code> INTO department VALUES (4, "New project", 1);
  <span class="emphasis"><em><code class="literal">UPDATE</code> employee SET dept = 4 WHERE id = 999;</em></span>
COMMIT;
</pre><p>
      同時にクラスタ <span class="emphasis"><em>B</em></span> では、次に示すように、別のトランザクションが <code class="literal">employee</code> から読み取ります。
    </p><pre class="programlisting">BEGIN;
  <span class="emphasis"><em>SELECT name FROM employee WHERE id = 999;</em></span>
  UPDATE department SET members = members - 1  WHERE id = 3;
commit;
</pre><a class="indexterm" name="idm45563204978496"></a><p>
      競合しているトランザクションは、通常は競合解決メカニズムで検出されません。これは、競合が読み取り (<code class="literal">SELECT</code>) と更新操作の間で発生しているためです。 この問題を回避するには、レプリカクラスタで <code class="literal">SET</code> <code class="literal">ndb_log_exclusive_reads</code> <code class="literal">= 1</code> を実行します。 この方法で排他読取りロックを取得すると、ソースで読み取られた行にレプリカクラスタで競合解決が必要であるというフラグが付けられます。 これらのトランザクションのロギングの前にこの方法で排他読取りを有効にすると、クラスタ <span class="emphasis"><em>B</em></span> での読取りが追跡され、解決のためにクラスタ <span class="emphasis"><em>A</em></span> に送信されます。その後、従業員行での競合が検出され、クラスタ <span class="emphasis"><em>B</em></span> でのトランザクションが中断されます。 
    </p><p>
      競合は、ここで示すように (クラスタ <span class="emphasis"><em>A</em></span> にある) 例外テーブルに <code class="literal">READ_ROW</code> 操作として登録されます (操作タイプの説明については、<a class="xref" href="mysql-cluster.html#mysql-cluster-replication-exceptions-table" title="競合解決の例外テーブル">競合解決の例外テーブル</a>を参照してください)。
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT id, NDB$OP_TYPE, NDB$CFT_CAUSE FROM employee$EX;</code></strong>
+-------+-------------+-------------------+
| id    | NDB$OP_TYPE | NDB$CFT_CAUSE     |
+-------+-------------+-------------------+
...
| 999   | READ_ROW    | TRANS_IN_CONFLICT |
+-------+-------------+-------------------+
</pre><p>
      読み取り操作で検出された、存在するどの行にもフラグが付けられます。 すなわち、ここで示すように、クラスタ <span class="emphasis"><em>A</em></span> での更新と、同時に発生したトランザクションで同じテーブルからのクラスタ <span class="emphasis"><em>B</em></span> での複数行の読み取りとの間で競合の影響を調べることで、例外テーブルに同じ競合に起因する複数の行のログが取られる場合があります。 ここで、クラスタ <span class="emphasis"><em>A</em></span> で実行されるトランザクションを示します。 
    </p><pre class="programlisting">BEGIN;
  INSERT INTO department VALUES (4, "New project", 0);
  <span class="emphasis"><em>UPDATE employee SET dept = 4 WHERE dept = 3;</em></span>
  SELECT COUNT(*) INTO @count FROM employee WHERE dept = 4;
  UPDATE department SET members = @count WHERE id = 4;
COMMIT;
</pre><p>
      同時に、ここで示すステートメントを含むトランザクションがクラスタ <span class="emphasis"><em>B</em></span> で実行されます。
    </p><pre class="programlisting">SET ndb_log_exclusive_reads = 1;  # Must be set if not already enabled
...
BEGIN;
  <span class="emphasis"><em>SELECT COUNT(*) INTO @count FROM employee WHERE dept = 3 FOR UPDATE;</em></span>
  UPDATE department SET members = @count WHERE id = 3;
COMMIT;
</pre><p>
      この場合、ここで示すように、2 番目のトランザクションの <code class="literal">SELECT</code> の中の <code class="literal">WHERE</code> 条件に一致する 3 つすべての行が読み取られ、例外テーブルでフラグが付けられます。
    </p><pre class="programlisting">mysql&gt; <strong class="userinput"><code>SELECT id, NDB$OP_TYPE, NDB$CFT_CAUSE FROM employee$EX;</code></strong>
+-------+-------------+-------------------+
| id    | NDB$OP_TYPE | NDB$CFT_CAUSE     |
+-------+-------------+-------------------+
...
| 998   | READ_ROW    | TRANS_IN_CONFLICT |
| 999   | READ_ROW    | TRANS_IN_CONFLICT |
| 1000  | READ_ROW    | TRANS_IN_CONFLICT |
...
+-------+-------------+-------------------+
</pre><p>
      読み取りの追跡は、存在する行だけに基づいて行われます。 特定条件の追跡に基づく読み取りは、<span class="emphasis"><em>検出された</em></span>行だけと競合し、インターリーブされたトランザクションで挿入された行とは競合しません。 これは、NDB Cluster の単一インスタンスで排他的行ロックが実行される方法に似ています。 
    </p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mysql-cluster-news"></a>23.7 NDB Cluster リリースノート</h2></div></div></div><p>
      NDB Cluster リリースでの変更は、このリファレンスマニュアルとは別にドキュメント化されています。NDB Cluster 8.0 の各リリースの変更に関するリリースノートは、<a class="ulink" href="https://dev.mysql.com/doc/relnotes/mysql-cluster/8.0/en/" target="_top">「NDB 8.0 リリースノート」</a>にあります。
    </p><p>
      NDB Cluster の古いバージョンのリリースノートは、<a class="ulink" href="https://dev.mysql.com/doc/index-cluster.html#cluster-relnotes" target="_top">「NDB Cluster リリースノート」</a>から入手できます。
    </p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="mysql-innodb-replicaset-introduction.html">前</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="partitioning.html">次へ</a></td></tr><tr><td width="40%" align="left" valign="top">第 22 章 InnoDB ReplicaSet </td><td width="20%" align="center"><a accesskey="h" href="index.html">ホーム</a></td><td width="40%" align="right" valign="top"> 第 24 章 パーティション化</td></tr></table></div><div class="copyright-footer"></div></body></html>
